(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function CN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C1={exports:{}},Pf={},P1={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=Symbol.for("react.element"),PN=Symbol.for("react.portal"),kN=Symbol.for("react.fragment"),NN=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),ON=Symbol.for("react.provider"),LN=Symbol.for("react.context"),FN=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),MN=Symbol.for("react.memo"),UN=Symbol.for("react.lazy"),iE=Symbol.iterator;function BN(n){return n===null||typeof n!="object"?null:(n=iE&&n[iE]||n["@@iterator"],typeof n=="function"?n:null)}var k1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N1=Object.assign,D1={};function ul(n,e,t){this.props=n,this.context=e,this.refs=D1,this.updater=t||k1}ul.prototype.isReactComponent={};ul.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ul.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function O1(){}O1.prototype=ul.prototype;function Ev(n,e,t){this.props=n,this.context=e,this.refs=D1,this.updater=t||k1}var Tv=Ev.prototype=new O1;Tv.constructor=Ev;N1(Tv,ul.prototype);Tv.isPureReactComponent=!0;var sE=Array.isArray,L1=Object.prototype.hasOwnProperty,Iv={current:null},F1={key:!0,ref:!0,__self:!0,__source:!0};function V1(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)L1.call(e,r)&&!F1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xc,type:n,key:s,ref:o,props:i,_owner:Iv.current}}function jN(n,e){return{$$typeof:xc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function bv(n){return typeof n=="object"&&n!==null&&n.$$typeof===xc}function zN(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var oE=/\/+/g;function Yp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?zN(""+n.key):e.toString(36)}function td(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case xc:case PN:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Yp(o,0):r,sE(i)?(t="",n!=null&&(t=n.replace(oE,"$&/")+"/"),td(i,e,t,"",function(u){return u})):i!=null&&(bv(i)&&(i=jN(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(oE,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sE(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Yp(s,a);o+=td(s,e,t,l,i)}else if(l=BN(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Yp(s,a++),o+=td(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _h(n,e,t){if(n==null)return n;var r=[],i=0;return td(n,r,"","",function(s){return e.call(t,s,i++)}),r}function $N(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Cn={current:null},nd={transition:null},WN={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:nd,ReactCurrentOwner:Iv};qe.Children={map:_h,forEach:function(n,e,t){_h(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _h(n,function(){e++}),e},toArray:function(n){return _h(n,function(e){return e})||[]},only:function(n){if(!bv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qe.Component=ul;qe.Fragment=kN;qe.Profiler=DN;qe.PureComponent=Ev;qe.StrictMode=NN;qe.Suspense=VN;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN;qe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=N1({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Iv.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)L1.call(e,l)&&!F1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:xc,type:n.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(n){return n={$$typeof:LN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:ON,_context:n},n.Consumer=n};qe.createElement=V1;qe.createFactory=function(n){var e=V1.bind(null,n);return e.type=n,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(n){return{$$typeof:FN,render:n}};qe.isValidElement=bv;qe.lazy=function(n){return{$$typeof:UN,_payload:{_status:-1,_result:n},_init:$N}};qe.memo=function(n,e){return{$$typeof:MN,type:n,compare:e===void 0?null:e}};qe.startTransition=function(n){var e=nd.transition;nd.transition={};try{n()}finally{nd.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(n,e){return Cn.current.useCallback(n,e)};qe.useContext=function(n){return Cn.current.useContext(n)};qe.useDebugValue=function(){};qe.useDeferredValue=function(n){return Cn.current.useDeferredValue(n)};qe.useEffect=function(n,e){return Cn.current.useEffect(n,e)};qe.useId=function(){return Cn.current.useId()};qe.useImperativeHandle=function(n,e,t){return Cn.current.useImperativeHandle(n,e,t)};qe.useInsertionEffect=function(n,e){return Cn.current.useInsertionEffect(n,e)};qe.useLayoutEffect=function(n,e){return Cn.current.useLayoutEffect(n,e)};qe.useMemo=function(n,e){return Cn.current.useMemo(n,e)};qe.useReducer=function(n,e,t){return Cn.current.useReducer(n,e,t)};qe.useRef=function(n){return Cn.current.useRef(n)};qe.useState=function(n){return Cn.current.useState(n)};qe.useSyncExternalStore=function(n,e,t){return Cn.current.useSyncExternalStore(n,e,t)};qe.useTransition=function(){return Cn.current.useTransition()};qe.version="18.2.0";P1.exports=qe;var St=P1.exports;const qN=CN(St);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN=St,HN=Symbol.for("react.element"),KN=Symbol.for("react.fragment"),QN=Object.prototype.hasOwnProperty,YN=GN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XN={key:!0,ref:!0,__self:!0,__source:!0};function M1(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QN.call(e,r)&&!XN.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:HN,type:n,key:s,ref:o,props:i,_owner:YN.current}}Pf.Fragment=KN;Pf.jsx=M1;Pf.jsxs=M1;C1.exports=Pf;var M=C1.exports,Dg={},U1={exports:{}},Jn={},B1={exports:{}},j1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(de,te){var pe=de.length;de.push(te);e:for(;0<pe;){var Y=pe-1>>>1,B=de[Y];if(0<i(B,te))de[Y]=te,de[pe]=B,pe=Y;else break e}}function t(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var te=de[0],pe=de.pop();if(pe!==te){de[0]=pe;e:for(var Y=0,B=de.length,Z=B>>>1;Y<Z;){var ee=2*(Y+1)-1,le=de[ee],X=ee+1,R=de[X];if(0>i(le,pe))X<B&&0>i(R,le)?(de[Y]=R,de[X]=pe,Y=X):(de[Y]=le,de[ee]=pe,Y=ee);else if(X<B&&0>i(R,pe))de[Y]=R,de[X]=pe,Y=X;else break e}}return te}function i(de,te){var pe=de.sortIndex-te.sortIndex;return pe!==0?pe:de.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,y=!1,E=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(de){for(var te=t(u);te!==null;){if(te.callback===null)r(u);else if(te.startTime<=de)r(u),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(u)}}function D(de){if(_=!1,I(de),!E)if(t(l)!==null)E=!0,be(F);else{var te=t(u);te!==null&&ie(D,te.startTime-de)}}function F(de,te){E=!1,_&&(_=!1,m(N),N=-1),y=!0;var pe=p;try{for(I(te),d=t(l);d!==null&&(!(d.expirationTime>te)||de&&!G());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,p=d.priorityLevel;var B=Y(d.expirationTime<=te);te=n.unstable_now(),typeof B=="function"?d.callback=B:d===t(l)&&r(l),I(te)}else r(l);d=t(l)}if(d!==null)var Z=!0;else{var ee=t(u);ee!==null&&ie(D,ee.startTime-te),Z=!1}return Z}finally{d=null,p=pe,y=!1}}var $=!1,k=null,N=-1,T=5,U=-1;function G(){return!(n.unstable_now()-U<T)}function O(){if(k!==null){var de=n.unstable_now();U=de;var te=!0;try{te=k(!0,de)}finally{te?V():($=!1,k=null)}}else $=!1}var V;if(typeof v=="function")V=function(){v(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,re=L.port2;L.port1.onmessage=O,V=function(){re.postMessage(null)}}else V=function(){b(O,0)};function be(de){k=de,$||($=!0,V())}function ie(de,te){N=b(function(){de(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(de){de.callback=null},n.unstable_continueExecution=function(){E||y||(E=!0,be(F))},n.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<de?Math.floor(1e3/de):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(de){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var pe=p;p=te;try{return de()}finally{p=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(de,te){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var pe=p;p=de;try{return te()}finally{p=pe}},n.unstable_scheduleCallback=function(de,te,pe){var Y=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Y+pe:Y):pe=Y,de){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=pe+B,de={id:h++,callback:te,priorityLevel:de,startTime:pe,expirationTime:B,sortIndex:-1},pe>Y?(de.sortIndex=pe,e(u,de),t(l)===null&&de===t(u)&&(_?(m(N),N=-1):_=!0,ie(D,pe-Y))):(de.sortIndex=B,e(l,de),E||y||(E=!0,be(F))),de},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(de){var te=p;return function(){var pe=p;p=te;try{return de.apply(this,arguments)}finally{p=pe}}}})(j1);B1.exports=j1;var JN=B1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=St,Yn=JN;function Te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $1=new Set,Uu={};function Ro(n,e){Oa(n,e),Oa(n+"Capture",e)}function Oa(n,e){for(Uu[n]=e,n=0;n<e.length;n++)$1.add(e[n])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Og=Object.prototype.hasOwnProperty,ZN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aE={},lE={};function eD(n){return Og.call(lE,n)?!0:Og.call(aE,n)?!1:ZN.test(n)?lE[n]=!0:(aE[n]=!0,!1)}function tD(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nD(n,e,t,r){if(e===null||typeof e>"u"||tD(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ln[n]=new Pn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ln[e]=new Pn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ln[n]=new Pn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ln[n]=new Pn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ln[n]=new Pn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ln[n]=new Pn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ln[n]=new Pn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ln[n]=new Pn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ln[n]=new Pn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Av=/[\-:]([a-z])/g;function xv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Av,xv);ln[e]=new Pn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Av,xv);ln[e]=new Pn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Av,xv);ln[e]=new Pn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ln[n]=new Pn(n,1,!1,n.toLowerCase(),null,!1,!1)});ln.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ln[n]=new Pn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Sv(n,e,t,r){var i=ln.hasOwnProperty(e)?ln[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nD(e,t,i,r)&&(t=null),r||i===null?eD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var wi=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wh=Symbol.for("react.element"),sa=Symbol.for("react.portal"),oa=Symbol.for("react.fragment"),Rv=Symbol.for("react.strict_mode"),Lg=Symbol.for("react.profiler"),W1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),Vg=Symbol.for("react.suspense_list"),Pv=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),G1=Symbol.for("react.offscreen"),uE=Symbol.iterator;function Ul(n){return n===null||typeof n!="object"?null:(n=uE&&n[uE]||n["@@iterator"],typeof n=="function"?n:null)}var bt=Object.assign,Xp;function ou(n){if(Xp===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Xp=e&&e[1]||""}return`
`+Xp+n}var Jp=!1;function Zp(n,e){if(!n||Jp)return"";Jp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ou(n):""}function rD(n){switch(n.tag){case 5:return ou(n.type);case 16:return ou("Lazy");case 13:return ou("Suspense");case 19:return ou("SuspenseList");case 0:case 2:case 15:return n=Zp(n.type,!1),n;case 11:return n=Zp(n.type.render,!1),n;case 1:return n=Zp(n.type,!0),n;default:return""}}function Mg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case oa:return"Fragment";case sa:return"Portal";case Lg:return"Profiler";case Rv:return"StrictMode";case Fg:return"Suspense";case Vg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case q1:return(n.displayName||"Context")+".Consumer";case W1:return(n._context.displayName||"Context")+".Provider";case Cv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Pv:return e=n.displayName||null,e!==null?e:Mg(n.type)||"Memo";case Ui:e=n._payload,n=n._init;try{return Mg(n(e))}catch{}}return null}function iD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mg(e);case 8:return e===Rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function os(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function H1(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sD(n){var e=H1(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Eh(n){n._valueTracker||(n._valueTracker=sD(n))}function K1(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=H1(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function kd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ug(n,e){var t=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function cE(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=os(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Q1(n,e){e=e.checked,e!=null&&Sv(n,"checked",e,!1)}function Bg(n,e){Q1(n,e);var t=os(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?jg(n,e.type,t):e.hasOwnProperty("defaultValue")&&jg(n,e.type,os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function hE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function jg(n,e,t){(e!=="number"||kd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var au=Array.isArray;function va(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+os(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function zg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function dE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Te(92));if(au(t)){if(1<t.length)throw Error(Te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:os(t)}}function Y1(n,e){var t=os(e.value),r=os(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function fE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function X1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $g(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?X1(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Th,J1=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Th.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Bu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oD=["Webkit","ms","Moz","O"];Object.keys(vu).forEach(function(n){oD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vu[e]=vu[n]})});function Z1(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vu.hasOwnProperty(n)&&vu[n]?(""+e).trim():e+"px"}function eA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Z1(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var aD=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wg(n,e){if(e){if(aD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function qg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gg=null;function kv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Hg=null,_a=null,wa=null;function pE(n){if(n=Cc(n)){if(typeof Hg!="function")throw Error(Te(280));var e=n.stateNode;e&&(e=Lf(e),Hg(n.stateNode,n.type,e))}}function tA(n){_a?wa?wa.push(n):wa=[n]:_a=n}function nA(){if(_a){var n=_a,e=wa;if(wa=_a=null,pE(n),e)for(n=0;n<e.length;n++)pE(e[n])}}function rA(n,e){return n(e)}function iA(){}var em=!1;function sA(n,e,t){if(em)return n(e,t);em=!0;try{return rA(n,e,t)}finally{em=!1,(_a!==null||wa!==null)&&(iA(),nA())}}function ju(n,e){var t=n.stateNode;if(t===null)return null;var r=Lf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Te(231,e,typeof t));return t}var Kg=!1;if(di)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){Kg=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{Kg=!1}function lD(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var _u=!1,Nd=null,Dd=!1,Qg=null,uD={onError:function(n){_u=!0,Nd=n}};function cD(n,e,t,r,i,s,o,a,l){_u=!1,Nd=null,lD.apply(uD,arguments)}function hD(n,e,t,r,i,s,o,a,l){if(cD.apply(this,arguments),_u){if(_u){var u=Nd;_u=!1,Nd=null}else throw Error(Te(198));Dd||(Dd=!0,Qg=u)}}function Co(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function oA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function mE(n){if(Co(n)!==n)throw Error(Te(188))}function dD(n){var e=n.alternate;if(!e){if(e=Co(n),e===null)throw Error(Te(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return mE(i),n;if(s===r)return mE(i),e;s=s.sibling}throw Error(Te(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Te(189))}}if(t.alternate!==r)throw Error(Te(190))}if(t.tag!==3)throw Error(Te(188));return t.stateNode.current===t?n:e}function aA(n){return n=dD(n),n!==null?lA(n):null}function lA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=lA(n);if(e!==null)return e;n=n.sibling}return null}var uA=Yn.unstable_scheduleCallback,gE=Yn.unstable_cancelCallback,fD=Yn.unstable_shouldYield,pD=Yn.unstable_requestPaint,Ot=Yn.unstable_now,mD=Yn.unstable_getCurrentPriorityLevel,Nv=Yn.unstable_ImmediatePriority,cA=Yn.unstable_UserBlockingPriority,Od=Yn.unstable_NormalPriority,gD=Yn.unstable_LowPriority,hA=Yn.unstable_IdlePriority,kf=null,jr=null;function yD(n){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(kf,n,void 0,(n.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:wD,vD=Math.log,_D=Math.LN2;function wD(n){return n>>>=0,n===0?32:31-(vD(n)/_D|0)|0}var Ih=64,bh=4194304;function lu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ld(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=lu(a):(s&=o,s!==0&&(r=lu(s)))}else o=t&~i,o!==0?r=lu(o):s!==0&&(r=lu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Er(e),i=1<<t,r|=n[t],e&=~i;return r}function ED(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TD(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Er(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=ED(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Yg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function dA(){var n=Ih;return Ih<<=1,!(Ih&4194240)&&(Ih=64),n}function tm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Sc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Er(e),n[e]=t}function ID(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Er(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Dv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Er(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var tt=0;function fA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var pA,Ov,mA,gA,yA,Xg=!1,Ah=[],Yi=null,Xi=null,Ji=null,zu=new Map,$u=new Map,ji=[],bD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yE(n,e){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":zu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(e.pointerId)}}function jl(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cc(e),e!==null&&Ov(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function AD(n,e,t,r,i){switch(e){case"focusin":return Yi=jl(Yi,n,e,t,r,i),!0;case"dragenter":return Xi=jl(Xi,n,e,t,r,i),!0;case"mouseover":return Ji=jl(Ji,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return zu.set(s,jl(zu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$u.set(s,jl($u.get(s)||null,n,e,t,r,i)),!0}return!1}function vA(n){var e=Ks(n.target);if(e!==null){var t=Co(e);if(t!==null){if(e=t.tag,e===13){if(e=oA(t),e!==null){n.blockedOn=e,yA(n.priority,function(){mA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Jg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Gg=r,t.target.dispatchEvent(r),Gg=null}else return e=Cc(t),e!==null&&Ov(e),n.blockedOn=t,!1;e.shift()}return!0}function vE(n,e,t){rd(n)&&t.delete(e)}function xD(){Xg=!1,Yi!==null&&rd(Yi)&&(Yi=null),Xi!==null&&rd(Xi)&&(Xi=null),Ji!==null&&rd(Ji)&&(Ji=null),zu.forEach(vE),$u.forEach(vE)}function zl(n,e){n.blockedOn===e&&(n.blockedOn=null,Xg||(Xg=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,xD)))}function Wu(n){function e(i){return zl(i,n)}if(0<Ah.length){zl(Ah[0],n);for(var t=1;t<Ah.length;t++){var r=Ah[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Yi!==null&&zl(Yi,n),Xi!==null&&zl(Xi,n),Ji!==null&&zl(Ji,n),zu.forEach(e),$u.forEach(e),t=0;t<ji.length;t++)r=ji[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ji.length&&(t=ji[0],t.blockedOn===null);)vA(t),t.blockedOn===null&&ji.shift()}var Ea=wi.ReactCurrentBatchConfig,Fd=!0;function SD(n,e,t,r){var i=tt,s=Ea.transition;Ea.transition=null;try{tt=1,Lv(n,e,t,r)}finally{tt=i,Ea.transition=s}}function RD(n,e,t,r){var i=tt,s=Ea.transition;Ea.transition=null;try{tt=4,Lv(n,e,t,r)}finally{tt=i,Ea.transition=s}}function Lv(n,e,t,r){if(Fd){var i=Jg(n,e,t,r);if(i===null)hm(n,e,r,Vd,t),yE(n,r);else if(AD(i,n,e,t,r))r.stopPropagation();else if(yE(n,r),e&4&&-1<bD.indexOf(n)){for(;i!==null;){var s=Cc(i);if(s!==null&&pA(s),s=Jg(n,e,t,r),s===null&&hm(n,e,r,Vd,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else hm(n,e,r,null,t)}}var Vd=null;function Jg(n,e,t,r){if(Vd=null,n=kv(r),n=Ks(n),n!==null)if(e=Co(n),e===null)n=null;else if(t=e.tag,t===13){if(n=oA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Vd=n,null}function _A(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mD()){case Nv:return 1;case cA:return 4;case Od:case gD:return 16;case hA:return 536870912;default:return 16}default:return 16}}var qi=null,Fv=null,id=null;function wA(){if(id)return id;var n,e=Fv,t=e.length,r,i="value"in qi?qi.value:qi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return id=i.slice(n,1<r?1-r:void 0)}function sd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xh(){return!0}function _E(){return!1}function Zn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xh:_E,this.isPropagationStopped=_E,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xh)},persist:function(){},isPersistent:xh}),e}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vv=Zn(cl),Rc=bt({},cl,{view:0,detail:0}),CD=Zn(Rc),nm,rm,$l,Nf=bt({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$l&&($l&&n.type==="mousemove"?(nm=n.screenX-$l.screenX,rm=n.screenY-$l.screenY):rm=nm=0,$l=n),nm)},movementY:function(n){return"movementY"in n?n.movementY:rm}}),wE=Zn(Nf),PD=bt({},Nf,{dataTransfer:0}),kD=Zn(PD),ND=bt({},Rc,{relatedTarget:0}),im=Zn(ND),DD=bt({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),OD=Zn(DD),LD=bt({},cl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),FD=Zn(LD),VD=bt({},cl,{data:0}),EE=Zn(VD),MD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=BD[n])?!!e[n]:!1}function Mv(){return jD}var zD=bt({},Rc,{key:function(n){if(n.key){var e=MD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?UD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(n){return n.type==="keypress"?sd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$D=Zn(zD),WD=bt({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TE=Zn(WD),qD=bt({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),GD=Zn(qD),HD=bt({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),KD=Zn(HD),QD=bt({},Nf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),YD=Zn(QD),XD=[9,13,27,32],Uv=di&&"CompositionEvent"in window,wu=null;di&&"documentMode"in document&&(wu=document.documentMode);var JD=di&&"TextEvent"in window&&!wu,EA=di&&(!Uv||wu&&8<wu&&11>=wu),IE=String.fromCharCode(32),bE=!1;function TA(n,e){switch(n){case"keyup":return XD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var aa=!1;function ZD(n,e){switch(n){case"compositionend":return IA(e);case"keypress":return e.which!==32?null:(bE=!0,IE);case"textInput":return n=e.data,n===IE&&bE?null:n;default:return null}}function eO(n,e){if(aa)return n==="compositionend"||!Uv&&TA(n,e)?(n=wA(),id=Fv=qi=null,aa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EA&&e.locale!=="ko"?null:e.data;default:return null}}var tO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tO[n.type]:e==="textarea"}function bA(n,e,t,r){tA(r),e=Md(e,"onChange"),0<e.length&&(t=new Vv("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Eu=null,qu=null;function nO(n){LA(n,0)}function Df(n){var e=ca(n);if(K1(e))return n}function rO(n,e){if(n==="change")return e}var AA=!1;if(di){var sm;if(di){var om="oninput"in document;if(!om){var xE=document.createElement("div");xE.setAttribute("oninput","return;"),om=typeof xE.oninput=="function"}sm=om}else sm=!1;AA=sm&&(!document.documentMode||9<document.documentMode)}function SE(){Eu&&(Eu.detachEvent("onpropertychange",xA),qu=Eu=null)}function xA(n){if(n.propertyName==="value"&&Df(qu)){var e=[];bA(e,qu,n,kv(n)),sA(nO,e)}}function iO(n,e,t){n==="focusin"?(SE(),Eu=e,qu=t,Eu.attachEvent("onpropertychange",xA)):n==="focusout"&&SE()}function sO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Df(qu)}function oO(n,e){if(n==="click")return Df(e)}function aO(n,e){if(n==="input"||n==="change")return Df(e)}function lO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ir=typeof Object.is=="function"?Object.is:lO;function Gu(n,e){if(Ir(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Og.call(e,i)||!Ir(n[i],e[i]))return!1}return!0}function RE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function CE(n,e){var t=RE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=RE(t)}}function SA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?SA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function RA(){for(var n=window,e=kd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=kd(n.document)}return e}function Bv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uO(n){var e=RA(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&SA(t.ownerDocument.documentElement,t)){if(r!==null&&Bv(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=CE(t,s);var o=CE(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cO=di&&"documentMode"in document&&11>=document.documentMode,la=null,Zg=null,Tu=null,ey=!1;function PE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ey||la==null||la!==kd(r)||(r=la,"selectionStart"in r&&Bv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tu&&Gu(Tu,r)||(Tu=r,r=Md(Zg,"onSelect"),0<r.length&&(e=new Vv("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=la)))}function Sh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ua={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionend:Sh("Transition","TransitionEnd")},am={},CA={};di&&(CA=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Of(n){if(am[n])return am[n];if(!ua[n])return n;var e=ua[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in CA)return am[n]=e[t];return n}var PA=Of("animationend"),kA=Of("animationiteration"),NA=Of("animationstart"),DA=Of("transitionend"),OA=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(n,e){OA.set(n,e),Ro(e,[n])}for(var lm=0;lm<kE.length;lm++){var um=kE[lm],hO=um.toLowerCase(),dO=um[0].toUpperCase()+um.slice(1);_s(hO,"on"+dO)}_s(PA,"onAnimationEnd");_s(kA,"onAnimationIteration");_s(NA,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(DA,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fO=new Set("cancel close invalid load scroll toggle".split(" ").concat(uu));function NE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,hD(r,e,void 0,n),n.currentTarget=null}function LA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;NE(i,a,u),s=l}}}if(Dd)throw n=Qg,Dd=!1,Qg=null,n}function dt(n,e){var t=e[sy];t===void 0&&(t=e[sy]=new Set);var r=n+"__bubble";t.has(r)||(FA(e,n,2,!1),t.add(r))}function cm(n,e,t){var r=0;e&&(r|=4),FA(t,n,r,e)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Hu(n){if(!n[Rh]){n[Rh]=!0,$1.forEach(function(t){t!=="selectionchange"&&(fO.has(t)||cm(t,!1,n),cm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Rh]||(e[Rh]=!0,cm("selectionchange",!1,e))}}function FA(n,e,t,r){switch(_A(e)){case 1:var i=SD;break;case 4:i=RD;break;default:i=Lv}t=i.bind(null,e,t,n),i=void 0,!Kg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function hm(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ks(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}sA(function(){var u=s,h=kv(t),d=[];e:{var p=OA.get(n);if(p!==void 0){var y=Vv,E=n;switch(n){case"keypress":if(sd(t)===0)break e;case"keydown":case"keyup":y=$D;break;case"focusin":E="focus",y=im;break;case"focusout":E="blur",y=im;break;case"beforeblur":case"afterblur":y=im;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=wE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=kD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=GD;break;case PA:case kA:case NA:y=OD;break;case DA:y=KD;break;case"scroll":y=CD;break;case"wheel":y=YD;break;case"copy":case"cut":case"paste":y=FD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=TE}var _=(e&4)!==0,b=!_&&n==="scroll",m=_?p!==null?p+"Capture":null:p;_=[];for(var v=u,I;v!==null;){I=v;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,m!==null&&(D=ju(v,m),D!=null&&_.push(Ku(v,D,I)))),b)break;v=v.return}0<_.length&&(p=new y(p,E,null,t,h),d.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",p&&t!==Gg&&(E=t.relatedTarget||t.fromElement)&&(Ks(E)||E[fi]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(E=t.relatedTarget||t.toElement,y=u,E=E?Ks(E):null,E!==null&&(b=Co(E),E!==b||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=u),y!==E)){if(_=wE,D="onMouseLeave",m="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(_=TE,D="onPointerLeave",m="onPointerEnter",v="pointer"),b=y==null?p:ca(y),I=E==null?p:ca(E),p=new _(D,v+"leave",y,t,h),p.target=b,p.relatedTarget=I,D=null,Ks(h)===u&&(_=new _(m,v+"enter",E,t,h),_.target=I,_.relatedTarget=b,D=_),b=D,y&&E)t:{for(_=y,m=E,v=0,I=_;I;I=$o(I))v++;for(I=0,D=m;D;D=$o(D))I++;for(;0<v-I;)_=$o(_),v--;for(;0<I-v;)m=$o(m),I--;for(;v--;){if(_===m||m!==null&&_===m.alternate)break t;_=$o(_),m=$o(m)}_=null}else _=null;y!==null&&DE(d,p,y,_,!1),E!==null&&b!==null&&DE(d,b,E,_,!0)}}e:{if(p=u?ca(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var F=rO;else if(AE(p))if(AA)F=aO;else{F=sO;var $=iO}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=oO);if(F&&(F=F(n,u))){bA(d,F,t,h);break e}$&&$(n,p,u),n==="focusout"&&($=p._wrapperState)&&$.controlled&&p.type==="number"&&jg(p,"number",p.value)}switch($=u?ca(u):window,n){case"focusin":(AE($)||$.contentEditable==="true")&&(la=$,Zg=u,Tu=null);break;case"focusout":Tu=Zg=la=null;break;case"mousedown":ey=!0;break;case"contextmenu":case"mouseup":case"dragend":ey=!1,PE(d,t,h);break;case"selectionchange":if(cO)break;case"keydown":case"keyup":PE(d,t,h)}var k;if(Uv)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else aa?TA(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(EA&&t.locale!=="ko"&&(aa||N!=="onCompositionStart"?N==="onCompositionEnd"&&aa&&(k=wA()):(qi=h,Fv="value"in qi?qi.value:qi.textContent,aa=!0)),$=Md(u,N),0<$.length&&(N=new EE(N,n,null,t,h),d.push({event:N,listeners:$}),k?N.data=k:(k=IA(t),k!==null&&(N.data=k)))),(k=JD?ZD(n,t):eO(n,t))&&(u=Md(u,"onBeforeInput"),0<u.length&&(h=new EE("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}LA(d,e)})}function Ku(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Md(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ju(n,t),s!=null&&r.unshift(Ku(n,s,i)),s=ju(n,e),s!=null&&r.push(Ku(n,s,i))),n=n.return}return r}function $o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function DE(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ju(t,s),l!=null&&o.unshift(Ku(t,l,a))):i||(l=ju(t,s),l!=null&&o.push(Ku(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var pO=/\r\n?/g,mO=/\u0000|\uFFFD/g;function OE(n){return(typeof n=="string"?n:""+n).replace(pO,`
`).replace(mO,"")}function Ch(n,e,t){if(e=OE(e),OE(n)!==e&&t)throw Error(Te(425))}function Ud(){}var ty=null,ny=null;function ry(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iy=typeof setTimeout=="function"?setTimeout:void 0,gO=typeof clearTimeout=="function"?clearTimeout:void 0,LE=typeof Promise=="function"?Promise:void 0,yO=typeof queueMicrotask=="function"?queueMicrotask:typeof LE<"u"?function(n){return LE.resolve(null).then(n).catch(vO)}:iy;function vO(n){setTimeout(function(){throw n})}function dm(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wu(e)}function Zi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function FE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var hl=Math.random().toString(36).slice(2),Nr="__reactFiber$"+hl,Qu="__reactProps$"+hl,fi="__reactContainer$"+hl,sy="__reactEvents$"+hl,_O="__reactListeners$"+hl,wO="__reactHandles$"+hl;function Ks(n){var e=n[Nr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[fi]||t[Nr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=FE(n);n!==null;){if(t=n[Nr])return t;n=FE(n)}return e}n=t,t=n.parentNode}return null}function Cc(n){return n=n[Nr]||n[fi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ca(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Te(33))}function Lf(n){return n[Qu]||null}var oy=[],ha=-1;function ws(n){return{current:n}}function pt(n){0>ha||(n.current=oy[ha],oy[ha]=null,ha--)}function ut(n,e){ha++,oy[ha]=n.current,n.current=e}var as={},vn=ws(as),Mn=ws(!1),co=as;function La(n,e){var t=n.type.contextTypes;if(!t)return as;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Un(n){return n=n.childContextTypes,n!=null}function Bd(){pt(Mn),pt(vn)}function VE(n,e,t){if(vn.current!==as)throw Error(Te(168));ut(vn,e),ut(Mn,t)}function VA(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Te(108,iD(n)||"Unknown",i));return bt({},t,r)}function jd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||as,co=vn.current,ut(vn,n),ut(Mn,Mn.current),!0}function ME(n,e,t){var r=n.stateNode;if(!r)throw Error(Te(169));t?(n=VA(n,e,co),r.__reactInternalMemoizedMergedChildContext=n,pt(Mn),pt(vn),ut(vn,n)):pt(Mn),ut(Mn,t)}var ri=null,Ff=!1,fm=!1;function MA(n){ri===null?ri=[n]:ri.push(n)}function EO(n){Ff=!0,MA(n)}function Es(){if(!fm&&ri!==null){fm=!0;var n=0,e=tt;try{var t=ri;for(tt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ri=null,Ff=!1}catch(i){throw ri!==null&&(ri=ri.slice(n+1)),uA(Nv,Es),i}finally{tt=e,fm=!1}}return null}var da=[],fa=0,zd=null,$d=0,nr=[],rr=0,ho=null,ii=1,si="";function Us(n,e){da[fa++]=$d,da[fa++]=zd,zd=n,$d=e}function UA(n,e,t){nr[rr++]=ii,nr[rr++]=si,nr[rr++]=ho,ho=n;var r=ii;n=si;var i=32-Er(r)-1;r&=~(1<<i),t+=1;var s=32-Er(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ii=1<<32-Er(e)+i|t<<i|r,si=s+n}else ii=1<<s|t<<i|r,si=n}function jv(n){n.return!==null&&(Us(n,1),UA(n,1,0))}function zv(n){for(;n===zd;)zd=da[--fa],da[fa]=null,$d=da[--fa],da[fa]=null;for(;n===ho;)ho=nr[--rr],nr[rr]=null,si=nr[--rr],nr[rr]=null,ii=nr[--rr],nr[rr]=null}var Kn=null,Gn=null,yt=!1,wr=null;function BA(n,e){var t=ir(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function UE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Kn=n,Gn=Zi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Kn=n,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ho!==null?{id:ii,overflow:si}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ir(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Kn=n,Gn=null,!0):!1;default:return!1}}function ay(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ly(n){if(yt){var e=Gn;if(e){var t=e;if(!UE(n,e)){if(ay(n))throw Error(Te(418));e=Zi(t.nextSibling);var r=Kn;e&&UE(n,e)?BA(r,t):(n.flags=n.flags&-4097|2,yt=!1,Kn=n)}}else{if(ay(n))throw Error(Te(418));n.flags=n.flags&-4097|2,yt=!1,Kn=n}}}function BE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Kn=n}function Ph(n){if(n!==Kn)return!1;if(!yt)return BE(n),yt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ry(n.type,n.memoizedProps)),e&&(e=Gn)){if(ay(n))throw jA(),Error(Te(418));for(;e;)BA(n,e),e=Zi(e.nextSibling)}if(BE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Gn=Zi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Gn=null}}else Gn=Kn?Zi(n.stateNode.nextSibling):null;return!0}function jA(){for(var n=Gn;n;)n=Zi(n.nextSibling)}function Fa(){Gn=Kn=null,yt=!1}function $v(n){wr===null?wr=[n]:wr.push(n)}var TO=wi.ReactCurrentBatchConfig;function vr(n,e){if(n&&n.defaultProps){e=bt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Wd=ws(null),qd=null,pa=null,Wv=null;function qv(){Wv=pa=qd=null}function Gv(n){var e=Wd.current;pt(Wd),n._currentValue=e}function uy(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ta(n,e){qd=n,Wv=pa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(On=!0),n.firstContext=null)}function lr(n){var e=n._currentValue;if(Wv!==n)if(n={context:n,memoizedValue:e,next:null},pa===null){if(qd===null)throw Error(Te(308));pa=n,qd.dependencies={lanes:0,firstContext:n}}else pa=pa.next=n;return e}var Qs=null;function Hv(n){Qs===null?Qs=[n]:Qs.push(n)}function zA(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Hv(e)):(t.next=i.next,i.next=t),e.interleaved=t,pi(n,r)}function pi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Bi=!1;function Kv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $A(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ci(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function es(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,He&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pi(n,t)}return i=r.interleaved,i===null?(e.next=e,Hv(r)):(e.next=i.next,i.next=e),r.interleaved=e,pi(n,t)}function od(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Dv(n,t)}}function jE(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Gd(n,e,t,r){var i=n.updateQueue;Bi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=n,_=a;switch(p=e,y=t,_.tag){case 1:if(E=_.payload,typeof E=="function"){d=E.call(y,d,p);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=_.payload,p=typeof E=="function"?E.call(y,d,p):E,p==null)break e;d=bt({},d,p);break e;case 2:Bi=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=d):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);po|=o,n.lanes=o,n.memoizedState=d}}function zE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Te(191,i));i.call(r)}}}var WA=new z1.Component().refs;function cy(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:bt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Vf={isMounted:function(n){return(n=n._reactInternals)?Co(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=An(),i=ns(n),s=ci(r,i);s.payload=e,t!=null&&(s.callback=t),e=es(n,s,i),e!==null&&(Tr(e,n,i,r),od(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=An(),i=ns(n),s=ci(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=es(n,s,i),e!==null&&(Tr(e,n,i,r),od(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=An(),r=ns(n),i=ci(t,r);i.tag=2,e!=null&&(i.callback=e),e=es(n,i,r),e!==null&&(Tr(e,n,r,t),od(e,n,r))}};function $E(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gu(t,r)||!Gu(i,s):!0}function qA(n,e,t){var r=!1,i=as,s=e.contextType;return typeof s=="object"&&s!==null?s=lr(s):(i=Un(e)?co:vn.current,r=e.contextTypes,s=(r=r!=null)?La(n,i):as),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function WE(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Vf.enqueueReplaceState(e,e.state,null)}function hy(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=WA,Kv(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=lr(s):(s=Un(e)?co:vn.current,i.context=La(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cy(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vf.enqueueReplaceState(i,i.state,null),Gd(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Wl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Te(309));var r=t.stateNode}if(!r)throw Error(Te(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===WA&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Te(284));if(!t._owner)throw Error(Te(290,n))}return n}function kh(n,e){throw n=Object.prototype.toString.call(e),Error(Te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function qE(n){var e=n._init;return e(n._payload)}function GA(n){function e(m,v){if(n){var I=m.deletions;I===null?(m.deletions=[v],m.flags|=16):I.push(v)}}function t(m,v){if(!n)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=rs(m,v),m.index=0,m.sibling=null,m}function s(m,v,I){return m.index=I,n?(I=m.alternate,I!==null?(I=I.index,I<v?(m.flags|=2,v):I):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,v,I,D){return v===null||v.tag!==6?(v=wm(I,m.mode,D),v.return=m,v):(v=i(v,I),v.return=m,v)}function l(m,v,I,D){var F=I.type;return F===oa?h(m,v,I.props.children,D,I.key):v!==null&&(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ui&&qE(F)===v.type)?(D=i(v,I.props),D.ref=Wl(m,v,I),D.return=m,D):(D=dd(I.type,I.key,I.props,null,m.mode,D),D.ref=Wl(m,v,I),D.return=m,D)}function u(m,v,I,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Em(I,m.mode,D),v.return=m,v):(v=i(v,I.children||[]),v.return=m,v)}function h(m,v,I,D,F){return v===null||v.tag!==7?(v=io(I,m.mode,D,F),v.return=m,v):(v=i(v,I),v.return=m,v)}function d(m,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wm(""+v,m.mode,I),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wh:return I=dd(v.type,v.key,v.props,null,m.mode,I),I.ref=Wl(m,null,v),I.return=m,I;case sa:return v=Em(v,m.mode,I),v.return=m,v;case Ui:var D=v._init;return d(m,D(v._payload),I)}if(au(v)||Ul(v))return v=io(v,m.mode,I,null),v.return=m,v;kh(m,v)}return null}function p(m,v,I,D){var F=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:a(m,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case wh:return I.key===F?l(m,v,I,D):null;case sa:return I.key===F?u(m,v,I,D):null;case Ui:return F=I._init,p(m,v,F(I._payload),D)}if(au(I)||Ul(I))return F!==null?null:h(m,v,I,D,null);kh(m,I)}return null}function y(m,v,I,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return m=m.get(I)||null,a(v,m,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wh:return m=m.get(D.key===null?I:D.key)||null,l(v,m,D,F);case sa:return m=m.get(D.key===null?I:D.key)||null,u(v,m,D,F);case Ui:var $=D._init;return y(m,v,I,$(D._payload),F)}if(au(D)||Ul(D))return m=m.get(I)||null,h(v,m,D,F,null);kh(v,D)}return null}function E(m,v,I,D){for(var F=null,$=null,k=v,N=v=0,T=null;k!==null&&N<I.length;N++){k.index>N?(T=k,k=null):T=k.sibling;var U=p(m,k,I[N],D);if(U===null){k===null&&(k=T);break}n&&k&&U.alternate===null&&e(m,k),v=s(U,v,N),$===null?F=U:$.sibling=U,$=U,k=T}if(N===I.length)return t(m,k),yt&&Us(m,N),F;if(k===null){for(;N<I.length;N++)k=d(m,I[N],D),k!==null&&(v=s(k,v,N),$===null?F=k:$.sibling=k,$=k);return yt&&Us(m,N),F}for(k=r(m,k);N<I.length;N++)T=y(k,m,N,I[N],D),T!==null&&(n&&T.alternate!==null&&k.delete(T.key===null?N:T.key),v=s(T,v,N),$===null?F=T:$.sibling=T,$=T);return n&&k.forEach(function(G){return e(m,G)}),yt&&Us(m,N),F}function _(m,v,I,D){var F=Ul(I);if(typeof F!="function")throw Error(Te(150));if(I=F.call(I),I==null)throw Error(Te(151));for(var $=F=null,k=v,N=v=0,T=null,U=I.next();k!==null&&!U.done;N++,U=I.next()){k.index>N?(T=k,k=null):T=k.sibling;var G=p(m,k,U.value,D);if(G===null){k===null&&(k=T);break}n&&k&&G.alternate===null&&e(m,k),v=s(G,v,N),$===null?F=G:$.sibling=G,$=G,k=T}if(U.done)return t(m,k),yt&&Us(m,N),F;if(k===null){for(;!U.done;N++,U=I.next())U=d(m,U.value,D),U!==null&&(v=s(U,v,N),$===null?F=U:$.sibling=U,$=U);return yt&&Us(m,N),F}for(k=r(m,k);!U.done;N++,U=I.next())U=y(k,m,N,U.value,D),U!==null&&(n&&U.alternate!==null&&k.delete(U.key===null?N:U.key),v=s(U,v,N),$===null?F=U:$.sibling=U,$=U);return n&&k.forEach(function(O){return e(m,O)}),yt&&Us(m,N),F}function b(m,v,I,D){if(typeof I=="object"&&I!==null&&I.type===oa&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case wh:e:{for(var F=I.key,$=v;$!==null;){if($.key===F){if(F=I.type,F===oa){if($.tag===7){t(m,$.sibling),v=i($,I.props.children),v.return=m,m=v;break e}}else if($.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ui&&qE(F)===$.type){t(m,$.sibling),v=i($,I.props),v.ref=Wl(m,$,I),v.return=m,m=v;break e}t(m,$);break}else e(m,$);$=$.sibling}I.type===oa?(v=io(I.props.children,m.mode,D,I.key),v.return=m,m=v):(D=dd(I.type,I.key,I.props,null,m.mode,D),D.ref=Wl(m,v,I),D.return=m,m=D)}return o(m);case sa:e:{for($=I.key;v!==null;){if(v.key===$)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){t(m,v.sibling),v=i(v,I.children||[]),v.return=m,m=v;break e}else{t(m,v);break}else e(m,v);v=v.sibling}v=Em(I,m.mode,D),v.return=m,m=v}return o(m);case Ui:return $=I._init,b(m,v,$(I._payload),D)}if(au(I))return E(m,v,I,D);if(Ul(I))return _(m,v,I,D);kh(m,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(t(m,v.sibling),v=i(v,I),v.return=m,m=v):(t(m,v),v=wm(I,m.mode,D),v.return=m,m=v),o(m)):t(m,v)}return b}var Va=GA(!0),HA=GA(!1),Pc={},zr=ws(Pc),Yu=ws(Pc),Xu=ws(Pc);function Ys(n){if(n===Pc)throw Error(Te(174));return n}function Qv(n,e){switch(ut(Xu,e),ut(Yu,n),ut(zr,Pc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$g(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=$g(e,n)}pt(zr),ut(zr,e)}function Ma(){pt(zr),pt(Yu),pt(Xu)}function KA(n){Ys(Xu.current);var e=Ys(zr.current),t=$g(e,n.type);e!==t&&(ut(Yu,n),ut(zr,t))}function Yv(n){Yu.current===n&&(pt(zr),pt(Yu))}var Et=ws(0);function Hd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pm=[];function Xv(){for(var n=0;n<pm.length;n++)pm[n]._workInProgressVersionPrimary=null;pm.length=0}var ad=wi.ReactCurrentDispatcher,mm=wi.ReactCurrentBatchConfig,fo=0,Tt=null,$t=null,Qt=null,Kd=!1,Iu=!1,Ju=0,IO=0;function dn(){throw Error(Te(321))}function Jv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ir(n[t],e[t]))return!1;return!0}function Zv(n,e,t,r,i,s){if(fo=s,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ad.current=n===null||n.memoizedState===null?SO:RO,n=t(r,i),Iu){s=0;do{if(Iu=!1,Ju=0,25<=s)throw Error(Te(301));s+=1,Qt=$t=null,e.updateQueue=null,ad.current=CO,n=t(r,i)}while(Iu)}if(ad.current=Qd,e=$t!==null&&$t.next!==null,fo=0,Qt=$t=Tt=null,Kd=!1,e)throw Error(Te(300));return n}function e_(){var n=Ju!==0;return Ju=0,n}function Rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Tt.memoizedState=Qt=n:Qt=Qt.next=n,Qt}function ur(){if($t===null){var n=Tt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var e=Qt===null?Tt.memoizedState:Qt.next;if(e!==null)Qt=e,$t=n;else{if(n===null)throw Error(Te(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Qt===null?Tt.memoizedState=Qt=n:Qt=Qt.next=n}return Qt}function Zu(n,e){return typeof e=="function"?e(n):e}function gm(n){var e=ur(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var r=$t,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((fo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Tt.lanes|=h,po|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ir(r,e.memoizedState)||(On=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Tt.lanes|=s,po|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ym(n){var e=ur(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ir(s,e.memoizedState)||(On=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function QA(){}function YA(n,e){var t=Tt,r=ur(),i=e(),s=!Ir(r.memoizedState,i);if(s&&(r.memoizedState=i,On=!0),r=r.queue,t_(ZA.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Qt!==null&&Qt.memoizedState.tag&1){if(t.flags|=2048,ec(9,JA.bind(null,t,r,i,e),void 0,null),Xt===null)throw Error(Te(349));fo&30||XA(t,e,i)}return i}function XA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JA(n,e,t,r){e.value=t,e.getSnapshot=r,ex(e)&&tx(n)}function ZA(n,e,t){return t(function(){ex(e)&&tx(n)})}function ex(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ir(n,t)}catch{return!0}}function tx(n){var e=pi(n,1);e!==null&&Tr(e,n,1,-1)}function GE(n){var e=Rr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:n},e.queue=n,n=n.dispatch=xO.bind(null,Tt,n),[e.memoizedState,n]}function ec(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function nx(){return ur().memoizedState}function ld(n,e,t,r){var i=Rr();Tt.flags|=n,i.memoizedState=ec(1|e,t,void 0,r===void 0?null:r)}function Mf(n,e,t,r){var i=ur();r=r===void 0?null:r;var s=void 0;if($t!==null){var o=$t.memoizedState;if(s=o.destroy,r!==null&&Jv(r,o.deps)){i.memoizedState=ec(e,t,s,r);return}}Tt.flags|=n,i.memoizedState=ec(1|e,t,s,r)}function HE(n,e){return ld(8390656,8,n,e)}function t_(n,e){return Mf(2048,8,n,e)}function rx(n,e){return Mf(4,2,n,e)}function ix(n,e){return Mf(4,4,n,e)}function sx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ox(n,e,t){return t=t!=null?t.concat([n]):null,Mf(4,4,sx.bind(null,e,n),t)}function n_(){}function ax(n,e){var t=ur();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Jv(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function lx(n,e){var t=ur();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Jv(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function ux(n,e,t){return fo&21?(Ir(t,e)||(t=dA(),Tt.lanes|=t,po|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,On=!0),n.memoizedState=t)}function bO(n,e){var t=tt;tt=t!==0&&4>t?t:4,n(!0);var r=mm.transition;mm.transition={};try{n(!1),e()}finally{tt=t,mm.transition=r}}function cx(){return ur().memoizedState}function AO(n,e,t){var r=ns(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},hx(n))dx(e,t);else if(t=zA(n,e,t,r),t!==null){var i=An();Tr(t,n,r,i),fx(t,e,r)}}function xO(n,e,t){var r=ns(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(hx(n))dx(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ir(a,o)){var l=e.interleaved;l===null?(i.next=i,Hv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=zA(n,e,i,r),t!==null&&(i=An(),Tr(t,n,r,i),fx(t,e,r))}}function hx(n){var e=n.alternate;return n===Tt||e!==null&&e===Tt}function dx(n,e){Iu=Kd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function fx(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Dv(n,t)}}var Qd={readContext:lr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},SO={readContext:lr,useCallback:function(n,e){return Rr().memoizedState=[n,e===void 0?null:e],n},useContext:lr,useEffect:HE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ld(4194308,4,sx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ld(4194308,4,n,e)},useInsertionEffect:function(n,e){return ld(4,2,n,e)},useMemo:function(n,e){var t=Rr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Rr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=AO.bind(null,Tt,n),[r.memoizedState,n]},useRef:function(n){var e=Rr();return n={current:n},e.memoizedState=n},useState:GE,useDebugValue:n_,useDeferredValue:function(n){return Rr().memoizedState=n},useTransition:function(){var n=GE(!1),e=n[0];return n=bO.bind(null,n[1]),Rr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Tt,i=Rr();if(yt){if(t===void 0)throw Error(Te(407));t=t()}else{if(t=e(),Xt===null)throw Error(Te(349));fo&30||XA(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,HE(ZA.bind(null,r,s,n),[n]),r.flags|=2048,ec(9,JA.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Rr(),e=Xt.identifierPrefix;if(yt){var t=si,r=ii;t=(r&~(1<<32-Er(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ju++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=IO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},RO={readContext:lr,useCallback:ax,useContext:lr,useEffect:t_,useImperativeHandle:ox,useInsertionEffect:rx,useLayoutEffect:ix,useMemo:lx,useReducer:gm,useRef:nx,useState:function(){return gm(Zu)},useDebugValue:n_,useDeferredValue:function(n){var e=ur();return ux(e,$t.memoizedState,n)},useTransition:function(){var n=gm(Zu)[0],e=ur().memoizedState;return[n,e]},useMutableSource:QA,useSyncExternalStore:YA,useId:cx,unstable_isNewReconciler:!1},CO={readContext:lr,useCallback:ax,useContext:lr,useEffect:t_,useImperativeHandle:ox,useInsertionEffect:rx,useLayoutEffect:ix,useMemo:lx,useReducer:ym,useRef:nx,useState:function(){return ym(Zu)},useDebugValue:n_,useDeferredValue:function(n){var e=ur();return $t===null?e.memoizedState=n:ux(e,$t.memoizedState,n)},useTransition:function(){var n=ym(Zu)[0],e=ur().memoizedState;return[n,e]},useMutableSource:QA,useSyncExternalStore:YA,useId:cx,unstable_isNewReconciler:!1};function Ua(n,e){try{var t="",r=e;do t+=rD(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function vm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function dy(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var PO=typeof WeakMap=="function"?WeakMap:Map;function px(n,e,t){t=ci(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Xd||(Xd=!0,Ty=r),dy(n,e)},t}function mx(n,e,t){t=ci(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){dy(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){dy(n,e),typeof r!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function KE(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new PO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=WO.bind(null,n,e,t),e.then(n,n))}function QE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function YE(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ci(-1,1),e.tag=2,es(t,e,1))),t.lanes|=1),n)}var kO=wi.ReactCurrentOwner,On=!1;function Tn(n,e,t,r){e.child=n===null?HA(e,null,t,r):Va(e,n.child,t,r)}function XE(n,e,t,r,i){t=t.render;var s=e.ref;return Ta(e,i),r=Zv(n,e,t,r,s,i),t=e_(),n!==null&&!On?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,mi(n,e,i)):(yt&&t&&jv(e),e.flags|=1,Tn(n,e,r,i),e.child)}function JE(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!c_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,gx(n,e,s,r,i)):(n=dd(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Gu,t(o,r)&&n.ref===e.ref)return mi(n,e,i)}return e.flags|=1,n=rs(s,r),n.ref=e.ref,n.return=e,e.child=n}function gx(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Gu(s,r)&&n.ref===e.ref)if(On=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(On=!0);else return e.lanes=n.lanes,mi(n,e,i)}return fy(n,e,t,r,i)}function yx(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(ga,Wn),Wn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ut(ga,Wn),Wn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ut(ga,Wn),Wn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ut(ga,Wn),Wn|=r;return Tn(n,e,i,t),e.child}function vx(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function fy(n,e,t,r,i){var s=Un(t)?co:vn.current;return s=La(e,s),Ta(e,i),t=Zv(n,e,t,r,s,i),r=e_(),n!==null&&!On?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,mi(n,e,i)):(yt&&r&&jv(e),e.flags|=1,Tn(n,e,t,i),e.child)}function ZE(n,e,t,r,i){if(Un(t)){var s=!0;jd(e)}else s=!1;if(Ta(e,i),e.stateNode===null)ud(n,e),qA(e,t,r),hy(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=lr(u):(u=Un(t)?co:vn.current,u=La(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&WE(e,o,r,u),Bi=!1;var p=e.memoizedState;o.state=p,Gd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Mn.current||Bi?(typeof h=="function"&&(cy(e,t,h,r),l=e.memoizedState),(a=Bi||$E(e,t,a,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$A(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:vr(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=lr(l):(l=Un(t)?co:vn.current,l=La(e,l));var y=t.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&WE(e,o,r,l),Bi=!1,p=e.memoizedState,o.state=p,Gd(e,r,o,i);var E=e.memoizedState;a!==d||p!==E||Mn.current||Bi?(typeof y=="function"&&(cy(e,t,y,r),E=e.memoizedState),(u=Bi||$E(e,t,u,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return py(n,e,t,r,s,i)}function py(n,e,t,r,i,s){vx(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ME(e,t,!1),mi(n,e,s);r=e.stateNode,kO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Va(e,n.child,null,s),e.child=Va(e,null,a,s)):Tn(n,e,a,s),e.memoizedState=r.state,i&&ME(e,t,!0),e.child}function _x(n){var e=n.stateNode;e.pendingContext?VE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&VE(n,e.context,!1),Qv(n,e.containerInfo)}function eT(n,e,t,r,i){return Fa(),$v(i),e.flags|=256,Tn(n,e,t,r),e.child}var my={dehydrated:null,treeContext:null,retryLane:0};function gy(n){return{baseLanes:n,cachePool:null,transitions:null}}function wx(n,e,t){var r=e.pendingProps,i=Et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ut(Et,i&1),n===null)return ly(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=jf(o,r,0,null),n=io(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=gy(t),e.memoizedState=my,n):r_(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return NO(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=rs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=rs(a,s):(s=io(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?gy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=my,r}return s=n.child,n=s.sibling,r=rs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function r_(n,e){return e=jf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Nh(n,e,t,r){return r!==null&&$v(r),Va(e,n.child,null,t),n=r_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function NO(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=vm(Error(Te(422))),Nh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=jf({mode:"visible",children:r.children},i,0,null),s=io(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Va(e,n.child,null,o),e.child.memoizedState=gy(o),e.memoizedState=my,s);if(!(e.mode&1))return Nh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Te(419)),r=vm(s,r,void 0),Nh(n,e,o,r)}if(a=(o&n.childLanes)!==0,On||a){if(r=Xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pi(n,i),Tr(r,n,i,-1))}return u_(),r=vm(Error(Te(421))),Nh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=qO.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Gn=Zi(i.nextSibling),Kn=e,yt=!0,wr=null,n!==null&&(nr[rr++]=ii,nr[rr++]=si,nr[rr++]=ho,ii=n.id,si=n.overflow,ho=e),e=r_(e,r.children),e.flags|=4096,e)}function tT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),uy(n.return,e,t)}function _m(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function Ex(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tn(n,e,r.children,t),r=Et.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tT(n,t,e);else if(n.tag===19)tT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ut(Et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Hd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),_m(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Hd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}_m(e,!0,t,null,s);break;case"together":_m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ud(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function mi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),po|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Te(153));if(e.child!==null){for(n=e.child,t=rs(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=rs(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function DO(n,e,t){switch(e.tag){case 3:_x(e),Fa();break;case 5:KA(e);break;case 1:Un(e.type)&&jd(e);break;case 4:Qv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ut(Wd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(Et,Et.current&1),e.flags|=128,null):t&e.child.childLanes?wx(n,e,t):(ut(Et,Et.current&1),n=mi(n,e,t),n!==null?n.sibling:null);ut(Et,Et.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Ex(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(Et,Et.current),r)break;return null;case 22:case 23:return e.lanes=0,yx(n,e,t)}return mi(n,e,t)}var Tx,yy,Ix,bx;Tx=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};yy=function(){};Ix=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ys(zr.current);var s=null;switch(t){case"input":i=Ug(n,i),r=Ug(n,r),s=[];break;case"select":i=bt({},i,{value:void 0}),r=bt({},r,{value:void 0}),s=[];break;case"textarea":i=zg(n,i),r=zg(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ud)}Wg(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};bx=function(n,e,t,r){t!==r&&(e.flags|=4)};function ql(n,e){if(!yt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function fn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function OO(n,e,t){var r=e.pendingProps;switch(zv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Un(e.type)&&Bd(),fn(e),null;case 3:return r=e.stateNode,Ma(),pt(Mn),pt(vn),Xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ph(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&(Ay(wr),wr=null))),yy(n,e),fn(e),null;case 5:Yv(e);var i=Ys(Xu.current);if(t=e.type,n!==null&&e.stateNode!=null)Ix(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return fn(e),null}if(n=Ys(zr.current),Ph(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Nr]=e,r[Qu]=s,n=(e.mode&1)!==0,t){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(i=0;i<uu.length;i++)dt(uu[i],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":cE(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":dE(r,s),dt("invalid",r)}Wg(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ch(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ch(r.textContent,a,n),i=["children",""+a]):Uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dt("scroll",r)}switch(t){case"input":Eh(r),hE(r,s,!0);break;case"textarea":Eh(r),fE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ud)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=X1(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Nr]=e,n[Qu]=r,Tx(n,e,!1,!1),e.stateNode=n;e:{switch(o=qg(t,r),t){case"dialog":dt("cancel",n),dt("close",n),i=r;break;case"iframe":case"object":case"embed":dt("load",n),i=r;break;case"video":case"audio":for(i=0;i<uu.length;i++)dt(uu[i],n);i=r;break;case"source":dt("error",n),i=r;break;case"img":case"image":case"link":dt("error",n),dt("load",n),i=r;break;case"details":dt("toggle",n),i=r;break;case"input":cE(n,r),i=Ug(n,r),dt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=bt({},r,{value:void 0}),dt("invalid",n);break;case"textarea":dE(n,r),i=zg(n,r),dt("invalid",n);break;default:i=r}Wg(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?eA(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&J1(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Bu(n,l):typeof l=="number"&&Bu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",n):l!=null&&Sv(n,s,l,o))}switch(t){case"input":Eh(n),hE(n,r,!1);break;case"textarea":Eh(n),fE(n);break;case"option":r.value!=null&&n.setAttribute("value",""+os(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?va(n,!!r.multiple,s,!1):r.defaultValue!=null&&va(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ud)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(n&&e.stateNode!=null)bx(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(t=Ys(Xu.current),Ys(zr.current),Ph(e)){if(r=e.stateNode,t=e.memoizedProps,r[Nr]=e,(s=r.nodeValue!==t)&&(n=Kn,n!==null))switch(n.tag){case 3:Ch(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ch(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Nr]=e,e.stateNode=r}return fn(e),null;case 13:if(pt(Et),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Gn!==null&&e.mode&1&&!(e.flags&128))jA(),Fa(),e.flags|=98560,s=!1;else if(s=Ph(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[Nr]=e}else Fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else wr!==null&&(Ay(wr),wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Et.current&1?qt===0&&(qt=3):u_())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Ma(),yy(n,e),n===null&&Hu(e.stateNode.containerInfo),fn(e),null;case 10:return Gv(e.type._context),fn(e),null;case 17:return Un(e.type)&&Bd(),fn(e),null;case 19:if(pt(Et),s=e.memoizedState,s===null)return fn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ql(s,!1);else{if(qt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Hd(n),o!==null){for(e.flags|=128,ql(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ut(Et,Et.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ot()>Ba&&(e.flags|=128,r=!0,ql(s,!1),e.lanes=4194304)}else{if(!r)if(n=Hd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ql(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yt)return fn(e),null}else 2*Ot()-s.renderingStartTime>Ba&&t!==1073741824&&(e.flags|=128,r=!0,ql(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ot(),e.sibling=null,t=Et.current,ut(Et,r?t&1|2:t&1),e):(fn(e),null);case 22:case 23:return l_(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wn&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function LO(n,e){switch(zv(e),e.tag){case 1:return Un(e.type)&&Bd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ma(),pt(Mn),pt(vn),Xv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Yv(e),null;case 13:if(pt(Et),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Fa()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return pt(Et),null;case 4:return Ma(),null;case 10:return Gv(e.type._context),null;case 22:case 23:return l_(),null;case 24:return null;default:return null}}var Dh=!1,mn=!1,FO=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ma(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){xt(n,e,r)}else t.current=null}function vy(n,e,t){try{t()}catch(r){xt(n,e,r)}}var nT=!1;function VO(n,e){if(ty=Fd,n=RA(),Bv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var y;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)p=d,d=y;for(;;){if(d===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(y=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(ny={focusedElem:n,selectionRange:t},Fd=!1,ke=e;ke!==null;)if(e=ke,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ke=n;else for(;ke!==null;){e=ke;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var _=E.memoizedProps,b=E.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:vr(e.type,_),b);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(D){xt(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}return E=nT,nT=!1,E}function bu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&vy(e,t,s)}i=i.next}while(i!==r)}}function Uf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function _y(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Ax(n){var e=n.alternate;e!==null&&(n.alternate=null,Ax(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Nr],delete e[Qu],delete e[sy],delete e[_O],delete e[wO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xx(n){return n.tag===5||n.tag===3||n.tag===4}function rT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ud));else if(r!==4&&(n=n.child,n!==null))for(wy(n,e,t),n=n.sibling;n!==null;)wy(n,e,t),n=n.sibling}function Ey(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Ey(n,e,t),n=n.sibling;n!==null;)Ey(n,e,t),n=n.sibling}var en=null,_r=!1;function Di(n,e,t){for(t=t.child;t!==null;)Sx(n,e,t),t=t.sibling}function Sx(n,e,t){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(kf,t)}catch{}switch(t.tag){case 5:mn||ma(t,e);case 6:var r=en,i=_r;en=null,Di(n,e,t),en=r,_r=i,en!==null&&(_r?(n=en,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):en.removeChild(t.stateNode));break;case 18:en!==null&&(_r?(n=en,t=t.stateNode,n.nodeType===8?dm(n.parentNode,t):n.nodeType===1&&dm(n,t),Wu(n)):dm(en,t.stateNode));break;case 4:r=en,i=_r,en=t.stateNode.containerInfo,_r=!0,Di(n,e,t),en=r,_r=i;break;case 0:case 11:case 14:case 15:if(!mn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vy(t,e,o),i=i.next}while(i!==r)}Di(n,e,t);break;case 1:if(!mn&&(ma(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){xt(t,e,a)}Di(n,e,t);break;case 21:Di(n,e,t);break;case 22:t.mode&1?(mn=(r=mn)||t.memoizedState!==null,Di(n,e,t),mn=r):Di(n,e,t);break;default:Di(n,e,t)}}function iT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new FO),e.forEach(function(r){var i=GO.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function gr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,_r=!1;break e;case 3:en=a.stateNode.containerInfo,_r=!0;break e;case 4:en=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(en===null)throw Error(Te(160));Sx(s,o,i),en=null,_r=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){xt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rx(e,n),e=e.sibling}function Rx(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gr(e,n),xr(n),r&4){try{bu(3,n,n.return),Uf(3,n)}catch(_){xt(n,n.return,_)}try{bu(5,n,n.return)}catch(_){xt(n,n.return,_)}}break;case 1:gr(e,n),xr(n),r&512&&t!==null&&ma(t,t.return);break;case 5:if(gr(e,n),xr(n),r&512&&t!==null&&ma(t,t.return),n.flags&32){var i=n.stateNode;try{Bu(i,"")}catch(_){xt(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Q1(i,s),qg(a,o);var u=qg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?eA(i,d):h==="dangerouslySetInnerHTML"?J1(i,d):h==="children"?Bu(i,d):Sv(i,h,d,u)}switch(a){case"input":Bg(i,s);break;case"textarea":Y1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?va(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?va(i,!!s.multiple,s.defaultValue,!0):va(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qu]=s}catch(_){xt(n,n.return,_)}}break;case 6:if(gr(e,n),xr(n),r&4){if(n.stateNode===null)throw Error(Te(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){xt(n,n.return,_)}}break;case 3:if(gr(e,n),xr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wu(e.containerInfo)}catch(_){xt(n,n.return,_)}break;case 4:gr(e,n),xr(n);break;case 13:gr(e,n),xr(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(o_=Ot())),r&4&&iT(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(mn=(u=mn)||h,gr(e,n),mn=u):gr(e,n),xr(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(ke=n,h=n.child;h!==null;){for(d=ke=h;ke!==null;){switch(p=ke,y=p.child,p.tag){case 0:case 11:case 14:case 15:bu(4,p,p.return);break;case 1:ma(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(_){xt(r,t,_)}}break;case 5:ma(p,p.return);break;case 22:if(p.memoizedState!==null){oT(d);continue}}y!==null?(y.return=p,ke=y):oT(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Z1("display",o))}catch(_){xt(n,n.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){xt(n,n.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gr(e,n),xr(n),r&4&&iT(n);break;case 21:break;default:gr(e,n),xr(n)}}function xr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(xx(t)){var r=t;break e}t=t.return}throw Error(Te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bu(i,""),r.flags&=-33);var s=rT(n);Ey(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rT(n);wy(n,a,o);break;default:throw Error(Te(161))}}catch(l){xt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function MO(n,e,t){ke=n,Cx(n)}function Cx(n,e,t){for(var r=(n.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Dh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mn;a=Dh;var u=mn;if(Dh=o,(mn=l)&&!u)for(ke=i;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?aT(i):l!==null?(l.return=o,ke=l):aT(i);for(;s!==null;)ke=s,Cx(s),s=s.sibling;ke=i,Dh=a,mn=u}sT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ke=s):sT(n)}}function sT(n){for(;ke!==null;){var e=ke;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||Uf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:vr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}zE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Wu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}mn||e.flags&512&&_y(e)}catch(p){xt(e,e.return,p)}}if(e===n){ke=null;break}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}}function oT(n){for(;ke!==null;){var e=ke;if(e===n){ke=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ke=t;break}ke=e.return}}function aT(n){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Uf(4,e)}catch(l){xt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){xt(e,i,l)}}var s=e.return;try{_y(e)}catch(l){xt(e,s,l)}break;case 5:var o=e.return;try{_y(e)}catch(l){xt(e,o,l)}}}catch(l){xt(e,e.return,l)}if(e===n){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var UO=Math.ceil,Yd=wi.ReactCurrentDispatcher,i_=wi.ReactCurrentOwner,or=wi.ReactCurrentBatchConfig,He=0,Xt=null,zt=null,sn=0,Wn=0,ga=ws(0),qt=0,tc=null,po=0,Bf=0,s_=0,Au=null,Dn=null,o_=0,Ba=1/0,ni=null,Xd=!1,Ty=null,ts=null,Oh=!1,Gi=null,Jd=0,xu=0,Iy=null,cd=-1,hd=0;function An(){return He&6?Ot():cd!==-1?cd:cd=Ot()}function ns(n){return n.mode&1?He&2&&sn!==0?sn&-sn:TO.transition!==null?(hd===0&&(hd=dA()),hd):(n=tt,n!==0||(n=window.event,n=n===void 0?16:_A(n.type)),n):1}function Tr(n,e,t,r){if(50<xu)throw xu=0,Iy=null,Error(Te(185));Sc(n,t,r),(!(He&2)||n!==Xt)&&(n===Xt&&(!(He&2)&&(Bf|=t),qt===4&&zi(n,sn)),Bn(n,r),t===1&&He===0&&!(e.mode&1)&&(Ba=Ot()+500,Ff&&Es()))}function Bn(n,e){var t=n.callbackNode;TD(n,e);var r=Ld(n,n===Xt?sn:0);if(r===0)t!==null&&gE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&gE(t),e===1)n.tag===0?EO(lT.bind(null,n)):MA(lT.bind(null,n)),yO(function(){!(He&6)&&Es()}),t=null;else{switch(fA(r)){case 1:t=Nv;break;case 4:t=cA;break;case 16:t=Od;break;case 536870912:t=hA;break;default:t=Od}t=Vx(t,Px.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Px(n,e){if(cd=-1,hd=0,He&6)throw Error(Te(327));var t=n.callbackNode;if(Ia()&&n.callbackNode!==t)return null;var r=Ld(n,n===Xt?sn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Zd(n,r);else{e=r;var i=He;He|=2;var s=Nx();(Xt!==n||sn!==e)&&(ni=null,Ba=Ot()+500,ro(n,e));do try{zO();break}catch(a){kx(n,a)}while(1);qv(),Yd.current=s,He=i,zt!==null?e=0:(Xt=null,sn=0,e=qt)}if(e!==0){if(e===2&&(i=Yg(n),i!==0&&(r=i,e=by(n,i))),e===1)throw t=tc,ro(n,0),zi(n,r),Bn(n,Ot()),t;if(e===6)zi(n,r);else{if(i=n.current.alternate,!(r&30)&&!BO(i)&&(e=Zd(n,r),e===2&&(s=Yg(n),s!==0&&(r=s,e=by(n,s))),e===1))throw t=tc,ro(n,0),zi(n,r),Bn(n,Ot()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:Bs(n,Dn,ni);break;case 3:if(zi(n,r),(r&130023424)===r&&(e=o_+500-Ot(),10<e)){if(Ld(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){An(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=iy(Bs.bind(null,n,Dn,ni),e);break}Bs(n,Dn,ni);break;case 4:if(zi(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Er(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UO(r/1960))-r,10<r){n.timeoutHandle=iy(Bs.bind(null,n,Dn,ni),r);break}Bs(n,Dn,ni);break;case 5:Bs(n,Dn,ni);break;default:throw Error(Te(329))}}}return Bn(n,Ot()),n.callbackNode===t?Px.bind(null,n):null}function by(n,e){var t=Au;return n.current.memoizedState.isDehydrated&&(ro(n,e).flags|=256),n=Zd(n,e),n!==2&&(e=Dn,Dn=t,e!==null&&Ay(e)),n}function Ay(n){Dn===null?Dn=n:Dn.push.apply(Dn,n)}function BO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ir(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zi(n,e){for(e&=~s_,e&=~Bf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Er(e),r=1<<t;n[t]=-1,e&=~r}}function lT(n){if(He&6)throw Error(Te(327));Ia();var e=Ld(n,0);if(!(e&1))return Bn(n,Ot()),null;var t=Zd(n,e);if(n.tag!==0&&t===2){var r=Yg(n);r!==0&&(e=r,t=by(n,r))}if(t===1)throw t=tc,ro(n,0),zi(n,e),Bn(n,Ot()),t;if(t===6)throw Error(Te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Bs(n,Dn,ni),Bn(n,Ot()),null}function a_(n,e){var t=He;He|=1;try{return n(e)}finally{He=t,He===0&&(Ba=Ot()+500,Ff&&Es())}}function mo(n){Gi!==null&&Gi.tag===0&&!(He&6)&&Ia();var e=He;He|=1;var t=or.transition,r=tt;try{if(or.transition=null,tt=1,n)return n()}finally{tt=r,or.transition=t,He=e,!(He&6)&&Es()}}function l_(){Wn=ga.current,pt(ga)}function ro(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,gO(t)),zt!==null)for(t=zt.return;t!==null;){var r=t;switch(zv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bd();break;case 3:Ma(),pt(Mn),pt(vn),Xv();break;case 5:Yv(r);break;case 4:Ma();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:Gv(r.type._context);break;case 22:case 23:l_()}t=t.return}if(Xt=n,zt=n=rs(n.current,null),sn=Wn=e,qt=0,tc=null,s_=Bf=po=0,Dn=Au=null,Qs!==null){for(e=0;e<Qs.length;e++)if(t=Qs[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Qs=null}return n}function kx(n,e){do{var t=zt;try{if(qv(),ad.current=Qd,Kd){for(var r=Tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kd=!1}if(fo=0,Qt=$t=Tt=null,Iu=!1,Ju=0,i_.current=null,t===null||t.return===null){qt=1,tc=e,zt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=QE(o);if(y!==null){y.flags&=-257,YE(y,o,a,s,e),y.mode&1&&KE(s,u,e),e=y,l=u;var E=e.updateQueue;if(E===null){var _=new Set;_.add(l),e.updateQueue=_}else E.add(l);break e}else{if(!(e&1)){KE(s,u,e),u_();break e}l=Error(Te(426))}}else if(yt&&a.mode&1){var b=QE(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),YE(b,o,a,s,e),$v(Ua(l,a));break e}}s=l=Ua(l,a),qt!==4&&(qt=2),Au===null?Au=[s]:Au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=px(s,l,e);jE(s,m);break e;case 1:a=l;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ts===null||!ts.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=mx(s,a,e);jE(s,D);break e}}s=s.return}while(s!==null)}Ox(t)}catch(F){e=F,zt===t&&t!==null&&(zt=t=t.return);continue}break}while(1)}function Nx(){var n=Yd.current;return Yd.current=Qd,n===null?Qd:n}function u_(){(qt===0||qt===3||qt===2)&&(qt=4),Xt===null||!(po&268435455)&&!(Bf&268435455)||zi(Xt,sn)}function Zd(n,e){var t=He;He|=2;var r=Nx();(Xt!==n||sn!==e)&&(ni=null,ro(n,e));do try{jO();break}catch(i){kx(n,i)}while(1);if(qv(),He=t,Yd.current=r,zt!==null)throw Error(Te(261));return Xt=null,sn=0,qt}function jO(){for(;zt!==null;)Dx(zt)}function zO(){for(;zt!==null&&!fD();)Dx(zt)}function Dx(n){var e=Fx(n.alternate,n,Wn);n.memoizedProps=n.pendingProps,e===null?Ox(n):zt=e,i_.current=null}function Ox(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=LO(t,e),t!==null){t.flags&=32767,zt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qt=6,zt=null;return}}else if(t=OO(t,e,Wn),t!==null){zt=t;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=n}while(e!==null);qt===0&&(qt=5)}function Bs(n,e,t){var r=tt,i=or.transition;try{or.transition=null,tt=1,$O(n,e,t,r)}finally{or.transition=i,tt=r}return null}function $O(n,e,t,r){do Ia();while(Gi!==null);if(He&6)throw Error(Te(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Te(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(ID(n,s),n===Xt&&(zt=Xt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Oh||(Oh=!0,Vx(Od,function(){return Ia(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=or.transition,or.transition=null;var o=tt;tt=1;var a=He;He|=4,i_.current=null,VO(n,t),Rx(t,n),uO(ny),Fd=!!ty,ny=ty=null,n.current=t,MO(t),pD(),He=a,tt=o,or.transition=s}else n.current=t;if(Oh&&(Oh=!1,Gi=n,Jd=i),s=n.pendingLanes,s===0&&(ts=null),yD(t.stateNode),Bn(n,Ot()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xd)throw Xd=!1,n=Ty,Ty=null,n;return Jd&1&&n.tag!==0&&Ia(),s=n.pendingLanes,s&1?n===Iy?xu++:(xu=0,Iy=n):xu=0,Es(),null}function Ia(){if(Gi!==null){var n=fA(Jd),e=or.transition,t=tt;try{if(or.transition=null,tt=16>n?16:n,Gi===null)var r=!1;else{if(n=Gi,Gi=null,Jd=0,He&6)throw Error(Te(331));var i=He;for(He|=4,ke=n.current;ke!==null;){var s=ke,o=s.child;if(ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ke=u;ke!==null;){var h=ke;switch(h.tag){case 0:case 11:case 15:bu(8,h,s)}var d=h.child;if(d!==null)d.return=h,ke=d;else for(;ke!==null;){h=ke;var p=h.sibling,y=h.return;if(Ax(h),h===u){ke=null;break}if(p!==null){p.return=y,ke=p;break}ke=y}}}var E=s.alternate;if(E!==null){var _=E.child;if(_!==null){E.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ke=m;break e}ke=s.return}}var v=n.current;for(ke=v;ke!==null;){o=ke;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,ke=I;else e:for(o=v;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uf(9,a)}}catch(F){xt(a,a.return,F)}if(a===o){ke=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ke=D;break e}ke=a.return}}if(He=i,Es(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(kf,n)}catch{}r=!0}return r}finally{tt=t,or.transition=e}}return!1}function uT(n,e,t){e=Ua(t,e),e=px(n,e,1),n=es(n,e,1),e=An(),n!==null&&(Sc(n,1,e),Bn(n,e))}function xt(n,e,t){if(n.tag===3)uT(n,n,t);else for(;e!==null;){if(e.tag===3){uT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ts===null||!ts.has(r))){n=Ua(t,n),n=mx(e,n,1),e=es(e,n,1),n=An(),e!==null&&(Sc(e,1,n),Bn(e,n));break}}e=e.return}}function WO(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=An(),n.pingedLanes|=n.suspendedLanes&t,Xt===n&&(sn&t)===t&&(qt===4||qt===3&&(sn&130023424)===sn&&500>Ot()-o_?ro(n,0):s_|=t),Bn(n,e)}function Lx(n,e){e===0&&(n.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var t=An();n=pi(n,e),n!==null&&(Sc(n,e,t),Bn(n,t))}function qO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Lx(n,t)}function GO(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),Lx(n,t)}var Fx;Fx=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Mn.current)On=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return On=!1,DO(n,e,t);On=!!(n.flags&131072)}else On=!1,yt&&e.flags&1048576&&UA(e,$d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ud(n,e),n=e.pendingProps;var i=La(e,vn.current);Ta(e,t),i=Zv(null,e,r,n,i,t);var s=e_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(s=!0,jd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kv(e),i.updater=Vf,e.stateNode=i,i._reactInternals=e,hy(e,r,n,t),e=py(null,e,r,!0,s,t)):(e.tag=0,yt&&s&&jv(e),Tn(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ud(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KO(r),n=vr(r,n),i){case 0:e=fy(null,e,r,n,t);break e;case 1:e=ZE(null,e,r,n,t);break e;case 11:e=XE(null,e,r,n,t);break e;case 14:e=JE(null,e,r,vr(r.type,n),t);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),fy(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),ZE(n,e,r,i,t);case 3:e:{if(_x(e),n===null)throw Error(Te(387));r=e.pendingProps,s=e.memoizedState,i=s.element,$A(n,e),Gd(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ua(Error(Te(423)),e),e=eT(n,e,r,t,i);break e}else if(r!==i){i=Ua(Error(Te(424)),e),e=eT(n,e,r,t,i);break e}else for(Gn=Zi(e.stateNode.containerInfo.firstChild),Kn=e,yt=!0,wr=null,t=HA(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Fa(),r===i){e=mi(n,e,t);break e}Tn(n,e,r,t)}e=e.child}return e;case 5:return KA(e),n===null&&ly(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,ry(r,i)?o=null:s!==null&&ry(r,s)&&(e.flags|=32),vx(n,e),Tn(n,e,o,t),e.child;case 6:return n===null&&ly(e),null;case 13:return wx(n,e,t);case 4:return Qv(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Va(e,null,r,t):Tn(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),XE(n,e,r,i,t);case 7:return Tn(n,e,e.pendingProps,t),e.child;case 8:return Tn(n,e,e.pendingProps.children,t),e.child;case 12:return Tn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ut(Wd,r._currentValue),r._currentValue=o,s!==null)if(Ir(s.value,o)){if(s.children===i.children&&!Mn.current){e=mi(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ci(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),uy(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Te(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),uy(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ta(e,t),i=lr(i),r=r(i),e.flags|=1,Tn(n,e,r,t),e.child;case 14:return r=e.type,i=vr(r,e.pendingProps),i=vr(r.type,i),JE(n,e,r,i,t);case 15:return gx(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),ud(n,e),e.tag=1,Un(r)?(n=!0,jd(e)):n=!1,Ta(e,t),qA(e,r,i),hy(e,r,i,t),py(null,e,r,!0,n,t);case 19:return Ex(n,e,t);case 22:return yx(n,e,t)}throw Error(Te(156,e.tag))};function Vx(n,e){return uA(n,e)}function HO(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,e,t,r){return new HO(n,e,t,r)}function c_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function KO(n){if(typeof n=="function")return c_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Cv)return 11;if(n===Pv)return 14}return 2}function rs(n,e){var t=n.alternate;return t===null?(t=ir(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function dd(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")c_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case oa:return io(t.children,i,s,e);case Rv:o=8,i|=8;break;case Lg:return n=ir(12,t,e,i|2),n.elementType=Lg,n.lanes=s,n;case Fg:return n=ir(13,t,e,i),n.elementType=Fg,n.lanes=s,n;case Vg:return n=ir(19,t,e,i),n.elementType=Vg,n.lanes=s,n;case G1:return jf(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case W1:o=10;break e;case q1:o=9;break e;case Cv:o=11;break e;case Pv:o=14;break e;case Ui:o=16,r=null;break e}throw Error(Te(130,n==null?n:typeof n,""))}return e=ir(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function io(n,e,t,r){return n=ir(7,n,r,e),n.lanes=t,n}function jf(n,e,t,r){return n=ir(22,n,r,e),n.elementType=G1,n.lanes=t,n.stateNode={isHidden:!1},n}function wm(n,e,t){return n=ir(6,n,null,e),n.lanes=t,n}function Em(n,e,t){return e=ir(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function QO(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tm(0),this.expirationTimes=tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function h_(n,e,t,r,i,s,o,a,l){return n=new QO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ir(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(s),n}function YO(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sa,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Mx(n){if(!n)return as;n=n._reactInternals;e:{if(Co(n)!==n||n.tag!==1)throw Error(Te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(n.tag===1){var t=n.type;if(Un(t))return VA(n,t,e)}return e}function Ux(n,e,t,r,i,s,o,a,l){return n=h_(t,r,!0,n,i,s,o,a,l),n.context=Mx(null),t=n.current,r=An(),i=ns(t),s=ci(r,i),s.callback=e??null,es(t,s,i),n.current.lanes=i,Sc(n,i,r),Bn(n,r),n}function zf(n,e,t,r){var i=e.current,s=An(),o=ns(i);return t=Mx(t),e.context===null?e.context=t:e.pendingContext=t,e=ci(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=es(i,e,o),n!==null&&(Tr(n,i,o,s),od(n,i,o)),o}function ef(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function d_(n,e){cT(n,e),(n=n.alternate)&&cT(n,e)}function XO(){return null}var Bx=typeof reportError=="function"?reportError:function(n){console.error(n)};function f_(n){this._internalRoot=n}$f.prototype.render=f_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Te(409));zf(n,e,null,null)};$f.prototype.unmount=f_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;mo(function(){zf(null,n,null,null)}),e[fi]=null}};function $f(n){this._internalRoot=n}$f.prototype.unstable_scheduleHydration=function(n){if(n){var e=gA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ji.length&&e!==0&&e<ji[t].priority;t++);ji.splice(t,0,n),t===0&&vA(n)}};function p_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function hT(){}function JO(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ef(o);s.call(u)}}var o=Ux(e,r,n,0,null,!1,!1,"",hT);return n._reactRootContainer=o,n[fi]=o.current,Hu(n.nodeType===8?n.parentNode:n),mo(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ef(l);a.call(u)}}var l=h_(n,0,!1,null,null,!1,!1,"",hT);return n._reactRootContainer=l,n[fi]=l.current,Hu(n.nodeType===8?n.parentNode:n),mo(function(){zf(e,l,t,r)}),l}function qf(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ef(o);a.call(l)}}zf(e,o,n,i)}else o=JO(t,e,n,i,r);return ef(o)}pA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=lu(e.pendingLanes);t!==0&&(Dv(e,t|1),Bn(e,Ot()),!(He&6)&&(Ba=Ot()+500,Es()))}break;case 13:mo(function(){var r=pi(n,1);if(r!==null){var i=An();Tr(r,n,1,i)}}),d_(n,1)}};Ov=function(n){if(n.tag===13){var e=pi(n,134217728);if(e!==null){var t=An();Tr(e,n,134217728,t)}d_(n,134217728)}};mA=function(n){if(n.tag===13){var e=ns(n),t=pi(n,e);if(t!==null){var r=An();Tr(t,n,e,r)}d_(n,e)}};gA=function(){return tt};yA=function(n,e){var t=tt;try{return tt=n,e()}finally{tt=t}};Hg=function(n,e,t){switch(e){case"input":if(Bg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Lf(r);if(!i)throw Error(Te(90));K1(r),Bg(r,i)}}}break;case"textarea":Y1(n,t);break;case"select":e=t.value,e!=null&&va(n,!!t.multiple,e,!1)}};rA=a_;iA=mo;var ZO={usingClientEntryPoint:!1,Events:[Cc,ca,Lf,tA,nA,a_]},Gl={findFiberByHostInstance:Ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},eL={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=aA(n),n===null?null:n.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||XO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{kf=Lh.inject(eL),jr=Lh}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;Jn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p_(e))throw Error(Te(200));return YO(n,e,null,t)};Jn.createRoot=function(n,e){if(!p_(n))throw Error(Te(299));var t=!1,r="",i=Bx;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=h_(n,1,!1,null,null,t,!1,r,i),n[fi]=e.current,Hu(n.nodeType===8?n.parentNode:n),new f_(e)};Jn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Te(188)):(n=Object.keys(n).join(","),Error(Te(268,n)));return n=aA(e),n=n===null?null:n.stateNode,n};Jn.flushSync=function(n){return mo(n)};Jn.hydrate=function(n,e,t){if(!Wf(e))throw Error(Te(200));return qf(null,n,e,!0,t)};Jn.hydrateRoot=function(n,e,t){if(!p_(n))throw Error(Te(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Bx;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ux(e,null,n,1,t??null,i,!1,s,o),n[fi]=e.current,Hu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new $f(e)};Jn.render=function(n,e,t){if(!Wf(e))throw Error(Te(200));return qf(null,n,e,!1,t)};Jn.unmountComponentAtNode=function(n){if(!Wf(n))throw Error(Te(40));return n._reactRootContainer?(mo(function(){qf(null,null,n,!1,function(){n._reactRootContainer=null,n[fi]=null})}),!0):!1};Jn.unstable_batchedUpdates=a_;Jn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Wf(t))throw Error(Te(200));if(n==null||n._reactInternals===void 0)throw Error(Te(38));return qf(n,e,t,!1,r)};Jn.version="18.2.0-next-9e3b772b8-20220608";function jx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jx)}catch(n){console.error(n)}}jx(),U1.exports=Jn;var tL=U1.exports,dT=tL;Dg.createRoot=dT.createRoot,Dg.hydrateRoot=dT.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},nL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(p=64)),r.push(t[h],t[d],t[p],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new rL;const p=s<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iL=function(n){const e=zx(n);return $x.encodeByteArray(e,!0)},tf=function(n){return iL(n).replace(/\./g,"")},m_=function(n){try{return $x.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nf(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!sL(t)||(n[t]=nf(n[t],e[t]));return n}function sL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=()=>Wx().__FIREBASE_DEFAULTS__,aL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&m_(n[1]);return e&&JSON.parse(e)},g_=()=>{try{return oL()||aL()||lL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},qx=()=>{var n;return(n=g_())===null||n===void 0?void 0:n.config},Gx=n=>{var e;return(e=g_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[tf(JSON.stringify(t)),tf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function y_(){var n;const e=(n=g_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hL(){return typeof window<"u"||Kx()}function Kx(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Gf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yx(){const n=Ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Xx(){return!y_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nc(){try{return typeof indexedDB=="object"}catch{return!1}}function dL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="FirebaseError";class on extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=fL,Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xr.prototype.create)}}class Xr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?pL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new on(i,a,r)}}function pL(n,e){return n.replace(mL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(pT(s)&&pT(o)){if(!rc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function pT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ya(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function cu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function __(n,e){const t=new yL(n,e);return t.subscribe.bind(t)}class yL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Tm),i.error===void 0&&(i.error=Tm),i.complete===void 0&&(i.complete=Tm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n){return n&&n._delegate?n._delegate:n}class cr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EL(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wL(n){return n===js?void 0:n}function EL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=[];var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const Zx={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},TL=je.INFO,IL={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},bL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=IL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kc{constructor(e){this.name=e,this._logLevel=TL,this._logHandler=bL,this._userLogHandler=null,w_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}function AL(n){w_.forEach(e=>{e.setLogLevel(n)})}function xL(n,e){for(const t of w_){let r=null;e&&e.level&&(r=Zx[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:je[s].toLowerCase(),message:a,args:o,type:i.name})}}}const SL=(n,e)=>e.some(t=>n instanceof t);let mT,gT;function RL(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CL(){return gT||(gT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eS=new WeakMap,xy=new WeakMap,tS=new WeakMap,Im=new WeakMap,E_=new WeakMap;function PL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(is(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&eS.set(t,n)}).catch(()=>{}),E_.set(e,n),e}function kL(n){if(xy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});xy.set(n,e)}let Sy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return is(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NL(n){Sy=n(Sy)}function DL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(bm(this),e,...t);return tS.set(r,e.sort?e.sort():[e]),is(r)}:CL().includes(n)?function(...e){return n.apply(bm(this),e),is(eS.get(this))}:function(...e){return is(n.apply(bm(this),e))}}function OL(n){return typeof n=="function"?DL(n):(n instanceof IDBTransaction&&kL(n),SL(n,RL())?new Proxy(n,Sy):n)}function is(n){if(n instanceof IDBRequest)return PL(n);if(Im.has(n))return Im.get(n);const e=OL(n);return e!==n&&(Im.set(n,e),E_.set(e,n)),e}const bm=n=>E_.get(n);function LL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=is(o);return r&&o.addEventListener("upgradeneeded",l=>{r(is(o.result),l.oldVersion,l.newVersion,is(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const FL=["get","getKey","getAll","getAllKeys","count"],VL=["put","add","delete","clear"],Am=new Map;function yT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=VL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FL.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return Am.set(e,s),s}NL(n=>({...n,get:(e,t,r)=>yT(e,t)||n.get(e,t,r),has:(e,t)=>!!yT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function UL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",Ry="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new kc("@firebase/app"),BL="@firebase/app-compat",jL="@firebase/analytics-compat",zL="@firebase/analytics",$L="@firebase/app-check-compat",WL="@firebase/app-check",qL="@firebase/auth",GL="@firebase/auth-compat",HL="@firebase/database",KL="@firebase/data-connect",QL="@firebase/database-compat",YL="@firebase/functions",XL="@firebase/functions-compat",JL="@firebase/installations",ZL="@firebase/installations-compat",eF="@firebase/messaging",tF="@firebase/messaging-compat",nF="@firebase/performance",rF="@firebase/performance-compat",iF="@firebase/remote-config",sF="@firebase/remote-config-compat",oF="@firebase/storage",aF="@firebase/storage-compat",lF="@firebase/firestore",uF="@firebase/vertexai-preview",cF="@firebase/firestore-compat",hF="firebase",dF="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]",fF={[rf]:"fire-core",[BL]:"fire-core-compat",[zL]:"fire-analytics",[jL]:"fire-analytics-compat",[WL]:"fire-app-check",[$L]:"fire-app-check-compat",[qL]:"fire-auth",[GL]:"fire-auth-compat",[HL]:"fire-rtdb",[KL]:"fire-data-connect",[QL]:"fire-rtdb-compat",[YL]:"fire-fn",[XL]:"fire-fn-compat",[JL]:"fire-iid",[ZL]:"fire-iid-compat",[eF]:"fire-fcm",[tF]:"fire-fcm-compat",[nF]:"fire-perf",[rF]:"fire-perf-compat",[iF]:"fire-rc",[sF]:"fire-rc-compat",[oF]:"fire-gcs",[aF]:"fire-gcs-compat",[lF]:"fire-fst",[cF]:"fire-fst-compat",[uF]:"fire-vertex","fire-js":"fire-js",[hF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Map,ja=new Map,za=new Map;function ic(n,e){try{n.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nS(n,e){n.container.addOrOverwriteComponent(e)}function qr(n){const e=n.name;if(za.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;za.set(e,n);for(const t of us.values())ic(t,n);for(const t of ja.values())ic(t,n);return!0}function rS(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pF(n,e,t=ls){rS(n,e).clearInstance(t)}function iS(n){return n.options!==void 0}function at(n){return n.settings!==void 0}function mF(){za.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Xr("app","Firebase",gF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sS=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF extends sS{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Qn(rf,Ry,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){I_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ar.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=dF;function T_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ls,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ar.create("bad-app-name",{appName:String(i)});if(t||(t=qx()),!t)throw ar.create("no-options");const s=us.get(i);if(s){if(rc(t,s.options)&&rc(r,s.config))return s;throw ar.create("duplicate-app",{appName:i})}const o=new Jx(i);for(const l of za.values())o.addComponent(l);const a=new sS(t,r,o);return us.set(i,a),a}function vF(n,e){if(hL()&&!Kx())throw ar.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;iS(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((h,d)=>Math.imul(31,h)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ar.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=ja.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Jx(s);for(const u of za.values())a.addComponent(u);const l=new yF(t,e,s,a);return ja.set(s,l),l}function _F(n=ls){const e=us.get(n);if(!e&&n===ls&&qx())return T_();if(!e)throw ar.create("no-app",{appName:n});return e}function wF(){return Array.from(us.values())}async function I_(n){let e=!1;const t=n.name;us.has(t)?(e=!0,us.delete(t)):ja.has(t)&&n.decRefCount()<=0&&(ja.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Qn(n,e,t){var r;let i=(r=fF[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(a.join(" "));return}qr(new cr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function oS(n,e){if(n!==null&&typeof n!="function")throw ar.create("invalid-log-argument");xL(n,e)}function aS(n){AL(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="firebase-heartbeat-database",TF=1,sc="firebase-heartbeat-store";let xm=null;function lS(){return xm||(xm=LL(EF,TF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ar.create("idb-open",{originalErrorMessage:n.message})})),xm}async function IF(n){try{const t=(await lS()).transaction(sc),r=await t.objectStore(sc).get(uS(n));return await t.done,r}catch(e){if(e instanceof on)gi.warn(e.message);else{const t=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function vT(n,e){try{const r=(await lS()).transaction(sc,"readwrite");await r.objectStore(sc).put(e,uS(n)),await r.done}catch(t){if(t instanceof on)gi.warn(t.message);else{const r=ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(r.message)}}}function uS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=1024,AF=30*24*60*60*1e3;class xF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_T();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=AF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_T(),{heartbeatsToSend:r,unsentEntries:i}=SF(this._heartbeatsCache.heartbeats),s=tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return gi.warn(t),""}}}function _T(){return new Date().toISOString().substring(0,10)}function SF(n,e=bF){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),wT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class RF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nc()?dL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IF(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return vT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return vT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wT(n){return tf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(n){qr(new cr("platform-logger",e=>new ML(e),"PRIVATE")),qr(new cr("heartbeat",e=>new xF(e),"PRIVATE")),Qn(rf,Ry,n),Qn(rf,Ry,"esm2017"),Qn("fire-js","")}CF("");const PF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:on,SDK_VERSION:Ar,_DEFAULT_ENTRY_NAME:ls,_addComponent:ic,_addOrOverwriteComponent:nS,_apps:us,_clearComponents:mF,_components:za,_getProvider:rS,_isFirebaseApp:iS,_isFirebaseServerApp:at,_registerComponent:qr,_removeServiceInstance:pF,_serverApps:ja,deleteApp:I_,getApp:_F,getApps:wF,initializeApp:T_,initializeServerApp:vF,onLog:oS,registerVersion:Qn,setLogLevel:aS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,t){this._delegate=e,this.firebase=t,ic(e,new cr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),I_(this._delegate)))}_getService(e,t=ls){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=ls){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ic(this._delegate,e)}_addOrOverwriteComponent(e){nS(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ET=new Xr("app-compat","Firebase",NF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Qn,setLogLevel:aS,onLog:oS,apps:null,SDK_VERSION:Ar,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:PF}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||ls,!fT(e,u))throw ET.create("no-app",{appName:u});return e[u]}i.App=n;function s(u,h={}){const d=T_(u,h);if(fT(e,d.name))return e[d.name];const p=new n(d,t);return e[d.name]=p,p}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const h=u.name,d=h.replace("-compat","");if(qr(u)&&u.type==="PUBLIC"){const p=(y=i())=>{if(typeof y[d]!="function")throw ET.create("invalid-app-argument",{appName:h});return y[d]()};u.serviceProps!==void 0&&nf(p,u.serviceProps),t[d]=p,n.prototype[d]=function(...y){return this._getService.bind(this,h).apply(this,u.multipleInstances?y:[])}}return u.type==="PUBLIC"?t[d]:null}function l(u,h){return h==="serverAuth"?null:h}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){const n=DF(kF);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:cS,extendNamespace:e,createSubscribe:__,ErrorFactory:Xr,deepExtend:nf});function e(t){nf(n,t)}return n}const OF=cS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new kc("@firebase/app-compat"),LF="@firebase/app-compat",FF="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(n){Qn(LF,FF,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Wx();if(n.firebase!==void 0){TT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&TT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Gr=OF;VF();var MF="firebase",UF="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr.registerVersion(MF,UF,"app-compat");function Nc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Hl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Wo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function hS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jF=BF,zF=hS,dS=new Xr("auth","Firebase",hS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new kc("@firebase/auth");function $F(n,...e){sf.logLevel<=je.WARN&&sf.warn(`Auth (${Ar}): ${n}`,...e)}function fd(n,...e){sf.logLevel<=je.ERROR&&sf.error(`Auth (${Ar}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,...e){throw A_(n,...e)}function Gt(n,...e){return A_(n,...e)}function b_(n,e,t){const r=Object.assign(Object.assign({},zF()),{[e]:t});return new Xr("auth","Firebase",r).create(e,{appName:n.name})}function Jt(n){return b_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&un(n,"argument-error"),b_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function A_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return dS.create(n,...e)}function Ie(n,e,...t){if(!n)throw A_(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fd(e),new Error(e)}function br(n,e){n||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function x_(){return IT()==="http:"||IT()==="https:"}function IT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x_()||v_()||"connection"in navigator)?navigator.onLine:!0}function qF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Gf()}get(){return WF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n,e){br(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fS=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new Dc(3e4,6e4);function Pt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function kt(n,e,t,r,i={}){return pS(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ts(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return Qx()||(u.referrerPolicy="no-referrer"),fS.fetch()(mS(n,n.config.apiHost,t,a),u)})}async function pS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},GF),e);try{const i=new QF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw hu(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw b_(n,h,u);un(n,h)}}catch(i){if(i instanceof on)throw i;un(n,"network-request-failed",{message:String(i)})}}async function Ei(n,e,t,r,i={}){const s=await kt(n,e,t,r,i);return"mfaPendingCredential"in s&&un(n,"multi-factor-auth-required",{_serverResponse:s}),s}function mS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?S_(n.config,i):`${n.config.apiScheme}://${i}`}function KF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let QF=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),HF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Gt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n){return n!==void 0&&n.getResponse!==void 0}function AT(n){return n!==void 0&&n.enterprise!==void 0}class YF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(n){return(await kt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function JF(n,e){return kt(n,"GET","/v2/recaptchaConfig",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(n,e){return kt(n,"POST","/v1/accounts:delete",e)}async function eV(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function gS(n,e){return kt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tV(n,e=!1){const t=Fe(n),r=await t.getIdToken(e),i=Hf(r);Ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Su(Sm(i.auth_time)),issuedAtTime:Su(Sm(i.iat)),expirationTime:Su(Sm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Sm(n){return Number(n)*1e3}function Hf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const i=m_(t);return i?JSON.parse(i):(fd("Failed to decode base64 JWT payload"),null)}catch(i){return fd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xT(n){const e=Hf(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof on&&nV(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function nV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rV=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n){var e;const t=n.auth,r=await n.getIdToken(),i=await yi(n,gS(t,{idToken:r}));Ie(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yS(s.providerUserInfo):[],a=sV(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cy(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function iV(n){const e=Fe(n);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yS(n){return n.map(e=>{var{providerId:t}=e,r=Nc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(n,e){const t=await pS(n,{},async()=>{const r=Ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=mS(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aV(n,e){return kt(n,"POST","/v2/accounts:revokeToken",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm=class Py{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=xT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await oV(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Py;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Py,this.toJSON())}_performRefresh(){return Vr("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let of=class du{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Nc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await yi(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tV(this,e)}reload(){return iV(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new du(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(at(this.auth.app))return Promise.reject(Jt(this.auth));const e=await this.getIdToken();return await yi(this,ZF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=t.createdAt)!==null&&u!==void 0?u:void 0,v=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:D,isAnonymous:F,providerData:$,stsTokenManager:k}=t;Ie(I&&k,e,"internal-error");const N=Rm.fromJSON(this.name,k);Ie(typeof I=="string",e,"internal-error"),Oi(d,e.name),Oi(p,e.name),Ie(typeof D=="boolean",e,"internal-error"),Ie(typeof F=="boolean",e,"internal-error"),Oi(y,e.name),Oi(E,e.name),Oi(_,e.name),Oi(b,e.name),Oi(m,e.name),Oi(v,e.name);const T=new du({uid:I,auth:e,email:p,emailVerified:D,displayName:d,isAnonymous:F,photoURL:E,phoneNumber:y,tenantId:_,stsTokenManager:N,createdAt:m,lastLoginAt:v});return $&&Array.isArray($)&&(T.providerData=$.map(U=>Object.assign({},U))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Rm;i.updateFromServerResponse(t);const s=new du({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ac(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ie(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Rm;a.updateFromIdToken(r);const l=new du({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;function Hn(n){br(n instanceof Function,"Expected a class definition");let e=ST.get(n);return e?(br(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ST.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vS=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};vS.type="NONE";const $a=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n,e,t){return`firebase:${n}:${e}:${t}`}let RT=class pd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=so(this.userKey,i.apiKey,s),this.fullPersistenceKey=so("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?of._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pd(Hn($a),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Hn($a);const o=so(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){const d=of._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new pd(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new pd(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IS(e))return"Blackberry";if(bS(e))return"Webos";if(wS(e))return"Safari";if((e.includes("chrome/")||ES(e))&&!e.includes("edge/"))return"Chrome";if(Oc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _S(n=Ye()){return/firefox\//i.test(n)}function wS(n=Ye()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ES(n=Ye()){return/crios\//i.test(n)}function TS(n=Ye()){return/iemobile/i.test(n)}function Oc(n=Ye()){return/android/i.test(n)}function IS(n=Ye()){return/blackberry/i.test(n)}function bS(n=Ye()){return/webos/i.test(n)}function Lc(n=Ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lV(n=Ye()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function uV(n=Ye()){var e;return Lc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cV(){return Yx()&&document.documentMode===10}function AS(n=Ye()){return Lc(n)||Oc(n)||bS(n)||IS(n)||/windows phone/i.test(n)||TS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,e=[]){let t;switch(n){case"Browser":t=CT(Ye());break;case"Worker":t=`${CT(Ye())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hV=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(n,e={}){return kt(n,"GET","/v2/passwordPolicy",Pt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=6;let pV=class{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mV=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PT(this),this.idTokenSubscription=new PT(this),this.beforeStateQueue=new hV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await RT.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gS(this,{idToken:e}),r=await of._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(at(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(at(this.app))return Promise.reject(Jt(this));const t=e?Fe(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return at(this.app)?Promise.reject(Jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return at(this.app)?Promise.reject(Jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dV(this),t=new pV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hn(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await RT.create(this,[Hn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&$F(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}};function Rt(n){return Fe(n)}let PT=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=__(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gV(n){Fc=n}function R_(n){return Fc.loadJS(n)}function yV(){return Fc.recaptchaV2Script}function vV(){return Fc.recaptchaEnterpriseScript}function _V(){return Fc.gapiScript}function SS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const wV="recaptcha-enterprise",EV="NO_RECAPTCHA";class TV{constructor(e){this.type=wV,this.auth=Rt(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{JF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new YF(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;AT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(EV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&AT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vV();l.length!==0&&(l+=a),R_(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function kT(n,e,t,r=!1){const i=new TV(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lc(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await kT(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kT(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}function IV(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bV(n,e,t){const r=Rt(n);Ie(r._canInitEmulator,r,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=RS(e),{host:o,port:a}=AV(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||xV()}function RS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AV(n){const e=RS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:NT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:NT(o)}}}function NT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(n,e){return kt(n,"POST","/v1/accounts:resetPassword",Pt(n,e))}async function SV(n,e){return kt(n,"POST","/v1/accounts:update",e)}async function RV(n,e){return kt(n,"POST","/v1/accounts:signUp",e)}async function CV(n,e){return kt(n,"POST","/v1/accounts:update",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(n,e){return Ei(n,"POST","/v1/accounts:signInWithPassword",Pt(n,e))}async function Kf(n,e){return kt(n,"POST","/v1/accounts:sendOobCode",Pt(n,e))}async function kV(n,e){return Kf(n,e)}async function NV(n,e){return Kf(n,e)}async function DV(n,e){return Kf(n,e)}async function OV(n,e){return Kf(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(n,e){return Ei(n,"POST","/v1/accounts:signInWithEmailLink",Pt(n,e))}async function FV(n,e){return Ei(n,"POST","/v1/accounts:signInWithEmailLink",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends fl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new uc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new uc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lc(e,t,"signInWithPassword",PV);case"emailLink":return LV(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lc(e,r,"signUpPassword",RV);case"emailLink":return FV(e,{idToken:t,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(n,e){return Ei(n,"POST","/v1/accounts:signInWithIdp",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="http://localhost";class Hr extends fl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):un("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Nc(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Hr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return hi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}buildRequest(){const e={requestUri:VV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ts(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(n,e){return kt(n,"POST","/v1/accounts:sendVerificationCode",Pt(n,e))}async function UV(n,e){return Ei(n,"POST","/v1/accounts:signInWithPhoneNumber",Pt(n,e))}async function BV(n,e){const t=await Ei(n,"POST","/v1/accounts:signInWithPhoneNumber",Pt(n,e));if(t.temporaryProof)throw hu(n,"account-exists-with-different-credential",t);return t}const jV={USER_NOT_FOUND:"user-not-found"};async function zV(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ei(n,"POST","/v1/accounts:signInWithPhoneNumber",Pt(n,t),jV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends fl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new oo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new oo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return UV(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return BV(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return zV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new oo({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WV(n){const e=ya(cu(n)).link,t=e?ya(cu(e)).deep_link_id:null,r=ya(cu(n)).deep_link_id;return(r?ya(cu(r)).link:null)||r||t||e||n}class Qf{constructor(e){var t,r,i,s,o,a;const l=ya(cu(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=$V((i=l.mode)!==null&&i!==void 0?i:null);Ie(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=WV(e);try{return new Qf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.providerId=Is.PROVIDER_ID}static credential(e,t){return uc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Qf.parseLink(t);return Ie(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}Is.PROVIDER_ID="password";Is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Ti{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ba extends pl{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Ie("providerId"in t&&"signInMethod"in t,"argument-error"),Hr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ie(e.idToken||e.accessToken,"argument-error"),Hr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ba.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ba.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new ba(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends pl{constructor(){super("facebook.com")}static credential(e){return Hr._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Or.credential(t,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends pl{constructor(){super("github.com")}static credential(e){return Hr._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="http://localhost";class Wa extends fl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return hi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new Wa(r,s)}static _create(e,t){return new Wa(e,t)}buildRequest(){return{requestUri:qV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="saml.";class af extends Ti{constructor(e){Ie(e.startsWith(GV),"argument-error"),super(e)}static credentialFromResult(e){return af.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return af.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Wa.fromJSON(e);return Ie(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Wa._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends pl{constructor(){super("twitter.com")}static credential(e,t){return Hr._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fr.credential(t,r)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(n,e){return Ei(n,"POST","/v1/accounts:signUp",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await of._fromIdTokenResponse(e,r,i),o=DT(r);return new hr({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=DT(r);return new hr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function DT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(n){var e;if(at(n.app))return Promise.reject(Jt(n));const t=Rt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new hr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await PS(t,{returnSecureToken:!0}),i=await hr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends on{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lf(e,t,r,i)}}function kS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(n,e){const t=Fe(n);await Yf(!0,t,e);const{providerUserInfo:r}=await eV(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=NS(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function C_(n,e,t=!1){const r=await yi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hr._forOperation(n,"link",r)}async function Yf(n,e,t){await ac(e);const r=NS(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";Ie(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(n,e,t=!1){const{auth:r}=n;if(at(r.app))return Promise.reject(Jt(r));const i="reauthenticate";try{const s=await yi(n,kS(r,i,e,n),t);Ie(s.idToken,r,"internal-error");const o=Hf(s.idToken);Ie(o,r,"internal-error");const{sub:a}=o;return Ie(n.uid===a,r,"user-mismatch"),hr._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(n,e,t=!1){if(at(n.app))return Promise.reject(Jt(n));const r="signIn",i=await kS(n,r,e),s=await hr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Xf(n,e){return OS(Rt(n),e)}async function LS(n,e){const t=Fe(n);return await Yf(!1,t,e.providerId),C_(t,e)}async function FS(n,e){return DS(Fe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(n,e){return Ei(n,"POST","/v1/accounts:signInWithCustomToken",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(n,e){if(at(n.app))return Promise.reject(Jt(n));const t=Rt(n),r=await QV(t,{token:e,returnSecureToken:!0}),i=await hr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?P_._fromServerResponse(e,t):"totpInfo"in t?k_._fromServerResponse(e,t):un(e,"internal-error")}}class P_ extends Vc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new P_(t)}}class k_ extends Vc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new k_(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n,e,t){var r;Ie(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Ie(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ie(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ie(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n){const e=Rt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XV(n,e,t){const r=Rt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Jf(r,i,t),await lc(r,i,"getOobCode",NV)}async function JV(n,e,t){await CS(Fe(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(n),r})}async function ZV(n,e){await CV(Fe(n),{oobCode:e})}async function VS(n,e){const t=Fe(n),r=await CS(t,{oobCode:e}),i=r.requestType;switch(Ie(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(r.mfaInfo,t,"internal-error");default:Ie(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Vc._fromServerResponse(Rt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function eM(n,e){const{data:t}=await VS(Fe(n),e);return t.email}async function tM(n,e,t){if(at(n.app))return Promise.reject(Jt(n));const r=Rt(n),o=await lc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&N_(n),l}),a=await hr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nM(n,e,t){return at(n.app)?Promise.reject(Jt(n)):Xf(Fe(n),Is.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(n,e,t){const r=Rt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){Ie(a.handleCodeInApp,r,"argument-error"),a&&Jf(r,o,a)}s(i,t),await lc(r,i,"getOobCode",DV)}function iM(n,e){const t=Qf.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function sM(n,e,t){if(at(n.app))return Promise.reject(Jt(n));const r=Fe(n),i=Is.credentialWithLink(e,t||oc());return Ie(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Xf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(n,e){return kt(n,"POST","/v1/accounts:createAuthUri",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e){const t=x_()?oc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await oM(Fe(n),r);return i||[]}async function lM(n,e){const t=Fe(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Jf(t.auth,i,e);const{email:s}=await kV(t.auth,i);s!==n.email&&await n.reload()}async function uM(n,e,t){const r=Fe(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Jf(r.auth,s,t);const{email:o}=await OV(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(n,e){return kt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Fe(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await yi(r,cM(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function dM(n,e){const t=Fe(n);return at(t.auth.app)?Promise.reject(Jt(t.auth)):MS(t,e,null)}function fM(n,e){return MS(Fe(n),null,e)}async function MS(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await yi(n,SV(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=Hf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Aa(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new mM(s,i);case"github.com":return new gM(s,i);case"google.com":return new yM(s,i);case"twitter.com":return new vM(s,i,n.screenName||null);case"custom":case"anonymous":return new Aa(s,null);default:return new Aa(s,r,i)}}class Aa{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class US extends Aa{constructor(e,t,r,i){super(e,t,r),this.username=i}}class mM extends Aa{constructor(e,t){super(e,"facebook.com",t)}}class gM extends US{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class yM extends Aa{constructor(e,t){super(e,"google.com",t)}}class vM extends US{constructor(e,t,r){super(e,"twitter.com",t,r)}}function _M(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:pM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Xs("enroll",e,t)}static _fromMfaPendingCredential(e){return new Xs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Xs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Xs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Rt(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Vc._fromServerResponse(r,a));Ie(i.mfaPendingCredential,r,"internal-error");const o=Xs._fromMfaPendingCredential(i.mfaPendingCredential);return new D_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const h=await hr._fromIdTokenResponse(r,t.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return Ie(t.user,r,"internal-error"),hr._forOperation(t.user,t.operationType,u);default:un(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function wM(n,e){var t;const r=Fe(n),i=e;return Ie(e.customData.operationType,r,"argument-error"),Ie((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),D_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:start",Pt(n,e))}function TM(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Pt(n,e))}function IM(n,e){return kt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Pt(n,e))}class O_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Vc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new O_(e)}async getSession(){return Xs._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await yi(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await yi(this.user,IM(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Cm=new WeakMap;function bM(n){const e=Fe(n);return Cm.has(e)||Cm.set(e,O_._fromUser(e)),Cm.get(e)}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=1e3,xM=10;class jS extends BS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xM):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jS.type="LOCAL";const L_=jS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends BS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zS.type="SESSION";const go=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await SM(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Mc("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return window}function CM(n){jt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(){return typeof jt().WorkerGlobalScope<"u"&&typeof jt().importScripts=="function"}async function PM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NM(){return F_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebaseLocalStorageDb",DM=1,cf="firebaseLocalStorage",WS="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ep(n,e){return n.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function OM(){const n=indexedDB.deleteDatabase($S);return new Uc(n).toPromise()}function ky(){const n=indexedDB.open($S,DM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(cf,{keyPath:WS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(cf)?e(r):(r.close(),await OM(),e(await ky()))})})}async function OT(n,e,t){const r=ep(n,!0).put({[WS]:e,value:t});return new Uc(r).toPromise()}async function LM(n,e){const t=ep(n,!1).get(e),r=await new Uc(t).toPromise();return r===void 0?null:r.value}function LT(n,e){const t=ep(n,!0).delete(e);return new Uc(t).toPromise()}const FM=800,VM=3;class qS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ky(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>VM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(NM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await PM(),!this.activeServiceWorker)return;this.sender=new RM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ky();return await OT(e,uf,"1"),await LT(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>OT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>LT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ep(i,!1).getAll();return new Uc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qS.type="LOCAL";const cc=qS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:start",Pt(n,e))}function UM(n,e){return kt(n,"POST","/v2/accounts/mfaSignIn:finalize",Pt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=500,jM=6e4,Fh=1e12;class zM{constructor(e){this.auth=e,this.counter=Fh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new $M(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Fh;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Fh;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Fh;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class $M{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ie(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=WM(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},jM)},BM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function WM(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=SS("rcb"),qM=new Dc(3e4,6e4);class GM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=jt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return Ie(HM(t),e,"argument-error"),this.shouldResolveImmediately(t)&&bT(jt().grecaptcha)?Promise.resolve(jt().grecaptcha):new Promise((r,i)=>{const s=jt().setTimeout(()=>{i(Gt(e,"network-request-failed"))},qM.get());jt()[Pm]=()=>{jt().clearTimeout(s),delete jt()[Pm];const a=jt().grecaptcha;if(!a||!bT(a)){i(Gt(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const d=l(u,h);return this.counter++,d},this.hostLanguage=t,r(a)};const o=`${yV()}?${Ts({onload:Pm,render:"explicit",hl:t})}`;R_(o).catch(()=>{clearTimeout(s),i(Gt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=jt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function HM(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class KM{async load(e){return new zM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="recaptcha",QM={theme:"light",type:"image"};let YM=class{constructor(e,t,r=Object.assign({},QM)){this.parameters=r,this.type=GS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(e),this.isInvisible=this.parameters.size==="invisible",Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;Ie(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KM:new GM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=jt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ie(x_()&&!F_(),this.auth,"internal-error"),await XM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await XF(this.auth);Ie(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function XM(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=oo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function JM(n,e,t){if(at(n.app))return Promise.reject(Jt(n));const r=Rt(n),i=await tp(r,e,Fe(t));return new V_(i,s=>Xf(r,s))}async function ZM(n,e,t){const r=Fe(n);await Yf(!1,r,"phone");const i=await tp(r.auth,e,Fe(t));return new V_(i,s=>LS(r,s))}async function eU(n,e,t){const r=Fe(n);if(at(r.auth.app))return Promise.reject(Jt(r.auth));const i=await tp(r.auth,e,Fe(t));return new V_(i,s=>FS(r,s))}async function tp(n,e,t){var r;const i=await t.verify();try{Ie(typeof i=="string",n,"argument-error"),Ie(t.type===GS,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return Ie(o.type==="enroll",n,"internal-error"),(await EM(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ie(o.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return Ie(a,n,"missing-multi-factor-info"),(await MM(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await MV(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function tU(n,e){const t=Fe(n);if(at(t.auth.app))return Promise.reject(Jt(t.auth));await C_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo=class md{constructor(e){this.providerId=md.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,t){return tp(this.auth,e,Fe(t))}static credential(e,t){return oo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return md.credentialFromTaggedObject(t)}static credentialFromError(e){return md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?oo._fromTokenResponse(t,r):null}};yo.PROVIDER_ID="phone";yo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(n,e){return e?Hn(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends fl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nU(n){return OS(n.auth,new M_(n),n.bypassAuthState)}function rU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),DS(t,new M_(n),n.bypassAuthState)}async function iU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),C_(t,new M_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nU;case"linkViaPopup":case"linkViaRedirect":return iU;case"reauthViaPopup":case"reauthViaRedirect":return rU;default:un(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new Dc(2e3,1e4);async function oU(n,e,t){if(at(n.app))return Promise.reject(Gt(n,"operation-not-supported-in-this-environment"));const r=Rt(n);dl(n,e,Ti);const i=Po(r,t);return new oi(r,"signInViaPopup",e,i).executeNotNull()}async function aU(n,e,t){const r=Fe(n);if(at(r.auth.app))return Promise.reject(Gt(r.auth,"operation-not-supported-in-this-environment"));dl(r.auth,e,Ti);const i=Po(r.auth,t);return new oi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function lU(n,e,t){const r=Fe(n);dl(r.auth,e,Ti);const i=Po(r.auth,t);return new oi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class oi extends HS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oi.currentPopupAction&&oi.currentPopupAction.cancel(),oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Mc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sU.get())};e()}}oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="pendingRedirect",Ru=new Map;class cU extends HS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ru.get(this.auth._key());if(!e){try{const r=await hU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ru.set(this.auth._key(),e)}return this.bypassAuthState||Ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hU(n,e){const t=QS(e),r=KS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function U_(n,e){return KS(n)._set(QS(e),"true")}function dU(){Ru.clear()}function B_(n,e){Ru.set(n._key(),e)}function KS(n){return Hn(n._redirectPersistence)}function QS(n){return so(uU,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n,e,t){return pU(n,e,t)}async function pU(n,e,t){if(at(n.app))return Promise.reject(Jt(n));const r=Rt(n);dl(n,e,Ti),await r._initializationPromise;const i=Po(r,t);return await U_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function mU(n,e,t){return gU(n,e,t)}async function gU(n,e,t){const r=Fe(n);if(dl(r.auth,e,Ti),at(r.auth.app))return Promise.reject(Jt(r.auth));await r.auth._initializationPromise;const i=Po(r.auth,t);await U_(i,r.auth);const s=await YS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function yU(n,e,t){return vU(n,e,t)}async function vU(n,e,t){const r=Fe(n);dl(r.auth,e,Ti),await r.auth._initializationPromise;const i=Po(r.auth,t);await Yf(!1,r,e.providerId),await U_(i,r.auth);const s=await YS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function _U(n,e){return await Rt(n)._initializationPromise,np(n,e,!1)}async function np(n,e,t=!1){if(at(n.app))return Promise.reject(Jt(n));const r=Rt(n),i=Po(r,e),o=await new cU(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function YS(n){const e=Mc(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=10*60*1e3;class XS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Gt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wU&&this.cachedEventUids.clear(),this.cachedEventUids.has(FT(e))}saveEventToCache(e){this.cachedEventUids.add(FT(e)),this.lastProcessedEventTime=Date.now()}}function FT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(n,e={}){return kt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IU=/^https?/;async function bU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ZS(n);for(const t of e)try{if(AU(t))return}catch{}un(n,"unauthorized-domain")}function AU(n){const e=oc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!IU.test(t))return!1;if(TU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=new Dc(3e4,6e4);function VT(){const n=jt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SU(n){return new Promise((e,t)=>{var r,i,s;function o(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),t(Gt(n,"network-request-failed"))},timeout:xU.get()})}if(!((i=(r=jt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jt().gapi)===null||s===void 0)&&s.load)o();else{const a=SS("iframefcb");return jt()[a]=()=>{gapi.load?o():t(Gt(n,"network-request-failed"))},R_(`${_V()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw gd=null,e})}let gd=null;function RU(n){return gd=gd||SU(n),gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=new Dc(5e3,15e3),PU="__/auth/iframe",kU="emulator/auth/iframe",NU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OU(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?S_(e,kU):`https://${n.config.authDomain}/${PU}`,r={apiKey:e.apiKey,appName:n.name,v:Ar},i=DU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ts(r).slice(1)}`}async function LU(n){const e=await RU(n),t=jt().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:OU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gt(n,"network-request-failed"),a=jt().setTimeout(()=>{s(o)},CU.get());function l(){jt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VU=500,MU=600,UU="_blank",BU="http://localhost";class MT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jU(n,e,t,r=VU,i=MU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FU),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ye().toLowerCase();t&&(a=ES(u)?UU:t),_S(u)&&(e=e||BU,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,E])=>`${p}${y}=${E},`,"");if(uV(u)&&a!=="_self")return zU(e||"",a),new MT(null);const d=window.open(e||"",a,h);Ie(d,n,"popup-blocked");try{d.focus()}catch{}return new MT(d)}function zU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="__/auth/handler",WU="emulator/auth/handler",qU=encodeURIComponent("fac");async function Ny(n,e,t,r,i,s){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ar,eventId:i};if(e instanceof Ti){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",gL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof pl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${qU}=${encodeURIComponent(l)}`:"";return`${GU(n)}?${Ts(a).slice(1)}${u}`}function GU({config:n}){return n.emulator?S_(n,WU):`https://${n.authDomain}/${$U}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="webStorageSupport";class HU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=np,this._overrideRedirectResult=B_}async _openPopup(e,t,r,i){var s;br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ny(e,t,r,oc(),i);return jU(e,o,Mc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Ny(e,t,r,oc(),i);return CM(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await LU(e),r=new XS(e);return t.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(km,{type:km},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[km];o!==void 0&&t(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AS()||wS()||Lc()}}const KU=HU;class QU{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vr("unexpected MultiFactorSessionType")}}}class j_ extends QU{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new j_(e)}_finalizeEnroll(e,t,r){return TM(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return UM(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class eR{constructor(){}static assertion(e){return j_._fromCredential(e)}}eR.FACTOR_ID="phone";var UT="@firebase/auth",BT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YU=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JU(n){qr(new cr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xS(n)},u=new mV(r,i,s,l);return IV(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qr(new cr("auth-internal",e=>{const t=Rt(e.getProvider("auth").getImmediate());return(r=>new YU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(UT,BT,XU(n)),Qn(UT,BT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=5*60;Gx("authIdTokenMaxAge");function e4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gV({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Gt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",e4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JU("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=2e3;async function n4(n,e,t){var r;const{BuildInfo:i}=vo();br(e.sessionId,"AuthEvent did not contain a session ID");const s=await a4(e.sessionId),o={};return Lc()?o.ibi=i.packageName:Oc()?o.apn=i.packageName:un(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ny(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function r4(n){const{BuildInfo:e}=vo(),t={};Lc()?t.iosBundleId=e.packageName:Oc()?t.androidPackageName=e.packageName:un(n,"operation-not-supported-in-this-environment"),await ZS(n,t)}function i4(n){const{cordova:e}=vo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,lV()?"_blank":"_system","location=yes"),t(i)})})}async function s4(n,e,t){const{cordova:r}=vo();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const p=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof p=="function"&&p(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){a||(a=window.setTimeout(()=>{o(Gt(n,"redirect-cancelled-by-user"))},t4))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Oc()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{i()}}function o4(n){var e,t,r,i,s,o,a,l,u,h;const d=vo();Ie(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie(typeof((h=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||h===void 0?void 0:h.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function a4(n){const e=l4(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function l4(n){if(br(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=20;class c4 extends XS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function h4(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:p4(),postBody:null,tenantId:n.tenantId,error:Gt(n,"no-auth-event")}}function d4(n,e){return Dy()._set(Oy(n),e)}async function jT(n){const e=await Dy()._get(Oy(n));return e&&await Dy()._remove(Oy(n)),e}function f4(n,e){var t,r;const i=g4(e);if(i.includes("/__/auth/callback")){const s=yd(i),o=s.firebaseError?m4(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Gt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function p4(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<u4;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Dy(){return Hn(L_)}function Oy(n){return so("authEvent",n.config.apiKey,n.name)}function m4(n){try{return JSON.parse(n)}catch{return null}}function g4(n){const e=yd(n),t=e.link?decodeURIComponent(e.link):void 0,r=yd(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return yd(i).link||i||r||t||n}function yd(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return ya(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=500;class v4{constructor(){this._redirectPersistence=go,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=np,this._overrideRedirectResult=B_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new c4(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){un(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){o4(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),dU(),await this._originValidation(e);const o=h4(e,r,i);await d4(e,o);const a=await n4(e,o,t),l=await i4(a);return s4(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r4(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=vo(),o=setTimeout(async()=>{await jT(e),t.onEvent(zT())},y4),a=async h=>{clearTimeout(o);const d=await jT(e);let p=null;d&&(h!=null&&h.url)&&(p=f4(d,h.url)),t.onEvent(p||zT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;vo().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(u)&&a({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const _4=v4;function zT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Gt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n,e){Rt(n)._logFramework(e)}var E4="@firebase/auth-compat",T4="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=1e3;function Cu(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function b4(){return Cu()==="http:"||Cu()==="https:"}function tR(n=Ye()){return!!((Cu()==="file:"||Cu()==="ionic:"||Cu()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function A4(){return Gf()||y_()}function x4(){return Yx()&&(document==null?void 0:document.documentMode)===11}function S4(n=Ye()){return/Edge\/\d+/.test(n)}function R4(n=Ye()){return x4()||S4(n)}function nR(){try{const n=self.localStorage,e=Mc();if(n)return n.setItem(e,"1"),n.removeItem(e),R4()?nc():!0}catch{return z_()&&nc()}return!1}function z_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nm(){return(b4()||v_()||tR())&&!A4()&&nR()&&!z_()}function rR(){return tR()&&typeof document<"u"}async function C4(){return rR()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},I4);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function P4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn={LOCAL:"local",NONE:"none",SESSION:"session"},Kl=Ie,iR="persistence";function k4(n,e){if(Kl(Object.values(qn).includes(e),n,"invalid-persistence-type"),Gf()){Kl(e!==qn.SESSION,n,"unsupported-persistence-type");return}if(y_()){Kl(e===qn.NONE,n,"unsupported-persistence-type");return}if(z_()){Kl(e===qn.NONE||e===qn.LOCAL&&nc(),n,"unsupported-persistence-type");return}Kl(e===qn.NONE||nR(),n,"unsupported-persistence-type")}async function Ly(n){await n._initializationPromise;const e=sR(),t=so(iR,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function N4(n,e){const t=sR();if(!t)return[];const r=so(iR,n,e);switch(t.getItem(r)){case qn.NONE:return[$a];case qn.LOCAL:return[cc,go];case qn.SESSION:return[go];default:return[]}}function sR(){var n;try{return((n=P4())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=Ie;class Hi{constructor(){this.browserResolver=Hn(KU),this.cordovaResolver=Hn(_4),this.underlyingResolver=null,this._redirectPersistence=go,this._completeRedirectFn=np,this._overrideRedirectResult=B_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rR()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return D4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await C4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n){return n.unwrap()}function O4(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(n){return aR(n)}function F4(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new V4(n,wM(n,e))}else if(r){const i=aR(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function aR(n){const{_tokenResponse:e}=n instanceof on?n.customData:n;if(!e)return null;if(!(n instanceof on)&&"temporaryProof"in e&&"phoneNumber"in e)return yo.credentialFromResult(n);const t=e.providerId;if(!t||t===Hl.PASSWORD)return null;let r;switch(t){case Hl.GOOGLE:r=Or;break;case Hl.FACEBOOK:r=Dr;break;case Hl.GITHUB:r=Lr;break;case Hl.TWITTER:r=Fr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?Wa._create(t,a):Hr._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new ba(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof on?r.credentialFromError(n):r.credentialFromResult(n)}function kn(n,e){return e.catch(t=>{throw t instanceof on&&F4(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:L4(t),additionalUserInfo:_M(t),user:rp.getOrCreate(i)}})}async function Fy(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>kn(n,t.confirm(r))}}class V4{constructor(e,t){this.resolver=t,this.auth=O4(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return kn(oR(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp=class fu{constructor(e){this._delegate=e,this.multiFactor=bM(e)}static getOrCreate(e){return fu.USER_MAP.has(e)||fu.USER_MAP.set(e,new fu(e)),fu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return kn(this.auth,LS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Fy(this.auth,ZM(this._delegate,e,t))}async linkWithPopup(e){return kn(this.auth,lU(this._delegate,e,Hi))}async linkWithRedirect(e){return await Ly(Rt(this.auth)),yU(this._delegate,e,Hi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return kn(this.auth,FS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Fy(this.auth,eU(this._delegate,e,t))}reauthenticateWithPopup(e){return kn(this.auth,aU(this._delegate,e,Hi))}async reauthenticateWithRedirect(e){return await Ly(Rt(this.auth)),mU(this._delegate,e,Hi)}sendEmailVerification(e){return lM(this._delegate,e)}async unlink(e){return await KV(this._delegate,e),this}updateEmail(e){return dM(this._delegate,e)}updatePassword(e){return fM(this._delegate,e)}updatePhoneNumber(e){return tU(this._delegate,e)}updateProfile(e){return hM(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return uM(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};rp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=Ie;class Vy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ql(r,"invalid-api-key",{appName:e.name}),Ql(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Hi:void 0;this._delegate=t.initialize({options:{persistence:M4(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(jF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){bV(this._delegate,e,t)}applyActionCode(e){return ZV(this._delegate,e)}checkActionCode(e){return VS(this._delegate,e)}confirmPasswordReset(e,t){return JV(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return kn(this._delegate,tM(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return aM(this._delegate,e)}isSignInWithEmailLink(e){return iM(this._delegate,e)}async getRedirectResult(){Ql(Nm(),this._delegate,"operation-not-supported-in-this-environment");const e=await _U(this._delegate,Hi);return e?kn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){w4(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=$T(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=$T(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return rM(this._delegate,e,t)}sendPasswordResetEmail(e,t){return XV(this._delegate,e,t||void 0)}async setPersistence(e){k4(this._delegate,e);let t;switch(e){case qn.SESSION:t=go;break;case qn.LOCAL:t=await Hn(cc)._isAvailable()?cc:L_;break;case qn.NONE:t=$a;break;default:return un("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return kn(this._delegate,HV(this._delegate))}signInWithCredential(e){return kn(this._delegate,Xf(this._delegate,e))}signInWithCustomToken(e){return kn(this._delegate,YV(this._delegate,e))}signInWithEmailAndPassword(e,t){return kn(this._delegate,nM(this._delegate,e,t))}signInWithEmailLink(e,t){return kn(this._delegate,sM(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Fy(this._delegate,JM(this._delegate,e,t))}async signInWithPopup(e){return Ql(Nm(),this._delegate,"operation-not-supported-in-this-environment"),kn(this._delegate,oU(this._delegate,e,Hi))}async signInWithRedirect(e){return Ql(Nm(),this._delegate,"operation-not-supported-in-this-environment"),await Ly(this._delegate),fU(this._delegate,e,Hi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return eM(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Vy.Persistence=qn;function $T(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&rp.getOrCreate(o)),error:e,complete:t}}function M4(n,e){const t=N4(n,e);if(typeof self<"u"&&!t.includes(cc)&&t.push(cc),typeof window<"u")for(const r of[L_,go])t.includes(r)||t.push(r);return t.includes($a)||t.push($a),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.providerId="phone",this._delegate=new yo(oR(Gr.auth()))}static credential(e,t){return yo.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}$_.PHONE_SIGN_IN_METHOD=yo.PHONE_SIGN_IN_METHOD;$_.PROVIDER_ID=yo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=Ie;class B4{constructor(e,t,r=Gr.app()){var i;U4((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new YM(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="auth-compat";function z4(n){n.INTERNAL.registerComponent(new cr(j4,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Vy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Wo.EMAIL_SIGNIN,PASSWORD_RESET:Wo.PASSWORD_RESET,RECOVER_EMAIL:Wo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Wo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Wo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Wo.VERIFY_EMAIL}},EmailAuthProvider:Is,FacebookAuthProvider:Dr,GithubAuthProvider:Lr,GoogleAuthProvider:Or,OAuthProvider:ba,SAMLAuthProvider:af,PhoneAuthProvider:$_,PhoneMultiFactorGenerator:eR,RecaptchaVerifier:B4,TwitterAuthProvider:Fr,Auth:Vy,AuthCredential:fl,Error:on}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(E4,T4)}z4(Gr);var WT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,lR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,N){function T(){}T.prototype=N.prototype,k.D=N.prototype,k.prototype=new T,k.prototype.constructor=k,k.C=function(U,G,O){for(var V=Array(arguments.length-2),L=2;L<arguments.length;L++)V[L-2]=arguments[L];return N.prototype[G].apply(U,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,N,T){T||(T=0);var U=Array(16);if(typeof N=="string")for(var G=0;16>G;++G)U[G]=N.charCodeAt(T++)|N.charCodeAt(T++)<<8|N.charCodeAt(T++)<<16|N.charCodeAt(T++)<<24;else for(G=0;16>G;++G)U[G]=N[T++]|N[T++]<<8|N[T++]<<16|N[T++]<<24;N=k.g[0],T=k.g[1],G=k.g[2];var O=k.g[3],V=N+(O^T&(G^O))+U[0]+3614090360&4294967295;N=T+(V<<7&4294967295|V>>>25),V=O+(G^N&(T^G))+U[1]+3905402710&4294967295,O=N+(V<<12&4294967295|V>>>20),V=G+(T^O&(N^T))+U[2]+606105819&4294967295,G=O+(V<<17&4294967295|V>>>15),V=T+(N^G&(O^N))+U[3]+3250441966&4294967295,T=G+(V<<22&4294967295|V>>>10),V=N+(O^T&(G^O))+U[4]+4118548399&4294967295,N=T+(V<<7&4294967295|V>>>25),V=O+(G^N&(T^G))+U[5]+1200080426&4294967295,O=N+(V<<12&4294967295|V>>>20),V=G+(T^O&(N^T))+U[6]+2821735955&4294967295,G=O+(V<<17&4294967295|V>>>15),V=T+(N^G&(O^N))+U[7]+4249261313&4294967295,T=G+(V<<22&4294967295|V>>>10),V=N+(O^T&(G^O))+U[8]+1770035416&4294967295,N=T+(V<<7&4294967295|V>>>25),V=O+(G^N&(T^G))+U[9]+2336552879&4294967295,O=N+(V<<12&4294967295|V>>>20),V=G+(T^O&(N^T))+U[10]+4294925233&4294967295,G=O+(V<<17&4294967295|V>>>15),V=T+(N^G&(O^N))+U[11]+2304563134&4294967295,T=G+(V<<22&4294967295|V>>>10),V=N+(O^T&(G^O))+U[12]+1804603682&4294967295,N=T+(V<<7&4294967295|V>>>25),V=O+(G^N&(T^G))+U[13]+4254626195&4294967295,O=N+(V<<12&4294967295|V>>>20),V=G+(T^O&(N^T))+U[14]+2792965006&4294967295,G=O+(V<<17&4294967295|V>>>15),V=T+(N^G&(O^N))+U[15]+1236535329&4294967295,T=G+(V<<22&4294967295|V>>>10),V=N+(G^O&(T^G))+U[1]+4129170786&4294967295,N=T+(V<<5&4294967295|V>>>27),V=O+(T^G&(N^T))+U[6]+3225465664&4294967295,O=N+(V<<9&4294967295|V>>>23),V=G+(N^T&(O^N))+U[11]+643717713&4294967295,G=O+(V<<14&4294967295|V>>>18),V=T+(O^N&(G^O))+U[0]+3921069994&4294967295,T=G+(V<<20&4294967295|V>>>12),V=N+(G^O&(T^G))+U[5]+3593408605&4294967295,N=T+(V<<5&4294967295|V>>>27),V=O+(T^G&(N^T))+U[10]+38016083&4294967295,O=N+(V<<9&4294967295|V>>>23),V=G+(N^T&(O^N))+U[15]+3634488961&4294967295,G=O+(V<<14&4294967295|V>>>18),V=T+(O^N&(G^O))+U[4]+3889429448&4294967295,T=G+(V<<20&4294967295|V>>>12),V=N+(G^O&(T^G))+U[9]+568446438&4294967295,N=T+(V<<5&4294967295|V>>>27),V=O+(T^G&(N^T))+U[14]+3275163606&4294967295,O=N+(V<<9&4294967295|V>>>23),V=G+(N^T&(O^N))+U[3]+4107603335&4294967295,G=O+(V<<14&4294967295|V>>>18),V=T+(O^N&(G^O))+U[8]+1163531501&4294967295,T=G+(V<<20&4294967295|V>>>12),V=N+(G^O&(T^G))+U[13]+2850285829&4294967295,N=T+(V<<5&4294967295|V>>>27),V=O+(T^G&(N^T))+U[2]+4243563512&4294967295,O=N+(V<<9&4294967295|V>>>23),V=G+(N^T&(O^N))+U[7]+1735328473&4294967295,G=O+(V<<14&4294967295|V>>>18),V=T+(O^N&(G^O))+U[12]+2368359562&4294967295,T=G+(V<<20&4294967295|V>>>12),V=N+(T^G^O)+U[5]+4294588738&4294967295,N=T+(V<<4&4294967295|V>>>28),V=O+(N^T^G)+U[8]+2272392833&4294967295,O=N+(V<<11&4294967295|V>>>21),V=G+(O^N^T)+U[11]+1839030562&4294967295,G=O+(V<<16&4294967295|V>>>16),V=T+(G^O^N)+U[14]+4259657740&4294967295,T=G+(V<<23&4294967295|V>>>9),V=N+(T^G^O)+U[1]+2763975236&4294967295,N=T+(V<<4&4294967295|V>>>28),V=O+(N^T^G)+U[4]+1272893353&4294967295,O=N+(V<<11&4294967295|V>>>21),V=G+(O^N^T)+U[7]+4139469664&4294967295,G=O+(V<<16&4294967295|V>>>16),V=T+(G^O^N)+U[10]+3200236656&4294967295,T=G+(V<<23&4294967295|V>>>9),V=N+(T^G^O)+U[13]+681279174&4294967295,N=T+(V<<4&4294967295|V>>>28),V=O+(N^T^G)+U[0]+3936430074&4294967295,O=N+(V<<11&4294967295|V>>>21),V=G+(O^N^T)+U[3]+3572445317&4294967295,G=O+(V<<16&4294967295|V>>>16),V=T+(G^O^N)+U[6]+76029189&4294967295,T=G+(V<<23&4294967295|V>>>9),V=N+(T^G^O)+U[9]+3654602809&4294967295,N=T+(V<<4&4294967295|V>>>28),V=O+(N^T^G)+U[12]+3873151461&4294967295,O=N+(V<<11&4294967295|V>>>21),V=G+(O^N^T)+U[15]+530742520&4294967295,G=O+(V<<16&4294967295|V>>>16),V=T+(G^O^N)+U[2]+3299628645&4294967295,T=G+(V<<23&4294967295|V>>>9),V=N+(G^(T|~O))+U[0]+4096336452&4294967295,N=T+(V<<6&4294967295|V>>>26),V=O+(T^(N|~G))+U[7]+1126891415&4294967295,O=N+(V<<10&4294967295|V>>>22),V=G+(N^(O|~T))+U[14]+2878612391&4294967295,G=O+(V<<15&4294967295|V>>>17),V=T+(O^(G|~N))+U[5]+4237533241&4294967295,T=G+(V<<21&4294967295|V>>>11),V=N+(G^(T|~O))+U[12]+1700485571&4294967295,N=T+(V<<6&4294967295|V>>>26),V=O+(T^(N|~G))+U[3]+2399980690&4294967295,O=N+(V<<10&4294967295|V>>>22),V=G+(N^(O|~T))+U[10]+4293915773&4294967295,G=O+(V<<15&4294967295|V>>>17),V=T+(O^(G|~N))+U[1]+2240044497&4294967295,T=G+(V<<21&4294967295|V>>>11),V=N+(G^(T|~O))+U[8]+1873313359&4294967295,N=T+(V<<6&4294967295|V>>>26),V=O+(T^(N|~G))+U[15]+4264355552&4294967295,O=N+(V<<10&4294967295|V>>>22),V=G+(N^(O|~T))+U[6]+2734768916&4294967295,G=O+(V<<15&4294967295|V>>>17),V=T+(O^(G|~N))+U[13]+1309151649&4294967295,T=G+(V<<21&4294967295|V>>>11),V=N+(G^(T|~O))+U[4]+4149444226&4294967295,N=T+(V<<6&4294967295|V>>>26),V=O+(T^(N|~G))+U[11]+3174756917&4294967295,O=N+(V<<10&4294967295|V>>>22),V=G+(N^(O|~T))+U[2]+718787259&4294967295,G=O+(V<<15&4294967295|V>>>17),V=T+(O^(G|~N))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(G+(V<<21&4294967295|V>>>11))&4294967295,k.g[2]=k.g[2]+G&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,N){N===void 0&&(N=k.length);for(var T=N-this.blockSize,U=this.B,G=this.h,O=0;O<N;){if(G==0)for(;O<=T;)i(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<N;)if(U[G++]=k.charCodeAt(O++),G==this.blockSize){i(this,U),G=0;break}}else for(;O<N;)if(U[G++]=k[O++],G==this.blockSize){i(this,U),G=0;break}}this.h=G,this.o+=N},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;var T=8*this.o;for(N=k.length-8;N<k.length;++N)k[N]=T&255,T/=256;for(this.u(k),k=Array(16),N=T=0;4>N;++N)for(var U=0;32>U;U+=8)k[T++]=this.g[N]>>>U&255;return k};function s(k,N){var T=a;return Object.prototype.hasOwnProperty.call(T,k)?T[k]:T[k]=N(k)}function o(k,N){this.h=N;for(var T=[],U=!0,G=k.length-1;0<=G;G--){var O=k[G]|0;U&&O==N||(T[G]=O,U=!1)}this.g=T}var a={};function l(k){return-128<=k&&128>k?s(k,function(N){return new o([N|0],0>N?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return d;if(0>k)return b(u(-k));for(var N=[],T=1,U=0;k>=T;U++)N[U]=k/T|0,T*=4294967296;return new o(N,0)}function h(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return b(h(k.substring(1),N));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(N,8)),U=d,G=0;G<k.length;G+=8){var O=Math.min(8,k.length-G),V=parseInt(k.substring(G,G+O),N);8>O?(O=u(Math.pow(N,O)),U=U.j(O).add(u(V))):(U=U.j(T),U=U.add(u(V)))}return U}var d=l(0),p=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-b(this).m();for(var k=0,N=1,T=0;T<this.g.length;T++){var U=this.i(T);k+=(0<=U?U:4294967296+U)*N,N*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(E(this))return"0";if(_(this))return"-"+b(this).toString(k);for(var N=u(Math.pow(k,6)),T=this,U="";;){var G=D(T,N).g;T=m(T,G.j(N));var O=((0<T.g.length?T.g[0]:T.h)>>>0).toString(k);if(T=G,E(T))return O+U;for(;6>O.length;)O="0"+O;U=O+U}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function E(k){if(k.h!=0)return!1;for(var N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function _(k){return k.h==-1}n.l=function(k){return k=m(this,k),_(k)?-1:E(k)?0:1};function b(k){for(var N=k.g.length,T=[],U=0;U<N;U++)T[U]=~k.g[U];return new o(T,~k.h).add(p)}n.abs=function(){return _(this)?b(this):this},n.add=function(k){for(var N=Math.max(this.g.length,k.g.length),T=[],U=0,G=0;G<=N;G++){var O=U+(this.i(G)&65535)+(k.i(G)&65535),V=(O>>>16)+(this.i(G)>>>16)+(k.i(G)>>>16);U=V>>>16,O&=65535,V&=65535,T[G]=V<<16|O}return new o(T,T[T.length-1]&-2147483648?-1:0)};function m(k,N){return k.add(b(N))}n.j=function(k){if(E(this)||E(k))return d;if(_(this))return _(k)?b(this).j(b(k)):b(b(this).j(k));if(_(k))return b(this.j(b(k)));if(0>this.l(y)&&0>k.l(y))return u(this.m()*k.m());for(var N=this.g.length+k.g.length,T=[],U=0;U<2*N;U++)T[U]=0;for(U=0;U<this.g.length;U++)for(var G=0;G<k.g.length;G++){var O=this.i(U)>>>16,V=this.i(U)&65535,L=k.i(G)>>>16,re=k.i(G)&65535;T[2*U+2*G]+=V*re,v(T,2*U+2*G),T[2*U+2*G+1]+=O*re,v(T,2*U+2*G+1),T[2*U+2*G+1]+=V*L,v(T,2*U+2*G+1),T[2*U+2*G+2]+=O*L,v(T,2*U+2*G+2)}for(U=0;U<N;U++)T[U]=T[2*U+1]<<16|T[2*U];for(U=N;U<2*N;U++)T[U]=0;return new o(T,0)};function v(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function I(k,N){this.g=k,this.h=N}function D(k,N){if(E(N))throw Error("division by zero");if(E(k))return new I(d,d);if(_(k))return N=D(b(k),N),new I(b(N.g),b(N.h));if(_(N))return N=D(k,b(N)),new I(b(N.g),N.h);if(30<k.g.length){if(_(k)||_(N))throw Error("slowDivide_ only works with positive integers.");for(var T=p,U=N;0>=U.l(k);)T=F(T),U=F(U);var G=$(T,1),O=$(U,1);for(U=$(U,2),T=$(T,2);!E(U);){var V=O.add(U);0>=V.l(k)&&(G=G.add(T),O=V),U=$(U,1),T=$(T,1)}return N=m(k,G.j(N)),new I(G,N)}for(G=d;0<=k.l(N);){for(T=Math.max(1,Math.floor(k.m()/N.m())),U=Math.ceil(Math.log(T)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),O=u(T),V=O.j(N);_(V)||0<V.l(k);)T-=U,O=u(T),V=O.j(N);E(O)&&(O=p),G=G.add(O),k=m(k,V)}return new I(G,k)}n.A=function(k){return D(this,k).h},n.and=function(k){for(var N=Math.max(this.g.length,k.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)&k.i(U);return new o(T,this.h&k.h)},n.or=function(k){for(var N=Math.max(this.g.length,k.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)|k.i(U);return new o(T,this.h|k.h)},n.xor=function(k){for(var N=Math.max(this.g.length,k.g.length),T=[],U=0;U<N;U++)T[U]=this.i(U)^k.i(U);return new o(T,this.h^k.h)};function F(k){for(var N=k.g.length+1,T=[],U=0;U<N;U++)T[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(T,k.h)}function $(k,N){var T=N>>5;N%=32;for(var U=k.g.length-T,G=[],O=0;O<U;O++)G[O]=0<N?k.i(O+T)>>>N|k.i(O+T+1)<<32-N:k.i(O+T);return new o(G,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ao=o}).apply(typeof WT<"u"?WT:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uR,pu,cR,vd,My,hR,dR,fR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,w,C){return c==Array.prototype||c==Object.prototype||(c[w]=C.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var w=0;w<c.length;++w){var C=c[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(c,w){if(w)e:{var C=r;c=c.split(".");for(var z=0;z<c.length-1;z++){var ne=c[z];if(!(ne in C))break e;C=C[ne]}c=c[c.length-1],z=C[c],w=w(z),w!=z&&w!=null&&e(C,c,{configurable:!0,writable:!0,value:w})}}function s(c,w){c instanceof String&&(c+="");var C=0,z=!1,ne={next:function(){if(!z&&C<c.length){var ue=C++;return{value:w(ue,c[ue]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}i("Array.prototype.values",function(c){return c||function(){return s(this,function(w,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var w=typeof c;return w=w!="object"?w:c?Array.isArray(c)?"array":w:"null",w=="array"||w=="object"&&typeof c.length=="number"}function u(c){var w=typeof c;return w=="object"&&c!=null||w=="function"}function h(c,w,C){return c.call.apply(c.bind,arguments)}function d(c,w,C){if(!c)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,z),c.apply(w,ne)}}return function(){return c.apply(w,arguments)}}function p(c,w,C){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function y(c,w){var C=Array.prototype.slice.call(arguments,1);return function(){var z=C.slice();return z.push.apply(z,arguments),c.apply(this,z)}}function E(c,w){function C(){}C.prototype=w.prototype,c.aa=w.prototype,c.prototype=new C,c.prototype.constructor=c,c.Qb=function(z,ne,ue){for(var Ae=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Ae[ot-2]=arguments[ot];return w.prototype[ne].apply(z,Ae)}}function _(c){const w=c.length;if(0<w){const C=Array(w);for(let z=0;z<w;z++)C[z]=c[z];return C}return[]}function b(c,w){for(let C=1;C<arguments.length;C++){const z=arguments[C];if(l(z)){const ne=c.length||0,ue=z.length||0;c.length=ne+ue;for(let Ae=0;Ae<ue;Ae++)c[ne+Ae]=z[Ae]}else c.push(z)}}class m{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function v(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var F=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function $(c,w,C){for(const z in c)w.call(C,c[z],z,c)}function k(c,w){for(const C in c)w.call(void 0,c[C],C,c)}function N(c){const w={};for(const C in c)w[C]=c[C];return w}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(c,w){let C,z;for(let ne=1;ne<arguments.length;ne++){z=arguments[ne];for(C in z)c[C]=z[C];for(let ue=0;ue<T.length;ue++)C=T[ue],Object.prototype.hasOwnProperty.call(z,C)&&(c[C]=z[C])}}function G(c){var w=1;c=c.split(":");const C=[];for(;0<w&&c.length;)C.push(c.shift()),w--;return c.length&&C.push(c.join(":")),C}function O(c){a.setTimeout(()=>{throw c},0)}function V(){var c=te;let w=null;return c.g&&(w=c.g,c.g=c.g.next,c.g||(c.h=null),w.next=null),w}class L{constructor(){this.h=this.g=null}add(w,C){const z=re.get();z.set(w,C),this.h?this.h.next=z:this.g=z,this.h=z}}var re=new m(()=>new be,c=>c.reset());class be{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,de=!1,te=new L,pe=()=>{const c=a.Promise.resolve(void 0);ie=()=>{c.then(Y)}};var Y=()=>{for(var c;c=V();){try{c.h.call(c.g)}catch(C){O(C)}var w=re;w.j(c),100>w.h&&(w.h++,c.next=w.g,w.g=c)}de=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(c,w){this.type=c,this.g=this.target=w,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,w=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const C=()=>{};a.addEventListener("test",C,w),a.removeEventListener("test",C,w)}catch{}return c}();function le(c,w){if(Z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var C=this.type=c.type,z=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=w,w=c.relatedTarget){if(F){e:{try{D(w.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(w=null)}}else C=="mouseover"?w=c.fromElement:C=="mouseout"&&(w=c.toElement);this.relatedTarget=w,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:X[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}E(le,Z);var X={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var R="closure_listenable_"+(1e6*Math.random()|0),S=0;function Q(c,w,C,z,ne){this.listener=c,this.proxy=null,this.src=w,this.type=C,this.capture=!!z,this.ha=ne,this.key=++S,this.da=this.fa=!1}function H(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function j(c){this.src=c,this.g={},this.h=0}j.prototype.add=function(c,w,C,z,ne){var ue=c.toString();c=this.g[ue],c||(c=this.g[ue]=[],this.h++);var Ae=ae(c,w,z,ne);return-1<Ae?(w=c[Ae],C||(w.fa=!1)):(w=new Q(w,this.src,ue,!!z,ne),w.fa=C,c.push(w)),w};function W(c,w){var C=w.type;if(C in c.g){var z=c.g[C],ne=Array.prototype.indexOf.call(z,w,void 0),ue;(ue=0<=ne)&&Array.prototype.splice.call(z,ne,1),ue&&(H(w),c.g[C].length==0&&(delete c.g[C],c.h--))}}function ae(c,w,C,z){for(var ne=0;ne<c.length;++ne){var ue=c[ne];if(!ue.da&&ue.listener==w&&ue.capture==!!C&&ue.ha==z)return ne}return-1}var x="closure_lm_"+(1e6*Math.random()|0),se={};function P(c,w,C,z,ne){if(z&&z.once)return A(c,w,C,z,ne);if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)P(c,w[ue],C,z,ne);return null}return C=xe(C),c&&c[R]?c.K(w,C,u(z)?!!z.capture:!!z,ne):f(c,w,C,!1,z,ne)}function f(c,w,C,z,ne,ue){if(!w)throw Error("Invalid event type");var Ae=u(ne)?!!ne.capture:!!ne,ot=we(c);if(ot||(c[x]=ot=new j(c)),C=ot.add(w,C,z,Ae,ue),C.proxy)return C;if(z=g(),C.proxy=z,z.src=c,z.listener=C,c.addEventListener)ee||(ne=Ae),ne===void 0&&(ne=!1),c.addEventListener(w.toString(),z,ne);else if(c.attachEvent)c.attachEvent(K(w.toString()),z);else if(c.addListener&&c.removeListener)c.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return C}function g(){function c(C){return w.call(c.src,c.listener,C)}const w=fe;return c}function A(c,w,C,z,ne){if(Array.isArray(w)){for(var ue=0;ue<w.length;ue++)A(c,w[ue],C,z,ne);return null}return C=xe(C),c&&c[R]?c.L(w,C,u(z)?!!z.capture:!!z,ne):f(c,w,C,!0,z,ne)}function q(c,w,C,z,ne){if(Array.isArray(w))for(var ue=0;ue<w.length;ue++)q(c,w[ue],C,z,ne);else z=u(z)?!!z.capture:!!z,C=xe(C),c&&c[R]?(c=c.i,w=String(w).toString(),w in c.g&&(ue=c.g[w],C=ae(ue,C,z,ne),-1<C&&(H(ue[C]),Array.prototype.splice.call(ue,C,1),ue.length==0&&(delete c.g[w],c.h--)))):c&&(c=we(c))&&(w=c.g[w.toString()],c=-1,w&&(c=ae(w,C,z,ne)),(C=-1<c?w[c]:null)&&J(C))}function J(c){if(typeof c!="number"&&c&&!c.da){var w=c.src;if(w&&w[R])W(w.i,c);else{var C=c.type,z=c.proxy;w.removeEventListener?w.removeEventListener(C,z,c.capture):w.detachEvent?w.detachEvent(K(C),z):w.addListener&&w.removeListener&&w.removeListener(z),(C=we(w))?(W(C,c),C.h==0&&(C.src=null,w[x]=null)):H(c)}}}function K(c){return c in se?se[c]:se[c]="on"+c}function fe(c,w){if(c.da)c=!0;else{w=new le(w,this);var C=c.listener,z=c.ha||c.src;c.fa&&J(c),c=C.call(z,w)}return c}function we(c){return c=c[x],c instanceof j?c:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(c){return typeof c=="function"?c:(c[ge]||(c[ge]=function(w){return c.handleEvent(w)}),c[ge])}function Ce(){B.call(this),this.i=new j(this),this.M=this,this.F=null}E(Ce,B),Ce.prototype[R]=!0,Ce.prototype.removeEventListener=function(c,w,C,z){q(this,c,w,C,z)};function De(c,w){var C,z=c.F;if(z)for(C=[];z;z=z.F)C.push(z);if(c=c.M,z=w.type||w,typeof w=="string")w=new Z(w,c);else if(w instanceof Z)w.target=w.target||c;else{var ne=w;w=new Z(z,c),U(w,ne)}if(ne=!0,C)for(var ue=C.length-1;0<=ue;ue--){var Ae=w.g=C[ue];ne=Ut(Ae,z,!0,w)&&ne}if(Ae=w.g=c,ne=Ut(Ae,z,!0,w)&&ne,ne=Ut(Ae,z,!1,w)&&ne,C)for(ue=0;ue<C.length;ue++)Ae=w.g=C[ue],ne=Ut(Ae,z,!1,w)&&ne}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var c=this.i,w;for(w in c.g){for(var C=c.g[w],z=0;z<C.length;z++)H(C[z]);delete c.g[w],c.h--}}this.F=null},Ce.prototype.K=function(c,w,C,z){return this.i.add(String(c),w,!1,C,z)},Ce.prototype.L=function(c,w,C,z){return this.i.add(String(c),w,!0,C,z)};function Ut(c,w,C,z){if(w=c.i.g[String(w)],!w)return!0;w=w.concat();for(var ne=!0,ue=0;ue<w.length;++ue){var Ae=w[ue];if(Ae&&!Ae.da&&Ae.capture==C){var ot=Ae.listener,Zt=Ae.ha||Ae.src;Ae.fa&&W(c.i,Ae),ne=ot.call(Zt,z)!==!1&&ne}}return ne&&!z.defaultPrevented}function fr(c,w,C){if(typeof c=="function")C&&(c=p(c,C));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:a.setTimeout(c,w||0)}function jn(c){c.g=fr(()=>{c.g=null,c.i&&(c.i=!1,jn(c))},c.l);const w=c.h;c.h=null,c.m.apply(null,w)}class Ps extends B{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:jn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(c){B.call(this),this.h=c,this.g={}}E(st,B);var ks=[];function Mo(c){$(c.g,function(w,C){this.g.hasOwnProperty(C)&&J(w)},c),c.g={}}st.prototype.N=function(){st.aa.N.call(this),Mo(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=a.JSON.stringify,nh=a.JSON.parse,Fp=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function xl(){}xl.prototype.h=null;function rh(c){return c.h||(c.h=c.i())}function Sl(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ci(){Z.call(this,"d")}E(Ci,Z);function Vp(){Z.call(this,"c")}E(Vp,Z);var Ns={},m0=null;function ih(){return m0=m0||new Ce}Ns.La="serverreachability";function g0(c){Z.call(this,Ns.La,c)}E(g0,Z);function Rl(c){const w=ih();De(w,new g0(w))}Ns.STAT_EVENT="statevent";function y0(c,w){Z.call(this,Ns.STAT_EVENT,c),this.stat=w}E(y0,Z);function En(c){const w=ih();De(w,new y0(w,c))}Ns.Ma="timingevent";function v0(c,w){Z.call(this,Ns.Ma,c),this.size=w}E(v0,Z);function Cl(c,w){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},w)}function Pl(){this.g=!0}Pl.prototype.xa=function(){this.g=!1};function oN(c,w,C,z,ne,ue){c.info(function(){if(c.g)if(ue)for(var Ae="",ot=ue.split("&"),Zt=0;Zt<ot.length;Zt++){var Ke=ot[Zt].split("=");if(1<Ke.length){var cn=Ke[0];Ke=Ke[1];var hn=cn.split("_");Ae=2<=hn.length&&hn[1]=="type"?Ae+(cn+"="+Ke+"&"):Ae+(cn+"=redacted&")}}else Ae=null;else Ae=ue;return"XMLHTTP REQ ("+z+") [attempt "+ne+"]: "+w+`
`+C+`
`+Ae})}function aN(c,w,C,z,ne,ue,Ae){c.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ne+"]: "+w+`
`+C+`
`+ue+" "+Ae})}function Uo(c,w,C,z){c.info(function(){return"XMLHTTP TEXT ("+w+"): "+uN(c,C)+(z?" "+z:"")})}function lN(c,w){c.info(function(){return"TIMEOUT: "+w})}Pl.prototype.info=function(){};function uN(c,w){if(!c.g)return w;if(!w)return null;try{var C=JSON.parse(w);if(C){for(c=0;c<C.length;c++)if(Array.isArray(C[c])){var z=C[c];if(!(2>z.length)){var ne=z[1];if(Array.isArray(ne)&&!(1>ne.length)){var ue=ne[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Ae=1;Ae<ne.length;Ae++)ne[Ae]=""}}}}return zn(C)}catch{return w}}var sh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mp;function oh(){}E(oh,xl),oh.prototype.g=function(){return new XMLHttpRequest},oh.prototype.i=function(){return{}},Mp=new oh;function Pi(c,w,C,z){this.j=c,this.i=w,this.l=C,this.R=z||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new w0}function w0(){this.i=null,this.g="",this.h=!1}var E0={},Up={};function Bp(c,w,C){c.L=1,c.v=ch(Jr(w)),c.m=C,c.P=!0,T0(c,null)}function T0(c,w){c.F=Date.now(),ah(c),c.A=Jr(c.v);var C=c.A,z=c.R;Array.isArray(z)||(z=[String(z)]),F0(C.i,"t",z),c.C=0,C=c.j.J,c.h=new w0,c.g=eE(c.j,C?w:null,!c.m),0<c.O&&(c.M=new Ps(p(c.Y,c,c.g),c.O)),w=c.U,C=c.g,z=c.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(ks[0]=ne.toString()),ne=ks);for(var ue=0;ue<ne.length;ue++){var Ae=P(C,ne[ue],z||w.handleEvent,!1,w.h||w);if(!Ae)break;w.g[Ae.key]=Ae}w=c.H?N(c.H):{},c.m?(c.u||(c.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,w)):(c.u="GET",c.g.ea(c.A,c.u,null,w)),Rl(),oN(c.i,c.u,c.A,c.l,c.R,c.m)}Pi.prototype.ca=function(c){c=c.target;const w=this.M;w&&Zr(c)==3?w.j():this.Y(c)},Pi.prototype.Y=function(c){try{if(c==this.g)e:{const hn=Zr(this.g);var w=this.g.Ba();const zo=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||$0(this.g)))){this.J||hn!=4||w==7||(w==8||0>=zo?Rl(3):Rl(2)),jp(this);var C=this.g.Z();this.X=C;t:if(I0(this)){var z=$0(this.g);c="";var ne=z.length,ue=Zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),kl(this);var Ae="";break t}this.h.i=new a.TextDecoder}for(w=0;w<ne;w++)this.h.h=!0,c+=this.h.i.decode(z[w],{stream:!(ue&&w==ne-1)});z.length=0,this.h.g+=c,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=C==200,aN(this.i,this.u,this.A,this.l,this.R,hn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,Zt=this.g;if((ot=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ot)){var Ke=ot;break t}}Ke=null}if(C=Ke)Uo(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zp(this,C);else{this.o=!1,this.s=3,En(12),Ds(this),kl(this);break e}}if(this.P){C=!0;let mr;for(;!this.J&&this.C<Ae.length;)if(mr=cN(this,Ae),mr==Up){hn==4&&(this.s=4,En(14),C=!1),Uo(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==E0){this.s=4,En(15),Uo(this.i,this.l,Ae,"[Invalid Chunk]"),C=!1;break}else Uo(this.i,this.l,mr,null),zp(this,mr);if(I0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||Ae.length!=0||this.h.h||(this.s=1,En(16),C=!1),this.o=this.o&&C,!C)Uo(this.i,this.l,Ae,"[Invalid Chunked Response]"),Ds(this),kl(this);else if(0<Ae.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),Kp(cn),cn.M=!0,En(11))}}else Uo(this.i,this.l,Ae,null),zp(this,Ae);hn==4&&Ds(this),this.o&&!this.J&&(hn==4?Y0(this.j,this):(this.o=!1,ah(this)))}else SN(this.g),C==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),Ds(this),kl(this)}}}catch{}finally{}};function I0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cN(c,w){var C=c.C,z=w.indexOf(`
`,C);return z==-1?Up:(C=Number(w.substring(C,z)),isNaN(C)?E0:(z+=1,z+C>w.length?Up:(w=w.slice(z,z+C),c.C=z+C,w)))}Pi.prototype.cancel=function(){this.J=!0,Ds(this)};function ah(c){c.S=Date.now()+c.I,b0(c,c.I)}function b0(c,w){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Cl(p(c.ba,c),w)}function jp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Pi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(lN(this.i,this.A),this.L!=2&&(Rl(),En(17)),Ds(this),this.s=2,kl(this)):b0(this,this.S-c)};function kl(c){c.j.G==0||c.J||Y0(c.j,c)}function Ds(c){jp(c);var w=c.M;w&&typeof w.ma=="function"&&w.ma(),c.M=null,Mo(c.U),c.g&&(w=c.g,c.g=null,w.abort(),w.ma())}function zp(c,w){try{var C=c.j;if(C.G!=0&&(C.g==c||$p(C.h,c))){if(!c.K&&$p(C.h,c)&&C.G==3){try{var z=C.Da.g.parse(w)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ne=z;if(ne[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<c.F)gh(C),ph(C);else break e;Hp(C),En(18)}}else C.za=ne[1],0<C.za-C.T&&37500>ne[2]&&C.F&&C.v==0&&!C.C&&(C.C=Cl(p(C.Za,C),6e3));if(1>=S0(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ls(C,11)}else if((c.K||C.g==c)&&gh(C),!v(w))for(ne=C.Da.g.parse(w),w=0;w<ne.length;w++){let Ke=ne[w];if(C.T=Ke[0],Ke=Ke[1],C.G==2)if(Ke[0]=="c"){C.K=Ke[1],C.ia=Ke[2];const cn=Ke[3];cn!=null&&(C.la=cn,C.j.info("VER="+C.la));const hn=Ke[4];hn!=null&&(C.Aa=hn,C.j.info("SVER="+C.Aa));const zo=Ke[5];zo!=null&&typeof zo=="number"&&0<zo&&(z=1.5*zo,C.L=z,C.j.info("backChannelRequestTimeoutMs_="+z)),z=C;const mr=c.g;if(mr){const vh=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vh){var ue=z.h;ue.g||vh.indexOf("spdy")==-1&&vh.indexOf("quic")==-1&&vh.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Wp(ue,ue.h),ue.h=null))}if(z.D){const Qp=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qp&&(z.ya=Qp,ht(z.I,z.D,Qp))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-c.F,C.j.info("Handshake RTT: "+C.R+"ms")),z=C;var Ae=c;if(z.qa=Z0(z,z.J?z.ia:null,z.W),Ae.K){R0(z.h,Ae);var ot=Ae,Zt=z.L;Zt&&(ot.I=Zt),ot.B&&(jp(ot),ah(ot)),z.g=Ae}else K0(z);0<C.i.length&&mh(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Ls(C,7);else C.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ls(C,7):Gp(C):Ke[0]!="noop"&&C.l&&C.l.ta(Ke),C.v=0)}}Rl(4)}catch{}}var hN=class{constructor(c,w){this.g=c,this.map=w}};function A0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function x0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function S0(c){return c.h?1:c.g?c.g.size:0}function $p(c,w){return c.h?c.h==w:c.g?c.g.has(w):!1}function Wp(c,w){c.g?c.g.add(w):c.h=w}function R0(c,w){c.h&&c.h==w?c.h=null:c.g&&c.g.has(w)&&c.g.delete(w)}A0.prototype.cancel=function(){if(this.i=C0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function C0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let w=c.i;for(const C of c.g.values())w=w.concat(C.D);return w}return _(c.i)}function dN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var w=[],C=c.length,z=0;z<C;z++)w.push(c[z]);return w}w=[],C=0;for(z in c)w[C++]=c[z];return w}function fN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var w=[];c=c.length;for(var C=0;C<c;C++)w.push(C);return w}w=[],C=0;for(const z in c)w[C++]=z;return w}}}function P0(c,w){if(c.forEach&&typeof c.forEach=="function")c.forEach(w,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,w,void 0);else for(var C=fN(c),z=dN(c),ne=z.length,ue=0;ue<ne;ue++)w.call(void 0,z[ue],C&&C[ue],c)}var k0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pN(c,w){if(c){c=c.split("&");for(var C=0;C<c.length;C++){var z=c[C].indexOf("="),ne=null;if(0<=z){var ue=c[C].substring(0,z);ne=c[C].substring(z+1)}else ue=c[C];w(ue,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Os(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Os){this.h=c.h,lh(this,c.j),this.o=c.o,this.g=c.g,uh(this,c.s),this.l=c.l;var w=c.i,C=new Ol;C.i=w.i,w.g&&(C.g=new Map(w.g),C.h=w.h),N0(this,C),this.m=c.m}else c&&(w=String(c).match(k0))?(this.h=!1,lh(this,w[1]||"",!0),this.o=Nl(w[2]||""),this.g=Nl(w[3]||"",!0),uh(this,w[4]),this.l=Nl(w[5]||"",!0),N0(this,w[6]||"",!0),this.m=Nl(w[7]||"")):(this.h=!1,this.i=new Ol(null,this.h))}Os.prototype.toString=function(){var c=[],w=this.j;w&&c.push(Dl(w,D0,!0),":");var C=this.g;return(C||w=="file")&&(c.push("//"),(w=this.o)&&c.push(Dl(w,D0,!0),"@"),c.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&c.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&c.push("/"),c.push(Dl(C,C.charAt(0)=="/"?yN:gN,!0))),(C=this.i.toString())&&c.push("?",C),(C=this.m)&&c.push("#",Dl(C,_N)),c.join("")};function Jr(c){return new Os(c)}function lh(c,w,C){c.j=C?Nl(w,!0):w,c.j&&(c.j=c.j.replace(/:$/,""))}function uh(c,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);c.s=w}else c.s=null}function N0(c,w,C){w instanceof Ol?(c.i=w,wN(c.i,c.h)):(C||(w=Dl(w,vN)),c.i=new Ol(w,c.h))}function ht(c,w,C){c.i.set(w,C)}function ch(c){return ht(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Nl(c,w){return c?w?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Dl(c,w,C){return typeof c=="string"?(c=encodeURI(c).replace(w,mN),C&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var D0=/[#\/\?@]/g,gN=/[#\?:]/g,yN=/[#\?]/g,vN=/[#\?@]/g,_N=/#/g;function Ol(c,w){this.h=this.g=null,this.i=c||null,this.j=!!w}function ki(c){c.g||(c.g=new Map,c.h=0,c.i&&pN(c.i,function(w,C){c.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}n=Ol.prototype,n.add=function(c,w){ki(this),this.i=null,c=Bo(this,c);var C=this.g.get(c);return C||this.g.set(c,C=[]),C.push(w),this.h+=1,this};function O0(c,w){ki(c),w=Bo(c,w),c.g.has(w)&&(c.i=null,c.h-=c.g.get(w).length,c.g.delete(w))}function L0(c,w){return ki(c),w=Bo(c,w),c.g.has(w)}n.forEach=function(c,w){ki(this),this.g.forEach(function(C,z){C.forEach(function(ne){c.call(w,ne,z,this)},this)},this)},n.na=function(){ki(this);const c=Array.from(this.g.values()),w=Array.from(this.g.keys()),C=[];for(let z=0;z<w.length;z++){const ne=c[z];for(let ue=0;ue<ne.length;ue++)C.push(w[z])}return C},n.V=function(c){ki(this);let w=[];if(typeof c=="string")L0(this,c)&&(w=w.concat(this.g.get(Bo(this,c))));else{c=Array.from(this.g.values());for(let C=0;C<c.length;C++)w=w.concat(c[C])}return w},n.set=function(c,w){return ki(this),this.i=null,c=Bo(this,c),L0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[w]),this.h+=1,this},n.get=function(c,w){return c?(c=this.V(c),0<c.length?String(c[0]):w):w};function F0(c,w,C){O0(c,w),0<C.length&&(c.i=null,c.g.set(Bo(c,w),_(C)),c.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],w=Array.from(this.g.keys());for(var C=0;C<w.length;C++){var z=w[C];const ue=encodeURIComponent(String(z)),Ae=this.V(z);for(z=0;z<Ae.length;z++){var ne=ue;Ae[z]!==""&&(ne+="="+encodeURIComponent(String(Ae[z]))),c.push(ne)}}return this.i=c.join("&")};function Bo(c,w){return w=String(w),c.j&&(w=w.toLowerCase()),w}function wN(c,w){w&&!c.j&&(ki(c),c.i=null,c.g.forEach(function(C,z){var ne=z.toLowerCase();z!=ne&&(O0(this,z),F0(this,ne,C))},c)),c.j=w}function EN(c,w){const C=new Pl;if(a.Image){const z=new Image;z.onload=y(Ni,C,"TestLoadImage: loaded",!0,w,z),z.onerror=y(Ni,C,"TestLoadImage: error",!1,w,z),z.onabort=y(Ni,C,"TestLoadImage: abort",!1,w,z),z.ontimeout=y(Ni,C,"TestLoadImage: timeout",!1,w,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=c}else w(!1)}function TN(c,w){const C=new Pl,z=new AbortController,ne=setTimeout(()=>{z.abort(),Ni(C,"TestPingServer: timeout",!1,w)},1e4);fetch(c,{signal:z.signal}).then(ue=>{clearTimeout(ne),ue.ok?Ni(C,"TestPingServer: ok",!0,w):Ni(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(ne),Ni(C,"TestPingServer: error",!1,w)})}function Ni(c,w,C,z,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),z(C)}catch{}}function IN(){this.g=new Fp}function bN(c,w,C){const z=C||"";try{P0(c,function(ne,ue){let Ae=ne;u(ne)&&(Ae=zn(ne)),w.push(z+ue+"="+encodeURIComponent(Ae))})}catch(ne){throw w.push(z+"type="+encodeURIComponent("_badmap")),ne}}function hh(c){this.l=c.Ub||null,this.j=c.eb||!1}E(hh,xl),hh.prototype.g=function(){return new dh(this.l,this.j)},hh.prototype.i=function(c){return function(){return c}}({});function dh(c,w){Ce.call(this),this.D=c,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(dh,Ce),n=dh.prototype,n.open=function(c,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=w,this.readyState=1,Fl(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(w.body=c),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ll(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fl(this)),this.g&&(this.readyState=3,Fl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;V0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function V0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var w=c.value?c.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!c.done}))&&(this.response=this.responseText+=w)}c.done?Ll(this):Fl(this),this.readyState==3&&V0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ll(this))},n.Qa=function(c){this.g&&(this.response=c,Ll(this))},n.ga=function(){this.g&&Ll(this)};function Ll(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fl(c)}n.setRequestHeader=function(c,w){this.u.append(c,w)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,c.push(C[0]+": "+C[1]),C=w.next();return c.join(`\r
`)};function Fl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(dh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function M0(c){let w="";return $(c,function(C,z){w+=z,w+=":",w+=C,w+=`\r
`}),w}function qp(c,w,C){e:{for(z in C){var z=!1;break e}z=!0}z||(C=M0(C),typeof c=="string"?C!=null&&encodeURIComponent(String(C)):ht(c,w,C))}function At(c){Ce.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(At,Ce);var AN=/^https?$/i,xN=["POST","PUT"];n=At.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,w,C,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);w=w?w.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mp.g(),this.v=this.o?rh(this.o):rh(Mp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(w,String(c),!0),this.B=!1}catch(ue){U0(this,ue);return}if(c=C||"",C=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ne in z)C.set(ne,z[ne]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ue of z.keys())C.set(ue,z.get(ue));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(C.keys()).find(ue=>ue.toLowerCase()=="content-type"),ne=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xN,w,void 0))||z||ne||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ae]of C)this.g.setRequestHeader(ue,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{z0(this),this.u=!0,this.g.send(c),this.u=!1}catch(ue){U0(this,ue)}};function U0(c,w){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=w,c.m=5,B0(c),fh(c)}function B0(c){c.A||(c.A=!0,De(c,"complete"),De(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,De(this,"complete"),De(this,"abort"),fh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fh(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?j0(this):this.bb())},n.bb=function(){j0(this)};function j0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Zr(c)!=4||c.Z()!=2)){if(c.u&&Zr(c)==4)fr(c.Ea,0,c);else if(De(c,"readystatechange"),Zr(c)==4){c.h=!1;try{const Ae=c.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var z;if(z=Ae===0){var ne=String(c.D).match(k0)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),z=!AN.test(ne?ne.toLowerCase():"")}C=z}if(C)De(c,"complete"),De(c,"success");else{c.m=6;try{var ue=2<Zr(c)?c.g.statusText:""}catch{ue=""}c.l=ue+" ["+c.Z()+"]",B0(c)}}finally{fh(c)}}}}function fh(c,w){if(c.g){z0(c);const C=c.g,z=c.v[0]?()=>{}:null;c.g=null,c.v=null,w||De(c,"ready");try{C.onreadystatechange=z}catch{}}}function z0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Zr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Zr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var w=this.g.responseText;return c&&w.indexOf(c)==0&&(w=w.substring(c.length)),nh(w)}};function $0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function SN(c){const w={};c=(c.g&&2<=Zr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<c.length;z++){if(v(c[z]))continue;var C=G(c[z]);const ne=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ue=w[ne]||[];w[ne]=ue,ue.push(C)}k(w,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(c,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[c]||w}function W0(c){this.Aa=0,this.i=[],this.j=new Pl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,c),this.cb=Vl("retryDelaySeedMs",1e4,c),this.Wa=Vl("forwardChannelMaxRetries",2,c),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new A0(c&&c.concurrentRequestLimit),this.Da=new IN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=W0.prototype,n.la=8,n.G=1,n.connect=function(c,w,C,z){En(0),this.W=c,this.H=w||{},C&&z!==void 0&&(this.H.OSID=C,this.H.OAID=z),this.F=this.X,this.I=Z0(this,null,this.W),mh(this)};function Gp(c){if(q0(c),c.G==3){var w=c.U++,C=Jr(c.I);if(ht(C,"SID",c.K),ht(C,"RID",w),ht(C,"TYPE","terminate"),Ml(c,C),w=new Pi(c,c.j,w),w.L=2,w.v=ch(Jr(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(w.v.toString(),"")}catch{}!C&&a.Image&&(new Image().src=w.v,C=!0),C||(w.g=eE(w.j,null),w.g.ea(w.v)),w.F=Date.now(),ah(w)}J0(c)}function ph(c){c.g&&(Kp(c),c.g.cancel(),c.g=null)}function q0(c){ph(c),c.u&&(a.clearTimeout(c.u),c.u=null),gh(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function mh(c){if(!x0(c.h)&&!c.s){c.s=!0;var w=c.Ga;ie||pe(),de||(ie(),de=!0),te.add(w,c),c.B=0}}function RN(c,w){return S0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=w.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Cl(p(c.Ga,c,w),X0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const ne=new Pi(this,this.j,c);let ue=this.o;if(this.S&&(ue?(ue=N(ue),U(ue,this.S)):ue=this.S),this.m!==null||this.O||(ne.H=ue,ue=null),this.P)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var z=this.i[C];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(w+=z,4096<w){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=H0(this,ne,w),C=Jr(this.I),ht(C,"RID",c),ht(C,"CVER",22),this.D&&ht(C,"X-HTTP-Session-Id",this.D),Ml(this,C),ue&&(this.O?w="headers="+encodeURIComponent(String(M0(ue)))+"&"+w:this.m&&qp(C,this.m,ue)),Wp(this.h,ne),this.Ua&&ht(C,"TYPE","init"),this.P?(ht(C,"$req",w),ht(C,"SID","null"),ne.T=!0,Bp(ne,C,null)):Bp(ne,C,w),this.G=2}}else this.G==3&&(c?G0(this,c):this.i.length==0||x0(this.h)||G0(this))};function G0(c,w){var C;w?C=w.l:C=c.U++;const z=Jr(c.I);ht(z,"SID",c.K),ht(z,"RID",C),ht(z,"AID",c.T),Ml(c,z),c.m&&c.o&&qp(z,c.m,c.o),C=new Pi(c,c.j,C,c.B+1),c.m===null&&(C.H=c.o),w&&(c.i=w.D.concat(c.i)),w=H0(c,C,1e3),C.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wp(c.h,C),Bp(C,z,w)}function Ml(c,w){c.H&&$(c.H,function(C,z){ht(w,z,C)}),c.l&&P0({},function(C,z){ht(w,z,C)})}function H0(c,w,C){C=Math.min(c.i.length,C);var z=c.l?p(c.l.Na,c.l,c):null;e:{var ne=c.i;let ue=-1;for(;;){const Ae=["count="+C];ue==-1?0<C?(ue=ne[0].g,Ae.push("ofs="+ue)):ue=0:Ae.push("ofs="+ue);let ot=!0;for(let Zt=0;Zt<C;Zt++){let Ke=ne[Zt].g;const cn=ne[Zt].map;if(Ke-=ue,0>Ke)ue=Math.max(0,ne[Zt].g-100),ot=!1;else try{bN(cn,Ae,"req"+Ke+"_")}catch{z&&z(cn)}}if(ot){z=Ae.join("&");break e}}}return c=c.i.splice(0,C),w.D=c,z}function K0(c){if(!c.g&&!c.u){c.Y=1;var w=c.Fa;ie||pe(),de||(ie(),de=!0),te.add(w,c),c.v=0}}function Hp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Cl(p(c.Fa,c),X0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Q0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Cl(p(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),ph(this),Q0(this))};function Kp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Q0(c){c.g=new Pi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var w=Jr(c.qa);ht(w,"RID","rpc"),ht(w,"SID",c.K),ht(w,"AID",c.T),ht(w,"CI",c.F?"0":"1"),!c.F&&c.ja&&ht(w,"TO",c.ja),ht(w,"TYPE","xmlhttp"),Ml(c,w),c.m&&c.o&&qp(w,c.m,c.o),c.L&&(c.g.I=c.L);var C=c.g;c=c.ia,C.L=1,C.v=ch(Jr(w)),C.m=null,C.P=!0,T0(C,c)}n.Za=function(){this.C!=null&&(this.C=null,ph(this),Hp(this),En(19))};function gh(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Y0(c,w){var C=null;if(c.g==w){gh(c),Kp(c),c.g=null;var z=2}else if($p(c.h,w))C=w.D,R0(c.h,w),z=1;else return;if(c.G!=0){if(w.o)if(z==1){C=w.m?w.m.length:0,w=Date.now()-w.F;var ne=c.B;z=ih(),De(z,new v0(z,C)),mh(c)}else K0(c);else if(ne=w.s,ne==3||ne==0&&0<w.X||!(z==1&&RN(c,w)||z==2&&Hp(c)))switch(C&&0<C.length&&(w=c.h,w.i=w.i.concat(C)),ne){case 1:Ls(c,5);break;case 4:Ls(c,10);break;case 3:Ls(c,6);break;default:Ls(c,2)}}}function X0(c,w){let C=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(C*=2),C*w}function Ls(c,w){if(c.j.info("Error code "+w),w==2){var C=p(c.fb,c),z=c.Xa;const ne=!z;z=new Os(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lh(z,"https"),ch(z),ne?EN(z.toString(),C):TN(z.toString(),C)}else En(2);c.G=0,c.l&&c.l.sa(w),J0(c),q0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function J0(c){if(c.G=0,c.ka=[],c.l){const w=C0(c.h);(w.length!=0||c.i.length!=0)&&(b(c.ka,w),b(c.ka,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.ra()}}function Z0(c,w,C){var z=C instanceof Os?Jr(C):new Os(C);if(z.g!="")w&&(z.g=w+"."+z.g),uh(z,z.s);else{var ne=a.location;z=ne.protocol,w=w?w+"."+ne.hostname:ne.hostname,ne=+ne.port;var ue=new Os(null);z&&lh(ue,z),w&&(ue.g=w),ne&&uh(ue,ne),C&&(ue.l=C),z=ue}return C=c.D,w=c.ya,C&&w&&ht(z,C,w),ht(z,"VER",c.la),Ml(c,z),z}function eE(c,w,C){if(w&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=c.Ca&&!c.pa?new At(new hh({eb:C})):new At(c.pa),w.Ha(c.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tE(){}n=tE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function yh(){}yh.prototype.g=function(c,w){return new $n(c,w)};function $n(c,w){Ce.call(this),this.g=new W0(w),this.l=c,this.h=w&&w.messageUrlParams||null,c=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(c?c["X-WebChannel-Content-Type"]=w.messageContentType:c={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(c?c["X-WebChannel-Client-Profile"]=w.va:c={"X-WebChannel-Client-Profile":w.va}),this.g.S=c,(c=w&&w.Sb)&&!v(c)&&(this.g.m=c),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!v(w)&&(this.g.D=w,c=this.h,c!==null&&w in c&&(c=this.h,w in c&&delete c[w])),this.j=new jo(this)}E($n,Ce),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){Gp(this.g)},$n.prototype.o=function(c){var w=this.g;if(typeof c=="string"){var C={};C.__data__=c,c=C}else this.u&&(C={},C.__data__=zn(c),c=C);w.i.push(new hN(w.Ya++,c)),w.G==3&&mh(w)},$n.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,$n.aa.N.call(this)};function nE(c){Ci.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var w=c.__sm__;if(w){e:{for(const C in w){c=C;break e}c=void 0}(this.i=c)&&(c=this.i,w=w!==null&&c in w?w[c]:void 0),this.data=w}else this.data=c}E(nE,Ci);function rE(){Vp.call(this),this.status=1}E(rE,Vp);function jo(c){this.g=c}E(jo,tE),jo.prototype.ua=function(){De(this.g,"a")},jo.prototype.ta=function(c){De(this.g,new nE(c))},jo.prototype.sa=function(c){De(this.g,new rE)},jo.prototype.ra=function(){De(this.g,"b")},yh.prototype.createWebChannel=yh.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,fR=function(){return new yh},dR=function(){return ih()},hR=Ns,My={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sh.NO_ERROR=0,sh.TIMEOUT=8,sh.HTTP_ERROR=6,vd=sh,_0.COMPLETE="complete",cR=_0,Sl.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,pu=Sl,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,uR=At}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const qT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new kc("@firebase/firestore");function ea(){return cs.logLevel}function $4(n){cs.setLogLevel(n)}function _e(n,...e){if(cs.logLevel<=je.DEBUG){const t=e.map(W_);cs.debug(`Firestore (${ml}): ${n}`,...t)}}function Lt(n,...e){if(cs.logLevel<=je.ERROR){const t=e.map(W_);cs.error(`Firestore (${ml}): ${n}`,...t)}}function Kr(n,...e){if(cs.logLevel<=je.WARN){const t=e.map(W_);cs.warn(`Firestore (${ml}): ${n}`,...t)}}function W_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: `+n;throw Lt(e),new Error(e)}function Oe(n,e){n||Pe()}function W4(n,e){n||Pe()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends on{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}}class G4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class H4{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new an;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new an,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new an)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new pR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Yt(e)}}class K4{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q4{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new K4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Oe(this.o===void 0);const r=s=>{s.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new Y4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=J4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function gR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new wt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new wt(0,0))}static max(){return new Le(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(),r===void 0?r=e.length-t:r>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return hc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $e extends hc{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new $e(t)}static emptyPath(){return new $e([])}}const Z4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends hc{construct(e,t,r){return new vt(e,t,r)}static isValidIdentifier(e){return Z4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(t)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se($e.fromString(e))}static fromName(e){return new Se($e.fromString(e).popFirst(5))}static empty(){return new Se($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Uy(n){return n.fields.find(e=>e.kind===2)}function zs(n){return n.fields.filter(e=>e.kind!==2)}hf.UNKNOWN_ID=-1;class _d{constructor(e,t){this.fieldPath=e,this.kind=t}}class dc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dc(0,Xn.min())}}function yR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new Xn(i,Se.empty(),e)}function vR(n){return new Xn(n.readTime,n.key,-1)}class Xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xn(Le.min(),Se.empty(),-1)}static max(){return new Xn(Le.max(),Se.empty(),-1)}}function q_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==_R)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new an,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Pu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=G_(r.target.error);this.V.reject(new Pu(e,i))}}static open(e,t,r,i){try{return new ip(t,e.transaction(i,r))}catch(s){throw new Pu(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(_e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new t6(t)}}class $r{constructor(e,t,r){this.name=e,this.version=t,this.p=r,$r.S(Ye())===12.2&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _e("SimpleDb","Removing database:",e),$s(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nc())return!1;if($r.v())return!0;const e=Ye(),t=$r.S(e),r=0<t&&t<10,i=ER(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(_e("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ve(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ve(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Pu(e,o))},i.onupgradeneeded=s=>{_e("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{_e("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=ip.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),oe.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(_e("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ER(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class e6{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return $s(this.B.delete())}}class Pu extends ve{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function As(n){return n.name==="IndexedDbTransactionError"}class t6{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(_e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(_e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$s(r)}add(e){return _e("SimpleDb","ADD",this.store.name,e,e),$s(this.store.add(e))}get(e){return $s(this.store.get(e)).next(t=>(t===void 0&&(t=null),_e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _e("SimpleDb","DELETE",this.store.name,e),$s(this.store.delete(e))}count(){return _e("SimpleDb","COUNT",this.store.name),$s(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new oe((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new oe((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){_e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const o=G_(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new e6(a),u=t(a.primaryKey,a.value,l);if(u instanceof oe){const h=u.catch(d=>(l.done(),oe.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $s(n){return new oe((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=G_(r.target.error);t(i)}})}let GT=!1;function G_(n){const e=$r.S(Ye());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GT||(GT=!0,setTimeout(()=>{throw r},0)),r}}return n}class n6{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){_e("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{_e("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){As(t)?_e("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await bs(t)}await this.X(6e4)})}}class r6{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return _e("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(_e("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=vR(s);q_(o,r)>0&&(r=o)}),new Xn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ln.oe=-1;function Bc(n){return n==null}function fc(n){return n===0&&1/n==-1/0}function TR(n){return typeof n=="number"&&Number.isInteger(n)&&!fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HT(e)),e=i6(n.get(t),e);return HT(e)}function i6(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function HT(n){return n+""}function Mr(n){const e=n.length;if(Oe(e>=2),e===2)return Oe(n.charAt(0)===""&&n.charAt(1)===""),$e.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&Pe(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Pe()}s=o+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n,e){return[n,xn(e)]}function IR(n,e,t){return[n,xn(e),t]}const s6={},o6=["prefixPath","collectionGroup","readTime","documentId"],a6=["prefixPath","collectionGroup","documentId"],l6=["collectionGroup","readTime","prefixPath","documentId"],u6=["canonicalId","targetId"],c6=["targetId","path"],h6=["path","targetId"],d6=["collectionId","parent"],f6=["indexId","uid"],p6=["uid","sequenceNumber"],m6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g6=["indexId","uid","orderedDocumentKey"],y6=["userId","collectionPath","documentId"],v6=["userId","collectionPath","largestBatchId"],_6=["userId","collectionGroup","largestBatchId"],bR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w6=[...bR,"documentOverlays"],AR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xR=AR,H_=[...xR,"indexConfiguration","indexState","indexEntries"],E6=H_,T6=[...H_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends wR{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ht(n,e){const t=Re(n);return $r.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mh(this.root,e,this.comparator,!0)}}class Mh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??tn.RED,this.left=i??tn.EMPTY,this.right=s??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new tn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return tn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new YT(this.data.getIterator())}getIteratorFrom(e){return new YT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class YT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new rt(vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RR("Invalid base64 string: "+s):s}}(e);return new Ct(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const b6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(n){if(Oe(!!n),typeof n=="string"){let e=0;const t=b6.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hs(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function K_(n){const e=n.mapValue.fields.__previous_value__;return sp(e)?K_(e):e}function pc(n){const e=vi(n.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ds{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ds("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ds&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ed={nullValue:"NULL_VALUE"};function _o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sp(n)?4:CR(n)?9007199254740991:op(n)?10:11:Pe()}function Qr(n,e){if(n===e)return!0;const t=_o(n);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pc(n).isEqual(pc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vi(i.timestampValue),a=vi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return hs(i.bytesValue).isEqual(hs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return gt(i.geoPointValue.latitude)===gt(s.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gt(i.integerValue)===gt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gt(i.doubleValue),a=gt(s.doubleValue);return o===a?fc(o)===fc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(QT(o)!==QT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qr(o[l],a[l])))return!1;return!0}(n,e);default:return Pe()}}function mc(n,e){return(n.values||[]).find(t=>Qr(t,e))!==void 0}function fs(n,e){if(n===e)return 0;const t=_o(n),r=_o(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=gt(s.integerValue||s.doubleValue),l=gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return XT(n.timestampValue,e.timestampValue);case 4:return XT(pc(n),pc(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(s,o){const a=hs(s),l=hs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ue(a[u],l[u]);if(h!==0)return h}return Ue(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ue(gt(s.latitude),gt(o.latitude));return a!==0?a:Ue(gt(s.longitude),gt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return JT(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},p=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=Ue(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:JT(y,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ki.mapValue&&o===Ki.mapValue)return 0;if(s===Ki.mapValue)return 1;if(o===Ki.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Ue(l[d],h[d]);if(p!==0)return p;const y=fs(a[l[d]],u[h[d]]);if(y!==0)return y}return Ue(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function XT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=vi(n),r=vi(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function JT(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=fs(t[i],r[i]);if(s)return s}return Ue(t.length,r.length)}function Ga(n){return jy(n)}function jy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=vi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=jy(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${jy(t.fields[o])}`;return i+"}"}(n.mapValue):Pe()}function wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zy(n){return!!n&&"integerValue"in n}function gc(n){return!!n&&"arrayValue"in n}function ZT(n){return!!n&&"nullValue"in n}function eI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Td(n){return!!n&&"mapValue"in n}function op(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ku(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const PR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function x6(n){return"nullValue"in n?Ed:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wo(ds.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?op(n)?PR:{mapValue:{}}:Pe()}function S6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wo(ds.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?PR:"mapValue"in n?op(n)?{mapValue:{}}:Ki:Pe()}function tI(n,e){const t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nI(n,e){const t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=vt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ku(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(ku(this.value))}}function kR(n){const e=[];return ko(n.fields,(t,r)=>{const i=new vt([t]);if(Td(r)){const s=kR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,Le.min(),Le.min(),Le.min(),nn.empty(),0)}static newFoundDocument(e,t,r,i){return new ft(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new ft(e,2,t,Le.min(),Le.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,Le.min(),Le.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this.position=e,this.inclusive=t}}function rI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Se.comparator(Se.fromName(o.referenceValue),t.key):r=fs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function R6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{}class We extends NR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new C6(e,t,r):t==="array-contains"?new N6(e,r):t==="in"?new MR(e,r):t==="not-in"?new D6(e,r):t==="array-contains-any"?new O6(e,r):new We(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new P6(e,r):new k6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fs(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends NR{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new et(e,t)}matches(e){return Ha(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ha(n){return n.op==="and"}function $y(n){return n.op==="or"}function Q_(n){return DR(n)&&Ha(n)}function DR(n){for(const e of n.filters)if(e instanceof et)return!1;return!0}function Wy(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(Q_(n))return n.filters.map(e=>Wy(e)).join(",");{const e=n.filters.map(t=>Wy(t)).join(",");return`${n.op}(${e})`}}function OR(n,e){return n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Qr(r.value,i.value)}(n,e):n instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&OR(o,i.filters[a]),!0):!1}(n,e):void Pe()}function LR(n,e){const t=n.filters.concat(e);return et.create(t,n.op)}function FR(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`}(n):n instanceof et?function(t){return t.op.toString()+" {"+t.getFilters().map(FR).join(" ,")+"}"}(n):"Filter"}class C6 extends We{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class P6 extends We{constructor(e,t){super(e,"in",t),this.keys=VR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class k6 extends We{constructor(e,t){super(e,"not-in",t),this.keys=VR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class N6 extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gc(t)&&mc(t.arrayValue,this.value)}}class MR extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mc(this.value.arrayValue,t)}}class D6 extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!mc(this.value.arrayValue,t)}}class O6 extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function qy(n,e=null,t=[],r=[],i=null,s=null,o=null){return new L6(n,e,t,r,i,s,o)}function Eo(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ue=t}return e.ue}function jc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!R6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iI(n.startAt,e.startAt)&&iI(n.endAt,e.endAt)}function df(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ff(n,e){return n.filters.filter(t=>t instanceof We&&t.field.isEqual(e))}function sI(n,e,t){let r=Ed,i=!0;for(const s of ff(n,e)){let o=Ed,a=!0;switch(s.op){case"<":case"<=":o=x6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ed}tI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];tI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function oI(n,e,t){let r=Ki,i=!0;for(const s of ff(n,e)){let o=Ki,a=!0;switch(s.op){case">=":case">":o=S6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ki}nI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];nI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UR(n,e,t,r,i,s,o,a){return new Ii(n,e,t,r,i,s,o,a)}function gl(n){return new Ii(n)}function aI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Y_(n){return n.collectionGroup!==null}function xa(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yc(s,r))}),t.has(vt.keyField().canonicalString())||e.ce.push(new yc(vt.keyField(),r))}return e.ce}function Sn(n){const e=Re(n);return e.le||(e.le=F6(e,xa(n))),e.le}function F6(n,e){if(n.limitType==="F")return qy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new yc(i.field,s)});const t=n.endAt?new ps(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ps(n.startAt.position,n.startAt.inclusive):null;return qy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Gy(n,e){const t=n.filters.concat([e]);return new Ii(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pf(n,e,t){return new Ii(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zc(n,e){return jc(Sn(n),Sn(e))&&n.limitType===e.limitType}function BR(n){return`${Eo(Sn(n))}|lt:${n.limitType}`}function ta(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>FR(i)).join(", ")}]`),Bc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ga(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ga(i)).join(",")),`Target(${r})`}(Sn(n))}; limitType=${n.limitType})`}function $c(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of xa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=rI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,xa(r),i)||r.endAt&&!function(o,a,l){const u=rI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,xa(r),i))}(n,e)}function jR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zR(n){return(e,t)=>{let r=!1;for(const i of xa(n)){const s=V6(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function V6(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?fs(l,u):Pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new ct(Se.comparator);function Vn(){return M6}const $R=new ct(Se.comparator);function mu(...n){let e=$R;for(const t of n)e=e.insert(t.key,t);return e}function WR(n){let e=$R;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ur(){return Nu()}function qR(){return Nu()}function Nu(){return new xs(n=>n.toString(),(n,e)=>n.isEqual(e))}const U6=new ct(Se.comparator),B6=new rt(Se.comparator);function Be(...n){let e=B6;for(const t of n)e=e.add(t);return e}const j6=new rt(Ue);function X_(){return j6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function GR(n){return{integerValue:""+n}}function HR(n,e){return TR(e)?GR(e):J_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this._=void 0}}function z6(n,e,t){return n instanceof Ka?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sp(s)&&(s=K_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof To?QR(n,e):n instanceof Io?YR(n,e):function(i,s){const o=KR(i,s),a=lI(o)+lI(i.Pe);return zy(o)&&zy(i.Pe)?GR(a):J_(i.serializer,a)}(n,e)}function $6(n,e,t){return n instanceof To?QR(n,e):n instanceof Io?YR(n,e):t}function KR(n,e){return n instanceof Qa?function(r){return zy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ka extends ap{}class To extends ap{constructor(e){super(),this.elements=e}}function QR(n,e){const t=XR(e);for(const r of n.elements)t.some(i=>Qr(i,r))||t.push(r);return{arrayValue:{values:t}}}class Io extends ap{constructor(e){super(),this.elements=e}}function YR(n,e){let t=XR(e);for(const r of n.elements)t=t.filter(i=>!Qr(i,r));return{arrayValue:{values:t}}}class Qa extends ap{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lI(n){return gt(n.integerValue||n.doubleValue)}function XR(n){return gc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.field=e,this.transform=t}}function W6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof To&&i instanceof To||r instanceof Io&&i instanceof Io?qa(r.elements,i.elements,Qr):r instanceof Qa&&i instanceof Qa?Qr(r.Pe,i.Pe):r instanceof Ka&&i instanceof Ka}(n.transform,e.transform)}class q6{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lp{}function JR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vl(n.key,_t.none()):new yl(n.key,n.data,_t.none());{const t=n.data,r=nn.empty();let i=new rt(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bi(n.key,r,new Fn(i.toArray()),_t.none())}}function G6(n,e,t){n instanceof yl?function(i,s,o){const a=i.value.clone(),l=cI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof bi?function(i,s,o){if(!Id(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=cI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ZR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Du(n,e,t,r){return n instanceof yl?function(s,o,a,l){if(!Id(s.precondition,o))return a;const u=s.value.clone(),h=hI(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof bi?function(s,o,a,l){if(!Id(s.precondition,o))return a;const u=hI(s.fieldTransforms,l,o),h=o.data;return h.setAll(ZR(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return Id(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function H6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=KR(r.transform,i||null);s!=null&&(t===null&&(t=nn.empty()),t.set(r.field,s))}return t||null}function uI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(s,o)=>W6(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yl extends lp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bi extends lp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cI(n,e,t){const r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$6(o,a,t[i]))}return r}function hI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,z6(s,o,e))}return r}class vl extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z_ extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&G6(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=JR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>uI(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>uI(t,r))}}class tw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return U6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new tw(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ge;function eC(n){switch(n){default:return Pe();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function tC(n){if(n===void 0)return Lt("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Bt.OK:return ce.OK;case Bt.CANCELLED:return ce.CANCELLED;case Bt.UNKNOWN:return ce.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ce.INTERNAL;case Bt.UNAVAILABLE:return ce.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ce.NOT_FOUND;case Bt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Bt.ABORTED:return ce.ABORTED;case Bt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Bt.DATA_LOSS:return ce.DATA_LOSS;default:return Pe()}}(Ge=Bt||(Bt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new ao([4294967295,4294967295],0);function dI(n){const e=nC().encode(n),t=new lR;return t.update(e),new Uint8Array(t.digest())}function fI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ao([t,r],0),new ao([i,s],0)]}class rw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gu(`Invalid padding: ${t}`);if(r<0)throw new gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ao.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ao.fromNumber(r)));return i.compare(Q6)===1&&(i=new ao([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=dI(e),[r,i]=fI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rw(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=dI(e),[r,i]=fI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qc(Le.min(),i,new ct(Ue),Vn(),Be())}}class Gc{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gc(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class rC{constructor(e,t){this.targetId=e,this.me=t}}class iC{constructor(e,t,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pI{constructor(){this.fe=0,this.ge=gI(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),t=Be(),r=Be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new Gc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=gI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y6{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=mI(),this.Qe=new ct(Ue)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(df(s))if(r===0){const o=new Se(s.path);this.Ue(t,o,ft.newNoDocument(o,Le.min()))}else Oe(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=hs(r).toUint8Array()}catch(l){if(l instanceof RR)return Kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rw(o,i,s)}catch(l){return Kr(l instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&df(a.target)){const l=new Se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ft.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qc(e,t,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=mI(),this.Qe=new ct(Ue),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pI,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rt(Ue),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pI),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mI(){return new ct(Se.comparator)}function gI(){return new ct(Se.comparator)}const X6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),J6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Z6=(()=>({and:"AND",or:"OR"}))();class eB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hy(n,e){return n.useProto3Json||Bc(e)?e:{value:e}}function Ya(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tB(n,e){return Ya(n,e.toTimestamp())}function Ft(n){return Oe(!!n),Le.fromTimestamp(function(t){const r=vi(t);return new wt(r.seconds,r.nanos)}(n))}function iw(n,e){return Ky(n,e).canonicalString()}function Ky(n,e){const t=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oC(n){const e=$e.fromString(n);return Oe(gC(e)),e}function vc(n,e){return iw(n.databaseId,e.path)}function Wr(n,e){const t=oC(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(uC(t))}function aC(n,e){return iw(n.databaseId,e)}function lC(n){const e=oC(n);return e.length===4?$e.emptyPath():uC(e)}function Qy(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uC(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yI(n,e,t){return{name:vc(n,e),fields:t.value.mapValue.fields}}function cC(n,e,t){const r=Wr(n,e.name),i=Ft(e.updateTime),s=e.createTime?Ft(e.createTime):Le.min(),o=new nn({mapValue:{fields:e.fields}}),a=ft.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function nB(n,e){return"found"in e?function(r,i){Oe(!!i.found),i.found.name,i.found.updateTime;const s=Wr(r,i.found.name),o=Ft(i.found.updateTime),a=i.found.createTime?Ft(i.found.createTime):Le.min(),l=new nn({mapValue:{fields:i.found.fields}});return ft.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Oe(!!i.missing),Oe(!!i.readTime);const s=Wr(r,i.missing),o=Ft(i.readTime);return ft.newNoDocument(s,o)}(n,e):Pe()}function rB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Oe(h===void 0||typeof h=="string"),Ct.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ct.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?ce.UNKNOWN:tC(u.code);return new ve(h,u.message||"")}(o);t=new iC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wr(n,r.document.name),s=Ft(r.document.updateTime),o=r.document.createTime?Ft(r.document.createTime):Le.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new bd(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wr(n,r.document),s=r.readTime?Ft(r.readTime):Le.min(),o=ft.newNoDocument(i,s),a=r.removedTargetIds||[];t=new bd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wr(n,r.document),s=r.removedTargetIds||[];t=new bd([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new K6(i,s),a=r.targetId;t=new rC(a,o)}}return t}function _c(n,e){let t;if(e instanceof yl)t={update:yI(n,e.key,e.value)};else if(e instanceof vl)t={delete:vc(n,e.key)};else if(e instanceof bi)t={update:yI(n,e.key,e.data),updateMask:uB(e.fieldMask)};else{if(!(e instanceof Z_))return Pe();t={verify:vc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ka)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof To)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Io)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(n,e.precondition)),t}function Yy(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?_t.updateTime(Ft(s.updateTime)):s.exists!==void 0?_t.exists(s.exists):_t.none()}(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Oe(a.setToServerValue==="REQUEST_TIME"),l=new Ka;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new To(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Io(h)}else"increment"in a?l=new Qa(o,a.increment):Pe();const u=vt.fromServerFormat(a.fieldPath);return new Wc(u,l)}(n,i)):[];if(e.update){e.update.name;const i=Wr(n,e.update.name),s=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Fn(u.map(h=>vt.fromServerFormat(h)))}(e.updateMask);return new bi(i,s,o,t,r)}return new yl(i,s,t,r)}if(e.delete){const i=Wr(n,e.delete);return new vl(i,t)}if(e.verify){const i=Wr(n,e.verify);return new Z_(i,t)}return Pe()}function iB(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Ft(i.updateTime):Ft(s);return o.isEqual(Le.min())&&(o=Ft(s)),new q6(o,i.transformResults||[])}(t,e))):[]}function hC(n,e){return{documents:[aC(n,e.path)]}}function dC(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aC(n,i);const s=function(u){if(u.length!==0)return mC(et.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:na(p.field),direction:oB(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Hy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function fC(n){let e=lC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Oe(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=pC(d);return p instanceof et&&Q_(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(E){return new yc(ra(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Bc(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,y=d.values||[];return new ps(y,p)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const p=!d.before,y=d.values||[];return new ps(y,p)}(t.endAt)),UR(e,i,o,s,a,"F",l,u)}function sB(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ra(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ra(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ra(t.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ra(t.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return We.create(ra(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return et.create(t.compositeFilter.filters.map(r=>pC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function oB(n){return X6[n]}function aB(n){return J6[n]}function lB(n){return Z6[n]}function na(n){return{fieldPath:n.canonicalString()}}function ra(n){return vt.fromServerFormat(n.fieldPath)}function mC(n){return n instanceof We?function(t){if(t.op==="=="){if(eI(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NAN"}};if(ZT(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eI(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NAN"}};if(ZT(t.value))return{unaryFilter:{field:na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(t.field),op:aB(t.op),value:t.value}}}(n):n instanceof et?function(t){const r=t.getFilters().map(i=>mC(i));return r.length===1?r[0]:{compositeFilter:{op:lB(t.op),filters:r}}}(n):Pe()}function uB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t,r,i,s=Le.min(),o=Le.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.ct=e}}function cB(n,e){let t;if(e.document)t=cC(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=Ao(e.noDocument.readTime);t=ft.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pe();{const r=Se.fromSegments(e.unknownDocument.path),i=Ao(e.unknownDocument.version);t=ft.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new wt(i[0],i[1]);return Le.fromTimestamp(s)}(e.readTime)),t}function vI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:vc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ya(s,o.version.toTimestamp()),createTime:Ya(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bo(e.version)};else{if(!e.isUnknownDocument())return Pe();r.unknownDocument={path:t.path.toArray(),version:bo(e.version)}}return r}function mf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ao(n){const e=new wt(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function Ws(n,e){const t=(e.baseMutations||[]).map(s=>Yy(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Yy(n.ct,s)),i=wt.fromMillis(e.localWriteTimeMs);return new ew(e.batchId,i,t,r)}function yu(n){const e=Ao(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ao(n.lastLimboFreeSnapshotVersion):Le.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Oe(s.documents.length===1),Sn(gl(lC(s.documents[0])))}(n.query):function(s){return Sn(fC(s))}(n.query),new ai(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ct.fromBase64String(n.resumeToken))}function vC(n,e){const t=bo(e.snapshotVersion),r=bo(e.lastLimboFreeSnapshotVersion);let i;i=df(e.target)?hC(n.ct,e.target):dC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sw(n){const e=fC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pf(e,e.limit,"L"):e}function Dm(n,e){return new nw(e.largestBatchId,Yy(n.ct,e.overlayMutation))}function _I(n,e){const t=e.path.lastSegment();return[n,xn(e.path.popLast()),t]}function wI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:bo(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{getBundleMetadata(e,t){return EI(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ao(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return EI(e).put(function(i){return{bundleId:i.id,createTime:bo(Ft(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return TI(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:sw(s.bundledQuery),readTime:Ao(s.readTime)}}(r)})}saveNamedQuery(e,t){return TI(e).put(function(i){return{name:i.name,readTime:bo(Ft(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function EI(n){return Ht(n,"bundles")}function TI(n){return Ht(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new up(e,r)}getOverlay(e,t){return Yl(e).get(_I(this.userId,t)).next(r=>r?Dm(this.serializer,r):null)}getOverlays(e,t){const r=Ur();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new nw(t,o);i.push(this.ht(e,a))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(xn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Yl(e).j("collectionPathOverlayIndex",a))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ur(),s=xn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Dm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ur();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const d=Dm(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return Yl(e).put(function(i,s,o){const[a,l,u]=_I(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_c(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Yl(n){return Ht(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{Pt(e){return Ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Ct.fromUint8Array(r):Ct.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(gt(e.integerValue));else if("doubleValue"in e){const r=gt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=vi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(hs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?CR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):op(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Pe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(gt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Se.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qs.vt=new qs;function fB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function II(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=fB(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class pB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=II(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=II(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mB{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class gB{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xl{constructor(){this.jt=new pB,this.Ht=new mB(this.jt),this.Jt=new gB(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gs(this.indexId,this.documentKey,this.arrayValue,r)}}function Li(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=bI(n.arrayValue,e.arrayValue),t!==0?t:(t=bI(n.directionalValue,e.directionalValue),t!==0?t:Se.comparator(n.documentKey,e.documentKey)))}function bI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.Xt=new rt((t,r)=>vt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Oe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Uy(e);if(t!==void 0&&!this.sn(t))return!1;const r=zs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new rt(vt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new _d(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _d(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _d(r.field,r.dir==="asc"?0:1)));return new hf(hf.UNKNOWN_ID,this.collectionId,t,dc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){var e,t;if(Oe(n instanceof We||n instanceof et),n instanceof We){if(n instanceof MR){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>We.create(n.field,"==",s)))||[];return et.create(i,"or")}return n}const r=n.filters.map(i=>_C(i));return et.create(r,n.op)}function yB(n){if(n.getFilters().length===0)return[];const e=Zy(_C(n));return Oe(wC(e)),Xy(e)||Jy(e)?[e]:e.getFilters()}function Xy(n){return n instanceof We}function Jy(n){return n instanceof et&&Q_(n)}function wC(n){return Xy(n)||Jy(n)||function(t){if(t instanceof et&&$y(t)){for(const r of t.getFilters())if(!Xy(r)&&!Jy(r))return!1;return!0}return!1}(n)}function Zy(n){if(Oe(n instanceof We||n instanceof et),n instanceof We)return n;if(n.filters.length===1)return Zy(n.filters[0]);const e=n.filters.map(r=>Zy(r));let t=et.create(e,n.op);return t=gf(t),wC(t)?t:(Oe(t instanceof et),Oe(Ha(t)),Oe(t.filters.length>1),t.filters.reduce((r,i)=>ow(r,i)))}function ow(n,e){let t;return Oe(n instanceof We||n instanceof et),Oe(e instanceof We||e instanceof et),t=n instanceof We?e instanceof We?function(i,s){return et.create([i,s],"and")}(n,e):xI(n,e):e instanceof We?xI(e,n):function(i,s){if(Oe(i.filters.length>0&&s.filters.length>0),Ha(i)&&Ha(s))return LR(i,s.getFilters());const o=$y(i)?i:s,a=$y(i)?s:i,l=o.filters.map(u=>ow(u,a));return et.create(l,"or")}(n,e),gf(t)}function xI(n,e){if(Ha(e))return LR(e,n.getFilters());{const t=e.filters.map(r=>ow(n,r));return et.create(t,"or")}}function gf(n){if(Oe(n instanceof We||n instanceof et),n instanceof We)return n;const e=n.getFilters();if(e.length===1)return gf(e[0]);if(DR(n))return n;const t=e.map(i=>gf(i)),r=[];return t.forEach(i=>{i instanceof We?r.push(i):i instanceof et&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.un=new aw}addToCollectionParentIndex(e,t){return this.un.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Xn.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class aw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rt($e.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Uint8Array(0);class _B{constructor(e,t){this.databaseId=t,this.cn=new aw,this.ln=new xs(r=>Eo(r),(r,i)=>jc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:xn(i)};return SI(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[gR(t),""],!1,!0);return SI(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Mr(o.parent))}return r})}addFieldIndex(e,t){const r=Jl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=Ho(e);return s.next(a=>{o.put(wI(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Jl(e),i=Ho(e),s=Go(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Jl(e),r=Go(e),i=Ho(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return oe.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new AI(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Go(e);let i=!0;const s=new Map;return oe.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Be();const a=[];return oe.forEach(s,(l,u)=>{_e("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${Eo(t)}`);const h=function(I,D){const F=Uy(D);if(F===void 0)return null;for(const $ of ff(I,F.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(u,l),d=function(I,D){const F=new Map;for(const $ of zs(D))for(const k of ff(I,$.fieldPath))switch(k.op){case"==":case"in":F.set($.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return F.set($.fieldPath.canonicalString(),k.value),Array.from(F.values())}return null}(u,l),p=function(I,D){const F=[];let $=!0;for(const k of zs(D)){const N=k.kind===0?sI(I,k.fieldPath,I.startAt):oI(I,k.fieldPath,I.startAt);F.push(N.value),$&&($=N.inclusive)}return new ps(F,$)}(u,l),y=function(I,D){const F=[];let $=!0;for(const k of zs(D)){const N=k.kind===0?oI(I,k.fieldPath,I.endAt):sI(I,k.fieldPath,I.endAt);F.push(N.value),$&&($=N.inclusive)}return new ps(F,$)}(u,l),E=this.In(l,u,p),_=this.In(l,u,y),b=this.Tn(l,u,d),m=this.En(l.indexId,h,E,p.inclusive,_,y.inclusive,b);return oe.forEach(m,v=>r.G(v,t.limit).next(I=>{I.forEach(D=>{const F=Se.fromSegments(D.documentKey);o.has(F)||(o=o.add(F),a.push(F))})}))}).next(()=>a)}return oe.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=yB(et.create(e.filters,"and")).map(r=>qy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),h=[];for(let d=0;d<l;++d){const p=t?this.dn(t[d/u]):Uh,y=this.An(e,p,r[d%u],i),E=this.Rn(e,p,s[d%u],o),_=a.map(b=>this.An(e,p,b,!0));h.push(...this.createRange(y,E,_))}return h}An(e,t,r,i){const s=new Gs(e,Se.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Gs(e,Se.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new AI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return oe.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new rt(vt.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Xl;for(const i of zs(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);qs.vt.It(s,o)}return r.zt()}dn(e){const t=new Xl;return qs.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xl;return qs.vt.It(wo(this.databaseId,t),r.Yt(function(s){const o=zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Xl);let s=0;for(const o of zs(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&gc(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);qs.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Xl;l.seed(a.zt()),qs.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof We&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Jl(e),i=Ho(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return oe.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const p=d?new dc(d.sequenceNumber,new Xn(Ao(d.readTime),new Se(Mr(d.documentKey)),d.largestBatchId)):dc.empty(),y=h.fields.map(([E,_])=>new _d(vt.fromServerFormat(E),_));return new hf(h.indexId,h.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Jl(e),s=Ho(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>oe.forEach(a,l=>s.put(wI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?oe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),oe.forEach(a,l=>this.wn(e,i,l).next(u=>{const h=this.Sn(s,l);return u.isEqual(h)?oe.resolve():this.bn(e,s,l,u,h)}))))})}Dn(e,t,r,i){return Go(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Go(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Go(e);let s=new rt(Li);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Gs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new rt(Li);const i=this.Vn(t,e);if(i==null)return r;const s=Uy(t);if(s!=null){const o=e.data.field(s.fieldPath);if(gc(o))for(const a of o.arrayValue.values||[])r=r.add(new Gs(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Gs(t.indexId,e.key,Uh,i));return r}bn(e,t,r,i,s){_e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,u,h,d,p){const y=l.getIterator(),E=u.getIterator();let _=qo(y),b=qo(E);for(;_||b;){let m=!1,v=!1;if(_&&b){const I=h(_,b);I<0?v=!0:I>0&&(m=!0)}else _!=null?v=!0:m=!0;m?(d(b),b=qo(E)):v?(p(_),_=qo(y)):(_=qo(y),b=qo(E))}}(i,s,Li,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),oe.waitFor(o)}yn(e){let t=1;return Ho(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Li(o,a)).filter((o,a,l)=>!a||Li(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Li(o,e),l=Li(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Uh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Uh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return Li(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RI)}getMinOffset(e,t){return oe.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Pe())).next(RI)}}function SI(n){return Ht(n,"collectionParents")}function Go(n){return Ht(n,"indexEntries")}function Jl(n){return Ht(n,"indexConfiguration")}function Ho(n){return Ht(n,"indexState")}function RI(n){Oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;q_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,d,p)=>(a++,p.delete()));s.push(l.next(()=>{Oe(a===1)}));const u=[];for(const h of t.mutations){const d=IR(e,h.key.path,t.batchId);s.push(i.delete(d)),u.push(h.key)}return oe.waitFor(s).next(()=>u)}function yf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Pe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class cp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Oe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new cp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ia(e),o=Fi(e);return o.add({}).next(a=>{Oe(typeof a=="number");const l=new ew(a,t,r,i),u=function(y,E,_){const b=_.baseMutations.map(v=>_c(y.ct,v)),m=_.mutations.map(v=>_c(y.ct,v));return{userId:E,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:m}}(this.serializer,this.userId,l),h=[];let d=new rt((p,y)=>Ue(p.canonicalString(),y.canonicalString()));for(const p of i){const y=IR(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,s6))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),oe.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return Fi(e).get(t).next(r=>r?(Oe(r.userId===this.userId),Ws(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?oe.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Fi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Oe(a.batchId>=r),s=Ws(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ws(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ia(e).J({range:i},(o,a,l)=>{const[u,h,d]=o,p=Mr(h);if(u===this.userId&&t.path.isEqual(p))return Fi(e).get(d).next(y=>{if(!y)throw Pe();Oe(y.userId===this.userId),s.push(Ws(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Ue);const i=[];return t.forEach(s=>{const o=wd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ia(e).J({range:a},(u,h,d)=>{const[p,y,E]=u,_=Mr(y);p===this.userId&&s.path.isEqual(_)?r=r.add(E):d.done()});i.push(l)}),oe.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=wd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new rt(Ue);return ia(e).J({range:o},(l,u,h)=>{const[d,p,y]=l,E=Mr(p);d===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Fi(e).get(s).next(o=>{if(o===null)throw Pe();Oe(o.userId===this.userId),r.push(Ws(this.serializer,o))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return EC(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ia(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Mr(s[1]);i.push(l)}else a.done()}).next(()=>{Oe(i.length===0)})})}containsKey(e,t){return TC(e,this.userId,t)}Nn(e){return IC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function TC(n,e,t){const r=wd(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ia(n).J({range:s,H:!0},(a,l,u)=>{const[h,d,p]=a;h===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Fi(n){return Ht(n,"mutations")}function ia(n){return Ht(n,"documentMutations")}function IC(n){return Ht(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xo(0)}static kn(){return new xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new xo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Le.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ko(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Ko(e).J((o,a)=>{const l=yu(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ko(e).J((r,i)=>{const s=yu(i);t(s)})}qn(e){return PI(e).get("targetGlobalKey").next(t=>(Oe(t!==null),t))}Qn(e,t){return PI(e).put("targetGlobalKey",t)}Kn(e,t){return Ko(e).put(vC(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ko(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=yu(a);jc(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=$i(e);return t.forEach(o=>{const a=xn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=$i(e);return oe.forEach(t,s=>{const o=xn(s.path);return oe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=$i(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$i(e);let s=Be();return i.J({range:r,H:!0},(o,a,l)=>{const u=Mr(o[1]),h=new Se(u);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=xn(t.path),i=IDBKeyRange.bound([r],[gR(r)],!1,!0);let s=0;return $i(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Ko(e).get(t).next(r=>r?yu(r):null)}}function Ko(n){return Ht(n,"targets")}function PI(n){return Ht(n,"targetGlobal")}function $i(n){return Ht(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI([n,e],[t,r]){const i=Ue(n,t);return i===0?Ue(e,r):i}class EB{constructor(e){this.Un=e,this.buffer=new rt(kI),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){_e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){As(t)?_e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await bs(t)}await this.Hn(3e5)})}}class IB{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Ln.oe);const r=new EB(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(CI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CI):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),ea()<=je.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function bB(n,e){return new IB(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,t){this.db=e,this.garbageCollector=bB(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Bh(e,r)}removeReference(e,t,r){return Bh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Bh(e,t)}nr(e,t){return function(i,s){let o=!1;return IC(i).Y(a=>TC(i,a,s).next(l=>(l&&(o=!0),oe.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Le.min()),$i(e).delete(function(d){return[0,xn(d.path)]}(o))))});i.push(l)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Bh(e,t)}tr(e,t){const r=$i(e);let i,s=Ln.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Ln.oe&&t(new Se(Mr(i)),s),s=u,i=l):s=Ln.oe}).next(()=>{s!==Ln.oe&&t(new Se(Mr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bh(n,e){return $i(n).put(function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.changes=new xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fs(e).put(r)}removeEntry(e,t,r){return Fs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mf(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ft.newInvalidDocument(t);return Fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zl(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:ft.newInvalidDocument(t)};return Fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zl(t))},(i,s)=>{r={document:this.ir(t,s),size:yf(s)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Vn(),i=new ct(Se.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,yf(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return oe.resolve();let i=new rt(OI);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Zl(i.first()),Zl(i.last())),o=i.getIterator();let a=o.getNext();return Fs(e).J({index:"documentKeyIndex",range:s},(l,u,h)=>{const d=Se.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&OI(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Zl(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),mf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fs(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=Vn();for(const d of u){const p=this.ir(Se.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&($c(t,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Vn();const o=DI(t,r),a=DI(t,Xn.max());return Fs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const d=this.ir(Se.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new SB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return NI(e).get("remoteDocumentGlobalKey").next(t=>(Oe(!!t),t))}rr(e,t){return NI(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=cB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return ft.newInvalidDocument(e)}}function AC(n){return new xB(n)}class SB extends bC{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new xs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rt((s,o)=>Ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=vI(this.cr.serializer,o);i=i.add(s.path.popLast());const u=yf(l);r+=u-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=vI(this.cr.serializer,o.convertToNoDocument(Le.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function NI(n){return Ht(n,"remoteDocumentGlobal")}function Fs(n){return Ht(n,"remoteDocumentsV14")}function Zl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DI(n,e){const t=e.documentKey.path.toArray();return[n,mf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ue(t[s],r[s]),i)return i;return i=Ue(t.length,r.length),i||(i=Ue(t[t.length-2],r[r.length-2]),i||Ue(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Du(r.mutation,i,Fn.empty(),wt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const i=Ur();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=mu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ur();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vn();const o=Nu(),a=function(){return Nu()}();return t.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof bi)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Du(h.mutation,u,h.mutation.getFieldMask(),wt.now())):o.set(u.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var d;return a.set(u,new RB(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Nu();let i=new ct((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Fn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(i.get(a.batchId)||Be()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=qR();h.forEach(p=>{if(!s.has(p)){const y=JR(t.get(p),r.get(p));y!==null&&d.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Ur());let a=-1,l=s;return o.next(u=>oe.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Be())).next(h=>({batchId:a,changes:WR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=mu();return this.indexManager.getCollectionParents(e,s).next(a=>oe.forEach(a,l=>{const u=function(d,p){return new Ii(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let a=mu();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Du(h.mutation,u,Fn.empty(),wt.now()),$c(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return oe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ft(i.createTime)}}(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:sw(i.bundledQuery),readTime:Ft(i.readTime)}}(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.overlays=new ct(Se.comparator),this.Ir=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ur();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Ur(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ct((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Ur(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ur(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return oe.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nw(t,r));let s=this.Ir.get(t);s===void 0&&(s=Be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.Tr=new rt(Kt.Er),this.dr=new rt(Kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Kt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Se(new $e([])),r=new Kt(t,e),i=new Kt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new $e([])),r=new Kt(t,e),i=new Kt(t,e+1);let s=Be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Kt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||Ue(e.wr,t.wr)}static Ar(e,t){return Ue(e.wr,t.wr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new rt(Kt.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ew(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,t){return oe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),i=new Kt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Ue);return t.forEach(i=>{const s=new Kt(i,0),o=new Kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new Kt(new Se(s),0);let a=new rt(Ue);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),oe.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(t.mutations,i=>{const s=new Kt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Kt(t,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.Mr=e,this.docs=function(){return new ct(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vn();const o=t.path,a=new Se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||q_(vR(h),r)<=0||(i.has(h.key)||$c(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Pe()}Or(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new OB(this)}getSize(e){return oe.resolve(this.size)}}class OB extends bC{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.persistence=e,this.Nr=new xs(t=>Eo(t),jc),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lw,this.targetCount=0,this.kr=xo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new xo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Kn(t),oe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ln(0),this.Kr=!1,this.Kr=!0,this.$r=new kB,this.referenceDelegate=e(this),this.Ur=new LB(this),this.indexManager=new vB,this.remoteDocumentCache=function(i){return new DB(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new yC(t),this.Gr=new CB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new NB(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new FB(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class FB extends wR{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Jr=new lw,this.Yr=null}static Zr(e){return new hp(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,r=>{const i=Se.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return oe.or([()=>oe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.serializer=e}O(e,t,r,i){const s=new ip("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KT,{unique:!0}),l.createObjectStore("documentMutations")}(e),LI(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=oe.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),LI(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KT,{unique:!0});const d=u.store("mutations"),p=h.map(y=>d.put(y));return oe.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:y6});u.createIndex("collectionPathOverlayIndex",v6,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",_6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:o6});u.createIndex("documentKeyIndex",a6),u.createIndex("collectionGroupIndex",l6)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:f6}).createIndex("sequenceNumberIndex",p6,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:m6}).createIndex("documentKeyIndex",g6,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=yf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>oe.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>oe.forEach(a,l=>{Oe(l.userId===s.userId);const u=Ws(this.serializer,l);return EC(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new $e(o),u=function(d){return[0,xn(d)]}(l);s.push(t.get(u).next(h=>h?oe.resolve():(d=>t.put({targetId:0,path:xn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>oe.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:d6});const r=t.store("collectionParents"),i=new aw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:xn(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new $e(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],u)=>{const h=Mr(a);return s(h.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=yu(i),o=vC(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(d){return d.document?new Se($e.fromString(d.document.name).popFirst(5)):d.noDocument?Se.fromSegments(d.noDocument.path):d.unknownDocument?Se.fromSegments(d.unknownDocument.path):Pe()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>oe.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=AC(this.serializer),s=new SC(hp.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:Be();Ws(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),oe.forEach(a,(l,u)=>{const h=new Yt(u),d=up.lt(this.serializer,h),p=s.getIndexManager(h),y=cp.lt(h,this.serializer,p,s.referenceDelegate);return new xC(i,y,d,p).recalculateAndSaveOverlaysForDocumentKeys(new By(t,Ln.oe),l).next()})})}}function LI(n){n.createObjectStore("targetDocuments",{keyPath:c6}).createIndex("documentTargetsIndex",h6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u6,{unique:!0}),n.createObjectStore("targetGlobal")}const Om="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uw{constructor(e,t,r,i,s,o,a,l,u,h,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!uw.D())throw new ve(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AB(this,i),this.Ai=t+"main",this.serializer=new yC(l),this.Ri=new $r(this.Ai,this.hi,new VB(this.serializer)),this.$r=new dB,this.Ur=new wB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AC(this.serializer),this.Gr=new hB,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ce.FAILED_PRECONDITION,Om);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(As(e))return _e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return eu(e).get("owner").next(t=>oe.resolve(this.vi(t)))}Ci(e){return jh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ht(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return oe.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?oe.resolve(!0):eu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ve(ce.FAILED_PRECONDITION,Om);return!1}}return!(!this.networkEnabled||!this.inForeground)||jh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&_e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new By(e,Ln.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return cp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _B(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return up.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){_e("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?T6:l===16?E6:l===15?H_:l===14?xR:l===13?AR:l===12?w6:l===11?bR:void Pe()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new By(a,this.Qr?this.Qr.next():Ln.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ve(ce.FAILED_PRECONDITION,_R);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return eu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ce.FAILED_PRECONDITION,Om)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eu(e).put("owner",t)}static D(){return $r.D()}bi(e){const t=eu(e);return t.get("owner").next(r=>this.vi(r)?(_e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Lt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;Xx()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return _e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Lt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Lt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eu(n){return Ht(n,"owner")}function jh(n){return Ht(n,"clientMetadata")}function cw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Be(),i=Be();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Xx()?8:ER(Ye())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new MB;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ea()<=je.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(ea()<=je.DEBUG&&_e("QueryEngine","Query:",ta(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ea()<=je.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(t))):oe.resolve())}Yi(e,t){if(aI(t))return oe.resolve(null);let r=Sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pf(t,null,"F"),r=Sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(t,a);return this.ns(t,u,o,l.readTime)?this.Yi(e,pf(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,r,i){return aI(t)||i.isEqual(Le.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?oe.resolve(null):(ea()<=je.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(t)),this.rs(e,o,t,yR(i,-1)).next(a=>a))})}ts(e,t){let r=new rt(zR(e));return t.forEach((i,s)=>{$c(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ea()<=je.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",ta(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ct(Ue),this._s=new xs(s=>Eo(s),jc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function CC(n,e,t,r){return new UB(n,e,t,r)}async function PC(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Be();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function BB(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,p=d.keys();let y=oe.resolve();return p.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(_=>{const b=u.docVersions.get(E);Oe(b!==null),_.version.compareTo(b)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),h.addEntry(_)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kC(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function jB(n,e){const t=Re(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,d)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(_,b,m){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(p,y,h)&&a.push(t.Ur.updateTargetData(s,y))});let l=Vn(),u=Be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(NC(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(Le.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return oe.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=i,s))}function NC(n,e,t){let r=Be(),i=Be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vn();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):_e("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function zB(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xa(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Ja(n,e,t){const r=Re(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!As(o))throw o;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function vf(n,e,t){const r=Re(n);let i=Le.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=Re(l),p=d._s.get(h);return p!==void 0?oe.resolve(d.os.get(p)):d.Ur.getTargetData(u,h)}(r,o,Sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Le.min(),t?s:Be())).next(a=>(LC(r,jR(e),a),{documents:a,Ts:s})))}function DC(n,e){const t=Re(n),r=Re(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function OC(n,e){const t=Re(n),r=t.us.get(e)||Le.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,yR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(LC(t,e,i),i))}function LC(n,e,t){let r=n.us.get(e)||Le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function $B(n,e,t,r){const i=Re(n);let s=Be(),o=Vn();for(const u of t){const h=e.Es(u.metadata.name);u.document&&(s=s.add(h));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),o=o.insert(h,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Xa(i,function(h){return Sn(gl($e.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>NC(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.Ps,h.Is)).next(()=>h.Ps)))}async function WB(n,e,t=Be()){const r=await Xa(n,Sn(sw(e.bundledQuery))),i=Re(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ft(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Ct.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function FI(n,e){return`firestore_clients_${n}_${e}`}function VI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Lm(n,e){return`firestore_targets_${n}_${e}`}class _f{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ve(i.error.code,i.error.message))),o?new _f(e,t,i.state,s):(Lt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ou{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ve(r.error.code,r.error.message))),s?new Ou(e,r.state,i):(Lt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=X_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=TR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new wf(e,s):(Lt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dw{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new dw(t.clientId,t.onlineState):(Lt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ev{constructor(){this.activeTargetIds=X_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fm{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ct(Ue),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=FI(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ev),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(FI(this.persistenceKey,r));if(i){const s=wf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Lm(this.persistenceKey,e));if(i){const s=Ou.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _e("SharedClientState","READ",e,t),t}setItem(e,t){_e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(_e("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let o=Ln.oe;if(s!=null)try{const a=JSON.parse(s);Oe(typeof a=="number"),o=a}catch(a){Lt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Ln.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new _f(this.currentUser,e,t,r),s=VI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=VI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=Lm(this.persistenceKey,e),s=new Ou(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return wf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _f.Rs(new Yt(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Ou.Rs(i,t)}Ls(e){return dw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);_e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=X_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FC{constructor(){this.so=new ev,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ev,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh=null;function Vm(){return zh===null?zh=function(){return 268435456+Math.round(2147483648*Math.random())}():zh++,"0x"+zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class KB extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=Vm(),l=this.xo(t,r.toUriEncodedString());_e("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,i).then(h=>(_e("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Kr("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ml}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=GB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Vm();return new Promise((o,a)=>{const l=new uR;l.setWithCredentials(!0),l.listenOnce(cR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vd.NO_ERROR:const h=l.getResponseJson();_e(pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vd.TIMEOUT:_e(pn,`RPC '${e}' ${s} timed out`),a(new ve(ce.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const d=l.getStatus();if(_e(pn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const E=function(b){const m=b.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(m)>=0?m:ce.UNKNOWN}(y.status);a(new ve(E,y.message))}else a(new ve(ce.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(ce.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{_e(pn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);_e(pn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=Vm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fR(),a=dR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");_e(pn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,y=!1;const E=new HB({Io:b=>{y?_e(pn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(p||(_e(pn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),_e(pn,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},To:()=>d.close()}),_=(b,m,v)=>{b.listen(m,I=>{try{v(I)}catch(D){setTimeout(()=>{throw D},0)}})};return _(d,pu.EventType.OPEN,()=>{y||(_e(pn,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),_(d,pu.EventType.CLOSE,()=>{y||(y=!0,_e(pn,`RPC '${e}' stream ${i} transport closed`),E.So())}),_(d,pu.EventType.ERROR,b=>{y||(y=!0,Kr(pn,`RPC '${e}' stream ${i} transport errored:`,b),E.So(new ve(ce.UNAVAILABLE,"The operation could not be completed")))}),_(d,pu.EventType.MESSAGE,b=>{var m;if(!y){const v=b.data[0];Oe(!!v);const I=v,D=I.error||((m=I[0])===null||m===void 0?void 0:m.error);if(D){_e(pn,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let $=function(T){const U=Bt[T];if(U!==void 0)return tC(U)}(F),k=D.message;$===void 0&&($=ce.INTERNAL,k="Unknown error status: "+F+" with message "+D.message),y=!0,E.So(new ve($,k)),d.close()}else _e(pn,`RPC '${e}' stream ${i} received:`,v),E.bo(v)}}),_(a,hR.STAT_EVENT,b=>{b.stat===My.PROXY?_e(pn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===My.NOPROXY&&_e(pn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){return typeof window<"u"?window:null}function Ad(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n){return new eB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Lt(t.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ve(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QB extends MC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=rB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?Ft(o.readTime):Le.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Qy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=df(l)?{documents:hC(s,l)}:{query:dC(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sC(s,o.resumeToken);const u=Hy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Ya(s,o.snapshotVersion.toTimestamp());const u=Hy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=sB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Qy(this.serializer),t.removeTarget=e,this.a_(t)}}class YB extends MC{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=iB(e.writeResults,e.commitTime),r=Ft(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Qy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_c(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ve(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ky(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ce.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ky(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ce.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lt(t),this.D_=!1):_e("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ss(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Re(l);u.L_.add(4),await _l(u),u.q_.set("Unknown"),u.L_.delete(4),await Kc(u)}(this))})}),this.q_=new JB(r,i)}}async function Kc(n){if(Ss(n))for(const e of n.B_)await e(!0)}async function _l(n){for(const e of n.B_)await e(!1)}function dp(n,e){const t=Re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),gw(t)?mw(t):El(t).r_()&&pw(t,e))}function Za(n,e){const t=Re(n),r=El(t);t.N_.delete(e),r.r_()&&UC(t,e),t.N_.size===0&&(r.r_()?r.o_():Ss(t)&&t.q_.set("Unknown"))}function pw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}El(n).A_(e)}function UC(n,e){n.Q_.xe(e),El(n).R_(e)}function mw(n){n.Q_=new Y6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),El(n).start(),n.q_.v_()}function gw(n){return Ss(n)&&!El(n).n_()&&n.N_.size>0}function Ss(n){return Re(n).L_.size===0}function BC(n){n.Q_=void 0}async function ej(n){n.q_.set("Online")}async function tj(n){n.N_.forEach((e,t)=>{pw(n,e)})}async function nj(n,e){BC(n),gw(n)?(n.q_.M_(e),mw(n)):n.q_.set("Unknown")}async function rj(n,e,t){if(n.q_.set("Online"),e instanceof iC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ef(n,r)}else if(e instanceof bd?n.Q_.Ke(e):e instanceof rC?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Le.min()))try{const r=await kC(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),UC(s,l);const d=new ai(h.target,l,u,h.sequenceNumber);pw(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){_e("RemoteStore","Failed to raise snapshot:",r),await Ef(n,r)}}async function Ef(n,e,t){if(!As(e))throw e;n.L_.add(1),await _l(n),n.q_.set("Offline"),t||(t=()=>kC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_e("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Kc(n)})}function jC(n,e){return e().catch(t=>Ef(n,t,e))}async function wl(n){const e=Re(n),t=ms(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ij(e);)try{const i=await zB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,sj(e,i)}catch(i){await Ef(e,i)}zC(e)&&$C(e)}function ij(n){return Ss(n)&&n.O_.length<10}function sj(n,e){n.O_.push(e);const t=ms(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zC(n){return Ss(n)&&!ms(n).n_()&&n.O_.length>0}function $C(n){ms(n).start()}async function oj(n){ms(n).p_()}async function aj(n){const e=ms(n);for(const t of n.O_)e.m_(t.mutations)}async function lj(n,e,t){const r=n.O_.shift(),i=tw.from(r,e,t);await jC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await wl(n)}async function uj(n,e){e&&ms(n).V_&&await async function(r,i){if(function(o){return eC(o)&&o!==ce.ABORTED}(i.code)){const s=r.O_.shift();ms(r).s_(),await jC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await wl(r)}}(n,e),zC(n)&&$C(n)}async function UI(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const r=Ss(t);t.L_.add(3),await _l(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Kc(t)}async function tv(n,e){const t=Re(n);e?(t.L_.delete(2),await Kc(t)):e||(t.L_.add(2),await _l(t),t.q_.set("Unknown"))}function El(n){return n.K_||(n.K_=function(t,r,i){const s=Re(t);return s.w_(),new QB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:ej.bind(null,n),Ro:tj.bind(null,n),mo:nj.bind(null,n),d_:rj.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),gw(n)?mw(n):n.q_.set("Unknown")):(await n.K_.stop(),BC(n))})),n.K_}function ms(n){return n.U_||(n.U_=function(t,r,i){const s=Re(t);return s.w_(),new YB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oj.bind(null,n),mo:uj.bind(null,n),f_:aj.bind(null,n),g_:lj.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await wl(n)):(await n.U_.stop(),n.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new yw(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tl(n,e){if(Lt("AsyncQueue",`${e}: ${n}`),As(n))return new ve(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=mu(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new Sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Sa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.W_=new ct(Se.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class el{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new el(e,t,Sa.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hj{constructor(){this.queries=jI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Re(t),s=i.queries;i.queries=jI(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ve(ce.ABORTED,"Firestore shutting down"))}}function jI(){return new xs(n=>BR(n),zc)}async function vw(n,e){const t=Re(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new cj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Tl(o,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ww(t)}async function _w(n,e){const t=Re(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dj(n,e){const t=Re(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ww(t)}function fj(n,e,t){const r=Re(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function ww(n){n.Y_.forEach(e=>{e.next()})}var nv,zI;(zI=nv||(nv={})).ea="default",zI.Cache="cache";class Ew{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new el(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.serializer=e}Es(e){return Wr(this.serializer,e)}ds(e){return e.metadata.exists?cC(this.serializer,e.document,!1):ft.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ft(e)}}class mj{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=$e.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new $I(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Be()).add(s);t.set(o,a)}}return t}async complete(){const e=await $B(this.localStore,new $I(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await WB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function WC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.key=e}}class GC{constructor(e){this.key=e}}class HC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=zR(e),this.Ra=new Sa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new BI,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),y=$c(this.query,d)?d:null,E=!!p&&this.mutatedKeys.has(p.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;p&&y?p.data.isEqual(y.data)?E!==_&&(r.track({type:3,doc:y}),b=!0):this.ga(p,y)||(r.track({type:2,doc:y}),b=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),b=!0):p&&!y&&(r.track({type:1,doc:p}),b=!0,(l||u)&&(a=!0)),b&&(y?(o=o.add(y),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,E){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return _(y)-_(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new el(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new BI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new GC(r))}),this.da.forEach(r=>{e.has(r)||t.push(new qC(r))}),t}ba(e){this.Ta=e.Ts,this.da=Be();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return el.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yj{constructor(e){this.key=e,this.va=!1}}class vj{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xs(a=>BR(a),zc),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(Se.comparator),this.Na=new Map,this.La=new lw,this.Ba={},this.ka=new Map,this.qa=xo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _j(n,e,t=!0){const r=fp(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await KC(r,e,t,!0),i}async function wj(n,e){const t=fp(n);await KC(t,e,!0,!1)}async function KC(n,e,t,r){const i=await Xa(n.localStore,Sn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Tw(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&dp(n.remoteStore,i),a}async function Tw(n,e,t,r,i){n.Ka=(d,p,y)=>async function(_,b,m,v){let I=b.view.ma(m);I.ns&&(I=await vf(_.localStore,b.query,!1).then(({documents:k})=>b.view.ma(k,I)));const D=v&&v.targetChanges.get(b.targetId),F=v&&v.targetMismatches.get(b.targetId)!=null,$=b.view.applyChanges(I,_.isPrimaryClient,D,F);return rv(_,b.targetId,$.wa),$.snapshot}(n,d,p,y);const s=await vf(n.localStore,e,!0),o=new HC(e,s.Ts),a=o.ma(s.documents),l=Gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);rv(n,t,u.wa);const h=new gj(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function Ej(n,e,t){const r=Re(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!zc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ja(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Za(r.remoteStore,i.targetId),tl(r,i.targetId)}).catch(bs)):(tl(r,i.targetId),await Ja(r.localStore,i.targetId,!0))}async function Tj(n,e){const t=Re(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Za(t.remoteStore,r.targetId))}async function Ij(n,e,t){const r=xw(n);try{const i=await function(o,a){const l=Re(o),u=wt.now(),h=a.reduce((y,E)=>y.add(E.key),Be());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Vn(),_=Be();return l.cs.getEntries(y,h).next(b=>{E=b,E.forEach((m,v)=>{v.isValidDocument()||(_=_.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(b=>{d=b;const m=[];for(const v of a){const I=H6(v,d.get(v.key).overlayedDocument);I!=null&&m.push(new bi(v.key,I,kR(I.value.mapValue),_t.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,m,a)}).next(b=>{p=b;const m=b.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(y,b.batchId,m)})}).then(()=>({batchId:p.batchId,changes:WR(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new ct(Ue)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),await Ai(r,i.changes),await wl(r.remoteStore)}catch(i){const s=Tl(i,"Failed to persist write");t.reject(s)}}async function QC(n,e){const t=Re(n);try{const r=await jB(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Oe(o.va):i.removedDocuments.size>0&&(Oe(o.va),o.va=!1))}),await Ai(t,r,e)}catch(r){await bs(r)}}function WI(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(u=!0)}),u&&ww(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bj(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ct(Se.comparator);o=o.insert(s,ft.newNoDocument(s,Le.min()));const a=Be().add(s),l=new qc(Le.min(),new Map,new ct(Ue),o,a);await QC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Aw(r)}else await Ja(r.localStore,e,!1).then(()=>tl(r,e,t)).catch(bs)}async function Aj(n,e){const t=Re(n),r=e.batch.batchId;try{const i=await BB(t.localStore,e);bw(t,r,null),Iw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ai(t,i)}catch(i){await bs(i)}}async function xj(n,e,t){const r=Re(n);try{const i=await function(o,a){const l=Re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Oe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);bw(r,e,t),Iw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ai(r,i)}catch(i){await bs(i)}}async function Sj(n,e){const t=Re(n);Ss(t.remoteStore)||_e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Tl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Iw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function bw(n,e,t){const r=Re(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||YC(n,r)})}function YC(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Za(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Aw(n))}function rv(n,e,t){for(const r of t)r instanceof qC?(n.La.addReference(r.key,e),Rj(n,r)):r instanceof GC?(_e("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||YC(n,r.key)):Pe()}function Rj(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(_e("SyncEngine","New document in limbo: "+t),n.xa.add(r),Aw(n))}function Aw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Se($e.fromString(e)),r=n.qa.next();n.Na.set(r,new yj(t)),n.Oa=n.Oa.insert(t,r),dp(n.remoteStore,new ai(Sn(gl(t.path)),r,"TargetPurposeLimboResolution",Ln.oe))}}async function Ai(n,e,t){const r=Re(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=hw.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=Re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>oe.forEach(u,p=>oe.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(d,p.targetId,y)).next(()=>oe.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(d,p.targetId,y)))))}catch(d){if(!As(d))throw d;_e("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const y=h.os.get(p),E=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(p,_)}}}(r.localStore,s))}async function Cj(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const r=await PC(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ve(ce.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ai(t,r.hs)}}function Pj(n,e){const t=Re(n),r=t.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function kj(n,e){const t=Re(n),r=await vf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&rv(t,e.targetId,i.wa),i}async function Nj(n,e){const t=Re(n);return OC(t.localStore,e).then(r=>Ai(t,r))}async function Dj(n,e,t,r){const i=Re(n),s=await function(a,l){const u=Re(a),h=Re(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.Mn(d,l).next(p=>p?u.localDocuments.getDocuments(d,p):oe.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await wl(i.remoteStore):t==="acknowledged"||t==="rejected"?(bw(i,e,r||null),Iw(i,e),function(a,l){Re(Re(a).mutationQueue).On(l)}(i.localStore,e)):Pe(),await Ai(i,s)):_e("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Oj(n,e){const t=Re(n);if(fp(t),xw(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await qI(t,r.toArray());t.Qa=!0,await tv(t.remoteStore,!0);for(const s of i)dp(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(tl(t,o),Ja(t.localStore,o,!0))),Za(t.remoteStore,o)}),await i,await qI(t,r),function(o){const a=Re(o);a.Na.forEach((l,u)=>{Za(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new ct(Se.comparator)}(t),t.Qa=!1,await tv(t.remoteStore,!1)}}async function qI(n,e,t){const r=Re(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Xa(r.localStore,Sn(l[0]));for(const u of l){const h=r.Fa.get(u),d=await kj(r,h);d.snapshot&&s.push(d.snapshot)}}else{const u=await DC(r.localStore,o);a=await Xa(r.localStore,u),await Tw(r,XC(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function XC(n){return UR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Lj(n){return function(t){return Re(Re(t).persistence).Qi()}(Re(n).localStore)}async function Fj(n,e,t,r){const i=Re(n);if(i.Qa)return void _e("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await OC(i.localStore,jR(s[0])),a=qc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ct.EMPTY_BYTE_STRING);await Ai(i,o,a);break}case"rejected":await Ja(i.localStore,e,!0),tl(i,e,r);break;default:Pe()}}async function Vj(n,e,t){const r=fp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){_e("SyncEngine","Adding an already active target "+i);continue}const s=await DC(r.localStore,i),o=await Xa(r.localStore,s);await Tw(r,XC(s),o.targetId,!1,o.resumeToken),dp(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&await Ja(r.localStore,i,!1).then(()=>{Za(r.remoteStore,i),tl(r,i)}).catch(bs)}}function fp(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bj.bind(null,e),e.Ca.d_=dj.bind(null,e.eventManager),e.Ca.$a=fj.bind(null,e.eventManager),e}function xw(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Aj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xj.bind(null,e),e}function Mj(n,e,t){const r=Re(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,E){const _=Re(y),b=Ft(E.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",m=>_.Gr.getBundleMetadata(m,E.id)).then(m=>!!m&&m.createTime.compareTo(b)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(WC(l));const u=new mj(l,s.localStore,o.serializer);let h=await o.Ua();for(;h;){const p=await u.la(h);p&&a._updateProgress(p),h=await o.Ua()}const d=await u.complete();return await Ai(s,d.Ia,void 0),await function(y,E){const _=Re(y);return _.persistence.runTransaction("Save bundle","readwrite",b=>_.Gr.saveBundleMetadata(b,E))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return Kr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return CC(this.persistence,new RC,e.initialUser,this.serializer)}Ga(e){return new SC(hp.Zr,this.serializer)}Wa(e){return new FC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class JC extends wc{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await xw(this.Ja.syncEngine),await wl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return CC(this.persistence,new RC,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new TB(r,e.asyncQueue,t)}Ha(e,t){const r=new r6(t,this.persistence);return new n6(e.asyncQueue,r)}Ga(e){const t=cw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new uw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,VC(),Ad(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new FC}}class Uj extends JC{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Fm&&(this.sharedClientState.syncEngine={no:Dj.bind(null,t),ro:Fj.bind(null,t),io:Vj.bind(null,t),Qi:Lj.bind(null,t),eo:Nj.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await Oj(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=VC();if(!Fm.D(t))throw new ve(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ec{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cj.bind(null,this.syncEngine),await tv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hj}()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),r=function(s){return new KB(s)}(e.databaseInfo);return function(s,o,a,l){return new XB(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new ZB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>WI(this.syncEngine,t,0),function(){return MI.D()?new MI:new qB}())}createSyncEngine(e,t){return function(i,s,o,a,l,u,h){const d=new vj(i,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Re(i);_e("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await _l(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ec.provider={build:()=>new Ec};function GI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new an,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new pj(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ve(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=Re(i),a={documents:s.map(d=>vc(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,$e.emptyPath(),a,s.length),u=new Map;l.forEach(d=>{const p=nB(o.serializer,d);u.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=u.get(d.toString());Oe(!!p),h.push(p)}),h}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=Se.fromPath(r);this.mutations.push(new Z_(i,this.precondition(i)))}),await async function(r,i){const s=Re(r),o={writes:i.map(a=>_c(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,$e.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Pe();t=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ve(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new ve(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new fw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new jj(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!Bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!eC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=mR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{_e("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(_e("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Tl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mm(n,e){n.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await PC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function HI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Sw(n);_e("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UI(e.remoteStore,i)),n._onlineComponents=e}async function Sw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Kr("Error using user provided cache. Falling back to memory cache: "+t),await Mm(n,new wc)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),await Mm(n,new wc);return n._offlineComponents}async function mp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),await HI(n,n._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),await HI(n,new Ec))),n._onlineComponents}function ZC(n){return Sw(n).then(e=>e.persistence)}function Rw(n){return Sw(n).then(e=>e.localStore)}function eP(n){return mp(n).then(e=>e.remoteStore)}function Cw(n){return mp(n).then(e=>e.syncEngine)}function Wj(n){return mp(n).then(e=>e.datastore)}async function nl(n){const e=await mp(n),t=e.eventManager;return t.onListen=_j.bind(null,e.syncEngine),t.onUnlisten=Ej.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Tj.bind(null,e.syncEngine),t}function qj(n){return n.asyncQueue.enqueue(async()=>{const e=await ZC(n),t=await eP(n);return e.setNetworkEnabled(!0),function(i){const s=Re(i);return s.L_.delete(0),Kc(s)}(t)})}function Gj(n){return n.asyncQueue.enqueue(async()=>{const e=await ZC(n),t=await eP(n);return e.setNetworkEnabled(!1),async function(i){const s=Re(i);s.L_.add(0),await _l(s),s.q_.set("Offline")}(t)})}function Hj(n,e){const t=new an;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,h){const d=Re(u);return d.persistence.runTransaction("read document","readonly",p=>d.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ve(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Tl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Rw(n),e,t)),t.promise}function tP(n,e,t={}){const r=new an;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new pp({next:p=>{h.Za(),o.enqueueAndForget(()=>_w(s,d));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new ve(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?u.reject(new ve(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Ew(gl(a.path),h,{includeMetadataChanges:!0,_a:!0});return vw(s,d)}(await nl(n),n.asyncQueue,e,t,r)),r.promise}function Kj(n,e){const t=new an;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await vf(i,s,!0),l=new HC(s,a.Ts),u=l.ma(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const l=Tl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Rw(n),e,t)),t.promise}function nP(n,e,t={}){const r=new an;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new pp({next:p=>{h.Za(),o.enqueueAndForget(()=>_w(s,d)),p.fromCache&&l.source==="server"?u.reject(new ve(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new Ew(a,h,{includeMetadataChanges:!0,_a:!0});return vw(s,d)}(await nl(n),n.asyncQueue,e,t,r)),r.promise}function Qj(n,e){const t=new pp(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){Re(i).Y_.add(s),s.next()}(await nl(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){Re(i).Y_.delete(s)}(await nl(n),t))}}function Yj(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?nC().encode(o):o,function(h,d){return new Bj(h,d)}(function(h,d){if(h instanceof Uint8Array)return GI(h,d);if(h instanceof ArrayBuffer)return GI(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Hc(e));n.asyncQueue.enqueueAndForget(async()=>{Mj(await Cw(n),i,r)})}function Xj(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=Re(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Rw(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e,t){if(!t)throw new ve(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iP(n,e,t,r){if(e===!0&&r===!0)throw new ve(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QI(n){if(!Se.isDocumentKey(n))throw new ve(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YI(n){if(Se.isDocumentKey(n))throw new ve(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function Qe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gp(n);throw new ve(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sP(n,e){if(e<=0)throw new ve(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q4;switch(r.type){case"firstParty":return new Q4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=KI.get(t);r&&(_e("ComponentProvider","Removing Datastore"),KI.delete(t),r.terminate())}(this),Promise.resolve()}}function Jj(n,e,t,r={}){var i;const s=(n=Qe(n,Qc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Yt.MOCK_USER;else{a=cL(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ve(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Yt(u)}n._authCredentials=new G4(new pR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class oP{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oP(this.firestore,e,this._query)}},It=class aP{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new aP(this.firestore,e,this._key)}},ss=class lP extends Rn{constructor(e,t,r){super(e,t,gl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Se(e))}withConverter(e){return new lP(this.firestore,e,this._path)}};function kw(n,e,...t){if(n=Fe(n),Pw("collection","path",e),n instanceof Qc){const r=$e.fromString(e,...t);return YI(r),new ss(n,null,r)}{if(!(n instanceof It||n instanceof ss))throw new ve(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return YI(r),new ss(n.firestore,null,r)}}function Zj(n,e){if(n=Qe(n,Qc),Pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ve(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rn(n,null,function(r){return new Ii($e.emptyPath(),r)}(e))}function lo(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=mR.newId()),Pw("doc","path",e),n instanceof Qc){const r=$e.fromString(e,...t);return QI(r),new It(n,null,new Se(r))}{if(!(n instanceof It||n instanceof ss))throw new ve(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return QI(r),new It(n.firestore,n instanceof ss?n.converter:null,new Se(r))}}function uP(n,e){return n=Fe(n),e=Fe(e),(n instanceof It||n instanceof ss)&&(e instanceof It||e instanceof ss)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cP(n,e){return n=Fe(n),e=Fe(e),n instanceof Rn&&e instanceof Rn&&n.firestore===e.firestore&&zc(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fw(this,"async_queue_retry"),this.Vu=()=>{const r=Ad();r&&_e("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Ad();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ad();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new an;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!As(e))throw e;_e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=yw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function iv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class e5{constructor(){this._progressObserver={},this._taskCompletionResolver=new an,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=-1;let Vt=class extends Qc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new JI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JI(e),this._firestoreClient=void 0,await e}}};function wn(n){if(n._terminated)throw new ve(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hP(n),n._firestoreClient}function hP(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,u,h){return new A6(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rP(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $j(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function n5(n,e){Kr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return dP(n,Ec.provider,{build:r=>new JC(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function r5(n){Kr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();dP(n,Ec.provider,{build:t=>new Uj(t,e.cacheSizeBytes)})}function dP(n,e,t){if((n=Qe(n,Vt))._firestoreClient||n._terminated)throw new ve(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ve(ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},hP(n)}function i5(n){if(n._initialized&&!n._terminated)throw new ve(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new an;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!$r.D())return Promise.resolve();const i=r+"main";await $r.delete(i)}(cw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function s5(n){return function(t){const r=new an;return t.asyncQueue.enqueueAndForget(async()=>Sj(await Cw(t),r)),r.promise}(wn(n=Qe(n,Vt)))}function o5(n){return qj(wn(n=Qe(n,Vt)))}function a5(n){return Gj(wn(n=Qe(n,Vt)))}function l5(n,e){const t=wn(n=Qe(n,Vt)),r=new e5;return Yj(t,n._databaseId,e,r),r}function u5(n,e){return Xj(wn(n=Qe(n,Vt)),e).then(t=>t?new Rn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(Ct.fromBase64String(e))}catch(t){throw new ve(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=/^__.*__$/;class h5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class fP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class vp{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Tf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pP(this.Cu)&&c5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class d5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hc(e)}Qu(e,t,r,i=!1){return new vp({Cu:e,methodName:t,qu:r,path:vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Do(n){const e=n._freezeSettings(),t=Hc(n._databaseId);return new d5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _p(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Uw("Data must be an object, but it was:",o,r);const a=yP(r,o);let l,u;if(s.merge)l=new Fn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=sv(e,d,t);if(!o.contains(p))throw new ve(ce.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);_P(h,p)||h.push(p)}l=new Fn(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new h5(new nn(a),l,u)}class Yc extends No{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function mP(n,e,t){return new vp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dw extends No{_toFieldTransform(e){return new Wc(e.path,new Ka)}isEqual(e){return e instanceof Dw}}class Ow extends No{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.Ku.map(s=>Oo(s,t)),i=new To(r);return new Wc(e.path,i)}isEqual(e){return e instanceof Ow&&rc(this.Ku,e.Ku)}}class Lw extends No{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=mP(this,e,!0),r=this.Ku.map(s=>Oo(s,t)),i=new Io(r);return new Wc(e.path,i)}isEqual(e){return e instanceof Lw&&rc(this.Ku,e.Ku)}}class Fw extends No{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Qa(e.serializer,HR(e.serializer,this.$u));return new Wc(e.path,t)}isEqual(e){return e instanceof Fw&&this.$u===e.$u}}function Vw(n,e,t,r){const i=n.Qu(1,e,t);Uw("Data must be an object, but it was:",i,r);const s=[],o=nn.empty();ko(r,(l,u)=>{const h=Bw(e,l,t);u=Fe(u);const d=i.Nu(h);if(u instanceof Yc)s.push(h);else{const p=Oo(u,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Fn(s);return new fP(o,a,i.fieldTransforms)}function Mw(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[sv(e,r,t)],l=[i];if(s.length%2!=0)throw new ve(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(sv(e,s[p])),l.push(s[p+1]);const u=[],h=nn.empty();for(let p=a.length-1;p>=0;--p)if(!_P(u,a[p])){const y=a[p];let E=l[p];E=Fe(E);const _=o.Nu(y);if(E instanceof Yc)u.push(y);else{const b=Oo(E,_);b!=null&&(u.push(y),h.set(y,b))}}const d=new Fn(u);return new fP(h,d,o.fieldTransforms)}function gP(n,e,t,r=!1){return Oo(t,n.Qu(r?4:3,e))}function Oo(n,e){if(vP(n=Fe(n)))return Uw("Unsupported field value:",e,n),yP(n,e);if(n instanceof No)return function(r,i){if(!pP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Oo(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wt.fromDate(r);return{timestampValue:Ya(i.serializer,s)}}if(r instanceof wt){const s=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ya(i.serializer,s)}}if(r instanceof yp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:sC(i.serializer,r._byteString)};if(r instanceof It){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return J_(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${gp(r)}`)}(n,e)}function yP(n,e){const t={};return SR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{const s=Oo(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function vP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof yp||n instanceof Yr||n instanceof It||n instanceof No||n instanceof Nw)}function Uw(n,e,t){if(!vP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=gp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function sv(n,e,t){if((e=Fe(e))instanceof gs)return e._internalPath;if(typeof e=="string")return Bw(n,e);throw Tf("Field path arguments must be of type string or ",n,!1,void 0,t)}const f5=new RegExp("[~\\*/\\[\\]]");function Bw(n,e,t){if(e.search(f5)>=0)throw Tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gs(...e.split("."))._internalPath}catch{throw Tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tf(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ve(ce.INVALID_ARGUMENT,a+n+l)}function _P(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class p5 extends Tc{data(){return super.data()}}function wp(n,e){return typeof e=="string"?Bw(n,e):e instanceof gs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jw{}class Xc extends jw{}function ti(n,e,...t){let r=[];e instanceof jw&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof zw).length,a=s.filter(l=>l instanceof Ep).length;if(o>1||o>0&&a>0)throw new ve(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ep extends Xc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ep(e,t,r)}_apply(e){const t=this._parse(e);return IP(e._query,t),new Rn(e.firestore,e.converter,Gy(e._query,t))}_parse(e){const t=Do(e.firestore);return function(s,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ve(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eb(d,h);const y=[];for(const E of d)y.push(ZI(l,s,E));p={arrayValue:{values:y}}}else p=ZI(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eb(d,h),p=gP(a,o,d,h==="in"||h==="not-in");return We.create(u,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function m5(n,e,t){const r=e,i=wp("where",n);return Ep._create(i,r,t)}class zw extends jw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)IP(o,l),o=Gy(o,l)}(e._query,t),new Rn(e.firestore,e.converter,Gy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $w extends Xc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $w(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new ve(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ve(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yc(s,o)}(e._query,this._field,this._direction);return new Rn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ii(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function EP(n,e="asc"){const t=e,r=wp("orderBy",n);return $w._create(r,t)}class Tp extends Xc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Tp(e,t,r)}_apply(e){return new Rn(e.firestore,e.converter,pf(e._query,this._limit,this._limitType))}}function g5(n){return sP("limit",n),Tp._create("limit",n,"F")}function y5(n){return sP("limitToLast",n),Tp._create("limitToLast",n,"L")}class Ip extends Xc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ip(e,t,r)}_apply(e){const t=TP(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(i,s){return new Ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function v5(...n){return Ip._create("startAt",n,!0)}function _5(...n){return Ip._create("startAfter",n,!1)}class bp extends Xc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bp(e,t,r)}_apply(e){const t=TP(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(i,s){return new Ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function w5(...n){return bp._create("endBefore",n,!1)}function E5(...n){return bp._create("endAt",n,!0)}function TP(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof Tc)return function(s,o,a,l,u){if(!l)throw new ve(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of xa(s))if(d.field.isKeyField())h.push(wo(o,l.key));else{const p=l.data.field(d.field);if(sp(p))throw new ve(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=d.field.canonicalString();throw new ve(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new ps(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Do(n.firestore);return function(o,a,l,u,h,d){const p=o.explicitOrderBy;if(h.length>p.length)throw new ve(ce.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<h.length;E++){const _=h[E];if(p[E].field.isKeyField()){if(typeof _!="string")throw new ve(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!Y_(o)&&_.indexOf("/")!==-1)throw new ve(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const b=o.path.child($e.fromString(_));if(!Se.isDocumentKey(b))throw new ve(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const m=new Se(b);y.push(wo(a,m))}else{const b=gP(l,u,_);y.push(b)}}return new ps(y,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZI(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new ve(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&t.indexOf("/")!==-1)throw new ve(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!Se.isDocumentKey(r))throw new ve(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wo(n,new Se(r))}if(t instanceof It)return wo(n,t._key);throw new ve(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(t)}.`)}function eb(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IP(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ve(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ww{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ko(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>gt(o.doubleValue));return new Nw(s)}convertGeoPoint(e){return new yp(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=K_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const t=vi(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);Oe(gC(r));const i=new ds(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||Lt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T5 extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _i=class extends Tc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Lu=class extends _i{data(e={}){return super.data(e)}},ys=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Js(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lu(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:I5(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function I5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function bP(n,e){return n instanceof _i&&e instanceof _i?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ys&&e instanceof ys&&n._firestore===e._firestore&&cP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){n=Qe(n,It);const e=Qe(n.firestore,Vt);return tP(wn(e),n._key).then(t=>qw(e,n,t))}class Lo extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function b5(n){n=Qe(n,It);const e=Qe(n.firestore,Vt),t=wn(e),r=new Lo(e);return Hj(t,n._key).then(i=>new _i(e,r,n._key,i,new Js(i!==null&&i.hasLocalMutations,!0),n.converter))}function A5(n){n=Qe(n,It);const e=Qe(n.firestore,Vt);return tP(wn(e),n._key,{source:"server"}).then(t=>qw(e,n,t))}function xP(n){n=Qe(n,Rn);const e=Qe(n.firestore,Vt),t=wn(e),r=new Lo(e);return wP(n._query),nP(t,n._query).then(i=>new ys(e,r,n,i))}function x5(n){n=Qe(n,Rn);const e=Qe(n.firestore,Vt),t=wn(e),r=new Lo(e);return Kj(t,n._query).then(i=>new ys(e,r,n,i))}function S5(n){n=Qe(n,Rn);const e=Qe(n.firestore,Vt),t=wn(e),r=new Lo(e);return nP(t,n._query,{source:"server"}).then(i=>new ys(e,r,n,i))}function tb(n,e,t){n=Qe(n,It);const r=Qe(n.firestore,Vt),i=Ap(n.converter,e,t);return Jc(r,[_p(Do(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_t.none())])}function ov(n,e,t,...r){n=Qe(n,It);const i=Qe(n.firestore,Vt),s=Do(i);let o;return o=typeof(e=Fe(e))=="string"||e instanceof gs?Mw(s,"updateDoc",n._key,e,t,r):Vw(s,"updateDoc",n._key,e),Jc(i,[o.toMutation(n._key,_t.exists(!0))])}function SP(n){return Jc(Qe(n.firestore,Vt),[new vl(n._key,_t.none())])}function RP(n,e){const t=Qe(n.firestore,Vt),r=lo(n),i=Ap(n.converter,e);return Jc(t,[_p(Do(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function CP(n,...e){var t,r,i;n=Fe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iv(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,h;if(n instanceof It)u=Qe(n.firestore,Vt),h=gl(n._key.path),l={next:d=>{e[o]&&e[o](qw(u,n,d))},error:e[o+1],complete:e[o+2]};else{const d=Qe(n,Rn);u=Qe(d.firestore,Vt),h=d._query;const p=new Lo(u);l={next:y=>{e[o]&&e[o](new ys(u,p,d,y))},error:e[o+1],complete:e[o+2]},wP(n._query)}return function(p,y,E,_){const b=new pp(_),m=new Ew(y,b,E);return p.asyncQueue.enqueueAndForget(async()=>vw(await nl(p),m)),()=>{b.Za(),p.asyncQueue.enqueueAndForget(async()=>_w(await nl(p),m))}}(wn(u),h,a,l)}function R5(n,e){return Qj(wn(n=Qe(n,Vt)),iv(e)?e:{next:e})}function Jc(n,e){return function(r,i){const s=new an;return r.asyncQueue.enqueueAndForget(async()=>Ij(await Cw(r),i,s)),s.promise}(wn(n),e)}function qw(n,e,t){const r=t.docs.get(e._key),i=new Lo(n);return new _i(n,i,e._key,r,new Js(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P5=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Do(e)}set(e,t,r){this._verifyNotCommitted();const i=Wi(e,this._firestore),s=Ap(i.converter,t,r),o=_p(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,_t.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Wi(e,this._firestore);let o;return o=typeof(t=Fe(t))=="string"||t instanceof gs?Mw(this._dataReader,"WriteBatch.update",s._key,t,r,i):Vw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wi(e,this._firestore);return this._mutations=this._mutations.concat(new vl(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Wi(n,e){if((n=Fe(n)).firestore!==e)throw new ve(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k5=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Do(t)}get(t){const r=Wi(t,this._firestore),i=new T5(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Pe();const o=s[0];if(o.isFoundDocument())return new Tc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Tc(this._firestore,i,r._key,null,r.converter);throw Pe()})}set(t,r,i){const s=Wi(t,this._firestore),o=Ap(s.converter,r,i),a=_p(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Wi(t,this._firestore);let a;return a=typeof(r=Fe(r))=="string"||r instanceof gs?Mw(this._dataReader,"Transaction.update",o._key,r,i,s):Vw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Wi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wi(e,this._firestore),r=new Lo(this._firestore);return super.get(e).then(i=>new _i(this._firestore,r,t._key,i._document,new Js(!1,!1),t.converter))}};function N5(n,e,t){n=Qe(n,Vt);const r=Object.assign(Object.assign({},C5),t);return function(s){if(s.maxAttempts<1)throw new ve(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new an;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Wj(s);new zj(s.asyncQueue,u,a,o,l).au()}),l.promise}(wn(n),i=>e(new k5(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(){return new Yc("deleteField")}function O5(){return new Dw("serverTimestamp")}function L5(...n){return new Ow("arrayUnion",n)}function F5(...n){return new Lw("arrayRemove",n)}function V5(n){return new Fw("increment",n)}(function(e,t=!0){(function(i){ml=i})(Ar),qr(new cr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Vt(new H4(r.getProvider("auth-internal")),new X4(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ve(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ds(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qn(qT,"4.7.3",e),Qn(qT,"4.7.3","esm2017")})();const M5="@firebase/firestore-compat",U5="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){if(typeof Uint8Array>"u")throw new ve("unimplemented","Uint8Arrays are not available in this environment.")}function rb(){if(!I6())throw new ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}let PP=class av{constructor(e){this._delegate=e}static fromBase64String(e){return rb(),new av(Yr.fromBase64String(e))}static fromUint8Array(e){return nb(),new av(Yr.fromUint8Array(e))}toBase64(){return rb(),this._delegate.toBase64()}toUint8Array(){return nb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n){return B5(n,["next","error","complete"])}function B5(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{enableIndexedDbPersistence(e,t){return n5(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return r5(e._delegate)}clearIndexedDbPersistence(e){return i5(e._delegate)}}class kP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ds||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Kr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Jj(this._delegate,e,t,r)}enableNetwork(){return o5(this._delegate)}disableNetwork(){return a5(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return s5(this._delegate)}onSnapshotsInSync(e){return R5(this._delegate,e)}get app(){if(!this._appCompat)throw new ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rl(this,kw(this._delegate,e))}catch(t){throw bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new sr(this,lo(this._delegate,e))}catch(t){throw bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new In(this,Zj(this._delegate,e))}catch(t){throw bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return N5(this._delegate,t=>e(new NP(this,t)))}batch(){return wn(this._delegate),new DP(new P5(this._delegate,e=>Jc(this._delegate,e)))}loadBundle(e){return l5(this._delegate,e)}namedQuery(e){return u5(this._delegate,e).then(t=>t?new In(this,t):null)}}class xp extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new PP(new Yr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sr.forKey(t,this.firestore,null)}}function z5(n){$4(n)}class NP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xp(e)}get(e){const t=Zs(e);return this._delegate.get(t).then(r=>new Ic(this._firestore,new _i(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Zs(e);return r?(Gw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Zs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Zs(e);return this._delegate.delete(t),this}}class DP{constructor(e){this._delegate=e}set(e,t,r){const i=Zs(e);return r?(Gw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Zs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Zs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class So{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Lu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=So.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new So(e,new xp(e),t),i.set(t,s)),s}}So.INSTANCES=new WeakMap;class sr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sr(t,new It(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new sr(t,new It(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rl(this.firestore,kw(this._delegate,e))}catch(t){throw bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof It?uP(this._delegate,e):!1}set(e,t){t=Gw("DocumentReference.set",t);try{return t?tb(this._delegate,e,t):tb(this._delegate,e)}catch(r){throw bn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?ov(this._delegate,e):ov(this._delegate,e,t,...r)}catch(i){throw bn(i,"updateDoc()","DocumentReference.update()")}}delete(){return SP(this._delegate)}onSnapshot(...e){const t=OP(e),r=LP(e,i=>new Ic(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CP(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=b5(this._delegate):(e==null?void 0:e.source)==="server"?t=A5(this._delegate):t=AP(this._delegate),t.then(r=>new Ic(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sr(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bn(n,e,t){return n.message=n.message.replace(e,t),n}function OP(n){for(const e of n)if(typeof e=="object"&&!lv(e))return e;return{}}function LP(n,e){var t,r;let i;return lv(n[0])?i=n[0]:lv(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Ic{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bP(this._delegate,e._delegate)}}class bc extends Ic{data(e){const t=this._delegate.data(e);return this._delegate._converter||W4(t!==void 0),t}}class In{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xp(e)}where(e,t,r){try{return new In(this.firestore,ti(this._delegate,m5(e,t,r)))}catch(i){throw bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new In(this.firestore,ti(this._delegate,EP(e,t)))}catch(r){throw bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new In(this.firestore,ti(this._delegate,g5(e)))}catch(t){throw bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new In(this.firestore,ti(this._delegate,y5(e)))}catch(t){throw bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new In(this.firestore,ti(this._delegate,v5(...e)))}catch(t){throw bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new In(this.firestore,ti(this._delegate,_5(...e)))}catch(t){throw bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new In(this.firestore,ti(this._delegate,w5(...e)))}catch(t){throw bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new In(this.firestore,ti(this._delegate,E5(...e)))}catch(t){throw bn(t,"endAt()","Query.endAt()")}}isEqual(e){return cP(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=x5(this._delegate):(e==null?void 0:e.source)==="server"?t=S5(this._delegate):t=xP(this._delegate),t.then(r=>new uv(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OP(e),r=LP(e,i=>new uv(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CP(this._delegate,t,r)}withConverter(e){return new In(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class $5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new In(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bc(this._firestore,r))})}isEqual(e){return bP(this._delegate,e._delegate)}}class rl extends In{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sr(this.firestore,e):null}doc(e){try{return e===void 0?new sr(this.firestore,lo(this._delegate)):new sr(this.firestore,lo(this._delegate,e))}catch(t){throw bn(t,"doc()","CollectionReference.doc()")}}add(e){return RP(this._delegate,e).then(t=>new sr(this.firestore,t))}isEqual(e){return uP(this._delegate,e._delegate)}withConverter(e){return new rl(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zs(n){return Qe(n,It)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(...e){this._delegate=new gs(...e)}static documentId(){return new Hw(vt.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof gs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=O5();return e._methodName="FieldValue.serverTimestamp",new Hs(e)}static delete(){const e=D5();return e._methodName="FieldValue.delete",new Hs(e)}static arrayUnion(...e){const t=L5(...e);return t._methodName="FieldValue.arrayUnion",new Hs(t)}static arrayRemove(...e){const t=F5(...e);return t._methodName="FieldValue.arrayRemove",new Hs(t)}static increment(e){const t=V5(e);return t._methodName="FieldValue.increment",new Hs(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5={Firestore:kP,GeoPoint:yp,Timestamp:wt,Blob:PP,Transaction:NP,WriteBatch:DP,DocumentReference:sr,DocumentSnapshot:Ic,Query:In,QueryDocumentSnapshot:bc,QuerySnapshot:uv,CollectionReference:rl,FieldPath:Hw,FieldValue:Hs,setLogLevel:z5,CACHE_SIZE_UNLIMITED:t5};function q5(n,e){n.INTERNAL.registerComponent(new cr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},W5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(n){q5(n,(e,t)=>new kP(e,t,new j5)),n.registerVersion(M5,U5)}G5(Gr);if(window.firebase&&Gr.apps.length)console.log(" Reutilizando instncia Firebase do portal existente");else{const n={apiKey:"AIzaSyBcQi5nToMOGVDBWprhhOY0NSJX4qE100w",authDomain:"portal-relevo.firebaseapp.com",projectId:"portal-relevo",storageBucket:"portal-relevo.firebasestorage.app",messagingSenderId:"182759626683",appId:"1:182759626683:web:2dde2eeef910d4c288569e",measurementId:"G-W8TTP3D3YQ"};Gr.initializeApp(n)}Gr.app();const ib=Gr.auth(),xd=Gr.firestore(),sb=kw(xd,"orcamentos");function ob(n){var D;const e=F=>isNaN(F)||F===null||F===void 0?0:Number(F),t=(n.coordenacao||[]).reduce((F,$)=>{const k=e($.dias)/30;return F+k*e($.prolabore)*e($.quant)},0),r=(n.profissionais||[]).reduce((F,$)=>{const k=e($.dias)/30;return F+k*e($.prolabore)*e($.pessoas)},0),i=(n.valoresUnicos||[]).reduce((F,$)=>F+e($.valor)*e($.pessoas)*e($.dias),0),s=(n.logistica||[]).reduce((F,$)=>F+e($.valor)*e($.qtd)*e($.dias),0),o=t+r+i+s,a=n.parametros||{},l=o*e(a.encargosPessoal),u=o*e(a.lucro),h=o*e(a.fundoGiro),d=o*e(a.comissaoCaptacao),p=o*e(a.despesasFiscais),y=l+u+h+d+p,E=o+y,_=E*e(a.imposto),b=E+_,m=e((D=n==null?void 0:n.metadata)==null?void 0:D.desconto)/100,v=b*m,I=b-v;return{categorias:{coordenacao:t,profissionais:r,valoresUnicos:i,logistica:s},subtotalGeral:o,encargosPessoal:l,lucro:u,fundoGiro:h,comissaoCaptacao:d,despesasFiscais:p,impostos:_,totalIndiretos:y,totalBase:E,totalAntesDesconto:b,desconto:v,totalGeral:I}}const tu={async criarOrcamento(n){var e;try{console.log(" Iniciando salvamento no Firebase...");const t=ob(n),r={...n,totais:t,criadoEm:new Date,atualizadoEm:new Date,versao:((e=n.metadata)==null?void 0:e.versao)||1},i=await RP(sb,r);return console.log(" NOVO ORAMENTO SALVO com ID REAL:",i.id),i.id}catch(t){throw console.error(" Erro crtico ao criar oramento:",t),new Error(`Falha ao salvar oramento: ${t.message}`)}},async listarOrcamentos(){try{console.log(" Buscando oramentos no Firebase...");const n=ti(sb,EP("atualizadoEm","desc")),t=(await xP(n)).docs.map(r=>{const i=r.data();return{id:r.id,metadata:i.metadata||{},totais:i.totais||{},coordenacao:i.coordenacao||[],profissionais:i.profissionais||[],valoresUnicos:i.valoresUnicos||[],logistica:i.logistica||[],parametros:i.parametros||{},criadoEm:i.criadoEm,atualizadoEm:i.atualizadoEm}});return console.log(` ${t.length} documentos carregados.`),t}catch(n){throw console.error("Erro ao listar oramentos:",n),new Error(`Falha ao carregar oramentos: ${n.message}`)}},async buscarOrcamento(n){try{console.log(" Buscando oramento:",n);const e=lo(xd,"orcamentos",n),t=await AP(e);return t.exists()?(console.log(" Oramento encontrado"),{id:t.id,...t.data()}):(console.log(" Oramento no encontrado no Firebase"),null)}catch(e){throw console.error("Erro ao buscar oramento:",e),new Error(`Falha ao carregar oramento: ${e.message}`)}},async atualizarOrcamento(n,e){try{console.log(" Atualizando oramento:",n);const t=ob(e),r=lo(xd,"orcamentos",n);await ov(r,{...e,totais:t,atualizadoEm:new Date}),console.log(" Oramento atualizado com sucesso!")}catch(t){throw console.error("Erro ao atualizar oramento:",t),new Error(`Falha ao atualizar oramento: ${t.message}`)}},async excluirOrcamento(n){try{console.log(" Excluindo oramento:",n);const e=lo(xd,"orcamentos",n);await SP(e),console.log(" Oramento excludo com sucesso")}catch(e){throw console.error("Erro ao excluir oramento:",e),new Error(`Falha ao excluir oramento: ${e.message}`)}}},Ne={required:(n,e="Campo")=>n==null||n===""?`${e}  obrigatrio`:null,number:(n,e="Campo")=>n==null||n===""?null:isNaN(Number(n))?`${e} deve ser um nmero vlido`:null,minValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)<e?`${t} deve ser maior ou igual a ${e}`:null,maxValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)>e?`${t} deve ser menor ou igual a ${e}`:null,range:(n,e,t,r="Campo")=>{if(n==null||n==="")return null;const i=Number(n);return i<e||i>t?`${r} deve estar entre ${e} e ${t}`:null},metadata:{nome:n=>{const e=Ne.required(n,"Nome do oramento");return e||(n.length<3?"Nome do oramento deve ter pelo menos 3 caracteres":n.length>100?"Nome do oramento deve ter no mximo 100 caracteres":null)},cliente:n=>{const e=Ne.required(n,"Cliente");return e||(n.length<2?"Nome do cliente deve ter pelo menos 2 caracteres":null)},data:n=>Ne.required(n,"Data"),desconto:n=>{const e=Ne.number(n,"Desconto");return e||Ne.range(n,0,100,"Desconto")}},parametros:{imposto:n=>Ne.range(n,0,1,"Imposto"),lucro:n=>Ne.range(n,0,1,"Lucro"),fundoGiro:n=>Ne.range(n,0,1,"Fundo de Giro"),encargosPessoal:n=>Ne.range(n,0,1,"Encargos de Pessoal"),despesasFiscais:n=>Ne.range(n,0,1,"Despesas Fiscais"),comissaoCaptacao:n=>Ne.range(n,0,1,"Comisso de Captao")},coordenacao:{quant:n=>Ne.minValue(n,0,"Quantidade"),dias:n=>Ne.minValue(n,0,"Dias"),prolabore:n=>Ne.minValue(n,0,"Prolabore")},profissionais:{pessoas:n=>Ne.minValue(n,0,"Nmero de pessoas"),dias:n=>Ne.minValue(n,0,"Dias de trabalho"),prolabore:n=>Ne.minValue(n,0,"Prolabore")},valoresUnicos:{valor:n=>Ne.minValue(n,0,"Valor"),pessoas:n=>Ne.minValue(n,0,"Nmero de pessoas"),dias:n=>Ne.minValue(n,0,"Dias")},logistica:{valor:n=>Ne.minValue(n,0,"Valor"),qtd:n=>Ne.minValue(n,0,"Quantidade"),dias:n=>Ne.minValue(n,0,"Dias")}},H5=n=>{const e=[];if(n.metadata){const t=FP(n.metadata);e.push(...t)}if(n.parametros){const t=VP(n.parametros);e.push(...t)}if(n.coordenacao){const t=MP(n.coordenacao);e.push(...t)}if(n.profissionais){const t=UP(n.profissionais);e.push(...t)}if(n.valoresUnicos){const t=BP(n.valoresUnicos);e.push(...t)}if(n.logistica){const t=jP(n.logistica);e.push(...t)}return e},FP=n=>{const e=[];if(!n)return["Metadata no encontrada"];const t=Ne.metadata.nome(n.nome);t&&e.push(t);const r=Ne.metadata.cliente(n.cliente);r&&e.push(r);const i=Ne.metadata.data(n.data);i&&e.push(i);const s=Ne.metadata.desconto(n.desconto);return s&&e.push(s),e},VP=n=>{const e=[];return n?(Object.keys(n).forEach(t=>{if(Ne.parametros[t]){const r=Ne.parametros[t](n[t]);r&&e.push(r)}}),e):["Parmetros no encontrados"]},MP=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de coordenao invlidos"]:(n.forEach((t,r)=>{const i=`Coordenador ${r+1} (${t.cargo}):`,s=Ne.coordenacao.quant(t.quant);s&&e.push(`${i} ${s}`);const o=Ne.coordenacao.dias(t.dias);o&&e.push(`${i} ${o}`);const a=Ne.coordenacao.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},UP=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de profissionais invlidos"]:(n.forEach((t,r)=>{const i=`Profissional ${r+1} (${t.cargo}):`,s=Ne.profissionais.pessoas(t.pessoas);s&&e.push(`${i} ${s}`);const o=Ne.profissionais.dias(t.dias);o&&e.push(`${i} ${o}`);const a=Ne.profissionais.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},BP=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de valores nicos invlidos"]:(n.forEach((t,r)=>{const i=`Valor nico ${r+1} (${t.item}):`,s=Ne.valoresUnicos.valor(t.valor);s&&e.push(`${i} ${s}`);const o=Ne.valoresUnicos.pessoas(t.pessoas);o&&e.push(`${i} ${o}`);const a=Ne.valoresUnicos.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},jP=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de logstica invlidos"]:(n.forEach((t,r)=>{const i=`Logstica ${r+1} (${t.item}):`,s=Ne.logistica.valor(t.valor);s&&e.push(`${i} ${s}`);const o=Ne.logistica.qtd(t.qtd);o&&e.push(`${i} ${o}`);const a=Ne.logistica.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},K5=n=>{const e=H5(n);return{valido:e.length===0,errors:e}},Qo=typeof window<"u"?window.relevoUser||(window.firebase?window.firebase.auth().currentUser:null):null,zP=St.createContext(),Fu={metadata:{nome:"",cliente:"",data:new Date().toISOString().split("T")[0],versao:"1.0",desconto:0},parametros:{imposto:.07,lucro:.05,fundoGiro:.05,encargosPessoal:.1,despesasFiscais:.03,comissaoCaptacao:.03},coordenacao:[{id:1,cargo:"Coordenador Geral",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:2,cargo:"Coordenador Tcnico",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:3,cargo:"Coordenador de Campo",profissional:"Pleno",prolabore:2e3,quant:0,dias:30}],profissionais:[{id:1,cargo:"Gelogo I",prolabore:1e4,pessoas:0,dias:1},{id:2,cargo:"Gelogo II",prolabore:9e3,pessoas:0,dias:1},{id:3,cargo:"Geofsico",prolabore:11e3,pessoas:0,dias:1},{id:4,cargo:"Bilogo-Invertebrado",prolabore:9e3,pessoas:0,dias:1},{id:5,cargo:"Bilogo-vertebrado",prolabore:9e3,pessoas:0,dias:1},{id:6,cargo:"Bilogo-geral",prolabore:9500,pessoas:0,dias:1},{id:7,cargo:"Arquelogo",prolabore:9500,pessoas:0,dias:1},{id:8,cargo:"Socilogo",prolabore:9500,pessoas:0,dias:1},{id:9,cargo:"Paleontlogo",prolabore:9500,pessoas:0,dias:1},{id:10,cargo:"Engenheiro florestal",prolabore:9e3,pessoas:0,dias:1},{id:11,cargo:"Geoprocessamento",prolabore:9e3,pessoas:0,dias:1},{id:12,cargo:"Auxiliar de campo",prolabore:9e3,pessoas:0,dias:1},{id:13,cargo:"Administrador",prolabore:7e3,pessoas:0,dias:1},{id:14,cargo:"Croquista/topgrafo",prolabore:9e3,pessoas:0,dias:1}],valoresUnicos:[{id:1,item:"ARTs/RRTs",valor:300,pessoas:1,dias:1},{id:2,item:"Relatrios Tcnicos",valor:8e3,pessoas:1,dias:1},{id:3,item:"Digitalizao/Documentao",valor:50,pessoas:0,dias:1},{id:4,item:"Amostras/Anlises Laboratoriais",valor:500,pessoas:0,dias:1}],logistica:[{id:1,item:"Alimentao",valor:100,unidade:"dia/pessoa",qtd:0,dias:1},{id:2,item:"Hospedagem",valor:170,unidade:"dia/pessoa",qtd:0,dias:1},{id:3,item:"Lavanderia",valor:150,unidade:"dia/pessoa",qtd:0,dias:1},{id:4,item:"Exame mdico",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:5,item:"Seguro de Vida",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:6,item:"Combustvel",valor:8,unidade:"dia/veculo",qtd:0,dias:1},{id:7,item:"Manuteno veculo",valor:100,unidade:"ms/veculo",qtd:0,dias:1},{id:8,item:"Veculo",valor:500,unidade:"dia",qtd:0,dias:1},{id:9,item:"Pedagios",valor:50,unidade:"dia/veculo",qtd:0,dias:1},{id:10,item:"Passagens areas",valor:1e3,unidade:"pessoa",qtd:0,dias:1},{id:11,item:"Passagens Terrestres",valor:250,unidade:"pessoa",qtd:0,dias:1},{id:12,item:"EPI",valor:500,unidade:"pessoa",qtd:0,dias:1},{id:13,item:"Aluguel de drone",valor:300,unidade:"dia",qtd:0,dias:1},{id:14,item:"Material de escritrio",valor:1e3,unidade:"lote",qtd:0,dias:1},{id:15,item:"Material de expediente",valor:800,unidade:"lote",qtd:0,dias:1}]};function Q5(n,e){switch(e.type){case"UPDATE_METADATA":return{...n,metadata:{...n.metadata,...e.payload}};case"UPDATE_PARAMETROS":return{...n,parametros:{...n.parametros,...e.payload}};case"UPDATE_COORDENACAO":{const t=n.coordenacao.map(r=>r.id===e.payload.id?{...r,...e.payload.updates}:r);return{...n,coordenacao:t}}case"UPDATE_PROFISSIONAIS":{if(!n.profissionais.find(i=>i.id===e.payload.id))return{...n,profissionais:[...n.profissionais,{id:e.payload.id,...e.payload.updates}]};const r=n.profissionais.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,profissionais:r}}case"UPDATE_VALORES_UNICOS":{if(!n.valoresUnicos.find(i=>i.id===e.payload.id))return{...n,valoresUnicos:[...n.valoresUnicos,{id:e.payload.id,...e.payload.updates}]};const r=n.valoresUnicos.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,valoresUnicos:r}}case"UPDATE_LOGISTICA":{if(!n.logistica.find(i=>i.id===e.payload.id))return{...n,logistica:[...n.logistica,{id:e.payload.id,...e.payload.updates}]};const r=n.logistica.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,logistica:r}}case"CARREGAR_ORCAMENTO":return{...e.payload,metadata:{...Fu.metadata,...e.payload.metadata}};case"RESET_ORCAMENTO":return Fu;default:return n}}const ab=n=>{var F;const e=$=>isNaN($)||$===null||$===void 0?0:Number($),t=n.coordenacao.reduce(($,k)=>{const N=e(k.dias)/30;return $+N*e(k.prolabore)*e(k.quant)},0),r=n.profissionais.reduce(($,k)=>{const N=e(k.dias)/30;return $+N*e(k.prolabore)*e(k.pessoas)},0),i=n.valoresUnicos.reduce(($,k)=>$+e(k.valor)*e(k.pessoas)*e(k.dias),0),s=n.logistica.reduce(($,k)=>$+e(k.valor)*e(k.qtd)*e(k.dias),0),o=t+r+i+s,a=n.parametros||{},l=o*e(a.encargosPessoal),u=o*e(a.fundoGiro),h=o*e(a.lucro),d=o*e(a.despesasFiscais),p=o*e(a.comissaoCaptacao),y=l+u+h+d+p,_=(o+y)*e(a.imposto),b=o+y,m=b+_,v=e((F=n.metadata)==null?void 0:F.desconto)/100,I=m*v,D=m-I;return{subtotalCoordenacao:t,subtotalProfissionais:r,subtotalValoresUnicos:i,subtotalLogistica:s,subtotalGeral:o,encargosPessoal:l,fundoGiro:u,lucro:h,despesasFiscais:d,comissaoCaptacao:p,custoTotal:b,impostos:_,totalAntesDesconto:m,desconto:I,totalGeral:D}},Y5=({children:n})=>{const[e,t]=St.useReducer(Q5,Fu),[r,i]=St.useState(!1),[s,o]=St.useState(null),[a,l]=St.useState([]),u=(D,F,$,k=null)=>{let N=[];switch(D){case"metadata":N=FP({[F]:$});break;case"parametros":N=VP({[F]:$});break;case"coordenacao":{const T=e.coordenacao.find(U=>U.id===k);if(T){const U={...T,[F]:$};N=MP([U])}break}case"profissionais":{const T=e.profissionais.find(U=>U.id===k);if(T){const U={...T,[F]:$};N=UP([U])}break}case"valoresUnicos":{const T=e.valoresUnicos.find(U=>U.id===k);if(T){const U={...T,[F]:$};N=BP([U])}break}case"logistica":{const T=e.logistica.find(U=>U.id===k);if(T){const U={...T,[F]:$};N=jP([U])}break}}return N},h=()=>{const D=K5(e);return l(D.errors),D},d=()=>{l([])},p=D=>{const F={...D,parametros:{...Fu.parametros,...D.parametros||{}},metadata:{...Fu.metadata,...D.metadata||{}},coordenacao:D.coordenacao||[],profissionais:D.profissionais||[],valoresUnicos:D.valoresUnicos||[],logistica:D.logistica||[]},$=ab(F);return{subtotalCoordenacao:$.subtotalCoordenacao,subtotalProfissionais:$.subtotalProfissionais,subtotalValoresUnicos:$.subtotalValoresUnicos,subtotalLogistica:$.subtotalLogistica,subtotalGeral:$.subtotalGeral,encargosPessoal:$.encargosPessoal,fundoGiro:$.fundoGiro,lucro:$.lucro,despesasFiscais:$.despesasFiscais,comissaoCaptacao:$.comissaoCaptacao,custoTotal:$.custoTotal,impostos:$.impostos,totalAntesDesconto:$.totalAntesDesconto,desconto:$.desconto,totalGeral:$.totalGeral,calculadoEm:new Date().toISOString(),versaoCalculo:"2.0"}},y=async(D=e)=>{var $,k,N,T,U;if(!h().valido)throw o("No  possvel salvar o oramento. Corrija os erros de validao primeiro."),new Error("Validao falhou");i(!0),o(null);try{const G=D.id||`orc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,O=p(D),V=JSON.parse(JSON.stringify({...D,id:G,resumo:O,coordenacao:(($=D.coordenacao)==null?void 0:$.map(re=>({...re})))||[],profissionais:((k=D.profissionais)==null?void 0:k.map(re=>({...re})))||[],valoresUnicos:((N=D.valoresUnicos)==null?void 0:N.map(re=>({...re})))||[],logistica:((T=D.logistica)==null?void 0:T.map(re=>({...re})))||[],metadata:{...D.metadata,criadoEm:((U=D.metadata)==null?void 0:U.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString(),criadoPor:(Qo==null?void 0:Qo.uid)||null,versao:"2.0"}}));console.log(" Salvando oramento com ID nico:",G),console.log(" RESUMO includo:",O);const L=await tu.criarOrcamento(V);return console.log(" Oramento salvo com ID nico:",L),i(!1),L}catch(G){throw console.error(" Erro ao salvar oramento:",G),o(G.message),i(!1),G}},E=async D=>{i(!0),o(null),l([]);try{console.log(" INICIANDO carregamento do oramento ID:",D);const F=await tu.buscarOrcamento(D);return console.log(" Dados recebidos do Firebase:",F),F?(t({type:"CARREGAR_ORCAMENTO",payload:F}),console.log(" Estado atualizado com oramento carregado.")):console.warn(" Oramento NULO recebido do Firebase"),i(!1),F}catch(F){throw console.error(" Erro ao carregar oramento:",F),o(F.message),i(!1),F}},_=async(D,F)=>{i(!0),o(null);try{await tu.atualizarOrcamento(D,F),i(!1)}catch($){throw o($.message),i(!1),$}},b=async D=>{i(!0),o(null);try{await tu.excluirOrcamento(D),i(!1)}catch(F){throw o(F.message),i(!1),F}},m=async()=>{i(!0),o(null);try{const D=await tu.listarOrcamentos(),F=(Qo==null?void 0:Qo.uid)||null,$=F?D.filter(k=>{var N;return((N=k.metadata)==null?void 0:N.criadoPor)===F}):D;return console.log(` ${$.length} oramentos retornados (uid: ${F||"sem filtro"})`),console.log(" IDs nicos dos oramentos:",$.map(k=>k.id)),i(!1),$}catch(D){throw o(D.message),i(!1),D}},v=()=>o(null),I={orcamentoAtual:e,dispatch:t,carregando:r,erro:s,errosValidacao:a,totais:ab(e),salvarOrcamento:y,carregarOrcamento:E,listarOrcamentos:m,atualizarOrcamento:_,excluirOrcamento:b,validarCampo:u,validarOrcamentoAtual:h,limparErrosValidacao:d,limparErro:v};return M.jsx(zP.Provider,{value:I,children:n})},xi=()=>{const n=St.useContext(zP);if(!n)throw new Error("useOrcamento deve ser usado dentro de OrcamentoProvider");return n};function $P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X5=$P,WP=new Xr("auth","Firebase",$P());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new kc("@firebase/auth");function J5(n,...e){If.logLevel<=je.WARN&&If.warn(`Auth (${Ar}): ${n}`,...e)}function Sd(n,...e){If.logLevel<=je.ERROR&&If.error(`Auth (${Ar}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n,...e){throw Kw(n,...e)}function qP(n,...e){return Kw(n,...e)}function GP(n,e,t){const r=Object.assign(Object.assign({},X5()),{[e]:t});return new Xr("auth","Firebase",r).create(e,{appName:n.name})}function Rd(n){return GP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return WP.create(n,...e)}function Xe(n,e,...t){if(!n)throw Kw(e,...t)}function Vu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sd(e),new Error(e)}function bf(n,e){n||Vu(e)}function Z5(){return ub()==="http:"||ub()==="https:"}function ub(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z5()||v_()||"connection"in navigator)?navigator.onLine:!0}function t3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,bf(t>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Gf()}get(){return e3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n,e){bf(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new Zc(3e4,6e4);function KP(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Sp(n,e,t,r,i={}){return QP(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ts(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return Qx()||(u.referrerPolicy="no-referrer"),HP.fetch()(YP(n,n.config.apiHost,t,a),u)})}async function QP(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},r3),e);try{const i=new s3(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $h(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $h(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw $h(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw GP(n,h,u);lb(n,h)}}catch(i){if(i instanceof on)throw i;lb(n,"network-request-failed",{message:String(i)})}}function YP(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?n3(n.config,i):`${n.config.apiScheme}://${i}`}class s3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qP(this.auth,"network-request-failed")),i3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $h(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=qP(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(n,e){return Sp(n,"POST","/v1/accounts:delete",e)}async function XP(n,e){return Sp(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a3(n,e=!1){const t=Fe(n),r=await t.getIdToken(e),i=JP(r);Xe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Mu(Um(i.auth_time)),issuedAtTime:Mu(Um(i.iat)),expirationTime:Mu(Um(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Um(n){return Number(n)*1e3}function JP(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const i=m_(t);return i?JSON.parse(i):(Sd("Failed to decode base64 JWT payload"),null)}catch(i){return Sd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cb(n){const e=JP(n);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof on&&l3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function l3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Af(n){var e;const t=n.auth,r=await n.getIdToken(),i=await cv(n,XP(t,{idToken:r}));Xe(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZP(s.providerUserInfo):[],a=h3(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hv(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function c3(n){const e=Fe(n);await Af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZP(n){return n.map(e=>{var{providerId:t}=e,r=Nc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(n,e){const t=await QP(n,{},async()=>{const r=Ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=YP(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function f3(n,e){return Sp(n,"POST","/v2/accounts:revokeToken",KP(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const t=cb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await d3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Ra;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Xe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Xe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Vu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,e){Xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Nc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cv(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return a3(this,e)}reload(){return c3(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(at(this.auth.app))return Promise.reject(Rd(this.auth));const e=await this.getIdToken();return await cv(this,o3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=t.createdAt)!==null&&u!==void 0?u:void 0,v=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:D,isAnonymous:F,providerData:$,stsTokenManager:k}=t;Xe(I&&k,e,"internal-error");const N=Ra.fromJSON(this.name,k);Xe(typeof I=="string",e,"internal-error"),Vi(d,e.name),Vi(p,e.name),Xe(typeof D=="boolean",e,"internal-error"),Xe(typeof F=="boolean",e,"internal-error"),Vi(y,e.name),Vi(E,e.name),Vi(_,e.name),Vi(b,e.name),Vi(m,e.name),Vi(v,e.name);const T=new Qi({uid:I,auth:e,email:p,emailVerified:D,displayName:d,isAnonymous:F,photoURL:E,phoneNumber:y,tenantId:_,stsTokenManager:N,createdAt:m,lastLoginAt:v});return $&&Array.isArray($)&&(T.providerData=$.map(U=>Object.assign({},U))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ra;i.updateFromServerResponse(t);const s=new Qi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Af(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Xe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ZP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ra;a.updateFromIdToken(r);const l=new Qi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new Map;function eo(n){bf(n instanceof Function,"Expected a class definition");let e=hb.get(n);return e?(bf(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ek.type="NONE";const db=ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e,t){return`firebase:${n}:${e}:${t}`}class Ca{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Bm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ca(eo(db),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||eo(db);const o=Bm(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){const d=Qi._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ca(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ca(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_3(e))return"Blackberry";if(w3(e))return"Webos";if(m3(e))return"Safari";if((e.includes("chrome/")||g3(e))&&!e.includes("edge/"))return"Chrome";if(v3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p3(n=Ye()){return/firefox\//i.test(n)}function m3(n=Ye()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g3(n=Ye()){return/crios\//i.test(n)}function y3(n=Ye()){return/iemobile/i.test(n)}function v3(n=Ye()){return/android/i.test(n)}function _3(n=Ye()){return/blackberry/i.test(n)}function w3(n=Ye()){return/webos/i.test(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e=[]){let t;switch(n){case"Browser":t=fb(Ye());break;case"Worker":t=`${fb(Ye())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(n,e={}){return Sp(n,"GET","/v2/passwordPolicy",KP(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=6;class b3{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:I3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pb(this),this.idTokenSubscription=new pb(this),this.beforeStateQueue=new E3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eo(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await XP(this,{idToken:e}),r=await Qi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(at(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(at(this.app))return Promise.reject(Rd(this));const t=e?Fe(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return at(this.app)?Promise.reject(Rd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return at(this.app)?Promise.reject(Rd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T3(this),t=new b3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await f3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&eo(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[eo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&J5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function x3(n){return Fe(n)}class pb{constructor(e){this.auth=e,this.observer=null,this.addObserver=__(t=>this.observer=t)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function S3(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(eo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function R3(n,e,t,r){return Fe(n).onAuthStateChanged(e,t,r)}function C3(n){return Fe(n).signOut()}new Zc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Zc(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Zc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Zc(5e3,15e3);var mb="@firebase/auth",gb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N3(n){qr(new cr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tk(n)},u=new A3(r,i,s,l);return S3(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qr(new cr("auth-internal",e=>{const t=x3(e.getProvider("auth").getImmediate());return(r=>new P3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(mb,gb,k3(n)),Qn(mb,gb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=5*60;Gx("authIdTokenMaxAge");N3("Browser");const nk=St.createContext(),Qw=()=>{const n=St.useContext(nk);if(!n)throw new Error("useAuth deve ser usado dentro de AuthProvider");return n},O3=({children:n})=>{const[e,t]=St.useState(null),[r,i]=St.useState(!0);St.useEffect(()=>(console.log(" AuthContext: Monitorando autenticao..."),R3(ib,l=>{console.log(" AuthStateChanged:",l?`Logado: ${l.email}`:"Deslogado"),l?(console.log(" Usurio autenticado detectado"),t(l)):(console.log(" Nenhum usurio autenticado"),t(null)),i(!1)})),[]);const o={user:e,loading:r,logout:async()=>{try{await C3(ib),console.log(" Logout realizado com sucesso")}catch(a){throw console.error(" Erro ao fazer logout:",a),a}}};return M.jsx(nk.Provider,{value:o,children:n})},Wt=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),Yo=n=>n==null||isNaN(n)?"0,00%":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n*100)+"%",L3=({setMostrarGerenciador:n})=>{const{listarOrcamentos:e,carregarOrcamento:t,excluirOrcamento:r,carregando:i,erro:s}=xi(),[o,a]=St.useState([]),[l,u]=St.useState(""),h=async()=>{try{const m=(await e()).reduce((v,I)=>(v.find(F=>F.id===I.id)||v.push(I),v),[]);a(m)}catch(b){console.error("Erro ao carregar lista:",b)}};St.useEffect(()=>{h()},[]);const d=async b=>{try{await t(b),n(!1)}catch(m){console.error("Erro ao carregar oramento:",m)}},p=async(b,m)=>{if(confirm(`Tem certeza que deseja excluir o oramento "${m}"?`))try{await r(b),await h()}catch(v){console.error("Erro ao excluir oramento:",v)}},y=b=>{var te;const m=pe=>isNaN(pe)||pe===null||pe===void 0?0:Number(pe),v=(b.coordenacao||[]).reduce((pe,Y)=>{const B=m(Y.dias)/30;return pe+B*m(Y.subtotal)*m(Y.quant)},0),I=(b.profissionais||[]).reduce((pe,Y)=>{const B=m(Y.dias)/30;return pe+B*m(Y.prolabore)*m(Y.pessoas)},0),D=(b.valoresUnicos||[]).reduce((pe,Y)=>pe+m(Y.valor)*m(Y.pessoas)*m(Y.dias),0),F=(b.logistica||[]).reduce((pe,Y)=>pe+m(Y.valor)*m(Y.qtd)*m(Y.dias),0),$=v+I+D+F,k=b.parametros||{},N=(v+I)*m(k.encargosPessoal),T=$+N,U=T*m(k.lucro),G=T*m(k.fundoGiro),O=T+U+G,V=O*m(k.imposto),L=T*m(k.despesasFiscais),re=T*m(k.comissaoCaptacao),be=O+V+L+re,ie=m((te=b==null?void 0:b.metadata)==null?void 0:te.desconto)/100,de=be*ie;return be-de},E=b=>{var m;return((m=b==null?void 0:b.totais)==null?void 0:m.totalGeral)!==void 0?b.totais.totalGeral:y(b)},_=St.useMemo(()=>{const b=(l||"").trim().toLowerCase();return b?o.filter(m=>{var D,F;const v=(((D=m==null?void 0:m.metadata)==null?void 0:D.nome)||"").toLowerCase(),I=(((F=m==null?void 0:m.metadata)==null?void 0:F.cliente)||"").toLowerCase();return v.includes(b)||I.includes(b)}):o},[o,l]);return i?M.jsx("div",{className:"flex justify-center items-center p-8",children:M.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):M.jsxs("div",{className:"bg-white rounded-lg",children:[M.jsx("div",{className:"flex justify-between items-center mb-6",children:M.jsxs("div",{className:"flex gap-2",children:[M.jsx("input",{placeholder:"Buscar por nome/cliente",value:l,onChange:b=>u(b.target.value),className:"border rounded px-3 py-2 text-sm",style:{minWidth:240}}),M.jsx("button",{onClick:h,className:"bg-relevo-green text-white px-4 py-2 rounded-lg hover:bg-relevo-green-light transition font-sans",children:"Atualizar Lista"})]})}),s&&M.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),M.jsxs("div",{className:"overflow-x-auto",children:[M.jsxs("table",{className:"min-w-full bg-white",children:[M.jsx("thead",{children:M.jsxs("tr",{className:"bg-relevo-light-gray",children:[M.jsx("th",{className:"py-3 px-4 text-left",children:"Nome"}),M.jsx("th",{className:"py-3 px-4 text-left",children:"Cliente"}),M.jsx("th",{className:"py-3 px-4 text-left",children:"Data"}),M.jsx("th",{className:"py-3 px-4 text-right",children:"Valor Total"}),M.jsx("th",{className:"py-3 px-4 text-center",children:"Aes"})]})}),M.jsx("tbody",{children:_.map(b=>{var I,D,F,$;const m=E(b),v=(I=b==null?void 0:b.metadata)!=null&&I.data?new Date(b.metadata.data+"T00:00:00").toLocaleDateString("pt-BR"):(D=b==null?void 0:b.atualizadoEm)!=null&&D.toDate?b.atualizadoEm.toDate().toLocaleDateString("pt-BR"):b!=null&&b.atualizadoEm?new Date(b.atualizadoEm).toLocaleDateString("pt-BR"):"";return M.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[M.jsx("td",{className:"py-3 px-4",children:((F=b.metadata)==null?void 0:F.nome)||"Sem nome"}),M.jsx("td",{className:"py-3 px-4",children:(($=b.metadata)==null?void 0:$.cliente)||"No informado"}),M.jsx("td",{className:"py-3 px-4",children:v}),M.jsxs("td",{className:"py-3 px-4 text-right font-semibold",children:["R$ ",Wt(m)]}),M.jsx("td",{className:"py-3 px-4 text-center",children:M.jsxs("div",{className:"flex justify-center space-x-2",children:[M.jsx("button",{onClick:()=>d(b.id),className:"bg-relevo-blue text-white px-3 py-1 rounded hover:bg-relevo-blue/90 transition text-sm font-sans",children:"Carregar"}),M.jsx("button",{onClick:()=>{var k;return p(b.id,(k=b.metadata)==null?void 0:k.nome)},className:"bg-relevo-orange text-white px-3 py-1 rounded hover:bg-relevo-orange/90 transition text-sm font-sans",children:"Excluir"})]})})]},b.id)})})]}),_.length===0&&M.jsx("div",{className:"text-center py-8 text-relevo-text/60 font-sans",children:"Nenhum oramento encontrado para o filtro aplicado."})]})]})};var F3=Object.defineProperty,V3=Object.defineProperties,M3=Object.getOwnPropertyDescriptors,yb=Object.getOwnPropertySymbols,U3=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable,dv=(n,e,t)=>e in n?F3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Je=(n,e)=>{for(var t in e||(e={}))U3.call(e,t)&&dv(n,t,e[t]);if(yb)for(var t of yb(e))B3.call(e,t)&&dv(n,t,e[t]);return n},Ac=(n,e)=>V3(n,M3(e)),me=(n,e,t)=>(dv(n,typeof e!="symbol"?e+"":e,t),t),Wh=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(u){i(u)}},o=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});class xf{constructor(e){me(this,"rootKey"),this.rootKey=e}}const j3=Object.seal({});class ye extends xf{constructor(e){super(e),me(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);const r=this.root.map(i=>i instanceof xf?i.prepForXml(e):i).filter(i=>i!==void 0);return e.stack.pop(),{[this.rootKey]:r.length?r.length===1&&((t=r[0])!=null&&t._attr)?r[0]:r:j3}}addChildElement(e){return this.root.push(e),this}}class Si extends ye{prepForXml(e){const t=super.prepForXml(e);if(t&&(typeof t[this.rootKey]!="object"||Object.keys(t[this.rootKey]).length))return t}}class Ve extends xf{constructor(e){super("_attr"),me(this,"xmlKeys"),this.root=e}prepForXml(e){const t={};return Object.keys(this.root).forEach(r=>{const i=this.root[r];if(i!==void 0){const s=this.xmlKeys&&this.xmlKeys[r]||r;t[s]=i}}),{_attr:t}}}class Rs extends xf{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:r})=>r!==void 0).reduce((r,{key:i,value:s})=>Ac(Je({},r),{[i]:s}),{})}}}class Nt extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ik={},Yw={exports:{}},Pa=typeof Reflect=="object"?Reflect:null,vb=Pa&&typeof Pa.apply=="function"?Pa.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Cd;Pa&&typeof Pa.ownKeys=="function"?Cd=Pa.ownKeys:Object.getOwnPropertySymbols?Cd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cd=function(e){return Object.getOwnPropertyNames(e)};function z3(n){console&&console.warn&&console.warn(n)}var sk=Number.isNaN||function(e){return e!==e};function it(){it.init.call(this)}Yw.exports=it;Yw.exports.once=G3;it.EventEmitter=it;it.prototype._events=void 0;it.prototype._eventsCount=0;it.prototype._maxListeners=void 0;var _b=10;function Rp(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(it,"defaultMaxListeners",{enumerable:!0,get:function(){return _b},set:function(n){if(typeof n!="number"||n<0||sk(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");_b=n}});it.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};it.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||sk(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ok(n){return n._maxListeners===void 0?it.defaultMaxListeners:n._maxListeners}it.prototype.getMaxListeners=function(){return ok(this)};it.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")vb(l,this,t);else for(var u=l.length,h=hk(l,u),r=0;r<u;++r)vb(h[r],this,t);return!0};function ak(n,e,t,r){var i,s,o;if(Rp(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=ok(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,z3(a)}return n}it.prototype.addListener=function(e,t){return ak(this,e,t,!1)};it.prototype.on=it.prototype.addListener;it.prototype.prependListener=function(e,t){return ak(this,e,t,!0)};function $3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lk(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=$3.bind(r);return i.listener=t,r.wrapFn=i,i}it.prototype.once=function(e,t){return Rp(t),this.on(e,lk(this,e,t)),this};it.prototype.prependOnceListener=function(e,t){return Rp(t),this.prependListener(e,lk(this,e,t)),this};it.prototype.removeListener=function(e,t){var r,i,s,o,a;if(Rp(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():W3(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};it.prototype.off=it.prototype.removeListener;it.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function uk(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?q3(i):hk(i,i.length)}it.prototype.listeners=function(e){return uk(this,e,!0)};it.prototype.rawListeners=function(e){return uk(this,e,!1)};it.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):ck.call(n,e)};it.prototype.listenerCount=ck;function ck(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}it.prototype.eventNames=function(){return this._eventsCount>0?Cd(this._events):[]};function hk(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function W3(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function q3(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function G3(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}dk(n,e,s,{once:!0}),e!=="error"&&H3(n,i,{once:!0})})}function H3(n,e,t){typeof n.on=="function"&&dk(n,"error",e,t)}function dk(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Xw=Yw.exports,fv={exports:{}};typeof Object.create=="function"?fv.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:fv.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Fo=fv.exports;function K3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fk={exports:{}},Mt=fk.exports={},Cr,Pr;function pv(){throw new Error("setTimeout has not been defined")}function mv(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Cr=setTimeout:Cr=pv}catch{Cr=pv}try{typeof clearTimeout=="function"?Pr=clearTimeout:Pr=mv}catch{Pr=mv}})();function pk(n){if(Cr===setTimeout)return setTimeout(n,0);if((Cr===pv||!Cr)&&setTimeout)return Cr=setTimeout,setTimeout(n,0);try{return Cr(n,0)}catch{try{return Cr.call(null,n,0)}catch{return Cr.call(this,n,0)}}}function Q3(n){if(Pr===clearTimeout)return clearTimeout(n);if((Pr===mv||!Pr)&&clearTimeout)return Pr=clearTimeout,clearTimeout(n);try{return Pr(n)}catch{try{return Pr.call(null,n)}catch{return Pr.call(this,n)}}}var li=[],ka=!1,to,Pd=-1;function Y3(){!ka||!to||(ka=!1,to.length?li=to.concat(li):Pd=-1,li.length&&mk())}function mk(){if(!ka){var n=pk(Y3);ka=!0;for(var e=li.length;e;){for(to=li,li=[];++Pd<e;)to&&to[Pd].run();Pd=-1,e=li.length}to=null,ka=!1,Q3(n)}}Mt.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];li.push(new gk(n,e)),li.length===1&&!ka&&pk(mk)};function gk(n,e){this.fun=n,this.array=e}gk.prototype.run=function(){this.fun.apply(null,this.array)};Mt.title="browser";Mt.browser=!0;Mt.env={};Mt.argv=[];Mt.version="";Mt.versions={};function Ri(){}Mt.on=Ri;Mt.addListener=Ri;Mt.once=Ri;Mt.off=Ri;Mt.removeListener=Ri;Mt.removeAllListeners=Ri;Mt.emit=Ri;Mt.prependListener=Ri;Mt.prependOnceListener=Ri;Mt.listeners=function(n){return[]};Mt.binding=function(n){throw new Error("process.binding is not supported")};Mt.cwd=function(){return"/"};Mt.chdir=function(n){throw new Error("process.chdir is not supported")};Mt.umask=function(){return 0};var X3=fk.exports;const ze=K3(X3);var jm,wb;function yk(){return wb||(wb=1,jm=Xw.EventEmitter),jm}var zm={},nu={},Eb;function J3(){if(Eb)return nu;Eb=1,nu.byteLength=a,nu.toByteArray=u,nu.fromByteArray=p;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function o(y){var E=y.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=y.indexOf("=");_===-1&&(_=E);var b=_===E?0:4-_%4;return[_,b]}function a(y){var E=o(y),_=E[0],b=E[1];return(_+b)*3/4-b}function l(y,E,_){return(E+_)*3/4-_}function u(y){var E,_=o(y),b=_[0],m=_[1],v=new t(l(y,b,m)),I=0,D=m>0?b-4:b,F;for(F=0;F<D;F+=4)E=e[y.charCodeAt(F)]<<18|e[y.charCodeAt(F+1)]<<12|e[y.charCodeAt(F+2)]<<6|e[y.charCodeAt(F+3)],v[I++]=E>>16&255,v[I++]=E>>8&255,v[I++]=E&255;return m===2&&(E=e[y.charCodeAt(F)]<<2|e[y.charCodeAt(F+1)]>>4,v[I++]=E&255),m===1&&(E=e[y.charCodeAt(F)]<<10|e[y.charCodeAt(F+1)]<<4|e[y.charCodeAt(F+2)]>>2,v[I++]=E>>8&255,v[I++]=E&255),v}function h(y){return n[y>>18&63]+n[y>>12&63]+n[y>>6&63]+n[y&63]}function d(y,E,_){for(var b,m=[],v=E;v<_;v+=3)b=(y[v]<<16&16711680)+(y[v+1]<<8&65280)+(y[v+2]&255),m.push(h(b));return m.join("")}function p(y){for(var E,_=y.length,b=_%3,m=[],v=16383,I=0,D=_-b;I<D;I+=v)m.push(d(y,I,I+v>D?D:I+v));return b===1?(E=y[_-1],m.push(n[E>>2]+n[E<<4&63]+"==")):b===2&&(E=(y[_-2]<<8)+y[_-1],m.push(n[E>>10]+n[E>>4&63]+n[E<<2&63]+"=")),m.join("")}return nu}var qh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Tb;function Z3(){return Tb||(Tb=1,qh.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,h=-7,d=t?i-1:0,p=t?-1:1,y=n[e+d];for(d+=p,s=y&(1<<-h)-1,y>>=-h,h+=a;h>0;s=s*256+n[e+d],d+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+n[e+d],d+=p,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(y?-1:1)*o*Math.pow(2,s-r)},qh.write=function(n,e,t,r,i,s){var o,a,l,u=s*8-i-1,h=(1<<u)-1,d=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,E=r?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=p/l:e+=p*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=h?(a=0,o=h):o+d>=1?(a=(e*l-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;n[t+y]=a&255,y+=E,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;n[t+y]=o&255,y+=E,o/=256,u-=8);n[t+y-E]|=_*128}),qh}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ib;function Cp(){return Ib||(Ib=1,function(n){var e=J3(),t=Z3(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;var i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var P=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(P,f),P.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(P){if(P>i)throw new RangeError('The value "'+P+'" is invalid for option "size"');var f=new Uint8Array(P);return Object.setPrototypeOf(f,a.prototype),f}function a(P,f,g){if(typeof P=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(P)}return l(P,f,g)}a.poolSize=8192;function l(P,f,g){if(typeof P=="string")return p(P,f);if(ArrayBuffer.isView(P))return E(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(ae(P,ArrayBuffer)||P&&ae(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ae(P,SharedArrayBuffer)||P&&ae(P.buffer,SharedArrayBuffer)))return _(P,f,g);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var A=P.valueOf&&P.valueOf();if(A!=null&&A!==P)return a.from(A,f,g);var q=b(P);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return a.from(P[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}a.from=function(P,f,g){return l(P,f,g)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function h(P,f,g){return u(P),P<=0?o(P):f!==void 0?typeof g=="string"?o(P).fill(f,g):o(P).fill(f):o(P)}a.alloc=function(P,f,g){return h(P,f,g)};function d(P){return u(P),o(P<0?0:m(P)|0)}a.allocUnsafe=function(P){return d(P)},a.allocUnsafeSlow=function(P){return d(P)};function p(P,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);var g=I(P,f)|0,A=o(g),q=A.write(P,f);return q!==g&&(A=A.slice(0,q)),A}function y(P){for(var f=P.length<0?0:m(P.length)|0,g=o(f),A=0;A<f;A+=1)g[A]=P[A]&255;return g}function E(P){if(ae(P,Uint8Array)){var f=new Uint8Array(P);return _(f.buffer,f.byteOffset,f.byteLength)}return y(P)}function _(P,f,g){if(f<0||P.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');var A;return f===void 0&&g===void 0?A=new Uint8Array(P):g===void 0?A=new Uint8Array(P,f):A=new Uint8Array(P,f,g),Object.setPrototypeOf(A,a.prototype),A}function b(P){if(a.isBuffer(P)){var f=m(P.length)|0,g=o(f);return g.length===0||P.copy(g,0,0,f),g}if(P.length!==void 0)return typeof P.length!="number"||x(P.length)?o(0):y(P);if(P.type==="Buffer"&&Array.isArray(P.data))return y(P.data)}function m(P){if(P>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return P|0}function v(P){return+P!=P&&(P=0),a.alloc(+P)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,g){if(ae(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),ae(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(f)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===g)return 0;for(var A=f.length,q=g.length,J=0,K=Math.min(A,q);J<K;++J)if(f[J]!==g[J]){A=f[J],q=g[J];break}return A<q?-1:q<A?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,g){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);var A;if(g===void 0)for(g=0,A=0;A<f.length;++A)g+=f[A].length;var q=a.allocUnsafe(g),J=0;for(A=0;A<f.length;++A){var K=f[A];if(ae(K,Uint8Array))J+K.length>q.length?a.from(K).copy(q,J):Uint8Array.prototype.set.call(q,K,J);else if(a.isBuffer(K))K.copy(q,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=K.length}return q};function I(P,f){if(a.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||ae(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var g=P.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;for(var q=!1;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return S(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return j(P).length;default:if(q)return A?-1:S(P).length;f=(""+f).toLowerCase(),q=!0}}a.byteLength=I;function D(P,f,g){var A=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(P||(P="utf8");;)switch(P){case"hex":return te(this,f,g);case"utf8":case"utf-8":return L(this,f,g);case"ascii":return ie(this,f,g);case"latin1":case"binary":return de(this,f,g);case"base64":return V(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,f,g);default:if(A)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),A=!0}}a.prototype._isBuffer=!0;function F(P,f,g){var A=P[f];P[f]=P[g],P[g]=A}a.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<f;g+=2)F(this,g,g+1);return this},a.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<f;g+=4)F(this,g,g+3),F(this,g+1,g+2);return this},a.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var g=0;g<f;g+=8)F(this,g,g+7),F(this,g+1,g+6),F(this,g+2,g+5),F(this,g+3,g+4);return this},a.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?L(this,0,f):D.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){var f="",g=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(f+=" ... "),"<Buffer "+f+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(f,g,A,q,J){if(ae(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(g===void 0&&(g=0),A===void 0&&(A=f?f.length:0),q===void 0&&(q=0),J===void 0&&(J=this.length),g<0||A>f.length||q<0||J>this.length)throw new RangeError("out of range index");if(q>=J&&g>=A)return 0;if(q>=J)return-1;if(g>=A)return 1;if(g>>>=0,A>>>=0,q>>>=0,J>>>=0,this===f)return 0;for(var K=J-q,fe=A-g,we=Math.min(K,fe),ge=this.slice(q,J),xe=f.slice(g,A),Ce=0;Ce<we;++Ce)if(ge[Ce]!==xe[Ce]){K=ge[Ce],fe=xe[Ce];break}return K<fe?-1:fe<K?1:0};function $(P,f,g,A,q){if(P.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,x(g)&&(g=q?0:P.length-1),g<0&&(g=P.length+g),g>=P.length){if(q)return-1;g=P.length-1}else if(g<0)if(q)g=0;else return-1;if(typeof f=="string"&&(f=a.from(f,A)),a.isBuffer(f))return f.length===0?-1:k(P,f,g,A,q);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(P,f,g):Uint8Array.prototype.lastIndexOf.call(P,f,g):k(P,[f],g,A,q);throw new TypeError("val must be string, number or Buffer")}function k(P,f,g,A,q){var J=1,K=P.length,fe=f.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(P.length<2||f.length<2)return-1;J=2,K/=2,fe/=2,g/=2}function we(Ut,fr){return J===1?Ut[fr]:Ut.readUInt16BE(fr*J)}var ge;if(q){var xe=-1;for(ge=g;ge<K;ge++)if(we(P,ge)===we(f,xe===-1?0:ge-xe)){if(xe===-1&&(xe=ge),ge-xe+1===fe)return xe*J}else xe!==-1&&(ge-=ge-xe),xe=-1}else for(g+fe>K&&(g=K-fe),ge=g;ge>=0;ge--){for(var Ce=!0,De=0;De<fe;De++)if(we(P,ge+De)!==we(f,De)){Ce=!1;break}if(Ce)return ge}return-1}a.prototype.includes=function(f,g,A){return this.indexOf(f,g,A)!==-1},a.prototype.indexOf=function(f,g,A){return $(this,f,g,A,!0)},a.prototype.lastIndexOf=function(f,g,A){return $(this,f,g,A,!1)};function N(P,f,g,A){g=Number(g)||0;var q=P.length-g;A?(A=Number(A),A>q&&(A=q)):A=q;var J=f.length;A>J/2&&(A=J/2);for(var K=0;K<A;++K){var fe=parseInt(f.substr(K*2,2),16);if(x(fe))return K;P[g+K]=fe}return K}function T(P,f,g,A){return W(S(f,P.length-g),P,g,A)}function U(P,f,g,A){return W(Q(f),P,g,A)}function G(P,f,g,A){return W(j(f),P,g,A)}function O(P,f,g,A){return W(H(f,P.length-g),P,g,A)}a.prototype.write=function(f,g,A,q){if(g===void 0)q="utf8",A=this.length,g=0;else if(A===void 0&&typeof g=="string")q=g,A=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(A)?(A=A>>>0,q===void 0&&(q="utf8")):(q=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-g;if((A===void 0||A>J)&&(A=J),f.length>0&&(A<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var K=!1;;)switch(q){case"hex":return N(this,f,g,A);case"utf8":case"utf-8":return T(this,f,g,A);case"ascii":case"latin1":case"binary":return U(this,f,g,A);case"base64":return G(this,f,g,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,f,g,A);default:if(K)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(P,f,g){return f===0&&g===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(f,g))}function L(P,f,g){g=Math.min(P.length,g);for(var A=[],q=f;q<g;){var J=P[q],K=null,fe=J>239?4:J>223?3:J>191?2:1;if(q+fe<=g){var we,ge,xe,Ce;switch(fe){case 1:J<128&&(K=J);break;case 2:we=P[q+1],(we&192)===128&&(Ce=(J&31)<<6|we&63,Ce>127&&(K=Ce));break;case 3:we=P[q+1],ge=P[q+2],(we&192)===128&&(ge&192)===128&&(Ce=(J&15)<<12|(we&63)<<6|ge&63,Ce>2047&&(Ce<55296||Ce>57343)&&(K=Ce));break;case 4:we=P[q+1],ge=P[q+2],xe=P[q+3],(we&192)===128&&(ge&192)===128&&(xe&192)===128&&(Ce=(J&15)<<18|(we&63)<<12|(ge&63)<<6|xe&63,Ce>65535&&Ce<1114112&&(K=Ce))}}K===null?(K=65533,fe=1):K>65535&&(K-=65536,A.push(K>>>10&1023|55296),K=56320|K&1023),A.push(K),q+=fe}return be(A)}var re=4096;function be(P){var f=P.length;if(f<=re)return String.fromCharCode.apply(String,P);for(var g="",A=0;A<f;)g+=String.fromCharCode.apply(String,P.slice(A,A+=re));return g}function ie(P,f,g){var A="";g=Math.min(P.length,g);for(var q=f;q<g;++q)A+=String.fromCharCode(P[q]&127);return A}function de(P,f,g){var A="";g=Math.min(P.length,g);for(var q=f;q<g;++q)A+=String.fromCharCode(P[q]);return A}function te(P,f,g){var A=P.length;(!f||f<0)&&(f=0),(!g||g<0||g>A)&&(g=A);for(var q="",J=f;J<g;++J)q+=se[P[J]];return q}function pe(P,f,g){for(var A=P.slice(f,g),q="",J=0;J<A.length-1;J+=2)q+=String.fromCharCode(A[J]+A[J+1]*256);return q}a.prototype.slice=function(f,g){var A=this.length;f=~~f,g=g===void 0?A:~~g,f<0?(f+=A,f<0&&(f=0)):f>A&&(f=A),g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),g<f&&(g=f);var q=this.subarray(f,g);return Object.setPrototypeOf(q,a.prototype),q};function Y(P,f,g){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+f>g)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||Y(f,g,this.length);for(var q=this[f],J=1,K=0;++K<g&&(J*=256);)q+=this[f+K]*J;return q},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||Y(f,g,this.length);for(var q=this[f+--g],J=1;g>0&&(J*=256);)q+=this[f+--g]*J;return q},a.prototype.readUint8=a.prototype.readUInt8=function(f,g){return f=f>>>0,g||Y(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,g){return f=f>>>0,g||Y(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,g){return f=f>>>0,g||Y(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||Y(f,g,this.length);for(var q=this[f],J=1,K=0;++K<g&&(J*=256);)q+=this[f+K]*J;return J*=128,q>=J&&(q-=Math.pow(2,8*g)),q},a.prototype.readIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||Y(f,g,this.length);for(var q=g,J=1,K=this[f+--q];q>0&&(J*=256);)K+=this[f+--q]*J;return J*=128,K>=J&&(K-=Math.pow(2,8*g)),K},a.prototype.readInt8=function(f,g){return f=f>>>0,g||Y(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,g){f=f>>>0,g||Y(f,2,this.length);var A=this[f]|this[f+1]<<8;return A&32768?A|4294901760:A},a.prototype.readInt16BE=function(f,g){f=f>>>0,g||Y(f,2,this.length);var A=this[f+1]|this[f]<<8;return A&32768?A|4294901760:A},a.prototype.readInt32LE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readFloatLE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),t.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,g){return f=f>>>0,g||Y(f,4,this.length),t.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,g){return f=f>>>0,g||Y(f,8,this.length),t.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,g){return f=f>>>0,g||Y(f,8,this.length),t.read(this,f,!1,52,8)};function B(P,f,g,A,q,J){if(!a.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>q||f<J)throw new RangeError('"value" argument is out of bounds');if(g+A>P.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,g,A,q){if(f=+f,g=g>>>0,A=A>>>0,!q){var J=Math.pow(2,8*A)-1;B(this,f,g,A,J,0)}var K=1,fe=0;for(this[g]=f&255;++fe<A&&(K*=256);)this[g+fe]=f/K&255;return g+A},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,g,A,q){if(f=+f,g=g>>>0,A=A>>>0,!q){var J=Math.pow(2,8*A)-1;B(this,f,g,A,J,0)}var K=A-1,fe=1;for(this[g+K]=f&255;--K>=0&&(fe*=256);)this[g+K]=f/fe&255;return g+A},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,1,255,0),this[g]=f&255,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,2,65535,0),this[g]=f&255,this[g+1]=f>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,2,65535,0),this[g]=f>>>8,this[g+1]=f&255,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,4,4294967295,0),this[g+3]=f>>>24,this[g+2]=f>>>16,this[g+1]=f>>>8,this[g]=f&255,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,4,4294967295,0),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4},a.prototype.writeIntLE=function(f,g,A,q){if(f=+f,g=g>>>0,!q){var J=Math.pow(2,8*A-1);B(this,f,g,A,J-1,-J)}var K=0,fe=1,we=0;for(this[g]=f&255;++K<A&&(fe*=256);)f<0&&we===0&&this[g+K-1]!==0&&(we=1),this[g+K]=(f/fe>>0)-we&255;return g+A},a.prototype.writeIntBE=function(f,g,A,q){if(f=+f,g=g>>>0,!q){var J=Math.pow(2,8*A-1);B(this,f,g,A,J-1,-J)}var K=A-1,fe=1,we=0;for(this[g+K]=f&255;--K>=0&&(fe*=256);)f<0&&we===0&&this[g+K+1]!==0&&(we=1),this[g+K]=(f/fe>>0)-we&255;return g+A},a.prototype.writeInt8=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,1,127,-128),f<0&&(f=255+f+1),this[g]=f&255,g+1},a.prototype.writeInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,2,32767,-32768),this[g]=f&255,this[g+1]=f>>>8,g+2},a.prototype.writeInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,2,32767,-32768),this[g]=f>>>8,this[g+1]=f&255,g+2},a.prototype.writeInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,4,2147483647,-2147483648),this[g]=f&255,this[g+1]=f>>>8,this[g+2]=f>>>16,this[g+3]=f>>>24,g+4},a.prototype.writeInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||B(this,f,g,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4};function Z(P,f,g,A,q,J){if(g+A>P.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function ee(P,f,g,A,q){return f=+f,g=g>>>0,q||Z(P,f,g,4),t.write(P,f,g,A,23,4),g+4}a.prototype.writeFloatLE=function(f,g,A){return ee(this,f,g,!0,A)},a.prototype.writeFloatBE=function(f,g,A){return ee(this,f,g,!1,A)};function le(P,f,g,A,q){return f=+f,g=g>>>0,q||Z(P,f,g,8),t.write(P,f,g,A,52,8),g+8}a.prototype.writeDoubleLE=function(f,g,A){return le(this,f,g,!0,A)},a.prototype.writeDoubleBE=function(f,g,A){return le(this,f,g,!1,A)},a.prototype.copy=function(f,g,A,q){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(A||(A=0),!q&&q!==0&&(q=this.length),g>=f.length&&(g=f.length),g||(g=0),q>0&&q<A&&(q=A),q===A||f.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),f.length-g<q-A&&(q=f.length-g+A);var J=q-A;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,A,q):Uint8Array.prototype.set.call(f,this.subarray(A,q),g),J},a.prototype.fill=function(f,g,A,q){if(typeof f=="string"){if(typeof g=="string"?(q=g,g=0,A=this.length):typeof A=="string"&&(q=A,A=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(f.length===1){var J=f.charCodeAt(0);(q==="utf8"&&J<128||q==="latin1")&&(f=J)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(g<0||this.length<g||this.length<A)throw new RangeError("Out of range index");if(A<=g)return this;g=g>>>0,A=A===void 0?this.length:A>>>0,f||(f=0);var K;if(typeof f=="number")for(K=g;K<A;++K)this[K]=f;else{var fe=a.isBuffer(f)?f:a.from(f,q),we=fe.length;if(we===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(K=0;K<A-g;++K)this[K+g]=fe[K%we]}return this};var X=/[^+/0-9A-Za-z-_]/g;function R(P){if(P=P.split("=")[0],P=P.trim().replace(X,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function S(P,f){f=f||1/0;for(var g,A=P.length,q=null,J=[],K=0;K<A;++K){if(g=P.charCodeAt(K),g>55295&&g<57344){if(!q){if(g>56319){(f-=3)>-1&&J.push(239,191,189);continue}else if(K+1===A){(f-=3)>-1&&J.push(239,191,189);continue}q=g;continue}if(g<56320){(f-=3)>-1&&J.push(239,191,189),q=g;continue}g=(q-55296<<10|g-56320)+65536}else q&&(f-=3)>-1&&J.push(239,191,189);if(q=null,g<128){if((f-=1)<0)break;J.push(g)}else if(g<2048){if((f-=2)<0)break;J.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;J.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;J.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return J}function Q(P){for(var f=[],g=0;g<P.length;++g)f.push(P.charCodeAt(g)&255);return f}function H(P,f){for(var g,A,q,J=[],K=0;K<P.length&&!((f-=2)<0);++K)g=P.charCodeAt(K),A=g>>8,q=g%256,J.push(q),J.push(A);return J}function j(P){return e.toByteArray(R(P))}function W(P,f,g,A){for(var q=0;q<A&&!(q+g>=f.length||q>=P.length);++q)f[q+g]=P[q];return q}function ae(P,f){return P instanceof f||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===f.name}function x(P){return P!==P}var se=function(){for(var P="0123456789abcdef",f=new Array(256),g=0;g<16;++g)for(var A=g*16,q=0;q<16;++q)f[A+q]=P[g]+P[q];return f}()}(zm)),zm}var $m={},Wm={},qm,bb;function vk(){return bb||(bb=1,qm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),qm}var Gm,Ab;function Jw(){if(Ab)return Gm;Ab=1;var n=vk();return Gm=function(){return n()&&!!Symbol.toStringTag},Gm}var Hm,xb;function e8(){if(xb)return Hm;xb=1;var n=typeof Symbol<"u"&&Symbol,e=vk();return Hm=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Hm}var Km,Sb;function t8(){if(Sb)return Km;Sb=1;var n={foo:{}},e=Object;return Km=function(){return{__proto__:n}.foo===n.foo&&!({__proto__:null}instanceof e)},Km}var Qm,Rb;function n8(){if(Rb)return Qm;Rb=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(l,u){for(var h=[],d=0;d<l.length;d+=1)h[d]=l[d];for(var p=0;p<u.length;p+=1)h[p+l.length]=u[p];return h},s=function(l,u){for(var h=[],d=u||0,p=0;d<l.length;d+=1,p+=1)h[p]=l[d];return h},o=function(a,l){for(var u="",h=0;h<a.length;h+=1)u+=a[h],h+1<a.length&&(u+=l);return u};return Qm=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==r)throw new TypeError(n+u);for(var h=s(arguments,1),d,p=function(){if(this instanceof d){var m=u.apply(this,i(h,arguments));return Object(m)===m?m:this}return u.apply(l,i(h,arguments))},y=t(0,u.length-h.length),E=[],_=0;_<y;_++)E[_]="$"+_;if(d=Function("binder","return function ("+o(E,",")+"){ return binder.apply(this,arguments); }")(p),u.prototype){var b=function(){};b.prototype=u.prototype,d.prototype=new b,b.prototype=null}return d},Qm}var Ym,Cb;function Zw(){if(Cb)return Ym;Cb=1;var n=n8();return Ym=Function.prototype.bind||n,Ym}var Xm,Pb;function r8(){if(Pb)return Xm;Pb=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Zw();return Xm=t.call(n,e),Xm}var Jm,kb;function Il(){if(kb)return Jm;kb=1;var n,e=SyntaxError,t=Function,r=TypeError,i=function(O){try{return t('"use strict"; return ('+O+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var o=function(){throw new r},a=s?function(){try{return arguments.callee,o}catch{try{return s(arguments,"callee").get}catch{return o}}}():o,l=e8()(),u=t8()(),h=Object.getPrototypeOf||(u?function(O){return O.__proto__}:null),d={},p=typeof Uint8Array>"u"||!h?n:h(Uint8Array),y={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":l&&h?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":d,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l&&h?h(h([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l||!h?n:h(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l||!h?n:h(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l&&h?h(""[Symbol.iterator]()):n,"%Symbol%":l?Symbol:n,"%SyntaxError%":e,"%ThrowTypeError%":a,"%TypedArray%":p,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(h)try{null.error}catch(O){var E=h(h(O));y["%Error.prototype%"]=E}var _=function O(V){var L;if(V==="%AsyncFunction%")L=i("async function () {}");else if(V==="%GeneratorFunction%")L=i("function* () {}");else if(V==="%AsyncGeneratorFunction%")L=i("async function* () {}");else if(V==="%AsyncGenerator%"){var re=O("%AsyncGeneratorFunction%");re&&(L=re.prototype)}else if(V==="%AsyncIteratorPrototype%"){var be=O("%AsyncGenerator%");be&&h&&(L=h(be.prototype))}return y[V]=L,L},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=Zw(),v=r8(),I=m.call(Function.call,Array.prototype.concat),D=m.call(Function.apply,Array.prototype.splice),F=m.call(Function.call,String.prototype.replace),$=m.call(Function.call,String.prototype.slice),k=m.call(Function.call,RegExp.prototype.exec),N=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,U=function(V){var L=$(V,0,1),re=$(V,-1);if(L==="%"&&re!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&L!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var be=[];return F(V,N,function(ie,de,te,pe){be[be.length]=te?F(pe,T,"$1"):de||ie}),be},G=function(V,L){var re=V,be;if(v(b,re)&&(be=b[re],re="%"+be[0]+"%"),v(y,re)){var ie=y[re];if(ie===d&&(ie=_(re)),typeof ie>"u"&&!L)throw new r("intrinsic "+V+" exists, but is not available. Please file an issue!");return{alias:be,name:re,value:ie}}throw new e("intrinsic "+V+" does not exist!")};return Jm=function(V,L){if(typeof V!="string"||V.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new r('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,V)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var re=U(V),be=re.length>0?re[0]:"",ie=G("%"+be+"%",L),de=ie.name,te=ie.value,pe=!1,Y=ie.alias;Y&&(be=Y[0],D(re,I([0,1],Y)));for(var B=1,Z=!0;B<re.length;B+=1){var ee=re[B],le=$(ee,0,1),X=$(ee,-1);if((le==='"'||le==="'"||le==="`"||X==='"'||X==="'"||X==="`")&&le!==X)throw new e("property names with quotes must have matching quotes");if((ee==="constructor"||!Z)&&(pe=!0),be+="."+ee,de="%"+be+"%",v(y,de))te=y[de];else if(te!=null){if(!(ee in te)){if(!L)throw new r("base intrinsic for "+V+" exists, but the property is not available.");return}if(s&&B+1>=re.length){var R=s(te,ee);Z=!!R,Z&&"get"in R&&!("originalValue"in R.get)?te=R.get:te=te[ee]}else Z=v(te,ee),te=te[ee];Z&&!pe&&(y[de]=te)}}return te},Jm}var Zm={exports:{}},eg,Nb;function _k(){if(Nb)return eg;Nb=1;var n=Il(),e=n("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},eg=t,eg}var tg,Db;function e0(){if(Db)return tg;Db=1;var n=Il(),e=n("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return tg=e,tg}var ng,Ob;function i8(){if(Ob)return ng;Ob=1;var n=_k()(),e=Il(),t=n&&e("%Object.defineProperty%",!0);if(t)try{t({},"a",{value:1})}catch{t=!1}var r=e("%SyntaxError%"),i=e("%TypeError%"),s=e0();return ng=function(a,l,u){if(!a||typeof a!="object"&&typeof a!="function")throw new i("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,y=arguments.length>6?arguments[6]:!1,E=!!s&&s(a,l);if(t)t(a,l,{configurable:p===null&&E?E.configurable:!p,enumerable:h===null&&E?E.enumerable:!h,value:u,writable:d===null&&E?E.writable:!d});else if(y||!h&&!d&&!p)a[l]=u;else throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ng}var rg,Lb;function s8(){if(Lb)return rg;Lb=1;var n=Il(),e=i8(),t=_k()(),r=e0(),i=n("%TypeError%"),s=n("%Math.floor%");return rg=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],h=!0,d=!0;if("length"in a&&r){var p=r(a,"length");p&&!p.configurable&&(h=!1),p&&!p.writable&&(d=!1)}return(h||d||!u)&&(t?e(a,"length",l,!0,!0):e(a,"length",l)),a},rg}var Fb;function wk(){return Fb||(Fb=1,function(n){var e=Zw(),t=Il(),r=s8(),i=t("%TypeError%"),s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=t("%Object.defineProperty%",!0),u=t("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}n.exports=function(p){if(typeof p!="function")throw new i("a function is required");var y=a(e,o,arguments);return r(y,1+u(0,p.length-(arguments.length-1)),!0)};var h=function(){return a(e,s,arguments)};l?l(n.exports,"apply",{value:h}):n.exports.apply=h}(Zm)),Zm.exports}var ig,Vb;function Ek(){if(Vb)return ig;Vb=1;var n=Il(),e=wk(),t=e(n("String.prototype.indexOf"));return ig=function(i,s){var o=n(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e(o):o},ig}var sg,Mb;function o8(){if(Mb)return sg;Mb=1;var n=Jw()(),e=Ek(),t=e("Object.prototype.toString"),r=function(a){return n&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=i,sg=s?r:i,sg}var og,Ub;function a8(){if(Ub)return og;Ub=1;var n=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,r=Jw()(),i=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return og=function(l){if(typeof l!="function")return!1;if(t.test(e.call(l)))return!0;if(!r){var u=n.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof o>"u"){var h=s();o=h?i(h):!1}return i(l)===o},og}var ag,Bb;function l8(){if(Bb)return ag;Bb=1;var n=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,t)}catch(v){v!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(I){try{var D=n.call(I);return i.test(D)}catch{return!1}},o=function(I){try{return s(I)?!1:(n.call(I),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",h="[object GeneratorFunction]",d="[object HTMLAllCollection]",p="[object HTML document.all class]",y="[object HTMLCollection]",E=typeof Symbol=="function"&&!!Symbol.toStringTag,_=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var m=document.all;a.call(m)===a.call(document.all)&&(b=function(I){if((_||!I)&&(typeof I>"u"||typeof I=="object"))try{var D=a.call(I);return(D===d||D===p||D===y||D===l)&&I("")==null}catch{}return!1})}return ag=e?function(I){if(b(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;try{e(I,null,t)}catch(D){if(D!==r)return!1}return!s(I)&&o(I)}:function(I){if(b(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;if(E)return o(I);if(s(I))return!1;var D=a.call(I);return D!==u&&D!==h&&!/^\[object HTML/.test(D)?!1:o(I)},ag}var lg,jb;function u8(){if(jb)return lg;jb=1;var n=l8(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=function(l,u,h){for(var d=0,p=l.length;d<p;d++)t.call(l,d)&&(h==null?u(l[d],d,l):u.call(h,l[d],d,l))},i=function(l,u,h){for(var d=0,p=l.length;d<p;d++)h==null?u(l.charAt(d),d,l):u.call(h,l.charAt(d),d,l)},s=function(l,u,h){for(var d in l)t.call(l,d)&&(h==null?u(l[d],d,l):u.call(h,l[d],d,l))},o=function(l,u,h){if(!n(u))throw new TypeError("iterator must be a function");var d;arguments.length>=3&&(d=h),e.call(l)==="[object Array]"?r(l,u,d):typeof l=="string"?i(l,u,d):s(l,u,d)};return lg=o,lg}var ug,zb;function c8(){if(zb)return ug;zb=1;var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?Br:globalThis;return ug=function(){for(var r=[],i=0;i<n.length;i++)typeof e[n[i]]=="function"&&(r[r.length]=n[i]);return r},ug}var cg,$b;function Tk(){if($b)return cg;$b=1;var n=u8(),e=c8(),t=wk(),r=Ek(),i=e0(),s=r("Object.prototype.toString"),o=Jw()(),a=typeof globalThis>"u"?Br:globalThis,l=e(),u=r("String.prototype.slice"),h=Object.getPrototypeOf,d=r("Array.prototype.indexOf",!0)||function(b,m){for(var v=0;v<b.length;v+=1)if(b[v]===m)return v;return-1},p={__proto__:null};o&&i&&h?n(l,function(_){var b=new a[_];if(Symbol.toStringTag in b){var m=h(b),v=i(m,Symbol.toStringTag);if(!v){var I=h(m);v=i(I,Symbol.toStringTag)}p["$"+_]=t(v.get)}}):n(l,function(_){var b=new a[_],m=b.slice||b.set;m&&(p["$"+_]=t(m))});var y=function(b){var m=!1;return n(p,function(v,I){if(!m)try{"$"+v(b)===I&&(m=u(I,1))}catch{}}),m},E=function(b){var m=!1;return n(p,function(v,I){if(!m)try{v(b),m=u(I,1)}catch{}}),m};return cg=function(b){if(!b||typeof b!="object")return!1;if(!o){var m=u(s(b),8,-1);return d(l,m)>-1?m:m!=="Object"?!1:E(b)}return i?y(b):null},cg}var hg,Wb;function h8(){if(Wb)return hg;Wb=1;var n=Tk();return hg=function(t){return!!n(t)},hg}var qb;function d8(){return qb||(qb=1,function(n){var e=o8(),t=a8(),r=Tk(),i=h8();function s(A){return A.call.bind(A)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(o)var p=s(BigInt.prototype.valueOf);if(a)var y=s(Symbol.prototype.valueOf);function E(A,q){if(typeof A!="object")return!1;try{return q(A),!0}catch{return!1}}n.isArgumentsObject=e,n.isGeneratorFunction=t,n.isTypedArray=i;function _(A){return typeof Promise<"u"&&A instanceof Promise||A!==null&&typeof A=="object"&&typeof A.then=="function"&&typeof A.catch=="function"}n.isPromise=_;function b(A){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(A):i(A)||Z(A)}n.isArrayBufferView=b;function m(A){return r(A)==="Uint8Array"}n.isUint8Array=m;function v(A){return r(A)==="Uint8ClampedArray"}n.isUint8ClampedArray=v;function I(A){return r(A)==="Uint16Array"}n.isUint16Array=I;function D(A){return r(A)==="Uint32Array"}n.isUint32Array=D;function F(A){return r(A)==="Int8Array"}n.isInt8Array=F;function $(A){return r(A)==="Int16Array"}n.isInt16Array=$;function k(A){return r(A)==="Int32Array"}n.isInt32Array=k;function N(A){return r(A)==="Float32Array"}n.isFloat32Array=N;function T(A){return r(A)==="Float64Array"}n.isFloat64Array=T;function U(A){return r(A)==="BigInt64Array"}n.isBigInt64Array=U;function G(A){return r(A)==="BigUint64Array"}n.isBigUint64Array=G;function O(A){return l(A)==="[object Map]"}O.working=typeof Map<"u"&&O(new Map);function V(A){return typeof Map>"u"?!1:O.working?O(A):A instanceof Map}n.isMap=V;function L(A){return l(A)==="[object Set]"}L.working=typeof Set<"u"&&L(new Set);function re(A){return typeof Set>"u"?!1:L.working?L(A):A instanceof Set}n.isSet=re;function be(A){return l(A)==="[object WeakMap]"}be.working=typeof WeakMap<"u"&&be(new WeakMap);function ie(A){return typeof WeakMap>"u"?!1:be.working?be(A):A instanceof WeakMap}n.isWeakMap=ie;function de(A){return l(A)==="[object WeakSet]"}de.working=typeof WeakSet<"u"&&de(new WeakSet);function te(A){return de(A)}n.isWeakSet=te;function pe(A){return l(A)==="[object ArrayBuffer]"}pe.working=typeof ArrayBuffer<"u"&&pe(new ArrayBuffer);function Y(A){return typeof ArrayBuffer>"u"?!1:pe.working?pe(A):A instanceof ArrayBuffer}n.isArrayBuffer=Y;function B(A){return l(A)==="[object DataView]"}B.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&B(new DataView(new ArrayBuffer(1),0,1));function Z(A){return typeof DataView>"u"?!1:B.working?B(A):A instanceof DataView}n.isDataView=Z;var ee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function le(A){return l(A)==="[object SharedArrayBuffer]"}function X(A){return typeof ee>"u"?!1:(typeof le.working>"u"&&(le.working=le(new ee)),le.working?le(A):A instanceof ee)}n.isSharedArrayBuffer=X;function R(A){return l(A)==="[object AsyncFunction]"}n.isAsyncFunction=R;function S(A){return l(A)==="[object Map Iterator]"}n.isMapIterator=S;function Q(A){return l(A)==="[object Set Iterator]"}n.isSetIterator=Q;function H(A){return l(A)==="[object Generator]"}n.isGeneratorObject=H;function j(A){return l(A)==="[object WebAssembly.Module]"}n.isWebAssemblyCompiledModule=j;function W(A){return E(A,u)}n.isNumberObject=W;function ae(A){return E(A,h)}n.isStringObject=ae;function x(A){return E(A,d)}n.isBooleanObject=x;function se(A){return o&&E(A,p)}n.isBigIntObject=se;function P(A){return a&&E(A,y)}n.isSymbolObject=P;function f(A){return W(A)||ae(A)||x(A)||se(A)||P(A)}n.isBoxedPrimitive=f;function g(A){return typeof Uint8Array<"u"&&(Y(A)||X(A))}n.isAnyArrayBuffer=g,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(A){Object.defineProperty(n,A,{enumerable:!1,value:function(){throw new Error(A+" is not supported in userland")}})})}(Wm)),Wm}var dg,Gb;function f8(){return Gb||(Gb=1,dg=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),dg}var Hb;function Ik(){return Hb||(Hb=1,function(n){var e=Object.getOwnPropertyDescriptors||function(Z){for(var ee=Object.keys(Z),le={},X=0;X<ee.length;X++)le[ee[X]]=Object.getOwnPropertyDescriptor(Z,ee[X]);return le},t=/%[sdj%]/g;n.format=function(B){if(!F(B)){for(var Z=[],ee=0;ee<arguments.length;ee++)Z.push(o(arguments[ee]));return Z.join(" ")}for(var ee=1,le=arguments,X=le.length,R=String(B).replace(t,function(Q){if(Q==="%%")return"%";if(ee>=X)return Q;switch(Q){case"%s":return String(le[ee++]);case"%d":return Number(le[ee++]);case"%j":try{return JSON.stringify(le[ee++])}catch{return"[Circular]"}default:return Q}}),S=le[ee];ee<X;S=le[++ee])v(S)||!T(S)?R+=" "+S:R+=" "+o(S);return R},n.deprecate=function(B,Z){if(typeof ze<"u"&&ze.noDeprecation===!0)return B;if(typeof ze>"u")return function(){return n.deprecate(B,Z).apply(this,arguments)};var ee=!1;function le(){if(!ee){if(ze.throwDeprecation)throw new Error(Z);ze.traceDeprecation?console.trace(Z):console.error(Z),ee=!0}return B.apply(this,arguments)}return le};var r={},i=/^$/;if(ze.env.NODE_DEBUG){var s=ze.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}n.debuglog=function(B){if(B=B.toUpperCase(),!r[B])if(i.test(B)){var Z=ze.pid;r[B]=function(){var ee=n.format.apply(n,arguments);console.error("%s %d: %s",B,Z,ee)}}else r[B]=function(){};return r[B]};function o(B,Z){var ee={seen:[],stylize:l};return arguments.length>=3&&(ee.depth=arguments[2]),arguments.length>=4&&(ee.colors=arguments[3]),m(Z)?ee.showHidden=Z:Z&&n._extend(ee,Z),k(ee.showHidden)&&(ee.showHidden=!1),k(ee.depth)&&(ee.depth=2),k(ee.colors)&&(ee.colors=!1),k(ee.customInspect)&&(ee.customInspect=!0),ee.colors&&(ee.stylize=a),h(ee,B,ee.depth)}n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(B,Z){var ee=o.styles[Z];return ee?"\x1B["+o.colors[ee][0]+"m"+B+"\x1B["+o.colors[ee][1]+"m":B}function l(B,Z){return B}function u(B){var Z={};return B.forEach(function(ee,le){Z[ee]=!0}),Z}function h(B,Z,ee){if(B.customInspect&&Z&&O(Z.inspect)&&Z.inspect!==n.inspect&&!(Z.constructor&&Z.constructor.prototype===Z)){var le=Z.inspect(ee,B);return F(le)||(le=h(B,le,ee)),le}var X=d(B,Z);if(X)return X;var R=Object.keys(Z),S=u(R);if(B.showHidden&&(R=Object.getOwnPropertyNames(Z)),G(Z)&&(R.indexOf("message")>=0||R.indexOf("description")>=0))return p(Z);if(R.length===0){if(O(Z)){var Q=Z.name?": "+Z.name:"";return B.stylize("[Function"+Q+"]","special")}if(N(Z))return B.stylize(RegExp.prototype.toString.call(Z),"regexp");if(U(Z))return B.stylize(Date.prototype.toString.call(Z),"date");if(G(Z))return p(Z)}var H="",j=!1,W=["{","}"];if(b(Z)&&(j=!0,W=["[","]"]),O(Z)){var ae=Z.name?": "+Z.name:"";H=" [Function"+ae+"]"}if(N(Z)&&(H=" "+RegExp.prototype.toString.call(Z)),U(Z)&&(H=" "+Date.prototype.toUTCString.call(Z)),G(Z)&&(H=" "+p(Z)),R.length===0&&(!j||Z.length==0))return W[0]+H+W[1];if(ee<0)return N(Z)?B.stylize(RegExp.prototype.toString.call(Z),"regexp"):B.stylize("[Object]","special");B.seen.push(Z);var x;return j?x=y(B,Z,ee,S,R):x=R.map(function(se){return E(B,Z,ee,S,se,j)}),B.seen.pop(),_(x,H,W)}function d(B,Z){if(k(Z))return B.stylize("undefined","undefined");if(F(Z)){var ee="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(ee,"string")}if(D(Z))return B.stylize(""+Z,"number");if(m(Z))return B.stylize(""+Z,"boolean");if(v(Z))return B.stylize("null","null")}function p(B){return"["+Error.prototype.toString.call(B)+"]"}function y(B,Z,ee,le,X){for(var R=[],S=0,Q=Z.length;S<Q;++S)de(Z,String(S))?R.push(E(B,Z,ee,le,String(S),!0)):R.push("");return X.forEach(function(H){H.match(/^\d+$/)||R.push(E(B,Z,ee,le,H,!0))}),R}function E(B,Z,ee,le,X,R){var S,Q,H;if(H=Object.getOwnPropertyDescriptor(Z,X)||{value:Z[X]},H.get?H.set?Q=B.stylize("[Getter/Setter]","special"):Q=B.stylize("[Getter]","special"):H.set&&(Q=B.stylize("[Setter]","special")),de(le,X)||(S="["+X+"]"),Q||(B.seen.indexOf(H.value)<0?(v(ee)?Q=h(B,H.value,null):Q=h(B,H.value,ee-1),Q.indexOf(`
`)>-1&&(R?Q=Q.split(`
`).map(function(j){return"  "+j}).join(`
`).slice(2):Q=`
`+Q.split(`
`).map(function(j){return"   "+j}).join(`
`))):Q=B.stylize("[Circular]","special")),k(S)){if(R&&X.match(/^\d+$/))return Q;S=JSON.stringify(""+X),S.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(S=S.slice(1,-1),S=B.stylize(S,"name")):(S=S.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),S=B.stylize(S,"string"))}return S+": "+Q}function _(B,Z,ee){var le=B.reduce(function(X,R){return R.indexOf(`
`)>=0,X+R.replace(/\u001b\[\d\d?m/g,"").length+1},0);return le>60?ee[0]+(Z===""?"":Z+`
 `)+" "+B.join(`,
  `)+" "+ee[1]:ee[0]+Z+" "+B.join(", ")+" "+ee[1]}n.types=d8();function b(B){return Array.isArray(B)}n.isArray=b;function m(B){return typeof B=="boolean"}n.isBoolean=m;function v(B){return B===null}n.isNull=v;function I(B){return B==null}n.isNullOrUndefined=I;function D(B){return typeof B=="number"}n.isNumber=D;function F(B){return typeof B=="string"}n.isString=F;function $(B){return typeof B=="symbol"}n.isSymbol=$;function k(B){return B===void 0}n.isUndefined=k;function N(B){return T(B)&&L(B)==="[object RegExp]"}n.isRegExp=N,n.types.isRegExp=N;function T(B){return typeof B=="object"&&B!==null}n.isObject=T;function U(B){return T(B)&&L(B)==="[object Date]"}n.isDate=U,n.types.isDate=U;function G(B){return T(B)&&(L(B)==="[object Error]"||B instanceof Error)}n.isError=G,n.types.isNativeError=G;function O(B){return typeof B=="function"}n.isFunction=O;function V(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B>"u"}n.isPrimitive=V,n.isBuffer=f8();function L(B){return Object.prototype.toString.call(B)}function re(B){return B<10?"0"+B.toString(10):B.toString(10)}var be=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var B=new Date,Z=[re(B.getHours()),re(B.getMinutes()),re(B.getSeconds())].join(":");return[B.getDate(),be[B.getMonth()],Z].join(" ")}n.log=function(){console.log("%s - %s",ie(),n.format.apply(n,arguments))},n.inherits=Fo,n._extend=function(B,Z){if(!Z||!T(Z))return B;for(var ee=Object.keys(Z),le=ee.length;le--;)B[ee[le]]=Z[ee[le]];return B};function de(B,Z){return Object.prototype.hasOwnProperty.call(B,Z)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;n.promisify=function(Z){if(typeof Z!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&Z[te]){var ee=Z[te];if(typeof ee!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ee,te,{value:ee,enumerable:!1,writable:!1,configurable:!0}),ee}function ee(){for(var le,X,R=new Promise(function(H,j){le=H,X=j}),S=[],Q=0;Q<arguments.length;Q++)S.push(arguments[Q]);S.push(function(H,j){H?X(H):le(j)});try{Z.apply(this,S)}catch(H){X(H)}return R}return Object.setPrototypeOf(ee,Object.getPrototypeOf(Z)),te&&Object.defineProperty(ee,te,{value:ee,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ee,e(Z))},n.promisify.custom=te;function pe(B,Z){if(!B){var ee=new Error("Promise was rejected with a falsy value");ee.reason=B,B=ee}return Z(B)}function Y(B){if(typeof B!="function")throw new TypeError('The "original" argument must be of type Function');function Z(){for(var ee=[],le=0;le<arguments.length;le++)ee.push(arguments[le]);var X=ee.pop();if(typeof X!="function")throw new TypeError("The last argument must be of type Function");var R=this,S=function(){return X.apply(R,arguments)};B.apply(this,ee).then(function(Q){ze.nextTick(S.bind(null,null,Q))},function(Q){ze.nextTick(pe.bind(null,Q,S))})}return Object.setPrototypeOf(Z,Object.getPrototypeOf(B)),Object.defineProperties(Z,e(B)),Z}n.callbackify=Y}($m)),$m}var fg,Kb;function p8(){if(Kb)return fg;Kb=1;function n(p,y){var E=Object.keys(p);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(p);y&&(_=_.filter(function(b){return Object.getOwnPropertyDescriptor(p,b).enumerable})),E.push.apply(E,_)}return E}function e(p){for(var y=1;y<arguments.length;y++){var E=arguments[y]!=null?arguments[y]:{};y%2?n(Object(E),!0).forEach(function(_){t(p,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(E)):n(Object(E)).forEach(function(_){Object.defineProperty(p,_,Object.getOwnPropertyDescriptor(E,_))})}return p}function t(p,y,E){return y in p?Object.defineProperty(p,y,{value:E,enumerable:!0,configurable:!0,writable:!0}):p[y]=E,p}function r(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function i(p,y){for(var E=0;E<y.length;E++){var _=y[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}function s(p,y,E){return y&&i(p.prototype,y),E&&i(p,E),p}var o=Cp(),a=o.Buffer,l=Ik(),u=l.inspect,h=u&&u.custom||"inspect";function d(p,y,E){a.prototype.copy.call(p,y,E)}return fg=function(){function p(){r(this,p),this.head=null,this.tail=null,this.length=0}return s(p,[{key:"push",value:function(E){var _={data:E,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(E){var _={data:E,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(this.length===0)return"";for(var _=this.head,b=""+_.data;_=_.next;)b+=E+_.data;return b}},{key:"concat",value:function(E){if(this.length===0)return a.alloc(0);for(var _=a.allocUnsafe(E>>>0),b=this.head,m=0;b;)d(b.data,_,m),m+=b.data.length,b=b.next;return _}},{key:"consume",value:function(E,_){var b;return E<this.head.data.length?(b=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):E===this.head.data.length?b=this.shift():b=_?this._getString(E):this._getBuffer(E),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var _=this.head,b=1,m=_.data;for(E-=m.length;_=_.next;){var v=_.data,I=E>v.length?v.length:E;if(I===v.length?m+=v:m+=v.slice(0,E),E-=I,E===0){I===v.length?(++b,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=v.slice(I));break}++b}return this.length-=b,m}},{key:"_getBuffer",value:function(E){var _=a.allocUnsafe(E),b=this.head,m=1;for(b.data.copy(_),E-=b.data.length;b=b.next;){var v=b.data,I=E>v.length?v.length:E;if(v.copy(_,_.length-E,0,I),E-=I,E===0){I===v.length?(++m,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=v.slice(I));break}++m}return this.length-=m,_}},{key:h,value:function(E,_){return u(this,e({},_,{depth:0,customInspect:!1}))}}]),p}(),fg}var pg,Qb;function bk(){if(Qb)return pg;Qb=1;function n(o,a){var l=this,u=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return u||h?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ze.nextTick(i,this,o)):ze.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(d){!a&&d?l._writableState?l._writableState.errorEmitted?ze.nextTick(t,l):(l._writableState.errorEmitted=!0,ze.nextTick(e,l,d)):ze.nextTick(e,l,d):a?(ze.nextTick(t,l),a(d)):ze.nextTick(t,l)}),this)}function e(o,a){i(o,a),t(o)}function t(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var l=o._readableState,u=o._writableState;l&&l.autoDestroy||u&&u.autoDestroy?o.destroy(a):o.emit("error",a)}return pg={destroy:n,undestroy:r,errorOrDestroy:s},pg}var mg={},Yb;function bl(){if(Yb)return mg;Yb=1;function n(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function t(a,l,u){u||(u=Error);function h(p,y,E){return typeof l=="string"?l:l(p,y,E)}var d=function(p){n(y,p);function y(E,_,b){return p.call(this,h(E,_,b))||this}return y}(u);d.prototype.name=u.name,d.prototype.code=a,e[a]=d}function r(a,l){if(Array.isArray(a)){var u=a.length;return a=a.map(function(h){return String(h)}),u>2?"one of ".concat(l," ").concat(a.slice(0,u-1).join(", "),", or ")+a[u-1]:u===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,u){return a.substr(!u||u<0?0:+u,l.length)===l}function s(a,l,u){return(u===void 0||u>a.length)&&(u=a.length),a.substring(u-l.length,u)===l}function o(a,l,u){return typeof u!="number"&&(u=0),u+l.length>a.length?!1:a.indexOf(l,u)!==-1}return t("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(a,l,u){var h;typeof l=="string"&&i(l,"not ")?(h="must not be",l=l.replace(/^not /,"")):h="must be";var d;if(s(a," argument"))d="The ".concat(a," ").concat(h," ").concat(r(l,"type"));else{var p=o(a,".")?"property":"argument";d='The "'.concat(a,'" ').concat(p," ").concat(h," ").concat(r(l,"type"))}return d+=". Received type ".concat(typeof u),d},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),mg.codes=e,mg}var gg,Xb;function Ak(){if(Xb)return gg;Xb=1;var n=bl().codes.ERR_INVALID_OPT_VALUE;function e(r,i,s){return r.highWaterMark!=null?r.highWaterMark:i?r[s]:null}function t(r,i,s,o){var a=e(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?s:"highWaterMark";throw new n(l,a)}return Math.floor(a)}return r.objectMode?16:16*1024}return gg={getHighWaterMark:t},gg}var yg,Jb;function m8(){if(Jb)return yg;Jb=1,yg=n;function n(t,r){if(e("noDeprecation"))return t;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!Br.localStorage)return!1}catch{return!1}var r=Br.localStorage[t];return r==null?!1:String(r).toLowerCase()==="true"}return yg}var vg,Zb;function xk(){if(Zb)return vg;Zb=1,vg=N;function n(X){var R=this;this.next=null,this.entry=null,this.finish=function(){le(R,X)}}var e;N.WritableState=$;var t={deprecate:m8()},r=yk(),i=Cp().Buffer,s=Br.Uint8Array||function(){};function o(X){return i.from(X)}function a(X){return i.isBuffer(X)||X instanceof s}var l=bk(),u=Ak(),h=u.getHighWaterMark,d=bl().codes,p=d.ERR_INVALID_ARG_TYPE,y=d.ERR_METHOD_NOT_IMPLEMENTED,E=d.ERR_MULTIPLE_CALLBACK,_=d.ERR_STREAM_CANNOT_PIPE,b=d.ERR_STREAM_DESTROYED,m=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,I=d.ERR_UNKNOWN_ENCODING,D=l.errorOrDestroy;Fo(N,r);function F(){}function $(X,R,S){e=e||il(),X=X||{},typeof S!="boolean"&&(S=R instanceof e),this.objectMode=!!X.objectMode,S&&(this.objectMode=this.objectMode||!!X.writableObjectMode),this.highWaterMark=h(this,X,"writableHighWaterMark",S),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Q=X.decodeStrings===!1;this.decodeStrings=!Q,this.defaultEncoding=X.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){be(R,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}$.prototype.getBuffer=function(){for(var R=this.bufferedRequest,S=[];R;)S.push(R),R=R.next;return S},function(){try{Object.defineProperty($.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(R){return k.call(this,R)?!0:this!==N?!1:R&&R._writableState instanceof $}})):k=function(R){return R instanceof this};function N(X){e=e||il();var R=this instanceof e;if(!R&&!k.call(N,this))return new N(X);this._writableState=new $(X,this,R),this.writable=!0,X&&(typeof X.write=="function"&&(this._write=X.write),typeof X.writev=="function"&&(this._writev=X.writev),typeof X.destroy=="function"&&(this._destroy=X.destroy),typeof X.final=="function"&&(this._final=X.final)),r.call(this)}N.prototype.pipe=function(){D(this,new _)};function T(X,R){var S=new v;D(X,S),ze.nextTick(R,S)}function U(X,R,S,Q){var H;return S===null?H=new m:typeof S!="string"&&!R.objectMode&&(H=new p("chunk",["string","Buffer"],S)),H?(D(X,H),ze.nextTick(Q,H),!1):!0}N.prototype.write=function(X,R,S){var Q=this._writableState,H=!1,j=!Q.objectMode&&a(X);return j&&!i.isBuffer(X)&&(X=o(X)),typeof R=="function"&&(S=R,R=null),j?R="buffer":R||(R=Q.defaultEncoding),typeof S!="function"&&(S=F),Q.ending?T(this,S):(j||U(this,Q,X,S))&&(Q.pendingcb++,H=O(this,Q,j,X,R,S)),H},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var X=this._writableState;X.corked&&(X.corked--,!X.writing&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest&&te(this,X))},N.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new I(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(X,R,S){return!X.objectMode&&X.decodeStrings!==!1&&typeof R=="string"&&(R=i.from(R,S)),R}Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(X,R,S,Q,H,j){if(!S){var W=G(R,Q,H);Q!==W&&(S=!0,H="buffer",Q=W)}var ae=R.objectMode?1:Q.length;R.length+=ae;var x=R.length<R.highWaterMark;if(x||(R.needDrain=!0),R.writing||R.corked){var se=R.lastBufferedRequest;R.lastBufferedRequest={chunk:Q,encoding:H,isBuf:S,callback:j,next:null},se?se.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else V(X,R,!1,ae,Q,H,j);return x}function V(X,R,S,Q,H,j,W){R.writelen=Q,R.writecb=W,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new b("write")):S?X._writev(H,R.onwrite):X._write(H,j,R.onwrite),R.sync=!1}function L(X,R,S,Q,H){--R.pendingcb,S?(ze.nextTick(H,Q),ze.nextTick(Z,X,R),X._writableState.errorEmitted=!0,D(X,Q)):(H(Q),X._writableState.errorEmitted=!0,D(X,Q),Z(X,R))}function re(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}function be(X,R){var S=X._writableState,Q=S.sync,H=S.writecb;if(typeof H!="function")throw new E;if(re(S),R)L(X,S,Q,R,H);else{var j=pe(S)||X.destroyed;!j&&!S.corked&&!S.bufferProcessing&&S.bufferedRequest&&te(X,S),Q?ze.nextTick(ie,X,S,j,H):ie(X,S,j,H)}}function ie(X,R,S,Q){S||de(X,R),R.pendingcb--,Q(),Z(X,R)}function de(X,R){R.length===0&&R.needDrain&&(R.needDrain=!1,X.emit("drain"))}function te(X,R){R.bufferProcessing=!0;var S=R.bufferedRequest;if(X._writev&&S&&S.next){var Q=R.bufferedRequestCount,H=new Array(Q),j=R.corkedRequestsFree;j.entry=S;for(var W=0,ae=!0;S;)H[W]=S,S.isBuf||(ae=!1),S=S.next,W+=1;H.allBuffers=ae,V(X,R,!0,R.length,H,"",j.finish),R.pendingcb++,R.lastBufferedRequest=null,j.next?(R.corkedRequestsFree=j.next,j.next=null):R.corkedRequestsFree=new n(R),R.bufferedRequestCount=0}else{for(;S;){var x=S.chunk,se=S.encoding,P=S.callback,f=R.objectMode?1:x.length;if(V(X,R,!1,f,x,se,P),S=S.next,R.bufferedRequestCount--,R.writing)break}S===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=S,R.bufferProcessing=!1}N.prototype._write=function(X,R,S){S(new y("_write()"))},N.prototype._writev=null,N.prototype.end=function(X,R,S){var Q=this._writableState;return typeof X=="function"?(S=X,X=null,R=null):typeof R=="function"&&(S=R,R=null),X!=null&&this.write(X,R),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||ee(this,Q,S),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function pe(X){return X.ending&&X.length===0&&X.bufferedRequest===null&&!X.finished&&!X.writing}function Y(X,R){X._final(function(S){R.pendingcb--,S&&D(X,S),R.prefinished=!0,X.emit("prefinish"),Z(X,R)})}function B(X,R){!R.prefinished&&!R.finalCalled&&(typeof X._final=="function"&&!R.destroyed?(R.pendingcb++,R.finalCalled=!0,ze.nextTick(Y,X,R)):(R.prefinished=!0,X.emit("prefinish")))}function Z(X,R){var S=pe(R);if(S&&(B(X,R),R.pendingcb===0&&(R.finished=!0,X.emit("finish"),R.autoDestroy))){var Q=X._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&X.destroy()}return S}function ee(X,R,S){R.ending=!0,Z(X,R),S&&(R.finished?ze.nextTick(S):X.once("finish",S)),R.ended=!0,X.writable=!1}function le(X,R,S){var Q=X.entry;for(X.entry=null;Q;){var H=Q.callback;R.pendingcb--,H(S),Q=Q.next}R.corkedRequestsFree.next=X}return Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),N.prototype.destroy=l.destroy,N.prototype._undestroy=l.undestroy,N.prototype._destroy=function(X,R){R(X)},vg}var _g,e1;function il(){if(e1)return _g;e1=1;var n=Object.keys||function(u){var h=[];for(var d in u)h.push(d);return h};_g=o;var e=Sk(),t=xk();Fo(o,e);for(var r=n(t.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=t.prototype[s])}function o(u){if(!(this instanceof o))return new o(u);e.call(this,u),t.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||ze.nextTick(l,this)}function l(u){u.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),_g}var wg={},Gh={exports:{}},t1;function g8(){return t1||(t1=1,function(n,e){var t=Cp(),r=t.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(Gh,Gh.exports)),Gh.exports}var n1;function gv(){if(n1)return wg;n1=1;var n=g8().Buffer,e=n.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(m){if(!m)return"utf8";for(var v;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(v)return;m=(""+m).toLowerCase(),v=!0}}function r(m){var v=t(m);if(typeof v!="string"&&(n.isEncoding===e||!e(m)))throw new Error("Unknown encoding: "+m);return v||m}wg.StringDecoder=i;function i(m){this.encoding=r(m);var v;switch(this.encoding){case"utf16le":this.text=d,this.end=p,v=4;break;case"utf8":this.fillLast=l,v=4;break;case"base64":this.text=y,this.end=E,v=3;break;default:this.write=_,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(v)}i.prototype.write=function(m){if(m.length===0)return"";var v,I;if(this.lastNeed){if(v=this.fillLast(m),v===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<m.length?v?v+this.text(m,I):this.text(m,I):v||""},i.prototype.end=h,i.prototype.text=u,i.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function s(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function o(m,v,I){var D=v.length-1;if(D<I)return 0;var F=s(v[D]);return F>=0?(F>0&&(m.lastNeed=F-1),F):--D<I||F===-2?0:(F=s(v[D]),F>=0?(F>0&&(m.lastNeed=F-2),F):--D<I||F===-2?0:(F=s(v[D]),F>=0?(F>0&&(F===2?F=0:m.lastNeed=F-3),F):0))}function a(m,v,I){if((v[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var v=this.lastTotal-this.lastNeed,I=a(this,m);if(I!==void 0)return I;if(this.lastNeed<=m.length)return m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,v,0,m.length),this.lastNeed-=m.length}function u(m,v){var I=o(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=I;var D=m.length-(I-this.lastNeed);return m.copy(this.lastChar,0,D),m.toString("utf8",v,D)}function h(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"":v}function d(m,v){if((m.length-v)%2===0){var I=m.toString("utf16le",v);if(I){var D=I.charCodeAt(I.length-1);if(D>=55296&&D<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function p(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,I)}return v}function y(m,v){var I=(m.length-v)%3;return I===0?m.toString("base64",v):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-I))}function E(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(m){return m.toString(this.encoding)}function b(m){return m&&m.length?this.write(m):""}return wg}var Eg,r1;function t0(){if(r1)return Eg;r1=1;var n=bl().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];s.apply(this,l)}}}function t(){}function r(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=e(a||t);var l=o.readable||o.readable!==!1&&s.readable,u=o.writable||o.writable!==!1&&s.writable,h=function(){s.writable||p()},d=s._writableState&&s._writableState.finished,p=function(){u=!1,d=!0,l||a.call(s)},y=s._readableState&&s._readableState.endEmitted,E=function(){l=!1,y=!0,u||a.call(s)},_=function(I){a.call(s,I)},b=function(){var I;if(l&&!y)return(!s._readableState||!s._readableState.ended)&&(I=new n),a.call(s,I);if(u&&!d)return(!s._writableState||!s._writableState.ended)&&(I=new n),a.call(s,I)},m=function(){s.req.on("finish",p)};return r(s)?(s.on("complete",p),s.on("abort",b),s.req?m():s.on("request",m)):u&&!s._writableState&&(s.on("end",h),s.on("close",h)),s.on("end",E),s.on("finish",p),o.error!==!1&&s.on("error",_),s.on("close",b),function(){s.removeListener("complete",p),s.removeListener("abort",b),s.removeListener("request",m),s.req&&s.req.removeListener("finish",p),s.removeListener("end",h),s.removeListener("close",h),s.removeListener("finish",p),s.removeListener("end",E),s.removeListener("error",_),s.removeListener("close",b)}}return Eg=i,Eg}var Tg,i1;function y8(){if(i1)return Tg;i1=1;var n;function e(m,v,I){return v in m?Object.defineProperty(m,v,{value:I,enumerable:!0,configurable:!0,writable:!0}):m[v]=I,m}var t=t0(),r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),u=Symbol("stream");function h(m,v){return{value:m,done:v}}function d(m){var v=m[r];if(v!==null){var I=m[u].read();I!==null&&(m[a]=null,m[r]=null,m[i]=null,v(h(I,!1)))}}function p(m){ze.nextTick(d,m)}function y(m,v){return function(I,D){m.then(function(){if(v[o]){I(h(void 0,!0));return}v[l](I,D)},D)}}var E=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((n={get stream(){return this[u]},next:function(){var v=this,I=this[s];if(I!==null)return Promise.reject(I);if(this[o])return Promise.resolve(h(void 0,!0));if(this[u].destroyed)return new Promise(function(k,N){ze.nextTick(function(){v[s]?N(v[s]):k(h(void 0,!0))})});var D=this[a],F;if(D)F=new Promise(y(D,this));else{var $=this[u].read();if($!==null)return Promise.resolve(h($,!1));F=new Promise(this[l])}return this[a]=F,F}},e(n,Symbol.asyncIterator,function(){return this}),e(n,"return",function(){var v=this;return new Promise(function(I,D){v[u].destroy(null,function(F){if(F){D(F);return}I(h(void 0,!0))})})}),n),E),b=function(v){var I,D=Object.create(_,(I={},e(I,u,{value:v,writable:!0}),e(I,r,{value:null,writable:!0}),e(I,i,{value:null,writable:!0}),e(I,s,{value:null,writable:!0}),e(I,o,{value:v._readableState.endEmitted,writable:!0}),e(I,l,{value:function($,k){var N=D[u].read();N?(D[a]=null,D[r]=null,D[i]=null,$(h(N,!1))):(D[r]=$,D[i]=k)},writable:!0}),I));return D[a]=null,t(v,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var $=D[i];$!==null&&(D[a]=null,D[r]=null,D[i]=null,$(F)),D[s]=F;return}var k=D[r];k!==null&&(D[a]=null,D[r]=null,D[i]=null,k(h(void 0,!0))),D[o]=!0}),v.on("readable",p.bind(null,D)),D};return Tg=b,Tg}var Ig,s1;function v8(){return s1||(s1=1,Ig=function(){throw new Error("Readable.from is not available in the browser")}),Ig}var bg,o1;function Sk(){if(o1)return bg;o1=1,bg=T;var n;T.ReadableState=N,Xw.EventEmitter;var e=function(W,ae){return W.listeners(ae).length},t=yk(),r=Cp().Buffer,i=Br.Uint8Array||function(){};function s(j){return r.from(j)}function o(j){return r.isBuffer(j)||j instanceof i}var a=Ik(),l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var u=p8(),h=bk(),d=Ak(),p=d.getHighWaterMark,y=bl().codes,E=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,m=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,I,D;Fo(T,t);var F=h.errorOrDestroy,$=["error","close","destroy","pause","resume"];function k(j,W,ae){if(typeof j.prependListener=="function")return j.prependListener(W,ae);!j._events||!j._events[W]?j.on(W,ae):Array.isArray(j._events[W])?j._events[W].unshift(ae):j._events[W]=[ae,j._events[W]]}function N(j,W,ae){n=n||il(),j=j||{},typeof ae!="boolean"&&(ae=W instanceof n),this.objectMode=!!j.objectMode,ae&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=p(this,j,"readableHighWaterMark",ae),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(v||(v=gv().StringDecoder),this.decoder=new v(j.encoding),this.encoding=j.encoding)}function T(j){if(n=n||il(),!(this instanceof T))return new T(j);var W=this instanceof n;this._readableState=new N(j,this,W),this.readable=!0,j&&(typeof j.read=="function"&&(this._read=j.read),typeof j.destroy=="function"&&(this._destroy=j.destroy)),t.call(this)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),T.prototype.destroy=h.destroy,T.prototype._undestroy=h.undestroy,T.prototype._destroy=function(j,W){W(j)},T.prototype.push=function(j,W){var ae=this._readableState,x;return ae.objectMode?x=!0:typeof j=="string"&&(W=W||ae.defaultEncoding,W!==ae.encoding&&(j=r.from(j,W),W=""),x=!0),U(this,j,W,!1,x)},T.prototype.unshift=function(j){return U(this,j,null,!0,!1)};function U(j,W,ae,x,se){l("readableAddChunk",W);var P=j._readableState;if(W===null)P.reading=!1,be(j,P);else{var f;if(se||(f=O(P,W)),f)F(j,f);else if(P.objectMode||W&&W.length>0)if(typeof W!="string"&&!P.objectMode&&Object.getPrototypeOf(W)!==r.prototype&&(W=s(W)),x)P.endEmitted?F(j,new m):G(j,P,W,!0);else if(P.ended)F(j,new _);else{if(P.destroyed)return!1;P.reading=!1,P.decoder&&!ae?(W=P.decoder.write(W),P.objectMode||W.length!==0?G(j,P,W,!1):te(j,P)):G(j,P,W,!1)}else x||(P.reading=!1,te(j,P))}return!P.ended&&(P.length<P.highWaterMark||P.length===0)}function G(j,W,ae,x){W.flowing&&W.length===0&&!W.sync?(W.awaitDrain=0,j.emit("data",ae)):(W.length+=W.objectMode?1:ae.length,x?W.buffer.unshift(ae):W.buffer.push(ae),W.needReadable&&ie(j)),te(j,W)}function O(j,W){var ae;return!o(W)&&typeof W!="string"&&W!==void 0&&!j.objectMode&&(ae=new E("chunk",["string","Buffer","Uint8Array"],W)),ae}T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(j){v||(v=gv().StringDecoder);var W=new v(j);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;for(var ae=this._readableState.buffer.head,x="";ae!==null;)x+=W.write(ae.data),ae=ae.next;return this._readableState.buffer.clear(),x!==""&&this._readableState.buffer.push(x),this._readableState.length=x.length,this};var V=1073741824;function L(j){return j>=V?j=V:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}function re(j,W){return j<=0||W.length===0&&W.ended?0:W.objectMode?1:j!==j?W.flowing&&W.length?W.buffer.head.data.length:W.length:(j>W.highWaterMark&&(W.highWaterMark=L(j)),j<=W.length?j:W.ended?W.length:(W.needReadable=!0,0))}T.prototype.read=function(j){l("read",j),j=parseInt(j,10);var W=this._readableState,ae=j;if(j!==0&&(W.emittedReadable=!1),j===0&&W.needReadable&&((W.highWaterMark!==0?W.length>=W.highWaterMark:W.length>0)||W.ended))return l("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?S(this):ie(this),null;if(j=re(j,W),j===0&&W.ended)return W.length===0&&S(this),null;var x=W.needReadable;l("need readable",x),(W.length===0||W.length-j<W.highWaterMark)&&(x=!0,l("length less than watermark",x)),W.ended||W.reading?(x=!1,l("reading or ended",x)):x&&(l("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(j=re(ae,W)));var se;return j>0?se=R(j,W):se=null,se===null?(W.needReadable=W.length<=W.highWaterMark,j=0):(W.length-=j,W.awaitDrain=0),W.length===0&&(W.ended||(W.needReadable=!0),ae!==j&&W.ended&&S(this)),se!==null&&this.emit("data",se),se};function be(j,W){if(l("onEofChunk"),!W.ended){if(W.decoder){var ae=W.decoder.end();ae&&ae.length&&(W.buffer.push(ae),W.length+=W.objectMode?1:ae.length)}W.ended=!0,W.sync?ie(j):(W.needReadable=!1,W.emittedReadable||(W.emittedReadable=!0,de(j)))}}function ie(j){var W=j._readableState;l("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(l("emitReadable",W.flowing),W.emittedReadable=!0,ze.nextTick(de,j))}function de(j){var W=j._readableState;l("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&(W.length||W.ended)&&(j.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,X(j)}function te(j,W){W.readingMore||(W.readingMore=!0,ze.nextTick(pe,j,W))}function pe(j,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&W.length===0);){var ae=W.length;if(l("maybeReadMore read 0"),j.read(0),ae===W.length)break}W.readingMore=!1}T.prototype._read=function(j){F(this,new b("_read()"))},T.prototype.pipe=function(j,W){var ae=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=j;break;case 1:x.pipes=[x.pipes,j];break;default:x.pipes.push(j);break}x.pipesCount+=1,l("pipe count=%d opts=%j",x.pipesCount,W);var se=(!W||W.end!==!1)&&j!==ze.stdout&&j!==ze.stderr,P=se?g:xe;x.endEmitted?ze.nextTick(P):ae.once("end",P),j.on("unpipe",f);function f(Ce,De){l("onunpipe"),Ce===ae&&De&&De.hasUnpiped===!1&&(De.hasUnpiped=!0,J())}function g(){l("onend"),j.end()}var A=Y(ae);j.on("drain",A);var q=!1;function J(){l("cleanup"),j.removeListener("close",we),j.removeListener("finish",ge),j.removeListener("drain",A),j.removeListener("error",fe),j.removeListener("unpipe",f),ae.removeListener("end",g),ae.removeListener("end",xe),ae.removeListener("data",K),q=!0,x.awaitDrain&&(!j._writableState||j._writableState.needDrain)&&A()}ae.on("data",K);function K(Ce){l("ondata");var De=j.write(Ce);l("dest.write",De),De===!1&&((x.pipesCount===1&&x.pipes===j||x.pipesCount>1&&H(x.pipes,j)!==-1)&&!q&&(l("false write response, pause",x.awaitDrain),x.awaitDrain++),ae.pause())}function fe(Ce){l("onerror",Ce),xe(),j.removeListener("error",fe),e(j,"error")===0&&F(j,Ce)}k(j,"error",fe);function we(){j.removeListener("finish",ge),xe()}j.once("close",we);function ge(){l("onfinish"),j.removeListener("close",we),xe()}j.once("finish",ge);function xe(){l("unpipe"),ae.unpipe(j)}return j.emit("pipe",ae),x.flowing||(l("pipe resume"),ae.resume()),j};function Y(j){return function(){var ae=j._readableState;l("pipeOnDrain",ae.awaitDrain),ae.awaitDrain&&ae.awaitDrain--,ae.awaitDrain===0&&e(j,"data")&&(ae.flowing=!0,X(j))}}T.prototype.unpipe=function(j){var W=this._readableState,ae={hasUnpiped:!1};if(W.pipesCount===0)return this;if(W.pipesCount===1)return j&&j!==W.pipes?this:(j||(j=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,j&&j.emit("unpipe",this,ae),this);if(!j){var x=W.pipes,se=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var P=0;P<se;P++)x[P].emit("unpipe",this,{hasUnpiped:!1});return this}var f=H(W.pipes,j);return f===-1?this:(W.pipes.splice(f,1),W.pipesCount-=1,W.pipesCount===1&&(W.pipes=W.pipes[0]),j.emit("unpipe",this,ae),this)},T.prototype.on=function(j,W){var ae=t.prototype.on.call(this,j,W),x=this._readableState;return j==="data"?(x.readableListening=this.listenerCount("readable")>0,x.flowing!==!1&&this.resume()):j==="readable"&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,l("on readable",x.length,x.reading),x.length?ie(this):x.reading||ze.nextTick(Z,this)),ae},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(j,W){var ae=t.prototype.removeListener.call(this,j,W);return j==="readable"&&ze.nextTick(B,this),ae},T.prototype.removeAllListeners=function(j){var W=t.prototype.removeAllListeners.apply(this,arguments);return(j==="readable"||j===void 0)&&ze.nextTick(B,this),W};function B(j){var W=j._readableState;W.readableListening=j.listenerCount("readable")>0,W.resumeScheduled&&!W.paused?W.flowing=!0:j.listenerCount("data")>0&&j.resume()}function Z(j){l("readable nexttick read 0"),j.read(0)}T.prototype.resume=function(){var j=this._readableState;return j.flowing||(l("resume"),j.flowing=!j.readableListening,ee(this,j)),j.paused=!1,this};function ee(j,W){W.resumeScheduled||(W.resumeScheduled=!0,ze.nextTick(le,j,W))}function le(j,W){l("resume",W.reading),W.reading||j.read(0),W.resumeScheduled=!1,j.emit("resume"),X(j),W.flowing&&!W.reading&&j.read(0)}T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function X(j){var W=j._readableState;for(l("flow",W.flowing);W.flowing&&j.read()!==null;);}T.prototype.wrap=function(j){var W=this,ae=this._readableState,x=!1;j.on("end",function(){if(l("wrapped end"),ae.decoder&&!ae.ended){var f=ae.decoder.end();f&&f.length&&W.push(f)}W.push(null)}),j.on("data",function(f){if(l("wrapped data"),ae.decoder&&(f=ae.decoder.write(f)),!(ae.objectMode&&f==null)&&!(!ae.objectMode&&(!f||!f.length))){var g=W.push(f);g||(x=!0,j.pause())}});for(var se in j)this[se]===void 0&&typeof j[se]=="function"&&(this[se]=function(g){return function(){return j[g].apply(j,arguments)}}(se));for(var P=0;P<$.length;P++)j.on($[P],this.emit.bind(this,$[P]));return this._read=function(f){l("wrapped _read",f),x&&(x=!1,j.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return I===void 0&&(I=y8()),I(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),T._fromList=R,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function R(j,W){if(W.length===0)return null;var ae;return W.objectMode?ae=W.buffer.shift():!j||j>=W.length?(W.decoder?ae=W.buffer.join(""):W.buffer.length===1?ae=W.buffer.first():ae=W.buffer.concat(W.length),W.buffer.clear()):ae=W.buffer.consume(j,W.decoder),ae}function S(j){var W=j._readableState;l("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,ze.nextTick(Q,W,j))}function Q(j,W){if(l("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&j.length===0&&(j.endEmitted=!0,W.readable=!1,W.emit("end"),j.autoDestroy)){var ae=W._writableState;(!ae||ae.autoDestroy&&ae.finished)&&W.destroy()}}typeof Symbol=="function"&&(T.from=function(j,W){return D===void 0&&(D=v8()),D(T,j,W)});function H(j,W){for(var ae=0,x=j.length;ae<x;ae++)if(j[ae]===W)return ae;return-1}return bg}var Ag,a1;function Rk(){if(a1)return Ag;a1=1,Ag=a;var n=bl().codes,e=n.ERR_METHOD_NOT_IMPLEMENTED,t=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=n.ERR_TRANSFORM_WITH_LENGTH_0,s=il();Fo(a,s);function o(h,d){var p=this._transformState;p.transforming=!1;var y=p.writecb;if(y===null)return this.emit("error",new t);p.writechunk=null,p.writecb=null,d!=null&&this.push(d),y(h);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function a(h){if(!(this instanceof a))return new a(h);s.call(this,h),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",l)}function l(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(d,p){u(h,d,p)}):u(this,null,null)}a.prototype.push=function(h,d){return this._transformState.needTransform=!1,s.prototype.push.call(this,h,d)},a.prototype._transform=function(h,d,p){p(new e("_transform()"))},a.prototype._write=function(h,d,p){var y=this._transformState;if(y.writecb=p,y.writechunk=h,y.writeencoding=d,!y.transforming){var E=this._readableState;(y.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},a.prototype._read=function(h){var d=this._transformState;d.writechunk!==null&&!d.transforming?(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform)):d.needTransform=!0},a.prototype._destroy=function(h,d){s.prototype._destroy.call(this,h,function(p){d(p)})};function u(h,d,p){if(d)return h.emit("error",d);if(p!=null&&h.push(p),h._writableState.length)throw new i;if(h._transformState.transforming)throw new r;return h.push(null)}return Ag}var xg,l1;function _8(){if(l1)return xg;l1=1,xg=e;var n=Rk();Fo(e,n);function e(t){if(!(this instanceof e))return new e(t);n.call(this,t)}return e.prototype._transform=function(t,r,i){i(null,t)},xg}var Sg,u1;function w8(){if(u1)return Sg;u1=1;var n;function e(p){var y=!1;return function(){y||(y=!0,p.apply(void 0,arguments))}}var t=bl().codes,r=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function s(p){if(p)throw p}function o(p){return p.setHeader&&typeof p.abort=="function"}function a(p,y,E,_){_=e(_);var b=!1;p.on("close",function(){b=!0}),n===void 0&&(n=t0()),n(p,{readable:y,writable:E},function(v){if(v)return _(v);b=!0,_()});var m=!1;return function(v){if(!b&&!m){if(m=!0,o(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();_(v||new i("pipe"))}}}function l(p){p()}function u(p,y){return p.pipe(y)}function h(p){return!p.length||typeof p[p.length-1]!="function"?s:p.pop()}function d(){for(var p=arguments.length,y=new Array(p),E=0;E<p;E++)y[E]=arguments[E];var _=h(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new r("streams");var b,m=y.map(function(v,I){var D=I<y.length-1,F=I>0;return a(v,D,F,function($){b||(b=$),$&&m.forEach(l),!D&&(m.forEach(l),_(b))})});return y.reduce(u)}return Sg=d,Sg}var n0=dr,r0=Xw.EventEmitter,E8=Fo;E8(dr,r0);dr.Readable=Sk();dr.Writable=xk();dr.Duplex=il();dr.Transform=Rk();dr.PassThrough=_8();dr.finished=t0();dr.pipeline=w8();dr.Stream=dr;function dr(){r0.call(this)}dr.prototype.pipe=function(n,e){var t=this;function r(h){n.writable&&n.write(h)===!1&&t.pause&&t.pause()}t.on("data",r);function i(){t.readable&&t.resume&&t.resume()}n.on("drain",i),!n._isStdio&&(!e||e.end!==!1)&&(t.on("end",o),t.on("close",a));var s=!1;function o(){s||(s=!0,n.end())}function a(){s||(s=!0,typeof n.destroy=="function"&&n.destroy())}function l(h){if(u(),r0.listenerCount(this,"error")===0)throw h}t.on("error",l),n.on("error",l);function u(){t.removeListener("data",r),n.removeListener("drain",i),t.removeListener("end",o),t.removeListener("close",a),t.removeListener("error",l),n.removeListener("error",l),t.removeListener("end",u),t.removeListener("close",u),n.removeListener("close",u)}return t.on("end",u),t.on("close",u),n.on("close",u),n.emit("pipe",t),n};(function(n){(function(e){e.parser=function(R,S){return new r(R,S)},e.SAXParser=r,e.SAXStream=h,e.createStream=u,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(R,S){if(!(this instanceof r))return new r(R,S);var Q=this;s(Q),Q.q=Q.c="",Q.bufferCheckPosition=e.MAX_BUFFER_LENGTH,Q.opt=S||{},Q.opt.lowercase=Q.opt.lowercase||Q.opt.lowercasetags,Q.looseCase=Q.opt.lowercase?"toLowerCase":"toUpperCase",Q.tags=[],Q.closed=Q.closedRoot=Q.sawRoot=!1,Q.tag=Q.error=null,Q.strict=!!R,Q.noscript=!!(R||Q.opt.noscript),Q.state=T.BEGIN,Q.strictEntities=Q.opt.strictEntities,Q.ENTITIES=Q.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),Q.attribList=[],Q.opt.xmlns&&(Q.ns=Object.create(_)),Q.trackPosition=Q.opt.position!==!1,Q.trackPosition&&(Q.position=Q.line=Q.column=0),G(Q,"onready")}Object.create||(Object.create=function(R){function S(){}S.prototype=R;var Q=new S;return Q}),Object.keys||(Object.keys=function(R){var S=[];for(var Q in R)R.hasOwnProperty(Q)&&S.push(Q);return S});function i(R){for(var S=Math.max(e.MAX_BUFFER_LENGTH,10),Q=0,H=0,j=t.length;H<j;H++){var W=R[t[H]].length;if(W>S)switch(t[H]){case"textNode":V(R);break;case"cdata":O(R,"oncdata",R.cdata),R.cdata="";break;case"script":O(R,"onscript",R.script),R.script="";break;default:re(R,"Max buffer length exceeded: "+t[H])}Q=Math.max(Q,W)}var ae=e.MAX_BUFFER_LENGTH-Q;R.bufferCheckPosition=ae+R.position}function s(R){for(var S=0,Q=t.length;S<Q;S++)R[t[S]]=""}function o(R){V(R),R.cdata!==""&&(O(R,"oncdata",R.cdata),R.cdata=""),R.script!==""&&(O(R,"onscript",R.script),R.script="")}r.prototype={end:function(){be(this)},write:X,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=n0.Stream}catch{a=function(){}}var l=e.EVENTS.filter(function(R){return R!=="error"&&R!=="end"});function u(R,S){return new h(R,S)}function h(R,S){if(!(this instanceof h))return new h(R,S);a.apply(this),this._parser=new r(R,S),this.writable=!0,this.readable=!0;var Q=this;this._parser.onend=function(){Q.emit("end")},this._parser.onerror=function(H){Q.emit("error",H),Q._parser.error=null},this._decoder=null,l.forEach(function(H){Object.defineProperty(Q,"on"+H,{get:function(){return Q._parser["on"+H]},set:function(j){if(!j)return Q.removeAllListeners(H),Q._parser["on"+H]=j,j;Q.on(H,j)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(a.prototype,{constructor:{value:h}}),h.prototype.write=function(R){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(R)){if(!this._decoder){var S=gv().StringDecoder;this._decoder=new S("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},h.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},h.prototype.on=function(R,S){var Q=this;return!Q._parser["on"+R]&&l.indexOf(R)!==-1&&(Q._parser["on"+R]=function(){var H=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);H.splice(0,0,R),Q.emit.apply(Q,H)}),a.prototype.on.call(Q,R,S)};var d="[CDATA[",p="DOCTYPE",y="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",_={xml:y,xmlns:E},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function D(R){return R===" "||R===`
`||R==="\r"||R==="	"}function F(R){return R==='"'||R==="'"}function $(R){return R===">"||D(R)}function k(R,S){return R.test(S)}function N(R,S){return!k(R,S)}var T=0;e.STATE={BEGIN:T++,BEGIN_WHITESPACE:T++,TEXT:T++,TEXT_ENTITY:T++,OPEN_WAKA:T++,SGML_DECL:T++,SGML_DECL_QUOTED:T++,DOCTYPE:T++,DOCTYPE_QUOTED:T++,DOCTYPE_DTD:T++,DOCTYPE_DTD_QUOTED:T++,COMMENT_STARTING:T++,COMMENT:T++,COMMENT_ENDING:T++,COMMENT_ENDED:T++,CDATA:T++,CDATA_ENDING:T++,CDATA_ENDING_2:T++,PROC_INST:T++,PROC_INST_BODY:T++,PROC_INST_ENDING:T++,OPEN_TAG:T++,OPEN_TAG_SLASH:T++,ATTRIB:T++,ATTRIB_NAME:T++,ATTRIB_NAME_SAW_WHITE:T++,ATTRIB_VALUE:T++,ATTRIB_VALUE_QUOTED:T++,ATTRIB_VALUE_CLOSED:T++,ATTRIB_VALUE_UNQUOTED:T++,ATTRIB_VALUE_ENTITY_Q:T++,ATTRIB_VALUE_ENTITY_U:T++,CLOSE_TAG:T++,CLOSE_TAG_SAW_WHITE:T++,SCRIPT:T++,SCRIPT_ENDING:T++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(R){var S=e.ENTITIES[R],Q=typeof S=="number"?String.fromCharCode(S):S;e.ENTITIES[R]=Q});for(var U in e.STATE)e.STATE[e.STATE[U]]=U;T=e.STATE;function G(R,S,Q){R[S]&&R[S](Q)}function O(R,S,Q){R.textNode&&V(R),G(R,S,Q)}function V(R){R.textNode=L(R.opt,R.textNode),R.textNode&&G(R,"ontext",R.textNode),R.textNode=""}function L(R,S){return R.trim&&(S=S.trim()),R.normalize&&(S=S.replace(/\s+/g," ")),S}function re(R,S){return V(R),R.trackPosition&&(S+=`
Line: `+R.line+`
Column: `+R.column+`
Char: `+R.c),S=new Error(S),R.error=S,G(R,"onerror",S),R}function be(R){return R.sawRoot&&!R.closedRoot&&ie(R,"Unclosed root tag"),R.state!==T.BEGIN&&R.state!==T.BEGIN_WHITESPACE&&R.state!==T.TEXT&&re(R,"Unexpected end"),V(R),R.c="",R.closed=!0,G(R,"onend"),r.call(R,R.strict,R.opt),R}function ie(R,S){if(typeof R!="object"||!(R instanceof r))throw new Error("bad call to strictFail");R.strict&&re(R,S)}function de(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var S=R.tags[R.tags.length-1]||R,Q=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&(Q.ns=S.ns),R.attribList.length=0,O(R,"onopentagstart",Q)}function te(R,S){var Q=R.indexOf(":"),H=Q<0?["",R]:R.split(":"),j=H[0],W=H[1];return S&&R==="xmlns"&&(j="xmlns",W=""),{prefix:j,local:W}}function pe(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),R.attribList.indexOf(R.attribName)!==-1||R.tag.attributes.hasOwnProperty(R.attribName)){R.attribName=R.attribValue="";return}if(R.opt.xmlns){var S=te(R.attribName,!0),Q=S.prefix,H=S.local;if(Q==="xmlns")if(H==="xml"&&R.attribValue!==y)ie(R,"xml: prefix must be bound to "+y+`
Actual: `+R.attribValue);else if(H==="xmlns"&&R.attribValue!==E)ie(R,"xmlns: prefix must be bound to "+E+`
Actual: `+R.attribValue);else{var j=R.tag,W=R.tags[R.tags.length-1]||R;j.ns===W.ns&&(j.ns=Object.create(W.ns)),j.ns[H]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,O(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}function Y(R,S){if(R.opt.xmlns){var Q=R.tag,H=te(R.tagName);Q.prefix=H.prefix,Q.local=H.local,Q.uri=Q.ns[H.prefix]||"",Q.prefix&&!Q.uri&&(ie(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),Q.uri=H.prefix);var j=R.tags[R.tags.length-1]||R;Q.ns&&j.ns!==Q.ns&&Object.keys(Q.ns).forEach(function(K){O(R,"onopennamespace",{prefix:K,uri:Q.ns[K]})});for(var W=0,ae=R.attribList.length;W<ae;W++){var x=R.attribList[W],se=x[0],P=x[1],f=te(se,!0),g=f.prefix,A=f.local,q=g===""?"":Q.ns[g]||"",J={name:se,value:P,prefix:g,local:A,uri:q};g&&g!=="xmlns"&&!q&&(ie(R,"Unbound namespace prefix: "+JSON.stringify(g)),J.uri=g),R.tag.attributes[se]=J,O(R,"onattribute",J)}R.attribList.length=0}R.tag.isSelfClosing=!!S,R.sawRoot=!0,R.tags.push(R.tag),O(R,"onopentag",R.tag),S||(!R.noscript&&R.tagName.toLowerCase()==="script"?R.state=T.SCRIPT:R.state=T.TEXT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function B(R){if(!R.tagName){ie(R,"Weird empty close tag."),R.textNode+="</>",R.state=T.TEXT;return}if(R.script){if(R.tagName!=="script"){R.script+="</"+R.tagName+">",R.tagName="",R.state=T.SCRIPT;return}O(R,"onscript",R.script),R.script=""}var S=R.tags.length,Q=R.tagName;R.strict||(Q=Q[R.looseCase]());for(var H=Q;S--;){var j=R.tags[S];if(j.name!==H)ie(R,"Unexpected close tag");else break}if(S<0){ie(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",R.state=T.TEXT;return}R.tagName=Q;for(var W=R.tags.length;W-- >S;){var ae=R.tag=R.tags.pop();R.tagName=R.tag.name,O(R,"onclosetag",R.tagName);var x={};for(var se in ae.ns)x[se]=ae.ns[se];var P=R.tags[R.tags.length-1]||R;R.opt.xmlns&&ae.ns!==P.ns&&Object.keys(ae.ns).forEach(function(f){var g=ae.ns[f];O(R,"onclosenamespace",{prefix:f,uri:g})})}S===0&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=T.TEXT}function Z(R){var S=R.entity,Q=S.toLowerCase(),H,j="";return R.ENTITIES[S]?R.ENTITIES[S]:R.ENTITIES[Q]?R.ENTITIES[Q]:(S=Q,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),H=parseInt(S,16),j=H.toString(16)):(S=S.slice(1),H=parseInt(S,10),j=H.toString(10))),S=S.replace(/^0+/,""),isNaN(H)||j.toLowerCase()!==S?(ie(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(H))}function ee(R,S){S==="<"?(R.state=T.OPEN_WAKA,R.startTagPosition=R.position):D(S)||(ie(R,"Non-whitespace before first tag."),R.textNode=S,R.state=T.TEXT)}function le(R,S){var Q="";return S<R.length&&(Q=R.charAt(S)),Q}function X(R){var S=this;if(this.error)throw this.error;if(S.closed)return re(S,"Cannot write after close. Assign an onready handler.");if(R===null)return be(S);typeof R=="object"&&(R=R.toString());for(var Q=0,H="";H=le(R,Q++),S.c=H,!!H;)switch(S.trackPosition&&(S.position++,H===`
`?(S.line++,S.column=0):S.column++),S.state){case T.BEGIN:if(S.state=T.BEGIN_WHITESPACE,H==="\uFEFF")continue;ee(S,H);continue;case T.BEGIN_WHITESPACE:ee(S,H);continue;case T.TEXT:if(S.sawRoot&&!S.closedRoot){for(var j=Q-1;H&&H!=="<"&&H!=="&";)H=le(R,Q++),H&&S.trackPosition&&(S.position++,H===`
`?(S.line++,S.column=0):S.column++);S.textNode+=R.substring(j,Q-1)}H==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=T.OPEN_WAKA,S.startTagPosition=S.position):(!D(H)&&(!S.sawRoot||S.closedRoot)&&ie(S,"Text data outside of root node."),H==="&"?S.state=T.TEXT_ENTITY:S.textNode+=H);continue;case T.SCRIPT:H==="<"?S.state=T.SCRIPT_ENDING:S.script+=H;continue;case T.SCRIPT_ENDING:H==="/"?S.state=T.CLOSE_TAG:(S.script+="<"+H,S.state=T.SCRIPT);continue;case T.OPEN_WAKA:if(H==="!")S.state=T.SGML_DECL,S.sgmlDecl="";else if(!D(H))if(k(b,H))S.state=T.OPEN_TAG,S.tagName=H;else if(H==="/")S.state=T.CLOSE_TAG,S.tagName="";else if(H==="?")S.state=T.PROC_INST,S.procInstName=S.procInstBody="";else{if(ie(S,"Unencoded <"),S.startTagPosition+1<S.position){var W=S.position-S.startTagPosition;H=new Array(W).join(" ")+H}S.textNode+="<"+H,S.state=T.TEXT}continue;case T.SGML_DECL:(S.sgmlDecl+H).toUpperCase()===d?(O(S,"onopencdata"),S.state=T.CDATA,S.sgmlDecl="",S.cdata=""):S.sgmlDecl+H==="--"?(S.state=T.COMMENT,S.comment="",S.sgmlDecl=""):(S.sgmlDecl+H).toUpperCase()===p?(S.state=T.DOCTYPE,(S.doctype||S.sawRoot)&&ie(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):H===">"?(O(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=T.TEXT):(F(H)&&(S.state=T.SGML_DECL_QUOTED),S.sgmlDecl+=H);continue;case T.SGML_DECL_QUOTED:H===S.q&&(S.state=T.SGML_DECL,S.q=""),S.sgmlDecl+=H;continue;case T.DOCTYPE:H===">"?(S.state=T.TEXT,O(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=H,H==="["?S.state=T.DOCTYPE_DTD:F(H)&&(S.state=T.DOCTYPE_QUOTED,S.q=H));continue;case T.DOCTYPE_QUOTED:S.doctype+=H,H===S.q&&(S.q="",S.state=T.DOCTYPE);continue;case T.DOCTYPE_DTD:S.doctype+=H,H==="]"?S.state=T.DOCTYPE:F(H)&&(S.state=T.DOCTYPE_DTD_QUOTED,S.q=H);continue;case T.DOCTYPE_DTD_QUOTED:S.doctype+=H,H===S.q&&(S.state=T.DOCTYPE_DTD,S.q="");continue;case T.COMMENT:H==="-"?S.state=T.COMMENT_ENDING:S.comment+=H;continue;case T.COMMENT_ENDING:H==="-"?(S.state=T.COMMENT_ENDED,S.comment=L(S.opt,S.comment),S.comment&&O(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+H,S.state=T.COMMENT);continue;case T.COMMENT_ENDED:H!==">"?(ie(S,"Malformed comment"),S.comment+="--"+H,S.state=T.COMMENT):S.state=T.TEXT;continue;case T.CDATA:H==="]"?S.state=T.CDATA_ENDING:S.cdata+=H;continue;case T.CDATA_ENDING:H==="]"?S.state=T.CDATA_ENDING_2:(S.cdata+="]"+H,S.state=T.CDATA);continue;case T.CDATA_ENDING_2:H===">"?(S.cdata&&O(S,"oncdata",S.cdata),O(S,"onclosecdata"),S.cdata="",S.state=T.TEXT):H==="]"?S.cdata+="]":(S.cdata+="]]"+H,S.state=T.CDATA);continue;case T.PROC_INST:H==="?"?S.state=T.PROC_INST_ENDING:D(H)?S.state=T.PROC_INST_BODY:S.procInstName+=H;continue;case T.PROC_INST_BODY:if(!S.procInstBody&&D(H))continue;H==="?"?S.state=T.PROC_INST_ENDING:S.procInstBody+=H;continue;case T.PROC_INST_ENDING:H===">"?(O(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=T.TEXT):(S.procInstBody+="?"+H,S.state=T.PROC_INST_BODY);continue;case T.OPEN_TAG:k(m,H)?S.tagName+=H:(de(S),H===">"?Y(S):H==="/"?S.state=T.OPEN_TAG_SLASH:(D(H)||ie(S,"Invalid character in tag name"),S.state=T.ATTRIB));continue;case T.OPEN_TAG_SLASH:H===">"?(Y(S,!0),B(S)):(ie(S,"Forward-slash in opening tag not followed by >"),S.state=T.ATTRIB);continue;case T.ATTRIB:if(D(H))continue;H===">"?Y(S):H==="/"?S.state=T.OPEN_TAG_SLASH:k(b,H)?(S.attribName=H,S.attribValue="",S.state=T.ATTRIB_NAME):ie(S,"Invalid attribute name");continue;case T.ATTRIB_NAME:H==="="?S.state=T.ATTRIB_VALUE:H===">"?(ie(S,"Attribute without value"),S.attribValue=S.attribName,pe(S),Y(S)):D(H)?S.state=T.ATTRIB_NAME_SAW_WHITE:k(m,H)?S.attribName+=H:ie(S,"Invalid attribute name");continue;case T.ATTRIB_NAME_SAW_WHITE:if(H==="=")S.state=T.ATTRIB_VALUE;else{if(D(H))continue;ie(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",O(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",H===">"?Y(S):k(b,H)?(S.attribName=H,S.state=T.ATTRIB_NAME):(ie(S,"Invalid attribute name"),S.state=T.ATTRIB)}continue;case T.ATTRIB_VALUE:if(D(H))continue;F(H)?(S.q=H,S.state=T.ATTRIB_VALUE_QUOTED):(ie(S,"Unquoted attribute value"),S.state=T.ATTRIB_VALUE_UNQUOTED,S.attribValue=H);continue;case T.ATTRIB_VALUE_QUOTED:if(H!==S.q){H==="&"?S.state=T.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=H;continue}pe(S),S.q="",S.state=T.ATTRIB_VALUE_CLOSED;continue;case T.ATTRIB_VALUE_CLOSED:D(H)?S.state=T.ATTRIB:H===">"?Y(S):H==="/"?S.state=T.OPEN_TAG_SLASH:k(b,H)?(ie(S,"No whitespace between attributes"),S.attribName=H,S.attribValue="",S.state=T.ATTRIB_NAME):ie(S,"Invalid attribute name");continue;case T.ATTRIB_VALUE_UNQUOTED:if(!$(H)){H==="&"?S.state=T.ATTRIB_VALUE_ENTITY_U:S.attribValue+=H;continue}pe(S),H===">"?Y(S):S.state=T.ATTRIB;continue;case T.CLOSE_TAG:if(S.tagName)H===">"?B(S):k(m,H)?S.tagName+=H:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=T.SCRIPT):(D(H)||ie(S,"Invalid tagname in closing tag"),S.state=T.CLOSE_TAG_SAW_WHITE);else{if(D(H))continue;N(b,H)?S.script?(S.script+="</"+H,S.state=T.SCRIPT):ie(S,"Invalid tagname in closing tag."):S.tagName=H}continue;case T.CLOSE_TAG_SAW_WHITE:if(D(H))continue;H===">"?B(S):ie(S,"Invalid characters in closing tag");continue;case T.TEXT_ENTITY:case T.ATTRIB_VALUE_ENTITY_Q:case T.ATTRIB_VALUE_ENTITY_U:var ae,x;switch(S.state){case T.TEXT_ENTITY:ae=T.TEXT,x="textNode";break;case T.ATTRIB_VALUE_ENTITY_Q:ae=T.ATTRIB_VALUE_QUOTED,x="attribValue";break;case T.ATTRIB_VALUE_ENTITY_U:ae=T.ATTRIB_VALUE_UNQUOTED,x="attribValue";break}H===";"?(S[x]+=Z(S),S.entity="",S.state=ae):k(S.entity.length?I:v,H)?S.entity+=H:(ie(S,"Invalid character in entity name"),S[x]+="&"+S.entity+H,S.entity="",S.state=ae);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&i(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var R=String.fromCharCode,S=Math.floor,Q=function(){var H=16384,j=[],W,ae,x=-1,se=arguments.length;if(!se)return"";for(var P="";++x<se;){var f=Number(arguments[x]);if(!isFinite(f)||f<0||f>1114111||S(f)!==f)throw RangeError("Invalid code point: "+f);f<=65535?j.push(f):(f-=65536,W=(f>>10)+55296,ae=f%1024+56320,j.push(W,ae)),(x+1===se||j.length>H)&&(P+=R.apply(null,j),j.length=0)}return P};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Q,configurable:!0,writable:!0}):String.fromCodePoint=Q}()})(n)})(ik);var i0={isArray:function(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"}},T8=i0.isArray,s0={copyOptions:function(n){var e,t={};for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},ensureFlagExists:function(n,e){(!(n in e)||typeof e[n]!="boolean")&&(e[n]=!1)},ensureSpacesExists:function(n){(!("spaces"in n)||typeof n.spaces!="number"&&typeof n.spaces!="string")&&(n.spaces=0)},ensureAlwaysArrayExists:function(n){(!("alwaysArray"in n)||typeof n.alwaysArray!="boolean"&&!T8(n.alwaysArray))&&(n.alwaysArray=!1)},ensureKeyExists:function(n,e){(!(n+"Key"in e)||typeof e[n+"Key"]!="string")&&(e[n+"Key"]=e.compact?"_"+n:n)},checkFnExists:function(n,e){return n+"Fn"in e}},I8=ik,Ze=s0,Na=i0.isArray,he,Me;function b8(n){return he=Ze.copyOptions(n),Ze.ensureFlagExists("ignoreDeclaration",he),Ze.ensureFlagExists("ignoreInstruction",he),Ze.ensureFlagExists("ignoreAttributes",he),Ze.ensureFlagExists("ignoreText",he),Ze.ensureFlagExists("ignoreComment",he),Ze.ensureFlagExists("ignoreCdata",he),Ze.ensureFlagExists("ignoreDoctype",he),Ze.ensureFlagExists("compact",he),Ze.ensureFlagExists("alwaysChildren",he),Ze.ensureFlagExists("addParent",he),Ze.ensureFlagExists("trim",he),Ze.ensureFlagExists("nativeType",he),Ze.ensureFlagExists("nativeTypeAttributes",he),Ze.ensureFlagExists("sanitize",he),Ze.ensureFlagExists("instructionHasAttributes",he),Ze.ensureFlagExists("captureSpacesBetweenElements",he),Ze.ensureAlwaysArrayExists(he),Ze.ensureKeyExists("declaration",he),Ze.ensureKeyExists("instruction",he),Ze.ensureKeyExists("attributes",he),Ze.ensureKeyExists("text",he),Ze.ensureKeyExists("comment",he),Ze.ensureKeyExists("cdata",he),Ze.ensureKeyExists("doctype",he),Ze.ensureKeyExists("type",he),Ze.ensureKeyExists("name",he),Ze.ensureKeyExists("elements",he),Ze.ensureKeyExists("parent",he),he}function Ck(n){var e=Number(n);if(!isNaN(e))return e;var t=n.toLowerCase();return t==="true"?!0:t==="false"?!1:n}function eh(n,e){var t;if(he.compact){if(!Me[he[n+"Key"]]&&(Na(he.alwaysArray)?he.alwaysArray.indexOf(he[n+"Key"])!==-1:he.alwaysArray)&&(Me[he[n+"Key"]]=[]),Me[he[n+"Key"]]&&!Na(Me[he[n+"Key"]])&&(Me[he[n+"Key"]]=[Me[he[n+"Key"]]]),n+"Fn"in he&&typeof e=="string"&&(e=he[n+"Fn"](e,Me)),n==="instruction"&&("instructionFn"in he||"instructionNameFn"in he)){for(t in e)if(e.hasOwnProperty(t))if("instructionFn"in he)e[t]=he.instructionFn(e[t],t,Me);else{var r=e[t];delete e[t],e[he.instructionNameFn(t,r,Me)]=r}}Na(Me[he[n+"Key"]])?Me[he[n+"Key"]].push(e):Me[he[n+"Key"]]=e}else{Me[he.elementsKey]||(Me[he.elementsKey]=[]);var i={};if(i[he.typeKey]=n,n==="instruction"){for(t in e)if(e.hasOwnProperty(t))break;i[he.nameKey]="instructionNameFn"in he?he.instructionNameFn(t,e,Me):t,he.instructionHasAttributes?(i[he.attributesKey]=e[t][he.attributesKey],"instructionFn"in he&&(i[he.attributesKey]=he.instructionFn(i[he.attributesKey],t,Me))):("instructionFn"in he&&(e[t]=he.instructionFn(e[t],t,Me)),i[he.instructionKey]=e[t])}else n+"Fn"in he&&(e=he[n+"Fn"](e,Me)),i[he[n+"Key"]]=e;he.addParent&&(i[he.parentKey]=Me),Me[he.elementsKey].push(i)}}function Pk(n){if("attributesFn"in he&&n&&(n=he.attributesFn(n,Me)),(he.trim||"attributeValueFn"in he||"attributeNameFn"in he||he.nativeTypeAttributes)&&n){var e;for(e in n)if(n.hasOwnProperty(e)&&(he.trim&&(n[e]=n[e].trim()),he.nativeTypeAttributes&&(n[e]=Ck(n[e])),"attributeValueFn"in he&&(n[e]=he.attributeValueFn(n[e],e,Me)),"attributeNameFn"in he)){var t=n[e];delete n[e],n[he.attributeNameFn(e,n[e],Me)]=t}}return n}function A8(n){var e={};if(n.body&&(n.name.toLowerCase()==="xml"||he.instructionHasAttributes)){for(var t=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,r;(r=t.exec(n.body))!==null;)e[r[1]]=r[2]||r[3]||r[4];e=Pk(e)}if(n.name.toLowerCase()==="xml"){if(he.ignoreDeclaration)return;Me[he.declarationKey]={},Object.keys(e).length&&(Me[he.declarationKey][he.attributesKey]=e),he.addParent&&(Me[he.declarationKey][he.parentKey]=Me)}else{if(he.ignoreInstruction)return;he.trim&&(n.body=n.body.trim());var i={};he.instructionHasAttributes&&Object.keys(e).length?(i[n.name]={},i[n.name][he.attributesKey]=e):i[n.name]=n.body,eh("instruction",i)}}function x8(n,e){var t;if(typeof n=="object"&&(e=n.attributes,n=n.name),e=Pk(e),"elementNameFn"in he&&(n=he.elementNameFn(n,Me)),he.compact){if(t={},!he.ignoreAttributes&&e&&Object.keys(e).length){t[he.attributesKey]={};var r;for(r in e)e.hasOwnProperty(r)&&(t[he.attributesKey][r]=e[r])}!(n in Me)&&(Na(he.alwaysArray)?he.alwaysArray.indexOf(n)!==-1:he.alwaysArray)&&(Me[n]=[]),Me[n]&&!Na(Me[n])&&(Me[n]=[Me[n]]),Na(Me[n])?Me[n].push(t):Me[n]=t}else Me[he.elementsKey]||(Me[he.elementsKey]=[]),t={},t[he.typeKey]="element",t[he.nameKey]=n,!he.ignoreAttributes&&e&&Object.keys(e).length&&(t[he.attributesKey]=e),he.alwaysChildren&&(t[he.elementsKey]=[]),Me[he.elementsKey].push(t);t[he.parentKey]=Me,Me=t}function S8(n){he.ignoreText||!n.trim()&&!he.captureSpacesBetweenElements||(he.trim&&(n=n.trim()),he.nativeType&&(n=Ck(n)),he.sanitize&&(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),eh("text",n))}function R8(n){he.ignoreComment||(he.trim&&(n=n.trim()),eh("comment",n))}function C8(n){var e=Me[he.parentKey];he.addParent||delete Me[he.parentKey],Me=e}function P8(n){he.ignoreCdata||(he.trim&&(n=n.trim()),eh("cdata",n))}function k8(n){he.ignoreDoctype||(n=n.replace(/^ /,""),he.trim&&(n=n.trim()),eh("doctype",n))}function N8(n){n.note=n}var kk=function(n,e){var t=I8.parser(!0,{}),r={};if(Me=r,he=b8(e),t.opt={strictEntities:!0},t.onopentag=x8,t.ontext=S8,t.oncomment=R8,t.onclosetag=C8,t.onerror=N8,t.oncdata=P8,t.ondoctype=k8,t.onprocessinginstruction=A8,t.write(n).close(),r[he.elementsKey]){var i=r[he.elementsKey];delete r[he.elementsKey],r[he.elementsKey]=i,delete r.text}return r},c1=s0,D8=kk;function O8(n){var e=c1.copyOptions(n);return c1.ensureSpacesExists(e),e}var L8=function(n,e){var t,r,i,s;return t=O8(e),r=D8(n,t),s="compact"in t&&t.compact?"_parent":"parent","addParent"in t&&t.addParent?i=JSON.stringify(r,function(o,a){return o===s?"_":a},t.spaces):i=JSON.stringify(r,null,t.spaces),i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},lt=s0,F8=i0.isArray,gn,yn;function V8(n){var e=lt.copyOptions(n);return lt.ensureFlagExists("ignoreDeclaration",e),lt.ensureFlagExists("ignoreInstruction",e),lt.ensureFlagExists("ignoreAttributes",e),lt.ensureFlagExists("ignoreText",e),lt.ensureFlagExists("ignoreComment",e),lt.ensureFlagExists("ignoreCdata",e),lt.ensureFlagExists("ignoreDoctype",e),lt.ensureFlagExists("compact",e),lt.ensureFlagExists("indentText",e),lt.ensureFlagExists("indentCdata",e),lt.ensureFlagExists("indentAttributes",e),lt.ensureFlagExists("indentInstruction",e),lt.ensureFlagExists("fullTagEmptyElement",e),lt.ensureFlagExists("noQuotesForNativeAttributes",e),lt.ensureSpacesExists(e),typeof e.spaces=="number"&&(e.spaces=Array(e.spaces+1).join(" ")),lt.ensureKeyExists("declaration",e),lt.ensureKeyExists("instruction",e),lt.ensureKeyExists("attributes",e),lt.ensureKeyExists("text",e),lt.ensureKeyExists("comment",e),lt.ensureKeyExists("cdata",e),lt.ensureKeyExists("doctype",e),lt.ensureKeyExists("type",e),lt.ensureKeyExists("name",e),lt.ensureKeyExists("elements",e),e}function kr(n,e,t){return(!t&&n.spaces?`
`:"")+Array(e+1).join(n.spaces)}function Pp(n,e,t){if(e.ignoreAttributes)return"";"attributesFn"in e&&(n=e.attributesFn(n,yn,gn));var r,i,s,o,a=[];for(r in n)n.hasOwnProperty(r)&&n[r]!==null&&n[r]!==void 0&&(o=e.noQuotesForNativeAttributes&&typeof n[r]!="string"?"":'"',i=""+n[r],i=i.replace(/"/g,"&quot;"),s="attributeNameFn"in e?e.attributeNameFn(r,i,yn,gn):r,a.push(e.spaces&&e.indentAttributes?kr(e,t+1,!1):" "),a.push(s+"="+o+("attributeValueFn"in e?e.attributeValueFn(i,r,yn,gn):i)+o));return n&&Object.keys(n).length&&e.spaces&&e.indentAttributes&&a.push(kr(e,t,!1)),a.join("")}function Nk(n,e,t){return gn=n,yn="xml",e.ignoreDeclaration?"":"<?xml"+Pp(n[e.attributesKey],e,t)+"?>"}function Dk(n,e,t){if(e.ignoreInstruction)return"";var r;for(r in n)if(n.hasOwnProperty(r))break;var i="instructionNameFn"in e?e.instructionNameFn(r,n[r],yn,gn):r;if(typeof n[r]=="object")return gn=n,yn=i,"<?"+i+Pp(n[r][e.attributesKey],e,t)+"?>";var s=n[r]?n[r]:"";return"instructionFn"in e&&(s=e.instructionFn(s,r,yn,gn)),"<?"+i+(s?" "+s:"")+"?>"}function Ok(n,e){return e.ignoreComment?"":"<!--"+("commentFn"in e?e.commentFn(n,yn,gn):n)+"-->"}function Lk(n,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(n,yn,gn):n.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Fk(n,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(n,yn,gn):n)+">"}function o0(n,e){return e.ignoreText?"":(n=""+n,n=n.replace(/&amp;/g,"&"),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(n,yn,gn):n)}function M8(n,e){var t;if(n.elements&&n.elements.length)for(t=0;t<n.elements.length;++t)switch(n.elements[t][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function U8(n,e,t){gn=n,yn=n.name;var r=[],i="elementNameFn"in e?e.elementNameFn(n.name,n):n.name;r.push("<"+i),n[e.attributesKey]&&r.push(Pp(n[e.attributesKey],e,t));var s=n[e.elementsKey]&&n[e.elementsKey].length||n[e.attributesKey]&&n[e.attributesKey]["xml:space"]==="preserve";return s||("fullTagEmptyElementFn"in e?s=e.fullTagEmptyElementFn(n.name,n):s=e.fullTagEmptyElement),s?(r.push(">"),n[e.elementsKey]&&n[e.elementsKey].length&&(r.push(Vk(n[e.elementsKey],e,t+1)),gn=n,yn=n.name),r.push(e.spaces&&M8(n,e)?`
`+Array(t+1).join(e.spaces):""),r.push("</"+i+">")):r.push("/>"),r.join("")}function Vk(n,e,t,r){return n.reduce(function(i,s){var o=kr(e,t,r&&!i);switch(s.type){case"element":return i+o+U8(s,e,t);case"comment":return i+o+Ok(s[e.commentKey],e);case"doctype":return i+o+Fk(s[e.doctypeKey],e);case"cdata":return i+(e.indentCdata?o:"")+Lk(s[e.cdataKey],e);case"text":return i+(e.indentText?o:"")+o0(s[e.textKey],e);case"instruction":var a={};return a[s[e.nameKey]]=s[e.attributesKey]?s:s[e.instructionKey],i+(e.indentInstruction?o:"")+Dk(a,e,t)}},"")}function Mk(n,e,t){var r;for(r in n)if(n.hasOwnProperty(r))switch(r){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||t)return!0;break;case e.cdataKey:if(e.indentCdata||t)return!0;break;case e.instructionKey:if(e.indentInstruction||t)return!0;break;case e.doctypeKey:case e.commentKey:return!0;default:return!0}return!1}function B8(n,e,t,r,i){gn=n,yn=e;var s="elementNameFn"in t?t.elementNameFn(e,n):e;if(typeof n>"u"||n===null||n==="")return"fullTagEmptyElementFn"in t&&t.fullTagEmptyElementFn(e,n)||t.fullTagEmptyElement?"<"+s+"></"+s+">":"<"+s+"/>";var o=[];if(e){if(o.push("<"+s),typeof n!="object")return o.push(">"+o0(n,t)+"</"+s+">"),o.join("");n[t.attributesKey]&&o.push(Pp(n[t.attributesKey],t,r));var a=Mk(n,t,!0)||n[t.attributesKey]&&n[t.attributesKey]["xml:space"]==="preserve";if(a||("fullTagEmptyElementFn"in t?a=t.fullTagEmptyElementFn(e,n):a=t.fullTagEmptyElement),a)o.push(">");else return o.push("/>"),o.join("")}return o.push(Uk(n,t,r+1,!1)),gn=n,yn=e,e&&o.push((i?kr(t,r,!1):"")+"</"+s+">"),o.join("")}function Uk(n,e,t,r){var i,s,o,a=[];for(s in n)if(n.hasOwnProperty(s))for(o=F8(n[s])?n[s]:[n[s]],i=0;i<o.length;++i){switch(s){case e.declarationKey:a.push(Nk(o[i],e,t));break;case e.instructionKey:a.push((e.indentInstruction?kr(e,t,r):"")+Dk(o[i],e,t));break;case e.attributesKey:case e.parentKey:break;case e.textKey:a.push((e.indentText?kr(e,t,r):"")+o0(o[i],e));break;case e.cdataKey:a.push((e.indentCdata?kr(e,t,r):"")+Lk(o[i],e));break;case e.doctypeKey:a.push(kr(e,t,r)+Fk(o[i],e));break;case e.commentKey:a.push(kr(e,t,r)+Ok(o[i],e));break;default:a.push(kr(e,t,r)+B8(o[i],s,e,t,Mk(o[i],e)))}r=r&&!a.length}return a.join("")}var Bk=function(n,e){e=V8(e);var t=[];return gn=n,yn="_root_",e.compact?t.push(Uk(n,e,0,!0)):(n[e.declarationKey]&&t.push(Nk(n[e.declarationKey],e,0)),n[e.elementsKey]&&n[e.elementsKey].length&&t.push(Vk(n[e.elementsKey],e,0,!t.length))),t.join("")},j8=Bk,z8=function(n,e){n instanceof Buffer&&(n=n.toString());var t=null;if(typeof n=="string")try{t=JSON.parse(n)}catch{throw new Error("The JSON structure is invalid")}else t=n;return j8(t,e)},$8=kk,W8=L8,q8=Bk,G8=z8,jk={xml2js:$8,xml2json:W8,js2xml:q8,json2xml:G8};const a0=n=>{switch(n.type){case void 0:case"element":const e=new K8(n.name,n.attributes),t=n.elements||[];for(const r of t){const i=a0(r);i!==void 0&&e.push(i)}return e;case"text":return n.text;default:return}};class H8 extends Ve{}class K8 extends ye{static fromXmlString(e){const t=jk.xml2js(e,{compact:!1});return a0(t)}constructor(e,t){super(e),t&&this.root.push(new H8(t))}push(e){this.root.push(e)}}class Q8 extends ye{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class zk extends ye{constructor(e,t){super(e),t&&(this.root=t.root)}}const _n=n=>{if(isNaN(n))throw new Error(`Invalid value '${n}' specified. Must be an integer.`);return Math.floor(n)},kp=n=>{const e=_n(n);if(e<0)throw new Error(`Invalid value '${n}' specified. Must be a positive integer.`);return e},$k=(n,e)=>{const t=e*2;if(n.length!==t||isNaN(+`0x${n}`))throw new Error(`Invalid hex value '${n}'. Expected ${t} digit hex value`);return n},h1=n=>$k(n,1),l0=n=>{const e=n.slice(-2),t=n.substring(0,n.length-2);return`${Number(t)}${e}`},Wk=n=>{const e=l0(n);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},sl=n=>{if(n==="auto")return n;const e=n.charAt(0)==="#"?n.substring(1):n;return $k(e,3)},ui=n=>typeof n=="string"?l0(n):_n(n),Y8=n=>typeof n=="string"?Wk(n):kp(n),rn=n=>typeof n=="string"?Wk(n):kp(n),X8=n=>{const e=n.substring(0,n.length-1);return`${Number(e)}%`},J8=n=>typeof n=="number"?_n(n):n.slice(-1)==="%"?X8(n):l0(n),Z8=kp,ez=kp,tz=n=>n.toISOString();class Ee extends ye{constructor(e,t=!0){super(e),t!==!0&&this.root.push(new Nt({val:t}))}}class Rg extends ye{constructor(e,t){super(e),this.root.push(new Nt({val:Y8(t)}))}}class uo extends ye{constructor(e,t){super(e),this.root.push(new Nt({val:t}))}}const ru=(n,e)=>new vs({name:n,attributes:{value:{key:"w:val",value:e}}});class u0 extends ye{constructor(e,t){super(e),this.root.push(new Nt({val:t}))}}class nz extends ye{constructor(e,t){super(e),this.root.push(new Nt({val:t}))}}class Vs extends ye{constructor(e,t){super(e),this.root.push(t)}}class vs extends ye{constructor({name:e,attributes:t,children:r}){super(e),t&&this.root.push(new Rs(t)),r&&this.root.push(...r)}}const Sr={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"};class rz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class qk extends ye{constructor(e){super("w:jc"),this.root.push(new rz({val:e}))}}class nt extends ye{constructor(e,{color:t,size:r,space:i,style:s}){super(e),this.root.push(new iz({style:s,color:t===void 0?void 0:sl(t),size:r===void 0?void 0:Z8(r),space:i===void 0?void 0:ez(i)}))}}class iz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const c0={SINGLE:"single",DASH_DOT_STROKED:"dashDotStroked",DASHED:"dashed",DASH_SMALL_GAP:"dashSmallGap",DOT_DASH:"dotDash",DOT_DOT_DASH:"dotDotDash",DOTTED:"dotted",DOUBLE:"double",DOUBLE_WAVE:"doubleWave",INSET:"inset",NIL:"nil",NONE:"none",OUTSET:"outset",THICK:"thick",THICK_THIN_LARGE_GAP:"thickThinLargeGap",THICK_THIN_MEDIUM_GAP:"thickThinMediumGap",THICK_THIN_SMALL_GAP:"thickThinSmallGap",THIN_THICK_LARGE_GAP:"thinThickLargeGap",THIN_THICK_MEDIUM_GAP:"thinThickMediumGap",THIN_THICK_SMALL_GAP:"thinThickSmallGap",THIN_THICK_THIN_LARGE_GAP:"thinThickThinLargeGap",THIN_THICK_THIN_MEDIUM_GAP:"thinThickThinMediumGap",THIN_THICK_THIN_SMALL_GAP:"thinThickThinSmallGap",THREE_D_EMBOSS:"threeDEmboss",THREE_D_ENGRAVE:"threeDEngrave",TRIPLE:"triple",WAVE:"wave"};class sz extends Si{constructor(e){super("w:pBdr"),e.top&&this.root.push(new nt("w:top",e.top)),e.bottom&&this.root.push(new nt("w:bottom",e.bottom)),e.left&&this.root.push(new nt("w:left",e.left)),e.right&&this.root.push(new nt("w:right",e.right))}}class oz extends ye{constructor(){super("w:pBdr");const e=new nt("w:bottom",{color:"auto",space:1,style:c0.SINGLE,size:6});this.root.push(e)}}class az extends ye{constructor({start:e,end:t,left:r,right:i,hanging:s,firstLine:o}){super("w:ind"),this.root.push(new Rs({start:{key:"w:start",value:e===void 0?void 0:ui(e)},end:{key:"w:end",value:t===void 0?void 0:ui(t)},left:{key:"w:left",value:r===void 0?void 0:ui(r)},right:{key:"w:right",value:i===void 0?void 0:ui(i)},hanging:{key:"w:hanging",value:s===void 0?void 0:rn(s)},firstLine:{key:"w:firstLine",value:o===void 0?void 0:rn(o)}}))}}let lz=class extends ye{constructor(){super("w:br")}};const h0={BEGIN:"begin",END:"end",SEPARATE:"separate"};class d0 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Hh extends ye{constructor(e){super("w:fldChar"),this.root.push(new d0({type:h0.BEGIN,dirty:e}))}}class Kh extends ye{constructor(e){super("w:fldChar"),this.root.push(new d0({type:h0.SEPARATE,dirty:e}))}}class Qh extends ye{constructor(e){super("w:fldChar"),this.root.push(new d0({type:h0.END,dirty:e}))}}const ol={DEFAULT:"default",PRESERVE:"preserve"};class al extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{space:"xml:space"})}}class uz extends ye{constructor(){super("w:instrText"),this.root.push(new al({space:ol.PRESERVE})),this.root.push("PAGE")}}class cz extends ye{constructor(){super("w:instrText"),this.root.push(new al({space:ol.PRESERVE})),this.root.push("NUMPAGES")}}class hz extends ye{constructor(){super("w:instrText"),this.root.push(new al({space:ol.PRESERVE})),this.root.push("SECTIONPAGES")}}class dz extends ye{constructor(){super("w:instrText"),this.root.push(new al({space:ol.PRESERVE})),this.root.push("SECTION")}}class fz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class Np extends ye{constructor({fill:e,color:t,type:r}){super("w:shd"),this.root.push(new fz({fill:e===void 0?void 0:sl(e),color:t===void 0?void 0:sl(t),type:r}))}}class pz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const mz={DOT:"dot"};class gz extends ye{constructor(e){super("w:em"),this.root.push(new Nt({val:e}))}}class yz extends gz{constructor(e=mz.DOT){super(e)}}class vz extends ye{constructor(e){super("w:spacing"),this.root.push(new Nt({val:ui(e)}))}}class _z extends ye{constructor(e){super("w:color"),this.root.push(new Nt({val:sl(e)}))}}class wz extends ye{constructor(e){super("w:highlight"),this.root.push(new Nt({val:e}))}}class Ez extends ye{constructor(e){super("w:highlightCs"),this.root.push(new Nt({val:e}))}}const Tz=n=>new vs({name:"w:lang",attributes:{value:{key:"w:val",value:n.value},eastAsia:{key:"w:eastAsia",value:n.eastAsia},bidirectional:{key:"w:bidi",value:n.bidirectional}}});class d1 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class Cg extends ye{constructor(e,t){if(super("w:rFonts"),typeof e=="string"){const r=e;this.root.push(new d1({ascii:r,cs:r,eastAsia:r,hAnsi:r,hint:t}))}else{const r=e;this.root.push(new d1(r))}}}let Gk=class extends ye{constructor(e){super("w:vertAlign"),this.root.push(new Nt({val:e}))}};class Iz extends Gk{constructor(){super("superscript")}}class bz extends Gk{constructor(){super("subscript")}}const Hk={SINGLE:"single",WORDS:"words",DOUBLE:"double",THICK:"thick",DOTTED:"dotted",DOTTEDHEAVY:"dottedHeavy",DASH:"dash",DASHEDHEAVY:"dashedHeavy",DASHLONG:"dashLong",DASHLONGHEAVY:"dashLongHeavy",DOTDASH:"dotDash",DASHDOTHEAVY:"dashDotHeavy",DOTDOTDASH:"dotDotDash",DASHDOTDOTHEAVY:"dashDotDotHeavy",WAVE:"wave",WAVYHEAVY:"wavyHeavy",WAVYDOUBLE:"wavyDouble",NONE:"none"};class Az extends ye{constructor(e=Hk.SINGLE,t){super("w:u"),this.root.push(new Nt({val:e,color:t===void 0?void 0:sl(t)}))}}class Vo extends Si{constructor(e){var t,r;if(super("w:rPr"),!e)return;e.noProof!==void 0&&this.push(new Ee("w:noProof",e.noProof)),e.bold!==void 0&&this.push(new Ee("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new Ee("w:bCs",(t=e.boldComplexScript)!=null?t:e.bold)),e.italics!==void 0&&this.push(new Ee("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new Ee("w:iCs",(r=e.italicsComplexScript)!=null?r:e.italics)),e.underline&&this.push(new Az(e.underline.type,e.underline.color)),e.effect&&this.push(new uo("w:effect",e.effect)),e.emphasisMark&&this.push(new yz(e.emphasisMark.type)),e.color&&this.push(new _z(e.color)),e.kern&&this.push(new Rg("w:kern",e.kern)),e.position&&this.push(new uo("w:position",e.position)),e.size!==void 0&&this.push(new Rg("w:sz",e.size));const i=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;i&&this.push(new Rg("w:szCs",i)),e.rightToLeft!==void 0&&this.push(new Ee("w:rtl",e.rightToLeft)),e.smallCaps!==void 0?this.push(new Ee("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new Ee("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new Ee("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new Ee("w:dstrike",e.doubleStrike)),e.subScript&&this.push(new bz),e.superScript&&this.push(new Iz),e.style&&this.push(new uo("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new Cg(e.font)):"name"in e.font?this.push(new Cg(e.font.name,e.font.hint)):this.push(new Cg(e.font))),e.highlight&&this.push(new wz(e.highlight));const s=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;s&&this.push(new Ez(s)),e.characterSpacing&&this.push(new vz(e.characterSpacing)),e.emboss!==void 0&&this.push(new Ee("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new Ee("w:imprint",e.imprint)),e.shading&&this.push(new Np(e.shading)),e.revision&&this.push(new xz(e.revision)),e.border&&this.push(new nt("w:bdr",e.border)),e.snapToGrid!==void 0&&this.push(new Ee("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new Ee("w:vanish",e.vanish)),e.specVanish&&this.push(new Ee("w:specVanish",e.vanish)),e.scale!==void 0&&this.push(new u0("w:w",e.scale)),e.language&&this.push(Tz(e.language)),e.math&&this.push(new Ee("w:oMath",e.math))}push(e){this.root.push(e)}}class xz extends ye{constructor(e){super("w:rPrChange"),this.root.push(new pz({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Vo(e))}}class yv extends ye{constructor(e){var t;return super("w:t"),typeof e=="string"?(this.root.push(new al({space:ol.PRESERVE})),this.root.push(e),this):(this.root.push(new al({space:(t=e.space)!=null?t:ol.DEFAULT})),this.root.push(e.text),this)}}const Yh={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Dp extends ye{constructor(e){if(super("w:r"),me(this,"properties"),this.properties=new Vo(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new lz);if(e.children)for(const t of e.children){if(typeof t=="string"){switch(t){case Yh.CURRENT:this.root.push(new Hh),this.root.push(new uz),this.root.push(new Kh),this.root.push(new Qh);break;case Yh.TOTAL_PAGES:this.root.push(new Hh),this.root.push(new cz),this.root.push(new Kh),this.root.push(new Qh);break;case Yh.TOTAL_PAGES_IN_SECTION:this.root.push(new Hh),this.root.push(new hz),this.root.push(new Kh),this.root.push(new Qh);break;case Yh.CURRENT_SECTION:this.root.push(new Hh),this.root.push(new dz),this.root.push(new Kh),this.root.push(new Qh);break;default:this.root.push(new yv(t));break}continue}this.root.push(t)}else e.text&&this.root.push(new yv(e.text))}}class f1 extends Dp{constructor(e){if(typeof e=="string")return super({}),this.root.push(new yv(e)),this;super(e)}}let Sz="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Rz=(n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},Cz=(n=21)=>{let e="",t=n;for(;t--;)e+=Sz[Math.random()*64|0];return e};const yr=n=>Math.floor(n*72*20),f0=(n=0)=>{let e=n;return()=>++e},Pz=()=>f0(),kz=()=>f0(1),Nz=()=>f0(),Dz=()=>Cz().toLowerCase(),iu=n=>Rz("1234567890abcdef",n)(),Oz=()=>`${iu(8)}-${iu(4)}-${iu(4)}-${iu(4)}-${iu(12)}`;class Lz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class Fz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class Vz extends ye{constructor({id:e,initials:t,author:r,date:i=new Date,children:s}){super("w:comment"),this.root.push(new Lz({id:e,initials:t,author:r,date:i.toISOString()}));for(const o of s)this.root.push(o)}}class Mz extends ye{constructor({children:e}){super("w:comments"),this.root.push(new Fz({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const t of e)this.root.push(new Vz(t))}}class Uz extends ye{constructor(){super("w:pageBreakBefore")}}const vv={AT_LEAST:"atLeast",EXACTLY:"exactly",EXACT:"exact",AUTO:"auto"};class Bz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"})}}class jz extends ye{constructor(e){super("w:spacing"),this.root.push(new Bz(e))}}const p1={HEADING_1:"Heading1",HEADING_2:"Heading2",HEADING_3:"Heading3",HEADING_4:"Heading4",HEADING_5:"Heading5",HEADING_6:"Heading6",TITLE:"Title"};let Xh=class extends ye{constructor(e){super("w:pStyle"),this.root.push(new Nt({val:e}))}};class zz extends ye{constructor(e){super("w:tabs");for(const t of e)this.root.push(new Wz(t))}}const m1={LEFT:"left",RIGHT:"right",CENTER:"center",BAR:"bar",CLEAR:"clear",DECIMAL:"decimal",END:"end",NUM:"num",START:"start"};class $z extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class Wz extends ye{constructor({type:e,position:t,leader:r}){super("w:tab"),this.root.push(new $z({val:e,pos:t,leader:r}))}}class g1 extends ye{constructor(e,t){super("w:numPr"),this.root.push(new qz(t)),this.root.push(new Gz(e))}}class qz extends ye{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Nt({val:e}))}}class Gz extends ye{constructor(e){super("w:numId"),this.root.push(new Nt({val:typeof e=="string"?`{${e}}`:e}))}}class Kk extends ye{constructor(){super(...arguments),me(this,"fileChild",Symbol())}}class Hz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const Kz={EXTERNAL:"External"};class Qz extends ye{constructor(e,t,r,i){super("Relationship"),this.root.push(new Hz({id:e,type:t,target:r,targetMode:i}))}}class Yz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class Xz extends ye{constructor(e,t,r){super("w:hyperlink"),me(this,"linkId"),this.linkId=t;const i={history:1,anchor:r||void 0,id:r?void 0:`rId${this.linkId}`},s=new Yz(i);this.root.push(s),e.forEach(o=>{this.root.push(o)})}}class Jz extends ye{constructor(e){super("w:externalHyperlink"),this.options=e}}class Zz extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class e2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{id:"w:id"})}}class t2{constructor(e){me(this,"bookmarkUniqueNumericId",Nz()),me(this,"start"),me(this,"children"),me(this,"end");const t=this.bookmarkUniqueNumericId();this.start=new n2(e.id,t),this.children=e.children,this.end=new r2(t)}}class n2 extends ye{constructor(e,t){super("w:bookmarkStart");const r=new Zz({name:e,id:t});this.root.push(r)}}class r2 extends ye{constructor(e){super("w:bookmarkEnd");const t=new e2({id:e});this.root.push(t)}}class i2 extends ye{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new Nt({val:e}))}}class s2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{verticalAlign:"w:val"})}}class Qk extends ye{constructor(e){super("w:vAlign"),this.root.push(new s2({verticalAlign:e}))}}const Da={DEFAULT:"default",FIRST:"first",EVEN:"even"};class o2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const y1={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Pg extends ye{constructor(e,t){super(e),this.root.push(new o2({type:t.type||Da.DEFAULT,id:`rId${t.id}`}))}}class a2 extends ye{constructor({space:e,count:t,separate:r,equalWidth:i,children:s}){super("w:cols"),this.root.push(new Rs({space:{key:"w:space",value:e===void 0?void 0:rn(e)},count:{key:"w:num",value:t===void 0?void 0:_n(t)},separate:{key:"w:sep",value:r},equalWidth:{key:"w:equalWidth",value:i}})),!i&&s&&s.forEach(o=>this.addChildElement(o))}}class l2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"})}}class u2 extends ye{constructor(e,t,r){super("w:docGrid"),this.root.push(new l2({type:r,linePitch:_n(e),charSpace:t?_n(t):void 0}))}}const c2=({countBy:n,start:e,restart:t,distance:r})=>new vs({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:n===void 0?void 0:_n(n)},start:{key:"w:start",value:e===void 0?void 0:_n(e)},restart:{key:"w:restart",value:t},distance:{key:"w:distance",value:r===void 0?void 0:rn(r)}}});class v1 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class h2 extends Si{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new v1({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new v1({})),e.pageBorderTop&&this.root.push(new nt("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new nt("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new nt("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new nt("w:right",e.pageBorderRight))}}class d2 extends ye{constructor(e,t,r,i,s,o,a){super("w:pgMar"),this.root.push(new Rs({top:{key:"w:top",value:ui(e)},right:{key:"w:right",value:rn(t)},bottom:{key:"w:bottom",value:ui(r)},left:{key:"w:left",value:rn(i)},header:{key:"w:header",value:rn(s)},footer:{key:"w:footer",value:rn(o)},gutter:{key:"w:gutter",value:rn(a)}}))}}class f2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class p2 extends ye{constructor({start:e,formatType:t,separator:r}){super("w:pgNumType"),this.root.push(new f2({start:e===void 0?void 0:_n(e),formatType:t,separator:r}))}}const Yk={PORTRAIT:"portrait",LANDSCAPE:"landscape"};class m2 extends ye{constructor(e,t,r){super("w:pgSz");const i=r===Yk.LANDSCAPE,s=rn(e),o=rn(t);this.root.push(new Rs({width:{key:"w:w",value:i?o:s},height:{key:"w:h",value:i?s:o},orientation:{key:"w:orient",value:r}}))}}class g2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class y2 extends ye{constructor(e){super("w:textDirection"),this.root.push(new g2({val:e}))}}class v2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class _2 extends ye{constructor(e){super("w:type"),this.root.push(new v2({val:e}))}}const Ms={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},kg={WIDTH:11906,HEIGHT:16838,ORIENTATION:Yk.PORTRAIT};class w2 extends ye{constructor({page:{size:{width:e=kg.WIDTH,height:t=kg.HEIGHT,orientation:r=kg.ORIENTATION}={},margin:{top:i=Ms.TOP,right:s=Ms.RIGHT,bottom:o=Ms.BOTTOM,left:a=Ms.LEFT,header:l=Ms.HEADER,footer:u=Ms.FOOTER,gutter:h=Ms.GUTTER}={},pageNumbers:d={},borders:p,textDirection:y}={},grid:{linePitch:E=360,charSpace:_,type:b}={},headerWrapperGroup:m={},footerWrapperGroup:v={},lineNumbers:I,titlePage:D,verticalAlign:F,column:$,type:k}={}){super("w:sectPr"),this.addHeaderFooterGroup(y1.HEADER,m),this.addHeaderFooterGroup(y1.FOOTER,v),k&&this.root.push(new _2(k)),this.root.push(new m2(e,t,r)),this.root.push(new d2(i,s,o,a,l,u,h)),p&&this.root.push(new h2(p)),I&&this.root.push(c2(I)),this.root.push(new p2(d)),$&&this.root.push(new a2($)),F&&this.root.push(new Qk(F)),D!==void 0&&this.root.push(new Ee("w:titlePg",D)),y&&this.root.push(new y2(y)),this.root.push(new u2(E,_,b))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new Pg(e,{type:Da.DEFAULT,id:t.default.View.ReferenceId})),t.first&&this.root.push(new Pg(e,{type:Da.FIRST,id:t.first.View.ReferenceId})),t.even&&this.root.push(new Pg(e,{type:Da.EVEN,id:t.even.View.ReferenceId}))}}class E2 extends ye{constructor(){super("w:body"),me(this,"sections",[])}addSection(e){const t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new w2(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const t=new mt({}),r=new ll({});return r.push(e),t.addChildElement(r),t}}class th extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",aink:"xmlns:aink",am3d:"xmlns:am3d",w16cex:"xmlns:w16cex",w16cid:"xmlns:w16cid",w16:"xmlns:w16",w16sdtdh:"xmlns:w16sdtdh",w16se:"xmlns:w16se"})}}class T2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class I2 extends ye{constructor(e){super("w:background"),this.root.push(new T2({color:e.color===void 0?void 0:sl(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:h1(e.themeShade),themeTint:e.themeTint===void 0?void 0:h1(e.themeTint)}))}}class b2 extends ye{constructor(e){super("w:document"),me(this,"body"),this.root.push(new th({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex",Ignorable:"w14 w15 wp14"})),this.body=new E2,e.background&&this.root.push(new I2(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class A2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{xmlns:"xmlns"})}}class Al extends ye{constructor(){super("Relationships"),this.root.push(new A2({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,r,i){const s=new Qz(`rId${e}`,t,r,i);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class Xk{constructor(e){me(this,"document"),me(this,"relationships"),this.document=new b2(e),this.relationships=new Al}get View(){return this.document}get Relationships(){return this.relationships}}class x2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class S2 extends ye{constructor(){super("w:wordWrap"),this.root.push(new x2({val:0}))}}const R2=n=>{var e,t;return new vs({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:n.anchorLock},dropCap:{key:"w:dropCap",value:n.dropCap},width:{key:"w:w",value:n.width},height:{key:"w:h",value:n.height},x:{key:"w:x",value:n.position?n.position.x:void 0},y:{key:"w:y",value:n.position?n.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:n.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:n.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=n.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(t=n.space)==null?void 0:t.vertical},rule:{key:"w:hRule",value:n.rule},alignmentX:{key:"w:xAlign",value:n.alignment?n.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:n.alignment?n.alignment.y:void 0},lines:{key:"w:lines",value:n.lines},wrap:{key:"w:wrap",value:n.wrap}}})};class ll extends Si{constructor(e){var t,r;if(super("w:pPr"),me(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new Xh(e.heading)),e.bullet&&this.push(new Xh("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new Xh("ListParagraph"))),e.style&&this.push(new Xh(e.style)),e.keepNext!==void 0&&this.push(new Ee("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new Ee("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new Uz),e.frame&&this.push(R2(e.frame)),e.widowControl!==void 0&&this.push(new Ee("w:widowControl",e.widowControl)),e.bullet&&this.push(new g1(1,e.bullet.level)),e.numbering&&(this.numberingReferences.push({reference:e.numbering.reference,instance:(t=e.numbering.instance)!=null?t:0}),this.push(new g1(`${e.numbering.reference}-${(r=e.numbering.instance)!=null?r:0}`,e.numbering.level))),e.border&&this.push(new sz(e.border)),e.thematicBreak&&this.push(new oz),e.shading&&this.push(new Np(e.shading)),e.wordWrap&&this.push(new S2),e.overflowPunctuation&&this.push(new Ee("w:overflowPunct",e.overflowPunctuation));const i=[...e.rightTabStop!==void 0?[{type:m1.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:m1.LEFT,position:e.leftTabStop}]:[]];i.length>0&&this.push(new zz(i)),e.bidirectional!==void 0&&this.push(new Ee("w:bidi",e.bidirectional)),e.spacing&&this.push(new jz(e.spacing)),e.indent&&this.push(new az(e.indent)),e.contextualSpacing!==void 0&&this.push(new Ee("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new qk(e.alignment)),e.outlineLevel!==void 0&&this.push(new i2(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new Ee("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new Ee("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Vo(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof Xk)for(const t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}}class mt extends Kk{constructor(e){if(super("w:p"),me(this,"properties"),typeof e=="string")return this.properties=new ll({}),this.root.push(this.properties),this.root.push(new f1(e)),this;if(this.properties=new ll(e),this.root.push(this.properties),e.text&&this.root.push(new f1(e.text)),e.children)for(const t of e.children){if(t instanceof t2){this.root.push(t.start);for(const r of t.children)this.root.push(r);this.root.push(t.end);continue}this.root.push(t)}}prepForXml(e){for(const t of this.root)if(t instanceof Jz){const r=this.root.indexOf(t),i=new Xz(t.options.children,Dz());e.viewWrapper.Relationships.createRelationship(i.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,Kz.EXTERNAL),this.root[r]=i}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}class C2 extends ye{constructor(e){super("w:tblGrid");for(const t of e)this.root.push(new P2(t))}}class P2 extends ye{constructor(e){super("w:gridCol"),e!==void 0&&this.root.push(new Rs({width:{key:"w:w",value:rn(e)}}))}}const Jk={TABLE:"w:tblCellMar",TABLE_CELL:"w:tcMar"};class Zk extends Si{constructor(e,{marginUnitType:t=Sf.DXA,top:r,left:i,bottom:s,right:o}){super(e),r!==void 0&&this.root.push(new no("w:top",{type:t,size:r})),i!==void 0&&this.root.push(new no("w:left",{type:t,size:i})),s!==void 0&&this.root.push(new no("w:bottom",{type:t,size:s})),o!==void 0&&this.root.push(new no("w:right",{type:t,size:o}))}}const Sf={AUTO:"auto",DXA:"dxa",NIL:"nil",PERCENTAGE:"pct"};class no extends ye{constructor(e,{type:t=Sf.AUTO,size:r}){super(e);let i=r;t===Sf.PERCENTAGE&&typeof r=="number"&&(i=`${r}%`),this.root.push(new Rs({type:{key:"w:type",value:t},size:{key:"w:w",value:J8(i)}}))}}class k2 extends Si{constructor(e){super("w:tcBorders"),e.top&&this.root.push(new nt("w:top",e.top)),e.start&&this.root.push(new nt("w:start",e.start)),e.left&&this.root.push(new nt("w:left",e.left)),e.bottom&&this.root.push(new nt("w:bottom",e.bottom)),e.end&&this.root.push(new nt("w:end",e.end)),e.right&&this.root.push(new nt("w:right",e.right))}}class N2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class D2 extends ye{constructor(e){super("w:gridSpan"),this.root.push(new N2({val:_n(e)}))}}const eN={CONTINUE:"continue",RESTART:"restart"};class O2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class _1 extends ye{constructor(e){super("w:vMerge"),this.root.push(new O2({val:e}))}}class L2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class F2 extends ye{constructor(e){super("w:textDirection"),this.root.push(new L2({val:e}))}}class V2 extends Si{constructor(e){super("w:tcPr"),e.width&&this.root.push(new no("w:tcW",e.width)),e.columnSpan&&this.root.push(new D2(e.columnSpan)),e.verticalMerge?this.root.push(new _1(e.verticalMerge)):e.rowSpan&&e.rowSpan>1&&this.root.push(new _1(eN.RESTART)),e.borders&&this.root.push(new k2(e.borders)),e.shading&&this.root.push(new Np(e.shading)),e.margins&&this.root.push(new Zk(Jk.TABLE_CELL,e.margins)),e.textDirection&&this.root.push(new F2(e.textDirection)),e.verticalAlign&&this.root.push(new Qk(e.verticalAlign))}}class tr extends ye{constructor(e){super("w:tc"),this.options=e,this.root.push(new V2(e));for(const t of e.children)this.root.push(t)}prepForXml(e){return this.root[this.root.length-1]instanceof mt||this.root.push(new mt({})),super.prepForXml(e)}}const Xo={style:c0.NONE,size:0,color:"auto"},Jo={style:c0.SINGLE,size:4,color:"auto"};class tN extends ye{constructor(e){super("w:tblBorders"),e.top?this.root.push(new nt("w:top",e.top)):this.root.push(new nt("w:top",Jo)),e.left?this.root.push(new nt("w:left",e.left)):this.root.push(new nt("w:left",Jo)),e.bottom?this.root.push(new nt("w:bottom",e.bottom)):this.root.push(new nt("w:bottom",Jo)),e.right?this.root.push(new nt("w:right",e.right)):this.root.push(new nt("w:right",Jo)),e.insideHorizontal?this.root.push(new nt("w:insideH",e.insideHorizontal)):this.root.push(new nt("w:insideH",Jo)),e.insideVertical?this.root.push(new nt("w:insideV",e.insideVertical)):this.root.push(new nt("w:insideV",Jo))}}me(tN,"NONE",{top:Xo,bottom:Xo,left:Xo,right:Xo,insideHorizontal:Xo,insideVertical:Xo});class M2 extends ye{constructor({horizontalAnchor:e,verticalAnchor:t,absoluteHorizontalPosition:r,relativeHorizontalPosition:i,absoluteVerticalPosition:s,relativeVerticalPosition:o,bottomFromText:a,topFromText:l,leftFromText:u,rightFromText:h,overlap:d}){super("w:tblpPr"),this.root.push(new Rs({leftFromText:{key:"w:leftFromText",value:u===void 0?void 0:rn(u)},rightFromText:{key:"w:rightFromText",value:h===void 0?void 0:rn(h)},topFromText:{key:"w:topFromText",value:l===void 0?void 0:rn(l)},bottomFromText:{key:"w:bottomFromText",value:a===void 0?void 0:rn(a)},absoluteHorizontalPosition:{key:"w:tblpX",value:r===void 0?void 0:ui(r)},absoluteVerticalPosition:{key:"w:tblpY",value:s===void 0?void 0:ui(s)},horizontalAnchor:{key:"w:horzAnchor",value:e===void 0?void 0:e},relativeHorizontalPosition:{key:"w:tblpXSpec",value:i},relativeVerticalPosition:{key:"w:tblpYSpec",value:o},verticalAnchor:{key:"w:vertAnchor",value:t}})),d&&this.root.push(new nz("w:tblOverlap",d))}}class U2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:type"})}}class B2 extends ye{constructor(e){super("w:tblLayout"),this.root.push(new U2({type:e}))}}class j2 extends Si{constructor(e){super("w:tblPr"),e.style&&this.root.push(new uo("w:tblStyle",e.style)),e.float&&this.root.push(new M2(e.float)),e.visuallyRightToLeft!==void 0&&this.root.push(new Ee("w:bidiVisual",e.visuallyRightToLeft)),e.width&&this.root.push(new no("w:tblW",e.width)),e.alignment&&this.root.push(new qk(e.alignment)),e.indent&&this.root.push(new no("w:tblInd",e.indent)),e.borders&&this.root.push(new tN(e.borders)),e.shading&&this.root.push(new Np(e.shading)),e.layout&&this.root.push(new B2(e.layout)),e.cellMargin&&this.root.push(new Zk(Jk.TABLE,e.cellMargin))}}class z2 extends Kk{constructor({rows:e,width:t,columnWidths:r=Array(Math.max(...e.map(p=>p.CellCount))).fill(100),margins:i,indent:s,float:o,layout:a,style:l,borders:u,alignment:h,visuallyRightToLeft:d}){super("w:tbl"),this.root.push(new j2({borders:u??{},width:t??{size:100},indent:s,float:o,layout:a,style:l,alignment:h,cellMargin:i,visuallyRightToLeft:d})),this.root.push(new C2(r));for(const p of e)this.root.push(p);e.forEach((p,y)=>{if(y===e.length-1)return;let E=0;p.cells.forEach(_=>{if(_.options.rowSpan&&_.options.rowSpan>1){const b=new tr({rowSpan:_.options.rowSpan-1,columnSpan:_.options.columnSpan,borders:_.options.borders,children:[],verticalMerge:eN.CONTINUE});e[y+1].addCellToColumnIndex(b,E)}E+=_.options.columnSpan||1})})}}class $2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}}class W2 extends ye{constructor(e,t){super("w:trHeight"),this.root.push(new $2({value:rn(e),rule:t}))}}class q2 extends Si{constructor(e){super("w:trPr"),e.cantSplit!==void 0&&this.root.push(new Ee("w:cantSplit",e.cantSplit)),e.tableHeader!==void 0&&this.root.push(new Ee("w:tblHeader",e.tableHeader)),e.height&&this.root.push(new W2(e.height.value,e.height.rule))}}class w1 extends ye{constructor(e){super("w:tr"),this.options=e,this.root.push(new q2(e));for(const t of e.children)this.root.push(t)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(e=>e instanceof tr)}addCellToIndex(e,t){this.root.splice(t+1,0,e)}addCellToColumnIndex(e,t){const r=this.columnIndexToRootIndex(t,!0);this.addCellToIndex(e,r-1)}rootIndexToColumnIndex(e){if(e<1||e>=this.root.length)throw new Error(`cell 'rootIndex' should between 1 to ${this.root.length-1}`);let t=0;for(let r=1;r<e;r++){const i=this.root[r];t+=i.options.columnSpan||1}return t}columnIndexToRootIndex(e,t=!1){if(e<0)throw new Error("cell 'columnIndex' should not less than zero");let r=0,i=1;for(;r<=e;){if(i>=this.root.length){if(t)return this.root.length;throw new Error(`cell 'columnIndex' should not great than ${r-1}`)}const s=this.root[i];i+=1,r+=s&&s.options.columnSpan||1}return i-1}}class G2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class H2 extends ye{constructor(){super("Properties"),this.root.push(new G2({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class K2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{xmlns:"xmlns"})}}class Q2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Mi extends ye{constructor(e,t){super("Default"),this.root.push(new Q2({contentType:e,extension:t}))}}class Y2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class er extends ye{constructor(e,t){super("Override"),this.root.push(new Y2({contentType:e,partName:t}))}}class X2 extends ye{constructor(){super("Types"),this.root.push(new K2({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Mi("image/png","png")),this.root.push(new Mi("image/jpeg","jpeg")),this.root.push(new Mi("image/jpeg","jpg")),this.root.push(new Mi("image/bmp","bmp")),this.root.push(new Mi("image/gif","gif")),this.root.push(new Mi("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Mi("application/xml","xml")),this.root.push(new Mi("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new er("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new er("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class J2 extends ye{constructor(e){super("cp:coreProperties"),this.root.push(new th({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),e.title&&this.root.push(new Vs("dc:title",e.title)),e.subject&&this.root.push(new Vs("dc:subject",e.subject)),e.creator&&this.root.push(new Vs("dc:creator",e.creator)),e.keywords&&this.root.push(new Vs("cp:keywords",e.keywords)),e.description&&this.root.push(new Vs("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new Vs("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new Vs("cp:revision",String(e.revision))),this.root.push(new E1("dcterms:created")),this.root.push(new E1("dcterms:modified"))}}class E1 extends ye{constructor(e){super(e),this.root.push(new th({type:"dcterms:W3CDTF"})),this.root.push(tz(new Date))}}class Z2 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class e9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class t9 extends ye{constructor(e,t){super("property"),this.root.push(new e9({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new n9(t.value))}}class n9 extends ye{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class r9 extends ye{constructor(e){super("Properties"),me(this,"nextId"),me(this,"properties",[]),this.root.push(new Z2({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new t9(this.nextId++,e))}}class i9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let s9=class extends zk{constructor(e,t){super("w:ftr",t),me(this,"refId"),this.refId=e,t||this.root.push(new i9({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class o9{constructor(e,t,r){me(this,"footer"),me(this,"relationships"),this.media=e,this.footer=new s9(t,r),this.relationships=new Al}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class a9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class l9 extends ye{constructor(){super("w:footnoteRef")}}class u9 extends Dp{constructor(){super({style:"FootnoteReference"}),this.root.push(new l9)}}const T1={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Ng extends ye{constructor(e){super("w:footnote"),this.root.push(new a9({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){const r=e.children[t];t===0&&r.addRunToFront(new u9),this.root.push(r)}}}class c9 extends ye{constructor(){super("w:continuationSeparator")}}class h9 extends Dp{constructor(){super({}),this.root.push(new c9)}}class d9 extends ye{constructor(){super("w:separator")}}class f9 extends Dp{constructor(){super({}),this.root.push(new d9)}}class p9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class m9 extends ye{constructor(){super("w:footnotes"),this.root.push(new p9({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new Ng({id:-1,type:T1.SEPERATOR,children:[new mt({spacing:{after:0,line:240,lineRule:vv.AUTO},children:[new f9]})]});this.root.push(e);const t=new Ng({id:0,type:T1.CONTINUATION_SEPERATOR,children:[new mt({spacing:{after:0,line:240,lineRule:vv.AUTO},children:[new h9]})]});this.root.push(t)}createFootNote(e,t){const r=new Ng({id:e,children:t});this.root.push(r)}}class g9{constructor(){me(this,"footnotess"),me(this,"relationships"),this.footnotess=new m9,this.relationships=new Al}get View(){return this.footnotess}get Relationships(){return this.relationships}}class y9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let v9=class extends zk{constructor(e,t){super("w:hdr",t),me(this,"refId"),this.refId=e,t||this.root.push(new y9({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class _9{constructor(e,t,r){me(this,"header"),me(this,"relationships"),this.media=e,this.header=new v9(t,r),this.relationships=new Al}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class w9{constructor(){me(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}}const ei={DECIMAL:"decimal",UPPER_ROMAN:"upperRoman",LOWER_ROMAN:"lowerRoman",UPPER_LETTER:"upperLetter",LOWER_LETTER:"lowerLetter",ORDINAL:"ordinal",CARDINAL_TEXT:"cardinalText",ORDINAL_TEXT:"ordinalText",HEX:"hex",CHICAGO:"chicago",IDEOGRAPH__DIGITAL:"ideographDigital",JAPANESE_COUNTING:"japaneseCounting",AIUEO:"aiueo",IROHA:"iroha",DECIMAL_FULL_WIDTH:"decimalFullWidth",DECIMAL_HALF_WIDTH:"decimalHalfWidth",JAPANESE_LEGAL:"japaneseLegal",JAPANESE_DIGITAL_TEN_THOUSAND:"japaneseDigitalTenThousand",DECIMAL_ENCLOSED_CIRCLE:"decimalEnclosedCircle",DECIMAL_FULL_WIDTH2:"decimalFullWidth2",AIUEO_FULL_WIDTH:"aiueoFullWidth",IROHA_FULL_WIDTH:"irohaFullWidth",DECIMAL_ZERO:"decimalZero",BULLET:"bullet",GANADA:"ganada",CHOSUNG:"chosung",DECIMAL_ENCLOSED_FULLSTOP:"decimalEnclosedFullstop",DECIMAL_ENCLOSED_PARENTHESES:"decimalEnclosedParen",DECIMAL_ENCLOSED_CIRCLE_CHINESE:"decimalEnclosedCircleChinese",IDEOGRAPH_ENCLOSED_CIRCLE:"ideographEnclosedCircle",IDEOGRAPH_TRADITIONAL:"ideographTraditional",IDEOGRAPH_ZODIAC:"ideographZodiac",IDEOGRAPH_ZODIAC_TRADITIONAL:"ideographZodiacTraditional",TAIWANESE_COUNTING:"taiwaneseCounting",IDEOGRAPH_LEGAL_TRADITIONAL:"ideographLegalTraditional",TAIWANESE_COUNTING_THOUSAND:"taiwaneseCountingThousand",TAIWANESE_DIGITAL:"taiwaneseDigital",CHINESE_COUNTING:"chineseCounting",CHINESE_LEGAL_SIMPLIFIED:"chineseLegalSimplified",CHINESE_COUNTING_THOUSAND:"chineseCountingThousand",KOREAN_DIGITAL:"koreanDigital",KOREAN_COUNTING:"koreanCounting",KOREAN_LEGAL:"koreanLegal",KOREAN_DIGITAL2:"koreanDigital2",VIETNAMESE_COUNTING:"vietnameseCounting",RUSSIAN_LOWER:"russianLower",RUSSIAN_UPPER:"russianUpper",NONE:"none",NUMBER_IN_DASH:"numberInDash",HEBREW1:"hebrew1",HEBREW2:"hebrew2",ARABIC_ALPHA:"arabicAlpha",ARABIC_ABJAD:"arabicAbjad",HINDI_VOWELS:"hindiVowels",HINDI_CONSONANTS:"hindiConsonants",HINDI_NUMBERS:"hindiNumbers",HINDI_COUNTING:"hindiCounting",THAI_LETTERS:"thaiLetters",THAI_NUMBERS:"thaiNumbers",THAI_COUNTING:"thaiCounting",BAHT_TEXT:"bahtText",DOLLAR_TEXT:"dollarText",CUSTOM:"custom"};class E9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class T9 extends ye{constructor(e){super("w:numFmt"),this.root.push(new Nt({val:e}))}}class I9 extends ye{constructor(e){super("w:lvlText"),this.root.push(new Nt({val:e}))}}class b9 extends ye{constructor(e){super("w:lvlJc"),this.root.push(new Nt({val:e}))}}class A9 extends ye{constructor(e){super("w:suff"),this.root.push(new Nt({val:e}))}}class x9 extends ye{constructor(){super("w:isLgl")}}class S9 extends ye{constructor({level:e,format:t,text:r,alignment:i=Sr.START,start:s=1,style:o,suffix:a,isLegalNumberingStyle:l}){if(super("w:lvl"),me(this,"paragraphProperties"),me(this,"runProperties"),this.root.push(new u0("w:start",_n(s))),t&&this.root.push(new T9(t)),a&&this.root.push(new A9(a)),l&&this.root.push(new x9),r&&this.root.push(new I9(r)),this.root.push(new b9(i)),this.paragraphProperties=new ll(o&&o.paragraph),this.runProperties=new Vo(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new E9({ilvl:_n(e),tentative:1}))}}class R9 extends S9{}class C9 extends ye{constructor(e){super("w:multiLevelType"),this.root.push(new Nt({val:e}))}}class P9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class I1 extends ye{constructor(e,t){super("w:abstractNum"),me(this,"id"),this.root.push(new P9({abstractNumId:_n(e),restartNumberingAfterBreak:0})),this.root.push(new C9("hybridMultilevel")),this.id=e;for(const r of t)this.root.push(new R9(r))}}class k9 extends ye{constructor(e){super("w:abstractNumId"),this.root.push(new Nt({val:e}))}}class N9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{numId:"w:numId"})}}class b1 extends ye{constructor(e){if(super("w:num"),me(this,"numId"),me(this,"reference"),me(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new N9({numId:_n(e.numId)})),this.root.push(new k9(_n(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const t of e.overrideLevels)this.root.push(new O9(t.num,t.start))}}class D9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{ilvl:"w:ilvl"})}}class O9 extends ye{constructor(e,t){super("w:lvlOverride"),this.root.push(new D9({ilvl:e})),t!==void 0&&this.root.push(new F9(t))}}class L9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class F9 extends ye{constructor(e){super("w:startOverride"),this.root.push(new L9({val:e}))}}class V9 extends ye{constructor(e){super("w:numbering"),me(this,"abstractNumberingMap",new Map),me(this,"concreteNumberingMap",new Map),me(this,"referenceConfigMap",new Map),me(this,"abstractNumUniqueNumericId",Pz()),me(this,"concreteNumUniqueNumericId",kz()),this.root.push(new th({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new I1(this.abstractNumUniqueNumericId(),[{level:0,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:yr(.5),hanging:yr(.25)}}}},{level:1,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:yr(1),hanging:yr(.25)}}}},{level:2,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:2160,hanging:yr(.25)}}}},{level:3,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:2880,hanging:yr(.25)}}}},{level:4,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:3600,hanging:yr(.25)}}}},{level:5,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:4320,hanging:yr(.25)}}}},{level:6,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:5040,hanging:yr(.25)}}}},{level:7,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:5760,hanging:yr(.25)}}}},{level:8,format:ei.BULLET,text:"",alignment:Sr.LEFT,style:{paragraph:{indent:{left:6480,hanging:yr(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new b1({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(const r of e.config)this.abstractNumberingMap.set(r.reference,new I1(this.abstractNumUniqueNumericId(),r.levels)),this.referenceConfigMap.set(r.reference,r.levels)}prepForXml(e){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){const r=this.abstractNumberingMap.get(e);if(!r)return;const i=`${e}-${t}`;if(this.concreteNumberingMap.has(i))return;const s=this.referenceConfigMap.get(e),o=s&&s[0].start,a={numId:this.concreteNumUniqueNumericId(),abstractNumId:r.id,reference:e,instance:t,overrideLevels:[o&&Number.isInteger(o)?{num:0,start:o}:{num:0,start:1}]};this.concreteNumberingMap.set(i,new b1(a))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class M9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class U9 extends ye{constructor(e){super("w:compatSetting"),this.root.push(new M9({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class B9 extends ye{constructor(e){super("w:compat"),e.version&&this.root.push(new U9(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new Ee("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new Ee("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new Ee("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new Ee("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new Ee("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new Ee("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new Ee("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new Ee("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new Ee("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new Ee("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new Ee("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new Ee("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new Ee("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new Ee("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new Ee("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new Ee("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new Ee("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new Ee("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new Ee("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new Ee("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new Ee("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new Ee("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new Ee("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new Ee("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new Ee("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new Ee("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new Ee("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new Ee("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new Ee("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new Ee("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new Ee("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new Ee("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new Ee("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new Ee("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new Ee("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new Ee("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new Ee("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Ee("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new Ee("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new Ee("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new Ee("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new Ee("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new Ee("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new Ee("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new Ee("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new Ee("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new Ee("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new Ee("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new Ee("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new Ee("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new Ee("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new Ee("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new Ee("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new Ee("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new Ee("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new Ee("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new Ee("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new Ee("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new Ee("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new Ee("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new Ee("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new Ee("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Ee("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new Ee("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new Ee("w:cachedColBalance",e.cachedColumnBalance))}}class j9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class z9 extends ye{constructor(e){var t,r,i,s;super("w:settings"),this.root.push(new j9({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Ee("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new Ee("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new Ee("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new Ee("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new u0("w:defaultTabStop",e.defaultTabStop)),this.root.push(new B9(Ac(Je({},(t=e.compatibility)!=null?t:{}),{version:(s=(i=(r=e.compatibility)==null?void 0:r.version)!=null?i:e.compatibilityModeVersion)!=null?s:15})))}}class nN extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{val:"w:val"})}}class $9 extends ye{constructor(e){super("w:name"),this.root.push(new nN({val:e}))}}class W9 extends ye{constructor(e){super("w:uiPriority"),this.root.push(new nN({val:_n(e)}))}}class q9 extends Ve{constructor(){super(...arguments),me(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class rN extends ye{constructor(e,t){super("w:style"),this.root.push(new q9(e)),t.name&&this.root.push(new $9(t.name)),t.basedOn&&this.root.push(new uo("w:basedOn",t.basedOn)),t.next&&this.root.push(new uo("w:next",t.next)),t.link&&this.root.push(new uo("w:link",t.link)),t.uiPriority!==void 0&&this.root.push(new W9(t.uiPriority)),t.semiHidden!==void 0&&this.root.push(new Ee("w:semiHidden",t.semiHidden)),t.unhideWhenUsed!==void 0&&this.root.push(new Ee("w:unhideWhenUsed",t.unhideWhenUsed)),t.quickFormat!==void 0&&this.root.push(new Ee("w:qFormat",t.quickFormat))}}class Op extends rN{constructor(e){super({type:"paragraph",styleId:e.id},e),me(this,"paragraphProperties"),me(this,"runProperties"),this.paragraphProperties=new ll(e.paragraph),this.runProperties=new Vo(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Lp extends rN{constructor(e){super({type:"character",styleId:e.id},Je({uiPriority:99,unhideWhenUsed:!0},e)),me(this,"runProperties"),this.runProperties=new Vo(e.run),this.root.push(this.runProperties)}}class Cs extends Op{constructor(e){super(Je({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class G9 extends Cs{constructor(e){super(Je({id:"Title",name:"Title"},e))}}class H9 extends Cs{constructor(e){super(Je({id:"Heading1",name:"Heading 1"},e))}}class K9 extends Cs{constructor(e){super(Je({id:"Heading2",name:"Heading 2"},e))}}class Q9 extends Cs{constructor(e){super(Je({id:"Heading3",name:"Heading 3"},e))}}class Y9 extends Cs{constructor(e){super(Je({id:"Heading4",name:"Heading 4"},e))}}class X9 extends Cs{constructor(e){super(Je({id:"Heading5",name:"Heading 5"},e))}}class J9 extends Cs{constructor(e){super(Je({id:"Heading6",name:"Heading 6"},e))}}class Z9 extends Cs{constructor(e){super(Je({id:"Strong",name:"Strong"},e))}}class e$ extends Op{constructor(e){super(Je({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class t$ extends Op{constructor(e){super(Je({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:vv.AUTO}},run:{size:20}},e))}}class n$ extends Lp{constructor(e){super(Je({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class r$ extends Lp{constructor(e){super(Je({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class i$ extends Lp{constructor(e){super(Je({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:Hk.SINGLE}}},e))}}class _v extends ye{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(const t of e.paragraphStyles)this.root.push(new Op(t));if(e.characterStyles)for(const t of e.characterStyles)this.root.push(new Lp(t))}}class s$ extends ye{constructor(e){super("w:pPrDefault"),this.root.push(new ll(e))}}class o$ extends ye{constructor(e){super("w:rPrDefault"),this.root.push(new Vo(e))}}class a$ extends ye{constructor(e){super("w:docDefaults"),me(this,"runPropertiesDefaults"),me(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new o$(e.run),this.paragraphPropertiesDefaults=new s$(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class l${newInstance(e){const t=jk.xml2js(e,{compact:!1});let r;for(const o of t.elements||[])o.name==="w:styles"&&(r=o);if(r===void 0)throw new Error("can not find styles element");const i=r.elements||[];return new _v({initialStyles:new Q8(r.attributes),importedStyles:i.map(o=>a0(o))})}}class A1{newInstance(e={}){var t;return{initialStyles:new th({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new a$((t=e.document)!=null?t:{}),new G9(Je({run:{size:56}},e.title)),new H9(Je({run:{color:"2E74B5",size:32}},e.heading1)),new K9(Je({run:{color:"2E74B5",size:26}},e.heading2)),new Q9(Je({run:{color:"1F4D78",size:24}},e.heading3)),new Y9(Je({run:{color:"2E74B5",italics:!0}},e.heading4)),new X9(Je({run:{color:"2E74B5"}},e.heading5)),new J9(Je({run:{color:"1F4D78"}},e.heading6)),new Z9(Je({run:{bold:!0}},e.strong)),new e$(e.listParagraph||{}),new i$(e.hyperlink||{}),new n$(e.footnoteReference||{}),new t$(e.footnoteText||{}),new r$(e.footnoteTextChar||{})]}}}const Jh=({id:n,fontKey:e,subsetted:t},r)=>new vs({name:r,attributes:Je({id:{key:"r:id",value:n}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...t?[new Ee("w:subsetted",t)]:[]]}),u$=({name:n,altName:e,panose1:t,charset:r,family:i,notTrueType:s,pitch:o,sig:a,embedRegular:l,embedBold:u,embedItalic:h,embedBoldItalic:d})=>new vs({name:"w:font",attributes:{name:{key:"w:name",value:n}},children:[...e?[ru("w:altName",e)]:[],...t?[ru("w:panose1",t)]:[],...r?[ru("w:charset",r)]:[],...i?[ru("w:family",i)]:[],...s?[new Ee("w:notTrueType",s)]:[],...o?[ru("w:pitch",o)]:[],...a?[new vs({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:a.usb0},usb1:{key:"w:usb1",value:a.usb1},usb2:{key:"w:usb2",value:a.usb2},usb3:{key:"w:usb3",value:a.usb3},csb0:{key:"w:csb0",value:a.csb0},csb1:{key:"w:csb1",value:a.csb1}}})]:[],...l?[Jh(l,"w:embedRegular")]:[],...u?[Jh(u,"w:embedBold")]:[],...h?[Jh(h,"w:embedItalic")]:[],...d?[Jh(d,"w:embedBoldItalic")]:[]]}),c$=({name:n,index:e,fontKey:t,characterSet:r})=>u$({name:n,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:r,family:"auto",pitch:"variable",embedRegular:{fontKey:t,id:`rId${e}`}}),h$=n=>new vs({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:n.map((e,t)=>c$({name:e.name,index:t+1,fontKey:e.fontKey}))});class d${constructor(e){me(this,"fontTable"),me(this,"relationships"),me(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(t=>Ac(Je({},t),{fontKey:Oz()})),this.fontTable=h$(this.fontOptionsWithKey),this.relationships=new Al;for(let t=0;t<e.length;t++)this.relationships.createRelationship(t+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[t].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class f${constructor(e){me(this,"currentRelationshipId",1),me(this,"documentWrapper"),me(this,"headers",[]),me(this,"footers",[]),me(this,"coreProperties"),me(this,"numbering"),me(this,"media"),me(this,"fileRelationships"),me(this,"footnotesWrapper"),me(this,"settings"),me(this,"contentTypes"),me(this,"customProperties"),me(this,"appProperties"),me(this,"styles"),me(this,"comments"),me(this,"fontWrapper");var t,r,i,s,o,a,l,u;if(this.coreProperties=new J2(Ac(Je({},e),{creator:(t=e.creator)!=null?t:"Un-named",revision:(r=e.revision)!=null?r:1,lastModifiedBy:(i=e.lastModifiedBy)!=null?i:"Un-named"})),this.numbering=new V9(e.numbering?e.numbering:{config:[]}),this.comments=new Mz((s=e.comments)!=null?s:{children:[]}),this.fileRelationships=new Al,this.customProperties=new r9((o=e.customProperties)!=null?o:[]),this.appProperties=new H2,this.footnotesWrapper=new g9,this.contentTypes=new X2,this.documentWrapper=new Xk({background:e.background}),this.settings=new z9({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(a=e.features)==null?void 0:a.trackRevisions,updateFields:(l=e.features)==null?void 0:l.updateFields,defaultTabStop:e.defaultTabStop}),this.media=new w9,e.externalStyles){const h=new l$;this.styles=h.newInstance(e.externalStyles)}else if(e.styles){const d=new A1().newInstance(e.styles.default);this.styles=new _v(Je(Je({},d),e.styles))}else{const h=new A1;this.styles=new _v(h.newInstance())}this.addDefaultRelationships();for(const h of e.sections)this.addSection(h);if(e.footnotes)for(const h in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(h),e.footnotes[h].children);this.fontWrapper=new d$((u=e.fonts)!=null?u:[])}addSection({headers:e={},footers:t={},children:r,properties:i}){this.documentWrapper.View.Body.addSection(Ac(Je({},i),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:t.default?this.createFooter(t.default):void 0,first:t.first?this.createFooter(t.first):void 0,even:t.even?this.createFooter(t.even):void 0}}));for(const s of r)this.documentWrapper.View.add(s)}createHeader(e){const t=new _9(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addHeaderToDocument(t),t}createFooter(e){const t=new o9(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addFooterToDocument(t),t}addHeaderToDocument(e,t=Da.DEFAULT){this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,t=Da.DEFAULT){this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}}function Zh(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var iN={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,h){if(!i[u]){if(!r[u]){var d=typeof Zh=="function"&&Zh;if(!h&&d)return d(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};r[u][0].call(y.exports,function(E){var _=r[u][1][E];return o(_||E)},y,y.exports,t,r,i,s)}return i[u].exports}for(var a=typeof Zh=="function"&&Zh,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,h,d,p,y,E,_,b=[],m=0,v=l.length,I=v,D=s.getTypeOf(l)!=="string";m<l.length;)I=v-m,d=D?(u=l[m++],h=m<v?l[m++]:0,m<v?l[m++]:0):(u=l.charCodeAt(m++),h=m<v?l.charCodeAt(m++):0,m<v?l.charCodeAt(m++):0),p=u>>2,y=(3&u)<<4|h>>4,E=1<I?(15&h)<<2|d>>6:64,_=2<I?63&d:64,b.push(a.charAt(p)+a.charAt(y)+a.charAt(E)+a.charAt(_));return b.join("")},i.decode=function(l){var u,h,d,p,y,E,_=0,b=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var v,I=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&I--,l.charAt(l.length-2)===a.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|I):new Array(0|I);_<l.length;)u=a.indexOf(l.charAt(_++))<<2|(p=a.indexOf(l.charAt(_++)))>>4,h=(15&p)<<4|(y=a.indexOf(l.charAt(_++)))>>2,d=(3&y)<<6|(E=a.indexOf(l.charAt(_++))),v[b++]=u,y!==64&&(v[b++]=h),E!==64&&(v[b++]=d);return v}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(h,d,p,y,E){this.compressedSize=h,this.uncompressedSize=d,this.crc32=p,this.compression=y,this.compressedContent=E}u.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return h.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,d,p){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,h,d,p){var y=o,E=p+d;u^=-1;for(var _=p;_<E;_++)u=u>>>8^y[255&(u^h[_])];return-1^u}(0|l,a,a.length,0):function(u,h,d,p){var y=o,E=p+d;u^=-1;for(var _=p;_<E;_++)u=u>>>8^y[255&(u^h.charCodeAt(_))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),u=s?"uint8array":"array";function h(d,p){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,d.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(p){d.push({data:p,meta:d.meta})}},i.compressWorker=function(d){return new h("Deflate",d)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function s(y,E){var _,b="";for(_=0;_<E;_++)b+=String.fromCharCode(255&y),y>>>=8;return b}function o(y,E,_,b,m,v){var I,D,F=y.file,$=y.compression,k=v!==u.utf8encode,N=a.transformTo("string",v(F.name)),T=a.transformTo("string",u.utf8encode(F.name)),U=F.comment,G=a.transformTo("string",v(U)),O=a.transformTo("string",u.utf8encode(U)),V=T.length!==F.name.length,L=O.length!==U.length,re="",be="",ie="",de=F.dir,te=F.date,pe={crc32:0,compressedSize:0,uncompressedSize:0};E&&!_||(pe.crc32=y.crc32,pe.compressedSize=y.compressedSize,pe.uncompressedSize=y.uncompressedSize);var Y=0;E&&(Y|=8),k||!V&&!L||(Y|=2048);var B=0,Z=0;de&&(B|=16),m==="UNIX"?(Z=798,B|=function(le,X){var R=le;return le||(R=X?16893:33204),(65535&R)<<16}(F.unixPermissions,de)):(Z=20,B|=function(le){return 63&(le||0)}(F.dosPermissions)),I=te.getUTCHours(),I<<=6,I|=te.getUTCMinutes(),I<<=5,I|=te.getUTCSeconds()/2,D=te.getUTCFullYear()-1980,D<<=4,D|=te.getUTCMonth()+1,D<<=5,D|=te.getUTCDate(),V&&(be=s(1,1)+s(h(N),4)+T,re+="up"+s(be.length,2)+be),L&&(ie=s(1,1)+s(h(G),4)+O,re+="uc"+s(ie.length,2)+ie);var ee="";return ee+=`
\0`,ee+=s(Y,2),ee+=$.magic,ee+=s(I,2),ee+=s(D,2),ee+=s(pe.crc32,4),ee+=s(pe.compressedSize,4),ee+=s(pe.uncompressedSize,4),ee+=s(N.length,2),ee+=s(re.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ee+N+re,dirRecord:d.CENTRAL_FILE_HEADER+s(Z,2)+ee+s(G.length,2)+"\0\0\0\0"+s(B,4)+s(b,4)+N+re+G}}var a=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),h=t("../crc32"),d=t("../signature");function p(y,E,_,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=_,this.encodeFileName=b,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(y){var E=y.meta.percent||0,_=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:_?(E+100*(_-b-1))/_:100}}))},p.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var E=this.streamFiles&&!y.file.dir;if(E){var _=o(y,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(y){this.accumulate=!1;var E=this.streamFiles&&!y.file.dir,_=o(y,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),E)this.push({data:function(b){return d.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var y=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var _=this.bytesWritten-y,b=function(m,v,I,D,F){var $=a.transformTo("string",F(D));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(v,4)+s(I,4)+s($.length,2)+$}(this.dirRecords.length,_,y,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(y){this._sources.push(y);var E=this;return y.on("data",function(_){E.processChunk(_)}),y.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),y.on("error",function(_){E.error(_)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(y){var E=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var _=0;_<E.length;_++)try{E[_].error(y)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,E=0;E<y.length;E++)y[E].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(a,l,u){var h=new o(l.streamFiles,u,l.platform,l.encodeFileName),d=0;try{a.forEach(function(p,y){d++;var E=function(v,I){var D=v||I,F=s[D];if(!F)throw new Error(D+" is not a valid compression method !");return F}(y.options.compression,l.compression),_=y.options.compressionOptions||l.compressionOptions||{},b=y.dir,m=y.date;y._compressWorker(E,_).withStreamInfo("file",{name:p,dir:b,date:m,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(h)}),h.entriesCount=d}catch(p){h.error(p)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function d(p){return new o.Promise(function(y,E){var _=p.decompressed.getContentWorker().pipe(new u);_.on("error",function(b){E(b)}).on("end",function(){_.streamInfo.crc32!==p.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(p,y){var E=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,y.optimizedBinaryString,y.base64).then(function(_){var b=new l(y);return b.load(_),b}).then(function(_){var b=[o.Promise.resolve(_)],m=_.files;if(y.checkCRC32)for(var v=0;v<m.length;v++)b.push(d(m[v]));return o.Promise.all(b)}).then(function(_){for(var b=_.shift(),m=b.files,v=0;v<m.length;v++){var I=m[v],D=I.fileNameStr,F=s.resolve(I.fileNameStr);E.file(F,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:y.createFolders}),I.dir||(E.file(F).unsafeOriginalName=D)}return b.zipComment.length&&(E.comment=b.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),o=t("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var h=this;a.on("data",function(d,p){h.push(d)||h._helper.pause(),u&&u(p)}).on("error",function(d){h.emit("error",d)}).on("end",function(){h.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){function s(F,$,k){var N,T=a.getTypeOf($),U=a.extend(k||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(F=m(F)),U.createFolders&&(N=b(F))&&v.call(this,N,!0);var G=T==="string"&&U.binary===!1&&U.base64===!1;k&&k.binary!==void 0||(U.binary=!G),($ instanceof d&&$.uncompressedSize===0||U.dir||!$||$.length===0)&&(U.base64=!1,U.binary=!0,$="",U.compression="STORE",T="string");var O=null;O=$ instanceof d||$ instanceof l?$:E.isNode&&E.isStream($)?new _(F,$):a.prepareContent(F,$,U.binary,U.optimizedBinaryString,U.base64);var V=new p(F,O,U);this.files[F]=V}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),h=t("./defaults"),d=t("./compressedObject"),p=t("./zipObject"),y=t("./generate"),E=t("./nodejsUtils"),_=t("./nodejs/NodejsStreamInputAdapter"),b=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var $=F.lastIndexOf("/");return 0<$?F.substring(0,$):""},m=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},v=function(F,$){return $=$!==void 0?$:h.createFolders,F=m(F),this.files[F]||s.call(this,F,null,{dir:!0,createFolders:$}),this.files[F]};function I(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var $,k,N;for($ in this.files)N=this.files[$],(k=$.slice(this.root.length,$.length))&&$.slice(0,this.root.length)===this.root&&F(k,N)},filter:function(F){var $=[];return this.forEach(function(k,N){F(k,N)&&$.push(N)}),$},file:function(F,$,k){if(arguments.length!==1)return F=this.root+F,s.call(this,F,$,k),this;if(I(F)){var N=F;return this.filter(function(U,G){return!G.dir&&N.test(U)})}var T=this.files[this.root+F];return T&&!T.dir?T:null},folder:function(F){if(!F)return this;if(I(F))return this.filter(function(T,U){return U.dir&&F.test(T)});var $=this.root+F,k=v.call(this,$),N=this.clone();return N.root=k.name,N},remove:function(F){F=this.root+F;var $=this.files[F];if($||(F.slice(-1)!=="/"&&(F+="/"),$=this.files[F]),$&&!$.dir)delete this.files[F];else for(var k=this.filter(function(T,U){return U.name.slice(0,F.length)===F}),N=0;N<k.length;N++)delete this.files[k[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var $,k={};try{if((k=a.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var N=k.comment||this.comment||"";$=y.generateWorker(this,k,N)}catch(T){($=new l("error")).error(T)}return new u($,k.type||"string",k.mimeType)},generateAsync:function(F,$){return this.generateInternalStream(F).accumulate($)},generateNodeStream:function(F,$){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream($)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),d=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===h&&this.data[p+3]===d)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),d=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&h===p[2]&&d===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");r.exports=function(d){var p=s.getTypeOf(d);return s.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(d):o.uint8array?new h(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),o=t("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=s.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),u=t("../support"),h=t("../external"),d=null;if(u.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(E,_){return new h.Promise(function(b,m){var v=[],I=E._internalType,D=E._outputType,F=E._mimeType;E.on("data",function($,k){v.push($),_&&_(k)}).on("error",function($){v=[],m($)}).on("end",function(){try{var $=function(k,N,T){switch(k){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),T);case"base64":return l.encode(N);default:return s.transformTo(k,N)}}(D,function(k,N){var T,U=0,G=null,O=0;for(T=0;T<N.length;T++)O+=N[T].length;switch(k){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(G=new Uint8Array(O),T=0;T<N.length;T++)G.set(N[T],U),U+=N[T].length;return G;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+k+"'")}}(I,v),F);b($)}catch(k){m(k)}v=[]}).resume()})}function y(E,_,b){var m=_;switch(_){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=_,this._mimeType=b,s.checkSupport(m),this._worker=E.pipe(new o(m)),E.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}y.prototype={accumulate:function(E){return p(this,E)},on:function(E,_){var b=this;return E==="data"?this._worker.on(E,function(m){_.call(b,m.data,m.meta)}):this._worker.on(E,function(){s.delay(_,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}i.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(E){var _,b,m,v,I,D=E.length,F=0;for(v=0;v<D;v++)(64512&(b=E.charCodeAt(v)))==55296&&v+1<D&&(64512&(m=E.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),v++),F+=b<128?1:b<2048?2:b<65536?3:4;for(_=o.uint8array?new Uint8Array(F):new Array(F),v=I=0;I<F;v++)(64512&(b=E.charCodeAt(v)))==55296&&v+1<D&&(64512&(m=E.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),v++),b<128?_[I++]=b:(b<2048?_[I++]=192|b>>>6:(b<65536?_[I++]=224|b>>>12:(_[I++]=240|b>>>18,_[I++]=128|b>>>12&63),_[I++]=128|b>>>6&63),_[I++]=128|63&b);return _}(y)},i.utf8decode=function(y){return o.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):function(E){var _,b,m,v,I=E.length,D=new Array(2*I);for(_=b=0;_<I;)if((m=E[_++])<128)D[b++]=m;else if(4<(v=u[m]))D[b++]=65533,_+=v-1;else{for(m&=v===2?31:v===3?15:7;1<v&&_<I;)m=m<<6|63&E[_++],v--;1<v?D[b++]=65533:m<65536?D[b++]=m:(m-=65536,D[b++]=55296|m>>10&1023,D[b++]=56320|1023&m)}return D.length!==b&&(D.subarray?D=D.subarray(0,b):D.length=b),s.applyFromCharCode(D)}(y=s.transformTo(o.uint8array?"uint8array":"array",y))},s.inherits(d,l),d.prototype.processChunk=function(y){var E=s.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=E;(E=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),E.set(_,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var b=function(v,I){var D;for((I=I||v.length)>v.length&&(I=v.length),D=I-1;0<=D&&(192&v[D])==128;)D--;return D<0||D===0?I:D+u[v[D]]>I?D:I}(E),m=E;b!==E.length&&(o.uint8array?(m=E.subarray(0,b),this.leftOver=E.subarray(b,E.length)):(m=E.slice(0,b),this.leftOver=E.slice(b,E.length))),this.push({data:i.utf8decode(m),meta:y.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(p,l),p.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function u(_){return _}function h(_,b){for(var m=0;m<_.length;++m)b[m]=255&_.charCodeAt(m);return b}t("setimmediate"),i.newBlob=function(_,b){i.checkSupport("blob");try{return new Blob([_],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(_),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(_,b,m){var v=[],I=0,D=_.length;if(D<=m)return String.fromCharCode.apply(null,_);for(;I<D;)b==="array"||b==="nodebuffer"?v.push(String.fromCharCode.apply(null,_.slice(I,Math.min(I+m,D)))):v.push(String.fromCharCode.apply(null,_.subarray(I,Math.min(I+m,D)))),I+=m;return v.join("")},stringifyByChar:function(_){for(var b="",m=0;m<_.length;m++)b+=String.fromCharCode(_[m]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(_){var b=65536,m=i.getTypeOf(_),v=!0;if(m==="uint8array"?v=d.applyCanBeUsed.uint8array:m==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<b;)try{return d.stringifyByChunk(_,m,b)}catch{b=Math.floor(b/2)}return d.stringifyByChar(_)}function y(_,b){for(var m=0;m<_.length;m++)b[m]=_[m];return b}i.applyFromCharCode=p;var E={};E.string={string:u,array:function(_){return h(_,new Array(_.length))},arraybuffer:function(_){return E.string.uint8array(_).buffer},uint8array:function(_){return h(_,new Uint8Array(_.length))},nodebuffer:function(_){return h(_,a.allocBuffer(_.length))}},E.array={string:p,array:u,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(_)}},E.arraybuffer={string:function(_){return p(new Uint8Array(_))},array:function(_){return y(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:u,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(new Uint8Array(_))}},E.uint8array={string:p,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:u,nodebuffer:function(_){return a.newBufferFrom(_)}},E.nodebuffer={string:p,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return E.nodebuffer.uint8array(_).buffer},uint8array:function(_){return y(_,new Uint8Array(_.length))},nodebuffer:u},i.transformTo=function(_,b){if(b=b||"",!_)return b;i.checkSupport(_);var m=i.getTypeOf(b);return E[m][_](b)},i.resolve=function(_){for(var b=_.split("/"),m=[],v=0;v<b.length;v++){var I=b[v];I==="."||I===""&&v!==0&&v!==b.length-1||(I===".."?m.pop():m.push(I))}return m.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(_)?"nodebuffer":s.uint8array&&_ instanceof Uint8Array?"uint8array":s.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!s[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var b,m,v="";for(m=0;m<(_||"").length;m++)v+="\\x"+((b=_.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return v},i.delay=function(_,b,m){setImmediate(function(){_.apply(m||null,b||[])})},i.inherits=function(_,b){function m(){}m.prototype=b.prototype,_.prototype=new m},i.extend=function(){var _,b,m={};for(_=0;_<arguments.length;_++)for(b in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],b)&&m[b]===void 0&&(m[b]=arguments[_][b]);return m},i.prepareContent=function(_,b,m,v,I){return l.Promise.resolve(b).then(function(D){return s.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new l.Promise(function(F,$){var k=new FileReader;k.onload=function(N){F(N.target.result)},k.onerror=function(N){$(N.target.error)},k.readAsArrayBuffer(D)}):D}).then(function(D){var F=i.getTypeOf(D);return F?(F==="arraybuffer"?D=i.transformTo("uint8array",D):F==="string"&&(I?D=o.decode(D):m&&v!==!0&&(D=function($){return h($,s.uint8array?new Uint8Array($.length):new Array($.length))}(D))),D):l.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),u=t("./support");function h(d){this.files=[],this.loadOptions=d}h.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(d)+")")}},isSignature:function(d,p){var y=this.reader.index;this.reader.setIndex(d);var E=this.reader.readString(4)===p;return this.reader.setIndex(y),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",y=o.transformTo(p,d);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,p,y,E=this.zip64EndOfCentralSize-44;0<E;)d=this.reader.readInt(2),p=this.reader.readInt(4),y=this.reader.readData(p),this.zip64ExtensibleData[d]={id:d,length:p,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,p;for(d=0;d<this.files.length;d++)p=this.files[d],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var p=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var E=p-y;if(0<E)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),h=t("./compressions"),d=t("./support");function p(y,E){this.options=y,this.loadOptions=E}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var E,_;if(y.skip(22),this.fileNameLength=y.readInt(2),_=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(b){for(var m in h)if(Object.prototype.hasOwnProperty.call(h,m)&&h[m].magic===b)return h[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var E=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(E),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var E,_,b,m=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<m;)E=y.readInt(2),_=y.readInt(2),b=y.readData(_),this.extraFields[E]={id:E,length:_,value:b};y.setIndex(m)},handleUTF8:function(){var y=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var _=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var E=s(y.value);return E.readInt(1)!==1||l(this.fileName)!==E.readInt(4)?null:u.utf8decode(E.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var E=s(y.value);return E.readInt(1)!==1||l(this.fileComment)!==E.readInt(4)?null:u.utf8decode(E.readData(y.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function s(E,_,b){this.name=E,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=_,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),h=t("./stream/GenericWorker");s.prototype={internalStream:function(E){var _=null,b="string";try{if(!E)throw new Error("No output type specified.");var m=(b=E.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),_=this._decompressWorker();var v=!this._dataBinary;v&&!m&&(_=_.pipe(new l.Utf8EncodeWorker)),!v&&m&&(_=_.pipe(new l.Utf8DecodeWorker))}catch(I){(_=new h("error")).error(I)}return new o(_,b,"")},async:function(E,_){return this.internalStream(E).accumulate(_)},nodeStream:function(E,_){return this.internalStream(E||"nodebuffer").toNodejsStream(_)},_compressWorker:function(E,_){if(this._data instanceof u&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(b,E,_)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<d.length;y++)s.prototype[d[y]]=p;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,h=new l(E),d=s.document.createTextNode("");h.observe(d,{characterData:!0}),o=function(){d.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var _=s.document.createElement("script");_.onreadystatechange=function(){E(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:function(){setTimeout(E,0)};else{var p=new s.MessageChannel;p.port1.onmessage=E,o=function(){p.port2.postMessage(0)}}var y=[];function E(){var _,b;a=!0;for(var m=y.length;m;){for(b=y,y=[],_=-1;++_<m;)b[_]();m=y.length}a=!1}r.exports=function(_){y.push(_)!==1||a||o()}}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function d(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,m!==o&&_(this,m)}function p(m,v,I){this.promise=m,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function y(m,v,I){s(function(){var D;try{D=v(I)}catch(F){return a.reject(m,F)}D===m?a.reject(m,new TypeError("Cannot resolve promise with itself")):a.resolve(m,D)})}function E(m){var v=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof v=="function")return function(){v.apply(m,arguments)}}function _(m,v){var I=!1;function D(k){I||(I=!0,a.reject(m,k))}function F(k){I||(I=!0,a.resolve(m,k))}var $=b(function(){v(F,D)});$.status==="error"&&D($.value)}function b(m,v){var I={};try{I.value=m(v),I.status="success"}catch(D){I.status="error",I.value=D}return I}(r.exports=d).prototype.finally=function(m){if(typeof m!="function")return this;var v=this.constructor;return this.then(function(I){return v.resolve(m()).then(function(){return I})},function(I){return v.resolve(m()).then(function(){throw I})})},d.prototype.catch=function(m){return this.then(null,m)},d.prototype.then=function(m,v){if(typeof m!="function"&&this.state===u||typeof v!="function"&&this.state===l)return this;var I=new this.constructor(o);return this.state!==h?y(I,this.state===u?m:v,this.outcome):this.queue.push(new p(I,m,v)),I},p.prototype.callFulfilled=function(m){a.resolve(this.promise,m)},p.prototype.otherCallFulfilled=function(m){y(this.promise,this.onFulfilled,m)},p.prototype.callRejected=function(m){a.reject(this.promise,m)},p.prototype.otherCallRejected=function(m){y(this.promise,this.onRejected,m)},a.resolve=function(m,v){var I=b(E,v);if(I.status==="error")return a.reject(m,I.value);var D=I.value;if(D)_(m,D);else{m.state=u,m.outcome=v;for(var F=-1,$=m.queue.length;++F<$;)m.queue[F].callFulfilled(v)}return m},a.reject=function(m,v){m.state=l,m.outcome=v;for(var I=-1,D=m.queue.length;++I<D;)m.queue[I].callRejected(v);return m},d.resolve=function(m){return m instanceof this?m:a.resolve(new this(o),m)},d.reject=function(m){var v=new this(o);return a.reject(v,m)},d.all=function(m){var v=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,D=!1;if(!I)return this.resolve([]);for(var F=new Array(I),$=0,k=-1,N=new this(o);++k<I;)T(m[k],k);return N;function T(U,G){v.resolve(U).then(function(O){F[G]=O,++$!==I||D||(D=!0,a.resolve(N,F))},function(O){D||(D=!0,a.reject(N,O))})}},d.race=function(m){var v=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,D=!1;if(!I)return this.resolve([]);for(var F=-1,$=new this(o);++F<I;)k=m[F],v.resolve(k).then(function(N){D||(D=!0,a.resolve($,N))},function(N){D||(D=!0,a.reject($,N))});var k;return $}},{immediate:36}],38:[function(t,r,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),h=Object.prototype.toString,d=0,p=-1,y=0,E=8;function _(m){if(!(this instanceof _))return new _(m);this.options=o.assign({level:p,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},m||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(I!==d)throw new Error(l[I]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var D;if(D=typeof v.dictionary=="string"?a.string2buf(v.dictionary):h.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(I=s.deflateSetDictionary(this.strm,D))!==d)throw new Error(l[I]);this._dict_set=!0}}function b(m,v){var I=new _(v);if(I.push(m,!0),I.err)throw I.msg||l[I.err];return I.result}_.prototype.push=function(m,v){var I,D,F=this.strm,$=this.options.chunkSize;if(this.ended)return!1;D=v===~~v?v:v===!0?4:0,typeof m=="string"?F.input=a.string2buf(m):h.call(m)==="[object ArrayBuffer]"?F.input=new Uint8Array(m):F.input=m,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new o.Buf8($),F.next_out=0,F.avail_out=$),(I=s.deflate(F,D))!==1&&I!==d)return this.onEnd(I),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(F.output,F.next_out))):this.onData(o.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&I!==1);return D===4?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===d):D!==2||(this.onEnd(d),!(F.avail_out=0))},_.prototype.onData=function(m){this.chunks.push(m)},_.prototype.onEnd=function(m){m===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=_,i.deflate=b,i.deflateRaw=function(m,v){return(v=v||{}).raw=!0,b(m,v)},i.gzip=function(m,v){return(v=v||{}).gzip=!0,b(m,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),h=t("./zlib/zstream"),d=t("./zlib/gzheader"),p=Object.prototype.toString;function y(_){if(!(this instanceof y))return new y(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||_&&_.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,b.windowBits);if(m!==l.Z_OK)throw new Error(u[m]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function E(_,b){var m=new y(b);if(m.push(_,!0),m.err)throw m.msg||u[m.err];return m.result}y.prototype.push=function(_,b){var m,v,I,D,F,$,k=this.strm,N=this.options.chunkSize,T=this.options.dictionary,U=!1;if(this.ended)return!1;v=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof _=="string"?k.input=a.binstring2buf(_):p.call(_)==="[object ArrayBuffer]"?k.input=new Uint8Array(_):k.input=_,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(N),k.next_out=0,k.avail_out=N),(m=s.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&($=typeof T=="string"?a.string2buf(T):p.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,m=s.inflateSetDictionary(this.strm,$)),m===l.Z_BUF_ERROR&&U===!0&&(m=l.Z_OK,U=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&m!==l.Z_STREAM_END&&(k.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=a.utf8border(k.output,k.next_out),D=k.next_out-I,F=a.buf2string(k.output,I),k.next_out=D,k.avail_out=N-D,D&&o.arraySet(k.output,k.output,I,D,0),this.onData(F)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(U=!0)}while((0<k.avail_in||k.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=y,i.inflate=E,i.inflateRaw=function(_,b){return(b=b||{}).raw=!0,E(_,b)},i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,h,d,p){if(u.subarray&&l.subarray)l.set(u.subarray(h,h+d),p);else for(var y=0;y<d;y++)l[p+y]=u[h+y]},flattenChunks:function(l){var u,h,d,p,y,E;for(u=d=0,h=l.length;u<h;u++)d+=l[u].length;for(E=new Uint8Array(d),u=p=0,h=l.length;u<h;u++)y=l[u],E.set(y,p),p+=y.length;return E}},a={arraySet:function(l,u,h,d,p){for(var y=0;y<d;y++)l[p+y]=u[h+y]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(d,p){if(p<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,p));for(var y="",E=0;E<p;E++)y+=String.fromCharCode(d[E]);return y}l[254]=l[254]=1,i.string2buf=function(d){var p,y,E,_,b,m=d.length,v=0;for(_=0;_<m;_++)(64512&(y=d.charCodeAt(_)))==55296&&_+1<m&&(64512&(E=d.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(E-56320),_++),v+=y<128?1:y<2048?2:y<65536?3:4;for(p=new s.Buf8(v),_=b=0;b<v;_++)(64512&(y=d.charCodeAt(_)))==55296&&_+1<m&&(64512&(E=d.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(E-56320),_++),y<128?p[b++]=y:(y<2048?p[b++]=192|y>>>6:(y<65536?p[b++]=224|y>>>12:(p[b++]=240|y>>>18,p[b++]=128|y>>>12&63),p[b++]=128|y>>>6&63),p[b++]=128|63&y);return p},i.buf2binstring=function(d){return h(d,d.length)},i.binstring2buf=function(d){for(var p=new s.Buf8(d.length),y=0,E=p.length;y<E;y++)p[y]=d.charCodeAt(y);return p},i.buf2string=function(d,p){var y,E,_,b,m=p||d.length,v=new Array(2*m);for(y=E=0;y<m;)if((_=d[y++])<128)v[E++]=_;else if(4<(b=l[_]))v[E++]=65533,y+=b-1;else{for(_&=b===2?31:b===3?15:7;1<b&&y<m;)_=_<<6|63&d[y++],b--;1<b?v[E++]=65533:_<65536?v[E++]=_:(_-=65536,v[E++]=55296|_>>10&1023,v[E++]=56320|1023&_)}return h(v,E)},i.utf8border=function(d,p){var y;for((p=p||d.length)>d.length&&(p=d.length),y=p-1;0<=y&&(192&d[y])==128;)y--;return y<0||y===0?p:y+l[d[y]]>p?y:p}},{"./common":41}],43:[function(t,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,h=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;h=h+(u=u+o[l++]|0)|0,--d;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var h=s,d=u+l;o^=-1;for(var p=u;p<d;p++)o=o>>>8^h[255&(o^a[p])];return-1^o}},{}],46:[function(t,r,i){var s,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),u=t("./crc32"),h=t("./messages"),d=0,p=4,y=0,E=-2,_=-1,b=4,m=2,v=8,I=9,D=286,F=30,$=19,k=2*D+1,N=15,T=3,U=258,G=U+T+1,O=42,V=113,L=1,re=2,be=3,ie=4;function de(x,se){return x.msg=h[se],se}function te(x){return(x<<1)-(4<x?9:0)}function pe(x){for(var se=x.length;0<=--se;)x[se]=0}function Y(x){var se=x.state,P=se.pending;P>x.avail_out&&(P=x.avail_out),P!==0&&(o.arraySet(x.output,se.pending_buf,se.pending_out,P,x.next_out),x.next_out+=P,se.pending_out+=P,x.total_out+=P,x.avail_out-=P,se.pending-=P,se.pending===0&&(se.pending_out=0))}function B(x,se){a._tr_flush_block(x,0<=x.block_start?x.block_start:-1,x.strstart-x.block_start,se),x.block_start=x.strstart,Y(x.strm)}function Z(x,se){x.pending_buf[x.pending++]=se}function ee(x,se){x.pending_buf[x.pending++]=se>>>8&255,x.pending_buf[x.pending++]=255&se}function le(x,se){var P,f,g=x.max_chain_length,A=x.strstart,q=x.prev_length,J=x.nice_match,K=x.strstart>x.w_size-G?x.strstart-(x.w_size-G):0,fe=x.window,we=x.w_mask,ge=x.prev,xe=x.strstart+U,Ce=fe[A+q-1],De=fe[A+q];x.prev_length>=x.good_match&&(g>>=2),J>x.lookahead&&(J=x.lookahead);do if(fe[(P=se)+q]===De&&fe[P+q-1]===Ce&&fe[P]===fe[A]&&fe[++P]===fe[A+1]){A+=2,P++;do;while(fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&fe[++A]===fe[++P]&&A<xe);if(f=U-(xe-A),A=xe-U,q<f){if(x.match_start=se,J<=(q=f))break;Ce=fe[A+q-1],De=fe[A+q]}}while((se=ge[se&we])>K&&--g!=0);return q<=x.lookahead?q:x.lookahead}function X(x){var se,P,f,g,A,q,J,K,fe,we,ge=x.w_size;do{if(g=x.window_size-x.lookahead-x.strstart,x.strstart>=ge+(ge-G)){for(o.arraySet(x.window,x.window,ge,ge,0),x.match_start-=ge,x.strstart-=ge,x.block_start-=ge,se=P=x.hash_size;f=x.head[--se],x.head[se]=ge<=f?f-ge:0,--P;);for(se=P=ge;f=x.prev[--se],x.prev[se]=ge<=f?f-ge:0,--P;);g+=ge}if(x.strm.avail_in===0)break;if(q=x.strm,J=x.window,K=x.strstart+x.lookahead,fe=g,we=void 0,we=q.avail_in,fe<we&&(we=fe),P=we===0?0:(q.avail_in-=we,o.arraySet(J,q.input,q.next_in,we,K),q.state.wrap===1?q.adler=l(q.adler,J,we,K):q.state.wrap===2&&(q.adler=u(q.adler,J,we,K)),q.next_in+=we,q.total_in+=we,we),x.lookahead+=P,x.lookahead+x.insert>=T)for(A=x.strstart-x.insert,x.ins_h=x.window[A],x.ins_h=(x.ins_h<<x.hash_shift^x.window[A+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[A+T-1])&x.hash_mask,x.prev[A&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=A,A++,x.insert--,!(x.lookahead+x.insert<T)););}while(x.lookahead<G&&x.strm.avail_in!==0)}function R(x,se){for(var P,f;;){if(x.lookahead<G){if(X(x),x.lookahead<G&&se===d)return L;if(x.lookahead===0)break}if(P=0,x.lookahead>=T&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+T-1])&x.hash_mask,P=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),P!==0&&x.strstart-P<=x.w_size-G&&(x.match_length=le(x,P)),x.match_length>=T)if(f=a._tr_tally(x,x.strstart-x.match_start,x.match_length-T),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=T){for(x.match_length--;x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+T-1])&x.hash_mask,P=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart,--x.match_length!=0;);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else f=a._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(f&&(B(x,!1),x.strm.avail_out===0))return L}return x.insert=x.strstart<T-1?x.strstart:T-1,se===p?(B(x,!0),x.strm.avail_out===0?be:ie):x.last_lit&&(B(x,!1),x.strm.avail_out===0)?L:re}function S(x,se){for(var P,f,g;;){if(x.lookahead<G){if(X(x),x.lookahead<G&&se===d)return L;if(x.lookahead===0)break}if(P=0,x.lookahead>=T&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+T-1])&x.hash_mask,P=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=T-1,P!==0&&x.prev_length<x.max_lazy_match&&x.strstart-P<=x.w_size-G&&(x.match_length=le(x,P),x.match_length<=5&&(x.strategy===1||x.match_length===T&&4096<x.strstart-x.match_start)&&(x.match_length=T-1)),x.prev_length>=T&&x.match_length<=x.prev_length){for(g=x.strstart+x.lookahead-T,f=a._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-T),x.lookahead-=x.prev_length-1,x.prev_length-=2;++x.strstart<=g&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+T-1])&x.hash_mask,P=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),--x.prev_length!=0;);if(x.match_available=0,x.match_length=T-1,x.strstart++,f&&(B(x,!1),x.strm.avail_out===0))return L}else if(x.match_available){if((f=a._tr_tally(x,0,x.window[x.strstart-1]))&&B(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return L}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(f=a._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<T-1?x.strstart:T-1,se===p?(B(x,!0),x.strm.avail_out===0?be:ie):x.last_lit&&(B(x,!1),x.strm.avail_out===0)?L:re}function Q(x,se,P,f,g){this.good_length=x,this.max_lazy=se,this.nice_length=P,this.max_chain=f,this.func=g}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*F+1)),this.bl_tree=new o.Buf16(2*(2*$+1)),pe(this.dyn_ltree),pe(this.dyn_dtree),pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*D+1),pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*D+1),pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(x){var se;return x&&x.state?(x.total_in=x.total_out=0,x.data_type=m,(se=x.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?O:V,x.adler=se.wrap===2?0:1,se.last_flush=d,a._tr_init(se),y):de(x,E)}function W(x){var se=j(x);return se===y&&function(P){P.window_size=2*P.w_size,pe(P.head),P.max_lazy_match=s[P.level].max_lazy,P.good_match=s[P.level].good_length,P.nice_match=s[P.level].nice_length,P.max_chain_length=s[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=T-1,P.match_available=0,P.ins_h=0}(x.state),se}function ae(x,se,P,f,g,A){if(!x)return E;var q=1;if(se===_&&(se=6),f<0?(q=0,f=-f):15<f&&(q=2,f-=16),g<1||I<g||P!==v||f<8||15<f||se<0||9<se||A<0||b<A)return de(x,E);f===8&&(f=9);var J=new H;return(x.state=J).strm=x,J.wrap=q,J.gzhead=null,J.w_bits=f,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=g+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+T-1)/T),J.window=new o.Buf8(2*J.w_size),J.head=new o.Buf16(J.hash_size),J.prev=new o.Buf16(J.w_size),J.lit_bufsize=1<<g+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new o.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=se,J.strategy=A,J.method=P,W(x)}s=[new Q(0,0,0,0,function(x,se){var P=65535;for(P>x.pending_buf_size-5&&(P=x.pending_buf_size-5);;){if(x.lookahead<=1){if(X(x),x.lookahead===0&&se===d)return L;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var f=x.block_start+P;if((x.strstart===0||x.strstart>=f)&&(x.lookahead=x.strstart-f,x.strstart=f,B(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-G&&(B(x,!1),x.strm.avail_out===0))return L}return x.insert=0,se===p?(B(x,!0),x.strm.avail_out===0?be:ie):(x.strstart>x.block_start&&(B(x,!1),x.strm.avail_out),L)}),new Q(4,4,8,4,R),new Q(4,5,16,8,R),new Q(4,6,32,32,R),new Q(4,4,16,16,S),new Q(8,16,32,32,S),new Q(8,16,128,128,S),new Q(8,32,128,256,S),new Q(32,128,258,1024,S),new Q(32,258,258,4096,S)],i.deflateInit=function(x,se){return ae(x,se,v,15,8,0)},i.deflateInit2=ae,i.deflateReset=W,i.deflateResetKeep=j,i.deflateSetHeader=function(x,se){return x&&x.state?x.state.wrap!==2?E:(x.state.gzhead=se,y):E},i.deflate=function(x,se){var P,f,g,A;if(!x||!x.state||5<se||se<0)return x?de(x,E):E;if(f=x.state,!x.output||!x.input&&x.avail_in!==0||f.status===666&&se!==p)return de(x,x.avail_out===0?-5:E);if(f.strm=x,P=f.last_flush,f.last_flush=se,f.status===O)if(f.wrap===2)x.adler=0,Z(f,31),Z(f,139),Z(f,8),f.gzhead?(Z(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),Z(f,255&f.gzhead.time),Z(f,f.gzhead.time>>8&255),Z(f,f.gzhead.time>>16&255),Z(f,f.gzhead.time>>24&255),Z(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Z(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(Z(f,255&f.gzhead.extra.length),Z(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(x.adler=u(x.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(Z(f,0),Z(f,0),Z(f,0),Z(f,0),Z(f,0),Z(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),Z(f,3),f.status=V);else{var q=v+(f.w_bits-8<<4)<<8;q|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(q|=32),q+=31-q%31,f.status=V,ee(f,q),f.strstart!==0&&(ee(f,x.adler>>>16),ee(f,65535&x.adler)),x.adler=1}if(f.status===69)if(f.gzhead.extra){for(g=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),Y(x),g=f.pending,f.pending!==f.pending_buf_size));)Z(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){g=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),Y(x),g=f.pending,f.pending===f.pending_buf_size)){A=1;break}A=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,Z(f,A)}while(A!==0);f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),A===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){g=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),Y(x),g=f.pending,f.pending===f.pending_buf_size)){A=1;break}A=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,Z(f,A)}while(A!==0);f.gzhead.hcrc&&f.pending>g&&(x.adler=u(x.adler,f.pending_buf,f.pending-g,g)),A===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&Y(x),f.pending+2<=f.pending_buf_size&&(Z(f,255&x.adler),Z(f,x.adler>>8&255),x.adler=0,f.status=V)):f.status=V),f.pending!==0){if(Y(x),x.avail_out===0)return f.last_flush=-1,y}else if(x.avail_in===0&&te(se)<=te(P)&&se!==p)return de(x,-5);if(f.status===666&&x.avail_in!==0)return de(x,-5);if(x.avail_in!==0||f.lookahead!==0||se!==d&&f.status!==666){var J=f.strategy===2?function(K,fe){for(var we;;){if(K.lookahead===0&&(X(K),K.lookahead===0)){if(fe===d)return L;break}if(K.match_length=0,we=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,we&&(B(K,!1),K.strm.avail_out===0))return L}return K.insert=0,fe===p?(B(K,!0),K.strm.avail_out===0?be:ie):K.last_lit&&(B(K,!1),K.strm.avail_out===0)?L:re}(f,se):f.strategy===3?function(K,fe){for(var we,ge,xe,Ce,De=K.window;;){if(K.lookahead<=U){if(X(K),K.lookahead<=U&&fe===d)return L;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=T&&0<K.strstart&&(ge=De[xe=K.strstart-1])===De[++xe]&&ge===De[++xe]&&ge===De[++xe]){Ce=K.strstart+U;do;while(ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&ge===De[++xe]&&xe<Ce);K.match_length=U-(Ce-xe),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=T?(we=a._tr_tally(K,1,K.match_length-T),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(we=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),we&&(B(K,!1),K.strm.avail_out===0))return L}return K.insert=0,fe===p?(B(K,!0),K.strm.avail_out===0?be:ie):K.last_lit&&(B(K,!1),K.strm.avail_out===0)?L:re}(f,se):s[f.level].func(f,se);if(J!==be&&J!==ie||(f.status=666),J===L||J===be)return x.avail_out===0&&(f.last_flush=-1),y;if(J===re&&(se===1?a._tr_align(f):se!==5&&(a._tr_stored_block(f,0,0,!1),se===3&&(pe(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),Y(x),x.avail_out===0))return f.last_flush=-1,y}return se!==p?y:f.wrap<=0?1:(f.wrap===2?(Z(f,255&x.adler),Z(f,x.adler>>8&255),Z(f,x.adler>>16&255),Z(f,x.adler>>24&255),Z(f,255&x.total_in),Z(f,x.total_in>>8&255),Z(f,x.total_in>>16&255),Z(f,x.total_in>>24&255)):(ee(f,x.adler>>>16),ee(f,65535&x.adler)),Y(x),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?y:1)},i.deflateEnd=function(x){var se;return x&&x.state?(se=x.state.status)!==O&&se!==69&&se!==73&&se!==91&&se!==103&&se!==V&&se!==666?de(x,E):(x.state=null,se===V?de(x,-3):y):E},i.deflateSetDictionary=function(x,se){var P,f,g,A,q,J,K,fe,we=se.length;if(!x||!x.state||(A=(P=x.state).wrap)===2||A===1&&P.status!==O||P.lookahead)return E;for(A===1&&(x.adler=l(x.adler,se,we,0)),P.wrap=0,we>=P.w_size&&(A===0&&(pe(P.head),P.strstart=0,P.block_start=0,P.insert=0),fe=new o.Buf8(P.w_size),o.arraySet(fe,se,we-P.w_size,P.w_size,0),se=fe,we=P.w_size),q=x.avail_in,J=x.next_in,K=x.input,x.avail_in=we,x.next_in=0,x.input=se,X(P);P.lookahead>=T;){for(f=P.strstart,g=P.lookahead-(T-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[f+T-1])&P.hash_mask,P.prev[f&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=f,f++,--g;);P.strstart=f,P.lookahead=T-1,X(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=T-1,P.match_available=0,x.next_in=J,x.input=K,x.avail_in=q,P.wrap=A,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(s,o){var a,l,u,h,d,p,y,E,_,b,m,v,I,D,F,$,k,N,T,U,G,O,V,L,re;a=s.state,l=s.next_in,L=s.input,u=l+(s.avail_in-5),h=s.next_out,re=s.output,d=h-(o-s.avail_out),p=h+(s.avail_out-257),y=a.dmax,E=a.wsize,_=a.whave,b=a.wnext,m=a.window,v=a.hold,I=a.bits,D=a.lencode,F=a.distcode,$=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{I<15&&(v+=L[l++]<<I,I+=8,v+=L[l++]<<I,I+=8),N=D[v&$];t:for(;;){if(v>>>=T=N>>>24,I-=T,(T=N>>>16&255)===0)re[h++]=65535&N;else{if(!(16&T)){if(!(64&T)){N=D[(65535&N)+(v&(1<<T)-1)];continue t}if(32&T){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}U=65535&N,(T&=15)&&(I<T&&(v+=L[l++]<<I,I+=8),U+=v&(1<<T)-1,v>>>=T,I-=T),I<15&&(v+=L[l++]<<I,I+=8,v+=L[l++]<<I,I+=8),N=F[v&k];n:for(;;){if(v>>>=T=N>>>24,I-=T,!(16&(T=N>>>16&255))){if(!(64&T)){N=F[(65535&N)+(v&(1<<T)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(G=65535&N,I<(T&=15)&&(v+=L[l++]<<I,(I+=8)<T&&(v+=L[l++]<<I,I+=8)),y<(G+=v&(1<<T)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=T,I-=T,(T=h-d)<G){if(_<(T=G-T)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(V=m,(O=0)===b){if(O+=E-T,T<U){for(U-=T;re[h++]=m[O++],--T;);O=h-G,V=re}}else if(b<T){if(O+=E+b-T,(T-=b)<U){for(U-=T;re[h++]=m[O++],--T;);if(O=0,b<U){for(U-=T=b;re[h++]=m[O++],--T;);O=h-G,V=re}}}else if(O+=b-T,T<U){for(U-=T;re[h++]=m[O++],--T;);O=h-G,V=re}for(;2<U;)re[h++]=V[O++],re[h++]=V[O++],re[h++]=V[O++],U-=3;U&&(re[h++]=V[O++],1<U&&(re[h++]=V[O++]))}else{for(O=h-G;re[h++]=re[O++],re[h++]=re[O++],re[h++]=re[O++],2<(U-=3););U&&(re[h++]=re[O++],1<U&&(re[h++]=re[O++]))}break}}break}}while(l<u&&h<p);l-=U=I>>3,v&=(1<<(I-=U<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=h<p?p-h+257:257-(h-p),a.hold=v,a.bits=I}},{}],49:[function(t,r,i){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),h=1,d=2,p=0,y=-2,E=1,_=852,b=592;function m(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(O){var V;return O&&O.state?(V=O.state,O.total_in=O.total_out=V.total=0,O.msg="",V.wrap&&(O.adler=1&V.wrap),V.mode=E,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new s.Buf32(_),V.distcode=V.distdyn=new s.Buf32(b),V.sane=1,V.back=-1,p):y}function D(O){var V;return O&&O.state?((V=O.state).wsize=0,V.whave=0,V.wnext=0,I(O)):y}function F(O,V){var L,re;return O&&O.state?(re=O.state,V<0?(L=0,V=-V):(L=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?y:(re.window!==null&&re.wbits!==V&&(re.window=null),re.wrap=L,re.wbits=V,D(O))):y}function $(O,V){var L,re;return O?(re=new v,(O.state=re).window=null,(L=F(O,V))!==p&&(O.state=null),L):y}var k,N,T=!0;function U(O){if(T){var V;for(k=new s.Buf32(512),N=new s.Buf32(32),V=0;V<144;)O.lens[V++]=8;for(;V<256;)O.lens[V++]=9;for(;V<280;)O.lens[V++]=7;for(;V<288;)O.lens[V++]=8;for(u(h,O.lens,0,288,k,0,O.work,{bits:9}),V=0;V<32;)O.lens[V++]=5;u(d,O.lens,0,32,N,0,O.work,{bits:5}),T=!1}O.lencode=k,O.lenbits=9,O.distcode=N,O.distbits=5}function G(O,V,L,re){var be,ie=O.state;return ie.window===null&&(ie.wsize=1<<ie.wbits,ie.wnext=0,ie.whave=0,ie.window=new s.Buf8(ie.wsize)),re>=ie.wsize?(s.arraySet(ie.window,V,L-ie.wsize,ie.wsize,0),ie.wnext=0,ie.whave=ie.wsize):(re<(be=ie.wsize-ie.wnext)&&(be=re),s.arraySet(ie.window,V,L-re,be,ie.wnext),(re-=be)?(s.arraySet(ie.window,V,L-re,re,0),ie.wnext=re,ie.whave=ie.wsize):(ie.wnext+=be,ie.wnext===ie.wsize&&(ie.wnext=0),ie.whave<ie.wsize&&(ie.whave+=be))),0}i.inflateReset=D,i.inflateReset2=F,i.inflateResetKeep=I,i.inflateInit=function(O){return $(O,15)},i.inflateInit2=$,i.inflate=function(O,V){var L,re,be,ie,de,te,pe,Y,B,Z,ee,le,X,R,S,Q,H,j,W,ae,x,se,P,f,g=0,A=new s.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return y;(L=O.state).mode===12&&(L.mode=13),de=O.next_out,be=O.output,pe=O.avail_out,ie=O.next_in,re=O.input,te=O.avail_in,Y=L.hold,B=L.bits,Z=te,ee=pe,se=p;e:for(;;)switch(L.mode){case E:if(L.wrap===0){L.mode=13;break}for(;B<16;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(2&L.wrap&&Y===35615){A[L.check=0]=255&Y,A[1]=Y>>>8&255,L.check=a(L.check,A,2,0),B=Y=0,L.mode=2;break}if(L.flags=0,L.head&&(L.head.done=!1),!(1&L.wrap)||(((255&Y)<<8)+(Y>>8))%31){O.msg="incorrect header check",L.mode=30;break}if((15&Y)!=8){O.msg="unknown compression method",L.mode=30;break}if(B-=4,x=8+(15&(Y>>>=4)),L.wbits===0)L.wbits=x;else if(x>L.wbits){O.msg="invalid window size",L.mode=30;break}L.dmax=1<<x,O.adler=L.check=1,L.mode=512&Y?10:12,B=Y=0;break;case 2:for(;B<16;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(L.flags=Y,(255&L.flags)!=8){O.msg="unknown compression method",L.mode=30;break}if(57344&L.flags){O.msg="unknown header flags set",L.mode=30;break}L.head&&(L.head.text=Y>>8&1),512&L.flags&&(A[0]=255&Y,A[1]=Y>>>8&255,L.check=a(L.check,A,2,0)),B=Y=0,L.mode=3;case 3:for(;B<32;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.head&&(L.head.time=Y),512&L.flags&&(A[0]=255&Y,A[1]=Y>>>8&255,A[2]=Y>>>16&255,A[3]=Y>>>24&255,L.check=a(L.check,A,4,0)),B=Y=0,L.mode=4;case 4:for(;B<16;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.head&&(L.head.xflags=255&Y,L.head.os=Y>>8),512&L.flags&&(A[0]=255&Y,A[1]=Y>>>8&255,L.check=a(L.check,A,2,0)),B=Y=0,L.mode=5;case 5:if(1024&L.flags){for(;B<16;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.length=Y,L.head&&(L.head.extra_len=Y),512&L.flags&&(A[0]=255&Y,A[1]=Y>>>8&255,L.check=a(L.check,A,2,0)),B=Y=0}else L.head&&(L.head.extra=null);L.mode=6;case 6:if(1024&L.flags&&(te<(le=L.length)&&(le=te),le&&(L.head&&(x=L.head.extra_len-L.length,L.head.extra||(L.head.extra=new Array(L.head.extra_len)),s.arraySet(L.head.extra,re,ie,le,x)),512&L.flags&&(L.check=a(L.check,re,le,ie)),te-=le,ie+=le,L.length-=le),L.length))break e;L.length=0,L.mode=7;case 7:if(2048&L.flags){if(te===0)break e;for(le=0;x=re[ie+le++],L.head&&x&&L.length<65536&&(L.head.name+=String.fromCharCode(x)),x&&le<te;);if(512&L.flags&&(L.check=a(L.check,re,le,ie)),te-=le,ie+=le,x)break e}else L.head&&(L.head.name=null);L.length=0,L.mode=8;case 8:if(4096&L.flags){if(te===0)break e;for(le=0;x=re[ie+le++],L.head&&x&&L.length<65536&&(L.head.comment+=String.fromCharCode(x)),x&&le<te;);if(512&L.flags&&(L.check=a(L.check,re,le,ie)),te-=le,ie+=le,x)break e}else L.head&&(L.head.comment=null);L.mode=9;case 9:if(512&L.flags){for(;B<16;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(Y!==(65535&L.check)){O.msg="header crc mismatch",L.mode=30;break}B=Y=0}L.head&&(L.head.hcrc=L.flags>>9&1,L.head.done=!0),O.adler=L.check=0,L.mode=12;break;case 10:for(;B<32;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}O.adler=L.check=m(Y),B=Y=0,L.mode=11;case 11:if(L.havedict===0)return O.next_out=de,O.avail_out=pe,O.next_in=ie,O.avail_in=te,L.hold=Y,L.bits=B,2;O.adler=L.check=1,L.mode=12;case 12:if(V===5||V===6)break e;case 13:if(L.last){Y>>>=7&B,B-=7&B,L.mode=27;break}for(;B<3;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}switch(L.last=1&Y,B-=1,3&(Y>>>=1)){case 0:L.mode=14;break;case 1:if(U(L),L.mode=20,V!==6)break;Y>>>=2,B-=2;break e;case 2:L.mode=17;break;case 3:O.msg="invalid block type",L.mode=30}Y>>>=2,B-=2;break;case 14:for(Y>>>=7&B,B-=7&B;B<32;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if((65535&Y)!=(Y>>>16^65535)){O.msg="invalid stored block lengths",L.mode=30;break}if(L.length=65535&Y,B=Y=0,L.mode=15,V===6)break e;case 15:L.mode=16;case 16:if(le=L.length){if(te<le&&(le=te),pe<le&&(le=pe),le===0)break e;s.arraySet(be,re,ie,le,de),te-=le,ie+=le,pe-=le,de+=le,L.length-=le;break}L.mode=12;break;case 17:for(;B<14;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(L.nlen=257+(31&Y),Y>>>=5,B-=5,L.ndist=1+(31&Y),Y>>>=5,B-=5,L.ncode=4+(15&Y),Y>>>=4,B-=4,286<L.nlen||30<L.ndist){O.msg="too many length or distance symbols",L.mode=30;break}L.have=0,L.mode=18;case 18:for(;L.have<L.ncode;){for(;B<3;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.lens[q[L.have++]]=7&Y,Y>>>=3,B-=3}for(;L.have<19;)L.lens[q[L.have++]]=0;if(L.lencode=L.lendyn,L.lenbits=7,P={bits:L.lenbits},se=u(0,L.lens,0,19,L.lencode,0,L.work,P),L.lenbits=P.bits,se){O.msg="invalid code lengths set",L.mode=30;break}L.have=0,L.mode=19;case 19:for(;L.have<L.nlen+L.ndist;){for(;Q=(g=L.lencode[Y&(1<<L.lenbits)-1])>>>16&255,H=65535&g,!((S=g>>>24)<=B);){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(H<16)Y>>>=S,B-=S,L.lens[L.have++]=H;else{if(H===16){for(f=S+2;B<f;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(Y>>>=S,B-=S,L.have===0){O.msg="invalid bit length repeat",L.mode=30;break}x=L.lens[L.have-1],le=3+(3&Y),Y>>>=2,B-=2}else if(H===17){for(f=S+3;B<f;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}B-=S,x=0,le=3+(7&(Y>>>=S)),Y>>>=3,B-=3}else{for(f=S+7;B<f;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}B-=S,x=0,le=11+(127&(Y>>>=S)),Y>>>=7,B-=7}if(L.have+le>L.nlen+L.ndist){O.msg="invalid bit length repeat",L.mode=30;break}for(;le--;)L.lens[L.have++]=x}}if(L.mode===30)break;if(L.lens[256]===0){O.msg="invalid code -- missing end-of-block",L.mode=30;break}if(L.lenbits=9,P={bits:L.lenbits},se=u(h,L.lens,0,L.nlen,L.lencode,0,L.work,P),L.lenbits=P.bits,se){O.msg="invalid literal/lengths set",L.mode=30;break}if(L.distbits=6,L.distcode=L.distdyn,P={bits:L.distbits},se=u(d,L.lens,L.nlen,L.ndist,L.distcode,0,L.work,P),L.distbits=P.bits,se){O.msg="invalid distances set",L.mode=30;break}if(L.mode=20,V===6)break e;case 20:L.mode=21;case 21:if(6<=te&&258<=pe){O.next_out=de,O.avail_out=pe,O.next_in=ie,O.avail_in=te,L.hold=Y,L.bits=B,l(O,ee),de=O.next_out,be=O.output,pe=O.avail_out,ie=O.next_in,re=O.input,te=O.avail_in,Y=L.hold,B=L.bits,L.mode===12&&(L.back=-1);break}for(L.back=0;Q=(g=L.lencode[Y&(1<<L.lenbits)-1])>>>16&255,H=65535&g,!((S=g>>>24)<=B);){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(Q&&!(240&Q)){for(j=S,W=Q,ae=H;Q=(g=L.lencode[ae+((Y&(1<<j+W)-1)>>j)])>>>16&255,H=65535&g,!(j+(S=g>>>24)<=B);){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}Y>>>=j,B-=j,L.back+=j}if(Y>>>=S,B-=S,L.back+=S,L.length=H,Q===0){L.mode=26;break}if(32&Q){L.back=-1,L.mode=12;break}if(64&Q){O.msg="invalid literal/length code",L.mode=30;break}L.extra=15&Q,L.mode=22;case 22:if(L.extra){for(f=L.extra;B<f;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.length+=Y&(1<<L.extra)-1,Y>>>=L.extra,B-=L.extra,L.back+=L.extra}L.was=L.length,L.mode=23;case 23:for(;Q=(g=L.distcode[Y&(1<<L.distbits)-1])>>>16&255,H=65535&g,!((S=g>>>24)<=B);){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(!(240&Q)){for(j=S,W=Q,ae=H;Q=(g=L.distcode[ae+((Y&(1<<j+W)-1)>>j)])>>>16&255,H=65535&g,!(j+(S=g>>>24)<=B);){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}Y>>>=j,B-=j,L.back+=j}if(Y>>>=S,B-=S,L.back+=S,64&Q){O.msg="invalid distance code",L.mode=30;break}L.offset=H,L.extra=15&Q,L.mode=24;case 24:if(L.extra){for(f=L.extra;B<f;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}L.offset+=Y&(1<<L.extra)-1,Y>>>=L.extra,B-=L.extra,L.back+=L.extra}if(L.offset>L.dmax){O.msg="invalid distance too far back",L.mode=30;break}L.mode=25;case 25:if(pe===0)break e;if(le=ee-pe,L.offset>le){if((le=L.offset-le)>L.whave&&L.sane){O.msg="invalid distance too far back",L.mode=30;break}X=le>L.wnext?(le-=L.wnext,L.wsize-le):L.wnext-le,le>L.length&&(le=L.length),R=L.window}else R=be,X=de-L.offset,le=L.length;for(pe<le&&(le=pe),pe-=le,L.length-=le;be[de++]=R[X++],--le;);L.length===0&&(L.mode=21);break;case 26:if(pe===0)break e;be[de++]=L.length,pe--,L.mode=21;break;case 27:if(L.wrap){for(;B<32;){if(te===0)break e;te--,Y|=re[ie++]<<B,B+=8}if(ee-=pe,O.total_out+=ee,L.total+=ee,ee&&(O.adler=L.check=L.flags?a(L.check,be,ee,de-ee):o(L.check,be,ee,de-ee)),ee=pe,(L.flags?Y:m(Y))!==L.check){O.msg="incorrect data check",L.mode=30;break}B=Y=0}L.mode=28;case 28:if(L.wrap&&L.flags){for(;B<32;){if(te===0)break e;te--,Y+=re[ie++]<<B,B+=8}if(Y!==(4294967295&L.total)){O.msg="incorrect length check",L.mode=30;break}B=Y=0}L.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return y}return O.next_out=de,O.avail_out=pe,O.next_in=ie,O.avail_in=te,L.hold=Y,L.bits=B,(L.wsize||ee!==O.avail_out&&L.mode<30&&(L.mode<27||V!==4))&&G(O,O.output,O.next_out,ee-O.avail_out)?(L.mode=31,-4):(Z-=O.avail_in,ee-=O.avail_out,O.total_in+=Z,O.total_out+=ee,L.total+=ee,L.wrap&&ee&&(O.adler=L.check=L.flags?a(L.check,be,ee,O.next_out-ee):o(L.check,be,ee,O.next_out-ee)),O.data_type=L.bits+(L.last?64:0)+(L.mode===12?128:0)+(L.mode===20||L.mode===15?256:0),(Z==0&&ee===0||V===4)&&se===p&&(se=-5),se)},i.inflateEnd=function(O){if(!O||!O.state)return y;var V=O.state;return V.window&&(V.window=null),O.state=null,p},i.inflateGetHeader=function(O,V){var L;return O&&O.state&&2&(L=O.state).wrap?((L.head=V).done=!1,p):y},i.inflateSetDictionary=function(O,V){var L,re=V.length;return O&&O.state?(L=O.state).wrap!==0&&L.mode!==11?y:L.mode===11&&o(1,V,re,0)!==L.check?-3:G(O,V,re,re)?(L.mode=31,-4):(L.havedict=1,p):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,d,p,y,E,_,b,m){var v,I,D,F,$,k,N,T,U,G=m.bits,O=0,V=0,L=0,re=0,be=0,ie=0,de=0,te=0,pe=0,Y=0,B=null,Z=0,ee=new s.Buf16(16),le=new s.Buf16(16),X=null,R=0;for(O=0;O<=15;O++)ee[O]=0;for(V=0;V<y;V++)ee[d[p+V]]++;for(be=G,re=15;1<=re&&ee[re]===0;re--);if(re<be&&(be=re),re===0)return E[_++]=20971520,E[_++]=20971520,m.bits=1,0;for(L=1;L<re&&ee[L]===0;L++);for(be<L&&(be=L),O=te=1;O<=15;O++)if(te<<=1,(te-=ee[O])<0)return-1;if(0<te&&(h===0||re!==1))return-1;for(le[1]=0,O=1;O<15;O++)le[O+1]=le[O]+ee[O];for(V=0;V<y;V++)d[p+V]!==0&&(b[le[d[p+V]]++]=V);if(k=h===0?(B=X=b,19):h===1?(B=o,Z-=257,X=a,R-=257,256):(B=l,X=u,-1),O=L,$=_,de=V=Y=0,D=-1,F=(pe=1<<(ie=be))-1,h===1&&852<pe||h===2&&592<pe)return 1;for(;;){for(N=O-de,U=b[V]<k?(T=0,b[V]):b[V]>k?(T=X[R+b[V]],B[Z+b[V]]):(T=96,0),v=1<<O-de,L=I=1<<ie;E[$+(Y>>de)+(I-=v)]=N<<24|T<<16|U|0,I!==0;);for(v=1<<O-1;Y&v;)v>>=1;if(v!==0?(Y&=v-1,Y+=v):Y=0,V++,--ee[O]==0){if(O===re)break;O=d[p+b[V]]}if(be<O&&(Y&F)!==D){for(de===0&&(de=be),$+=L,te=1<<(ie=O-de);ie+de<re&&!((te-=ee[ie+de])<=0);)ie++,te<<=1;if(pe+=1<<ie,h===1&&852<pe||h===2&&592<pe)return 1;E[D=Y&F]=be<<24|ie<<16|$-_|0}}return Y!==0&&(E[$+Y]=O-de<<24|64<<16|0),m.bits=be,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),o=0,a=1;function l(g){for(var A=g.length;0<=--A;)g[A]=0}var u=0,h=29,d=256,p=d+1+h,y=30,E=19,_=2*p+1,b=15,m=16,v=7,I=256,D=16,F=17,$=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(p+2));l(G);var O=new Array(2*y);l(O);var V=new Array(512);l(V);var L=new Array(256);l(L);var re=new Array(h);l(re);var be,ie,de,te=new Array(y);function pe(g,A,q,J,K){this.static_tree=g,this.extra_bits=A,this.extra_base=q,this.elems=J,this.max_length=K,this.has_stree=g&&g.length}function Y(g,A){this.dyn_tree=g,this.max_code=0,this.stat_desc=A}function B(g){return g<256?V[g]:V[256+(g>>>7)]}function Z(g,A){g.pending_buf[g.pending++]=255&A,g.pending_buf[g.pending++]=A>>>8&255}function ee(g,A,q){g.bi_valid>m-q?(g.bi_buf|=A<<g.bi_valid&65535,Z(g,g.bi_buf),g.bi_buf=A>>m-g.bi_valid,g.bi_valid+=q-m):(g.bi_buf|=A<<g.bi_valid&65535,g.bi_valid+=q)}function le(g,A,q){ee(g,q[2*A],q[2*A+1])}function X(g,A){for(var q=0;q|=1&g,g>>>=1,q<<=1,0<--A;);return q>>>1}function R(g,A,q){var J,K,fe=new Array(b+1),we=0;for(J=1;J<=b;J++)fe[J]=we=we+q[J-1]<<1;for(K=0;K<=A;K++){var ge=g[2*K+1];ge!==0&&(g[2*K]=X(fe[ge]++,ge))}}function S(g){var A;for(A=0;A<p;A++)g.dyn_ltree[2*A]=0;for(A=0;A<y;A++)g.dyn_dtree[2*A]=0;for(A=0;A<E;A++)g.bl_tree[2*A]=0;g.dyn_ltree[2*I]=1,g.opt_len=g.static_len=0,g.last_lit=g.matches=0}function Q(g){8<g.bi_valid?Z(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0}function H(g,A,q,J){var K=2*A,fe=2*q;return g[K]<g[fe]||g[K]===g[fe]&&J[A]<=J[q]}function j(g,A,q){for(var J=g.heap[q],K=q<<1;K<=g.heap_len&&(K<g.heap_len&&H(A,g.heap[K+1],g.heap[K],g.depth)&&K++,!H(A,J,g.heap[K],g.depth));)g.heap[q]=g.heap[K],q=K,K<<=1;g.heap[q]=J}function W(g,A,q){var J,K,fe,we,ge=0;if(g.last_lit!==0)for(;J=g.pending_buf[g.d_buf+2*ge]<<8|g.pending_buf[g.d_buf+2*ge+1],K=g.pending_buf[g.l_buf+ge],ge++,J===0?le(g,K,A):(le(g,(fe=L[K])+d+1,A),(we=k[fe])!==0&&ee(g,K-=re[fe],we),le(g,fe=B(--J),q),(we=N[fe])!==0&&ee(g,J-=te[fe],we)),ge<g.last_lit;);le(g,I,A)}function ae(g,A){var q,J,K,fe=A.dyn_tree,we=A.stat_desc.static_tree,ge=A.stat_desc.has_stree,xe=A.stat_desc.elems,Ce=-1;for(g.heap_len=0,g.heap_max=_,q=0;q<xe;q++)fe[2*q]!==0?(g.heap[++g.heap_len]=Ce=q,g.depth[q]=0):fe[2*q+1]=0;for(;g.heap_len<2;)fe[2*(K=g.heap[++g.heap_len]=Ce<2?++Ce:0)]=1,g.depth[K]=0,g.opt_len--,ge&&(g.static_len-=we[2*K+1]);for(A.max_code=Ce,q=g.heap_len>>1;1<=q;q--)j(g,fe,q);for(K=xe;q=g.heap[1],g.heap[1]=g.heap[g.heap_len--],j(g,fe,1),J=g.heap[1],g.heap[--g.heap_max]=q,g.heap[--g.heap_max]=J,fe[2*K]=fe[2*q]+fe[2*J],g.depth[K]=(g.depth[q]>=g.depth[J]?g.depth[q]:g.depth[J])+1,fe[2*q+1]=fe[2*J+1]=K,g.heap[1]=K++,j(g,fe,1),2<=g.heap_len;);g.heap[--g.heap_max]=g.heap[1],function(De,Ut){var fr,jn,Ps,st,ks,Mo,zn=Ut.dyn_tree,nh=Ut.max_code,Fp=Ut.stat_desc.static_tree,xl=Ut.stat_desc.has_stree,rh=Ut.stat_desc.extra_bits,Sl=Ut.stat_desc.extra_base,pr=Ut.stat_desc.max_length,Ci=0;for(st=0;st<=b;st++)De.bl_count[st]=0;for(zn[2*De.heap[De.heap_max]+1]=0,fr=De.heap_max+1;fr<_;fr++)pr<(st=zn[2*zn[2*(jn=De.heap[fr])+1]+1]+1)&&(st=pr,Ci++),zn[2*jn+1]=st,nh<jn||(De.bl_count[st]++,ks=0,Sl<=jn&&(ks=rh[jn-Sl]),Mo=zn[2*jn],De.opt_len+=Mo*(st+ks),xl&&(De.static_len+=Mo*(Fp[2*jn+1]+ks)));if(Ci!==0){do{for(st=pr-1;De.bl_count[st]===0;)st--;De.bl_count[st]--,De.bl_count[st+1]+=2,De.bl_count[pr]--,Ci-=2}while(0<Ci);for(st=pr;st!==0;st--)for(jn=De.bl_count[st];jn!==0;)nh<(Ps=De.heap[--fr])||(zn[2*Ps+1]!==st&&(De.opt_len+=(st-zn[2*Ps+1])*zn[2*Ps],zn[2*Ps+1]=st),jn--)}}(g,A),R(fe,Ce,g.bl_count)}function x(g,A,q){var J,K,fe=-1,we=A[1],ge=0,xe=7,Ce=4;for(we===0&&(xe=138,Ce=3),A[2*(q+1)+1]=65535,J=0;J<=q;J++)K=we,we=A[2*(J+1)+1],++ge<xe&&K===we||(ge<Ce?g.bl_tree[2*K]+=ge:K!==0?(K!==fe&&g.bl_tree[2*K]++,g.bl_tree[2*D]++):ge<=10?g.bl_tree[2*F]++:g.bl_tree[2*$]++,fe=K,Ce=(ge=0)===we?(xe=138,3):K===we?(xe=6,3):(xe=7,4))}function se(g,A,q){var J,K,fe=-1,we=A[1],ge=0,xe=7,Ce=4;for(we===0&&(xe=138,Ce=3),J=0;J<=q;J++)if(K=we,we=A[2*(J+1)+1],!(++ge<xe&&K===we)){if(ge<Ce)for(;le(g,K,g.bl_tree),--ge!=0;);else K!==0?(K!==fe&&(le(g,K,g.bl_tree),ge--),le(g,D,g.bl_tree),ee(g,ge-3,2)):ge<=10?(le(g,F,g.bl_tree),ee(g,ge-3,3)):(le(g,$,g.bl_tree),ee(g,ge-11,7));fe=K,Ce=(ge=0)===we?(xe=138,3):K===we?(xe=6,3):(xe=7,4)}}l(te);var P=!1;function f(g,A,q,J){ee(g,(u<<1)+(J?1:0),3),function(K,fe,we,ge){Q(K),ge&&(Z(K,we),Z(K,~we)),s.arraySet(K.pending_buf,K.window,fe,we,K.pending),K.pending+=we}(g,A,q,!0)}i._tr_init=function(g){P||(function(){var A,q,J,K,fe,we=new Array(b+1);for(K=J=0;K<h-1;K++)for(re[K]=J,A=0;A<1<<k[K];A++)L[J++]=K;for(L[J-1]=K,K=fe=0;K<16;K++)for(te[K]=fe,A=0;A<1<<N[K];A++)V[fe++]=K;for(fe>>=7;K<y;K++)for(te[K]=fe<<7,A=0;A<1<<N[K]-7;A++)V[256+fe++]=K;for(q=0;q<=b;q++)we[q]=0;for(A=0;A<=143;)G[2*A+1]=8,A++,we[8]++;for(;A<=255;)G[2*A+1]=9,A++,we[9]++;for(;A<=279;)G[2*A+1]=7,A++,we[7]++;for(;A<=287;)G[2*A+1]=8,A++,we[8]++;for(R(G,p+1,we),A=0;A<y;A++)O[2*A+1]=5,O[2*A]=X(A,5);be=new pe(G,k,d+1,p,b),ie=new pe(O,N,0,y,b),de=new pe(new Array(0),T,0,E,v)}(),P=!0),g.l_desc=new Y(g.dyn_ltree,be),g.d_desc=new Y(g.dyn_dtree,ie),g.bl_desc=new Y(g.bl_tree,de),g.bi_buf=0,g.bi_valid=0,S(g)},i._tr_stored_block=f,i._tr_flush_block=function(g,A,q,J){var K,fe,we=0;0<g.level?(g.strm.data_type===2&&(g.strm.data_type=function(ge){var xe,Ce=4093624447;for(xe=0;xe<=31;xe++,Ce>>>=1)if(1&Ce&&ge.dyn_ltree[2*xe]!==0)return o;if(ge.dyn_ltree[18]!==0||ge.dyn_ltree[20]!==0||ge.dyn_ltree[26]!==0)return a;for(xe=32;xe<d;xe++)if(ge.dyn_ltree[2*xe]!==0)return a;return o}(g)),ae(g,g.l_desc),ae(g,g.d_desc),we=function(ge){var xe;for(x(ge,ge.dyn_ltree,ge.l_desc.max_code),x(ge,ge.dyn_dtree,ge.d_desc.max_code),ae(ge,ge.bl_desc),xe=E-1;3<=xe&&ge.bl_tree[2*U[xe]+1]===0;xe--);return ge.opt_len+=3*(xe+1)+5+5+4,xe}(g),K=g.opt_len+3+7>>>3,(fe=g.static_len+3+7>>>3)<=K&&(K=fe)):K=fe=q+5,q+4<=K&&A!==-1?f(g,A,q,J):g.strategy===4||fe===K?(ee(g,2+(J?1:0),3),W(g,G,O)):(ee(g,4+(J?1:0),3),function(ge,xe,Ce,De){var Ut;for(ee(ge,xe-257,5),ee(ge,Ce-1,5),ee(ge,De-4,4),Ut=0;Ut<De;Ut++)ee(ge,ge.bl_tree[2*U[Ut]+1],3);se(ge,ge.dyn_ltree,xe-1),se(ge,ge.dyn_dtree,Ce-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,we+1),W(g,g.dyn_ltree,g.dyn_dtree)),S(g),J&&Q(g)},i._tr_tally=function(g,A,q){return g.pending_buf[g.d_buf+2*g.last_lit]=A>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&A,g.pending_buf[g.l_buf+g.last_lit]=255&q,g.last_lit++,A===0?g.dyn_ltree[2*q]++:(g.matches++,A--,g.dyn_ltree[2*(L[q]+d+1)]++,g.dyn_dtree[2*B(A)]++),g.last_lit===g.lit_bufsize-1},i._tr_align=function(g){ee(g,2,3),le(g,I,G),function(A){A.bi_valid===16?(Z(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(g)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,h,d,p=1,y={},E=!1,_=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(D){ze.nextTick(function(){v(D)})}:function(){if(o.postMessage&&!o.importScripts){var D=!0,F=o.onmessage;return o.onmessage=function(){D=!1},o.postMessage("","*"),o.onmessage=F,D}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",I,!1):o.attachEvent("onmessage",I),function(D){o.postMessage(d+D,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(D){v(D.data)},function(D){h.port2.postMessage(D)}):_&&"onreadystatechange"in _.createElement("script")?(u=_.documentElement,function(D){var F=_.createElement("script");F.onreadystatechange=function(){v(D),F.onreadystatechange=null,u.removeChild(F),F=null},u.appendChild(F)}):function(D){setTimeout(v,0,D)},b.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var F=new Array(arguments.length-1),$=0;$<F.length;$++)F[$]=arguments[$+1];var k={callback:D,args:F};return y[p]=k,l(p),p++},b.clearImmediate=m}function m(D){delete y[D]}function v(D){if(E)setTimeout(v,0,D);else{var F=y[D];if(F){E=!0;try{(function($){var k=$.callback,N=$.args;switch(N.length){case 0:k();break;case 1:k(N[0]);break;case 2:k(N[0],N[1]);break;case 3:k(N[0],N[1],N[2]);break;default:k.apply(a,N)}})(F)}finally{m(D),E=!1}}}}function I(D){D.source===o&&typeof D.data=="string"&&D.data.indexOf(d)===0&&v(+D.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(iN);var p$=iN.exports;const m$=rk(p$);var Rf={exports:{}},g$={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function y$(n){return n&&n.replace?n.replace(/([&"<>'])/g,function(e,t){return g$[t]}):n}var v$=y$,wv=v$,x1=n0.Stream,_$="    ";function w$(n,e){typeof e!="object"&&(e={indent:e});var t=e.stream?new x1:null,r="",i=!1,s=e.indent?e.indent===!0?_$:e.indent:"",o=!0;function a(p){o?ze.nextTick(p):p()}function l(p,y){if(y!==void 0&&(r+=y),p&&!i&&(t=t||new x1,i=!0),p&&i){var E=r;a(function(){t.emit("data",E)}),r=""}}function u(p,y){p0(l,Cf(p,s,s?1:0),y)}function h(){if(t){var p=r;a(function(){t.emit("data",p),t.emit("end"),t.readable=!1,t.emit("close")})}}function d(p){var y=p.encoding||"UTF-8",E={version:"1.0",encoding:y};p.standalone&&(E.standalone=p.standalone),u({"?xml":{_attr:E}}),r=r.replace("/>","?>")}return a(function(){o=!1}),e.declaration&&d(e.declaration),n&&n.forEach?n.forEach(function(p,y){var E;y+1===n.length&&(E=h),u(p,E)}):u(n,h),t?(t.readable=!0,t):r}function E$(){var n=Array.prototype.slice.call(arguments),e={_elem:Cf(n)};return e.push=function(t){if(!this.append)throw new Error("not assigned to a parent!");var r=this,i=this._elem.indent;p0(this.append,Cf(t,i,this._elem.icount+(i?1:0)),function(){r.append(!0)})},e.close=function(t){t!==void 0&&this.push(t),this.end&&this.end()},e}function T$(n,e){return new Array(e||0).join(n||"")}function Cf(n,e,t){t=t||0;var r=T$(e,t),i,s=n,o=!1;if(typeof n=="object"){var a=Object.keys(n);if(i=a[0],s=n[i],s&&s._elem)return s._elem.name=i,s._elem.icount=t,s._elem.indent=e,s._elem.indents=r,s._elem.interrupt=s,s._elem}var l=[],u=[],h;function d(p){var y=Object.keys(p);y.forEach(function(E){l.push(I$(E,p[E]))})}switch(typeof s){case"object":if(s===null)break;s._attr&&d(s._attr),s._cdata&&u.push(("<![CDATA["+s._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),s.forEach&&(h=!1,u.push(""),s.forEach(function(p){if(typeof p=="object"){var y=Object.keys(p)[0];y=="_attr"?d(p._attr):u.push(Cf(p,e,t+1))}else u.pop(),h=!0,u.push(wv(p))}),h||u.push(""));break;default:u.push(wv(s))}return{name:i,interrupt:o,attributes:l,content:u,icount:t,indents:r,indent:e}}function p0(n,e,t){if(typeof e!="object")return n(!1,e);var r=e.interrupt?1:e.content.length;function i(){for(;e.content.length;){var o=e.content.shift();if(o!==void 0){if(s(o))return;p0(n,o)}}n(!1,(r>1?e.indents:"")+(e.name?"</"+e.name+">":"")+(e.indent&&!t?`
`:"")),t&&t()}function s(o){return o.interrupt?(o.interrupt.append=n,o.interrupt.end=i,o.interrupt=!1,n(!0),!0):!1}if(n(!1,e.indents+(e.name?"<"+e.name:"")+(e.attributes.length?" "+e.attributes.join(" "):"")+(r?e.name?">":"":e.name?"/>":"")+(e.indent&&r>1?`
`:"")),!r)return n(!1,e.indent?`
`:"");s(e)||i()}function I$(n,e){return n+'="'+wv(e)+'"'}Rf.exports=w$;Rf.exports.element=Rf.exports.Element=E$;var b$=Rf.exports;const Dt=rk(b$),S1=0,R1=32,A$=32,x$=(n,e)=>{const t=e.replace(/-/g,"");if(t.length!==A$)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const i=t.replace(/(..)/g,"$1 ").trim().split(" ").map(l=>parseInt(l,16));i.reverse();const o=n.slice(S1,R1).map((l,u)=>l^i[u%i.length]);return Buffer.concat([n.slice(0,S1),o,n.slice(R1)])};class S${format(e,t={stack:[]}){const r=e.prepForXml(t);if(r)return r;throw Error("XMLComponent did not format correctly")}}class R${replace(e,t,r){let i=e;return t.forEach((s,o)=>{i=i.replace(new RegExp(`{${s.fileName}}`,"g"),(r+o).toString())}),i}getMediaData(e,t){return t.Array.filter(r=>e.search(`{${r.fileName}}`)>0)}}class C${replace(e,t){let r=e;for(const i of t)r=r.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return r}}class P${constructor(){me(this,"formatter"),me(this,"imageReplacer"),me(this,"numberingReplacer"),this.formatter=new S$,this.imageReplacer=new R$,this.numberingReplacer=new C$}compile(e,t){const r=new m$,i=this.xmlifyFile(e,t),s=new Map(Object.entries(i));for(const[,o]of s)if(Array.isArray(o))for(const a of o)r.file(a.path,a.data);else r.file(o.path,o.data);for(const{stream:o,fileName:a}of e.Media.Array)r.file(`word/media/${a}`,o);for(const{data:o,name:a,fontKey:l}of e.FontTable.fontOptionsWithKey){const[u]=a.split(".");r.file(`word/fonts/${u}.odttf`,x$(o,l))}return r}xmlifyFile(e,t){const r=e.Document.Relationships.RelationshipCount+1,i=Dt(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=this.imageReplacer.getMediaData(i,e.Media);return{Relationships:{data:(()=>(s.forEach((o,a)=>{e.Document.Relationships.createRelationship(r+a,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${o.fileName}`)}),Dt(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const o=this.imageReplacer.replace(i,s,r);return this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const o=Dt(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Dt(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Dt(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Dt(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((o,a)=>{const l=Dt(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(l,e.Media).forEach((h,d)=>{o.Relationships.createRelationship(d,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),{data:Dt(this.formatter.format(o.Relationships,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${a+1}.xml.rels`}}),FooterRelationships:e.Footers.map((o,a)=>{const l=Dt(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(l,e.Media).forEach((h,d)=>{o.Relationships.createRelationship(d,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),{data:Dt(this.formatter.format(o.Relationships,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${a+1}.xml.rels`}}),Headers:e.Headers.map((o,a)=>{const l=Dt(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),u=this.imageReplacer.getMediaData(l,e.Media),h=this.imageReplacer.replace(l,u,0);return{data:this.numberingReplacer.replace(h,e.Numbering.ConcreteNumbering),path:`word/header${a+1}.xml`}}),Footers:e.Footers.map((o,a)=>{const l=Dt(this.formatter.format(o.View,{viewWrapper:o,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),u=this.imageReplacer.getMediaData(l,e.Media),h=this.imageReplacer.replace(l,u,0);return{data:this.numberingReplacer.replace(h,e.Numbering.ConcreteNumbering),path:`word/footer${a+1}.xml`}}),ContentTypes:{data:Dt(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Dt(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Dt(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Dt(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Dt(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Dt(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:Dt(this.formatter.format(e.Comments,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/comments.xml"},FontTable:{data:Dt(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:(()=>Dt(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}))(),path:"word/_rels/fontTable.xml.rels"}}}}const k$={NONE:"",WITH_2_BLANKS:"  ",WITH_4_BLANKS:"    ",WITH_TAB:"	"},su=n=>n===!0?k$.WITH_2_BLANKS:n===!1?void 0:n;class sN{static toString(e,t){return Wh(this,null,function*(){return yield this.compiler.compile(e,su(t)).generateAsync({type:"string",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBuffer(e,t){return Wh(this,null,function*(){return yield this.compiler.compile(e,su(t)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBase64String(e,t){return Wh(this,null,function*(){return yield this.compiler.compile(e,su(t)).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBlob(e,t){return Wh(this,null,function*(){return yield this.compiler.compile(e,su(t)).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toStream(e,t){const r=new n0.Stream;return this.compiler.compile(e,su(t)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(s=>{r.emit("data",s),r.emit("end")}),r}}me(sN,"compiler",new P$);function N$(n,e){const t=i=>i==null?"":`"${String(i).replace(/"/g,'""')}"`;let r=[];return r.push("Categoria,Item,Quantidade,Dias,Valor Unitrio,Subtotal"),(n.coordenacao||[]).forEach(i=>{const s=i.dias/30*i.prolabore*i.quant;r.push(["Coordenao",t(i.item),i.quant,i.dias,i.prolabore,s.toFixed(2)].join(","))}),(n.profissionais||[]).forEach(i=>{const s=i.dias/30*i.prolabore*i.pessoas;r.push(["Profissionais",t(i.categoria),i.pessoas,i.dias,i.prolabore,s.toFixed(2)].join(","))}),(n.valoresUnicos||[]).forEach(i=>{const s=i.valor*i.pessoas*i.dias;r.push(["Valores nicos",t(i.item),i.pessoas,i.dias,i.valor,s.toFixed(2)].join(","))}),(n.logistica||[]).forEach(i=>{const s=i.valor*i.qtd*i.dias;r.push(["Logstica",t(i.item),i.qtd,i.dias,i.valor,s.toFixed(2)].join(","))}),r.push(""),r.push(`Subtotal Geral,${e.subtotalGeral.toFixed(2)}`),r.push(`Total Indiretos,${e.totalIndiretos.toFixed(2)}`),r.push(`Impostos,${e.impostos.toFixed(2)}`),r.push(`Desconto,${e.desconto.toFixed(2)}`),r.push(`Total Final,${e.totalGeral.toFixed(2)}`),"\uFEFF"+r.join(`
`)}function D$(n,e,t){const r=new Blob([n],{type:t}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,s.click(),URL.revokeObjectURL(i)}async function O$(n,e){const t=o=>`R$ ${Number(o||0).toFixed(2).replace(".",",")}`,r=new mt({text:"Oramento  Relevo Consultoria Ambiental",heading:p1.HEADING_1,spacing:{after:300}}),i=(o,a)=>{const l=[new w1({children:[new tr({children:[new mt("Item")]}),new tr({children:[new mt("Qtd")]}),new tr({children:[new mt("Dias")]}),new tr({children:[new mt("Valor")]}),new tr({children:[new mt("Subtotal")]})]}),...a.map(u=>new w1({children:[new tr({children:[new mt(String(u.item||u.categoria||""))]}),new tr({children:[new mt(String(u.quant||u.pessoas||u.qtd||""))]}),new tr({children:[new mt(String(u.dias||""))]}),new tr({children:[new mt(t(u.valor||u.prolabore))]}),new tr({children:[new mt(t(u.subtotal))]})]}))];return[new mt({text:o,heading:p1.HEADING_2,spacing:{after:200}}),new z2({width:{size:100,type:Sf.PERCENTAGE},rows:l}),new mt(" ")]},s=new f$({sections:[{properties:{},children:[r,...i("Coordenao",(n.coordenacao||[]).map(o=>({...o,subtotal:o.dias/30*o.prolabore*o.quant}))),...i("Profissionais",(n.profissionais||[]).map(o=>({...o,subtotal:o.dias/30*o.prolabore*o.pessoas}))),...i("Valores nicos",(n.valoresUnicos||[]).map(o=>({...o,subtotal:o.valor*o.pessoas*o.dias}))),...i("Logstica",(n.logistica||[]).map(o=>({...o,subtotal:o.valor*o.qtd*o.dias}))),new mt("Totais Gerais"),new mt(`Subtotal Geral: ${t(e.subtotalGeral)}`),new mt(`Total Indiretos: ${t(e.totalIndiretos)}`),new mt(`Impostos: ${t(e.impostos)}`),new mt(`Desconto: ${t(e.desconto)}`),new mt(`TOTAL FINAL: ${t(e.totalGeral)}`)]}]});return await sN.toBlob(s)}const L$=()=>{const{orcamentoAtual:n,totais:e,carregando:t}=xi(),[r,i]=St.useState(!1),s=async()=>{if(!r){i(!0);try{const a=await O$(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.docx`;saveAs(a,l)}catch(a){console.error("Erro ao gerar DOCX:",a),alert("Erro ao gerar DOCX. Tente novamente.")}finally{i(!1)}}},o=()=>{if(!r){i(!0);try{const a=N$(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`;D$("\uFEFF"+a,l,"text/csv;charset=utf-8;")}catch(a){console.error("Erro ao gerar CSV:",a),alert("Erro ao gerar CSV. Tente novamente.")}finally{i(!1)}}};return M.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[M.jsx("button",{onClick:s,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] rounded-md hover:bg-[#3CC373] transition shadow-md font-sans min-w-[140px]",children:r?"Gerando...":" DOCX"}),M.jsx("button",{onClick:o,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] rounded-md hover:bg-[#3CC373] transition shadow-md font-sans min-w-[140px]",children:r?"Gerando...":" CSV"})]})},ed=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),F$=({erros:n,onClose:e})=>!n||n.length===0?null:M.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[M.jsxs("div",{className:"flex justify-between items-start mb-2",children:[M.jsx("h3",{className:"text-yellow-800 font-semibold text-lg font-heading",children:" Erros de Validao"}),M.jsx("button",{onClick:e,className:"text-yellow-600 hover:text-yellow-800 text-lg font-bold",children:""})]}),M.jsx("p",{className:"text-yellow-700 mb-3 font-sans",children:"Corrija os seguintes erros antes de salvar:"}),M.jsx("ul",{className:"text-yellow-600 list-disc list-inside space-y-1 font-sans",children:n.map((t,r)=>M.jsx("li",{className:"text-sm",children:t},r))})]}),V$=()=>{const{orcamentoAtual:n,salvarOrcamento:e,totais:t,carregando:r,erro:i,errosValidacao:s,limparErro:o,dispatch:a,validarOrcamentoAtual:l,limparErrosValidacao:u}=xi(),{user:h,logout:d}=Qw(),[p,y]=St.useState(!1),[E,_]=St.useState(!0);St.useEffect(()=>{l()},[n]);const b=(F,$)=>{s.length>0&&u(),a({type:"UPDATE_METADATA",payload:{[F]:$}})},m=async()=>{if(confirm("Deseja sair do sistema? Isso ir desconectar voc do Portal Relevo."))try{await d()}catch(F){console.error("Erro ao fazer logout:",F),alert("Erro ao sair do sistema")}},v=async()=>{try{if(o(),!l().valido){_(!0),window.scrollTo({top:0,behavior:"smooth"});return}const $=await e(n);$&&(alert(` Oramento salvo com sucesso!
ID: ${$}`),u())}catch(F){console.error("Erro ao salvar oramento:",F)}},I=()=>{confirm("Deseja criar um novo oramento? Todas as alteraes no salvas sero perdidas.")&&window.location.reload()},D=s.length===0;return M.jsxs("div",{className:"bg-relevo-background shadow-lg border-b border-relevo-border p-6 mb-6",children:[E&&s.length>0&&M.jsx(F$,{erros:s,onClose:()=>_(!1)}),s.length>0&&!E&&M.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4 flex justify-between items-center",children:[M.jsxs("span",{className:"text-yellow-700 text-sm font-sans",children:[" Existem ",s.length," erro(s) de validao"]}),M.jsx("button",{onClick:()=>_(!0),className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600 transition font-sans",children:"Ver Erros"})]}),M.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-8",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("div",{className:"flex-shrink-0",children:[M.jsx("img",{src:"https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_vertical.png",alt:"Relevo Consultoria Ambiental",className:"h-16 w-auto",onError:F=>{F.target.style.display="none",F.target.nextSibling.style.display="flex"}}),M.jsx("div",{className:"h-16 w-16 bg-relevo-green rounded-lg flex items-center justify-center hidden",children:M.jsx("span",{className:"text-white font-bold text-lg",children:"R"})})]}),M.jsxs("div",{children:[M.jsx("h1",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Relevo Consultoria Ambiental"}),M.jsx("p",{className:"font-medium text-relevo-blue font-heading",children:"Sistema de Oramentos"}),h&&M.jsxs("p",{className:"text-sm text-relevo-text/70 font-sans mt-1",children:["Logado como: ",M.jsx("strong",{children:h.email})]})]})]}),M.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[M.jsx(L$,{}),M.jsx("button",{onClick:v,disabled:r||!D,className:`px-6 py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base ${D?"bg-[#2EAD60] hover:bg-[#3CC373] text-white focus:ring-[#2EAD60]":"opacity-50 cursor-not-allowed bg-gray-400 text-white"}`,title:D?"Salvar oramento no Firebase":"Corrija os erros de validao para salvar",children:r?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):M.jsx(M.Fragment,{children:D?" Salvar":" Corrigir"})}),M.jsx("button",{onClick:()=>y(!0),className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Gerenciar"}),M.jsx("button",{onClick:I,className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Novo"}),M.jsx("button",{onClick:m,className:"px-4 py-3 text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 font-medium transition-colors font-sans text-sm",title:`Sair do sistema (${h==null?void 0:h.email})`,children:" Sair"})]})]}),M.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-relevo-border p-4 mb-6",children:M.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[M.jsxs("div",{children:[M.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Subtotal"}),M.jsxs("div",{className:"text-lg font-bold text-relevo-blue font-sans",children:["R$ ",ed((t==null?void 0:t.subtotalGeral)||0)]})]}),M.jsxs("div",{children:[M.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Custos Indiretos"}),M.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["R$ ",ed(((t==null?void 0:t.totalAntesDesconto)||0)-((t==null?void 0:t.subtotalGeral)||0))]})]}),M.jsxs("div",{children:[M.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Total"}),M.jsxs("div",{className:"text-lg font-bold text-relevo-green font-sans",children:["R$ ",ed((t==null?void 0:t.totalGeral)||0)]})]}),n.metadata.desconto>0&&M.jsxs("div",{children:[M.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Desconto Aplicado"}),M.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["-R$ ",ed((t==null?void 0:t.desconto)||0)]}),M.jsxs("div",{className:"text-xs text-relevo-orange font-sans",children:[n.metadata.desconto,"% de desconto"]})]}),M.jsxs("div",{children:[M.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Margem"}),M.jsxs("div",{className:"text-lg font-bold font-sans",style:{color:(t==null?void 0:t.lucro)>0?"#2E7D32":"#FF6B35"},children:[((t==null?void 0:t.lucro)/((t==null?void 0:t.totalGeral)||1)*100).toFixed(1).replace(".",","),"%"]})]})]})}),M.jsx("div",{className:"bg-[#2EAD60] rounded-lg p-4 mb-6",children:M.jsxs("div",{className:"w-full",children:[M.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center font-heading",children:"Informaes do Oramento"}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3",children:[M.jsxs("div",{className:"lg:col-span-5",children:[M.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Nome do Oramento *"}),M.jsx("input",{type:"text",value:n.metadata.nome,onChange:F=>b("nome",F.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Ex: Projeto EIA-RIMA Serra Azul"}),M.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Mnimo 3 caracteres"})]}),M.jsxs("div",{className:"lg:col-span-4",children:[M.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Cliente *"}),M.jsx("input",{type:"text",value:n.metadata.cliente,onChange:F=>b("cliente",F.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Nome da empresa cliente"}),M.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),M.jsxs("div",{className:"lg:col-span-2",children:[M.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Data *"}),M.jsx("input",{type:"date",value:n.metadata.data,onChange:F=>b("data",F.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900"}),M.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),M.jsxs("div",{className:"lg:col-span-1",children:[M.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Desconto (%)"}),M.jsx("input",{type:"number",min:"0",max:"100",value:n.metadata.desconto,onChange:F=>b("desconto",F.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"0"}),M.jsx("p",{className:"text-xs text-white/80 mt-1",children:"0 a 100"})]})]})]})}),p&&M.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:M.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[M.jsxs("div",{className:"flex justify-between items-center mb-6",children:[M.jsx("h2",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Gerenciar Oramentos"}),M.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-800 text-2xl font-bold",children:""})]}),M.jsx(L3,{setMostrarGerenciador:y})]})}),i&&M.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded fixed bottom-4 right-4 z-50 shadow-lg",children:[M.jsx("p",{children:i}),M.jsx("button",{onClick:o,className:"absolute top-1 right-2 text-red-700 font-bold",children:"x"})]})]})},M$=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=xi(),r=(s,o)=>{var u,h;const a=parseFloat(o)/100||0,l=(h=(u=Ne.parametros)[s])==null?void 0:h.call(u,a);l&&console.warn(`Erro de validao em ${s}:`,l),e({type:"UPDATE_PARAMETROS",payload:{[s]:a}})},i=((t==null?void 0:t.encargosPessoal)||0)+((t==null?void 0:t.lucro)||0)+((t==null?void 0:t.fundoGiro)||0)+((t==null?void 0:t.impostos)||0)+((t==null?void 0:t.despesasFiscais)||0)+((t==null?void 0:t.comissaoCaptacao)||0);return M.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[M.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Custos Gerais e Parmetros"}),M.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"imposto",label:"Impostos (%)"},{key:"lucro",label:"Lucro (%)"},{key:"fundoGiro",label:"Fundo de Giro (%)"},{key:"encargosPessoal",label:"Encargos Pessoal (%)"},{key:"despesasFiscais",label:"Despesas Fiscais (%)"},{key:"comissaoCaptacao",label:"Comisso de Captao (%)"}].map(s=>{var l,u;const o=n.parametros[s.key]*100,a=(u=(l=Ne.parametros)[s.key])==null?void 0:u.call(l,n.parametros[s.key]);return M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium text-relevo-text/80 font-sans mb-1",children:s.label}),M.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:o,onChange:h=>r(s.key,h.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${a?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-relevo-green-light"}`}),a&&M.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[M.jsx("span",{className:"mr-1",children:""}),a.replace("0-1","0-100%")]})]},s.key)})}),M.jsxs("div",{className:"mt-6 p-4 bg-[#E8F5E9] rounded-lg border border-[#C8E6C9]",children:[M.jsx("h3",{className:"font-semibold text-[#2E3E31] font-heading mb-4",children:"Resumo dos Custos Indiretos"}),M.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Despesas Fiscais:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.despesasFiscais)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.despesasFiscais)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Lucro:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.lucro)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.lucro)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Fundo de Giro:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.fundoGiro)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.fundoGiro)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Impostos:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.impostos)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.imposto)})]})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm border-t border-[#C8E6C9] pt-4",children:[M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Encargos Pessoal:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.encargosPessoal)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.encargosPessoal)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Comisso Captao:"}),M.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",Wt((t==null?void 0:t.comissaoCaptacao)||0)]}),M.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Yo(n.parametros.comissaoCaptacao)})]}),M.jsxs("div",{className:"text-center",children:[M.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Total Custos Indiretos:"}),M.jsxs("div",{className:"font-semibold text-[#2EAD60] font-sans",children:["R$ ",Wt(i)]})]})]})]})]})},U$=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=xi(),r=(s,o,a)=>{const l=o==="profissional"||o==="cargo",u=l?a:parseFloat(a)||0;let h=null;!l&&Ne.coordenacao[o]&&(h=Ne.coordenacao[o](u)),h&&console.warn(`Erro de validao em ${o}:`,h),e({type:"UPDATE_COORDENACAO",payload:{id:s,updates:{[o]:u}}})},i=(s,o,a=!1)=>{var h,d;if(a)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const l=(d=(h=Ne.coordenacao)[s])==null?void 0:d.call(h,o),u="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return l?`${u} border-red-300 focus:ring-red-500 bg-red-50`:`${u} border-gray-300 focus:ring-blue-500`};return M.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[M.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Coordenao"}),M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"w-full",children:[M.jsx("thead",{children:M.jsxs("tr",{className:"bg-[#E8F5E9]",children:[M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Profissional"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quant."}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),M.jsx("tbody",{children:n.coordenacao.map(s=>{const o=s.dias*8*s.quant,a=s.dias/30,l=a*s.prolabore*s.quant,u=Ne.coordenacao.prolabore?Ne.coordenacao.prolabore(s.prolabore):null,h=Ne.coordenacao.quant(s.quant),d=Ne.coordenacao.dias(s.dias),p=u||h||d;return M.jsxs("tr",{className:`border-b border-gray-200 hover:bg-relevo-light-gray ${p?"bg-red-50 hover:bg-red-100":""}`,children:[M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"flex items-center",children:[s.cargo,p&&M.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste coordenador",children:""})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsx("input",{type:"text",value:s.profissional,onChange:y=>r(s.id,"profissional",y.target.value),className:i("profissional",s.profissional,!0),placeholder:"Ex: Snior, Pleno",title:"Nvel do profissional (Snior, Pleno, etc.)"})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"100",value:s.prolabore,onChange:y=>r(s.id,"prolabore",y.target.value),className:i("prolabore",s.prolabore),title:u||"Valor mensal do coordenador"}),u&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:u})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:s.quant,onChange:y=>r(s.id,"quant",y.target.value),className:i("quant",s.quant),title:h||"Quantidade de coordenadores"}),h&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:h})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:s.dias,onChange:y=>r(s.id,"dias",y.target.value),className:i("dias",s.dias),title:d||"Dias de trabalho"}),d&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),M.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:o.toFixed(1).replace(".",",")}),M.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:a.toFixed(2).replace(".",",")}),M.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",Wt(l)]})]},s.id)})}),M.jsx("tfoot",{children:M.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[M.jsx("td",{colSpan:"7",className:"px-4 py-2 text-right text-white",children:"Total Coordenao:"}),M.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",Wt((t==null?void 0:t.subtotalCoordenacao)||0)]})]})})]})})]})},B$=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=xi(),r=(o,a,l)=>{const u=parseFloat(l)||0;let h=null;Ne.profissionais[a]&&(h=Ne.profissionais[a](u)),h&&console.warn(`Erro de validao em ${a}:`,h),e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{[a]:u}}})},i=()=>{const o=Math.max(...n.profissionais.map(a=>a.id))+1;e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{cargo:"Novo Profissional",prolabore:0,pessoas:0,dias:0}}})},s=(o,a,l)=>{var d,p;const u=(p=(d=Ne.profissionais)[a])==null?void 0:p.call(d,l),h="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return u?`${h} border-red-300 focus:ring-red-500 bg-red-50`:`${h} border-gray-300 focus:ring-blue-500`};return M.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Profissionais"}),M.jsx("button",{onClick:i,className:"bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Profissional"})]}),M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"w-full",children:[M.jsx("thead",{children:M.jsxs("tr",{className:"bg-[#E8F5E9]",children:[M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),M.jsx("tbody",{children:n.profissionais.map(o=>{const a=o.dias*8*o.pessoas,l=o.dias/30,u=l*o.prolabore*o.pessoas,h=Ne.profissionais.prolabore(o.prolabore),d=Ne.profissionais.pessoas(o.pessoas),p=Ne.profissionais.dias(o.dias),y=h||d||p;return M.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${y?"bg-red-50 hover:bg-red-100":""}`,children:[M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"flex items-center",children:[M.jsx("input",{type:"text",value:o.cargo,onChange:E=>r(o.id,"cargo",E.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nome do cargo"}),y&&M.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste profissional",children:""})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"100",value:o.prolabore,onChange:E=>r(o.id,"prolabore",E.target.value),className:s(o.id,"prolabore",o.prolabore),title:h||"Valor do prolabore mensal"}),h&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:h})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:E=>r(o.id,"pessoas",E.target.value),className:s(o.id,"pessoas",o.pessoas),title:d||"Nmero de profissionais"}),d&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:E=>r(o.id,"dias",E.target.value),className:s(o.id,"dias",o.dias),title:p||"Dias de trabalho"}),p&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:p})]})}),M.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:a.toFixed(1).replace(".",",")}),M.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:l.toFixed(2).replace(".",",")}),M.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",Wt(u)]})]},o.id)})}),M.jsx("tfoot",{children:M.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[M.jsx("td",{colSpan:"6",className:"px-4 py-2 text-right text-white",children:"Total Profissionais:"}),M.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",Wt((t==null?void 0:t.subtotalProfissionais)||0)]})]})})]})})]})},j$=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=xi(),r=(o,a,l)=>{const u=a==="item",h=u?l:parseFloat(l)||0;let d=null;!u&&Ne.valoresUnicos[a]&&(d=Ne.valoresUnicos[a](h)),d&&console.warn(`Erro de validao em ${a}:`,d),e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{[a]:h}}})},i=()=>{const o=Math.max(...n.valoresUnicos.map(a=>a.id))+1;e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{item:"Novo Item",valor:0,pessoas:1,dias:1}}})},s=(o,a,l=!1)=>{var d,p;if(l)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const u=(p=(d=Ne.valoresUnicos)[o])==null?void 0:p.call(d,a),h="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return u?`${h} border-red-300 focus:ring-red-500 bg-red-50`:`${h} border-gray-300 focus:ring-blue-500`};return M.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Valores nicos"}),M.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Item"})]}),M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"w-full",children:[M.jsx("thead",{children:M.jsxs("tr",{className:"bg-[#E8F5E9]",children:[M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor Unitrio (R$)"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),M.jsx("tbody",{children:n.valoresUnicos.map(o=>{const a=o.valor*o.pessoas*o.dias,l=Ne.valoresUnicos.valor(o.valor),u=Ne.valoresUnicos.pessoas(o.pessoas),h=Ne.valoresUnicos.dias(o.dias),d=l||u||h;return M.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${d?"bg-red-50 hover:bg-red-100":""}`,children:[M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"flex items-center",children:[M.jsx("input",{type:"text",value:o.item,onChange:p=>r(o.id,"item",p.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item",title:"Descrio do item ou servio"}),d&&M.jsx("span",{className:"ml-2 text-red-500 text-xs flex-shrink-0",title:"Verifique os valores deste item",children:""})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:o.valor,onChange:p=>r(o.id,"valor",p.target.value),className:s("valor",o.valor),title:l||"Valor unitrio do item"}),l&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:l})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:p=>r(o.id,"pessoas",p.target.value),className:s("pessoas",o.pessoas),title:u||"Nmero de pessoas envolvidas"}),u&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:u})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:p=>r(o.id,"dias",p.target.value),className:s("dias",o.dias),title:h||"Dias de utilizao/durao"}),h&&M.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:h})]})}),M.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",Wt(a)]})]},o.id)})}),M.jsx("tfoot",{children:M.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[M.jsx("td",{colSpan:"4",className:"px-4 py-2 text-right text-white",children:"Total Valores nicos:"}),M.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",Wt((t==null?void 0:t.subtotalValoresUnicos)||0)]})]})})]})})]})},z$=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=xi(),r=(o,a,l)=>{e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{[a]:a==="item"||a==="unidade"?l:parseFloat(l)||0}}})},i=()=>{const o=Math.max(...n.logistica.map(a=>a.id))+1;e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{item:"Novo Item",valor:0,unidade:"unidade",qtd:1,dias:1}}})},s=(o,a)=>{var h,d;const l=(d=(h=Ne.logistica)[o])==null?void 0:d.call(h,a),u="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 font-sans";return l?`${u} border-red-300 focus:ring-red-500 bg-red-50`:`${u} border-relevo-border focus:ring-relevo-green-light`};return M.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Logstica"}),M.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm font-sans",children:"+ Adicionar Item"})]}),M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"w-full",children:[M.jsx("thead",{children:M.jsxs("tr",{className:"bg-[#E8F5E9]",children:[M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor (R$)"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Unidade"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quantidade"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),M.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),M.jsx("tbody",{children:n.logistica.map(o=>{const a=o.valor*o.qtd*o.dias;return M.jsxs("tr",{className:"border-b border-relevo-border hover:bg-relevo-light-gray",children:[M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsx("input",{type:"text",value:o.item,onChange:l=>r(o.id,"item",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item"})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsx("input",{type:"number",min:"0",onInput:l=>{l.target.value<0&&(l.target.value=0)},value:o.valor,onChange:l=>r(o.id,"valor",l.target.value),className:s("valor",o.valor)})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsxs("select",{value:o.unidade,onChange:l=>r(o.id,"unidade",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",children:[M.jsx("option",{value:"dia/pessoa",children:"dia/pessoa"}),M.jsx("option",{value:"dia/veculo",children:"dia/veculo"}),M.jsx("option",{value:"pessoa",children:"pessoa"}),M.jsx("option",{value:"veculo",children:"veculo"}),M.jsx("option",{value:"dia",children:"dia"}),M.jsx("option",{value:"ms/veculo",children:"ms/veculo"}),M.jsx("option",{value:"lote",children:"lote"}),M.jsx("option",{value:"unidade",children:"unidade"}),M.jsx("option",{value:"km",children:"km"})]})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsx("input",{type:"number",min:"0",onInput:l=>{l.target.value<0&&(l.target.value=0)},value:o.qtd,onChange:l=>r(o.id,"qtd",l.target.value),className:s("qtd",o.qtd)})}),M.jsx("td",{className:"px-4 py-2 text-sm",children:M.jsx("input",{type:"number",min:"0",onInput:l=>{l.target.value<0&&(l.target.value=0)},value:o.dias,onChange:l=>r(o.id,"dias",l.target.value),className:s("dias",o.dias)})}),M.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",Wt(a)]})]},o.id)})}),M.jsx("tfoot",{children:M.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[M.jsx("td",{colSpan:"5",className:"px-4 py-2 text-right text-white",children:"Total Logstica:"}),M.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",Wt(t.subtotalLogistica)]})]})})]})})]})},$$=()=>{const{totais:n}=xi();return M.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[M.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Custos Diretos & Valor Total da Proposta"}),M.jsxs("div",{className:"mb-6",children:[M.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-2",children:"Composio dos Custos Diretos"}),M.jsxs("div",{className:"space-y-2 text-sm",children:[M.jsx(Zo,{label:"Coordenao",valor:n.subtotalCoordenacao}),M.jsx(Zo,{label:"Profissionais",valor:n.subtotalProfissionais}),M.jsx(Zo,{label:"Valores nicos",valor:n.subtotalValoresUnicos}),M.jsx(Zo,{label:"Logstica",valor:n.subtotalLogistica})]}),M.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 flex justify-between font-semibold",children:[M.jsx("span",{className:"text-relevo-text font-heading",children:"Subtotal Direto"}),M.jsxs("span",{className:"text-relevo-blue font-sans",children:["R$ ",Wt(n.subtotalGeral)]})]})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-2",children:"Valor Final da Proposta"}),M.jsx(Zo,{label:"Total Antes do Desconto",valor:n.totalAntesDesconto}),M.jsx(Zo,{label:"Desconto Aplicado",valor:n.desconto}),M.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 flex justify-between text-lg font-bold",children:[M.jsx("span",{className:"text-relevo-text font-heading",children:"Total Final"}),M.jsxs("span",{className:"text-relevo-green font-sans",children:["R$ ",Wt(n.totalGeral)]})]})]})]})},Zo=({label:n,valor:e})=>M.jsxs("div",{className:"flex justify-between border-b pb-1",children:[M.jsxs("span",{className:"text-relevo-text/70 font-sans",children:[n,":"]}),M.jsxs("span",{className:"font-medium",children:["R$ ",Wt(e)]})]}),W$=()=>{const{user:n,loading:e}=Qw();return e?M.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),M.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),M.jsx("p",{className:"text-sm text-relevo-text/70 mt-2 font-sans",children:"Conectando com autenticao compartilhada"})]})}):n?null:M.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:M.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md text-center",children:[M.jsx("div",{className:"text-6xl mb-4",children:""}),M.jsx("h2",{className:"text-xl font-bold text-relevo-green mb-4 font-heading",children:"Sistema de Oramentos"}),M.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4 mb-6",children:[M.jsx("p",{className:"text-sm text-blue-800 font-sans",children:M.jsx("strong",{children:"Para acessar o sistema de oramentos:"})}),M.jsxs("p",{className:"text-sm text-blue-800 mt-2 font-sans",children:["1. Faa login no ",M.jsx("a",{href:"https://portal.relevo.eco.br",target:"_blank",className:"text-[#2EAD60] underline font-bold",children:"Portal Relevo"}),M.jsx("br",{}),"2. Volte aqui e recarregue a pgina"]})]}),M.jsxs("div",{className:"space-y-3",children:[M.jsx("button",{onClick:()=>window.open("https://portal.relevo.eco.br","_blank"),className:"w-full bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" Fazer Login no Portal"}),M.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" J fiz login, recarregar pgina"})]})]})})},q$=()=>M.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),M.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),M.jsx("p",{className:"text-relevo-text/70 text-sm mt-2 font-sans",children:"Conectando com o Portal Relevo"})]})}),G$=()=>{const{user:n,loading:e}=Qw();return e?M.jsx(q$,{}):n?M.jsx(Y5,{children:M.jsxs("div",{className:"min-h-screen bg-relevo-background",children:[M.jsx(V$,{}),M.jsxs("main",{className:"container mx-auto px-4 py-6",children:[M.jsx(M$,{}),M.jsx(U$,{}),M.jsx(B$,{}),M.jsx(j$,{}),M.jsx(z$,{}),M.jsx($$,{}),"   "]})]})}):M.jsx(W$,{})};function H$(){return M.jsx(O3,{children:M.jsx(G$,{})})}Dg.createRoot(document.getElementById("root")).render(M.jsx(qN.StrictMode,{children:M.jsx(H$,{})}));
