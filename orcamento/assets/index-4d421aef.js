(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var pU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hA={exports:{}},g0={},dA={exports:{}},Ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp=Symbol.for("react.element"),G3=Symbol.for("react.portal"),W3=Symbol.for("react.fragment"),H3=Symbol.for("react.strict_mode"),K3=Symbol.for("react.profiler"),Q3=Symbol.for("react.provider"),J3=Symbol.for("react.context"),Y3=Symbol.for("react.forward_ref"),X3=Symbol.for("react.suspense"),Z3=Symbol.for("react.memo"),eC=Symbol.for("react.lazy"),R5=Symbol.iterator;function tC(n){return n===null||typeof n!="object"?null:(n=R5&&n[R5]||n["@@iterator"],typeof n=="function"?n:null)}var fA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pA=Object.assign,mA={};function Hh(n,e,t){this.props=n,this.context=e,this.refs=mA,this.updater=t||fA}Hh.prototype.isReactComponent={};Hh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gA(){}gA.prototype=Hh.prototype;function T2(n,e,t){this.props=n,this.context=e,this.refs=mA,this.updater=t||fA}var S2=T2.prototype=new gA;S2.constructor=T2;pA(S2,Hh.prototype);S2.isPureReactComponent=!0;var L5=Array.isArray,vA=Object.prototype.hasOwnProperty,N2={current:null},yA={key:!0,ref:!0,__self:!0,__source:!0};function _A(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vA.call(e,r)&&!yA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dp,type:n,key:s,ref:o,props:i,_owner:N2.current}}function nC(n,e){return{$$typeof:dp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function P2(n){return typeof n=="object"&&n!==null&&n.$$typeof===dp}function rC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var D5=/\/+/g;function O1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?rC(""+n.key):e.toString(36)}function Bm(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case dp:case G3:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+O1(o,0):r,L5(i)?(t="",n!=null&&(t=n.replace(D5,"$&/")+"/"),Bm(i,e,t,"",function(c){return c})):i!=null&&(P2(i)&&(i=nC(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(D5,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",L5(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+O1(s,a);o+=Bm(s,e,t,l,i)}else if(l=tC(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+O1(s,a++),o+=Bm(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cm(n,e,t){if(n==null)return n;var r=[],i=0;return Bm(n,r,"","",function(s){return e.call(t,s,i++)}),r}function iC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ri={current:null},qm={transition:null},sC={ReactCurrentDispatcher:ri,ReactCurrentBatchConfig:qm,ReactCurrentOwner:N2};Ot.Children={map:cm,forEach:function(n,e,t){cm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return cm(n,function(){e++}),e},toArray:function(n){return cm(n,function(e){return e})||[]},only:function(n){if(!P2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ot.Component=Hh;Ot.Fragment=W3;Ot.Profiler=K3;Ot.PureComponent=T2;Ot.StrictMode=H3;Ot.Suspense=X3;Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sC;Ot.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=pA({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=N2.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vA.call(e,l)&&!yA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dp,type:n.type,key:i,ref:s,props:r,_owner:o}};Ot.createContext=function(n){return n={$$typeof:J3,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Q3,_context:n},n.Consumer=n};Ot.createElement=_A;Ot.createFactory=function(n){var e=_A.bind(null,n);return e.type=n,e};Ot.createRef=function(){return{current:null}};Ot.forwardRef=function(n){return{$$typeof:Y3,render:n}};Ot.isValidElement=P2;Ot.lazy=function(n){return{$$typeof:eC,_payload:{_status:-1,_result:n},_init:iC}};Ot.memo=function(n,e){return{$$typeof:Z3,type:n,compare:e===void 0?null:e}};Ot.startTransition=function(n){var e=qm.transition;qm.transition={};try{n()}finally{qm.transition=e}};Ot.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ot.useCallback=function(n,e){return ri.current.useCallback(n,e)};Ot.useContext=function(n){return ri.current.useContext(n)};Ot.useDebugValue=function(){};Ot.useDeferredValue=function(n){return ri.current.useDeferredValue(n)};Ot.useEffect=function(n,e){return ri.current.useEffect(n,e)};Ot.useId=function(){return ri.current.useId()};Ot.useImperativeHandle=function(n,e,t){return ri.current.useImperativeHandle(n,e,t)};Ot.useInsertionEffect=function(n,e){return ri.current.useInsertionEffect(n,e)};Ot.useLayoutEffect=function(n,e){return ri.current.useLayoutEffect(n,e)};Ot.useMemo=function(n,e){return ri.current.useMemo(n,e)};Ot.useReducer=function(n,e,t){return ri.current.useReducer(n,e,t)};Ot.useRef=function(n){return ri.current.useRef(n)};Ot.useState=function(n){return ri.current.useState(n)};Ot.useSyncExternalStore=function(n,e,t){return ri.current.useSyncExternalStore(n,e,t)};Ot.useTransition=function(){return ri.current.useTransition()};Ot.version="18.2.0";dA.exports=Ot;var On=dA.exports;const oC=$3(On);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC=On,lC=Symbol.for("react.element"),uC=Symbol.for("react.fragment"),cC=Object.prototype.hasOwnProperty,hC=aC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dC={key:!0,ref:!0,__self:!0,__source:!0};function wA(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cC.call(e,r)&&!dC.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lC,type:n,key:s,ref:o,props:i,_owner:hC.current}}g0.Fragment=uC;g0.jsx=wA;g0.jsxs=wA;hA.exports=g0;var C=hA.exports,Ov={},bA={exports:{}},Qi={},IA={exports:{}},EA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Z,le){var ce=Z.length;Z.push(le);e:for(;0<ce;){var Ne=ce-1>>>1,M=Z[Ne];if(0<i(M,le))Z[Ne]=le,Z[ce]=M,ce=Ne;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var le=Z[0],ce=Z.pop();if(ce!==le){Z[0]=ce;e:for(var Ne=0,M=Z.length,W=M>>>1;Ne<W;){var J=2*(Ne+1)-1,ee=Z[J],se=J+1,he=Z[se];if(0>i(ee,ce))se<M&&0>i(he,ee)?(Z[Ne]=he,Z[se]=ce,Ne=se):(Z[Ne]=ee,Z[J]=ce,Ne=J);else if(se<M&&0>i(he,ce))Z[Ne]=he,Z[se]=ce,Ne=se;else break e}}return le}function i(Z,le){var ce=Z.sortIndex-le.sortIndex;return ce!==0?ce:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,v=3,g=!1,N=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Z){for(var le=t(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=Z)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=t(c)}}function $(Z){if(T=!1,L(Z),!N)if(t(l)!==null)N=!0,ve(G);else{var le=t(c);le!==null&&be($,le.startTime-Z)}}function G(Z,le){N=!1,T&&(T=!1,w(I),I=-1),g=!0;var ce=v;try{for(L(le),p=t(l);p!==null&&(!(p.expirationTime>le)||Z&&!x());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,v=p.priorityLevel;var M=Ne(p.expirationTime<=le);le=n.unstable_now(),typeof M=="function"?p.callback=M:p===t(l)&&r(l),L(le)}else r(l);p=t(l)}if(p!==null)var W=!0;else{var J=t(c);J!==null&&be($,J.startTime-le),W=!1}return W}finally{p=null,v=ce,g=!1}}var K=!1,P=null,I=-1,F=5,U=-1;function x(){return!(n.unstable_now()-U<F)}function S(){if(P!==null){var Z=n.unstable_now();U=Z;var le=!0;try{le=P(!0,Z)}finally{le?k():(K=!1,P=null)}}else K=!1}var k;if(typeof E=="function")k=function(){E(S)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ge=X.port2;X.port1.onmessage=S,k=function(){ge.postMessage(null)}}else k=function(){R(S,0)};function ve(Z){P=Z,K||(K=!0,k())}function be(Z,le){I=R(function(){Z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){N||g||(N=!0,ve(G))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var ce=v;v=le;try{return Z()}finally{v=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ce=v;v=Z;try{return le()}finally{v=ce}},n.unstable_scheduleCallback=function(Z,le,ce){var Ne=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ne+ce:Ne):ce=Ne,Z){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ce+M,Z={id:d++,callback:le,priorityLevel:Z,startTime:ce,expirationTime:M,sortIndex:-1},ce>Ne?(Z.sortIndex=ce,e(c,Z),t(l)===null&&Z===t(c)&&(T?(w(I),I=-1):T=!0,be($,ce-Ne))):(Z.sortIndex=M,e(l,Z),N||g||(N=!0,ve(G))),Z},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(Z){var le=v;return function(){var ce=v;v=le;try{return Z.apply(this,arguments)}finally{v=ce}}}})(EA);IA.exports=EA;var fC=IA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA=On,Hi=fC;function Fe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xA=new Set,xf={};function Ju(n,e){Eh(n,e),Eh(n+"Capture",e)}function Eh(n,e){for(xf[n]=e,n=0;n<e.length;n++)xA.add(e[n])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fv=Object.prototype.hasOwnProperty,pC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O5={},F5={};function mC(n){return Fv.call(F5,n)?!0:Fv.call(O5,n)?!1:pC.test(n)?F5[n]=!0:(O5[n]=!0,!1)}function gC(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function vC(n,e,t,r){if(e===null||typeof e>"u"||gC(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ii(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Sr[n]=new ii(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Sr[e]=new ii(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Sr[n]=new ii(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Sr[n]=new ii(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Sr[n]=new ii(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Sr[n]=new ii(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Sr[n]=new ii(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Sr[n]=new ii(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Sr[n]=new ii(n,5,!1,n.toLowerCase(),null,!1,!1)});var C2=/[\-:]([a-z])/g;function k2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(C2,k2);Sr[e]=new ii(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(C2,k2);Sr[e]=new ii(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(C2,k2);Sr[e]=new ii(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Sr[n]=new ii(n,1,!1,n.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Sr[n]=new ii(n,1,!1,n.toLowerCase(),null,!0,!0)});function R2(n,e,t,r){var i=Sr.hasOwnProperty(e)?Sr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vC(e,t,i,r)&&(t=null),r||i===null?mC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ca=AA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hm=Symbol.for("react.element"),Hc=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),Mv=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),SA=Symbol.for("react.context"),D2=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),jv=Symbol.for("react.suspense_list"),O2=Symbol.for("react.memo"),Qa=Symbol.for("react.lazy"),NA=Symbol.for("react.offscreen"),M5=Symbol.iterator;function Ad(n){return n===null||typeof n!="object"?null:(n=M5&&n[M5]||n["@@iterator"],typeof n=="function"?n:null)}var Nn=Object.assign,F1;function $d(n){if(F1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);F1=e&&e[1]||""}return`
`+F1+n}var M1=!1;function V1(n,e){if(!n||M1)return"";M1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{M1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$d(n):""}function yC(n){switch(n.tag){case 5:return $d(n.type);case 16:return $d("Lazy");case 13:return $d("Suspense");case 19:return $d("SuspenseList");case 0:case 2:case 15:return n=V1(n.type,!1),n;case 11:return n=V1(n.type.render,!1),n;case 1:return n=V1(n.type,!0),n;default:return""}}function Uv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kc:return"Fragment";case Hc:return"Portal";case Mv:return"Profiler";case L2:return"StrictMode";case Vv:return"Suspense";case jv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case SA:return(n.displayName||"Context")+".Consumer";case TA:return(n._context.displayName||"Context")+".Provider";case D2:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O2:return e=n.displayName||null,e!==null?e:Uv(n.type)||"Memo";case Qa:e=n._payload,n=n._init;try{return Uv(n(e))}catch{}}return null}function _C(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uv(e);case 8:return e===L2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wC(n){var e=PA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function dm(n){n._valueTracker||(n._valueTracker=wC(n))}function CA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=PA(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function _g(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bv(n,e){var t=e.checked;return Nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function V5(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=yl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kA(n,e){e=e.checked,e!=null&&R2(n,"checked",e,!1)}function qv(n,e){kA(n,e);var t=yl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zv(n,e.type,t):e.hasOwnProperty("defaultValue")&&zv(n,e.type,yl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function j5(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zv(n,e,t){(e!=="number"||_g(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gd=Array.isArray;function ah(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+yl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function $v(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Nn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function U5(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Fe(92));if(Gd(t)){if(1<t.length)throw Error(Fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:yl(t)}}function RA(n,e){var t=yl(e.value),r=yl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function B5(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function LA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?LA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var fm,DA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(fm=fm||document.createElement("div"),fm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Tf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bC=["Webkit","ms","Moz","O"];Object.keys(nf).forEach(function(n){bC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),nf[e]=nf[n]})});function OA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||nf.hasOwnProperty(n)&&nf[n]?(""+e).trim():e+"px"}function FA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=OA(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var IC=Nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wv(n,e){if(e){if(IC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function Hv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kv=null;function F2(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qv=null,lh=null,uh=null;function q5(n){if(n=mp(n)){if(typeof Qv!="function")throw Error(Fe(280));var e=n.stateNode;e&&(e=b0(e),Qv(n.stateNode,n.type,e))}}function MA(n){lh?uh?uh.push(n):uh=[n]:lh=n}function VA(){if(lh){var n=lh,e=uh;if(uh=lh=null,q5(n),e)for(n=0;n<e.length;n++)q5(e[n])}}function jA(n,e){return n(e)}function UA(){}var j1=!1;function BA(n,e,t){if(j1)return n(e,t);j1=!0;try{return jA(n,e,t)}finally{j1=!1,(lh!==null||uh!==null)&&(UA(),VA())}}function Sf(n,e){var t=n.stateNode;if(t===null)return null;var r=b0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Fe(231,e,typeof t));return t}var Jv=!1;if(na)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){Jv=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{Jv=!1}function EC(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var rf=!1,wg=null,bg=!1,Yv=null,AC={onError:function(n){rf=!0,wg=n}};function xC(n,e,t,r,i,s,o,a,l){rf=!1,wg=null,EC.apply(AC,arguments)}function TC(n,e,t,r,i,s,o,a,l){if(xC.apply(this,arguments),rf){if(rf){var c=wg;rf=!1,wg=null}else throw Error(Fe(198));bg||(bg=!0,Yv=c)}}function Yu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function z5(n){if(Yu(n)!==n)throw Error(Fe(188))}function SC(n){var e=n.alternate;if(!e){if(e=Yu(n),e===null)throw Error(Fe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return z5(i),n;if(s===r)return z5(i),e;s=s.sibling}throw Error(Fe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(t.alternate!==r)throw Error(Fe(190))}if(t.tag!==3)throw Error(Fe(188));return t.stateNode.current===t?n:e}function zA(n){return n=SC(n),n!==null?$A(n):null}function $A(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$A(n);if(e!==null)return e;n=n.sibling}return null}var GA=Hi.unstable_scheduleCallback,$5=Hi.unstable_cancelCallback,NC=Hi.unstable_shouldYield,PC=Hi.unstable_requestPaint,zn=Hi.unstable_now,CC=Hi.unstable_getCurrentPriorityLevel,M2=Hi.unstable_ImmediatePriority,WA=Hi.unstable_UserBlockingPriority,Ig=Hi.unstable_NormalPriority,kC=Hi.unstable_LowPriority,HA=Hi.unstable_IdlePriority,v0=null,mo=null;function RC(n){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(v0,n,void 0,(n.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:OC,LC=Math.log,DC=Math.LN2;function OC(n){return n>>>=0,n===0?32:31-(LC(n)/DC|0)|0}var pm=64,mm=4194304;function Wd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Eg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Wd(a):(s&=o,s!==0&&(r=Wd(s)))}else o=t&~i,o!==0?r=Wd(o):s!==0&&(r=Wd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Us(e),i=1<<t,r|=n[t],e&=~i;return r}function FC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MC(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Us(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=FC(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Xv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function KA(){var n=pm;return pm<<=1,!(pm&4194240)&&(pm=64),n}function U1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function fp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Us(e),n[e]=t}function VC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Us(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function V2(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Us(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Yt=0;function QA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var JA,j2,YA,XA,ZA,Zv=!1,gm=[],ll=null,ul=null,cl=null,Nf=new Map,Pf=new Map,Xa=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G5(n,e){switch(n){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":Nf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(e.pointerId)}}function Td(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=mp(e),e!==null&&j2(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function UC(n,e,t,r,i){switch(e){case"focusin":return ll=Td(ll,n,e,t,r,i),!0;case"dragenter":return ul=Td(ul,n,e,t,r,i),!0;case"mouseover":return cl=Td(cl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Nf.set(s,Td(Nf.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pf.set(s,Td(Pf.get(s)||null,n,e,t,r,i)),!0}return!1}function ex(n){var e=_u(n.target);if(e!==null){var t=Yu(e);if(t!==null){if(e=t.tag,e===13){if(e=qA(t),e!==null){n.blockedOn=e,ZA(n.priority,function(){YA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ey(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Kv=r,t.target.dispatchEvent(r),Kv=null}else return e=mp(t),e!==null&&j2(e),n.blockedOn=t,!1;e.shift()}return!0}function W5(n,e,t){zm(n)&&t.delete(e)}function BC(){Zv=!1,ll!==null&&zm(ll)&&(ll=null),ul!==null&&zm(ul)&&(ul=null),cl!==null&&zm(cl)&&(cl=null),Nf.forEach(W5),Pf.forEach(W5)}function Sd(n,e){n.blockedOn===e&&(n.blockedOn=null,Zv||(Zv=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,BC)))}function Cf(n){function e(i){return Sd(i,n)}if(0<gm.length){Sd(gm[0],n);for(var t=1;t<gm.length;t++){var r=gm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ll!==null&&Sd(ll,n),ul!==null&&Sd(ul,n),cl!==null&&Sd(cl,n),Nf.forEach(e),Pf.forEach(e),t=0;t<Xa.length;t++)r=Xa[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Xa.length&&(t=Xa[0],t.blockedOn===null);)ex(t),t.blockedOn===null&&Xa.shift()}var ch=ca.ReactCurrentBatchConfig,Ag=!0;function qC(n,e,t,r){var i=Yt,s=ch.transition;ch.transition=null;try{Yt=1,U2(n,e,t,r)}finally{Yt=i,ch.transition=s}}function zC(n,e,t,r){var i=Yt,s=ch.transition;ch.transition=null;try{Yt=4,U2(n,e,t,r)}finally{Yt=i,ch.transition=s}}function U2(n,e,t,r){if(Ag){var i=ey(n,e,t,r);if(i===null)J1(n,e,r,xg,t),G5(n,r);else if(UC(i,n,e,t,r))r.stopPropagation();else if(G5(n,r),e&4&&-1<jC.indexOf(n)){for(;i!==null;){var s=mp(i);if(s!==null&&JA(s),s=ey(n,e,t,r),s===null&&J1(n,e,r,xg,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else J1(n,e,r,null,t)}}var xg=null;function ey(n,e,t,r){if(xg=null,n=F2(r),n=_u(n),n!==null)if(e=Yu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xg=n,null}function tx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CC()){case M2:return 1;case WA:return 4;case Ig:case kC:return 16;case HA:return 536870912;default:return 16}default:return 16}}var nl=null,B2=null,$m=null;function nx(){if($m)return $m;var n,e=B2,t=e.length,r,i="value"in nl?nl.value:nl.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return $m=i.slice(n,1<r?1-r:void 0)}function Gm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function vm(){return!0}function H5(){return!1}function Ji(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vm:H5,this.isPropagationStopped=H5,this}return Nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=vm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=vm)},persist:function(){},isPersistent:vm}),e}var Kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q2=Ji(Kh),pp=Nn({},Kh,{view:0,detail:0}),$C=Ji(pp),B1,q1,Nd,y0=Nn({},pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nd&&(Nd&&n.type==="mousemove"?(B1=n.screenX-Nd.screenX,q1=n.screenY-Nd.screenY):q1=B1=0,Nd=n),B1)},movementY:function(n){return"movementY"in n?n.movementY:q1}}),K5=Ji(y0),GC=Nn({},y0,{dataTransfer:0}),WC=Ji(GC),HC=Nn({},pp,{relatedTarget:0}),z1=Ji(HC),KC=Nn({},Kh,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=Ji(KC),JC=Nn({},Kh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YC=Ji(JC),XC=Nn({},Kh,{data:0}),Q5=Ji(XC),ZC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=tk[n])?!!e[n]:!1}function z2(){return nk}var rk=Nn({},pp,{key:function(n){if(n.key){var e=ZC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Gm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ek[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z2,charCode:function(n){return n.type==="keypress"?Gm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ik=Ji(rk),sk=Nn({},y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J5=Ji(sk),ok=Nn({},pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z2}),ak=Ji(ok),lk=Nn({},Kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),uk=Ji(lk),ck=Nn({},y0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hk=Ji(ck),dk=[9,13,27,32],$2=na&&"CompositionEvent"in window,sf=null;na&&"documentMode"in document&&(sf=document.documentMode);var fk=na&&"TextEvent"in window&&!sf,rx=na&&(!$2||sf&&8<sf&&11>=sf),Y5=String.fromCharCode(32),X5=!1;function ix(n,e){switch(n){case"keyup":return dk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qc=!1;function pk(n,e){switch(n){case"compositionend":return sx(e);case"keypress":return e.which!==32?null:(X5=!0,Y5);case"textInput":return n=e.data,n===Y5&&X5?null:n;default:return null}}function mk(n,e){if(Qc)return n==="compositionend"||!$2&&ix(n,e)?(n=nx(),$m=B2=nl=null,Qc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rx&&e.locale!=="ko"?null:e.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!gk[n.type]:e==="textarea"}function ox(n,e,t,r){MA(r),e=Tg(e,"onChange"),0<e.length&&(t=new q2("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var of=null,kf=null;function vk(n){vx(n,0)}function _0(n){var e=Xc(n);if(CA(e))return n}function yk(n,e){if(n==="change")return e}var ax=!1;if(na){var $1;if(na){var G1="oninput"in document;if(!G1){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),G1=typeof eb.oninput=="function"}$1=G1}else $1=!1;ax=$1&&(!document.documentMode||9<document.documentMode)}function tb(){of&&(of.detachEvent("onpropertychange",lx),kf=of=null)}function lx(n){if(n.propertyName==="value"&&_0(kf)){var e=[];ox(e,kf,n,F2(n)),BA(vk,e)}}function _k(n,e,t){n==="focusin"?(tb(),of=e,kf=t,of.attachEvent("onpropertychange",lx)):n==="focusout"&&tb()}function wk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _0(kf)}function bk(n,e){if(n==="click")return _0(e)}function Ik(n,e){if(n==="input"||n==="change")return _0(e)}function Ek(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qs=typeof Object.is=="function"?Object.is:Ek;function Rf(n,e){if(qs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Fv.call(e,i)||!qs(n[i],e[i]))return!1}return!0}function nb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rb(n,e){var t=nb(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nb(t)}}function ux(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ux(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function cx(){for(var n=window,e=_g();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=_g(n.document)}return e}function G2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Ak(n){var e=cx(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ux(t.ownerDocument.documentElement,t)){if(r!==null&&G2(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=rb(t,s);var o=rb(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xk=na&&"documentMode"in document&&11>=document.documentMode,Jc=null,ty=null,af=null,ny=!1;function ib(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ny||Jc==null||Jc!==_g(r)||(r=Jc,"selectionStart"in r&&G2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),af&&Rf(af,r)||(af=r,r=Tg(ty,"onSelect"),0<r.length&&(e=new q2("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Jc)))}function ym(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Yc={animationend:ym("Animation","AnimationEnd"),animationiteration:ym("Animation","AnimationIteration"),animationstart:ym("Animation","AnimationStart"),transitionend:ym("Transition","TransitionEnd")},W1={},hx={};na&&(hx=document.createElement("div").style,"AnimationEvent"in window||(delete Yc.animationend.animation,delete Yc.animationiteration.animation,delete Yc.animationstart.animation),"TransitionEvent"in window||delete Yc.transitionend.transition);function w0(n){if(W1[n])return W1[n];if(!Yc[n])return n;var e=Yc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in hx)return W1[n]=e[t];return n}var dx=w0("animationend"),fx=w0("animationiteration"),px=w0("animationstart"),mx=w0("transitionend"),gx=new Map,sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(n,e){gx.set(n,e),Ju(e,[n])}for(var H1=0;H1<sb.length;H1++){var K1=sb[H1],Tk=K1.toLowerCase(),Sk=K1[0].toUpperCase()+K1.slice(1);Rl(Tk,"on"+Sk)}Rl(dx,"onAnimationEnd");Rl(fx,"onAnimationIteration");Rl(px,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(mx,"onTransitionEnd");Eh("onMouseEnter",["mouseout","mouseover"]);Eh("onMouseLeave",["mouseout","mouseover"]);Eh("onPointerEnter",["pointerout","pointerover"]);Eh("onPointerLeave",["pointerout","pointerover"]);Ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hd));function ob(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,TC(r,e,void 0,n),n.currentTarget=null}function vx(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ob(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ob(i,a,c),s=l}}}if(bg)throw n=Yv,bg=!1,Yv=null,n}function gn(n,e){var t=e[ay];t===void 0&&(t=e[ay]=new Set);var r=n+"__bubble";t.has(r)||(yx(e,n,2,!1),t.add(r))}function Q1(n,e,t){var r=0;e&&(r|=4),yx(t,n,r,e)}var _m="_reactListening"+Math.random().toString(36).slice(2);function Lf(n){if(!n[_m]){n[_m]=!0,xA.forEach(function(t){t!=="selectionchange"&&(Nk.has(t)||Q1(t,!1,n),Q1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[_m]||(e[_m]=!0,Q1("selectionchange",!1,e))}}function yx(n,e,t,r){switch(tx(e)){case 1:var i=qC;break;case 4:i=zC;break;default:i=U2}t=i.bind(null,e,t,n),i=void 0,!Jv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function J1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_u(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BA(function(){var c=s,d=F2(t),p=[];e:{var v=gx.get(n);if(v!==void 0){var g=q2,N=n;switch(n){case"keypress":if(Gm(t)===0)break e;case"keydown":case"keyup":g=ik;break;case"focusin":N="focus",g=z1;break;case"focusout":N="blur",g=z1;break;case"beforeblur":case"afterblur":g=z1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=K5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=WC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ak;break;case dx:case fx:case px:g=QC;break;case mx:g=uk;break;case"scroll":g=$C;break;case"wheel":g=hk;break;case"copy":case"cut":case"paste":g=YC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=J5}var T=(e&4)!==0,R=!T&&n==="scroll",w=T?v!==null?v+"Capture":null:v;T=[];for(var E=c,L;E!==null;){L=E;var $=L.stateNode;if(L.tag===5&&$!==null&&(L=$,w!==null&&($=Sf(E,w),$!=null&&T.push(Df(E,$,L)))),R)break;E=E.return}0<T.length&&(v=new g(v,N,null,t,d),p.push({event:v,listeners:T}))}}if(!(e&7)){e:{if(v=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",v&&t!==Kv&&(N=t.relatedTarget||t.fromElement)&&(_u(N)||N[ra]))break e;if((g||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,g?(N=t.relatedTarget||t.toElement,g=c,N=N?_u(N):null,N!==null&&(R=Yu(N),N!==R||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=c),g!==N)){if(T=K5,$="onMouseLeave",w="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(T=J5,$="onPointerLeave",w="onPointerEnter",E="pointer"),R=g==null?v:Xc(g),L=N==null?v:Xc(N),v=new T($,E+"leave",g,t,d),v.target=R,v.relatedTarget=L,$=null,_u(d)===c&&(T=new T(w,E+"enter",N,t,d),T.target=L,T.relatedTarget=R,$=T),R=$,g&&N)t:{for(T=g,w=N,E=0,L=T;L;L=Cc(L))E++;for(L=0,$=w;$;$=Cc($))L++;for(;0<E-L;)T=Cc(T),E--;for(;0<L-E;)w=Cc(w),L--;for(;E--;){if(T===w||w!==null&&T===w.alternate)break t;T=Cc(T),w=Cc(w)}T=null}else T=null;g!==null&&ab(p,v,g,T,!1),N!==null&&R!==null&&ab(p,R,N,T,!0)}}e:{if(v=c?Xc(c):window,g=v.nodeName&&v.nodeName.toLowerCase(),g==="select"||g==="input"&&v.type==="file")var G=yk;else if(Z5(v))if(ax)G=Ik;else{G=wk;var K=_k}else(g=v.nodeName)&&g.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(G=bk);if(G&&(G=G(n,c))){ox(p,G,t,d);break e}K&&K(n,v,c),n==="focusout"&&(K=v._wrapperState)&&K.controlled&&v.type==="number"&&zv(v,"number",v.value)}switch(K=c?Xc(c):window,n){case"focusin":(Z5(K)||K.contentEditable==="true")&&(Jc=K,ty=c,af=null);break;case"focusout":af=ty=Jc=null;break;case"mousedown":ny=!0;break;case"contextmenu":case"mouseup":case"dragend":ny=!1,ib(p,t,d);break;case"selectionchange":if(xk)break;case"keydown":case"keyup":ib(p,t,d)}var P;if($2)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Qc?ix(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(rx&&t.locale!=="ko"&&(Qc||I!=="onCompositionStart"?I==="onCompositionEnd"&&Qc&&(P=nx()):(nl=d,B2="value"in nl?nl.value:nl.textContent,Qc=!0)),K=Tg(c,I),0<K.length&&(I=new Q5(I,n,null,t,d),p.push({event:I,listeners:K}),P?I.data=P:(P=sx(t),P!==null&&(I.data=P)))),(P=fk?pk(n,t):mk(n,t))&&(c=Tg(c,"onBeforeInput"),0<c.length&&(d=new Q5("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:c}),d.data=P))}vx(p,e)})}function Df(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Tg(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sf(n,t),s!=null&&r.unshift(Df(n,s,i)),s=Sf(n,e),s!=null&&r.push(Df(n,s,i))),n=n.return}return r}function Cc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ab(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sf(t,s),l!=null&&o.unshift(Df(t,l,a))):i||(l=Sf(t,s),l!=null&&o.push(Df(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Pk=/\r\n?/g,Ck=/\u0000|\uFFFD/g;function lb(n){return(typeof n=="string"?n:""+n).replace(Pk,`
`).replace(Ck,"")}function wm(n,e,t){if(e=lb(e),lb(n)!==e&&t)throw Error(Fe(425))}function Sg(){}var ry=null,iy=null;function sy(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oy=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(n){return ub.resolve(null).then(n).catch(Lk)}:oy;function Lk(n){setTimeout(function(){throw n})}function Y1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Cf(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Cf(e)}function hl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function cb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Qh=Math.random().toString(36).slice(2),so="__reactFiber$"+Qh,Of="__reactProps$"+Qh,ra="__reactContainer$"+Qh,ay="__reactEvents$"+Qh,Dk="__reactListeners$"+Qh,Ok="__reactHandles$"+Qh;function _u(n){var e=n[so];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ra]||t[so]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=cb(n);n!==null;){if(t=n[so])return t;n=cb(n)}return e}n=t,t=n.parentNode}return null}function mp(n){return n=n[so]||n[ra],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Fe(33))}function b0(n){return n[Of]||null}var ly=[],Zc=-1;function Ll(n){return{current:n}}function _n(n){0>Zc||(n.current=ly[Zc],ly[Zc]=null,Zc--)}function hn(n,e){Zc++,ly[Zc]=n.current,n.current=e}var _l={},Br=Ll(_l),Ei=Ll(!1),Lu=_l;function Ah(n,e){var t=n.type.contextTypes;if(!t)return _l;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ai(n){return n=n.childContextTypes,n!=null}function Ng(){_n(Ei),_n(Br)}function hb(n,e,t){if(Br.current!==_l)throw Error(Fe(168));hn(Br,e),hn(Ei,t)}function _x(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,_C(n)||"Unknown",i));return Nn({},t,r)}function Pg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_l,Lu=Br.current,hn(Br,n),hn(Ei,Ei.current),!0}function db(n,e,t){var r=n.stateNode;if(!r)throw Error(Fe(169));t?(n=_x(n,e,Lu),r.__reactInternalMemoizedMergedChildContext=n,_n(Ei),_n(Br),hn(Br,n)):_n(Ei),hn(Ei,t)}var Qo=null,I0=!1,X1=!1;function wx(n){Qo===null?Qo=[n]:Qo.push(n)}function Fk(n){I0=!0,wx(n)}function Dl(){if(!X1&&Qo!==null){X1=!0;var n=0,e=Yt;try{var t=Qo;for(Yt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Qo=null,I0=!1}catch(i){throw Qo!==null&&(Qo=Qo.slice(n+1)),GA(M2,Dl),i}finally{Yt=e,X1=!1}}return null}var eh=[],th=0,Cg=null,kg=0,hs=[],ds=0,Du=null,Jo=1,Yo="";function lu(n,e){eh[th++]=kg,eh[th++]=Cg,Cg=n,kg=e}function bx(n,e,t){hs[ds++]=Jo,hs[ds++]=Yo,hs[ds++]=Du,Du=n;var r=Jo;n=Yo;var i=32-Us(r)-1;r&=~(1<<i),t+=1;var s=32-Us(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Us(e)+i|t<<i|r,Yo=s+n}else Jo=1<<s|t<<i|r,Yo=n}function W2(n){n.return!==null&&(lu(n,1),bx(n,1,0))}function H2(n){for(;n===Cg;)Cg=eh[--th],eh[th]=null,kg=eh[--th],eh[th]=null;for(;n===Du;)Du=hs[--ds],hs[ds]=null,Yo=hs[--ds],hs[ds]=null,Jo=hs[--ds],hs[ds]=null}var Gi=null,qi=null,bn=!1,js=null;function Ix(n,e){var t=fs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Gi=n,qi=hl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Gi=n,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Du!==null?{id:Jo,overflow:Yo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=fs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Gi=n,qi=null,!0):!1;default:return!1}}function uy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cy(n){if(bn){var e=qi;if(e){var t=e;if(!fb(n,e)){if(uy(n))throw Error(Fe(418));e=hl(t.nextSibling);var r=Gi;e&&fb(n,e)?Ix(r,t):(n.flags=n.flags&-4097|2,bn=!1,Gi=n)}}else{if(uy(n))throw Error(Fe(418));n.flags=n.flags&-4097|2,bn=!1,Gi=n}}}function pb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Gi=n}function bm(n){if(n!==Gi)return!1;if(!bn)return pb(n),bn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!sy(n.type,n.memoizedProps)),e&&(e=qi)){if(uy(n))throw Ex(),Error(Fe(418));for(;e;)Ix(n,e),e=hl(e.nextSibling)}if(pb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Fe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){qi=hl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}qi=null}}else qi=Gi?hl(n.stateNode.nextSibling):null;return!0}function Ex(){for(var n=qi;n;)n=hl(n.nextSibling)}function xh(){qi=Gi=null,bn=!1}function K2(n){js===null?js=[n]:js.push(n)}var Mk=ca.ReactCurrentBatchConfig;function Fs(n,e){if(n&&n.defaultProps){e=Nn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Rg=Ll(null),Lg=null,nh=null,Q2=null;function J2(){Q2=nh=Lg=null}function Y2(n){var e=Rg.current;_n(Rg),n._currentValue=e}function hy(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function hh(n,e){Lg=n,Q2=nh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_i=!0),n.firstContext=null)}function vs(n){var e=n._currentValue;if(Q2!==n)if(n={context:n,memoizedValue:e,next:null},nh===null){if(Lg===null)throw Error(Fe(308));nh=n,Lg.dependencies={lanes:0,firstContext:n}}else nh=nh.next=n;return e}var wu=null;function X2(n){wu===null?wu=[n]:wu.push(n)}function Ax(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,X2(e)):(t.next=i.next,i.next=t),e.interleaved=t,ia(n,r)}function ia(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ja=!1;function Z2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xx(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ea(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function dl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ia(n,t)}return i=r.interleaved,i===null?(e.next=e,X2(r)):(e.next=i.next,i.next=e),r.interleaved=e,ia(n,t)}function Wm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,V2(n,t)}}function mb(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Dg(n,e,t,r){var i=n.updateQueue;Ja=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=c=l=null,a=s;do{var v=a.lane,g=a.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var N=n,T=a;switch(v=e,g=t,T.tag){case 1:if(N=T.payload,typeof N=="function"){p=N.call(g,p,v);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=T.payload,v=typeof N=="function"?N.call(g,p,v):N,v==null)break e;p=Nn({},p,v);break e;case 2:Ja=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else g={eventTime:g,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=p):d=d.next=g,o|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(1);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fu|=o,n.lanes=o,n.memoizedState=p}}function gb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var Tx=new AA.Component().refs;function dy(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Nn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var E0={isMounted:function(n){return(n=n._reactInternals)?Yu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Zr(),i=pl(n),s=ea(r,i);s.payload=e,t!=null&&(s.callback=t),e=dl(n,s,i),e!==null&&(Bs(e,n,i,r),Wm(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Zr(),i=pl(n),s=ea(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=dl(n,s,i),e!==null&&(Bs(e,n,i,r),Wm(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Zr(),r=pl(n),i=ea(t,r);i.tag=2,e!=null&&(i.callback=e),e=dl(n,i,r),e!==null&&(Bs(e,n,r,t),Wm(e,n,r))}};function vb(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Rf(t,r)||!Rf(i,s):!0}function Sx(n,e,t){var r=!1,i=_l,s=e.contextType;return typeof s=="object"&&s!==null?s=vs(s):(i=Ai(e)?Lu:Br.current,r=e.contextTypes,s=(r=r!=null)?Ah(n,i):_l),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function yb(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&E0.enqueueReplaceState(e,e.state,null)}function fy(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Tx,Z2(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vs(s):(s=Ai(e)?Lu:Br.current,i.context=Ah(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dy(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&E0.enqueueReplaceState(i,i.state,null),Dg(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Pd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Fe(309));var r=t.stateNode}if(!r)throw Error(Fe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Tx&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Fe(284));if(!t._owner)throw Error(Fe(290,n))}return n}function Im(n,e){throw n=Object.prototype.toString.call(e),Error(Fe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _b(n){var e=n._init;return e(n._payload)}function Nx(n){function e(w,E){if(n){var L=w.deletions;L===null?(w.deletions=[E],w.flags|=16):L.push(E)}}function t(w,E){if(!n)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function i(w,E){return w=ml(w,E),w.index=0,w.sibling=null,w}function s(w,E,L){return w.index=L,n?(L=w.alternate,L!==null?(L=L.index,L<E?(w.flags|=2,E):L):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,E,L,$){return E===null||E.tag!==6?(E=sv(L,w.mode,$),E.return=w,E):(E=i(E,L),E.return=w,E)}function l(w,E,L,$){var G=L.type;return G===Kc?d(w,E,L.props.children,$,L.key):E!==null&&(E.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Qa&&_b(G)===E.type)?($=i(E,L.props),$.ref=Pd(w,E,L),$.return=w,$):($=Xm(L.type,L.key,L.props,null,w.mode,$),$.ref=Pd(w,E,L),$.return=w,$)}function c(w,E,L,$){return E===null||E.tag!==4||E.stateNode.containerInfo!==L.containerInfo||E.stateNode.implementation!==L.implementation?(E=ov(L,w.mode,$),E.return=w,E):(E=i(E,L.children||[]),E.return=w,E)}function d(w,E,L,$,G){return E===null||E.tag!==7?(E=Su(L,w.mode,$,G),E.return=w,E):(E=i(E,L),E.return=w,E)}function p(w,E,L){if(typeof E=="string"&&E!==""||typeof E=="number")return E=sv(""+E,w.mode,L),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hm:return L=Xm(E.type,E.key,E.props,null,w.mode,L),L.ref=Pd(w,null,E),L.return=w,L;case Hc:return E=ov(E,w.mode,L),E.return=w,E;case Qa:var $=E._init;return p(w,$(E._payload),L)}if(Gd(E)||Ad(E))return E=Su(E,w.mode,L,null),E.return=w,E;Im(w,E)}return null}function v(w,E,L,$){var G=E!==null?E.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return G!==null?null:a(w,E,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case hm:return L.key===G?l(w,E,L,$):null;case Hc:return L.key===G?c(w,E,L,$):null;case Qa:return G=L._init,v(w,E,G(L._payload),$)}if(Gd(L)||Ad(L))return G!==null?null:d(w,E,L,$,null);Im(w,L)}return null}function g(w,E,L,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return w=w.get(L)||null,a(E,w,""+$,G);if(typeof $=="object"&&$!==null){switch($.$$typeof){case hm:return w=w.get($.key===null?L:$.key)||null,l(E,w,$,G);case Hc:return w=w.get($.key===null?L:$.key)||null,c(E,w,$,G);case Qa:var K=$._init;return g(w,E,L,K($._payload),G)}if(Gd($)||Ad($))return w=w.get(L)||null,d(E,w,$,G,null);Im(E,$)}return null}function N(w,E,L,$){for(var G=null,K=null,P=E,I=E=0,F=null;P!==null&&I<L.length;I++){P.index>I?(F=P,P=null):F=P.sibling;var U=v(w,P,L[I],$);if(U===null){P===null&&(P=F);break}n&&P&&U.alternate===null&&e(w,P),E=s(U,E,I),K===null?G=U:K.sibling=U,K=U,P=F}if(I===L.length)return t(w,P),bn&&lu(w,I),G;if(P===null){for(;I<L.length;I++)P=p(w,L[I],$),P!==null&&(E=s(P,E,I),K===null?G=P:K.sibling=P,K=P);return bn&&lu(w,I),G}for(P=r(w,P);I<L.length;I++)F=g(P,w,I,L[I],$),F!==null&&(n&&F.alternate!==null&&P.delete(F.key===null?I:F.key),E=s(F,E,I),K===null?G=F:K.sibling=F,K=F);return n&&P.forEach(function(x){return e(w,x)}),bn&&lu(w,I),G}function T(w,E,L,$){var G=Ad(L);if(typeof G!="function")throw Error(Fe(150));if(L=G.call(L),L==null)throw Error(Fe(151));for(var K=G=null,P=E,I=E=0,F=null,U=L.next();P!==null&&!U.done;I++,U=L.next()){P.index>I?(F=P,P=null):F=P.sibling;var x=v(w,P,U.value,$);if(x===null){P===null&&(P=F);break}n&&P&&x.alternate===null&&e(w,P),E=s(x,E,I),K===null?G=x:K.sibling=x,K=x,P=F}if(U.done)return t(w,P),bn&&lu(w,I),G;if(P===null){for(;!U.done;I++,U=L.next())U=p(w,U.value,$),U!==null&&(E=s(U,E,I),K===null?G=U:K.sibling=U,K=U);return bn&&lu(w,I),G}for(P=r(w,P);!U.done;I++,U=L.next())U=g(P,w,I,U.value,$),U!==null&&(n&&U.alternate!==null&&P.delete(U.key===null?I:U.key),E=s(U,E,I),K===null?G=U:K.sibling=U,K=U);return n&&P.forEach(function(S){return e(w,S)}),bn&&lu(w,I),G}function R(w,E,L,$){if(typeof L=="object"&&L!==null&&L.type===Kc&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case hm:e:{for(var G=L.key,K=E;K!==null;){if(K.key===G){if(G=L.type,G===Kc){if(K.tag===7){t(w,K.sibling),E=i(K,L.props.children),E.return=w,w=E;break e}}else if(K.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Qa&&_b(G)===K.type){t(w,K.sibling),E=i(K,L.props),E.ref=Pd(w,K,L),E.return=w,w=E;break e}t(w,K);break}else e(w,K);K=K.sibling}L.type===Kc?(E=Su(L.props.children,w.mode,$,L.key),E.return=w,w=E):($=Xm(L.type,L.key,L.props,null,w.mode,$),$.ref=Pd(w,E,L),$.return=w,w=$)}return o(w);case Hc:e:{for(K=L.key;E!==null;){if(E.key===K)if(E.tag===4&&E.stateNode.containerInfo===L.containerInfo&&E.stateNode.implementation===L.implementation){t(w,E.sibling),E=i(E,L.children||[]),E.return=w,w=E;break e}else{t(w,E);break}else e(w,E);E=E.sibling}E=ov(L,w.mode,$),E.return=w,w=E}return o(w);case Qa:return K=L._init,R(w,E,K(L._payload),$)}if(Gd(L))return N(w,E,L,$);if(Ad(L))return T(w,E,L,$);Im(w,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,E!==null&&E.tag===6?(t(w,E.sibling),E=i(E,L),E.return=w,w=E):(t(w,E),E=sv(L,w.mode,$),E.return=w,w=E),o(w)):t(w,E)}return R}var Th=Nx(!0),Px=Nx(!1),gp={},go=Ll(gp),Ff=Ll(gp),Mf=Ll(gp);function bu(n){if(n===gp)throw Error(Fe(174));return n}function e_(n,e){switch(hn(Mf,e),hn(Ff,n),hn(go,gp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Gv(e,n)}_n(go),hn(go,e)}function Sh(){_n(go),_n(Ff),_n(Mf)}function Cx(n){bu(Mf.current);var e=bu(go.current),t=Gv(e,n.type);e!==t&&(hn(Ff,n),hn(go,t))}function t_(n){Ff.current===n&&(_n(go),_n(Ff))}var xn=Ll(0);function Og(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Z1=[];function n_(){for(var n=0;n<Z1.length;n++)Z1[n]._workInProgressVersionPrimary=null;Z1.length=0}var Hm=ca.ReactCurrentDispatcher,ev=ca.ReactCurrentBatchConfig,Ou=0,Tn=null,ir=null,dr=null,Fg=!1,lf=!1,Vf=0,Vk=0;function Rr(){throw Error(Fe(321))}function r_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!qs(n[t],e[t]))return!1;return!0}function i_(n,e,t,r,i,s){if(Ou=s,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hm.current=n===null||n.memoizedState===null?qk:zk,n=t(r,i),lf){s=0;do{if(lf=!1,Vf=0,25<=s)throw Error(Fe(301));s+=1,dr=ir=null,e.updateQueue=null,Hm.current=$k,n=t(r,i)}while(lf)}if(Hm.current=Mg,e=ir!==null&&ir.next!==null,Ou=0,dr=ir=Tn=null,Fg=!1,e)throw Error(Fe(300));return n}function s_(){var n=Vf!==0;return Vf=0,n}function io(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Tn.memoizedState=dr=n:dr=dr.next=n,dr}function ys(){if(ir===null){var n=Tn.alternate;n=n!==null?n.memoizedState:null}else n=ir.next;var e=dr===null?Tn.memoizedState:dr.next;if(e!==null)dr=e,ir=n;else{if(n===null)throw Error(Fe(310));ir=n,n={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},dr===null?Tn.memoizedState=dr=n:dr=dr.next=n}return dr}function jf(n,e){return typeof e=="function"?e(n):e}function tv(n){var e=ys(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=ir,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ou&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Tn.lanes|=d,Fu|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,qs(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Tn.lanes|=s,Fu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function nv(n){var e=ys(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);qs(s,e.memoizedState)||(_i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function kx(){}function Rx(n,e){var t=Tn,r=ys(),i=e(),s=!qs(r.memoizedState,i);if(s&&(r.memoizedState=i,_i=!0),r=r.queue,o_(Ox.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||dr!==null&&dr.memoizedState.tag&1){if(t.flags|=2048,Uf(9,Dx.bind(null,t,r,i,e),void 0,null),mr===null)throw Error(Fe(349));Ou&30||Lx(t,e,i)}return i}function Lx(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Dx(n,e,t,r){e.value=t,e.getSnapshot=r,Fx(e)&&Mx(n)}function Ox(n,e,t){return t(function(){Fx(e)&&Mx(n)})}function Fx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qs(n,t)}catch{return!0}}function Mx(n){var e=ia(n,1);e!==null&&Bs(e,n,1,-1)}function wb(n){var e=io();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jf,lastRenderedState:n},e.queue=n,n=n.dispatch=Bk.bind(null,Tn,n),[e.memoizedState,n]}function Uf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Vx(){return ys().memoizedState}function Km(n,e,t,r){var i=io();Tn.flags|=n,i.memoizedState=Uf(1|e,t,void 0,r===void 0?null:r)}function A0(n,e,t,r){var i=ys();r=r===void 0?null:r;var s=void 0;if(ir!==null){var o=ir.memoizedState;if(s=o.destroy,r!==null&&r_(r,o.deps)){i.memoizedState=Uf(e,t,s,r);return}}Tn.flags|=n,i.memoizedState=Uf(1|e,t,s,r)}function bb(n,e){return Km(8390656,8,n,e)}function o_(n,e){return A0(2048,8,n,e)}function jx(n,e){return A0(4,2,n,e)}function Ux(n,e){return A0(4,4,n,e)}function Bx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function qx(n,e,t){return t=t!=null?t.concat([n]):null,A0(4,4,Bx.bind(null,e,n),t)}function a_(){}function zx(n,e){var t=ys();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&r_(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function $x(n,e){var t=ys();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&r_(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Gx(n,e,t){return Ou&21?(qs(t,e)||(t=KA(),Tn.lanes|=t,Fu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_i=!0),n.memoizedState=t)}function jk(n,e){var t=Yt;Yt=t!==0&&4>t?t:4,n(!0);var r=ev.transition;ev.transition={};try{n(!1),e()}finally{Yt=t,ev.transition=r}}function Wx(){return ys().memoizedState}function Uk(n,e,t){var r=pl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Hx(n))Kx(e,t);else if(t=Ax(n,e,t,r),t!==null){var i=Zr();Bs(t,n,r,i),Qx(t,e,r)}}function Bk(n,e,t){var r=pl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Hx(n))Kx(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,qs(a,o)){var l=e.interleaved;l===null?(i.next=i,X2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Ax(n,e,i,r),t!==null&&(i=Zr(),Bs(t,n,r,i),Qx(t,e,r))}}function Hx(n){var e=n.alternate;return n===Tn||e!==null&&e===Tn}function Kx(n,e){lf=Fg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Qx(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,V2(n,t)}}var Mg={readContext:vs,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},qk={readContext:vs,useCallback:function(n,e){return io().memoizedState=[n,e===void 0?null:e],n},useContext:vs,useEffect:bb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Km(4194308,4,Bx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Km(4194308,4,n,e)},useInsertionEffect:function(n,e){return Km(4,2,n,e)},useMemo:function(n,e){var t=io();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=io();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Uk.bind(null,Tn,n),[r.memoizedState,n]},useRef:function(n){var e=io();return n={current:n},e.memoizedState=n},useState:wb,useDebugValue:a_,useDeferredValue:function(n){return io().memoizedState=n},useTransition:function(){var n=wb(!1),e=n[0];return n=jk.bind(null,n[1]),io().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Tn,i=io();if(bn){if(t===void 0)throw Error(Fe(407));t=t()}else{if(t=e(),mr===null)throw Error(Fe(349));Ou&30||Lx(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,bb(Ox.bind(null,r,s,n),[n]),r.flags|=2048,Uf(9,Dx.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=io(),e=mr.identifierPrefix;if(bn){var t=Yo,r=Jo;t=(r&~(1<<32-Us(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Vf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Vk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},zk={readContext:vs,useCallback:zx,useContext:vs,useEffect:o_,useImperativeHandle:qx,useInsertionEffect:jx,useLayoutEffect:Ux,useMemo:$x,useReducer:tv,useRef:Vx,useState:function(){return tv(jf)},useDebugValue:a_,useDeferredValue:function(n){var e=ys();return Gx(e,ir.memoizedState,n)},useTransition:function(){var n=tv(jf)[0],e=ys().memoizedState;return[n,e]},useMutableSource:kx,useSyncExternalStore:Rx,useId:Wx,unstable_isNewReconciler:!1},$k={readContext:vs,useCallback:zx,useContext:vs,useEffect:o_,useImperativeHandle:qx,useInsertionEffect:jx,useLayoutEffect:Ux,useMemo:$x,useReducer:nv,useRef:Vx,useState:function(){return nv(jf)},useDebugValue:a_,useDeferredValue:function(n){var e=ys();return ir===null?e.memoizedState=n:Gx(e,ir.memoizedState,n)},useTransition:function(){var n=nv(jf)[0],e=ys().memoizedState;return[n,e]},useMutableSource:kx,useSyncExternalStore:Rx,useId:Wx,unstable_isNewReconciler:!1};function Nh(n,e){try{var t="",r=e;do t+=yC(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function rv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function py(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Gk=typeof WeakMap=="function"?WeakMap:Map;function Jx(n,e,t){t=ea(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){jg||(jg=!0,Ay=r),py(n,e)},t}function Yx(n,e,t){t=ea(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){py(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){py(n,e),typeof r!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Ib(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Gk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=sR.bind(null,n,e,t),e.then(n,n))}function Eb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ab(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ea(-1,1),e.tag=2,dl(t,e,1))),t.lanes|=1),n)}var Wk=ca.ReactCurrentOwner,_i=!1;function Jr(n,e,t,r){e.child=n===null?Px(e,null,t,r):Th(e,n.child,t,r)}function xb(n,e,t,r,i){t=t.render;var s=e.ref;return hh(e,i),r=i_(n,e,t,r,s,i),t=s_(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,sa(n,e,i)):(bn&&t&&W2(e),e.flags|=1,Jr(n,e,r,i),e.child)}function Tb(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!m_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Xx(n,e,s,r,i)):(n=Xm(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Rf,t(o,r)&&n.ref===e.ref)return sa(n,e,i)}return e.flags|=1,n=ml(s,r),n.ref=e.ref,n.return=e,e.child=n}function Xx(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Rf(s,r)&&n.ref===e.ref)if(_i=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_i=!0);else return e.lanes=n.lanes,sa(n,e,i)}return my(n,e,t,r,i)}function Zx(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(ih,Ui),Ui|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,hn(ih,Ui),Ui|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,hn(ih,Ui),Ui|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,hn(ih,Ui),Ui|=r;return Jr(n,e,i,t),e.child}function eT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function my(n,e,t,r,i){var s=Ai(t)?Lu:Br.current;return s=Ah(e,s),hh(e,i),t=i_(n,e,t,r,s,i),r=s_(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,sa(n,e,i)):(bn&&r&&W2(e),e.flags|=1,Jr(n,e,t,i),e.child)}function Sb(n,e,t,r,i){if(Ai(t)){var s=!0;Pg(e)}else s=!1;if(hh(e,i),e.stateNode===null)Qm(n,e),Sx(e,t,r),fy(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=vs(c):(c=Ai(t)?Lu:Br.current,c=Ah(e,c));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yb(e,o,r,c),Ja=!1;var v=e.memoizedState;o.state=v,Dg(e,r,o,i),l=e.memoizedState,a!==r||v!==l||Ei.current||Ja?(typeof d=="function"&&(dy(e,t,d,r),l=e.memoizedState),(a=Ja||vb(e,t,a,r,v,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xx(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fs(e.type,a),o.props=c,p=e.pendingProps,v=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=vs(l):(l=Ai(t)?Lu:Br.current,l=Ah(e,l));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||v!==l)&&yb(e,o,r,l),Ja=!1,v=e.memoizedState,o.state=v,Dg(e,r,o,i);var N=e.memoizedState;a!==p||v!==N||Ei.current||Ja?(typeof g=="function"&&(dy(e,t,g,r),N=e.memoizedState),(c=Ja||vb(e,t,c,r,v,N,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),r=!1)}return gy(n,e,t,r,s,i)}function gy(n,e,t,r,i,s){eT(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&db(e,t,!1),sa(n,e,s);r=e.stateNode,Wk.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Th(e,n.child,null,s),e.child=Th(e,null,a,s)):Jr(n,e,a,s),e.memoizedState=r.state,i&&db(e,t,!0),e.child}function tT(n){var e=n.stateNode;e.pendingContext?hb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&hb(n,e.context,!1),e_(n,e.containerInfo)}function Nb(n,e,t,r,i){return xh(),K2(i),e.flags|=256,Jr(n,e,t,r),e.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function yy(n){return{baseLanes:n,cachePool:null,transitions:null}}function nT(n,e,t){var r=e.pendingProps,i=xn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),hn(xn,i&1),n===null)return cy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=S0(o,r,0,null),n=Su(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=yy(t),e.memoizedState=vy,n):l_(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hk(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ml(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ml(a,s):(s=Su(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?yy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=vy,r}return s=n.child,n=s.sibling,r=ml(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function l_(n,e){return e=S0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Em(n,e,t,r){return r!==null&&K2(r),Th(e,n.child,null,t),n=l_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Hk(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=rv(Error(Fe(422))),Em(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=S0({mode:"visible",children:r.children},i,0,null),s=Su(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Th(e,n.child,null,o),e.child.memoizedState=yy(o),e.memoizedState=vy,s);if(!(e.mode&1))return Em(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=rv(s,r,void 0),Em(n,e,o,r)}if(a=(o&n.childLanes)!==0,_i||a){if(r=mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ia(n,i),Bs(r,n,i,-1))}return p_(),r=rv(Error(Fe(421))),Em(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=oR.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,qi=hl(i.nextSibling),Gi=e,bn=!0,js=null,n!==null&&(hs[ds++]=Jo,hs[ds++]=Yo,hs[ds++]=Du,Jo=n.id,Yo=n.overflow,Du=e),e=l_(e,r.children),e.flags|=4096,e)}function Pb(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),hy(n.return,e,t)}function iv(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function rT(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jr(n,e,r.children,t),r=xn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pb(n,t,e);else if(n.tag===19)Pb(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(hn(xn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Og(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),iv(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Og(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}iv(e,!0,t,null,s);break;case"together":iv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function sa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Fu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Fe(153));if(e.child!==null){for(n=e.child,t=ml(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ml(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Kk(n,e,t){switch(e.tag){case 3:tT(e),xh();break;case 5:Cx(e);break;case 1:Ai(e.type)&&Pg(e);break;case 4:e_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;hn(Rg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(xn,xn.current&1),e.flags|=128,null):t&e.child.childLanes?nT(n,e,t):(hn(xn,xn.current&1),n=sa(n,e,t),n!==null?n.sibling:null);hn(xn,xn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return rT(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hn(xn,xn.current),r)break;return null;case 22:case 23:return e.lanes=0,Zx(n,e,t)}return sa(n,e,t)}var iT,_y,sT,oT;iT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};_y=function(){};sT=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,bu(go.current);var s=null;switch(t){case"input":i=Bv(n,i),r=Bv(n,r),s=[];break;case"select":i=Nn({},i,{value:void 0}),r=Nn({},r,{value:void 0}),s=[];break;case"textarea":i=$v(n,i),r=$v(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Sg)}Wv(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oT=function(n,e,t,r){t!==r&&(e.flags|=4)};function Cd(n,e){if(!bn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Lr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Qk(n,e,t){var r=e.pendingProps;switch(H2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Ai(e.type)&&Ng(),Lr(e),null;case 3:return r=e.stateNode,Sh(),_n(Ei),_n(Br),n_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(bm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,js!==null&&(Sy(js),js=null))),_y(n,e),Lr(e),null;case 5:t_(e);var i=bu(Mf.current);if(t=e.type,n!==null&&e.stateNode!=null)sT(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Lr(e),null}if(n=bu(go.current),bm(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[so]=e,r[Of]=s,n=(e.mode&1)!==0,t){case"dialog":gn("cancel",r),gn("close",r);break;case"iframe":case"object":case"embed":gn("load",r);break;case"video":case"audio":for(i=0;i<Hd.length;i++)gn(Hd[i],r);break;case"source":gn("error",r);break;case"img":case"image":case"link":gn("error",r),gn("load",r);break;case"details":gn("toggle",r);break;case"input":V5(r,s),gn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gn("invalid",r);break;case"textarea":U5(r,s),gn("invalid",r)}Wv(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wm(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wm(r.textContent,a,n),i=["children",""+a]):xf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gn("scroll",r)}switch(t){case"input":dm(r),j5(r,s,!0);break;case"textarea":dm(r),B5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=LA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[so]=e,n[Of]=r,iT(n,e,!1,!1),e.stateNode=n;e:{switch(o=Hv(t,r),t){case"dialog":gn("cancel",n),gn("close",n),i=r;break;case"iframe":case"object":case"embed":gn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Hd.length;i++)gn(Hd[i],n);i=r;break;case"source":gn("error",n),i=r;break;case"img":case"image":case"link":gn("error",n),gn("load",n),i=r;break;case"details":gn("toggle",n),i=r;break;case"input":V5(n,r),i=Bv(n,r),gn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Nn({},r,{value:void 0}),gn("invalid",n);break;case"textarea":U5(n,r),i=$v(n,r),gn("invalid",n);break;default:i=r}Wv(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?FA(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DA(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Tf(n,l):typeof l=="number"&&Tf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",n):l!=null&&R2(n,s,l,o))}switch(t){case"input":dm(n),j5(n,r,!1);break;case"textarea":dm(n),B5(n);break;case"option":r.value!=null&&n.setAttribute("value",""+yl(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ah(n,!!r.multiple,s,!1):r.defaultValue!=null&&ah(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Sg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(n&&e.stateNode!=null)oT(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(t=bu(Mf.current),bu(go.current),bm(e)){if(r=e.stateNode,t=e.memoizedProps,r[so]=e,(s=r.nodeValue!==t)&&(n=Gi,n!==null))switch(n.tag){case 3:wm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wm(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[so]=e,e.stateNode=r}return Lr(e),null;case 13:if(_n(xn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(bn&&qi!==null&&e.mode&1&&!(e.flags&128))Ex(),xh(),e.flags|=98560,s=!1;else if(s=bm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[so]=e}else xh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else js!==null&&(Sy(js),js=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||xn.current&1?sr===0&&(sr=3):p_())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return Sh(),_y(n,e),n===null&&Lf(e.stateNode.containerInfo),Lr(e),null;case 10:return Y2(e.type._context),Lr(e),null;case 17:return Ai(e.type)&&Ng(),Lr(e),null;case 19:if(_n(xn),s=e.memoizedState,s===null)return Lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cd(s,!1);else{if(sr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Og(n),o!==null){for(e.flags|=128,Cd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return hn(xn,xn.current&1|2),e.child}n=n.sibling}s.tail!==null&&zn()>Ph&&(e.flags|=128,r=!0,Cd(s,!1),e.lanes=4194304)}else{if(!r)if(n=Og(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Cd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Lr(e),null}else 2*zn()-s.renderingStartTime>Ph&&t!==1073741824&&(e.flags|=128,r=!0,Cd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zn(),e.sibling=null,t=xn.current,hn(xn,r?t&1|2:t&1),e):(Lr(e),null);case 22:case 23:return f_(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ui&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function Jk(n,e){switch(H2(e),e.tag){case 1:return Ai(e.type)&&Ng(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Sh(),_n(Ei),_n(Br),n_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return t_(e),null;case 13:if(_n(xn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));xh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _n(xn),null;case 4:return Sh(),null;case 10:return Y2(e.type._context),null;case 22:case 23:return f_(),null;case 24:return null;default:return null}}var Am=!1,jr=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function rh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dn(n,e,r)}else t.current=null}function wy(n,e,t){try{t()}catch(r){Dn(n,e,r)}}var Cb=!1;function Xk(n,e){if(ry=Ag,n=cx(),G2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=n,v=null;t:for(;;){for(var g;p!==t||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)v=p,p=g;for(;;){if(p===n)break t;if(v===t&&++c===i&&(a=o),v===s&&++d===r&&(l=o),(g=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(iy={focusedElem:n,selectionRange:t},Ag=!1,Xe=e;Xe!==null;)if(e=Xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xe=n;else for(;Xe!==null;){e=Xe;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var T=N.memoizedProps,R=N.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?T:Fs(e.type,T),R);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch($){Dn(e,e.return,$)}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}return N=Cb,Cb=!1,N}function uf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&wy(e,t,s)}i=i.next}while(i!==r)}}function x0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function by(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aT(n){var e=n.alternate;e!==null&&(n.alternate=null,aT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[so],delete e[Of],delete e[ay],delete e[Dk],delete e[Ok])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lT(n){return n.tag===5||n.tag===3||n.tag===4}function kb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Iy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sg));else if(r!==4&&(n=n.child,n!==null))for(Iy(n,e,t),n=n.sibling;n!==null;)Iy(n,e,t),n=n.sibling}function Ey(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Ey(n,e,t),n=n.sibling;n!==null;)Ey(n,e,t),n=n.sibling}var br=null,Vs=!1;function qa(n,e,t){for(t=t.child;t!==null;)uT(n,e,t),t=t.sibling}function uT(n,e,t){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(v0,t)}catch{}switch(t.tag){case 5:jr||rh(t,e);case 6:var r=br,i=Vs;br=null,qa(n,e,t),br=r,Vs=i,br!==null&&(Vs?(n=br,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):br.removeChild(t.stateNode));break;case 18:br!==null&&(Vs?(n=br,t=t.stateNode,n.nodeType===8?Y1(n.parentNode,t):n.nodeType===1&&Y1(n,t),Cf(n)):Y1(br,t.stateNode));break;case 4:r=br,i=Vs,br=t.stateNode.containerInfo,Vs=!0,qa(n,e,t),br=r,Vs=i;break;case 0:case 11:case 14:case 15:if(!jr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wy(t,e,o),i=i.next}while(i!==r)}qa(n,e,t);break;case 1:if(!jr&&(rh(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dn(t,e,a)}qa(n,e,t);break;case 21:qa(n,e,t);break;case 22:t.mode&1?(jr=(r=jr)||t.memoizedState!==null,qa(n,e,t),jr=r):qa(n,e,t);break;default:qa(n,e,t)}}function Rb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Yk),e.forEach(function(r){var i=aR.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ls(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,Vs=!1;break e;case 3:br=a.stateNode.containerInfo,Vs=!0;break e;case 4:br=a.stateNode.containerInfo,Vs=!0;break e}a=a.return}if(br===null)throw Error(Fe(160));uT(s,o,i),br=null,Vs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cT(e,n),e=e.sibling}function cT(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ls(e,n),to(n),r&4){try{uf(3,n,n.return),x0(3,n)}catch(T){Dn(n,n.return,T)}try{uf(5,n,n.return)}catch(T){Dn(n,n.return,T)}}break;case 1:Ls(e,n),to(n),r&512&&t!==null&&rh(t,t.return);break;case 5:if(Ls(e,n),to(n),r&512&&t!==null&&rh(t,t.return),n.flags&32){var i=n.stateNode;try{Tf(i,"")}catch(T){Dn(n,n.return,T)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kA(i,s),Hv(a,o);var c=Hv(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?FA(i,p):d==="dangerouslySetInnerHTML"?DA(i,p):d==="children"?Tf(i,p):R2(i,d,p,c)}switch(a){case"input":qv(i,s);break;case"textarea":RA(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ah(i,!!s.multiple,g,!1):v!==!!s.multiple&&(s.defaultValue!=null?ah(i,!!s.multiple,s.defaultValue,!0):ah(i,!!s.multiple,s.multiple?[]:"",!1))}i[Of]=s}catch(T){Dn(n,n.return,T)}}break;case 6:if(Ls(e,n),to(n),r&4){if(n.stateNode===null)throw Error(Fe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(T){Dn(n,n.return,T)}}break;case 3:if(Ls(e,n),to(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Cf(e.containerInfo)}catch(T){Dn(n,n.return,T)}break;case 4:Ls(e,n),to(n);break;case 13:Ls(e,n),to(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(h_=zn())),r&4&&Rb(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(jr=(c=jr)||d,Ls(e,n),jr=c):Ls(e,n),to(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Xe=n,d=n.child;d!==null;){for(p=Xe=d;Xe!==null;){switch(v=Xe,g=v.child,v.tag){case 0:case 11:case 14:case 15:uf(4,v,v.return);break;case 1:rh(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){r=v,t=v.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(T){Dn(r,t,T)}}break;case 5:rh(v,v.return);break;case 22:if(v.memoizedState!==null){Db(p);continue}}g!==null?(g.return=v,Xe=g):Db(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OA("display",o))}catch(T){Dn(n,n.return,T)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(T){Dn(n,n.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ls(e,n),to(n),r&4&&Rb(n);break;case 21:break;default:Ls(e,n),to(n)}}function to(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lT(t)){var r=t;break e}t=t.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tf(i,""),r.flags&=-33);var s=kb(n);Ey(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=kb(n);Iy(n,a,o);break;default:throw Error(Fe(161))}}catch(l){Dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Zk(n,e,t){Xe=n,hT(n)}function hT(n,e,t){for(var r=(n.mode&1)!==0;Xe!==null;){var i=Xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Am;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jr;a=Am;var c=jr;if(Am=o,(jr=l)&&!c)for(Xe=i;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?Ob(i):l!==null?(l.return=o,Xe=l):Ob(i);for(;s!==null;)Xe=s,hT(s),s=s.sibling;Xe=i,Am=a,jr=c}Lb(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xe=s):Lb(n)}}function Lb(n){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jr||x0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Fs(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Cf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}jr||e.flags&512&&by(e)}catch(v){Dn(e,e.return,v)}}if(e===n){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function Db(n){for(;Xe!==null;){var e=Xe;if(e===n){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function Ob(n){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{x0(4,e)}catch(l){Dn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{by(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{by(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===n){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var eR=Math.ceil,Vg=ca.ReactCurrentDispatcher,u_=ca.ReactCurrentOwner,ms=ca.ReactCurrentBatchConfig,Vt=0,mr=null,tr=null,Ar=0,Ui=0,ih=Ll(0),sr=0,Bf=null,Fu=0,T0=0,c_=0,cf=null,yi=null,h_=0,Ph=1/0,Ko=null,jg=!1,Ay=null,fl=null,xm=!1,rl=null,Ug=0,hf=0,xy=null,Jm=-1,Ym=0;function Zr(){return Vt&6?zn():Jm!==-1?Jm:Jm=zn()}function pl(n){return n.mode&1?Vt&2&&Ar!==0?Ar&-Ar:Mk.transition!==null?(Ym===0&&(Ym=KA()),Ym):(n=Yt,n!==0||(n=window.event,n=n===void 0?16:tx(n.type)),n):1}function Bs(n,e,t,r){if(50<hf)throw hf=0,xy=null,Error(Fe(185));fp(n,t,r),(!(Vt&2)||n!==mr)&&(n===mr&&(!(Vt&2)&&(T0|=t),sr===4&&Za(n,Ar)),xi(n,r),t===1&&Vt===0&&!(e.mode&1)&&(Ph=zn()+500,I0&&Dl()))}function xi(n,e){var t=n.callbackNode;MC(n,e);var r=Eg(n,n===mr?Ar:0);if(r===0)t!==null&&$5(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&$5(t),e===1)n.tag===0?Fk(Fb.bind(null,n)):wx(Fb.bind(null,n)),Rk(function(){!(Vt&6)&&Dl()}),t=null;else{switch(QA(r)){case 1:t=M2;break;case 4:t=WA;break;case 16:t=Ig;break;case 536870912:t=HA;break;default:t=Ig}t=_T(t,dT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function dT(n,e){if(Jm=-1,Ym=0,Vt&6)throw Error(Fe(327));var t=n.callbackNode;if(dh()&&n.callbackNode!==t)return null;var r=Eg(n,n===mr?Ar:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Bg(n,r);else{e=r;var i=Vt;Vt|=2;var s=pT();(mr!==n||Ar!==e)&&(Ko=null,Ph=zn()+500,Tu(n,e));do try{rR();break}catch(a){fT(n,a)}while(1);J2(),Vg.current=s,Vt=i,tr!==null?e=0:(mr=null,Ar=0,e=sr)}if(e!==0){if(e===2&&(i=Xv(n),i!==0&&(r=i,e=Ty(n,i))),e===1)throw t=Bf,Tu(n,0),Za(n,r),xi(n,zn()),t;if(e===6)Za(n,r);else{if(i=n.current.alternate,!(r&30)&&!tR(i)&&(e=Bg(n,r),e===2&&(s=Xv(n),s!==0&&(r=s,e=Ty(n,s))),e===1))throw t=Bf,Tu(n,0),Za(n,r),xi(n,zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:uu(n,yi,Ko);break;case 3:if(Za(n,r),(r&130023424)===r&&(e=h_+500-zn(),10<e)){if(Eg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Zr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=oy(uu.bind(null,n,yi,Ko),e);break}uu(n,yi,Ko);break;case 4:if(Za(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Us(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eR(r/1960))-r,10<r){n.timeoutHandle=oy(uu.bind(null,n,yi,Ko),r);break}uu(n,yi,Ko);break;case 5:uu(n,yi,Ko);break;default:throw Error(Fe(329))}}}return xi(n,zn()),n.callbackNode===t?dT.bind(null,n):null}function Ty(n,e){var t=cf;return n.current.memoizedState.isDehydrated&&(Tu(n,e).flags|=256),n=Bg(n,e),n!==2&&(e=yi,yi=t,e!==null&&Sy(e)),n}function Sy(n){yi===null?yi=n:yi.push.apply(yi,n)}function tR(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!qs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Za(n,e){for(e&=~c_,e&=~T0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Us(e),r=1<<t;n[t]=-1,e&=~r}}function Fb(n){if(Vt&6)throw Error(Fe(327));dh();var e=Eg(n,0);if(!(e&1))return xi(n,zn()),null;var t=Bg(n,e);if(n.tag!==0&&t===2){var r=Xv(n);r!==0&&(e=r,t=Ty(n,r))}if(t===1)throw t=Bf,Tu(n,0),Za(n,e),xi(n,zn()),t;if(t===6)throw Error(Fe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,uu(n,yi,Ko),xi(n,zn()),null}function d_(n,e){var t=Vt;Vt|=1;try{return n(e)}finally{Vt=t,Vt===0&&(Ph=zn()+500,I0&&Dl())}}function Mu(n){rl!==null&&rl.tag===0&&!(Vt&6)&&dh();var e=Vt;Vt|=1;var t=ms.transition,r=Yt;try{if(ms.transition=null,Yt=1,n)return n()}finally{Yt=r,ms.transition=t,Vt=e,!(Vt&6)&&Dl()}}function f_(){Ui=ih.current,_n(ih)}function Tu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,kk(t)),tr!==null)for(t=tr.return;t!==null;){var r=t;switch(H2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ng();break;case 3:Sh(),_n(Ei),_n(Br),n_();break;case 5:t_(r);break;case 4:Sh();break;case 13:_n(xn);break;case 19:_n(xn);break;case 10:Y2(r.type._context);break;case 22:case 23:f_()}t=t.return}if(mr=n,tr=n=ml(n.current,null),Ar=Ui=e,sr=0,Bf=null,c_=T0=Fu=0,yi=cf=null,wu!==null){for(e=0;e<wu.length;e++)if(t=wu[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}wu=null}return n}function fT(n,e){do{var t=tr;try{if(J2(),Hm.current=Mg,Fg){for(var r=Tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fg=!1}if(Ou=0,dr=ir=Tn=null,lf=!1,Vf=0,u_.current=null,t===null||t.return===null){sr=1,Bf=e,tr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ar,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Eb(o);if(g!==null){g.flags&=-257,Ab(g,o,a,s,e),g.mode&1&&Ib(s,c,e),e=g,l=c;var N=e.updateQueue;if(N===null){var T=new Set;T.add(l),e.updateQueue=T}else N.add(l);break e}else{if(!(e&1)){Ib(s,c,e),p_();break e}l=Error(Fe(426))}}else if(bn&&a.mode&1){var R=Eb(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Ab(R,o,a,s,e),K2(Nh(l,a));break e}}s=l=Nh(l,a),sr!==4&&(sr=2),cf===null?cf=[s]:cf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Jx(s,l,e);mb(s,w);break e;case 1:a=l;var E=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(fl===null||!fl.has(L)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=Yx(s,a,e);mb(s,$);break e}}s=s.return}while(s!==null)}gT(t)}catch(G){e=G,tr===t&&t!==null&&(tr=t=t.return);continue}break}while(1)}function pT(){var n=Vg.current;return Vg.current=Mg,n===null?Mg:n}function p_(){(sr===0||sr===3||sr===2)&&(sr=4),mr===null||!(Fu&268435455)&&!(T0&268435455)||Za(mr,Ar)}function Bg(n,e){var t=Vt;Vt|=2;var r=pT();(mr!==n||Ar!==e)&&(Ko=null,Tu(n,e));do try{nR();break}catch(i){fT(n,i)}while(1);if(J2(),Vt=t,Vg.current=r,tr!==null)throw Error(Fe(261));return mr=null,Ar=0,sr}function nR(){for(;tr!==null;)mT(tr)}function rR(){for(;tr!==null&&!NC();)mT(tr)}function mT(n){var e=yT(n.alternate,n,Ui);n.memoizedProps=n.pendingProps,e===null?gT(n):tr=e,u_.current=null}function gT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Jk(t,e),t!==null){t.flags&=32767,tr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{sr=6,tr=null;return}}else if(t=Qk(t,e,Ui),t!==null){tr=t;return}if(e=e.sibling,e!==null){tr=e;return}tr=e=n}while(e!==null);sr===0&&(sr=5)}function uu(n,e,t){var r=Yt,i=ms.transition;try{ms.transition=null,Yt=1,iR(n,e,t,r)}finally{ms.transition=i,Yt=r}return null}function iR(n,e,t,r){do dh();while(rl!==null);if(Vt&6)throw Error(Fe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Fe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(VC(n,s),n===mr&&(tr=mr=null,Ar=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||xm||(xm=!0,_T(Ig,function(){return dh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ms.transition,ms.transition=null;var o=Yt;Yt=1;var a=Vt;Vt|=4,u_.current=null,Xk(n,t),cT(t,n),Ak(iy),Ag=!!ry,iy=ry=null,n.current=t,Zk(t),PC(),Vt=a,Yt=o,ms.transition=s}else n.current=t;if(xm&&(xm=!1,rl=n,Ug=i),s=n.pendingLanes,s===0&&(fl=null),RC(t.stateNode),xi(n,zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(jg)throw jg=!1,n=Ay,Ay=null,n;return Ug&1&&n.tag!==0&&dh(),s=n.pendingLanes,s&1?n===xy?hf++:(hf=0,xy=n):hf=0,Dl(),null}function dh(){if(rl!==null){var n=QA(Ug),e=ms.transition,t=Yt;try{if(ms.transition=null,Yt=16>n?16:n,rl===null)var r=!1;else{if(n=rl,rl=null,Ug=0,Vt&6)throw Error(Fe(331));var i=Vt;for(Vt|=4,Xe=n.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var d=Xe;switch(d.tag){case 0:case 11:case 15:uf(8,d,s)}var p=d.child;if(p!==null)p.return=d,Xe=p;else for(;Xe!==null;){d=Xe;var v=d.sibling,g=d.return;if(aT(d),d===c){Xe=null;break}if(v!==null){v.return=g,Xe=v;break}Xe=g}}}var N=s.alternate;if(N!==null){var T=N.child;if(T!==null){N.child=null;do{var R=T.sibling;T.sibling=null,T=R}while(T!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uf(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Xe=w;break e}Xe=s.return}}var E=n.current;for(Xe=E;Xe!==null;){o=Xe;var L=o.child;if(o.subtreeFlags&2064&&L!==null)L.return=o,Xe=L;else e:for(o=E;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:x0(9,a)}}catch(G){Dn(a,a.return,G)}if(a===o){Xe=null;break e}var $=a.sibling;if($!==null){$.return=a.return,Xe=$;break e}Xe=a.return}}if(Vt=i,Dl(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(v0,n)}catch{}r=!0}return r}finally{Yt=t,ms.transition=e}}return!1}function Mb(n,e,t){e=Nh(t,e),e=Jx(n,e,1),n=dl(n,e,1),e=Zr(),n!==null&&(fp(n,1,e),xi(n,e))}function Dn(n,e,t){if(n.tag===3)Mb(n,n,t);else for(;e!==null;){if(e.tag===3){Mb(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fl===null||!fl.has(r))){n=Nh(t,n),n=Yx(e,n,1),e=dl(e,n,1),n=Zr(),e!==null&&(fp(e,1,n),xi(e,n));break}}e=e.return}}function sR(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Zr(),n.pingedLanes|=n.suspendedLanes&t,mr===n&&(Ar&t)===t&&(sr===4||sr===3&&(Ar&130023424)===Ar&&500>zn()-h_?Tu(n,0):c_|=t),xi(n,e)}function vT(n,e){e===0&&(n.mode&1?(e=mm,mm<<=1,!(mm&130023424)&&(mm=4194304)):e=1);var t=Zr();n=ia(n,e),n!==null&&(fp(n,e,t),xi(n,t))}function oR(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vT(n,t)}function aR(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),vT(n,t)}var yT;yT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ei.current)_i=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _i=!1,Kk(n,e,t);_i=!!(n.flags&131072)}else _i=!1,bn&&e.flags&1048576&&bx(e,kg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qm(n,e),n=e.pendingProps;var i=Ah(e,Br.current);hh(e,t),i=i_(null,e,r,n,i,t);var s=s_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(s=!0,Pg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z2(e),i.updater=E0,e.stateNode=i,i._reactInternals=e,fy(e,r,n,t),e=gy(null,e,r,!0,s,t)):(e.tag=0,bn&&s&&W2(e),Jr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Qm(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uR(r),n=Fs(r,n),i){case 0:e=my(null,e,r,n,t);break e;case 1:e=Sb(null,e,r,n,t);break e;case 11:e=xb(null,e,r,n,t);break e;case 14:e=Tb(null,e,r,Fs(r.type,n),t);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),my(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),Sb(n,e,r,i,t);case 3:e:{if(tT(e),n===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xx(n,e),Dg(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nh(Error(Fe(423)),e),e=Nb(n,e,r,t,i);break e}else if(r!==i){i=Nh(Error(Fe(424)),e),e=Nb(n,e,r,t,i);break e}else for(qi=hl(e.stateNode.containerInfo.firstChild),Gi=e,bn=!0,js=null,t=Px(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xh(),r===i){e=sa(n,e,t);break e}Jr(n,e,r,t)}e=e.child}return e;case 5:return Cx(e),n===null&&cy(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,sy(r,i)?o=null:s!==null&&sy(r,s)&&(e.flags|=32),eT(n,e),Jr(n,e,o,t),e.child;case 6:return n===null&&cy(e),null;case 13:return nT(n,e,t);case 4:return e_(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Th(e,null,r,t):Jr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),xb(n,e,r,i,t);case 7:return Jr(n,e,e.pendingProps,t),e.child;case 8:return Jr(n,e,e.pendingProps.children,t),e.child;case 12:return Jr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,hn(Rg,r._currentValue),r._currentValue=o,s!==null)if(qs(s.value,o)){if(s.children===i.children&&!Ei.current){e=sa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ea(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),hy(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),hy(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hh(e,t),i=vs(i),r=r(i),e.flags|=1,Jr(n,e,r,t),e.child;case 14:return r=e.type,i=Fs(r,e.pendingProps),i=Fs(r.type,i),Tb(n,e,r,i,t);case 15:return Xx(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),Qm(n,e),e.tag=1,Ai(r)?(n=!0,Pg(e)):n=!1,hh(e,t),Sx(e,r,i),fy(e,r,i,t),gy(null,e,r,!0,n,t);case 19:return rT(n,e,t);case 22:return Zx(n,e,t)}throw Error(Fe(156,e.tag))};function _T(n,e){return GA(n,e)}function lR(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(n,e,t,r){return new lR(n,e,t,r)}function m_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uR(n){if(typeof n=="function")return m_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D2)return 11;if(n===O2)return 14}return 2}function ml(n,e){var t=n.alternate;return t===null?(t=fs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Xm(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")m_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Kc:return Su(t.children,i,s,e);case L2:o=8,i|=8;break;case Mv:return n=fs(12,t,e,i|2),n.elementType=Mv,n.lanes=s,n;case Vv:return n=fs(13,t,e,i),n.elementType=Vv,n.lanes=s,n;case jv:return n=fs(19,t,e,i),n.elementType=jv,n.lanes=s,n;case NA:return S0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case TA:o=10;break e;case SA:o=9;break e;case D2:o=11;break e;case O2:o=14;break e;case Qa:o=16,r=null;break e}throw Error(Fe(130,n==null?n:typeof n,""))}return e=fs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Su(n,e,t,r){return n=fs(7,n,r,e),n.lanes=t,n}function S0(n,e,t,r){return n=fs(22,n,r,e),n.elementType=NA,n.lanes=t,n.stateNode={isHidden:!1},n}function sv(n,e,t){return n=fs(6,n,null,e),n.lanes=t,n}function ov(n,e,t){return e=fs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function cR(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=U1(0),this.expirationTimes=U1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function g_(n,e,t,r,i,s,o,a,l){return n=new cR(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z2(s),n}function hR(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function wT(n){if(!n)return _l;n=n._reactInternals;e:{if(Yu(n)!==n||n.tag!==1)throw Error(Fe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(n.tag===1){var t=n.type;if(Ai(t))return _x(n,t,e)}return e}function bT(n,e,t,r,i,s,o,a,l){return n=g_(t,r,!0,n,i,s,o,a,l),n.context=wT(null),t=n.current,r=Zr(),i=pl(t),s=ea(r,i),s.callback=e??null,dl(t,s,i),n.current.lanes=i,fp(n,i,r),xi(n,r),n}function N0(n,e,t,r){var i=e.current,s=Zr(),o=pl(i);return t=wT(t),e.context===null?e.context=t:e.pendingContext=t,e=ea(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=dl(i,e,o),n!==null&&(Bs(n,i,o,s),Wm(n,i,o)),o}function qg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Vb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function v_(n,e){Vb(n,e),(n=n.alternate)&&Vb(n,e)}function dR(){return null}var IT=typeof reportError=="function"?reportError:function(n){console.error(n)};function y_(n){this._internalRoot=n}P0.prototype.render=y_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Fe(409));N0(n,e,null,null)};P0.prototype.unmount=y_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Mu(function(){N0(null,n,null,null)}),e[ra]=null}};function P0(n){this._internalRoot=n}P0.prototype.unstable_scheduleHydration=function(n){if(n){var e=XA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Xa.length&&e!==0&&e<Xa[t].priority;t++);Xa.splice(t,0,n),t===0&&ex(n)}};function __(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function C0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jb(){}function fR(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=qg(o);s.call(c)}}var o=bT(e,r,n,0,null,!1,!1,"",jb);return n._reactRootContainer=o,n[ra]=o.current,Lf(n.nodeType===8?n.parentNode:n),Mu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=qg(l);a.call(c)}}var l=g_(n,0,!1,null,null,!1,!1,"",jb);return n._reactRootContainer=l,n[ra]=l.current,Lf(n.nodeType===8?n.parentNode:n),Mu(function(){N0(e,l,t,r)}),l}function k0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qg(o);a.call(l)}}N0(e,o,n,i)}else o=fR(t,e,n,i,r);return qg(o)}JA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Wd(e.pendingLanes);t!==0&&(V2(e,t|1),xi(e,zn()),!(Vt&6)&&(Ph=zn()+500,Dl()))}break;case 13:Mu(function(){var r=ia(n,1);if(r!==null){var i=Zr();Bs(r,n,1,i)}}),v_(n,1)}};j2=function(n){if(n.tag===13){var e=ia(n,134217728);if(e!==null){var t=Zr();Bs(e,n,134217728,t)}v_(n,134217728)}};YA=function(n){if(n.tag===13){var e=pl(n),t=ia(n,e);if(t!==null){var r=Zr();Bs(t,n,e,r)}v_(n,e)}};XA=function(){return Yt};ZA=function(n,e){var t=Yt;try{return Yt=n,e()}finally{Yt=t}};Qv=function(n,e,t){switch(e){case"input":if(qv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=b0(r);if(!i)throw Error(Fe(90));CA(r),qv(r,i)}}}break;case"textarea":RA(n,t);break;case"select":e=t.value,e!=null&&ah(n,!!t.multiple,e,!1)}};jA=d_;UA=Mu;var pR={usingClientEntryPoint:!1,Events:[mp,Xc,b0,MA,VA,d_]},kd={findFiberByHostInstance:_u,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mR={bundleType:kd.bundleType,version:kd.version,rendererPackageName:kd.rendererPackageName,rendererConfig:kd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zA(n),n===null?null:n.stateNode},findFiberByHostInstance:kd.findFiberByHostInstance||dR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{v0=Tm.inject(mR),mo=Tm}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pR;Qi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!__(e))throw Error(Fe(200));return hR(n,e,null,t)};Qi.createRoot=function(n,e){if(!__(n))throw Error(Fe(299));var t=!1,r="",i=IT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=g_(n,1,!1,null,null,t,!1,r,i),n[ra]=e.current,Lf(n.nodeType===8?n.parentNode:n),new y_(e)};Qi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Fe(188)):(n=Object.keys(n).join(","),Error(Fe(268,n)));return n=zA(e),n=n===null?null:n.stateNode,n};Qi.flushSync=function(n){return Mu(n)};Qi.hydrate=function(n,e,t){if(!C0(e))throw Error(Fe(200));return k0(null,n,e,!0,t)};Qi.hydrateRoot=function(n,e,t){if(!__(n))throw Error(Fe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=IT;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=bT(e,null,n,1,t??null,i,!1,s,o),n[ra]=e.current,Lf(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new P0(e)};Qi.render=function(n,e,t){if(!C0(e))throw Error(Fe(200));return k0(null,n,e,!1,t)};Qi.unmountComponentAtNode=function(n){if(!C0(n))throw Error(Fe(40));return n._reactRootContainer?(Mu(function(){k0(null,null,n,!1,function(){n._reactRootContainer=null,n[ra]=null})}),!0):!1};Qi.unstable_batchedUpdates=d_;Qi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!C0(t))throw Error(Fe(200));if(n==null||n._reactInternals===void 0)throw Error(Fe(38));return k0(n,e,t,!1,r)};Qi.version="18.2.0-next-9e3b772b8-20220608";function ET(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ET)}catch(n){console.error(n)}}ET(),bA.exports=Qi;var gR=bA.exports,Ub=gR;Ov.createRoot=Ub.createRoot,Ov.hydrateRoot=Ub.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let v=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(v=64)),r.push(t[d],t[p],t[v],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new yR;const v=s<<2|a>>4;if(r.push(v),c!==64){const g=a<<4&240|c>>2;if(r.push(g),p!==64){const N=c<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(n){const e=AT(n);return xT.encodeByteArray(e,!0)},zg=function(n){return _R(n).replace(/\./g,"")},w_=function(n){try{return xT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $g(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!wR(t)||(n[t]=$g(n[t],e[t]));return n}function wR(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>TT().__FIREBASE_DEFAULTS__,IR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ER=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&w_(n[1]);return e&&JSON.parse(e)},b_=()=>{try{return bR()||IR()||ER()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ST=()=>{var n;return(n=b_())===null||n===void 0?void 0:n.config},NT=n=>{var e;return(e=b_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[zg(JSON.stringify(t)),zg(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function I_(){var n;const e=(n=b_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TR(){return typeof window<"u"||CT()}function CT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function kT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function R0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RT(){const n=Bt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LT(){return!I_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qf(){try{return typeof indexedDB=="object"}catch{return!1}}function SR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="FirebaseError";class xr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NR,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new xr(i,a,r)}}function PR(n,e){return n.replace(CR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function kR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(qb(s)&&qb(o)){if(!zf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Kd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function A_(n,e){const t=new RR(n,e);return t.subscribe.bind(t)}class RR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");LR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=av),i.error===void 0&&(i.error=av),i.complete===void 0&&(i.complete=av);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function av(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n){return n&&n._delegate?n._delegate:n}class _s{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new AR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FR(e))try{this.getOrInitializeService({instanceIdentifier:cu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=cu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cu){return this.instances.has(e)}getOptions(e=cu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cu){return this.component?this.component.multipleInstances?e:cu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OR(n){return n===cu?void 0:n}function FR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=[];var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const OT={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},MR=Pt.INFO,VR={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},jR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=VR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vp{constructor(e){this.name=e,this._logLevel=MR,this._logHandler=jR,this._userLogHandler=null,x_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}function UR(n){x_.forEach(e=>{e.setLogLevel(n)})}function BR(n,e){for(const t of x_){let r=null;e&&e.level&&(r=OT[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:Pt[s].toLowerCase(),message:a,args:o,type:i.name})}}}const qR=(n,e)=>e.some(t=>n instanceof t);let zb,$b;function zR(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $R(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FT=new WeakMap,Ny=new WeakMap,MT=new WeakMap,lv=new WeakMap,T_=new WeakMap;function GR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(gl(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&FT.set(t,n)}).catch(()=>{}),T_.set(e,n),e}function WR(n){if(Ny.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ny.set(n,e)}let Py={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ny.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HR(n){Py=n(Py)}function KR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(uv(this),e,...t);return MT.set(r,e.sort?e.sort():[e]),gl(r)}:$R().includes(n)?function(...e){return n.apply(uv(this),e),gl(FT.get(this))}:function(...e){return gl(n.apply(uv(this),e))}}function QR(n){return typeof n=="function"?KR(n):(n instanceof IDBTransaction&&WR(n),qR(n,zR())?new Proxy(n,Py):n)}function gl(n){if(n instanceof IDBRequest)return GR(n);if(lv.has(n))return lv.get(n);const e=QR(n);return e!==n&&(lv.set(n,e),T_.set(e,n)),e}const uv=n=>T_.get(n);function JR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=gl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gl(o.result),l.oldVersion,l.newVersion,gl(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const YR=["get","getKey","getAll","getAllKeys","count"],XR=["put","add","delete","clear"],cv=new Map;function Gb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cv.get(e))return cv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=XR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YR.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return cv.set(e,s),s}HR(n=>({...n,get:(e,t,r)=>Gb(e,t)||n.get(e,t,r),has:(e,t)=>!!Gb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function eL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gg="@firebase/app",Cy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new vp("@firebase/app"),tL="@firebase/app-compat",nL="@firebase/analytics-compat",rL="@firebase/analytics",iL="@firebase/app-check-compat",sL="@firebase/app-check",oL="@firebase/auth",aL="@firebase/auth-compat",lL="@firebase/database",uL="@firebase/data-connect",cL="@firebase/database-compat",hL="@firebase/functions",dL="@firebase/functions-compat",fL="@firebase/installations",pL="@firebase/installations-compat",mL="@firebase/messaging",gL="@firebase/messaging-compat",vL="@firebase/performance",yL="@firebase/performance-compat",_L="@firebase/remote-config",wL="@firebase/remote-config-compat",bL="@firebase/storage",IL="@firebase/storage-compat",EL="@firebase/firestore",AL="@firebase/vertexai-preview",xL="@firebase/firestore-compat",TL="firebase",SL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="[DEFAULT]",NL={[Gg]:"fire-core",[tL]:"fire-core-compat",[rL]:"fire-analytics",[nL]:"fire-analytics-compat",[sL]:"fire-app-check",[iL]:"fire-app-check-compat",[oL]:"fire-auth",[aL]:"fire-auth-compat",[lL]:"fire-rtdb",[uL]:"fire-data-connect",[cL]:"fire-rtdb-compat",[hL]:"fire-fn",[dL]:"fire-fn-compat",[fL]:"fire-iid",[pL]:"fire-iid-compat",[mL]:"fire-fcm",[gL]:"fire-fcm-compat",[vL]:"fire-perf",[yL]:"fire-perf-compat",[_L]:"fire-rc",[wL]:"fire-rc-compat",[bL]:"fire-gcs",[IL]:"fire-gcs-compat",[EL]:"fire-fst",[xL]:"fire-fst-compat",[AL]:"fire-vertex","fire-js":"fire-js",[TL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Map,Ch=new Map,kh=new Map;function $f(n,e){try{n.container.addComponent(e)}catch(t){oa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function VT(n,e){n.container.addOrOverwriteComponent(e)}function wo(n){const e=n.name;if(kh.has(e))return oa.debug(`There were multiple attempts to register component ${e}.`),!1;kh.set(e,n);for(const t of bl.values())$f(t,n);for(const t of Ch.values())$f(t,n);return!0}function jT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function PL(n,e,t=wl){jT(n,e).clearInstance(t)}function UT(n){return n.options!==void 0}function an(n){return n.settings!==void 0}function CL(){kh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new To("app","Firebase",kL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL extends BT{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Wi(Gg,Cy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){N_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw gs.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=SL;function S_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gs.create("bad-app-name",{appName:String(i)});if(t||(t=ST()),!t)throw gs.create("no-options");const s=bl.get(i);if(s){if(zf(t,s.options)&&zf(r,s.config))return s;throw gs.create("duplicate-app",{appName:i})}const o=new DT(i);for(const l of kh.values())o.addComponent(l);const a=new BT(t,r,o);return bl.set(i,a),a}function LL(n,e){if(TR()&&!CT())throw gs.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;UT(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,p)=>Math.imul(31,d)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw gs.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Ch.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new DT(s);for(const c of kh.values())a.addComponent(c);const l=new RL(t,e,s,a);return Ch.set(s,l),l}function DL(n=wl){const e=bl.get(n);if(!e&&n===wl&&ST())return S_();if(!e)throw gs.create("no-app",{appName:n});return e}function OL(){return Array.from(bl.values())}async function N_(n){let e=!1;const t=n.name;bl.has(t)?(e=!0,bl.delete(t)):Ch.has(t)&&n.decRefCount()<=0&&(Ch.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Wi(n,e,t){var r;let i=(r=NL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oa.warn(a.join(" "));return}wo(new _s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function qT(n,e){if(n!==null&&typeof n!="function")throw gs.create("invalid-log-argument");BR(n,e)}function zT(n){UR(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="firebase-heartbeat-database",ML=1,Gf="firebase-heartbeat-store";let hv=null;function $T(){return hv||(hv=JR(FL,ML,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gf)}catch(t){console.warn(t)}}}}).catch(n=>{throw gs.create("idb-open",{originalErrorMessage:n.message})})),hv}async function VL(n){try{const t=(await $T()).transaction(Gf),r=await t.objectStore(Gf).get(GT(n));return await t.done,r}catch(e){if(e instanceof xr)oa.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oa.warn(t.message)}}}async function Wb(n,e){try{const r=(await $T()).transaction(Gf,"readwrite");await r.objectStore(Gf).put(e,GT(n)),await r.done}catch(t){if(t instanceof xr)oa.warn(t.message);else{const r=gs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});oa.warn(r.message)}}}function GT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=1024,UL=30*24*60*60*1e3;class BL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=UL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){oa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hb(),{heartbeatsToSend:r,unsentEntries:i}=qL(this._heartbeatsCache.heartbeats),s=zg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return oa.warn(t),""}}}function Hb(){return new Date().toISOString().substring(0,10)}function qL(n,e=jL){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Kb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Kb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class zL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qf()?SR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kb(n){return zg(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(n){wo(new _s("platform-logger",e=>new ZR(e),"PRIVATE")),wo(new _s("heartbeat",e=>new BL(e),"PRIVATE")),Wi(Gg,Cy,n),Wi(Gg,Cy,"esm2017"),Wi("fire-js","")}$L("");const GL=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:xr,SDK_VERSION:$s,_DEFAULT_ENTRY_NAME:wl,_addComponent:$f,_addOrOverwriteComponent:VT,_apps:bl,_clearComponents:CL,_components:kh,_getProvider:jT,_isFirebaseApp:UT,_isFirebaseServerApp:an,_registerComponent:wo,_removeServiceInstance:PL,_serverApps:Ch,deleteApp:N_,getApp:DL,getApps:OL,initializeApp:S_,initializeServerApp:LL,onLog:qT,registerVersion:Wi,setLogLevel:zT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,t){this._delegate=e,this.firebase=t,$f(e,new _s("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),N_(this._delegate)))}_getService(e,t=wl){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=wl){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){$f(this._delegate,e)}_addOrOverwriteComponent(e){VT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Qb=new To("app-compat","Firebase",HL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Wi,setLogLevel:zT,onLog:qT,apps:null,SDK_VERSION:$s,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:GL}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||wl,!Bb(e,c))throw Qb.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,d={}){const p=S_(c,d);if(Bb(e,p.name))return e[p.name];const v=new n(p,t);return e[p.name]=v,v}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,p=d.replace("-compat","");if(wo(c)&&c.type==="PUBLIC"){const v=(g=i())=>{if(typeof g[p]!="function")throw Qb.create("invalid-app-argument",{appName:d});return g[p]()};c.serviceProps!==void 0&&$g(v,c.serviceProps),t[p]=v,n.prototype[p]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?t[p]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){const n=KL(WL);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:WT,extendNamespace:e,createSubscribe:A_,ErrorFactory:To,deepExtend:$g});function e(t){$g(n,t)}return n}const QL=WT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new vp("@firebase/app-compat"),JL="@firebase/app-compat",YL="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){Wi(JL,YL,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=TT();if(n.firebase!==void 0){Jb.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Jb.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const bo=QL;XL();var ZL="firebase",e6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bo.registerVersion(ZL,e6,"app-compat");function yp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Rd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},kc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function HT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n6=t6,r6=HT,KT=new To("auth","Firebase",HT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new vp("@firebase/auth");function i6(n,...e){Wg.logLevel<=Pt.WARN&&Wg.warn(`Auth (${$s}): ${n}`,...e)}function Zm(n,...e){Wg.logLevel<=Pt.ERROR&&Wg.error(`Auth (${$s}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n,...e){throw C_(n,...e)}function or(n,...e){return C_(n,...e)}function P_(n,e,t){const r=Object.assign(Object.assign({},r6()),{[e]:t});return new To("auth","Firebase",r).create(e,{appName:n.name})}function gr(n){return P_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jh(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nr(n,"argument-error"),P_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function C_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return KT.create(n,...e)}function Ve(n,e,...t){if(!n)throw C_(e,...t)}function co(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zm(e),new Error(e)}function zs(n,e){n||co(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function k_(){return Yb()==="http:"||Yb()==="https:"}function Yb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k_()||E_()||"connection"in navigator)?navigator.onLine:!0}function o6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,zs(t>e,"Short delay should be less than long delay!"),this.isMobile=PT()||R0()}get(){return s6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n,e){zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QT=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;co("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;co("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;co("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=new _p(3e4,6e4);function Vn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function jn(n,e,t,r,i={}){return JT(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ol(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return kT()||(c.referrerPolicy="no-referrer"),QT.fetch()(YT(n,n.config.apiHost,t,a),c)})}async function JT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},a6),e);try{const i=new c6(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Qd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qd(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw P_(n,d,c);Nr(n,d)}}catch(i){if(i instanceof xr)throw i;Nr(n,"network-request-failed",{message:String(i)})}}async function ha(n,e,t,r,i={}){const s=await jn(n,e,t,r,i);return"mfaPendingCredential"in s&&Nr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function YT(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?R_(n.config,i):`${n.config.apiScheme}://${i}`}function u6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let c6=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),l6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Qd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=or(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n){return n!==void 0&&n.getResponse!==void 0}function Zb(n){return n!==void 0&&n.enterprise!==void 0}class h6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return u6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(n){return(await jn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function f6(n,e){return jn(n,"GET","/v2/recaptchaConfig",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(n,e){return jn(n,"POST","/v1/accounts:delete",e)}async function m6(n,e){return jn(n,"POST","/v1/accounts:update",e)}async function XT(n,e){return jn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g6(n,e=!1){const t=ot(n),r=await t.getIdToken(e),i=L0(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:df(dv(i.auth_time)),issuedAtTime:df(dv(i.iat)),expirationTime:df(dv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dv(n){return Number(n)*1e3}function L0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zm("JWT malformed, contained fewer than 3 sections"),null;try{const i=w_(t);return i?JSON.parse(i):(Zm("Failed to decode base64 JWT payload"),null)}catch(i){return Zm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eI(n){const e=L0(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof xr&&v6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function v6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y6=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ky=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=df(this.lastLoginAt),this.creationTime=df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await aa(n,XT(t,{idToken:r}));Ve(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZT(s.providerUserInfo):[],a=w6(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ky(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function _6(n){const e=ot(n);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZT(n){return n.map(e=>{var{providerId:t}=e,r=yp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,e){const t=await JT(n,{},async()=>{const r=Ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=YT(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",QT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I6(n,e){return jn(n,"POST","/v2/accounts:revokeToken",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv=class Ry{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=eI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await b6(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Ry;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ry,this.toJSON())}_performRefresh(){return co("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let Hg=class Jd{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ky(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await aa(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g6(this,e)}reload(){return _6(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await aa(this,p6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,E=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:L,emailVerified:$,isAnonymous:G,providerData:K,stsTokenManager:P}=t;Ve(L&&P,e,"internal-error");const I=fv.fromJSON(this.name,P);Ve(typeof L=="string",e,"internal-error"),za(p,e.name),za(v,e.name),Ve(typeof $=="boolean",e,"internal-error"),Ve(typeof G=="boolean",e,"internal-error"),za(g,e.name),za(N,e.name),za(T,e.name),za(R,e.name),za(w,e.name),za(E,e.name);const F=new Jd({uid:L,auth:e,email:v,emailVerified:$,displayName:p,isAnonymous:G,photoURL:N,phoneNumber:g,tenantId:T,stsTokenManager:I,createdAt:w,lastLoginAt:E});return K&&Array.isArray(K)&&(F.providerData=K.map(U=>Object.assign({},U))),R&&(F._redirectEventId=R),F}static async _fromIdTokenResponse(e,t,r=!1){const i=new fv;i.updateFromServerResponse(t);const s=new Jd({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ZT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new fv;a.updateFromIdToken(r);const l=new Jd({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ky(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Map;function zi(n){zs(n instanceof Function,"Expected a class definition");let e=tI.get(n);return e?(zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eS=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};eS.type="NONE";const Rh=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n,e,t){return`firebase:${n}:${e}:${t}`}let nI=class eg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new eg(zi(Rh),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||zi(Rh);const o=Nu(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){const p=Hg._fromJSON(e,d);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new eg(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new eg(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sS(e))return"Blackberry";if(oS(e))return"Webos";if(nS(e))return"Safari";if((e.includes("chrome/")||rS(e))&&!e.includes("edge/"))return"Chrome";if(wp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tS(n=Bt()){return/firefox\//i.test(n)}function nS(n=Bt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rS(n=Bt()){return/crios\//i.test(n)}function iS(n=Bt()){return/iemobile/i.test(n)}function wp(n=Bt()){return/android/i.test(n)}function sS(n=Bt()){return/blackberry/i.test(n)}function oS(n=Bt()){return/webos/i.test(n)}function bp(n=Bt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function E6(n=Bt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function A6(n=Bt()){var e;return bp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function x6(){return RT()&&document.documentMode===10}function aS(n=Bt()){return bp(n)||wp(n)||oS(n)||sS(n)||/windows phone/i.test(n)||iS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(n,e=[]){let t;switch(n){case"Browser":t=rI(Bt());break;case"Worker":t=`${rI(Bt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T6=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(n,e={}){return jn(n,"GET","/v2/passwordPolicy",Vn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=6;let P6=class{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:N6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C6=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iI(this),this.idTokenSubscription=new iI(this),this.beforeStateQueue=new T6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nI.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await XT(this,{idToken:e}),r=await Hg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(gr(this));const t=e?ot(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S6(this),t=new P6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await I6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await nI.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&i6(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}};function Fn(n){return ot(n)}let iI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=A_(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ip={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k6(n){Ip=n}function L_(n){return Ip.loadJS(n)}function R6(){return Ip.recaptchaV2Script}function L6(){return Ip.recaptchaEnterpriseScript}function D6(){return Ip.gapiScript}function uS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const O6="recaptcha-enterprise",F6="NO_RECAPTCHA";class M6{constructor(e){this.type=O6,this.auth=Fn(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{f6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new h6(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Zb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(F6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&Zb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=L6();l.length!==0&&(l+=a),L_(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function sI(n,e,t,r=!1){const i=new M6(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Kf(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await sI(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await sI(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}function V6(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(zi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j6(n,e,t){const r=Fn(n);Ve(r._canInitEmulator,r,"emulator-config-failed"),Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=cS(e),{host:o,port:a}=U6(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||B6()}function cS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function U6(n){const e=cS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:oI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:oI(o)}}}function oI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function B6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return co("not implemented")}_getIdTokenResponse(e){return co("not implemented")}_linkToIdToken(e,t){return co("not implemented")}_getReauthenticationResolver(e){return co("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(n,e){return jn(n,"POST","/v1/accounts:resetPassword",Vn(n,e))}async function q6(n,e){return jn(n,"POST","/v1/accounts:update",e)}async function z6(n,e){return jn(n,"POST","/v1/accounts:signUp",e)}async function $6(n,e){return jn(n,"POST","/v1/accounts:update",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(n,e){return ha(n,"POST","/v1/accounts:signInWithPassword",Vn(n,e))}async function D0(n,e){return jn(n,"POST","/v1/accounts:sendOobCode",Vn(n,e))}async function W6(n,e){return D0(n,e)}async function H6(n,e){return D0(n,e)}async function K6(n,e){return D0(n,e)}async function Q6(n,e){return D0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(n,e){return ha(n,"POST","/v1/accounts:signInWithEmailLink",Vn(n,e))}async function Y6(n,e){return ha(n,"POST","/v1/accounts:signInWithEmailLink",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Yh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Qf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,t,"signInWithPassword",G6);case"emailLink":return J6(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,r,"signUpPassword",z6);case"emailLink":return Y6(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(n,e){return ha(n,"POST","/v1/accounts:signInWithIdp",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="http://localhost";class Io extends Yh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=yp(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Io(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ta(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ta(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ta(e,t)}buildRequest(){const e={requestUri:X6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ol(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(n,e){return jn(n,"POST","/v1/accounts:sendVerificationCode",Vn(n,e))}async function eD(n,e){return ha(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,e))}async function tD(n,e){const t=await ha(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,e));if(t.temporaryProof)throw Qd(n,"account-exists-with-different-credential",t);return t}const nD={USER_NOT_FOUND:"user-not-found"};async function rD(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ha(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,t),nD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Yh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Pu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Pu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return eD(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return tD(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return rD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Pu({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sD(n){const e=sh(Kd(n)).link,t=e?sh(Kd(e)).deep_link_id:null,r=sh(Kd(n)).deep_link_id;return(r?sh(Kd(r)).link:null)||r||t||e||n}class O0{constructor(e){var t,r,i,s,o,a;const l=sh(Kd(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=iD((i=l.mode)!==null&&i!==void 0?i:null);Ve(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=sD(e);try{return new O0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,t){return Qf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=O0.parseLink(t);return Ve(r,"argument-error"),Qf._fromEmailAndCode(e,r.code,r.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends da{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fh extends Xh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Ve("providerId"in t&&"signInMethod"in t,"argument-error"),Io._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ve(e.idToken||e.accessToken,"argument-error"),Io._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new fh(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Xh{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Io._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ao.credential(t,r)}catch{return null}}}ao.GOOGLE_SIGN_IN_METHOD="google.com";ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Xh{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="http://localhost";class Lh extends Yh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ta(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ta(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ta(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new Lh(r,s)}static _create(e,t){return new Lh(e,t)}buildRequest(){return{requestUri:oD,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="saml.";class Kg extends da{constructor(e){Ve(e.startsWith(aD),"argument-error"),super(e)}static credentialFromResult(e){return Kg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Kg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Lh.fromJSON(e);return Ve(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Lh._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Xh{constructor(){super("twitter.com")}static credential(e,t){return Io._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return uo.credential(t,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(n,e){return ha(n,"POST","/v1/accounts:signUp",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Hg._fromIdTokenResponse(e,r,i),o=aI(r);return new ws({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aI(r);return new ws({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(n){var e;if(an(n.app))return Promise.reject(gr(n));const t=Fn(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new ws({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await dS(t,{returnSecureToken:!0}),i=await ws._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends xr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Qg(e,t,r,i)}}function fS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qg._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,e){const t=ot(n);await F0(!0,t,e);const{providerUserInfo:r}=await m6(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=pS(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function D_(n,e,t=!1){const r=await aa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ws._forOperation(n,"link",r)}async function F0(n,e,t){await Hf(e);const r=pS(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";Ve(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(n,e,t=!1){const{auth:r}=n;if(an(r.app))return Promise.reject(gr(r));const i="reauthenticate";try{const s=await aa(n,fS(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const o=L0(s.idToken);Ve(o,r,"internal-error");const{sub:a}=o;return Ve(n.uid===a,r,"user-mismatch"),ws._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(n,e,t=!1){if(an(n.app))return Promise.reject(gr(n));const r="signIn",i=await fS(n,r,e),s=await ws._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function M0(n,e){return gS(Fn(n),e)}async function vS(n,e){const t=ot(n);return await F0(!1,t,e.providerId),D_(t,e)}async function yS(n,e){return mS(ot(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,e){return ha(n,"POST","/v1/accounts:signInWithCustomToken",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(n,e){if(an(n.app))return Promise.reject(gr(n));const t=Fn(n),r=await cD(t,{token:e,returnSecureToken:!0}),i=await ws._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?O_._fromServerResponse(e,t):"totpInfo"in t?F_._fromServerResponse(e,t):Nr(e,"internal-error")}}class O_ extends Ep{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new O_(t)}}class F_ extends Ep{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new F_(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n,e,t){var r;Ve(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(n){const e=Fn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dD(n,e,t){const r=Fn(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&V0(r,i,t),await Kf(r,i,"getOobCode",H6)}async function fD(n,e,t){await hS(ot(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&M_(n),r})}async function pD(n,e){await $6(ot(n),{oobCode:e})}async function _S(n,e){const t=ot(n),r=await hS(t,{oobCode:e}),i=r.requestType;switch(Ve(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ve(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ve(r.mfaInfo,t,"internal-error");default:Ve(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Ep._fromServerResponse(Fn(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function mD(n,e){const{data:t}=await _S(ot(n),e);return t.email}async function gD(n,e,t){if(an(n.app))return Promise.reject(gr(n));const r=Fn(n),o=await Kf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&M_(n),l}),a=await ws._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function vD(n,e,t){return an(n.app)?Promise.reject(gr(n)):M0(ot(n),Fl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&M_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(n,e,t){const r=Fn(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){Ve(a.handleCodeInApp,r,"argument-error"),a&&V0(r,o,a)}s(i,t),await Kf(r,i,"getOobCode",K6)}function _D(n,e){const t=O0.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function wD(n,e,t){if(an(n.app))return Promise.reject(gr(n));const r=ot(n),i=Fl.credentialWithLink(e,t||Wf());return Ve(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),M0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(n,e){return jn(n,"POST","/v1/accounts:createAuthUri",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(n,e){const t=k_()?Wf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await bD(ot(n),r);return i||[]}async function ED(n,e){const t=ot(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&V0(t.auth,i,e);const{email:s}=await W6(t.auth,i);s!==n.email&&await n.reload()}async function AD(n,e,t){const r=ot(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&V0(r.auth,s,t);const{email:o}=await Q6(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n,e){return jn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ot(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await aa(r,xD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function SD(n,e){const t=ot(n);return an(t.auth.app)?Promise.reject(gr(t.auth)):wS(t,e,null)}function ND(n,e){return wS(ot(n),null,e)}async function wS(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await aa(n,q6(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=L0(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ph(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new CD(s,i);case"github.com":return new kD(s,i);case"google.com":return new RD(s,i);case"twitter.com":return new LD(s,i,n.screenName||null);case"custom":case"anonymous":return new ph(s,null);default:return new ph(s,r,i)}}class ph{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class bS extends ph{constructor(e,t,r,i){super(e,t,r),this.username=i}}class CD extends ph{constructor(e,t){super(e,"facebook.com",t)}}class kD extends bS{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class RD extends ph{constructor(e,t){super(e,"google.com",t)}}class LD extends bS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function DD(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:PD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Iu("enroll",e,t)}static _fromMfaPendingCredential(e){return new Iu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Iu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Iu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Fn(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Ep._fromServerResponse(r,a));Ve(i.mfaPendingCredential,r,"internal-error");const o=Iu._fromMfaPendingCredential(i.mfaPendingCredential);return new V_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const d=await ws._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return Ve(t.user,r,"internal-error"),ws._forOperation(t.user,t.operationType,c);default:Nr(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function OD(n,e){var t;const r=ot(n),i=e;return Ve(e.customData.operationType,r,"argument-error"),Ve((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),V_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:start",Vn(n,e))}function MD(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:finalize",Vn(n,e))}function VD(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Vn(n,e))}class j_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Ep._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new j_(e)}async getSession(){return Iu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await aa(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await aa(this.user,VD(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const pv=new WeakMap;function jD(n){const e=ot(n);return pv.has(e)||pv.set(e,j_._fromUser(e)),pv.get(e)}const Jg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jg,"1"),this.storage.removeItem(Jg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1e3,BD=10;class ES extends IS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);x6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},UD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ES.type="LOCAL";const U_=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS extends IS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AS.type="SESSION";const Vu=AS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new j0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await qD(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}j0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ap("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===c)switch(v.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function $D(n){er().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function GD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function HD(){return B_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebaseLocalStorageDb",KD=1,Yg="firebaseLocalStorage",TS="fbase_key";class xp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function U0(n,e){return n.transaction([Yg],e?"readwrite":"readonly").objectStore(Yg)}function QD(){const n=indexedDB.deleteDatabase(xS);return new xp(n).toPromise()}function Ly(){const n=indexedDB.open(xS,KD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Yg,{keyPath:TS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Yg)?e(r):(r.close(),await QD(),e(await Ly()))})})}async function lI(n,e,t){const r=U0(n,!0).put({[TS]:e,value:t});return new xp(r).toPromise()}async function JD(n,e){const t=U0(n,!1).get(e),r=await new xp(t).toPromise();return r===void 0?null:r.value}function uI(n,e){const t=U0(n,!0).delete(e);return new xp(t).toPromise()}const YD=800,XD=3;class SS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ly(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>XD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j0._getInstance(HD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await GD(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ly();return await lI(e,Jg,"1"),await uI(e,Jg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>JD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=U0(i,!1).getAll();return new xp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SS.type="LOCAL";const Jf=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n,e){return jn(n,"POST","/v2/accounts/mfaSignIn:start",Vn(n,e))}function eO(n,e){return jn(n,"POST","/v2/accounts/mfaSignIn:finalize",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=500,nO=6e4,Sm=1e12;class rO{constructor(e){this.auth=e,this.counter=Sm,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new iO(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Sm;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Sm;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Sm;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class iO{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ve(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sO(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},nO)},tO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sO(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=uS("rcb"),oO=new _p(3e4,6e4);class aO{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=er().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return Ve(lO(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Xb(er().grecaptcha)?Promise.resolve(er().grecaptcha):new Promise((r,i)=>{const s=er().setTimeout(()=>{i(or(e,"network-request-failed"))},oO.get());er()[mv]=()=>{er().clearTimeout(s),delete er()[mv];const a=er().grecaptcha;if(!a||!Xb(a)){i(or(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const p=l(c,d);return this.counter++,p},this.hostLanguage=t,r(a)};const o=`${R6()}?${Ol({onload:mv,render:"explicit",hl:t})}`;L_(o).catch(()=>{clearTimeout(s),i(or(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=er().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lO(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class uO{async load(e){return new rO(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="recaptcha",cO={theme:"light",type:"image"};let hO=class{constructor(e,t,r=Object.assign({},cO)){this.parameters=r,this.type=NS,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(e),this.isInvisible=this.parameters.size==="invisible",Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;Ve(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uO:new aO,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ve(!this.parameters.sitekey,this.auth,"argument-error"),Ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=er()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){Ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ve(k_()&&!B_(),this.auth,"internal-error"),await dO(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await d6(this.auth);Ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function dO(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Pu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function fO(n,e,t){if(an(n.app))return Promise.reject(gr(n));const r=Fn(n),i=await B0(r,e,ot(t));return new q_(i,s=>M0(r,s))}async function pO(n,e,t){const r=ot(n);await F0(!1,r,"phone");const i=await B0(r.auth,e,ot(t));return new q_(i,s=>vS(r,s))}async function mO(n,e,t){const r=ot(n);if(an(r.auth.app))return Promise.reject(gr(r.auth));const i=await B0(r.auth,e,ot(t));return new q_(i,s=>yS(r,s))}async function B0(n,e,t){var r;const i=await t.verify();try{Ve(typeof i=="string",n,"argument-error"),Ve(t.type===NS,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return Ve(o.type==="enroll",n,"internal-error"),(await FD(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ve(o.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return Ve(a,n,"missing-multi-factor-info"),(await ZD(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await Z6(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function gO(n,e){const t=ot(n);if(an(t.auth.app))return Promise.reject(gr(t.auth));await D_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=class tg{constructor(e){this.providerId=tg.PROVIDER_ID,this.auth=Fn(e)}verifyPhoneNumber(e,t){return B0(this.auth,e,ot(t))}static credential(e,t){return Pu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tg.credentialFromTaggedObject(t)}static credentialFromError(e){return tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Pu._fromTokenResponse(t,r):null}};ju.PROVIDER_ID="phone";ju.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n,e){return e?zi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_ extends Yh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ta(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vO(n){return gS(n.auth,new z_(n),n.bypassAuthState)}function yO(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),mS(t,new z_(n),n.bypassAuthState)}async function _O(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),D_(t,new z_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vO;case"linkViaPopup":case"linkViaRedirect":return _O;case"reauthViaPopup":case"reauthViaRedirect":return yO;default:Nr(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new _p(2e3,1e4);async function bO(n,e,t){if(an(n.app))return Promise.reject(or(n,"operation-not-supported-in-this-environment"));const r=Fn(n);Jh(n,e,da);const i=Xu(r,t);return new Xo(r,"signInViaPopup",e,i).executeNotNull()}async function IO(n,e,t){const r=ot(n);if(an(r.auth.app))return Promise.reject(or(r.auth,"operation-not-supported-in-this-environment"));Jh(r.auth,e,da);const i=Xu(r.auth,t);return new Xo(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function EO(n,e,t){const r=ot(n);Jh(r.auth,e,da);const i=Xu(r.auth,t);return new Xo(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Xo extends PS{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xo.currentPopupAction&&Xo.currentPopupAction.cancel(),Xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wO.get())};e()}}Xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="pendingRedirect",ff=new Map;class xO extends PS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ff.get(this.auth._key());if(!e){try{const r=await TO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ff.set(this.auth._key(),e)}return this.bypassAuthState||ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TO(n,e){const t=kS(e),r=CS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function $_(n,e){return CS(n)._set(kS(e),"true")}function SO(){ff.clear()}function G_(n,e){ff.set(n._key(),e)}function CS(n){return zi(n._redirectPersistence)}function kS(n){return Nu(AO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n,e,t){return PO(n,e,t)}async function PO(n,e,t){if(an(n.app))return Promise.reject(gr(n));const r=Fn(n);Jh(n,e,da),await r._initializationPromise;const i=Xu(r,t);return await $_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function CO(n,e,t){return kO(n,e,t)}async function kO(n,e,t){const r=ot(n);if(Jh(r.auth,e,da),an(r.auth.app))return Promise.reject(gr(r.auth));await r.auth._initializationPromise;const i=Xu(r.auth,t);await $_(i,r.auth);const s=await RS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function RO(n,e,t){return LO(n,e,t)}async function LO(n,e,t){const r=ot(n);Jh(r.auth,e,da),await r.auth._initializationPromise;const i=Xu(r.auth,t);await F0(!1,r,e.providerId),await $_(i,r.auth);const s=await RS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function DO(n,e){return await Fn(n)._initializationPromise,q0(n,e,!1)}async function q0(n,e,t=!1){if(an(n.app))return Promise.reject(gr(n));const r=Fn(n),i=Xu(r,e),o=await new xO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function RS(n){const e=Ap(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=10*60*1e3;class LS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!DS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(or(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OO&&this.cachedEventUids.clear(),this.cachedEventUids.has(cI(e))}saveEventToCache(e){this.cachedEventUids.add(cI(e)),this.lastProcessedEventTime=Date.now()}}function cI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(n,e={}){return jn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VO=/^https?/;async function jO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OS(n);for(const t of e)try{if(UO(t))return}catch{}Nr(n,"unauthorized-domain")}function UO(n){const e=Wf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!VO.test(t))return!1;if(MO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new _p(3e4,6e4);function hI(){const n=er().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qO(n){return new Promise((e,t)=>{var r,i,s;function o(){hI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hI(),t(or(n,"network-request-failed"))},timeout:BO.get()})}if(!((i=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=er().gapi)===null||s===void 0)&&s.load)o();else{const a=uS("iframefcb");return er()[a]=()=>{gapi.load?o():t(or(n,"network-request-failed"))},L_(`${D6()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw ng=null,e})}let ng=null;function zO(n){return ng=ng||qO(n),ng}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new _p(5e3,15e3),GO="__/auth/iframe",WO="emulator/auth/iframe",HO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QO(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?R_(e,WO):`https://${n.config.authDomain}/${GO}`,r={apiKey:e.apiKey,appName:n.name,v:$s},i=KO.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ol(r).slice(1)}`}async function JO(n){const e=await zO(n),t=er().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:QO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=or(n,"network-request-failed"),a=er().setTimeout(()=>{s(o)},$O.get());function l(){er().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XO=500,ZO=600,e8="_blank",t8="http://localhost";class dI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n8(n,e,t,r=XO,i=ZO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},YO),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Bt().toLowerCase();t&&(a=rS(c)?e8:t),tS(c)&&(e=e||t8,l.scrollbars="yes");const d=Object.entries(l).reduce((v,[g,N])=>`${v}${g}=${N},`,"");if(A6(c)&&a!=="_self")return r8(e||"",a),new dI(null);const p=window.open(e||"",a,d);Ve(p,n,"popup-blocked");try{p.focus()}catch{}return new dI(p)}function r8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="__/auth/handler",s8="emulator/auth/handler",o8=encodeURIComponent("fac");async function Dy(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$s,eventId:i};if(e instanceof da){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",kR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Xh){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${o8}=${encodeURIComponent(l)}`:"";return`${a8(n)}?${Ol(a).slice(1)}${c}`}function a8({config:n}){return n.emulator?R_(n,s8):`https://${n.authDomain}/${i8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="webStorageSupport";class l8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vu,this._completeRedirectFn=q0,this._overrideRedirectResult=G_}async _openPopup(e,t,r,i){var s;zs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Dy(e,t,r,Wf(),i);return n8(e,o,Ap())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Dy(e,t,r,Wf(),i);return $D(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(zs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await JO(e),r=new LS(e);return t.register("authEvent",i=>(Ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gv,{type:gv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gv];o!==void 0&&t(!!o),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aS()||nS()||bp()}}const u8=l8;class c8{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return co("unexpected MultiFactorSessionType")}}}class W_ extends c8{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new W_(e)}_finalizeEnroll(e,t,r){return MD(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return eO(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class FS{constructor(){}static assertion(e){return W_._fromCredential(e)}}FS.FACTOR_ID="phone";var fI="@firebase/auth",pI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h8=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f8(n){wo(new _s("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lS(n)},c=new C6(r,i,s,l);return V6(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wo(new _s("auth-internal",e=>{const t=Fn(e.getProvider("auth").getImmediate());return(r=>new h8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(fI,pI,d8(n)),Wi(fI,pI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=5*60;NT("authIdTokenMaxAge");function m8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}k6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=or("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",m8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f8("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=2e3;async function v8(n,e,t){var r;const{BuildInfo:i}=Uu();zs(e.sessionId,"AuthEvent did not contain a session ID");const s=await I8(e.sessionId),o={};return bp()?o.ibi=i.packageName:wp()?o.apn=i.packageName:Nr(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Dy(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function y8(n){const{BuildInfo:e}=Uu(),t={};bp()?t.iosBundleId=e.packageName:wp()?t.androidPackageName=e.packageName:Nr(n,"operation-not-supported-in-this-environment"),await OS(n,t)}function _8(n){const{cordova:e}=Uu();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,E6()?"_blank":"_system","location=yes"),t(i)})})}async function w8(n,e,t){const{cordova:r}=Uu();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var p;s();const v=(p=r.plugins.browsertab)===null||p===void 0?void 0:p.close;typeof v=="function"&&v(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(or(n,"redirect-cancelled-by-user"))},g8))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),wp()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function b8(n){var e,t,r,i,s,o,a,l,c,d;const p=Uu();Ve(typeof((e=p==null?void 0:p.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ve(typeof((t=p==null?void 0:p.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ve(typeof((s=(i=(r=p==null?void 0:p.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve(typeof((l=(a=(o=p==null?void 0:p.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve(typeof((d=(c=p==null?void 0:p.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function I8(n){const e=E8(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function E8(n){if(zs(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=20;class x8 extends LS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function T8(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:P8(),postBody:null,tenantId:n.tenantId,error:or(n,"no-auth-event")}}function S8(n,e){return Oy()._set(Fy(n),e)}async function mI(n){const e=await Oy()._get(Fy(n));return e&&await Oy()._remove(Fy(n)),e}function N8(n,e){var t,r;const i=k8(e);if(i.includes("/__/auth/callback")){const s=rg(i),o=s.firebaseError?C8(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?or(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function P8(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<A8;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Oy(){return zi(U_)}function Fy(n){return Nu("authEvent",n.config.apiKey,n.name)}function C8(n){try{return JSON.parse(n)}catch{return null}}function k8(n){const e=rg(n),t=e.link?decodeURIComponent(e.link):void 0,r=rg(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return rg(i).link||i||r||t||n}function rg(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return sh(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=500;class L8{constructor(){this._redirectPersistence=Vu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=q0,this._overrideRedirectResult=G_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new x8(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Nr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){b8(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),SO(),await this._originValidation(e);const o=T8(e,r,i);await S8(e,o);const a=await v8(e,o,t),l=await _8(a);return w8(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y8(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Uu(),o=setTimeout(async()=>{await mI(e),t.onEvent(gI())},R8),a=async d=>{clearTimeout(o);const p=await mI(e);let v=null;p&&(d!=null&&d.url)&&(v=N8(p,d.url)),t.onEvent(v||gI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Uu().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(p){console.error(p)}}}}const D8=L8;function gI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:or("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(n,e){Fn(n)._logFramework(e)}var F8="@firebase/auth-compat",M8="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=1e3;function pf(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function j8(){return pf()==="http:"||pf()==="https:"}function MS(n=Bt()){return!!((pf()==="file:"||pf()==="ionic:"||pf()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function U8(){return R0()||I_()}function B8(){return RT()&&(document==null?void 0:document.documentMode)===11}function q8(n=Bt()){return/Edge\/\d+/.test(n)}function z8(n=Bt()){return B8()||q8(n)}function VS(){try{const n=self.localStorage,e=Ap();if(n)return n.setItem(e,"1"),n.removeItem(e),z8()?qf():!0}catch{return H_()&&qf()}return!1}function H_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vv(){return(j8()||E_()||MS())&&!U8()&&VS()&&!H_()}function jS(){return MS()&&typeof document<"u"}async function $8(){return jS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},V8);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function G8(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi={LOCAL:"local",NONE:"none",SESSION:"session"},Ld=Ve,US="persistence";function W8(n,e){if(Ld(Object.values(Bi).includes(e),n,"invalid-persistence-type"),R0()){Ld(e!==Bi.SESSION,n,"unsupported-persistence-type");return}if(I_()){Ld(e===Bi.NONE,n,"unsupported-persistence-type");return}if(H_()){Ld(e===Bi.NONE||e===Bi.LOCAL&&qf(),n,"unsupported-persistence-type");return}Ld(e===Bi.NONE||VS(),n,"unsupported-persistence-type")}async function My(n){await n._initializationPromise;const e=BS(),t=Nu(US,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function H8(n,e){const t=BS();if(!t)return[];const r=Nu(US,n,e);switch(t.getItem(r)){case Bi.NONE:return[Rh];case Bi.LOCAL:return[Jf,Vu];case Bi.SESSION:return[Vu];default:return[]}}function BS(){var n;try{return((n=G8())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=Ve;class il{constructor(){this.browserResolver=zi(u8),this.cordovaResolver=zi(D8),this.underlyingResolver=null,this._redirectPersistence=Vu,this._completeRedirectFn=q0,this._overrideRedirectResult=G_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return jS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return K8(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await $8();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){return n.unwrap()}function Q8(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(n){return zS(n)}function Y8(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new X8(n,OD(n,e))}else if(r){const i=zS(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function zS(n){const{_tokenResponse:e}=n instanceof xr?n.customData:n;if(!e)return null;if(!(n instanceof xr)&&"temporaryProof"in e&&"phoneNumber"in e)return ju.credentialFromResult(n);const t=e.providerId;if(!t||t===Rd.PASSWORD)return null;let r;switch(t){case Rd.GOOGLE:r=ao;break;case Rd.FACEBOOK:r=oo;break;case Rd.GITHUB:r=lo;break;case Rd.TWITTER:r=uo;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?Lh._create(t,a):Io._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new fh(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof xr?r.credentialFromError(n):r.credentialFromResult(n)}function gi(n,e){return e.catch(t=>{throw t instanceof xr&&Y8(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:J8(t),additionalUserInfo:DD(t),user:z0.getOrCreate(i)}})}async function Vy(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>gi(n,t.confirm(r))}}class X8{constructor(e,t){this.resolver=t,this.auth=Q8(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gi(qS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z0=class Yd{constructor(e){this._delegate=e,this.multiFactor=jD(e)}static getOrCreate(e){return Yd.USER_MAP.has(e)||Yd.USER_MAP.set(e,new Yd(e)),Yd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gi(this.auth,vS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Vy(this.auth,pO(this._delegate,e,t))}async linkWithPopup(e){return gi(this.auth,EO(this._delegate,e,il))}async linkWithRedirect(e){return await My(Fn(this.auth)),RO(this._delegate,e,il)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gi(this.auth,yS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Vy(this.auth,mO(this._delegate,e,t))}reauthenticateWithPopup(e){return gi(this.auth,IO(this._delegate,e,il))}async reauthenticateWithRedirect(e){return await My(Fn(this.auth)),CO(this._delegate,e,il)}sendEmailVerification(e){return ED(this._delegate,e)}async unlink(e){return await uD(this._delegate,e),this}updateEmail(e){return SD(this._delegate,e)}updatePassword(e){return ND(this._delegate,e)}updatePhoneNumber(e){return gO(this._delegate,e)}updateProfile(e){return TD(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return AD(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};z0.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=Ve;class jy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Dd(r,"invalid-api-key",{appName:e.name}),Dd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?il:void 0;this._delegate=t.initialize({options:{persistence:Z8(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(n6),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z0.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){j6(this._delegate,e,t)}applyActionCode(e){return pD(this._delegate,e)}checkActionCode(e){return _S(this._delegate,e)}confirmPasswordReset(e,t){return fD(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gi(this._delegate,gD(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ID(this._delegate,e)}isSignInWithEmailLink(e){return _D(this._delegate,e)}async getRedirectResult(){Dd(vv(),this._delegate,"operation-not-supported-in-this-environment");const e=await DO(this._delegate,il);return e?gi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){O8(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=vI(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=vI(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return yD(this._delegate,e,t)}sendPasswordResetEmail(e,t){return dD(this._delegate,e,t||void 0)}async setPersistence(e){W8(this._delegate,e);let t;switch(e){case Bi.SESSION:t=Vu;break;case Bi.LOCAL:t=await zi(Jf)._isAvailable()?Jf:U_;break;case Bi.NONE:t=Rh;break;default:return Nr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gi(this._delegate,lD(this._delegate))}signInWithCredential(e){return gi(this._delegate,M0(this._delegate,e))}signInWithCustomToken(e){return gi(this._delegate,hD(this._delegate,e))}signInWithEmailAndPassword(e,t){return gi(this._delegate,vD(this._delegate,e,t))}signInWithEmailLink(e,t){return gi(this._delegate,wD(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Vy(this._delegate,fO(this._delegate,e,t))}async signInWithPopup(e){return Dd(vv(),this._delegate,"operation-not-supported-in-this-environment"),gi(this._delegate,bO(this._delegate,e,il))}async signInWithRedirect(e){return Dd(vv(),this._delegate,"operation-not-supported-in-this-environment"),await My(this._delegate),NO(this._delegate,e,il)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return mD(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}jy.Persistence=Bi;function vI(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&z0.getOrCreate(o)),error:e,complete:t}}function Z8(n,e){const t=H8(n,e);if(typeof self<"u"&&!t.includes(Jf)&&t.push(Jf),typeof window<"u")for(const r of[U_,Vu])t.includes(r)||t.push(r);return t.includes(Rh)||t.push(Rh),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.providerId="phone",this._delegate=new ju(qS(bo.auth()))}static credential(e,t){return ju.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}K_.PHONE_SIGN_IN_METHOD=ju.PHONE_SIGN_IN_METHOD;K_.PROVIDER_ID=ju.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=Ve;class tF{constructor(e,t,r=bo.app()){var i;eF((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new hO(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="auth-compat";function rF(n){n.INTERNAL.registerComponent(new _s(nF,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new jy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:kc.EMAIL_SIGNIN,PASSWORD_RESET:kc.PASSWORD_RESET,RECOVER_EMAIL:kc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:kc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:kc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:kc.VERIFY_EMAIL}},EmailAuthProvider:Fl,FacebookAuthProvider:oo,GithubAuthProvider:lo,GoogleAuthProvider:ao,OAuthProvider:fh,SAMLAuthProvider:Kg,PhoneAuthProvider:K_,PhoneMultiFactorGenerator:FS,RecaptchaVerifier:tF,TwitterAuthProvider:uo,Auth:jy,AuthCredential:Yh,Error:xr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(F8,M8)}rF(bo);var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cu,$S;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function F(){}F.prototype=I.prototype,P.D=I.prototype,P.prototype=new F,P.prototype.constructor=P,P.C=function(U,x,S){for(var k=Array(arguments.length-2),X=2;X<arguments.length;X++)k[X-2]=arguments[X];return I.prototype[x].apply(U,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,I,F){F||(F=0);var U=Array(16);if(typeof I=="string")for(var x=0;16>x;++x)U[x]=I.charCodeAt(F++)|I.charCodeAt(F++)<<8|I.charCodeAt(F++)<<16|I.charCodeAt(F++)<<24;else for(x=0;16>x;++x)U[x]=I[F++]|I[F++]<<8|I[F++]<<16|I[F++]<<24;I=P.g[0],F=P.g[1],x=P.g[2];var S=P.g[3],k=I+(S^F&(x^S))+U[0]+3614090360&4294967295;I=F+(k<<7&4294967295|k>>>25),k=S+(x^I&(F^x))+U[1]+3905402710&4294967295,S=I+(k<<12&4294967295|k>>>20),k=x+(F^S&(I^F))+U[2]+606105819&4294967295,x=S+(k<<17&4294967295|k>>>15),k=F+(I^x&(S^I))+U[3]+3250441966&4294967295,F=x+(k<<22&4294967295|k>>>10),k=I+(S^F&(x^S))+U[4]+4118548399&4294967295,I=F+(k<<7&4294967295|k>>>25),k=S+(x^I&(F^x))+U[5]+1200080426&4294967295,S=I+(k<<12&4294967295|k>>>20),k=x+(F^S&(I^F))+U[6]+2821735955&4294967295,x=S+(k<<17&4294967295|k>>>15),k=F+(I^x&(S^I))+U[7]+4249261313&4294967295,F=x+(k<<22&4294967295|k>>>10),k=I+(S^F&(x^S))+U[8]+1770035416&4294967295,I=F+(k<<7&4294967295|k>>>25),k=S+(x^I&(F^x))+U[9]+2336552879&4294967295,S=I+(k<<12&4294967295|k>>>20),k=x+(F^S&(I^F))+U[10]+4294925233&4294967295,x=S+(k<<17&4294967295|k>>>15),k=F+(I^x&(S^I))+U[11]+2304563134&4294967295,F=x+(k<<22&4294967295|k>>>10),k=I+(S^F&(x^S))+U[12]+1804603682&4294967295,I=F+(k<<7&4294967295|k>>>25),k=S+(x^I&(F^x))+U[13]+4254626195&4294967295,S=I+(k<<12&4294967295|k>>>20),k=x+(F^S&(I^F))+U[14]+2792965006&4294967295,x=S+(k<<17&4294967295|k>>>15),k=F+(I^x&(S^I))+U[15]+1236535329&4294967295,F=x+(k<<22&4294967295|k>>>10),k=I+(x^S&(F^x))+U[1]+4129170786&4294967295,I=F+(k<<5&4294967295|k>>>27),k=S+(F^x&(I^F))+U[6]+3225465664&4294967295,S=I+(k<<9&4294967295|k>>>23),k=x+(I^F&(S^I))+U[11]+643717713&4294967295,x=S+(k<<14&4294967295|k>>>18),k=F+(S^I&(x^S))+U[0]+3921069994&4294967295,F=x+(k<<20&4294967295|k>>>12),k=I+(x^S&(F^x))+U[5]+3593408605&4294967295,I=F+(k<<5&4294967295|k>>>27),k=S+(F^x&(I^F))+U[10]+38016083&4294967295,S=I+(k<<9&4294967295|k>>>23),k=x+(I^F&(S^I))+U[15]+3634488961&4294967295,x=S+(k<<14&4294967295|k>>>18),k=F+(S^I&(x^S))+U[4]+3889429448&4294967295,F=x+(k<<20&4294967295|k>>>12),k=I+(x^S&(F^x))+U[9]+568446438&4294967295,I=F+(k<<5&4294967295|k>>>27),k=S+(F^x&(I^F))+U[14]+3275163606&4294967295,S=I+(k<<9&4294967295|k>>>23),k=x+(I^F&(S^I))+U[3]+4107603335&4294967295,x=S+(k<<14&4294967295|k>>>18),k=F+(S^I&(x^S))+U[8]+1163531501&4294967295,F=x+(k<<20&4294967295|k>>>12),k=I+(x^S&(F^x))+U[13]+2850285829&4294967295,I=F+(k<<5&4294967295|k>>>27),k=S+(F^x&(I^F))+U[2]+4243563512&4294967295,S=I+(k<<9&4294967295|k>>>23),k=x+(I^F&(S^I))+U[7]+1735328473&4294967295,x=S+(k<<14&4294967295|k>>>18),k=F+(S^I&(x^S))+U[12]+2368359562&4294967295,F=x+(k<<20&4294967295|k>>>12),k=I+(F^x^S)+U[5]+4294588738&4294967295,I=F+(k<<4&4294967295|k>>>28),k=S+(I^F^x)+U[8]+2272392833&4294967295,S=I+(k<<11&4294967295|k>>>21),k=x+(S^I^F)+U[11]+1839030562&4294967295,x=S+(k<<16&4294967295|k>>>16),k=F+(x^S^I)+U[14]+4259657740&4294967295,F=x+(k<<23&4294967295|k>>>9),k=I+(F^x^S)+U[1]+2763975236&4294967295,I=F+(k<<4&4294967295|k>>>28),k=S+(I^F^x)+U[4]+1272893353&4294967295,S=I+(k<<11&4294967295|k>>>21),k=x+(S^I^F)+U[7]+4139469664&4294967295,x=S+(k<<16&4294967295|k>>>16),k=F+(x^S^I)+U[10]+3200236656&4294967295,F=x+(k<<23&4294967295|k>>>9),k=I+(F^x^S)+U[13]+681279174&4294967295,I=F+(k<<4&4294967295|k>>>28),k=S+(I^F^x)+U[0]+3936430074&4294967295,S=I+(k<<11&4294967295|k>>>21),k=x+(S^I^F)+U[3]+3572445317&4294967295,x=S+(k<<16&4294967295|k>>>16),k=F+(x^S^I)+U[6]+76029189&4294967295,F=x+(k<<23&4294967295|k>>>9),k=I+(F^x^S)+U[9]+3654602809&4294967295,I=F+(k<<4&4294967295|k>>>28),k=S+(I^F^x)+U[12]+3873151461&4294967295,S=I+(k<<11&4294967295|k>>>21),k=x+(S^I^F)+U[15]+530742520&4294967295,x=S+(k<<16&4294967295|k>>>16),k=F+(x^S^I)+U[2]+3299628645&4294967295,F=x+(k<<23&4294967295|k>>>9),k=I+(x^(F|~S))+U[0]+4096336452&4294967295,I=F+(k<<6&4294967295|k>>>26),k=S+(F^(I|~x))+U[7]+1126891415&4294967295,S=I+(k<<10&4294967295|k>>>22),k=x+(I^(S|~F))+U[14]+2878612391&4294967295,x=S+(k<<15&4294967295|k>>>17),k=F+(S^(x|~I))+U[5]+4237533241&4294967295,F=x+(k<<21&4294967295|k>>>11),k=I+(x^(F|~S))+U[12]+1700485571&4294967295,I=F+(k<<6&4294967295|k>>>26),k=S+(F^(I|~x))+U[3]+2399980690&4294967295,S=I+(k<<10&4294967295|k>>>22),k=x+(I^(S|~F))+U[10]+4293915773&4294967295,x=S+(k<<15&4294967295|k>>>17),k=F+(S^(x|~I))+U[1]+2240044497&4294967295,F=x+(k<<21&4294967295|k>>>11),k=I+(x^(F|~S))+U[8]+1873313359&4294967295,I=F+(k<<6&4294967295|k>>>26),k=S+(F^(I|~x))+U[15]+4264355552&4294967295,S=I+(k<<10&4294967295|k>>>22),k=x+(I^(S|~F))+U[6]+2734768916&4294967295,x=S+(k<<15&4294967295|k>>>17),k=F+(S^(x|~I))+U[13]+1309151649&4294967295,F=x+(k<<21&4294967295|k>>>11),k=I+(x^(F|~S))+U[4]+4149444226&4294967295,I=F+(k<<6&4294967295|k>>>26),k=S+(F^(I|~x))+U[11]+3174756917&4294967295,S=I+(k<<10&4294967295|k>>>22),k=x+(I^(S|~F))+U[2]+718787259&4294967295,x=S+(k<<15&4294967295|k>>>17),k=F+(S^(x|~I))+U[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(x+(k<<21&4294967295|k>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+S&4294967295}r.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var F=I-this.blockSize,U=this.B,x=this.h,S=0;S<I;){if(x==0)for(;S<=F;)i(this,P,S),S+=this.blockSize;if(typeof P=="string"){for(;S<I;)if(U[x++]=P.charCodeAt(S++),x==this.blockSize){i(this,U),x=0;break}}else for(;S<I;)if(U[x++]=P[S++],x==this.blockSize){i(this,U),x=0;break}}this.h=x,this.o+=I},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var F=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=F&255,F/=256;for(this.u(P),P=Array(16),I=F=0;4>I;++I)for(var U=0;32>U;U+=8)P[F++]=this.g[I]>>>U&255;return P};function s(P,I){var F=a;return Object.prototype.hasOwnProperty.call(F,P)?F[P]:F[P]=I(P)}function o(P,I){this.h=I;for(var F=[],U=!0,x=P.length-1;0<=x;x--){var S=P[x]|0;U&&S==I||(F[x]=S,U=!1)}this.g=F}var a={};function l(P){return-128<=P&&128>P?s(P,function(I){return new o([I|0],0>I?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return R(c(-P));for(var I=[],F=1,U=0;P>=F;U++)I[U]=P/F|0,F*=4294967296;return new o(I,0)}function d(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return R(d(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=c(Math.pow(I,8)),U=p,x=0;x<P.length;x+=8){var S=Math.min(8,P.length-x),k=parseInt(P.substring(x,x+S),I);8>S?(S=c(Math.pow(I,S)),U=U.j(S).add(c(k))):(U=U.j(F),U=U.add(c(k)))}return U}var p=l(0),v=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-R(this).m();for(var P=0,I=1,F=0;F<this.g.length;F++){var U=this.i(F);P+=(0<=U?U:4294967296+U)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N(this))return"0";if(T(this))return"-"+R(this).toString(P);for(var I=c(Math.pow(P,6)),F=this,U="";;){var x=$(F,I).g;F=w(F,x.j(I));var S=((0<F.g.length?F.g[0]:F.h)>>>0).toString(P);if(F=x,N(F))return S+U;for(;6>S.length;)S="0"+S;U=S+U}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function N(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function T(P){return P.h==-1}n.l=function(P){return P=w(this,P),T(P)?-1:N(P)?0:1};function R(P){for(var I=P.g.length,F=[],U=0;U<I;U++)F[U]=~P.g[U];return new o(F,~P.h).add(v)}n.abs=function(){return T(this)?R(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),F=[],U=0,x=0;x<=I;x++){var S=U+(this.i(x)&65535)+(P.i(x)&65535),k=(S>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);U=k>>>16,S&=65535,k&=65535,F[x]=k<<16|S}return new o(F,F[F.length-1]&-2147483648?-1:0)};function w(P,I){return P.add(R(I))}n.j=function(P){if(N(this)||N(P))return p;if(T(this))return T(P)?R(this).j(R(P)):R(R(this).j(P));if(T(P))return R(this.j(R(P)));if(0>this.l(g)&&0>P.l(g))return c(this.m()*P.m());for(var I=this.g.length+P.g.length,F=[],U=0;U<2*I;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var x=0;x<P.g.length;x++){var S=this.i(U)>>>16,k=this.i(U)&65535,X=P.i(x)>>>16,ge=P.i(x)&65535;F[2*U+2*x]+=k*ge,E(F,2*U+2*x),F[2*U+2*x+1]+=S*ge,E(F,2*U+2*x+1),F[2*U+2*x+1]+=k*X,E(F,2*U+2*x+1),F[2*U+2*x+2]+=S*X,E(F,2*U+2*x+2)}for(U=0;U<I;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=I;U<2*I;U++)F[U]=0;return new o(F,0)};function E(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function L(P,I){this.g=P,this.h=I}function $(P,I){if(N(I))throw Error("division by zero");if(N(P))return new L(p,p);if(T(P))return I=$(R(P),I),new L(R(I.g),R(I.h));if(T(I))return I=$(P,R(I)),new L(R(I.g),I.h);if(30<P.g.length){if(T(P)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var F=v,U=I;0>=U.l(P);)F=G(F),U=G(U);var x=K(F,1),S=K(U,1);for(U=K(U,2),F=K(F,2);!N(U);){var k=S.add(U);0>=k.l(P)&&(x=x.add(F),S=k),U=K(U,1),F=K(F,1)}return I=w(P,x.j(I)),new L(x,I)}for(x=p;0<=P.l(I);){for(F=Math.max(1,Math.floor(P.m()/I.m())),U=Math.ceil(Math.log(F)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),S=c(F),k=S.j(I);T(k)||0<k.l(P);)F-=U,S=c(F),k=S.j(I);N(S)&&(S=v),x=x.add(S),P=w(P,k)}return new L(x,P)}n.A=function(P){return $(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),F=[],U=0;U<I;U++)F[U]=this.i(U)&P.i(U);return new o(F,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),F=[],U=0;U<I;U++)F[U]=this.i(U)|P.i(U);return new o(F,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),F=[],U=0;U<I;U++)F[U]=this.i(U)^P.i(U);return new o(F,this.h^P.h)};function G(P){for(var I=P.g.length+1,F=[],U=0;U<I;U++)F[U]=P.i(U)<<1|P.i(U-1)>>>31;return new o(F,P.h)}function K(P,I){var F=I>>5;I%=32;for(var U=P.g.length-F,x=[],S=0;S<U;S++)x[S]=0<I?P.i(S+F)>>>I|P.i(S+F+1)<<32-I:P.i(S+F);return new o(x,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$S=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Cu=o}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GS,Xd,WS,ig,Uy,HS,KS,QS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,A){return h==Array.prototype||h==Object.prototype||(h[_]=A.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nm=="object"&&Nm];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function i(h,_){if(_)e:{var A=r;h=h.split(".");for(var B=0;B<h.length-1;B++){var ie=h[B];if(!(ie in A))break e;A=A[ie]}h=h[h.length-1],B=A[h],_=_(B),_!=B&&_!=null&&e(A,h,{configurable:!0,writable:!0,value:_})}}function s(h,_){h instanceof String&&(h+="");var A=0,B=!1,ie={next:function(){if(!B&&A<h.length){var de=A++;return{value:_(de,h[de]),done:!1}}return B=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}i("Array.prototype.values",function(h){return h||function(){return s(this,function(_,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function c(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,A){return h.call.apply(h.bind,arguments)}function p(h,_,A){if(!h)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,B),h.apply(_,ie)}}return function(){return h.apply(_,arguments)}}function v(h,_,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function g(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var B=A.slice();return B.push.apply(B,arguments),h.apply(this,B)}}function N(h,_){function A(){}A.prototype=_.prototype,h.aa=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(B,ie,de){for(var Le=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)Le[_t-2]=arguments[_t];return _.prototype[ie].apply(B,Le)}}function T(h){const _=h.length;if(0<_){const A=Array(_);for(let B=0;B<_;B++)A[B]=h[B];return A}return[]}function R(h,_){for(let A=1;A<arguments.length;A++){const B=arguments[A];if(l(B)){const ie=h.length||0,de=B.length||0;h.length=ie+de;for(let Le=0;Le<de;Le++)h[ie+Le]=B[Le]}else h.push(B)}}class w{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function E(h){return/^[\s\xa0]*$/.test(h)}function L(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function $(h){return $[" "](h),h}$[" "]=function(){};var G=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function K(h,_,A){for(const B in h)_.call(A,h[B],B,h)}function P(h,_){for(const A in h)_.call(void 0,h[A],A,h)}function I(h){const _={};for(const A in h)_[A]=h[A];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let A,B;for(let ie=1;ie<arguments.length;ie++){B=arguments[ie];for(A in B)h[A]=B[A];for(let de=0;de<F.length;de++)A=F[de],Object.prototype.hasOwnProperty.call(B,A)&&(h[A]=B[A])}}function x(h){var _=1;h=h.split(":");const A=[];for(;0<_&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function S(h){a.setTimeout(()=>{throw h},0)}function k(){var h=le;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class X{constructor(){this.h=this.g=null}add(_,A){const B=ge.get();B.set(_,A),this.h?this.h.next=B:this.g=B,this.h=B}}var ge=new w(()=>new ve,h=>h.reset());class ve{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Z=!1,le=new X,ce=()=>{const h=a.Promise.resolve(void 0);be=()=>{h.then(Ne)}};var Ne=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(A){S(A)}var _=ge;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Z=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};a.addEventListener("test",A,_),a.removeEventListener("test",A,_)}catch{}return h}();function ee(h,_){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,B=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{$(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ee.aa.h.call(this)}}N(ee,W);var se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ye=0;function _e(h,_,A,B,ie){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!B,this.ha=ie,this.key=++ye,this.da=this.fa=!1}function Me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h){this.src=h,this.g={},this.h=0}De.prototype.add=function(h,_,A,B,ie){var de=h.toString();h=this.g[de],h||(h=this.g[de]=[],this.h++);var Le=Ue(h,_,B,ie);return-1<Le?(_=h[Le],A||(_.fa=!1)):(_=new _e(_,this.src,de,!!B,ie),_.fa=A,h.push(_)),_};function ze(h,_){var A=_.type;if(A in h.g){var B=h.g[A],ie=Array.prototype.indexOf.call(B,_,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(B,ie,1),de&&(Me(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function Ue(h,_,A,B){for(var ie=0;ie<h.length;++ie){var de=h[ie];if(!de.da&&de.listener==_&&de.capture==!!A&&de.ha==B)return ie}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Ae={};function Y(h,_,A,B,ie){if(B&&B.once)return Oe(h,_,A,B,ie);if(Array.isArray(_)){for(var de=0;de<_.length;de++)Y(h,_[de],A,B,ie);return null}return A=xt(A),h&&h[he]?h.K(_,A,c(B)?!!B.capture:!!B,ie):yt(h,_,A,!1,B,ie)}function yt(h,_,A,B,ie,de){if(!_)throw Error("Invalid event type");var Le=c(ie)?!!ie.capture:!!ie,_t=mt(h);if(_t||(h[lt]=_t=new De(h)),A=_t.add(_,A,B,Le,de),A.proxy)return A;if(B=tt(),A.proxy=B,B.src=h,B.listener=A,h.addEventListener)J||(ie=Le),ie===void 0&&(ie=!1),h.addEventListener(_.toString(),B,ie);else if(h.attachEvent)h.attachEvent($e(_.toString()),B);else if(h.addListener&&h.removeListener)h.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return A}function tt(){function h(A){return _.call(h.src,h.listener,A)}const _=at;return h}function Oe(h,_,A,B,ie){if(Array.isArray(_)){for(var de=0;de<_.length;de++)Oe(h,_[de],A,B,ie);return null}return A=xt(A),h&&h[he]?h.L(_,A,c(B)?!!B.capture:!!B,ie):yt(h,_,A,!0,B,ie)}function je(h,_,A,B,ie){if(Array.isArray(_))for(var de=0;de<_.length;de++)je(h,_[de],A,B,ie);else B=c(B)?!!B.capture:!!B,A=xt(A),h&&h[he]?(h=h.i,_=String(_).toString(),_ in h.g&&(de=h.g[_],A=Ue(de,A,B,ie),-1<A&&(Me(de[A]),Array.prototype.splice.call(de,A,1),de.length==0&&(delete h.g[_],h.h--)))):h&&(h=mt(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ue(_,A,B,ie)),(A=-1<h?_[h]:null)&&We(A))}function We(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[he])ze(_.i,h);else{var A=h.type,B=h.proxy;_.removeEventListener?_.removeEventListener(A,B,h.capture):_.detachEvent?_.detachEvent($e(A),B):_.addListener&&_.removeListener&&_.removeListener(B),(A=mt(_))?(ze(A,h),A.h==0&&(A.src=null,_[lt]=null)):Me(h)}}}function $e(h){return h in Ae?Ae[h]:Ae[h]="on"+h}function at(h,_){if(h.da)h=!0;else{_=new ee(_,this);var A=h.listener,B=h.ha||h.src;h.fa&&We(h),h=A.call(B,_)}return h}function mt(h){return h=h[lt],h instanceof De?h:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(h){return typeof h=="function"?h:(h[bt]||(h[bt]=function(_){return h.handleEvent(_)}),h[bt])}function dt(){M.call(this),this.i=new De(this),this.M=this,this.F=null}N(dt,M),dt.prototype[he]=!0,dt.prototype.removeEventListener=function(h,_,A,B){je(this,h,_,A,B)};function It(h,_){var A,B=h.F;if(B)for(A=[];B;B=B.F)A.push(B);if(h=h.M,B=_.type||_,typeof _=="string")_=new W(_,h);else if(_ instanceof W)_.target=_.target||h;else{var ie=_;_=new W(B,h),U(_,ie)}if(ie=!0,A)for(var de=A.length-1;0<=de;de--){var Le=_.g=A[de];ie=ct(Le,B,!0,_)&&ie}if(Le=_.g=h,ie=ct(Le,B,!0,_)&&ie,ie=ct(Le,B,!1,_)&&ie,A)for(de=0;de<A.length;de++)Le=_.g=A[de],ie=ct(Le,B,!1,_)&&ie}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var A=h.g[_],B=0;B<A.length;B++)Me(A[B]);delete h.g[_],h.h--}}this.F=null},dt.prototype.K=function(h,_,A,B){return this.i.add(String(h),_,!1,A,B)},dt.prototype.L=function(h,_,A,B){return this.i.add(String(h),_,!0,A,B)};function ct(h,_,A,B){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,de=0;de<_.length;++de){var Le=_[de];if(Le&&!Le.da&&Le.capture==A){var _t=Le.listener,Wt=Le.ha||Le.src;Le.fa&&ze(h.i,Le),ie=_t.call(Wt,B)!==!1&&ie}}return ie&&!B.defaultPrevented}function Nt(h,_,A){if(typeof h=="function")A&&(h=v(h,A));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function Ke(h){h.g=Nt(()=>{h.g=null,h.i&&(h.i=!1,Ke(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class lr extends M{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ct(h){M.call(this),this.h=h,this.g={}}N(Ct,M);var si=[];function $t(h){K(h.g,function(_,A){this.g.hasOwnProperty(A)&&We(_)},h),h.g={}}Ct.prototype.N=function(){Ct.aa.N.call(this),$t(this)},Ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=a.JSON.stringify,Yi=a.JSON.parse,jt=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function bs(){}bs.prototype.h=null;function fn(h){return h.h||(h.h=h.i())}function oi(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ln(){W.call(this,"d")}N(ln,W);function gt(){W.call(this,"c")}N(gt,W);var kt={},Hs=null;function Pn(){return Hs=Hs||new dt}kt.La="serverreachability";function Si(h){W.call(this,kt.La,h)}N(Si,W);function Pr(h){const _=Pn();It(_,new Si(_))}kt.STAT_EVENT="statevent";function ut(h,_){W.call(this,kt.STAT_EVENT,h),this.stat=_}N(ut,W);function nn(h){const _=Pn();It(_,new ut(_,h))}kt.Ma="timingevent";function Ni(h,_){W.call(this,kt.Ma,h),this.size=_}N(Ni,W);function Jn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function Cn(h,_,A,B,ie,de){h.info(function(){if(h.g)if(de)for(var Le="",_t=de.split("&"),Wt=0;Wt<_t.length;Wt++){var wt=_t[Wt].split("=");if(1<wt.length){var rn=wt[0];wt=wt[1];var Un=rn.split("_");Le=2<=Un.length&&Un[1]=="type"?Le+(rn+"="+wt+"&"):Le+(rn+"=redacted&")}}else Le=null;else Le=de;return"XMLHTTP REQ ("+B+") [attempt "+ie+"]: "+_+`
`+A+`
`+Le})}function $r(h,_,A,B,ie,de,Le){h.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ie+"]: "+_+`
`+A+`
`+de+" "+Le})}function Pi(h,_,A,B){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ci(h,A)+(B?" "+B:"")})}function Is(h,_){h.info(function(){return"TIMEOUT: "+_})}pn.prototype.info=function(){};function Ci(h,_){if(!h.g)return _;if(!_)return null;try{var A=JSON.parse(_);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var B=A[h];if(!(2>B.length)){var ie=B[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Le=1;Le<ie.length;Le++)ie[Le]=""}}}}return Xt(A)}catch{return _}}var Cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function vr(){}N(vr,bs),vr.prototype.g=function(){return new XMLHttpRequest},vr.prototype.i=function(){return{}},li=new vr;function nr(h,_,A,B){this.j=h,this.i=_,this.l=A,this.R=B||1,this.U=new Ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}var Po={},Qs={};function Js(h,_,A){h.L=1,h.v=wa(ci(_)),h.m=A,h.P=!0,Co(h,null)}function Co(h,_){h.F=Date.now(),ga(h),h.A=ci(h.v);var A=h.A,B=h.R;Array.isArray(B)||(B=[String(B)]),hc(A.i,"t",B),h.C=0,A=h.j.J,h.h=new Ks,h.g=Q(h.j,A?_:null,!h.m),0<h.O&&(h.M=new lr(v(h.Y,h,h.g),h.O)),_=h.U,A=h.g,B=h.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(si[0]=ie.toString()),ie=si);for(var de=0;de<ie.length;de++){var Le=Y(A,ie[de],B||_.handleEvent,!1,_.h||_);if(!Le)break;_.g[Le.key]=Le}_=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Pr(),Cn(h.i,h.u,h.A,h.l,h.R,h.m)}nr.prototype.ca=function(h){h=h.target;const _=this.M;_&&Di(h)==3?_.j():this.Y(h)},nr.prototype.Y=function(h){try{if(h==this.g)e:{const Un=Di(this.g);var _=this.g.Ba();const rs=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Ts(this.g)))){this.J||Un!=4||_==7||(_==8||0>=rs?Pr(3):Pr(2)),va(this);var A=this.g.Z();this.X=A;t:if(Bl(this)){var B=Ts(this.g);h="";var ie=B.length,de=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Ro(this);var Le="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,h+=this.h.i.decode(B[_],{stream:!(de&&_==ie-1)});B.length=0,this.h.g+=h,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=A==200,$r(this.i,this.u,this.A,this.l,this.R,Un,A),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,Wt=this.g;if((_t=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_t)){var wt=_t;break t}}wt=null}if(A=wt)Pi(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,A);else{this.o=!1,this.s=3,nn(12),ki(this),Ro(this);break e}}if(this.P){A=!0;let yr;for(;!this.J&&this.C<Le.length;)if(yr=ad(this,Le),yr==Qs){Un==4&&(this.s=4,nn(14),A=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==Po){this.s=4,nn(15),Pi(this.i,this.l,Le,"[Invalid Chunk]"),A=!1;break}else Pi(this.i,this.l,yr,null),ql(this,yr);if(Bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||Le.length!=0||this.h.h||(this.s=1,nn(16),A=!1),this.o=this.o&&A,!A)Pi(this.i,this.l,Le,"[Invalid Chunked Response]"),ki(this),Ro(this);else if(0<Le.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),eu(rn),rn.M=!0,nn(11))}}else Pi(this.i,this.l,Le,null),ql(this,Le);Un==4&&ki(this),this.o&&!this.J&&(Un==4?Ca(this.j,this):(this.o=!1,ga(this)))}else Oi(this.g),A==400&&0<Le.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),ki(this),Ro(this)}}}catch{}finally{}};function Bl(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ad(h,_){var A=h.C,B=_.indexOf(`
`,A);return B==-1?Qs:(A=Number(_.substring(A,B)),isNaN(A)?Po:(B+=1,B+A>_.length?Qs:(_=_.slice(B,B+A),h.C=B+A,_)))}nr.prototype.cancel=function(){this.J=!0,ki(this)};function ga(h){h.S=Date.now()+h.I,ko(h,h.I)}function ko(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Jn(v(h.ba,h),_)}function va(h){h.B&&(a.clearTimeout(h.B),h.B=null)}nr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Is(this.i,this.A),this.L!=2&&(Pr(),nn(17)),ki(this),this.s=2,Ro(this)):ko(this,this.S-h)};function Ro(h){h.j.G==0||h.J||Ca(h.j,h)}function ki(h){va(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,$t(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function ql(h,_){try{var A=h.j;if(A.G!=0&&(A.g==h||mn(A.h,h))){if(!h.K&&mn(A.h,h)&&A.G==3){try{var B=A.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ie=B;if(ie[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)ns(A),Ns(A);else break e;Pa(A),nn(18)}}else A.za=ie[1],0<A.za-A.T&&37500>ie[2]&&A.F&&A.v==0&&!A.C&&(A.C=Jn(v(A.Za,A),6e3));if(1>=ac(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Fi(A,11)}else if((h.K||A.g==h)&&ns(A),!E(_))for(ie=A.Da.g.parse(_),_=0;_<ie.length;_++){let wt=ie[_];if(A.T=wt[0],wt=wt[1],A.G==2)if(wt[0]=="c"){A.K=wt[1],A.ia=wt[2];const rn=wt[3];rn!=null&&(A.la=rn,A.j.info("VER="+A.la));const Un=wt[4];Un!=null&&(A.Aa=Un,A.j.info("SVER="+A.Aa));const rs=wt[5];rs!=null&&typeof rs=="number"&&0<rs&&(B=1.5*rs,A.L=B,A.j.info("backChannelRequestTimeoutMs_="+B)),B=A;const yr=h.g;if(yr){const Cs=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var de=B.h;de.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(ya(de,de.h),de.h=null))}if(B.D){const Vo=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(B.ya=Vo,Gt(B.I,B.D,Vo))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),B=A;var Le=h;if(B.qa=D(B,B.J?B.ia:null,B.W),Le.K){zl(B.h,Le);var _t=Le,Wt=B.L;Wt&&(_t.I=Wt),_t.B&&(va(_t),ga(_t)),B.g=Le}else Na(B);0<A.i.length&&Zs(A)}else wt[0]!="stop"&&wt[0]!="close"||Fi(A,7);else A.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Fi(A,7):Yl(A):wt[0]!="noop"&&A.l&&A.l.ta(wt),A.v=0)}}Pr(4)}catch{}}var sc=class{constructor(h,_){this.g=h,this.map=_}};function oc(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ac(h){return h.h?1:h.g?h.g.size:0}function mn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ya(h,_){h.g?h.g.add(_):h.h=_}function zl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}oc.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $l(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const A of h.g.values())_=_.concat(A.D);return _}return T(h.i)}function Gl(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],A=h.length,B=0;B<A;B++)_.push(h[B]);return _}_=[],A=0;for(B in h)_[A++]=h[B];return _}function ld(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var A=0;A<h;A++)_.push(A);return _}_=[],A=0;for(const B in h)_[A++]=B;return _}}}function ui(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var A=ld(h),B=Gl(h),ie=B.length,de=0;de<ie;de++)_.call(void 0,B[de],A&&A[de],h)}var Do=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kr(h,_){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var B=h[A].indexOf("="),ie=null;if(0<=B){var de=h[A].substring(0,B);ie=h[A].substring(B+1)}else de=h[A];_(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Ri(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ri){this.h=h.h,_a(this,h.j),this.o=h.o,this.g=h.g,Oo(this,h.s),this.l=h.l;var _=h.i,A=new kn;A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),lc(this,A),this.m=h.m}else h&&(_=String(h).match(Do))?(this.h=!1,_a(this,_[1]||"",!0),this.o=Es(_[2]||""),this.g=Es(_[3]||"",!0),Oo(this,_[4]),this.l=Es(_[5]||"",!0),lc(this,_[6]||"",!0),this.m=Es(_[7]||"")):(this.h=!1,this.i=new kn(null,this.h))}Ri.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Fo(_,uc,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Fo(_,uc,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Fo(A,A.charAt(0)=="/"?ba:As,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Fo(A,cc)),h.join("")};function ci(h){return new Ri(h)}function _a(h,_,A){h.j=A?Es(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Oo(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function lc(h,_,A){_ instanceof kn?(h.i=_,Zi(h.i,h.h)):(A||(_=Fo(_,Ia)),h.i=new kn(_,h.h))}function Gt(h,_,A){h.i.set(_,A)}function wa(h){return Gt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Es(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fo(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,ud),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ud(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var uc=/[#\/\?@]/g,As=/[#\?:]/g,ba=/[#\?]/g,Ia=/[#\?@]/g,cc=/#/g;function kn(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Xi(h){h.g||(h.g=new Map,h.h=0,h.i&&kr(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}n=kn.prototype,n.add=function(h,_){Xi(this),this.i=null,h=Ys(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function Wl(h,_){Xi(h),_=Ys(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function vt(h,_){return Xi(h),_=Ys(h,_),h.g.has(_)}n.forEach=function(h,_){Xi(this),this.g.forEach(function(A,B){A.forEach(function(ie){h.call(_,ie,B,this)},this)},this)},n.na=function(){Xi(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),A=[];for(let B=0;B<_.length;B++){const ie=h[B];for(let de=0;de<ie.length;de++)A.push(_[B])}return A},n.V=function(h){Xi(this);let _=[];if(typeof h=="string")vt(this,h)&&(_=_.concat(this.g.get(Ys(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)_=_.concat(h[A])}return _},n.set=function(h,_){return Xi(this),this.i=null,h=Ys(this,h),vt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function hc(h,_,A){Wl(h,_),0<A.length&&(h.i=null,h.g.set(Ys(h,_),T(A)),h.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var A=0;A<_.length;A++){var B=_[A];const de=encodeURIComponent(String(B)),Le=this.V(B);for(B=0;B<Le.length;B++){var ie=de;Le[B]!==""&&(ie+="="+encodeURIComponent(String(Le[B]))),h.push(ie)}}return this.i=h.join("&")};function Ys(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Zi(h,_){_&&!h.j&&(Xi(h),h.i=null,h.g.forEach(function(A,B){var ie=B.toLowerCase();B!=ie&&(Wl(this,B),hc(this,ie,A))},h)),h.j=_}function dc(h,_){const A=new pn;if(a.Image){const B=new Image;B.onload=g(Gr,A,"TestLoadImage: loaded",!0,_,B),B.onerror=g(Gr,A,"TestLoadImage: error",!1,_,B),B.onabort=g(Gr,A,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(Gr,A,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=h}else _(!1)}function fc(h,_){const A=new pn,B=new AbortController,ie=setTimeout(()=>{B.abort(),Gr(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:B.signal}).then(de=>{clearTimeout(ie),de.ok?Gr(A,"TestPingServer: ok",!0,_):Gr(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),Gr(A,"TestPingServer: error",!1,_)})}function Gr(h,_,A,B,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),B(A)}catch{}}function Hl(){this.g=new jt}function cd(h,_,A){const B=A||"";try{ui(h,function(ie,de){let Le=ie;c(ie)&&(Le=Xt(ie)),_.push(B+de+"="+encodeURIComponent(Le))})}catch(ie){throw _.push(B+"type="+encodeURIComponent("_badmap")),ie}}function Ea(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Ea,bs),Ea.prototype.g=function(){return new Aa(this.l,this.j)},Ea.prototype.i=function(h){return function(){return h}}({});function Aa(h,_){dt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Aa,dt),n=Aa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,hi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Li(this):hi(this),this.readyState==3&&xa(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Li(this))},n.Qa=function(h){this.g&&(this.response=h,Li(this))},n.ga=function(){this.g&&Li(this)};function Li(h){h.readyState=4,h.l=null,h.j=null,h.v=null,hi(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function hi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function pc(h){let _="";return K(h,function(A,B){_+=B,_+=":",_+=A,_+=`\r
`}),_}function xs(h,_,A){e:{for(B in A){var B=!1;break e}B=!0}B||(A=pc(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):Gt(h,_,A))}function Zt(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Zt,dt);var Ta=/^https?$/i,mc=["POST","PUT"];n=Zt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,A,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?fn(this.o):fn(li),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(de){Kl(this,de);return}if(h=A||"",A=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ie in B)A.set(ie,B[ie]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const de of B.keys())A.set(de,B.get(de));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(A.keys()).find(de=>de.toLowerCase()=="content-type"),ie=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(mc,_,void 0))||B||ie||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Le]of A)this.g.setRequestHeader(de,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{es(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){Kl(this,de)}};function Kl(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Ql(h),Wr(h)}function Ql(h){h.A||(h.A=!0,It(h,"complete"),It(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,It(this,"complete"),It(this,"abort"),Wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wr(this,!0)),Zt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},n.bb=function(){Jl(this)};function Jl(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Di(h)!=4||h.Z()!=2)){if(h.u&&Di(h)==4)Nt(h.Ea,0,h);else if(It(h,"readystatechange"),Di(h)==4){h.h=!1;try{const Le=h.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var B;if(B=Le===0){var ie=String(h.D).match(Do)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),B=!Ta.test(ie?ie.toLowerCase():"")}A=B}if(A)It(h,"complete"),It(h,"success");else{h.m=6;try{var de=2<Di(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",Ql(h)}}finally{Wr(h)}}}}function Wr(h,_){if(h.g){es(h);const A=h.g,B=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||It(h,"ready");try{A.onreadystatechange=B}catch{}}}function es(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Di(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Yi(_)}};function Ts(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Oi(h){const _={};h=(h.g&&2<=Di(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<h.length;B++){if(E(h[B]))continue;var A=x(h[B]);const ie=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const de=_[ie]||[];_[ie]=de,de.push(A)}P(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function Xs(h){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ss("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ss("baseRetryDelayMs",5e3,h),this.cb=Ss("retryDelaySeedMs",1e4,h),this.Wa=Ss("forwardChannelMaxRetries",2,h),this.wa=Ss("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new oc(h&&h.concurrentRequestLimit),this.Da=new Hl,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xs.prototype,n.la=8,n.G=1,n.connect=function(h,_,A,B){nn(0),this.W=h,this.H=_||{},A&&B!==void 0&&(this.H.OSID=A,this.H.OAID=B),this.F=this.X,this.I=D(this,null,this.W),Zs(this)};function Yl(h){if(gc(h),h.G==3){var _=h.U++,A=ci(h.I);if(Gt(A,"SID",h.K),Gt(A,"RID",_),Gt(A,"TYPE","terminate"),ts(h,A),_=new nr(h,h.j,_),_.L=2,_.v=wa(ci(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=_.v,A=!0),A||(_.g=Q(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ga(_)}m(h)}function Ns(h){h.g&&(eu(h),h.g.cancel(),h.g=null)}function gc(h){Ns(h),h.u&&(a.clearTimeout(h.u),h.u=null),ns(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Zs(h){if(!Lo(h.h)&&!h.s){h.s=!0;var _=h.Ga;be||ce(),Z||(be(),Z=!0),le.add(_,h),h.B=0}}function Xl(h,_){return ac(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Jn(v(h.Ga,h,_),Ps(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ie=new nr(this,this.j,h);let de=this.o;if(this.S&&(de?(de=I(de),U(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var B=this.i[A];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=Sa(this,ie,_),A=ci(this.I),Gt(A,"RID",h),Gt(A,"CVER",22),this.D&&Gt(A,"X-HTTP-Session-Id",this.D),ts(this,A),de&&(this.O?_="headers="+encodeURIComponent(String(pc(de)))+"&"+_:this.m&&xs(A,this.m,de)),ya(this.h,ie),this.Ua&&Gt(A,"TYPE","init"),this.P?(Gt(A,"$req",_),Gt(A,"SID","null"),ie.T=!0,Js(ie,A,null)):Js(ie,A,_),this.G=2}}else this.G==3&&(h?Zl(this,h):this.i.length==0||Lo(this.h)||Zl(this))};function Zl(h,_){var A;_?A=_.l:A=h.U++;const B=ci(h.I);Gt(B,"SID",h.K),Gt(B,"RID",A),Gt(B,"AID",h.T),ts(h,B),h.m&&h.o&&xs(B,h.m,h.o),A=new nr(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Sa(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ya(h.h,A),Js(A,B,_)}function ts(h,_){h.H&&K(h.H,function(A,B){Gt(_,B,A)}),h.l&&ui({},function(A,B){Gt(_,B,A)})}function Sa(h,_,A){A=Math.min(h.i.length,A);var B=h.l?v(h.l.Na,h.l,h):null;e:{var ie=h.i;let de=-1;for(;;){const Le=["count="+A];de==-1?0<A?(de=ie[0].g,Le.push("ofs="+de)):de=0:Le.push("ofs="+de);let _t=!0;for(let Wt=0;Wt<A;Wt++){let wt=ie[Wt].g;const rn=ie[Wt].map;if(wt-=de,0>wt)de=Math.max(0,ie[Wt].g-100),_t=!1;else try{cd(rn,Le,"req"+wt+"_")}catch{B&&B(rn)}}if(_t){B=Le.join("&");break e}}}return h=h.i.splice(0,A),_.D=h,B}function Na(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;be||ce(),Z||(be(),Z=!0),le.add(_,h),h.v=0}}function Pa(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Jn(v(h.Fa,h),Ps(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Mo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Jn(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Ns(this),Mo(this))};function eu(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Mo(h){h.g=new nr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=ci(h.qa);Gt(_,"RID","rpc"),Gt(_,"SID",h.K),Gt(_,"AID",h.T),Gt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Gt(_,"TO",h.ja),Gt(_,"TYPE","xmlhttp"),ts(h,_),h.m&&h.o&&xs(_,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=wa(ci(_)),A.m=null,A.P=!0,Co(A,h)}n.Za=function(){this.C!=null&&(this.C=null,Ns(this),Pa(this),nn(19))};function ns(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Ca(h,_){var A=null;if(h.g==_){ns(h),eu(h),h.g=null;var B=2}else if(mn(h.h,_))A=_.D,zl(h.h,_),B=1;else return;if(h.G!=0){if(_.o)if(B==1){A=_.m?_.m.length:0,_=Date.now()-_.F;var ie=h.B;B=Pn(),It(B,new Ni(B,A)),Zs(h)}else Na(h);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(B==1&&Xl(h,_)||B==2&&Pa(h)))switch(A&&0<A.length&&(_=h.h,_.i=_.i.concat(A)),ie){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function Ps(h,_){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*_}function Fi(h,_){if(h.j.info("Error code "+_),_==2){var A=v(h.fb,h),B=h.Xa;const ie=!B;B=new Ri(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_a(B,"https"),wa(B),ie?dc(B.toString(),A):fc(B.toString(),A)}else nn(2);h.G=0,h.l&&h.l.sa(_),m(h),gc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function m(h){if(h.G=0,h.ka=[],h.l){const _=$l(h.h);(_.length!=0||h.i.length!=0)&&(R(h.ka,_),R(h.ka,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.ra()}}function D(h,_,A){var B=A instanceof Ri?ci(A):new Ri(A);if(B.g!="")_&&(B.g=_+"."+B.g),Oo(B,B.s);else{var ie=a.location;B=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new Ri(null);B&&_a(de,B),_&&(de.g=_),ie&&Oo(de,ie),A&&(de.l=A),B=de}return A=h.D,_=h.ya,A&&_&&Gt(B,A,_),Gt(B,"VER",h.la),ts(h,B),B}function Q(h,_,A){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Zt(new Ea({eb:A})):new Zt(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function te(){}n=te.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ue(){}ue.prototype.g=function(h,_){return new we(h,_)};function we(h,_){dt.call(this),this.g=new Xs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!E(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!E(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new nt(this)}N(we,dt),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Yl(this.g)},we.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=Xt(h),h=A);_.i.push(new sc(_.Ya++,h)),_.G==3&&Zs(_)},we.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,we.aa.N.call(this)};function Ce(h){ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}N(Ce,ln);function Qe(){gt.call(this),this.status=1}N(Qe,gt);function nt(h){this.g=h}N(nt,te),nt.prototype.ua=function(){It(this.g,"a")},nt.prototype.ta=function(h){It(this.g,new Ce(h))},nt.prototype.sa=function(h){It(this.g,new Qe)},nt.prototype.ra=function(){It(this.g,"b")},ue.prototype.createWebChannel=ue.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,QS=function(){return new ue},KS=function(){return Pn()},HS=kt,Uy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,ig=Cr,ai.COMPLETE="complete",WS=ai,oi.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Xd=oi,Zt.prototype.listenOnce=Zt.prototype.L,Zt.prototype.getLastError=Zt.prototype.Ka,Zt.prototype.getLastErrorCode=Zt.prototype.Ba,Zt.prototype.getStatus=Zt.prototype.Z,Zt.prototype.getResponseJson=Zt.prototype.Oa,Zt.prototype.getResponseText=Zt.prototype.oa,Zt.prototype.send=Zt.prototype.ea,Zt.prototype.setWithCredentials=Zt.prototype.Ha,GS=Zt}).apply(typeof Nm<"u"?Nm:typeof self<"u"?self:typeof window<"u"?window:{});const _I="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new vp("@firebase/firestore");function Uc(){return Il.logLevel}function iF(n){Il.setLogLevel(n)}function Re(n,...e){if(Il.logLevel<=Pt.DEBUG){const t=e.map(Q_);Il.debug(`Firestore (${Zh}): ${n}`,...t)}}function Hn(n,...e){if(Il.logLevel<=Pt.ERROR){const t=e.map(Q_);Il.error(`Firestore (${Zh}): ${n}`,...t)}}function Eo(n,...e){if(Il.logLevel<=Pt.WARN){const t=e.map(Q_);Il.warn(`Firestore (${Zh}): ${n}`,...t)}}function Q_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n="Unexpected state"){const e=`FIRESTORE (${Zh}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function rt(n,e){n||Ye()}function sF(n,e){n||Ye()}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class aF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lF{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string"),new JS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new fr(e)}}class uF{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cF{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new uF(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){rt(this.o===void 0);const r=s=>{s.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string"),this.R=t.token,new hF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Dh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function XS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.timestamp=e}static fromTimestamp(e){return new st(e)}static min(){return new st(new An(0,0))}static max(){return new st(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(),r===void 0?r=e.length-t:r>e.length-t&&Ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Lt extends Yf{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const pF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Yf{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return pF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ke(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ke(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ke(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ke(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Lt.fromString(e))}static fromName(e){return new qe(Lt.fromString(e).popFirst(5))}static empty(){return new qe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function By(n){return n.fields.find(e=>e.kind===2)}function hu(n){return n.fields.filter(e=>e.kind!==2)}Xg.UNKNOWN_ID=-1;class sg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xf(0,Ki.min())}}function ZS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=st.fromTimestamp(r===1e9?new An(t+1,0):new An(t,r));return new Ki(i,qe.empty(),e)}function eN(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(st.min(),qe.empty(),-1)}static max(){return new Ki(st.max(),qe.empty(),-1)}}function J_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:At(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==tN)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new me((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Y_(r.target.error);this.V.reject(new mf(e,i))}}static open(e,t,r,i){try{return new $0(t,e.transaction(i,r))}catch(s){throw new mf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gF(t)}}class vo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,vo.S(Bt())===12.2&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),fu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qf())return!1;if(vo.v())return!0;const e=Bt(),t=vo.S(e),r=0<t&&t<10,i=rN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Re("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ke(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ke(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mf(e,o))},i.onupgradeneeded=s=>{Re("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Re("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=$0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),me.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Re("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function rN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class mF{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fu(this.B.delete())}}class mf extends ke{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vl(n){return n.name==="IndexedDbTransactionError"}class gF{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fu(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),fu(this.store.add(e))}get(e){return fu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),fu(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),fu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new me((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new me((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const o=Y_(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new me((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new mF(a),c=t(a.primaryKey,a.value,l);if(c instanceof me){const d=c.catch(p=>(l.done(),me.reject(p)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>me.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fu(n){return new me((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Y_(r.target.error);t(i)}})}let wI=!1;function Y_(n){const e=vo.S(Bt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wI||(wI=!0,setTimeout(()=>{throw r},0)),r}}return n}class vF{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Re("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Vl(t)?Re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ml(t)}await this.X(6e4)})}}class yF{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return me.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Re("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Re("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=eN(s);J_(o,r)>0&&(r=o)}),new Ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wi.oe=-1;function Tp(n){return n==null}function Zf(n){return n===0&&1/n==-1/0}function iN(n){return typeof n=="number"&&Number.isInteger(n)&&!Zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bI(e)),e=_F(n.get(t),e);return bI(e)}function _F(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function bI(n){return n+""}function ho(n){const e=n.length;if(rt(e>=2),e===2)return rt(n.charAt(0)===""&&n.charAt(1)===""),Lt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&Ye(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Ye()}s=o+2}return new Lt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(n,e){return[n,ei(e)]}function sN(n,e,t){return[n,ei(e),t]}const wF={},bF=["prefixPath","collectionGroup","readTime","documentId"],IF=["prefixPath","collectionGroup","documentId"],EF=["collectionGroup","readTime","prefixPath","documentId"],AF=["canonicalId","targetId"],xF=["targetId","path"],TF=["path","targetId"],SF=["collectionId","parent"],NF=["indexId","uid"],PF=["uid","sequenceNumber"],CF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kF=["indexId","uid","orderedDocumentKey"],RF=["userId","collectionPath","documentId"],LF=["userId","collectionPath","largestBatchId"],DF=["userId","collectionGroup","largestBatchId"],oN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OF=[...oN,"documentOverlays"],aN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lN=aN,X_=[...lN,"indexConfiguration","indexState","indexEntries"],FF=X_,MF=[...X_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends nN{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ar(n,e){const t=Ge(n);return vo.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t){this.comparator=e,this.root=t||Ir.EMPTY}insert(e,t){return new dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pm(this.root,e,this.comparator,!0)}}class Pm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ir{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ir.RED,this.left=i??Ir.EMPTY,this.right=s??Ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ir(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ir.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const e=this.left.check();if(e!==this.right.check())throw Ye();return e+(this.isRed()?0:1)}}Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1;Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ir(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AI(this.data.getIterator())}getIteratorFrom(e){return new AI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class AI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new bi([])}unionWith(e){let t=new tn(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cN("Invalid base64 string: "+s):s}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const jF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function la(n){if(rt(!!n),typeof n=="string"){let e=0;const t=jF.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(n.seconds),nanos:wn(n.nanos)}}function wn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function El(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Z_(n){const e=n.mapValue.fields.__previous_value__;return G0(e)?Z_(e):e}function ep(n){const e=la(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Al{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ag={nullValue:"NULL_VALUE"};function Bu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?G0(n)?4:hN(n)?9007199254740991:W0(n)?10:11:Ye()}function Ao(n,e){if(n===e)return!0;const t=Bu(n);if(t!==Bu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ep(n).isEqual(ep(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=la(i.timestampValue),a=la(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return El(i.bytesValue).isEqual(El(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return wn(i.geoPointValue.latitude)===wn(s.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wn(i.integerValue)===wn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wn(i.doubleValue),a=wn(s.doubleValue);return o===a?Zf(o)===Zf(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Dh(n.arrayValue.values||[],e.arrayValue.values||[],Ao);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EI(o)!==EI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ao(o[l],a[l])))return!1;return!0}(n,e);default:return Ye()}}function tp(n,e){return(n.values||[]).find(t=>Ao(t,e))!==void 0}function xl(n,e){if(n===e)return 0;const t=Bu(n),r=Bu(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wn(s.integerValue||s.doubleValue),l=wn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return xI(n.timestampValue,e.timestampValue);case 4:return xI(ep(n),ep(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(s,o){const a=El(s),l=El(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=At(a[c],l[c]);if(d!==0)return d}return At(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=At(wn(s.latitude),wn(o.latitude));return a!==0?a:At(wn(s.longitude),wn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return TI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const p=s.fields||{},v=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,N=(l=v.value)===null||l===void 0?void 0:l.arrayValue,T=At(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:TI(g,N)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===sl.mapValue&&o===sl.mapValue)return 0;if(s===sl.mapValue)return 1;if(o===sl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const v=At(l[p],d[p]);if(v!==0)return v;const g=xl(a[l[p]],c[d[p]]);if(g!==0)return g}return At(l.length,d.length)}(n.mapValue,e.mapValue);default:throw Ye()}}function xI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return At(n,e);const t=la(n),r=la(e),i=At(t.seconds,r.seconds);return i!==0?i:At(t.nanos,r.nanos)}function TI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=xl(t[i],r[i]);if(s)return s}return At(t.length,r.length)}function Oh(n){return zy(n)}function zy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=la(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return El(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return qe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=zy(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${zy(t.fields[o])}`;return i+"}"}(n.mapValue):Ye()}function qu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $y(n){return!!n&&"integerValue"in n}function np(n){return!!n&&"arrayValue"in n}function SI(n){return!!n&&"nullValue"in n}function NI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lg(n){return!!n&&"mapValue"in n}function W0(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const dN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function BF(n){return"nullValue"in n?ag:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qu(Al.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?W0(n)?dN:{mapValue:{}}:Ye()}function qF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qu(Al.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?dN:"mapValue"in n?W0(n)?{mapValue:{}}:sl:Ye()}function PI(n,e){const t=xl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function CI(n,e){const t=xl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.value=e}static empty(){return new Er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gf(t)}setAll(e){let t=In.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=gf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());lg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Er(gf(this.value))}}function fN(n){const e=[];return Zu(n.fields,(t,r)=>{const i=new In([t]);if(lg(r)){const s=fN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vn(e,0,st.min(),st.min(),st.min(),Er.empty(),0)}static newFoundDocument(e,t,r,i){return new vn(e,1,t,st.min(),r,i,0)}static newNoDocument(e,t){return new vn(e,2,t,st.min(),st.min(),Er.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,st.min(),st.min(),Er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.position=e,this.inclusive=t}}function kI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=qe.comparator(qe.fromName(o.referenceValue),t.key):r=xl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ao(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t="asc"){this.field=e,this.dir=t}}function zF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{}class Dt extends pN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $F(e,t,r):t==="array-contains"?new HF(e,r):t==="in"?new wN(e,r):t==="not-in"?new KF(e,r):t==="array-contains-any"?new QF(e,r):new Dt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GF(e,r):new WF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xl(t,this.value)):t!==null&&Bu(this.value)===Bu(t)&&this.matchesComparison(xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends pN{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Qt(e,t)}matches(e){return Fh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fh(n){return n.op==="and"}function Gy(n){return n.op==="or"}function ew(n){return mN(n)&&Fh(n)}function mN(n){for(const e of n.filters)if(e instanceof Qt)return!1;return!0}function Wy(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Oh(n.value);if(ew(n))return n.filters.map(e=>Wy(e)).join(",");{const e=n.filters.map(t=>Wy(t)).join(",");return`${n.op}(${e})`}}function gN(n,e){return n instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&Ao(r.value,i.value)}(n,e):n instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gN(o,i.filters[a]),!0):!1}(n,e):void Ye()}function vN(n,e){const t=n.filters.concat(e);return Qt.create(t,n.op)}function yN(n){return n instanceof Dt?function(t){return`${t.field.canonicalString()} ${t.op} ${Oh(t.value)}`}(n):n instanceof Qt?function(t){return t.op.toString()+" {"+t.getFilters().map(yN).join(" ,")+"}"}(n):"Filter"}class $F extends Dt{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class GF extends Dt{constructor(e,t){super(e,"in",t),this.keys=_N("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WF extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=_N("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _N(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class HF extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&tp(t.arrayValue,this.value)}}class wN extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tp(this.value.arrayValue,t)}}class KF extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!tp(this.value.arrayValue,t)}}class QF extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Hy(n,e=null,t=[],r=[],i=null,s=null,o=null){return new JF(n,e,t,r,i,s,o)}function zu(n){const e=Ge(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oh(r)).join(",")),e.ue=t}return e.ue}function Sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RI(n.startAt,e.startAt)&&RI(n.endAt,e.endAt)}function Zg(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function e0(n,e){return n.filters.filter(t=>t instanceof Dt&&t.field.isEqual(e))}function LI(n,e,t){let r=ag,i=!0;for(const s of e0(n,e)){let o=ag,a=!0;switch(s.op){case"<":case"<=":o=BF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ag}PI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];PI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function DI(n,e,t){let r=sl,i=!0;for(const s of e0(n,e)){let o=sl,a=!0;switch(s.op){case">=":case">":o=qF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=sl}CI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];CI({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bN(n,e,t,r,i,s,o,a){return new fa(n,e,t,r,i,s,o,a)}function ed(n){return new fa(n)}function OI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tw(n){return n.collectionGroup!==null}function mh(n){const e=Ge(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(In.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new rp(s,r))}),t.has(In.keyField().canonicalString())||e.ce.push(new rp(In.keyField(),r))}return e.ce}function ti(n){const e=Ge(n);return e.le||(e.le=YF(e,mh(n))),e.le}function YF(n,e){if(n.limitType==="F")return Hy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new rp(i.field,s)});const t=n.endAt?new Tl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Tl(n.startAt.position,n.startAt.inclusive):null;return Hy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ky(n,e){const t=n.filters.concat([e]);return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function t0(n,e,t){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Np(n,e){return Sp(ti(n),ti(e))&&n.limitType===e.limitType}function IN(n){return`${zu(ti(n))}|lt:${n.limitType}`}function Bc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>yN(i)).join(", ")}]`),Tp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Oh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Oh(i)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function Pp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of mh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=kI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,mh(r),i)||r.endAt&&!function(o,a,l){const c=kI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,mh(r),i))}(n,e)}function EN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AN(n){return(e,t)=>{let r=!1;for(const i of mh(n)){const s=XF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XF(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?xl(l,c):Ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return uN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new dn(qe.comparator);function Ii(){return ZF}const xN=new dn(qe.comparator);function Zd(...n){let e=xN;for(const t of n)e=e.insert(t.key,t);return e}function TN(n){let e=xN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fo(){return vf()}function SN(){return vf()}function vf(){return new jl(n=>n.toString(),(n,e)=>n.isEqual(e))}const e7=new dn(qe.comparator),t7=new tn(qe.comparator);function St(...n){let e=t7;for(const t of n)e=e.add(t);return e}const n7=new tn(At);function nw(){return n7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function NN(n){return{integerValue:""+n}}function PN(n,e){return iN(e)?NN(e):rw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this._=void 0}}function r7(n,e,t){return n instanceof Mh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&G0(s)&&(s=Z_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof $u?kN(n,e):n instanceof Gu?RN(n,e):function(i,s){const o=CN(i,s),a=FI(o)+FI(i.Pe);return $y(o)&&$y(i.Pe)?NN(a):rw(i.serializer,a)}(n,e)}function i7(n,e,t){return n instanceof $u?kN(n,e):n instanceof Gu?RN(n,e):t}function CN(n,e){return n instanceof Vh?function(r){return $y(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mh extends H0{}class $u extends H0{constructor(e){super(),this.elements=e}}function kN(n,e){const t=LN(e);for(const r of n.elements)t.some(i=>Ao(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gu extends H0{constructor(e){super(),this.elements=e}}function RN(n,e){let t=LN(e);for(const r of n.elements)t=t.filter(i=>!Ao(i,r));return{arrayValue:{values:t}}}class Vh extends H0{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function FI(n){return wn(n.integerValue||n.doubleValue)}function LN(n){return np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){this.field=e,this.transform=t}}function s7(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof $u&&i instanceof $u||r instanceof Gu&&i instanceof Gu?Dh(r.elements,i.elements,Ao):r instanceof Vh&&i instanceof Vh?Ao(r.Pe,i.Pe):r instanceof Mh&&i instanceof Mh}(n.transform,e.transform)}class o7{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ug(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class K0{}function DN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nd(n.key,En.none()):new td(n.key,n.data,En.none());{const t=n.data,r=Er.empty();let i=new tn(In.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pa(n.key,r,new bi(i.toArray()),En.none())}}function a7(n,e,t){n instanceof td?function(i,s,o){const a=i.value.clone(),l=VI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof pa?function(i,s,o){if(!ug(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=VI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ON(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function yf(n,e,t,r){return n instanceof td?function(s,o,a,l){if(!ug(s.precondition,o))return a;const c=s.value.clone(),d=jI(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof pa?function(s,o,a,l){if(!ug(s.precondition,o))return a;const c=jI(s.fieldTransforms,l,o),d=o.data;return d.setAll(ON(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return ug(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function l7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=CN(r.transform,i||null);s!=null&&(t===null&&(t=Er.empty()),t.set(r.field,s))}return t||null}function MI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dh(r,i,(s,o)=>s7(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class td extends K0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class pa extends K0{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ON(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VI(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i7(o,a,t[i]))}return r}function jI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,r7(s,o,e))}return r}class nd extends K0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iw extends K0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&a7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=SN();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=DN(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),St())}isEqual(e){return this.batchId===e.batchId&&Dh(this.mutations,e.mutations,(t,r)=>MI(t,r))&&Dh(this.baseMutations,e.baseMutations,(t,r)=>MI(t,r))}}class ow{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=function(){return e7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ow(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,Ft;function FN(n){switch(n){default:return Ye();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function MN(n){if(n===void 0)return Hn("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case Zn.OK:return Ie.OK;case Zn.CANCELLED:return Ie.CANCELLED;case Zn.UNKNOWN:return Ie.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return Ie.INTERNAL;case Zn.UNAVAILABLE:return Ie.UNAVAILABLE;case Zn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Zn.NOT_FOUND:return Ie.NOT_FOUND;case Zn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Zn.ABORTED:return Ie.ABORTED;case Zn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Zn.DATA_LOSS:return Ie.DATA_LOSS;default:return Ye()}}(Ft=Zn||(Zn={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=new Cu([4294967295,4294967295],0);function UI(n){const e=VN().encode(n),t=new $S;return t.update(e),new Uint8Array(t.digest())}function BI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cu([t,r],0),new Cu([i,s],0)]}class lw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ef(`Invalid padding: ${t}`);if(r<0)throw new ef(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ef(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ef(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Cu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Cu.fromNumber(r)));return i.compare(c7)===1&&(i=new Cu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=UI(e),[r,i]=BI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lw(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=UI(e),[r,i]=BI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kp(st.min(),i,new dn(At),Ii(),St())}}class Rp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rp(r,t,St(),St(),St())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class jN{constructor(e,t){this.targetId=e,this.me=t}}class UN{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qI{constructor(){this.fe=0,this.ge=$I(),this.pe=Mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=St(),t=St(),r=St();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye()}}),new Rp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$I()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class h7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ii(),this.qe=zI(),this.Qe=new dn(At)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Zg(s))if(r===0){const o=new qe(s.path);this.Ue(t,o,vn.newNoDocument(o,st.min()))}else rt(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=El(r).toUint8Array()}catch(l){if(l instanceof cN)return Eo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lw(o,i,s)}catch(l){return Eo(l instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Zg(a.target)){const l=new qe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,vn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=St();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new kp(e,t,this.Qe,this.ke,r);return this.ke=Ii(),this.qe=zI(),this.Qe=new dn(At),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new qI,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tn(At),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qI),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zI(){return new dn(qe.comparator)}function $I(){return new dn(qe.comparator)}const d7=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),f7=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),p7=(()=>({and:"AND",or:"OR"}))();class m7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qy(n,e){return n.useProto3Json||Tp(e)?e:{value:e}}function jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g7(n,e){return jh(n,e.toTimestamp())}function Kn(n){return rt(!!n),st.fromTimestamp(function(t){const r=la(t);return new An(r.seconds,r.nanos)}(n))}function uw(n,e){return Jy(n,e).canonicalString()}function Jy(n,e){const t=function(i){return new Lt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qN(n){const e=Lt.fromString(n);return rt(XN(e)),e}function ip(n,e){return uw(n.databaseId,e.path)}function yo(n,e){const t=qN(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(GN(t))}function zN(n,e){return uw(n.databaseId,e)}function $N(n){const e=qN(n);return e.length===4?Lt.emptyPath():GN(e)}function Yy(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GN(n){return rt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GI(n,e,t){return{name:ip(n,e),fields:t.value.mapValue.fields}}function WN(n,e,t){const r=yo(n,e.name),i=Kn(e.updateTime),s=e.createTime?Kn(e.createTime):st.min(),o=new Er({mapValue:{fields:e.fields}}),a=vn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function v7(n,e){return"found"in e?function(r,i){rt(!!i.found),i.found.name,i.found.updateTime;const s=yo(r,i.found.name),o=Kn(i.found.updateTime),a=i.found.createTime?Kn(i.found.createTime):st.min(),l=new Er({mapValue:{fields:i.found.fields}});return vn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){rt(!!i.missing),rt(!!i.readTime);const s=yo(r,i.missing),o=Kn(i.readTime);return vn.newNoDocument(s,o)}(n,e):Ye()}function y7(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(rt(d===void 0||typeof d=="string"),Mn.fromBase64String(d||"")):(rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Mn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?Ie.UNKNOWN:MN(c.code);return new ke(d,c.message||"")}(o);t=new UN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yo(n,r.document.name),s=Kn(r.document.updateTime),o=r.document.createTime?Kn(r.document.createTime):st.min(),a=new Er({mapValue:{fields:r.document.fields}}),l=vn.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];t=new cg(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yo(n,r.document),s=r.readTime?Kn(r.readTime):st.min(),o=vn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new cg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yo(n,r.document),s=r.removedTargetIds||[];t=new cg([],s,i,null)}else{if(!("filter"in e))return Ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new u7(i,s),a=r.targetId;t=new jN(a,o)}}return t}function sp(n,e){let t;if(e instanceof td)t={update:GI(n,e.key,e.value)};else if(e instanceof nd)t={delete:ip(n,e.key)};else if(e instanceof pa)t={update:GI(n,e.key,e.data),updateMask:A7(e.fieldMask)};else{if(!(e instanceof iw))return Ye();t={verify:ip(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Mh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:g7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye()}(n,e.precondition)),t}function Xy(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?En.updateTime(Kn(s.updateTime)):s.exists!==void 0?En.exists(s.exists):En.none()}(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)rt(a.setToServerValue==="REQUEST_TIME"),l=new Mh;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new $u(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Gu(d)}else"increment"in a?l=new Vh(o,a.increment):Ye();const c=In.fromServerFormat(a.fieldPath);return new Cp(c,l)}(n,i)):[];if(e.update){e.update.name;const i=yo(n,e.update.name),s=new Er({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new bi(c.map(d=>In.fromServerFormat(d)))}(e.updateMask);return new pa(i,s,o,t,r)}return new td(i,s,t,r)}if(e.delete){const i=yo(n,e.delete);return new nd(i,t)}if(e.verify){const i=yo(n,e.verify);return new iw(i,t)}return Ye()}function _7(n,e){return n&&n.length>0?(rt(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Kn(i.updateTime):Kn(s);return o.isEqual(st.min())&&(o=Kn(s)),new o7(o,i.transformResults||[])}(t,e))):[]}function HN(n,e){return{documents:[zN(n,e.path)]}}function KN(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zN(n,i);const s=function(c){if(c.length!==0)return YN(Qt.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(v){return{field:qc(v.field),direction:b7(v.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Qy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function QN(n){let e=$N(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(r===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(p){const v=JN(p);return v instanceof Qt&&ew(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(v=>function(N){return new rp(zc(N.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(v))}(t.orderBy));let a=null;t.limit&&(a=function(p){let v;return v=typeof p=="object"?p.value:p,Tp(v)?null:v}(t.limit));let l=null;t.startAt&&(l=function(p){const v=!!p.before,g=p.values||[];return new Tl(g,v)}(t.startAt));let c=null;return t.endAt&&(c=function(p){const v=!p.before,g=p.values||[];return new Tl(g,v)}(t.endAt)),bN(e,i,o,s,a,"F",l,c)}function w7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=zc(t.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zc(t.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zc(t.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zc(t.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(n):n.fieldFilter!==void 0?function(t){return Dt.create(zc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Qt.create(t.compositeFilter.filters.map(r=>JN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye()}}(t.compositeFilter.op))}(n):Ye()}function b7(n){return d7[n]}function I7(n){return f7[n]}function E7(n){return p7[n]}function qc(n){return{fieldPath:n.canonicalString()}}function zc(n){return In.fromServerFormat(n.fieldPath)}function YN(n){return n instanceof Dt?function(t){if(t.op==="=="){if(NI(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NAN"}};if(SI(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NI(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NOT_NAN"}};if(SI(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qc(t.field),op:I7(t.op),value:t.value}}}(n):n instanceof Qt?function(t){const r=t.getFilters().map(i=>YN(i));return r.length===1?r[0]:{compositeFilter:{op:E7(t.op),filters:r}}}(n):Ye()}function A7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t,r,i,s=st.min(),o=st.min(),a=Mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.ct=e}}function x7(n,e){let t;if(e.document)t=WN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Hu(e.noDocument.readTime);t=vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ye();{const r=qe.fromSegments(e.unknownDocument.path),i=Hu(e.unknownDocument.version);t=vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new An(i[0],i[1]);return st.fromTimestamp(s)}(e.readTime)),t}function WI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:n0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ip(s,o.key),fields:o.data.value.mapValue.fields,updateTime:jh(s,o.version.toTimestamp()),createTime:jh(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wu(e.version)};else{if(!e.isUnknownDocument())return Ye();r.unknownDocument={path:t.path.toArray(),version:Wu(e.version)}}return r}function n0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hu(n){const e=new An(n.seconds,n.nanoseconds);return st.fromTimestamp(e)}function pu(n,e){const t=(e.baseMutations||[]).map(s=>Xy(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Xy(n.ct,s)),i=An.fromMillis(e.localWriteTimeMs);return new sw(e.batchId,i,t,r)}function tf(n){const e=Hu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Hu(n.lastLimboFreeSnapshotVersion):st.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return rt(s.documents.length===1),ti(ed($N(s.documents[0])))}(n.query):function(s){return ti(QN(s))}(n.query),new Zo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mn.fromBase64String(n.resumeToken))}function eP(n,e){const t=Wu(e.snapshotVersion),r=Wu(e.lastLimboFreeSnapshotVersion);let i;i=Zg(e.target)?HN(n.ct,e.target):KN(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cw(n){const e=QN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?t0(e,e.limit,"L"):e}function yv(n,e){return new aw(e.largestBatchId,Xy(n.ct,e.overlayMutation))}function HI(n,e){const t=e.path.lastSegment();return[n,ei(e.path.popLast()),t]}function KI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Wu(r.readTime),documentKey:ei(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{getBundleMetadata(e,t){return QI(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Hu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return QI(e).put(function(i){return{bundleId:i.id,createTime:Wu(Kn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return JI(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:cw(s.bundledQuery),readTime:Hu(s.readTime)}}(r)})}saveNamedQuery(e,t){return JI(e).put(function(i){return{name:i.name,readTime:Wu(Kn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function QI(n){return ar(n,"bundles")}function JI(n){return ar(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Q0(e,r)}getOverlay(e,t){return Od(e).get(HI(this.userId,t)).next(r=>r?yv(this.serializer,r):null)}getOverlays(e,t){const r=fo();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new aw(t,o);i.push(this.ht(e,a))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ei(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Od(e).j("collectionPathOverlayIndex",a))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=fo(),s=ei(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Od(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=yv(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=fo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Od(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const p=yv(this.serializer,c);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Od(e).put(function(i,s,o){const[a,l,c]=HI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Od(n){return ar(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{Pt(e){return ar(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Mn.fromUint8Array(r):Mn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Zf(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=la(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(El(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?hN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):W0(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ye()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(wn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),qe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}mu.vt=new mu;function N7(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function YI(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=N7(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class P7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=YI(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=YI(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class C7{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class k7{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fd{constructor(){this.jt=new P7,this.Ht=new C7(this.jt),this.Jt=new k7(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gu(this.indexId,this.documentKey,this.arrayValue,r)}}function $a(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=XI(n.arrayValue,e.arrayValue),t!==0?t:(t=XI(n.directionalValue,e.directionalValue),t!==0?t:qe.comparator(n.documentKey,e.documentKey)))}function XI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.Xt=new tn((t,r)=>In.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(rt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=By(e);if(t!==void 0&&!this.sn(t))return!1;const r=hu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new tn(In.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new sg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new sg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new sg(r.field,r.dir==="asc"?0:1)));return new Xg(Xg.UNKNOWN_ID,this.collectionId,t,Xf.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){var e,t;if(rt(n instanceof Dt||n instanceof Qt),n instanceof Dt){if(n instanceof wN){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Dt.create(n.field,"==",s)))||[];return Qt.create(i,"or")}return n}const r=n.filters.map(i=>tP(i));return Qt.create(r,n.op)}function R7(n){if(n.getFilters().length===0)return[];const e=t2(tP(n));return rt(nP(e)),Zy(e)||e2(e)?[e]:e.getFilters()}function Zy(n){return n instanceof Dt}function e2(n){return n instanceof Qt&&ew(n)}function nP(n){return Zy(n)||e2(n)||function(t){if(t instanceof Qt&&Gy(t)){for(const r of t.getFilters())if(!Zy(r)&&!e2(r))return!1;return!0}return!1}(n)}function t2(n){if(rt(n instanceof Dt||n instanceof Qt),n instanceof Dt)return n;if(n.filters.length===1)return t2(n.filters[0]);const e=n.filters.map(r=>t2(r));let t=Qt.create(e,n.op);return t=r0(t),nP(t)?t:(rt(t instanceof Qt),rt(Fh(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>hw(r,i)))}function hw(n,e){let t;return rt(n instanceof Dt||n instanceof Qt),rt(e instanceof Dt||e instanceof Qt),t=n instanceof Dt?e instanceof Dt?function(i,s){return Qt.create([i,s],"and")}(n,e):eE(n,e):e instanceof Dt?eE(e,n):function(i,s){if(rt(i.filters.length>0&&s.filters.length>0),Fh(i)&&Fh(s))return vN(i,s.getFilters());const o=Gy(i)?i:s,a=Gy(i)?s:i,l=o.filters.map(c=>hw(c,a));return Qt.create(l,"or")}(n,e),r0(t)}function eE(n,e){if(Fh(e))return vN(e,n.getFilters());{const t=e.filters.map(r=>hw(n,r));return Qt.create(t,"or")}}function r0(n){if(rt(n instanceof Dt||n instanceof Qt),n instanceof Dt)return n;const e=n.getFilters();if(e.length===1)return r0(e[0]);if(mN(n))return n;const t=e.map(i=>r0(i)),r=[];return t.forEach(i=>{i instanceof Dt?r.push(i):i instanceof Qt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Qt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.un=new dw}addToCollectionParentIndex(e,t){return this.un.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Ki.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class dw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(Lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=new Uint8Array(0);class D7{constructor(e,t){this.databaseId=t,this.cn=new dw,this.ln=new jl(r=>zu(r),(r,i)=>Sp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:ei(i)};return tE(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[XS(t),""],!1,!0);return tE(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ho(o.parent))}return r})}addFieldIndex(e,t){const r=Md(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=Dc(e);return s.next(a=>{o.put(KI(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Md(e),i=Dc(e),s=Lc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Md(e),r=Lc(e),i=Dc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return me.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new ZI(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Lc(e);let i=!0;const s=new Map;return me.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=St();const a=[];return me.forEach(s,(l,c)=>{Re("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(l)} to execute ${zu(t)}`);const d=function(L,$){const G=By($);if(G===void 0)return null;for(const K of e0(L,G.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(c,l),p=function(L,$){const G=new Map;for(const K of hu($))for(const P of e0(L,K.fieldPath))switch(P.op){case"==":case"in":G.set(K.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return G.set(K.fieldPath.canonicalString(),P.value),Array.from(G.values())}return null}(c,l),v=function(L,$){const G=[];let K=!0;for(const P of hu($)){const I=P.kind===0?LI(L,P.fieldPath,L.startAt):DI(L,P.fieldPath,L.startAt);G.push(I.value),K&&(K=I.inclusive)}return new Tl(G,K)}(c,l),g=function(L,$){const G=[];let K=!0;for(const P of hu($)){const I=P.kind===0?DI(L,P.fieldPath,L.endAt):LI(L,P.fieldPath,L.endAt);G.push(I.value),K&&(K=I.inclusive)}return new Tl(G,K)}(c,l),N=this.In(l,c,v),T=this.In(l,c,g),R=this.Tn(l,c,p),w=this.En(l.indexId,d,N,v.inclusive,T,g.inclusive,R);return me.forEach(w,E=>r.G(E,t.limit).next(L=>{L.forEach($=>{const G=qe.fromSegments($.documentKey);o.has(G)||(o=o.add(G),a.push(G))})}))}).next(()=>a)}return me.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=R7(Qt.create(e.filters,"and")).map(r=>Hy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let p=0;p<l;++p){const v=t?this.dn(t[p/c]):Cm,g=this.An(e,v,r[p%c],i),N=this.Rn(e,v,s[p%c],o),T=a.map(R=>this.An(e,v,R,!0));d.push(...this.createRange(g,N,T))}return d}An(e,t,r,i){const s=new gu(e,qe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new gu(e,qe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new ZI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return me.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new tn(In.comparator),d=!1;for(const p of l.filters)for(const v of p.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?d=!0:c=c.add(v.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Fd;for(const i of hu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);mu.vt.It(s,o)}return r.zt()}dn(e){const t=new Fd;return mu.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Fd;return mu.vt.It(qu(this.databaseId,t),r.Yt(function(s){const o=hu(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Fd);let s=0;for(const o of hu(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&np(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);mu.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Fd;l.seed(a.zt()),mu.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Dt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Md(e),i=Dc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return me.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,p){const v=p?new Xf(p.sequenceNumber,new Ki(Hu(p.readTime),new qe(ho(p.documentKey)),p.largestBatchId)):Xf.empty(),g=d.fields.map(([N,T])=>new sg(In.fromServerFormat(N),T));return new Xg(d.indexId,d.collectionGroup,g,v)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:At(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Md(e),s=Dc(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>me.forEach(a,l=>s.put(KI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?me.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),me.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?me.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,t,r,i){return Lc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Lc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Lc(e);let s=new tn($a);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new gu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new tn($a);const i=this.Vn(t,e);if(i==null)return r;const s=By(t);if(s!=null){const o=e.data.field(s.fieldPath);if(np(o))for(const a of o.arrayValue.values||[])r=r.add(new gu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new gu(t.indexId,e.key,Cm,i));return r}bn(e,t,r,i,s){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,p,v){const g=l.getIterator(),N=c.getIterator();let T=Rc(g),R=Rc(N);for(;T||R;){let w=!1,E=!1;if(T&&R){const L=d(T,R);L<0?E=!0:L>0&&(w=!0)}else T!=null?E=!0:w=!0;w?(p(R),R=Rc(N)):E?(v(T),T=Rc(g)):(T=Rc(g),R=Rc(N))}}(i,s,$a,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),me.waitFor(o)}yn(e){let t=1;return Dc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>$a(o,a)).filter((o,a,l)=>!a||$a(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=$a(o,e),l=$a(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Cm,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Cm,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return $a(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nE)}getMinOffset(e,t){return me.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Ye())).next(nE)}}function tE(n){return ar(n,"collectionParents")}function Lc(n){return ar(n,"indexEntries")}function Md(n){return ar(n,"indexConfiguration")}function Dc(n){return ar(n,"indexState")}function nE(n){rt(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;J_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ki(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(d,p,v)=>(a++,v.delete()));s.push(l.next(()=>{rt(a===1)}));const c=[];for(const d of t.mutations){const p=sN(e,d.key.path,t.batchId);s.push(i.delete(p)),c.push(d.key)}return me.waitFor(s).next(()=>c)}function i0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ye();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class J0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){rt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new J0(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=$c(e),o=Ga(e);return o.add({}).next(a=>{rt(typeof a=="number");const l=new sw(a,t,r,i),c=function(g,N,T){const R=T.baseMutations.map(E=>sp(g.ct,E)),w=T.mutations.map(E=>sp(g.ct,E));return{userId:N,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:R,mutations:w}}(this.serializer,this.userId,l),d=[];let p=new tn((v,g)=>At(v.canonicalString(),g.canonicalString()));for(const v of i){const g=sN(this.userId,v.key.path,a);p=p.add(v.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,wF))}return p.forEach(v=>{d.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),me.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Ga(e).get(t).next(r=>r?(rt(r.userId===this.userId),pu(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?me.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ga(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(rt(a.batchId>=r),s=pu(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ga(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).U("userMutationsIndex",t).next(r=>r.map(i=>pu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=og(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return $c(e).J({range:i},(o,a,l)=>{const[c,d,p]=o,v=ho(d);if(c===this.userId&&t.path.isEqual(v))return Ga(e).get(p).next(g=>{if(!g)throw Ye();rt(g.userId===this.userId),s.push(pu(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(At);const i=[];return t.forEach(s=>{const o=og(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$c(e).J({range:a},(c,d,p)=>{const[v,g,N]=c,T=ho(g);v===this.userId&&s.path.isEqual(T)?r=r.add(N):p.done()});i.push(l)}),me.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=og(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new tn(At);return $c(e).J({range:o},(l,c,d)=>{const[p,v,g]=l,N=ho(v);p===this.userId&&r.isPrefixOf(N)?N.length===i&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ga(e).get(s).next(o=>{if(o===null)throw Ye();rt(o.userId===this.userId),r.push(pu(this.serializer,o))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return $c(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ho(s[1]);i.push(l)}else a.done()}).next(()=>{rt(i.length===0)})})}containsKey(e,t){return iP(e,this.userId,t)}Nn(e){return sP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iP(n,e,t){const r=og(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $c(n).J({range:s,H:!0},(a,l,c)=>{const[d,p,v]=a;d===e&&p===i&&(o=!0),c.done()}).next(()=>o)}function Ga(n){return ar(n,"mutations")}function $c(n){return ar(n,"documentMutations")}function sP(n){return ar(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ku(0)}static kn(){return new Ku(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Ku(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>st.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Oc(e).J((o,a)=>{const l=tf(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Oc(e).J((r,i)=>{const s=tf(i);t(s)})}qn(e){return iE(e).get("targetGlobalKey").next(t=>(rt(t!==null),t))}Qn(e,t){return iE(e).put("targetGlobalKey",t)}Kn(e,t){return Oc(e).put(eP(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Oc(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=tf(a);Sp(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=el(e);return t.forEach(o=>{const a=ei(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=el(e);return me.forEach(t,s=>{const o=ei(s.path);return me.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=el(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=el(e);let s=St();return i.J({range:r,H:!0},(o,a,l)=>{const c=ho(o[1]),d=new qe(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=ei(t.path),i=IDBKeyRange.bound([r],[XS(r)],!1,!0);let s=0;return el(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Oc(e).get(t).next(r=>r?tf(r):null)}}function Oc(n){return ar(n,"targets")}function iE(n){return ar(n,"targetGlobal")}function el(n){return ar(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE([n,e],[t,r]){const i=At(n,t);return i===0?At(e,r):i}class F7{constructor(e){this.Un=e,this.buffer=new tn(sE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vl(t)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ml(t)}await this.Hn(3e5)})}}class V7{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return me.resolve(wi.oe);const r=new F7(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(rE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Uc()<=Pt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function j7(n,e){return new V7(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,t){this.db=e,this.garbageCollector=j7(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return km(e,r)}removeReference(e,t,r){return km(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return km(e,t)}nr(e,t){return function(i,s){let o=!1;return sP(i).Y(a=>iP(i,a,s).next(l=>(l&&(o=!0),me.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,st.min()),el(e).delete(function(p){return[0,ei(p.path)]}(o))))});i.push(l)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return km(e,t)}tr(e,t){const r=el(e);let i,s=wi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==wi.oe&&t(new qe(ho(i)),s),s=c,i=l):s=wi.oe}).next(()=>{s!==wi.oe&&t(new qe(ho(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function km(n,e){return el(n).put(function(r,i){return{targetId:0,path:ei(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.changes=new jl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return au(e).put(r)}removeEntry(e,t,r){return au(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],n0(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return au(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return au(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(i,s)=>{r={document:this.ir(t,s),size:i0(s)}}).next(()=>r)}getEntries(e,t){let r=Ii();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ii(),i=new dn(qe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,i0(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return me.resolve();let i=new tn(lE);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Vd(i.first()),Vd(i.last())),o=i.getIterator();let a=o.getNext();return au(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const p=qe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&lE(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Vd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),n0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return au(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=Ii();for(const p of c){const v=this.ir(qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);v.isFoundDocument()&&(Pp(t,v)||i.has(v.key))&&(d=d.insert(v.key,v))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Ii();const o=aE(t,r),a=aE(t,Ki.max());return au(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const p=this.ir(qe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new q7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oE(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}rr(e,t){return oE(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=x7(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(st.min())))return r}return vn.newInvalidDocument(e)}}function aP(n){return new B7(n)}class q7 extends oP{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new jl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new tn((s,o)=>At(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=WI(this.cr.serializer,o);i=i.add(s.path.popLast());const c=i0(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=WI(this.cr.serializer,o.convertToNoDocument(st.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function oE(n){return ar(n,"remoteDocumentGlobal")}function au(n){return ar(n,"remoteDocumentsV14")}function Vd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aE(n,e){const t=e.documentKey.path.toArray();return[n,n0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=At(t[s],r[s]),i)return i;return i=At(t.length,r.length),i||(i=At(t[t.length-2],r[r.length-2]),i||At(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yf(r.mutation,i,bi.empty(),An.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,St()).next(()=>r))}getLocalViewOfDocuments(e,t,r=St()){const i=fo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Zd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=fo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,St()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ii();const o=vf(),a=function(){return vf()}();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof pa)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),yf(d.mutation,c,d.mutation.getFieldMask(),An.now())):o.set(c.key,bi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var p;return a.set(c,new z7(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=vf();let i=new dn((o,a)=>o-a),s=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=r.get(l)||bi.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(i.get(a.batchId)||St()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=SN();d.forEach(v=>{if(!s.has(v)){const g=DN(t.get(v),r.get(v));g!==null&&p.set(v,g),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return me.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return qe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):me.resolve(fo());let a=-1,l=s;return o.next(c=>me.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?me.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{l=l.insert(d,v)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,St())).next(d=>({batchId:a,changes:TN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=Zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Zd();return this.indexManager.getCollectionParents(e,s).next(a=>me.forEach(a,l=>{const c=function(p,v){return new fa(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,vn.newInvalidDocument(d)))});let a=Zd();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&yf(d.mutation,c,bi.empty(),An.now()),Pp(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return me.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Kn(i.createTime)}}(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:cw(i.bundledQuery),readTime:Kn(i.readTime)}}(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this.overlays=new dn(qe.comparator),this.Ir=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fo();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=fo(),s=t.length+1,o=new qe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new dn((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=fo(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=fo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return me.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aw(t,r));let s=this.Ir.get(t);s===void 0&&(s=St(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.Tr=new tn(hr.Er),this.dr=new tn(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new qe(new Lt([])),r=new hr(t,e),i=new hr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qe(new Lt([])),r=new hr(t,e),i=new hr(t,e+1);let s=St();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hr(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qe.comparator(e.key,t.key)||At(e.wr,t.wr)}static Ar(e,t){return At(e.wr,t.wr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tn(hr.Er)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sw(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return me.resolve(o)}lookupMutationBatch(e,t){return me.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),i=new hr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(At);return t.forEach(i=>{const s=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),me.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const o=new hr(new qe(s),0);let a=new tn(At);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),me.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return me.forEach(t.mutations,i=>{const s=new hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hr(t,0),i=this.br.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.Mr=e,this.docs=function(){return new dn(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Ii();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),me.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ii();const o=t.path,a=new qe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||J_(eN(d),r)<=0||(i.has(d.key)||Pp(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye()}Or(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Q7(this)}getSize(e){return me.resolve(this.size)}}class Q7 extends oP{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.persistence=e,this.Nr=new jl(t=>zu(t),Sp),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fw,this.targetCount=0,this.kr=Ku.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),me.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Kn(t),me.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new wi(0),this.Kr=!1,this.Kr=!0,this.$r=new W7,this.referenceDelegate=e(this),this.Ur=new J7(this),this.indexManager=new L7,this.remoteDocumentCache=function(i){return new K7(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ZN(t),this.Gr=new $7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new H7(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new Y7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return me.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Y7 extends nN{constructor(e){super(),this.currentSequenceNumber=e}}class Y0{constructor(e){this.persistence=e,this.Jr=new fw,this.Yr=null}static Zr(e){return new Y0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ye()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),me.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xr,r=>{const i=qe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,st.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return me.or([()=>me.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.serializer=e}O(e,t,r,i){const s=new $0("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0}),l.createObjectStore("documentMutations")}(e),uE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=me.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),uE(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0});const p=c.store("mutations"),v=d.map(g=>p.put(g));return me.waitFor(v)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:RF});c.createIndex("collectionPathOverlayIndex",LF,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",DF,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:bF});c.createIndex("documentKeyIndex",IF),c.createIndex("collectionGroupIndex",EF)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:NF}).createIndex("sequenceNumberIndex",PF,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:CF}).createIndex("documentKeyIndex",kF,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=i0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>me.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>me.forEach(a,l=>{rt(l.userId===s.userId);const c=pu(this.serializer,l);return rP(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Lt(o),c=function(p){return[0,ei(p)]}(l);s.push(t.get(c).next(d=>d?me.resolve():(p=>t.put({targetId:0,path:ei(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>me.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:SF});const r=t.store("collectionParents"),i=new dw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ei(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Lt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=ho(a);return s(d.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=tf(i),o=eP(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(p){return p.document?new qe(Lt.fromString(p.document.name).popFirst(5)):p.noDocument?qe.fromSegments(p.noDocument.path):p.unknownDocument?qe.fromSegments(p.unknownDocument.path):Ye()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>me.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=aP(this.serializer),s=new uP(Y0.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:St();pu(this.serializer,l).keys().forEach(p=>d=d.add(p)),a.set(l.userId,d)}),me.forEach(a,(l,c)=>{const d=new fr(c),p=Q0.lt(this.serializer,d),v=s.getIndexManager(d),g=J0.lt(d,this.serializer,v,s.referenceDelegate);return new lP(i,g,p,v).recalculateAndSaveOverlaysForDocumentKeys(new qy(t,wi.oe),l).next()})})}}function uE(n){n.createObjectStore("targetDocuments",{keyPath:xF}).createIndex("documentTargetsIndex",TF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AF,{unique:!0}),n.createObjectStore("targetGlobal")}const _v="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pw{constructor(e,t,r,i,s,o,a,l,c,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!pw.D())throw new ke(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new U7(this,i),this.Ai=t+"main",this.serializer=new ZN(l),this.Ri=new vo(this.Ai,this.hi,new X7(this.serializer)),this.$r=new S7,this.Ur=new O7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=aP(this.serializer),this.Gr=new T7,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(Ie.FAILED_PRECONDITION,_v);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new wi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Vl(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return jd(e).get("owner").next(t=>me.resolve(this.vi(t)))}Ci(e){return Rm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=ar(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return me.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?me.resolve(!0):jd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ke(Ie.FAILED_PRECONDITION,_v);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rm(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new qy(e,wi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Rm(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return J0.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new D7(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Q0.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?MF:l===16?FF:l===15?X_:l===14?lN:l===13?aN:l===12?OF:l===11?oN:void Ye()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new qy(a,this.Qr?this.Qr.next():wi.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ke(Ie.FAILED_PRECONDITION,tN);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return jd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(Ie.FAILED_PRECONDITION,_v)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jd(e).put("owner",t)}static D(){return vo.D()}bi(e){const t=jd(e);return t.get("owner").next(r=>this.vi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Hn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;LT()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jd(n){return ar(n,"owner")}function Rm(n){return ar(n,"clientMetadata")}function mw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=St(),i=St();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return LT()?8:rN(Bt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Z7;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Uc()<=Pt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Bc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),me.resolve()):(Uc()<=Pt.DEBUG&&Re("QueryEngine","Query:",Bc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Uc()<=Pt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Bc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):me.resolve())}Yi(e,t){if(OI(t))return me.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=t0(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=St(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,t0(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return OI(t)||i.isEqual(st.min())?me.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?me.resolve(null):(Uc()<=Pt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bc(t)),this.rs(e,o,t,ZS(i,-1)).next(a=>a))})}ts(e,t){let r=new tn(AN(e));return t.forEach((i,s)=>{Pp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Uc()<=Pt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Bc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ki.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new dn(At),this._s=new jl(s=>zu(s),Sp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function hP(n,e,t,r){return new eM(n,e,t,r)}async function dP(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=St();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function tM(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,v=p.keys();let g=me.resolve();return v.forEach(N=>{g=g.next(()=>d.getEntry(l,N)).next(T=>{const R=c.docVersions.get(N);rt(R!==null),T.version.compareTo(R)<0&&(p.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),d.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=St();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fP(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function nM(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((d,p)=>{const v=i.get(p);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,p)));let g=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Mn.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(p,g),function(T,R,w){return T.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,g,d)&&a.push(t.Ur.updateTargetData(s,g))});let l=Ii(),c=St();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(pP(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(st.min())){const d=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return me.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}function pP(n,e,t){let r=St(),i=St();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ii();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(st.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function rM(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uh(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Zo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Bh(n,e,t){const r=Ge(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vl(o))throw o;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function s0(n,e,t){const r=Ge(n);let i=st.min(),s=St();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=Ge(l),v=p._s.get(d);return v!==void 0?me.resolve(p.os.get(v)):p.Ur.getTargetData(c,d)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:st.min(),t?s:St())).next(a=>(vP(r,EN(e),a),{documents:a,Ts:s})))}function mP(n,e){const t=Ge(n),r=Ge(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function gP(n,e){const t=Ge(n),r=t.us.get(e)||st.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,ZS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vP(t,e,i),i))}function vP(n,e,t){let r=n.us.get(e)||st.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function iM(n,e,t,r){const i=Ge(n);let s=St(),o=Ii();for(const c of t){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const p=e.ds(c);p.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,p)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Uh(i,function(d){return ti(ed(Lt.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>pP(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function sM(n,e,t=St()){const r=await Uh(n,ti(cw(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Kn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Mn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function cE(n,e){return`firestore_clients_${n}_${e}`}function hE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wv(n,e){return`firestore_targets_${n}_${e}`}class o0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ke(i.error.code,i.error.message))),o?new o0(e,t,i.state,s):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _f{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ke(r.error.code,r.error.message))),s?new _f(e,r.state,i):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=nw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=iN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new a0(e,s):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vw{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new vw(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n2{constructor(){this.activeTargetIds=nw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bv{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new dn(At),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=cE(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new n2),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(cE(this.persistenceKey,r));if(i){const s=a0.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(wv(this.persistenceKey,e));if(i){const s=_f.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Re("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let o=wi.oe;if(s!=null)try{const a=JSON.parse(s);rt(typeof a=="number"),o=a}catch(a){Hn("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==wi.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new o0(this.currentUser,e,t,r),s=hE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=hE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=wv(this.persistenceKey,e),s=new _f(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return a0.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return o0.Rs(new fr(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return _f.Rs(i,t)}Ls(e){return vw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class yP{constructor(){this.so=new n2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new n2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm=null;function Iv(){return Lm===null?Lm=function(){return 268435456+Math.round(2147483648*Math.random())}():Lm++,"0x"+Lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="WebChannelConnection";class uM extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=Iv(),l=this.xo(t,r.toUriEncodedString());Re("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(d=>(Re("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Eo("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=aM[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Iv();return new Promise((o,a)=>{const l=new GS;l.setWithCredentials(!0),l.listenOnce(WS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ig.NO_ERROR:const d=l.getResponseJson();Re(Dr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ig.TIMEOUT:Re(Dr,`RPC '${e}' ${s} timed out`),a(new ke(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case ig.HTTP_ERROR:const p=l.getStatus();if(Re(Dr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const g=v==null?void 0:v.error;if(g&&g.status&&g.message){const N=function(R){const w=R.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(w)>=0?w:Ie.UNKNOWN}(g.status);a(new ke(N,g.message))}else a(new ke(Ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ke(Ie.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{Re(Dr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Re(Dr,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=Iv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QS(),a=KS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Re(Dr,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let v=!1,g=!1;const N=new lM({Io:R=>{g?Re(Dr,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(Re(Dr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),Re(Dr,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),T=(R,w,E)=>{R.listen(w,L=>{try{E(L)}catch($){setTimeout(()=>{throw $},0)}})};return T(p,Xd.EventType.OPEN,()=>{g||(Re(Dr,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),T(p,Xd.EventType.CLOSE,()=>{g||(g=!0,Re(Dr,`RPC '${e}' stream ${i} transport closed`),N.So())}),T(p,Xd.EventType.ERROR,R=>{g||(g=!0,Eo(Dr,`RPC '${e}' stream ${i} transport errored:`,R),N.So(new ke(Ie.UNAVAILABLE,"The operation could not be completed")))}),T(p,Xd.EventType.MESSAGE,R=>{var w;if(!g){const E=R.data[0];rt(!!E);const L=E,$=L.error||((w=L[0])===null||w===void 0?void 0:w.error);if($){Re(Dr,`RPC '${e}' stream ${i} received error:`,$);const G=$.status;let K=function(F){const U=Zn[F];if(U!==void 0)return MN(U)}(G),P=$.message;K===void 0&&(K=Ie.INTERNAL,P="Unknown error status: "+G+" with message "+$.message),g=!0,N.So(new ke(K,P)),p.close()}else Re(Dr,`RPC '${e}' stream ${i} received:`,E),N.bo(E)}}),T(a,HS.STAT_EVENT,R=>{R.stat===Uy.PROXY?Re(Dr,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Uy.NOPROXY&&Re(Dr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){return typeof window<"u"?window:null}function hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n){return new m7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ke(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cM extends wP{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=y7(this.serializer,e),r=function(s){if(!("targetChange"in s))return st.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?Kn(o.readTime):st.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Yy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Zg(l)?{documents:HN(s,l)}:{query:KN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BN(s,o.resumeToken);const c=Qy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(st.min())>0){a.readTime=jh(s,o.snapshotVersion.toTimestamp());const c=Qy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=w7(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Yy(this.serializer),t.removeTarget=e,this.a_(t)}}class hM extends wP{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=_7(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Yy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sp(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Jy(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(Ie.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Jy(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(Ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hn(t),this.D_=!1):Re("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ul(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ge(l);c.L_.add(4),await rd(c),c.q_.set("Unknown"),c.L_.delete(4),await Dp(c)}(this))})}),this.q_=new fM(r,i)}}async function Dp(n){if(Ul(n))for(const e of n.B_)await e(!0)}async function rd(n){for(const e of n.B_)await e(!1)}function X0(n,e){const t=Ge(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bw(t)?ww(t):sd(t).r_()&&_w(t,e))}function qh(n,e){const t=Ge(n),r=sd(t);t.N_.delete(e),r.r_()&&bP(t,e),t.N_.size===0&&(r.r_()?r.o_():Ul(t)&&t.q_.set("Unknown"))}function _w(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sd(n).A_(e)}function bP(n,e){n.Q_.xe(e),sd(n).R_(e)}function ww(n){n.Q_=new h7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),sd(n).start(),n.q_.v_()}function bw(n){return Ul(n)&&!sd(n).n_()&&n.N_.size>0}function Ul(n){return Ge(n).L_.size===0}function IP(n){n.Q_=void 0}async function mM(n){n.q_.set("Online")}async function gM(n){n.N_.forEach((e,t)=>{_w(n,e)})}async function vM(n,e){IP(n),bw(n)?(n.q_.M_(e),ww(n)):n.q_.set("Unknown")}async function yM(n,e,t){if(n.q_.set("Online"),e instanceof UN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await l0(n,r)}else if(e instanceof cg?n.Q_.Ke(e):e instanceof jN?n.Q_.He(e):n.Q_.We(e),!t.isEqual(st.min()))try{const r=await fP(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Mn.EMPTY_BYTE_STRING,d.snapshotVersion)),bP(s,l);const p=new Zo(d.target,l,c,d.sequenceNumber);_w(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),await l0(n,r)}}async function l0(n,e,t){if(!Vl(e))throw e;n.L_.add(1),await rd(n),n.q_.set("Offline"),t||(t=()=>fP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Dp(n)})}function EP(n,e){return e().catch(t=>l0(n,t,e))}async function id(n){const e=Ge(n),t=Sl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_M(e);)try{const i=await rM(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,wM(e,i)}catch(i){await l0(e,i)}AP(e)&&xP(e)}function _M(n){return Ul(n)&&n.O_.length<10}function wM(n,e){n.O_.push(e);const t=Sl(n);t.r_()&&t.V_&&t.m_(e.mutations)}function AP(n){return Ul(n)&&!Sl(n).n_()&&n.O_.length>0}function xP(n){Sl(n).start()}async function bM(n){Sl(n).p_()}async function IM(n){const e=Sl(n);for(const t of n.O_)e.m_(t.mutations)}async function EM(n,e,t){const r=n.O_.shift(),i=ow.from(r,e,t);await EP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await id(n)}async function AM(n,e){e&&Sl(n).V_&&await async function(r,i){if(function(o){return FN(o)&&o!==Ie.ABORTED}(i.code)){const s=r.O_.shift();Sl(r).s_(),await EP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await id(r)}}(n,e),AP(n)&&xP(n)}async function fE(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Ul(t);t.L_.add(3),await rd(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Dp(t)}async function r2(n,e){const t=Ge(n);e?(t.L_.delete(2),await Dp(t)):e||(t.L_.add(2),await rd(t),t.q_.set("Unknown"))}function sd(n){return n.K_||(n.K_=function(t,r,i){const s=Ge(t);return s.w_(),new cM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:mM.bind(null,n),Ro:gM.bind(null,n),mo:vM.bind(null,n),d_:yM.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),bw(n)?ww(n):n.q_.set("Unknown")):(await n.K_.stop(),IP(n))})),n.K_}function Sl(n){return n.U_||(n.U_=function(t,r,i){const s=Ge(t);return s.w_(),new hM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bM.bind(null,n),mo:AM.bind(null,n),f_:IM.bind(null,n),g_:EM.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await id(n)):(await n.U_.stop(),n.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Iw(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),Vl(n))return new ke(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Zd(),this.sortedSet=new dn(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.W_=new dn(qe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ye():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class zh{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new zh(e,t,gh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class TM{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Ge(t),s=i.queries;i.queries=mE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ke(Ie.ABORTED,"Firestore shutting down"))}}function mE(){return new jl(n=>IN(n),Np)}async function Ew(n,e){const t=Ge(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xM,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=od(o,`Initialization of query '${Bc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&xw(t)}async function Aw(n,e){const t=Ge(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function SM(n,e){const t=Ge(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&xw(t)}function NM(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function xw(n){n.Y_.forEach(e=>{e.next()})}var i2,gE;(gE=i2||(i2={})).ea="default",gE.Cache="cache";class Tw{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i2.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.serializer=e}Es(e){return yo(this.serializer,e)}ds(e){return e.metadata.exists?WN(this.serializer,e.document,!1):vn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Kn(e)}}class CM{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Lt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new vE(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||St()).add(s);t.set(o,a)}}return t}async complete(){const e=await iM(this.localStore,new vE(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await sM(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function TP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.key=e}}class NP{constructor(e){this.key=e}}class PP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=St(),this.mutatedKeys=St(),this.Aa=AN(e),this.Ra=new gh(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new pE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const v=i.get(d),g=Pp(this.query,p)?p:null,N=!!v&&this.mutatedKeys.has(v.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;v&&g?v.data.isEqual(g.data)?N!==T&&(r.track({type:3,doc:g}),R=!0):this.ga(v,g)||(r.track({type:2,doc:g}),R=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!v&&g?(r.track({type:0,doc:g}),R=!0):v&&!g&&(r.track({type:1,doc:v}),R=!0,(l||c)&&(a=!0)),R&&(g?(o=o.add(g),s=T?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(g,N){const T=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return T(g)-T(N)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new zh(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=St(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new NP(r))}),this.da.forEach(r=>{e.has(r)||t.push(new SP(r))}),t}ba(e){this.Ta=e.Ts,this.da=St();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RM{constructor(e){this.key=e,this.va=!1}}class LM{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jl(a=>IN(a),Np),this.Ma=new Map,this.xa=new Set,this.Oa=new dn(qe.comparator),this.Na=new Map,this.La=new fw,this.Ba={},this.ka=new Map,this.qa=Ku.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DM(n,e,t=!0){const r=Z0(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await CP(r,e,t,!0),i}async function OM(n,e){const t=Z0(n);await CP(t,e,!0,!1)}async function CP(n,e,t,r){const i=await Uh(n.localStore,ti(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Sw(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&X0(n.remoteStore,i),a}async function Sw(n,e,t,r,i){n.Ka=(p,v,g)=>async function(T,R,w,E){let L=R.view.ma(w);L.ns&&(L=await s0(T.localStore,R.query,!1).then(({documents:P})=>R.view.ma(P,L)));const $=E&&E.targetChanges.get(R.targetId),G=E&&E.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(L,T.isPrimaryClient,$,G);return s2(T,R.targetId,K.wa),K.snapshot}(n,p,v,g);const s=await s0(n.localStore,e,!0),o=new PP(e,s.Ts),a=o.ma(s.documents),l=Rp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);s2(n,t,c.wa);const d=new kM(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function FM(n,e,t){const r=Ge(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Np(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qh(r.remoteStore,i.targetId),$h(r,i.targetId)}).catch(Ml)):($h(r,i.targetId),await Bh(r.localStore,i.targetId,!0))}async function MM(n,e){const t=Ge(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qh(t.remoteStore,r.targetId))}async function VM(n,e,t){const r=kw(n);try{const i=await function(o,a){const l=Ge(o),c=An.now(),d=a.reduce((g,N)=>g.add(N.key),St());let p,v;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let N=Ii(),T=St();return l.cs.getEntries(g,d).next(R=>{N=R,N.forEach((w,E)=>{E.isValidDocument()||(T=T.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,N)).next(R=>{p=R;const w=[];for(const E of a){const L=l7(E,p.get(E.key).overlayedDocument);L!=null&&w.push(new pa(E.key,L,fN(L.value.mapValue),En.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(R=>{v=R;const w=R.applyToLocalDocumentSet(p,T);return l.documentOverlayCache.saveOverlays(g,R.batchId,w)})}).then(()=>({batchId:v.batchId,changes:TN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new dn(At)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await ma(r,i.changes),await id(r.remoteStore)}catch(i){const s=od(i,"Failed to persist write");t.reject(s)}}async function kP(n,e){const t=Ge(n);try{const r=await nM(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?rt(o.va):i.removedDocuments.size>0&&(rt(o.va),o.va=!1))}),await ma(t,r,e)}catch(r){await Ml(r)}}function yE(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ge(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const v of p.j_)v.Z_(a)&&(c=!0)}),c&&xw(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jM(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new dn(qe.comparator);o=o.insert(s,vn.newNoDocument(s,st.min()));const a=St().add(s),l=new kp(st.min(),new Map,new dn(At),o,a);await kP(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cw(r)}else await Bh(r.localStore,e,!1).then(()=>$h(r,e,t)).catch(Ml)}async function UM(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=await tM(t.localStore,e);Pw(t,r,null),Nw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ma(t,i)}catch(i){await Ml(i)}}async function BM(n,e,t){const r=Ge(n);try{const i=await function(o,a){const l=Ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(rt(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Pw(r,e,t),Nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ma(r,i)}catch(i){await Ml(i)}}async function qM(n,e){const t=Ge(n);Ul(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Ge(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=od(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Nw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Pw(n,e,t){const r=Ge(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function $h(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||RP(n,r)})}function RP(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(qh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cw(n))}function s2(n,e,t){for(const r of t)r instanceof SP?(n.La.addReference(r.key,e),zM(n,r)):r instanceof NP?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||RP(n,r.key)):Ye()}function zM(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cw(n))}function Cw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new qe(Lt.fromString(e)),r=n.qa.next();n.Na.set(r,new RM(t)),n.Oa=n.Oa.insert(t,r),X0(n.remoteStore,new Zo(ti(ed(t.path)),r,"TargetPurposeLimboResolution",wi.oe))}}async function ma(n,e,t){const r=Ge(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=gw.Wi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=Ge(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>me.forEach(c,v=>me.forEach(v.$i,g=>d.persistence.referenceDelegate.addReference(p,v.targetId,g)).next(()=>me.forEach(v.Ui,g=>d.persistence.referenceDelegate.removeReference(p,v.targetId,g)))))}catch(p){if(!Vl(p))throw p;Re("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const v=p.targetId;if(!p.fromCache){const g=d.os.get(v),N=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(N);d.os=d.os.insert(v,T)}}}(r.localStore,s))}async function $M(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=await dP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ke(Ie.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ma(t,r.hs)}}function GM(n,e){const t=Ge(n),r=t.Na.get(e);if(r&&r.va)return St().add(r.key);{let i=St();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function WM(n,e){const t=Ge(n),r=await s0(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&s2(t,e.targetId,i.wa),i}async function HM(n,e){const t=Ge(n);return gP(t.localStore,e).then(r=>ma(t,r))}async function KM(n,e,t,r){const i=Ge(n),s=await function(a,l){const c=Ge(a),d=Ge(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>d.Mn(p,l).next(v=>v?c.localDocuments.getDocuments(p,v):me.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await id(i.remoteStore):t==="acknowledged"||t==="rejected"?(Pw(i,e,r||null),Nw(i,e),function(a,l){Ge(Ge(a).mutationQueue).On(l)}(i.localStore,e)):Ye(),await ma(i,s)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}async function QM(n,e){const t=Ge(n);if(Z0(t),kw(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await _E(t,r.toArray());t.Qa=!0,await r2(t.remoteStore,!0);for(const s of i)X0(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>($h(t,o),Bh(t.localStore,o,!0))),qh(t.remoteStore,o)}),await i,await _E(t,r),function(o){const a=Ge(o);a.Na.forEach((l,c)=>{qh(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new dn(qe.comparator)}(t),t.Qa=!1,await r2(t.remoteStore,!1)}}async function _E(n,e,t){const r=Ge(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Uh(r.localStore,ti(l[0]));for(const c of l){const d=r.Fa.get(c),p=await WM(r,d);p.snapshot&&s.push(p.snapshot)}}else{const c=await mP(r.localStore,o);a=await Uh(r.localStore,c),await Sw(r,LP(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function LP(n){return bN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JM(n){return function(t){return Ge(Ge(t).persistence).Qi()}(Ge(n).localStore)}async function YM(n,e,t,r){const i=Ge(n);if(i.Qa)return void Re("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await gP(i.localStore,EN(s[0])),a=kp.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Mn.EMPTY_BYTE_STRING);await ma(i,o,a);break}case"rejected":await Bh(i.localStore,e,!0),$h(i,e,r);break;default:Ye()}}async function XM(n,e,t){const r=Z0(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Re("SyncEngine","Adding an already active target "+i);continue}const s=await mP(r.localStore,i),o=await Uh(r.localStore,s);await Sw(r,LP(s),o.targetId,!1,o.resumeToken),X0(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&await Bh(r.localStore,i,!1).then(()=>{qh(r.remoteStore,i),$h(r,i)}).catch(Ml)}}function Z0(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jM.bind(null,e),e.Ca.d_=SM.bind(null,e.eventManager),e.Ca.$a=NM.bind(null,e.eventManager),e}function kw(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BM.bind(null,e),e}function ZM(n,e,t){const r=Ge(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,N){const T=Ge(g),R=Kn(N.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",w=>T.Gr.getBundleMetadata(w,N.id)).then(w=>!!w&&w.createTime.compareTo(R)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(TP(l));const c=new CM(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const v=await c.la(d);v&&a._updateProgress(v),d=await o.Ua()}const p=await c.complete();return await ma(s,p.Ia,void 0),await function(g,N){const T=Ge(g);return T.persistence.runTransaction("Save bundle","readwrite",R=>T.Gr.saveBundleMetadata(R,N))}(s.localStore,l),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return Eo("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class op{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return hP(this.persistence,new cP,e.initialUser,this.serializer)}Ga(e){return new uP(Y0.Zr,this.serializer)}Wa(e){return new yP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}op.provider={build:()=>new op};class DP extends op{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await kw(this.Ja.syncEngine),await id(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return hP(this.persistence,new cP,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new M7(r,e.asyncQueue,t)}Ha(e,t){const r=new yF(t,this.persistence);return new vF(e.asyncQueue,r)}Ga(e){const t=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new pw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_P(),hg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new yP}}class eV extends DP{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof bv&&(this.sharedClientState.syncEngine={no:KM.bind(null,t),ro:YM.bind(null,t),io:XM.bind(null,t),Qi:JM.bind(null,t),eo:HM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await QM(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=_P();if(!bv.D(t))throw new ke(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$M.bind(null,this.syncEngine),await r2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TM}()}createDatastore(e){const t=Lp(e.databaseInfo.databaseId),r=function(s){return new uM(s)}(e.databaseInfo);return function(s,o,a,l){return new dM(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new pM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>yE(this.syncEngine,t,0),function(){return dE.D()?new dE:new oM}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,d){const p=new LM(i,s,o,a,l,c);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ge(i);Re("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await rd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ap.provider={build:()=>new ap};function wE(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new PM(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ke(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=Ge(i),a={documents:s.map(p=>ip(o.serializer,p))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Lt.emptyPath(),a,s.length),c=new Map;l.forEach(p=>{const v=v7(o.serializer,p);c.set(v.key.toString(),v)});const d=[];return s.forEach(p=>{const v=c.get(p.toString());rt(!!v),d.push(v)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=qe.fromPath(r);this.mutations.push(new iw(i,this.precondition(i)))}),await async function(r,i){const s=Ge(r),o={writes:i.map(a=>sp(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Lt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ye();t=st.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(st.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(st.min()))throw new ke(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new yw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new nV(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!Tp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!FN(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=YS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=od(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ev(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function bE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Rw(n);Re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fE(e.remoteStore,i)),n._onlineComponents=e}async function Rw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ev(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),await Ev(n,new op)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await Ev(n,new op);return n._offlineComponents}async function t1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await bE(n,n._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await bE(n,new ap))),n._onlineComponents}function OP(n){return Rw(n).then(e=>e.persistence)}function Lw(n){return Rw(n).then(e=>e.localStore)}function FP(n){return t1(n).then(e=>e.remoteStore)}function Dw(n){return t1(n).then(e=>e.syncEngine)}function sV(n){return t1(n).then(e=>e.datastore)}async function Gh(n){const e=await t1(n),t=e.eventManager;return t.onListen=DM.bind(null,e.syncEngine),t.onUnlisten=FM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MM.bind(null,e.syncEngine),t}function oV(n){return n.asyncQueue.enqueue(async()=>{const e=await OP(n),t=await FP(n);return e.setNetworkEnabled(!0),function(i){const s=Ge(i);return s.L_.delete(0),Dp(s)}(t)})}function aV(n){return n.asyncQueue.enqueue(async()=>{const e=await OP(n),t=await FP(n);return e.setNetworkEnabled(!1),async function(i){const s=Ge(i);s.L_.add(0),await rd(s),s.q_.set("Offline")}(t)})}function lV(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const p=Ge(c);return p.persistence.runTransaction("read document","readonly",v=>p.localDocuments.getDocument(v,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new ke(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=od(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Lw(n),e,t)),t.promise}function MP(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new e1({next:v=>{d.Za(),o.enqueueAndForget(()=>Aw(s,p));const g=v.docs.has(a);!g&&v.fromCache?c.reject(new ke(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&v.fromCache&&l&&l.source==="server"?c.reject(new ke(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(v)},error:v=>c.reject(v)}),p=new Tw(ed(a.path),d,{includeMetadataChanges:!0,_a:!0});return Ew(s,p)}(await Gh(n),n.asyncQueue,e,t,r)),r.promise}function uV(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await s0(i,s,!0),l=new PP(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=od(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Lw(n),e,t)),t.promise}function VP(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new e1({next:v=>{d.Za(),o.enqueueAndForget(()=>Aw(s,p)),v.fromCache&&l.source==="server"?c.reject(new ke(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(v)},error:v=>c.reject(v)}),p=new Tw(a,d,{includeMetadataChanges:!0,_a:!0});return Ew(s,p)}(await Gh(n),n.asyncQueue,e,t,r)),r.promise}function cV(n,e){const t=new e1(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){Ge(i).Y_.add(s),s.next()}(await Gh(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){Ge(i).Y_.delete(s)}(await Gh(n),t))}}function hV(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?VN().encode(o):o,function(d,p){return new tV(d,p)}(function(d,p){if(d instanceof Uint8Array)return wE(d,p);if(d instanceof ArrayBuffer)return wE(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Lp(e));n.asyncQueue.enqueueAndForget(async()=>{ZM(await Dw(n),i,r)})}function dV(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=Ge(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Lw(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n,e,t){if(!t)throw new ke(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UP(n,e,t,r){if(e===!0&&r===!0)throw new ke(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EE(n){if(!qe.isDocumentKey(n))throw new ke(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AE(n){if(qe.isDocumentKey(n))throw new ke(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function n1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye()}function Ut(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=n1(n);throw new ke(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BP(n,e){if(e<=0)throw new ke(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ke(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ke(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Op{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oF;switch(r.type){case"firstParty":return new cF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=IE.get(t);r&&(Re("ComponentProvider","Removing Datastore"),IE.delete(t),r.terminate())}(this),Promise.resolve()}}function fV(n,e,t,r={}){var i;const s=(n=Ut(n,Op))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=fr.MOCK_USER;else{a=xR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ke(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fr(c)}n._authCredentials=new aF(new JS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=class qP{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qP(this.firestore,e,this._query)}},Sn=class zP{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zP(this.firestore,e,this._key)}},vl=class $P extends ni{constructor(e,t,r){super(e,t,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new qe(e))}withConverter(e){return new $P(this.firestore,e,this._path)}};function Fw(n,e,...t){if(n=ot(n),Ow("collection","path",e),n instanceof Op){const r=Lt.fromString(e,...t);return AE(r),new vl(n,null,r)}{if(!(n instanceof Sn||n instanceof vl))throw new ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return AE(r),new vl(n.firestore,null,r)}}function pV(n,e){if(n=Ut(n,Op),Ow("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,function(r){return new fa(Lt.emptyPath(),r)}(e))}function ku(n,e,...t){if(n=ot(n),arguments.length===1&&(e=YS.newId()),Ow("doc","path",e),n instanceof Op){const r=Lt.fromString(e,...t);return EE(r),new Sn(n,null,new qe(r))}{if(!(n instanceof Sn||n instanceof vl))throw new ke(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return EE(r),new Sn(n.firestore,n instanceof vl?n.converter:null,new qe(r))}}function GP(n,e){return n=ot(n),e=ot(e),(n instanceof Sn||n instanceof vl)&&(e instanceof Sn||e instanceof vl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WP(n,e){return n=ot(n),e=ot(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&Np(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yw(this,"async_queue_retry"),this.Vu=()=>{const r=hg();r&&Re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=hg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=hg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vl(e))throw e;Re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Iw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function o2(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class mV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=-1;let Qn=class extends Op{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new TE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}};function qr(n){if(n._terminated)throw new ke(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HP(n),n._firestoreClient}function HP(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,d){return new UF(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new iV(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function vV(n,e){Eo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return KP(n,ap.provider,{build:r=>new DP(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function yV(n){Eo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();KP(n,ap.provider,{build:t=>new eV(t,e.cacheSizeBytes)})}function KP(n,e,t){if((n=Ut(n,Qn))._firestoreClient||n._terminated)throw new ke(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ke(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},HP(n)}function _V(n){if(n._initialized&&!n._terminated)throw new ke(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!vo.D())return Promise.resolve();const i=r+"main";await vo.delete(i)}(mw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function wV(n){return function(t){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>qM(await Dw(t),r)),r.promise}(qr(n=Ut(n,Qn)))}function bV(n){return oV(qr(n=Ut(n,Qn)))}function IV(n){return aV(qr(n=Ut(n,Qn)))}function EV(n,e){const t=qr(n=Ut(n,Qn)),r=new mV;return hV(t,n._databaseId,e,r),r}function AV(n,e){return dV(qr(n=Ut(n,Qn)),e).then(t=>t?new ni(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(Mn.fromBase64String(e))}catch(t){throw new ke(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xo(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=/^__.*__$/;class TV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new pa(e,this.data,this.fieldMask,t,this.fieldTransforms):new td(e,this.data,t,this.fieldTransforms)}}class QP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class i1{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new i1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return u0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(JP(this.Cu)&&xV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lp(e)}Qu(e,t,r,i=!1){return new i1({Cu:e,methodName:t,qu:r,path:In.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tc(n){const e=n._freezeSettings(),t=Lp(n._databaseId);return new SV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function s1(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);$w("Data must be an object, but it was:",o,r);const a=ZP(r,o);let l,c;if(s.merge)l=new bi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const v=a2(e,p,t);if(!o.contains(v))throw new ke(Ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);t4(d,v)||d.push(v)}l=new bi(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new TV(new Er(a),l,c)}class Fp extends ec{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fp}}function YP(n,e,t){return new i1({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vw extends ec{_toFieldTransform(e){return new Cp(e.path,new Mh)}isEqual(e){return e instanceof Vw}}class jw extends ec{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=YP(this,e,!0),r=this.Ku.map(s=>nc(s,t)),i=new $u(r);return new Cp(e.path,i)}isEqual(e){return e instanceof jw&&zf(this.Ku,e.Ku)}}class Uw extends ec{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=YP(this,e,!0),r=this.Ku.map(s=>nc(s,t)),i=new Gu(r);return new Cp(e.path,i)}isEqual(e){return e instanceof Uw&&zf(this.Ku,e.Ku)}}class Bw extends ec{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Vh(e.serializer,PN(e.serializer,this.$u));return new Cp(e.path,t)}isEqual(e){return e instanceof Bw&&this.$u===e.$u}}function qw(n,e,t,r){const i=n.Qu(1,e,t);$w("Data must be an object, but it was:",i,r);const s=[],o=Er.empty();Zu(r,(l,c)=>{const d=Gw(e,l,t);c=ot(c);const p=i.Nu(d);if(c instanceof Fp)s.push(d);else{const v=nc(c,p);v!=null&&(s.push(d),o.set(d,v))}});const a=new bi(s);return new QP(o,a,i.fieldTransforms)}function zw(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[a2(e,r,t)],l=[i];if(s.length%2!=0)throw new ke(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(a2(e,s[v])),l.push(s[v+1]);const c=[],d=Er.empty();for(let v=a.length-1;v>=0;--v)if(!t4(c,a[v])){const g=a[v];let N=l[v];N=ot(N);const T=o.Nu(g);if(N instanceof Fp)c.push(g);else{const R=nc(N,T);R!=null&&(c.push(g),d.set(g,R))}}const p=new bi(c);return new QP(d,p,o.fieldTransforms)}function XP(n,e,t,r=!1){return nc(t,n.Qu(r?4:3,e))}function nc(n,e){if(e4(n=ot(n)))return $w("Unsupported field value:",e,n),ZP(n,e);if(n instanceof ec)return function(r,i){if(!JP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=nc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=An.fromDate(r);return{timestampValue:jh(i.serializer,s)}}if(r instanceof An){const s=new An(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jh(i.serializer,s)}}if(r instanceof r1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xo)return{bytesValue:BN(i.serializer,r._byteString)};if(r instanceof Sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mw)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return rw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${n1(r)}`)}(n,e)}function ZP(n,e){const t={};return uN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zu(n,(r,i)=>{const s=nc(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function e4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof An||n instanceof r1||n instanceof xo||n instanceof Sn||n instanceof ec||n instanceof Mw)}function $w(n,e,t){if(!e4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=n1(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function a2(n,e,t){if((e=ot(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return Gw(n,e);throw u0("Field path arguments must be of type string or ",n,!1,void 0,t)}const NV=new RegExp("[~\\*/\\[\\]]");function Gw(n,e,t){if(e.search(NV)>=0)throw u0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw u0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function u0(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ke(Ie.INVALID_ARGUMENT,a+n+l)}function t4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PV extends lp{data(){return super.data()}}function o1(n,e){return typeof e=="string"?Gw(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}class Mp extends Ww{}function Ho(n,e,...t){let r=[];e instanceof Ww&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Hw).length,a=s.filter(l=>l instanceof a1).length;if(o>1||o>0&&a>0)throw new ke(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class a1 extends Mp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new a1(e,t,r)}_apply(e){const t=this._parse(e);return s4(e._query,t),new ni(e.firestore,e.converter,Ky(e._query,t))}_parse(e){const t=tc(e.firestore);return function(s,o,a,l,c,d,p){let v;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ke(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){NE(p,d);const g=[];for(const N of p)g.push(SE(l,s,N));v={arrayValue:{values:g}}}else v=SE(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||NE(p,d),v=XP(a,o,p,d==="in"||d==="not-in");return Dt.create(c,d,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function CV(n,e,t){const r=e,i=o1("where",n);return a1._create(i,r,t)}class Hw extends Ww{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Qt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)s4(o,l),o=Ky(o,l)}(e._query,t),new ni(e.firestore,e.converter,Ky(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kw extends Mp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Kw(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new ke(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ke(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rp(s,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function r4(n,e="asc"){const t=e,r=o1("orderBy",n);return Kw._create(r,t)}class l1 extends Mp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new l1(e,t,r)}_apply(e){return new ni(e.firestore,e.converter,t0(e._query,this._limit,this._limitType))}}function kV(n){return BP("limit",n),l1._create("limit",n,"F")}function RV(n){return BP("limitToLast",n),l1._create("limitToLast",n,"L")}class u1 extends Mp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new u1(e,t,r)}_apply(e){const t=i4(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,function(i,s){return new fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function LV(...n){return u1._create("startAt",n,!0)}function DV(...n){return u1._create("startAfter",n,!1)}class c1 extends Mp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new c1(e,t,r)}_apply(e){const t=i4(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,function(i,s){return new fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function OV(...n){return c1._create("endBefore",n,!1)}function FV(...n){return c1._create("endAt",n,!0)}function i4(n,e,t,r){if(t[0]=ot(t[0]),t[0]instanceof lp)return function(s,o,a,l,c){if(!l)throw new ke(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of mh(s))if(p.field.isKeyField())d.push(qu(o,l.key));else{const v=l.data.field(p.field);if(G0(v))throw new ke(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const g=p.field.canonicalString();throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(v)}return new Tl(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tc(n.firestore);return function(o,a,l,c,d,p){const v=o.explicitOrderBy;if(d.length>v.length)throw new ke(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let N=0;N<d.length;N++){const T=d[N];if(v[N].field.isKeyField()){if(typeof T!="string")throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!tw(o)&&T.indexOf("/")!==-1)throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const R=o.path.child(Lt.fromString(T));if(!qe.isDocumentKey(R))throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const w=new qe(R);g.push(qu(a,w))}else{const R=XP(l,c,T);g.push(R)}}return new Tl(g,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function SE(n,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new ke(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tw(e)&&t.indexOf("/")!==-1)throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!qe.isDocumentKey(r))throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qu(n,new qe(r))}if(t instanceof Sn)return qu(n,t._key);throw new ke(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n1(t)}.`)}function NE(n,e){if(!Array.isArray(n)||n.length===0)throw new ke(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s4(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Qw{convertValue(e,t="none"){switch(Bu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>wn(o.doubleValue));return new Mw(s)}convertGeoPoint(e){return new r1(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Z_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const t=la(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);rt(XN(r));const i=new Al(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||Hn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MV extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ua=class extends lp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(o1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},wf=class extends ua{data(e={}){return super.data(e)}},Pl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Eu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wf(this._firestore,this._userDataWriter,r.key,r,new Eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new wf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Eu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Eu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:VV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function VV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}function o4(n,e){return n instanceof ua&&e instanceof ua?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pl&&e instanceof Pl&&n._firestore===e._firestore&&WP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){n=Ut(n,Sn);const e=Ut(n.firestore,Qn);return MP(qr(e),n._key).then(t=>Jw(e,n,t))}class rc extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function jV(n){n=Ut(n,Sn);const e=Ut(n.firestore,Qn),t=qr(e),r=new rc(e);return lV(t,n._key).then(i=>new ua(e,r,n._key,i,new Eu(i!==null&&i.hasLocalMutations,!0),n.converter))}function UV(n){n=Ut(n,Sn);const e=Ut(n.firestore,Qn);return MP(qr(e),n._key,{source:"server"}).then(t=>Jw(e,n,t))}function l4(n){n=Ut(n,ni);const e=Ut(n.firestore,Qn),t=qr(e),r=new rc(e);return n4(n._query),VP(t,n._query).then(i=>new Pl(e,r,n,i))}function BV(n){n=Ut(n,ni);const e=Ut(n.firestore,Qn),t=qr(e),r=new rc(e);return uV(t,n._query).then(i=>new Pl(e,r,n,i))}function qV(n){n=Ut(n,ni);const e=Ut(n.firestore,Qn),t=qr(e),r=new rc(e);return VP(t,n._query,{source:"server"}).then(i=>new Pl(e,r,n,i))}function PE(n,e,t){n=Ut(n,Sn);const r=Ut(n.firestore,Qn),i=h1(n.converter,e,t);return Vp(r,[s1(tc(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,En.none())])}function l2(n,e,t,...r){n=Ut(n,Sn);const i=Ut(n.firestore,Qn),s=tc(i);let o;return o=typeof(e=ot(e))=="string"||e instanceof Nl?zw(s,"updateDoc",n._key,e,t,r):qw(s,"updateDoc",n._key,e),Vp(i,[o.toMutation(n._key,En.exists(!0))])}function u4(n){return Vp(Ut(n.firestore,Qn),[new nd(n._key,En.none())])}function c4(n,e){const t=Ut(n.firestore,Qn),r=ku(n),i=h1(n.converter,e);return Vp(t,[s1(tc(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function h4(n,...e){var t,r,i;n=ot(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||o2(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(o2(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,d;if(n instanceof Sn)c=Ut(n.firestore,Qn),d=ed(n._key.path),l={next:p=>{e[o]&&e[o](Jw(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Ut(n,ni);c=Ut(p.firestore,Qn),d=p._query;const v=new rc(c);l={next:g=>{e[o]&&e[o](new Pl(c,v,p,g))},error:e[o+1],complete:e[o+2]},n4(n._query)}return function(v,g,N,T){const R=new e1(T),w=new Tw(g,R,N);return v.asyncQueue.enqueueAndForget(async()=>Ew(await Gh(v),w)),()=>{R.Za(),v.asyncQueue.enqueueAndForget(async()=>Aw(await Gh(v),w))}}(qr(c),d,a,l)}function zV(n,e){return cV(qr(n=Ut(n,Qn)),o2(e)?e:{next:e})}function Vp(n,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>VM(await Dw(r),i,s)),s.promise}(qr(n),e)}function Jw(n,e,t){const r=t.docs.get(e._key),i=new rc(n);return new ua(n,i,e._key,r,new Eu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GV=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tc(e)}set(e,t,r){this._verifyNotCommitted();const i=tl(e,this._firestore),s=h1(i.converter,t,r),o=s1(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,En.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=tl(e,this._firestore);let o;return o=typeof(t=ot(t))=="string"||t instanceof Nl?zw(this._dataReader,"WriteBatch.update",s._key,t,r,i):qw(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tl(e,this._firestore);return this._mutations=this._mutations.concat(new nd(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function tl(n,e){if((n=ot(n)).firestore!==e)throw new ke(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WV=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=tc(t)}get(t){const r=tl(t,this._firestore),i=new MV(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Ye();const o=s[0];if(o.isFoundDocument())return new lp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new lp(this._firestore,i,r._key,null,r.converter);throw Ye()})}set(t,r,i){const s=tl(t,this._firestore),o=h1(s.converter,r,i),a=s1(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=tl(t,this._firestore);let a;return a=typeof(r=ot(r))=="string"||r instanceof Nl?zw(this._dataReader,"Transaction.update",o._key,r,i,s):qw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=tl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tl(e,this._firestore),r=new rc(this._firestore);return super.get(e).then(i=>new ua(this._firestore,r,t._key,i._document,new Eu(!1,!1),t.converter))}};function HV(n,e,t){n=Ut(n,Qn);const r=Object.assign(Object.assign({},$V),t);return function(s){if(s.maxAttempts<1)throw new ke(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Tr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await sV(s);new rV(s.asyncQueue,c,a,o,l).au()}),l.promise}(qr(n),i=>e(new WV(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(){return new Fp("deleteField")}function QV(){return new Vw("serverTimestamp")}function JV(...n){return new jw("arrayUnion",n)}function YV(...n){return new Uw("arrayRemove",n)}function XV(n){return new Bw("increment",n)}(function(e,t=!0){(function(i){Zh=i})($s),wo(new _s("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Qn(new lF(r.getProvider("auth-internal")),new dF(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ke(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wi(_I,"4.7.3",e),Wi(_I,"4.7.3","esm2017")})();const ZV="@firebase/firestore-compat",ej="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function kE(){if(!VF())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}let d4=class u2{constructor(e){this._delegate=e}static fromBase64String(e){return kE(),new u2(xo.fromBase64String(e))}static fromUint8Array(e){return CE(),new u2(xo.fromUint8Array(e))}toBase64(){return kE(),this._delegate.toBase64()}toUint8Array(){return CE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(n){return tj(n,["next","error","complete"])}function tj(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{enableIndexedDbPersistence(e,t){return vV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return yV(e._delegate)}clearIndexedDbPersistence(e){return _V(e._delegate)}}class f4{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Al||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Eo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){fV(this._delegate,e,t,r)}enableNetwork(){return bV(this._delegate)}disableNetwork(){return IV(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wV(this._delegate)}onSnapshotsInSync(e){return zV(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wh(this,Fw(this._delegate,e))}catch(t){throw Xr(t,"collection()","Firestore.collection()")}}doc(e){try{return new ps(this,ku(this._delegate,e))}catch(t){throw Xr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yr(this,pV(this._delegate,e))}catch(t){throw Xr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HV(this._delegate,t=>e(new p4(this,t)))}batch(){return qr(this._delegate),new m4(new GV(this._delegate,e=>Vp(this._delegate,e)))}loadBundle(e){return EV(this._delegate,e)}namedQuery(e){return AV(this._delegate,e).then(t=>t?new Yr(this,t):null)}}class d1 extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new d4(new xo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ps.forKey(t,this.firestore,null)}}function rj(n){iF(n)}class p4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new d1(e)}get(e){const t=Au(e);return this._delegate.get(t).then(r=>new up(this._firestore,new ua(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Au(e);return r?(Yw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Au(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Au(e);return this._delegate.delete(t),this}}class m4{constructor(e){this._delegate=e}set(e,t,r){const i=Au(e);return r?(Yw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Au(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Au(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cp(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Qu(e,new d1(e),t),i.set(t,s)),s}}Qu.INSTANCES=new WeakMap;class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new d1(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ps(t,new Sn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new ps(t,new Sn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wh(this.firestore,Fw(this._delegate,e))}catch(t){throw Xr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ot(e),e instanceof Sn?GP(this._delegate,e):!1}set(e,t){t=Yw("DocumentReference.set",t);try{return t?PE(this._delegate,e,t):PE(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?l2(this._delegate,e):l2(this._delegate,e,t,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return u4(this._delegate)}onSnapshot(...e){const t=g4(e),r=v4(e,i=>new up(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return h4(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=jV(this._delegate):(e==null?void 0:e.source)==="server"?t=UV(this._delegate):t=a4(this._delegate),t.then(r=>new up(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ps(this.firestore,e?this._delegate.withConverter(Qu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xr(n,e,t){return n.message=n.message.replace(e,t),n}function g4(n){for(const e of n)if(typeof e=="object"&&!c2(e))return e;return{}}function v4(n,e){var t,r;let i;return c2(n[0])?i=n[0]:c2(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class up{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ps(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o4(this._delegate,e._delegate)}}class cp extends up{data(e){const t=this._delegate.data(e);return this._delegate._converter||sF(t!==void 0),t}}class Yr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new d1(e)}where(e,t,r){try{return new Yr(this.firestore,Ho(this._delegate,CV(e,t,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yr(this.firestore,Ho(this._delegate,r4(e,t)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yr(this.firestore,Ho(this._delegate,kV(e)))}catch(t){throw Xr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yr(this.firestore,Ho(this._delegate,RV(e)))}catch(t){throw Xr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yr(this.firestore,Ho(this._delegate,LV(...e)))}catch(t){throw Xr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yr(this.firestore,Ho(this._delegate,DV(...e)))}catch(t){throw Xr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yr(this.firestore,Ho(this._delegate,OV(...e)))}catch(t){throw Xr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yr(this.firestore,Ho(this._delegate,FV(...e)))}catch(t){throw Xr(t,"endAt()","Query.endAt()")}}isEqual(e){return WP(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=BV(this._delegate):(e==null?void 0:e.source)==="server"?t=qV(this._delegate):t=l4(this._delegate),t.then(r=>new h2(this.firestore,new Pl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=g4(e),r=v4(e,i=>new h2(this.firestore,new Pl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return h4(this._delegate,t,r)}withConverter(e){return new Yr(this.firestore,e?this._delegate.withConverter(Qu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class ij{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class h2{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ij(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cp(this._firestore,r))})}isEqual(e){return o4(this._delegate,e._delegate)}}class Wh extends Yr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ps(this.firestore,e):null}doc(e){try{return e===void 0?new ps(this.firestore,ku(this._delegate)):new ps(this.firestore,ku(this._delegate,e))}catch(t){throw Xr(t,"doc()","CollectionReference.doc()")}}add(e){return c4(this._delegate,e).then(t=>new ps(this.firestore,t))}isEqual(e){return GP(this._delegate,e._delegate)}withConverter(e){return new Wh(this.firestore,e?this._delegate.withConverter(Qu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Au(n){return Ut(n,Sn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(...e){this._delegate=new Nl(...e)}static documentId(){return new Xw(In.keyField().canonicalString())}isEqual(e){return e=ot(e),e instanceof Nl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this._delegate=e}static serverTimestamp(){const e=QV();return e._methodName="FieldValue.serverTimestamp",new vu(e)}static delete(){const e=KV();return e._methodName="FieldValue.delete",new vu(e)}static arrayUnion(...e){const t=JV(...e);return t._methodName="FieldValue.arrayUnion",new vu(t)}static arrayRemove(...e){const t=YV(...e);return t._methodName="FieldValue.arrayRemove",new vu(t)}static increment(e){const t=XV(e);return t._methodName="FieldValue.increment",new vu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj={Firestore:f4,GeoPoint:r1,Timestamp:An,Blob:d4,Transaction:p4,WriteBatch:m4,DocumentReference:ps,DocumentSnapshot:up,Query:Yr,QueryDocumentSnapshot:cp,QuerySnapshot:h2,CollectionReference:Wh,FieldPath:Xw,FieldValue:vu,setLogLevel:rj,CACHE_SIZE_UNLIMITED:gV};function oj(n,e){n.INTERNAL.registerComponent(new _s("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sj)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(n){oj(n,(e,t)=>new f4(e,t,new nj)),n.registerVersion(ZV,ej)}aj(bo);if(window.firebase&&bo.apps.length)console.log(" Reutilizando instncia Firebase do portal existente");else{const n={apiKey:"AIzaSyBcQi5nToMOGVDBWprhhOY0NSJX4qE100w",authDomain:"portal-relevo.firebaseapp.com",projectId:"portal-relevo",storageBucket:"portal-relevo.firebasestorage.app",messagingSenderId:"182759626683",appId:"1:182759626683:web:2dde2eeef910d4c288569e",measurementId:"G-W8TTP3D3YQ"};bo.initializeApp(n),console.log(" Firebase compat inicializado (projeto portal-relevo)")}const y4=bo.app(),c0=bo.auth(),dg=bo.firestore();console.log(" Firebase ativo:",y4.name);console.log(" Projeto conectado:",y4.options.projectId);console.log(" Usurio atual:",c0.currentUser?c0.currentUser.email:"nenhum");function _4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lj=_4,w4=new To("auth","Firebase",_4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new vp("@firebase/auth");function uj(n,...e){h0.logLevel<=Pt.WARN&&h0.warn(`Auth (${$s}): ${n}`,...e)}function fg(n,...e){h0.logLevel<=Pt.ERROR&&h0.error(`Auth (${$s}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,...e){throw Zw(n,...e)}function b4(n,...e){return Zw(n,...e)}function I4(n,e,t){const r=Object.assign(Object.assign({},lj()),{[e]:t});return new To("auth","Firebase",r).create(e,{appName:n.name})}function pg(n){return I4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return w4.create(n,...e)}function zt(n,e,...t){if(!n)throw Zw(e,...t)}function bf(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fg(e),new Error(e)}function d0(n,e){n||bf(e)}function cj(){return LE()==="http:"||LE()==="https:"}function LE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cj()||E_()||"connection"in navigator)?navigator.onLine:!0}function dj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.shortDelay=e,this.longDelay=t,d0(t>e,"Short delay should be less than long delay!"),this.isMobile=PT()||R0()}get(){return hj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(n,e){d0(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new jp(3e4,6e4);function A4(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function f1(n,e,t,r,i={}){return x4(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ol(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return kT()||(c.referrerPolicy="no-referrer"),E4.fetch()(T4(n,n.config.apiHost,t,a),c)})}async function x4(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},pj),e);try{const i=new gj(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Dm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dm(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Dm(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Dm(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw I4(n,d,c);RE(n,d)}}catch(i){if(i instanceof xr)throw i;RE(n,"network-request-failed",{message:String(i)})}}function T4(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?fj(n.config,i):`${n.config.apiScheme}://${i}`}class gj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(b4(this.auth,"network-request-failed")),mj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=b4(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(n,e){return f1(n,"POST","/v1/accounts:delete",e)}async function S4(n,e){return f1(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yj(n,e=!1){const t=ot(n),r=await t.getIdToken(e),i=N4(r);zt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:If(Av(i.auth_time)),issuedAtTime:If(Av(i.iat)),expirationTime:If(Av(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Av(n){return Number(n)*1e3}function N4(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fg("JWT malformed, contained fewer than 3 sections"),null;try{const i=w_(t);return i?JSON.parse(i):(fg("Failed to decode base64 JWT payload"),null)}catch(i){return fg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function DE(n){const e=N4(n);return zt(e,"internal-error"),zt(typeof e.exp<"u","internal-error"),zt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof xr&&_j(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _j({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=If(this.lastLoginAt),this.creationTime=If(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(n){var e;const t=n.auth,r=await n.getIdToken(),i=await d2(n,S4(t,{idToken:r}));zt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?P4(s.providerUserInfo):[],a=Ij(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new f2(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function bj(n){const e=ot(n);await f0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ij(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function P4(n){return n.map(e=>{var{providerId:t}=e,r=yp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ej(n,e){const t=await x4(n,{},async()=>{const r=Ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=T4(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E4.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Aj(n,e){return f1(n,"POST","/v2/accounts:revokeToken",A4(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zt(e.idToken,"internal-error"),zt(typeof e.idToken<"u","internal-error"),zt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zt(e.length!==0,"internal-error");const t=DE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(zt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Ej(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new vh;return r&&(zt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(zt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(zt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vh,this.toJSON())}_performRefresh(){return bf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n,e){zt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ol{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new f2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await d2(this,this.stsTokenManager.getToken(this.auth,e));return zt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yj(this,e)}reload(){return bj(this)}_assign(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ol(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await f0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(pg(this.auth));const e=await this.getIdToken();return await d2(this,vj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,E=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:L,emailVerified:$,isAnonymous:G,providerData:K,stsTokenManager:P}=t;zt(L&&P,e,"internal-error");const I=vh.fromJSON(this.name,P);zt(typeof L=="string",e,"internal-error"),Wa(p,e.name),Wa(v,e.name),zt(typeof $=="boolean",e,"internal-error"),zt(typeof G=="boolean",e,"internal-error"),Wa(g,e.name),Wa(N,e.name),Wa(T,e.name),Wa(R,e.name),Wa(w,e.name),Wa(E,e.name);const F=new ol({uid:L,auth:e,email:v,emailVerified:$,displayName:p,isAnonymous:G,photoURL:N,phoneNumber:g,tenantId:T,stsTokenManager:I,createdAt:w,lastLoginAt:E});return K&&Array.isArray(K)&&(F.providerData=K.map(U=>Object.assign({},U))),R&&(F._redirectEventId=R),F}static async _fromIdTokenResponse(e,t,r=!1){const i=new vh;i.updateFromServerResponse(t);const s=new ol({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await f0(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];zt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?P4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new vh;a.updateFromIdToken(r);const l=new ol({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new f2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function xu(n){d0(n instanceof Function,"Expected a class definition");let e=OE.get(n);return e?(d0(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}C4.type="NONE";const FE=C4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e,t){return`firebase:${n}:${e}:${t}`}class yh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xv(this.userKey,i.apiKey,s),this.fullPersistenceKey=xv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ol._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new yh(xu(FE),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||xu(FE);const o=xv(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){const p=ol._fromJSON(e,d);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new yh(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new yh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cj(e))return"Blackberry";if(kj(e))return"Webos";if(Tj(e))return"Safari";if((e.includes("chrome/")||Sj(e))&&!e.includes("edge/"))return"Chrome";if(Pj(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xj(n=Bt()){return/firefox\//i.test(n)}function Tj(n=Bt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sj(n=Bt()){return/crios\//i.test(n)}function Nj(n=Bt()){return/iemobile/i.test(n)}function Pj(n=Bt()){return/android/i.test(n)}function Cj(n=Bt()){return/blackberry/i.test(n)}function kj(n=Bt()){return/webos/i.test(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(n,e=[]){let t;switch(n){case"Browser":t=ME(Bt());break;case"Worker":t=`${ME(Bt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(n,e={}){return f1(n,"GET","/v2/passwordPolicy",A4(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=6;class Oj{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Dj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new Rj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xu(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await S4(this,{idToken:e}),r=await ol._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await f0(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(pg(this));const t=e?ot(e):null;return t&&zt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&zt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(pg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(pg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lj(this),t=new Oj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Aj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xu(e)||this._popupRedirectResolver;zt(t,this,"argument-error"),this.redirectPersistenceManager=await yh.create(this,[xu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(zt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&uj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Mj(n){return ot(n)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=A_(t=>this.observer=t)}get next(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vj(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(xu);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jj(n,e,t,r){return ot(n).onAuthStateChanged(e,t,r)}function Uj(n){return ot(n).signOut()}new jp(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new jp(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new jp(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new jp(5e3,15e3);var jE="@firebase/auth",UE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zj(n){wo(new _s("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;zt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k4(n)},c=new Fj(r,i,s,l);return Vj(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wo(new _s("auth-internal",e=>{const t=Mj(e.getProvider("auth").getImmediate());return(r=>new Bj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi(jE,UE,qj(n)),Wi(jE,UE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60;NT("authIdTokenMaxAge");zj("Browser");const BE=Fw(dg,"orcamentos");function qE(n){var $;const e=G=>isNaN(G)||G===null||G===void 0?0:Number(G),t=(n.coordenacao||[]).reduce((G,K)=>{const P=e(K.dias)/30;return G+P*e(K.prolabore)*e(K.quant)},0),r=(n.profissionais||[]).reduce((G,K)=>{const P=e(K.dias)/30;return G+P*e(K.prolabore)*e(K.pessoas)},0),i=(n.valoresUnicos||[]).reduce((G,K)=>G+e(K.valor)*e(K.pessoas)*e(K.dias),0),s=(n.logistica||[]).reduce((G,K)=>G+e(K.valor)*e(K.qtd)*e(K.dias),0),o=t+r+i+s,a=n.parametros||{},l=o*e(a.encargosPessoal),c=o*e(a.lucro),d=o*e(a.fundoGiro),p=o*e(a.comissaoCaptacao),v=o*e(a.despesasFiscais),g=l+c+d+p+v,N=o+g,T=N*e(a.imposto),R=N+T,w=e(($=n==null?void 0:n.metadata)==null?void 0:$.desconto)/100,E=R*w,L=R-E;return{categorias:{coordenacao:t,profissionais:r,valoresUnicos:i,logistica:s},subtotalGeral:o,encargosPessoal:l,lucro:c,fundoGiro:d,comissaoCaptacao:p,despesasFiscais:v,impostos:T,totalIndiretos:g,totalBase:N,totalAntesDesconto:R,desconto:E,totalGeral:L}}const Ud={async criarOrcamento(n){var e,t,r;try{console.log(" Iniciando salvamento no Firebase...");const i=qE(n),s={...n,totais:i,criadoEm:new Date,atualizadoEm:new Date,versao:((e=n.metadata)==null?void 0:e.versao)||1};console.log(" Estrutura sendo salva:",{metadata:s.metadata,coordenacaoCount:(t=s.coordenacao)==null?void 0:t.length,profissionaisCount:(r=s.profissionais)==null?void 0:r.length,totaisResumo:{subtotal:s.totais.subtotal,totalGeral:s.totais.totalGeral}});const o=await c4(BE,s);return console.log(" NOVO ORAMENTO SALVO com ID nico:",o.id),o.id}catch(i){throw console.error(" Erro crtico ao criar oramento:",i),new Error(`Falha ao salvar oramento: ${i.message}`)}},async listarOrcamentos(){try{console.log(" Buscando oramentos no Firebase (ordem: atualizadoEm desc)...");const n=Ho(BE,r4("atualizadoEm","desc")),t=(await l4(n)).docs.map(r=>({id:r.id,...r.data()}));return console.log(`${t.length} documentos encontrados no total`),t}catch(n){throw console.error("Erro ao listar oramentos:",n),new Error(`Falha ao carregar oramentos: ${n.message}`)}},async buscarOrcamento(n){try{console.log("Buscando oramento:",n);const e=ku(dg,"orcamentos",n),t=await a4(e);return t.exists()?(console.log(" Oramento encontrado e carregado"),{id:t.id,...t.data()}):(console.log(" Oramento no encontrado"),null)}catch(e){throw console.error("Erro ao buscar oramento:",e),new Error(`Falha ao carregar oramento: ${e.message}`)}},async atualizarOrcamento(n,e){try{console.log("Atualizando oramento:",n);const t=qE(e),r=ku(dg,"orcamentos",n);await l2(r,{...e,totais:t,atualizadoEm:new Date}),console.log(" Oramento atualizado com sucesso (incluindo totais)")}catch(t){throw console.error("Erro ao atualizar oramento:",t),new Error(`Falha ao atualizar oramento: ${t.message}`)}},async excluirOrcamento(n){try{console.log("Excluindo oramento:",n);const e=ku(dg,"orcamentos",n);await u4(e),console.log(" Oramento excludo com sucesso")}catch(e){throw console.error("Erro ao excluir oramento:",e),new Error(`Falha ao excluir oramento: ${e.message}`)}}},et={required:(n,e="Campo")=>n==null||n===""?`${e}  obrigatrio`:null,number:(n,e="Campo")=>n==null||n===""?null:isNaN(Number(n))?`${e} deve ser um nmero vlido`:null,minValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)<e?`${t} deve ser maior ou igual a ${e}`:null,maxValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)>e?`${t} deve ser menor ou igual a ${e}`:null,range:(n,e,t,r="Campo")=>{if(n==null||n==="")return null;const i=Number(n);return i<e||i>t?`${r} deve estar entre ${e} e ${t}`:null},metadata:{nome:n=>{const e=et.required(n,"Nome do oramento");return e||(n.length<3?"Nome do oramento deve ter pelo menos 3 caracteres":n.length>100?"Nome do oramento deve ter no mximo 100 caracteres":null)},cliente:n=>{const e=et.required(n,"Cliente");return e||(n.length<2?"Nome do cliente deve ter pelo menos 2 caracteres":null)},data:n=>et.required(n,"Data"),desconto:n=>{const e=et.number(n,"Desconto");return e||et.range(n,0,100,"Desconto")}},parametros:{imposto:n=>et.range(n,0,1,"Imposto"),lucro:n=>et.range(n,0,1,"Lucro"),fundoGiro:n=>et.range(n,0,1,"Fundo de Giro"),encargosPessoal:n=>et.range(n,0,1,"Encargos de Pessoal"),despesasFiscais:n=>et.range(n,0,1,"Despesas Fiscais"),comissaoCaptacao:n=>et.range(n,0,1,"Comisso de Captao")},coordenacao:{quant:n=>et.minValue(n,0,"Quantidade"),dias:n=>et.minValue(n,0,"Dias"),prolabore:n=>et.minValue(n,0,"Prolabore")},profissionais:{pessoas:n=>et.minValue(n,0,"Nmero de pessoas"),dias:n=>et.minValue(n,0,"Dias de trabalho"),prolabore:n=>et.minValue(n,0,"Prolabore")},valoresUnicos:{valor:n=>et.minValue(n,0,"Valor"),pessoas:n=>et.minValue(n,0,"Nmero de pessoas"),dias:n=>et.minValue(n,0,"Dias")},logistica:{valor:n=>et.minValue(n,0,"Valor"),qtd:n=>et.minValue(n,0,"Quantidade"),dias:n=>et.minValue(n,0,"Dias")}},Gj=n=>{const e=[];if(n.metadata){const t=R4(n.metadata);e.push(...t)}if(n.parametros){const t=L4(n.parametros);e.push(...t)}if(n.coordenacao){const t=D4(n.coordenacao);e.push(...t)}if(n.profissionais){const t=O4(n.profissionais);e.push(...t)}if(n.valoresUnicos){const t=F4(n.valoresUnicos);e.push(...t)}if(n.logistica){const t=M4(n.logistica);e.push(...t)}return e},R4=n=>{const e=[];if(!n)return["Metadata no encontrada"];const t=et.metadata.nome(n.nome);t&&e.push(t);const r=et.metadata.cliente(n.cliente);r&&e.push(r);const i=et.metadata.data(n.data);i&&e.push(i);const s=et.metadata.desconto(n.desconto);return s&&e.push(s),e},L4=n=>{const e=[];return n?(Object.keys(n).forEach(t=>{if(et.parametros[t]){const r=et.parametros[t](n[t]);r&&e.push(r)}}),e):["Parmetros no encontrados"]},D4=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de coordenao invlidos"]:(n.forEach((t,r)=>{const i=`Coordenador ${r+1} (${t.cargo}):`,s=et.coordenacao.quant(t.quant);s&&e.push(`${i} ${s}`);const o=et.coordenacao.dias(t.dias);o&&e.push(`${i} ${o}`);const a=et.coordenacao.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},O4=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de profissionais invlidos"]:(n.forEach((t,r)=>{const i=`Profissional ${r+1} (${t.cargo}):`,s=et.profissionais.pessoas(t.pessoas);s&&e.push(`${i} ${s}`);const o=et.profissionais.dias(t.dias);o&&e.push(`${i} ${o}`);const a=et.profissionais.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},F4=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de valores nicos invlidos"]:(n.forEach((t,r)=>{const i=`Valor nico ${r+1} (${t.item}):`,s=et.valoresUnicos.valor(t.valor);s&&e.push(`${i} ${s}`);const o=et.valoresUnicos.pessoas(t.pessoas);o&&e.push(`${i} ${o}`);const a=et.valoresUnicos.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},M4=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de logstica invlidos"]:(n.forEach((t,r)=>{const i=`Logstica ${r+1} (${t.item}):`,s=et.logistica.valor(t.valor);s&&e.push(`${i} ${s}`);const o=et.logistica.qtd(t.qtd);o&&e.push(`${i} ${o}`);const a=et.logistica.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},Wj=n=>{const e=Gj(n);return{valido:e.length===0,errors:e}},Fc=typeof window<"u"?window.relevoUser||(window.firebase?window.firebase.auth().currentUser:null):null,V4=On.createContext(),Ef={metadata:{nome:"",cliente:"",data:new Date().toISOString().split("T")[0],versao:"1.0",desconto:0},parametros:{imposto:.07,lucro:.05,fundoGiro:.05,encargosPessoal:.1,despesasFiscais:.03,comissaoCaptacao:.03},coordenacao:[{id:1,cargo:"Coordenador Geral",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:2,cargo:"Coordenador Tcnico",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:3,cargo:"Coordenador de Campo",profissional:"Pleno",prolabore:2e3,quant:0,dias:30}],profissionais:[{id:1,cargo:"Gelogo I",prolabore:1e4,pessoas:0,dias:1},{id:2,cargo:"Gelogo II",prolabore:9e3,pessoas:0,dias:1},{id:3,cargo:"Geofsico",prolabore:11e3,pessoas:0,dias:1},{id:4,cargo:"Bilogo-Invertebrado",prolabore:9e3,pessoas:0,dias:1},{id:5,cargo:"Bilogo-vertebrado",prolabore:9e3,pessoas:0,dias:1},{id:6,cargo:"Bilogo-geral",prolabore:9500,pessoas:0,dias:1},{id:7,cargo:"Arquelogo",prolabore:9500,pessoas:0,dias:1},{id:8,cargo:"Socilogo",prolabore:9500,pessoas:0,dias:1},{id:9,cargo:"Paleontlogo",prolabore:9500,pessoas:0,dias:1},{id:10,cargo:"Engenheiro florestal",prolabore:9e3,pessoas:0,dias:1},{id:11,cargo:"Geoprocessamento",prolabore:9e3,pessoas:0,dias:1},{id:12,cargo:"Auxiliar de campo",prolabore:9e3,pessoas:0,dias:1},{id:13,cargo:"Administrador",prolabore:7e3,pessoas:0,dias:1},{id:14,cargo:"Croquista/topgrafo",prolabore:9e3,pessoas:0,dias:1}],valoresUnicos:[{id:1,item:"ARTs/RRTs",valor:300,pessoas:1,dias:1},{id:2,item:"Relatrios Tcnicos",valor:8e3,pessoas:1,dias:1},{id:3,item:"Digitalizao/Documentao",valor:50,pessoas:0,dias:1},{id:4,item:"Amostras/Anlises Laboratoriais",valor:500,pessoas:0,dias:1}],logistica:[{id:1,item:"Alimentao",valor:100,unidade:"dia/pessoa",qtd:0,dias:1},{id:2,item:"Hospedagem",valor:170,unidade:"dia/pessoa",qtd:0,dias:1},{id:3,item:"Lavanderia",valor:150,unidade:"dia/pessoa",qtd:0,dias:1},{id:4,item:"Exame mdico",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:5,item:"Seguro de Vida",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:6,item:"Combustvel",valor:8,unidade:"dia/veculo",qtd:0,dias:1},{id:7,item:"Manuteno veculo",valor:100,unidade:"ms/veculo",qtd:0,dias:1},{id:8,item:"Veculo",valor:500,unidade:"dia",qtd:0,dias:1},{id:9,item:"Pedagios",valor:50,unidade:"dia/veculo",qtd:0,dias:1},{id:10,item:"Passagens areas",valor:1e3,unidade:"pessoa",qtd:0,dias:1},{id:11,item:"Passagens Terrestres",valor:250,unidade:"pessoa",qtd:0,dias:1},{id:12,item:"EPI",valor:500,unidade:"pessoa",qtd:0,dias:1},{id:13,item:"Aluguel de drone",valor:300,unidade:"dia",qtd:0,dias:1},{id:14,item:"Material de escritrio",valor:1e3,unidade:"lote",qtd:0,dias:1},{id:15,item:"Material de expediente",valor:800,unidade:"lote",qtd:0,dias:1}]};function Hj(n,e){switch(e.type){case"UPDATE_METADATA":return{...n,metadata:{...n.metadata,...e.payload}};case"UPDATE_PARAMETROS":return{...n,parametros:{...n.parametros,...e.payload}};case"UPDATE_COORDENACAO":{const t=n.coordenacao.map(r=>r.id===e.payload.id?{...r,...e.payload.updates}:r);return{...n,coordenacao:t}}case"UPDATE_PROFISSIONAIS":{if(!n.profissionais.find(i=>i.id===e.payload.id))return{...n,profissionais:[...n.profissionais,{id:e.payload.id,...e.payload.updates}]};const r=n.profissionais.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,profissionais:r}}case"UPDATE_VALORES_UNICOS":{if(!n.valoresUnicos.find(i=>i.id===e.payload.id))return{...n,valoresUnicos:[...n.valoresUnicos,{id:e.payload.id,...e.payload.updates}]};const r=n.valoresUnicos.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,valoresUnicos:r}}case"UPDATE_LOGISTICA":{if(!n.logistica.find(i=>i.id===e.payload.id))return{...n,logistica:[...n.logistica,{id:e.payload.id,...e.payload.updates}]};const r=n.logistica.map(i=>i.id===e.payload.id?{...i,...e.payload.updates}:i);return{...n,logistica:r}}case"CARREGAR_ORCAMENTO":return{...e.payload,metadata:{...Ef.metadata,...e.payload.metadata}};case"RESET_ORCAMENTO":return Ef;default:return n}}const zE=n=>{var G;const e=K=>isNaN(K)||K===null||K===void 0?0:Number(K),t=n.coordenacao.reduce((K,P)=>{const I=e(P.dias)/30;return K+I*e(P.prolabore)*e(P.quant)},0),r=n.profissionais.reduce((K,P)=>{const I=e(P.dias)/30;return K+I*e(P.prolabore)*e(P.pessoas)},0),i=n.valoresUnicos.reduce((K,P)=>K+e(P.valor)*e(P.pessoas)*e(P.dias),0),s=n.logistica.reduce((K,P)=>K+e(P.valor)*e(P.qtd)*e(P.dias),0),o=t+r+i+s,a=n.parametros||{},l=o*e(a.encargosPessoal),c=o*e(a.fundoGiro),d=o*e(a.lucro),p=o*e(a.despesasFiscais),v=o*e(a.comissaoCaptacao),g=l+c+d+p+v,T=(o+g)*e(a.imposto),R=o+g,w=R+T,E=e((G=n.metadata)==null?void 0:G.desconto)/100,L=w*E,$=w-L;return{subtotalCoordenacao:t,subtotalProfissionais:r,subtotalValoresUnicos:i,subtotalLogistica:s,subtotalGeral:o,encargosPessoal:l,fundoGiro:c,lucro:d,despesasFiscais:p,comissaoCaptacao:v,custoTotal:R,impostos:T,totalAntesDesconto:w,desconto:L,totalGeral:$}},Kj=({children:n})=>{const[e,t]=On.useReducer(Hj,Ef),[r,i]=On.useState(!1),[s,o]=On.useState(null),[a,l]=On.useState([]),c=($,G,K,P=null)=>{let I=[];switch($){case"metadata":I=R4({[G]:K});break;case"parametros":I=L4({[G]:K});break;case"coordenacao":{const F=e.coordenacao.find(U=>U.id===P);if(F){const U={...F,[G]:K};I=D4([U])}break}case"profissionais":{const F=e.profissionais.find(U=>U.id===P);if(F){const U={...F,[G]:K};I=O4([U])}break}case"valoresUnicos":{const F=e.valoresUnicos.find(U=>U.id===P);if(F){const U={...F,[G]:K};I=F4([U])}break}case"logistica":{const F=e.logistica.find(U=>U.id===P);if(F){const U={...F,[G]:K};I=M4([U])}break}}return I},d=()=>{const $=Wj(e);return l($.errors),$},p=()=>{l([])},v=$=>{const G={...$,parametros:{...Ef.parametros,...$.parametros||{}},metadata:{...Ef.metadata,...$.metadata||{}},coordenacao:$.coordenacao||[],profissionais:$.profissionais||[],valoresUnicos:$.valoresUnicos||[],logistica:$.logistica||[]},K=zE(G);return{subtotalCoordenacao:K.subtotalCoordenacao,subtotalProfissionais:K.subtotalProfissionais,subtotalValoresUnicos:K.subtotalValoresUnicos,subtotalLogistica:K.subtotalLogistica,subtotalGeral:K.subtotalGeral,encargosPessoal:K.encargosPessoal,fundoGiro:K.fundoGiro,lucro:K.lucro,despesasFiscais:K.despesasFiscais,comissaoCaptacao:K.comissaoCaptacao,custoTotal:K.custoTotal,impostos:K.impostos,totalAntesDesconto:K.totalAntesDesconto,desconto:K.desconto,totalGeral:K.totalGeral,calculadoEm:new Date().toISOString(),versaoCalculo:"2.0"}},g=async($=e)=>{var K,P,I,F,U;if(!d().valido)throw o("No  possvel salvar o oramento. Corrija os erros de validao primeiro."),new Error("Validao falhou");i(!0),o(null);try{const x=$.id||`orc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,S=v($),k=JSON.parse(JSON.stringify({...$,id:x,resumo:S,coordenacao:((K=$.coordenacao)==null?void 0:K.map(ge=>({...ge})))||[],profissionais:((P=$.profissionais)==null?void 0:P.map(ge=>({...ge})))||[],valoresUnicos:((I=$.valoresUnicos)==null?void 0:I.map(ge=>({...ge})))||[],logistica:((F=$.logistica)==null?void 0:F.map(ge=>({...ge})))||[],metadata:{...$.metadata,criadoEm:((U=$.metadata)==null?void 0:U.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString(),criadoPor:(Fc==null?void 0:Fc.uid)||null,versao:"2.0"}}));console.log(" Salvando oramento com ID nico:",x),console.log(" RESUMO includo:",S);const X=await Ud.criarOrcamento(k);return console.log(" Oramento salvo com ID nico:",X),i(!1),X}catch(x){throw console.error(" Erro ao salvar oramento:",x),o(x.message),i(!1),x}},N=async $=>{i(!0),o(null),l([]);try{console.log(" INICIANDO carregamento do oramento ID:",$);const G=await Ud.buscarOrcamento($);return console.log(" Dados recebidos do Firebase:",G),G?(t({type:"CARREGAR_ORCAMENTO",payload:G}),console.log(" Estado atualizado com oramento carregado.")):console.warn(" Oramento NULO recebido do Firebase"),i(!1),G}catch(G){throw console.error(" Erro ao carregar oramento:",G),o(G.message),i(!1),G}},T=async($,G)=>{i(!0),o(null);try{await Ud.atualizarOrcamento($,G),i(!1)}catch(K){throw o(K.message),i(!1),K}},R=async $=>{i(!0),o(null);try{await Ud.excluirOrcamento($),i(!1)}catch(G){throw o(G.message),i(!1),G}},w=async()=>{i(!0),o(null);try{const $=await Ud.listarOrcamentos(),G=(Fc==null?void 0:Fc.uid)||null,K=G?$.filter(P=>{var I;return((I=P.metadata)==null?void 0:I.criadoPor)===G}):$;return console.log(` ${K.length} oramentos retornados (uid: ${G||"sem filtro"})`),console.log(" IDs nicos dos oramentos:",K.map(P=>P.id)),i(!1),K}catch($){throw o($.message),i(!1),$}},E=()=>o(null),L={orcamentoAtual:e,dispatch:t,carregando:r,erro:s,errosValidacao:a,totais:zE(e),salvarOrcamento:g,carregarOrcamento:N,listarOrcamentos:w,atualizarOrcamento:T,excluirOrcamento:R,validarCampo:c,validarOrcamentoAtual:d,limparErrosValidacao:p,limparErro:E};return C.jsx(V4.Provider,{value:L,children:n})},So=()=>{const n=On.useContext(V4);if(!n)throw new Error("useOrcamento deve ser usado dentro de OrcamentoProvider");return n},j4=On.createContext(),e5=()=>{const n=On.useContext(j4);if(!n)throw new Error("useAuth deve ser usado dentro de AuthProvider");return n},Qj=({children:n})=>{const[e,t]=On.useState(null),[r,i]=On.useState(!0);On.useEffect(()=>(console.log(" AuthContext: Monitorando autenticao..."),jj(c0,l=>{console.log(" AuthStateChanged:",l?`Logado: ${l.email}`:"Deslogado"),l?(console.log(" Usurio autenticado detectado"),t(l)):(console.log(" Nenhum usurio autenticado"),t(null)),i(!1)})),[]);const o={user:e,loading:r,logout:async()=>{try{await Uj(c0),console.log(" Logout realizado com sucesso")}catch(a){throw console.error(" Erro ao fazer logout:",a),a}}};return C.jsx(j4.Provider,{value:o,children:n})},it=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),Ya=n=>n==null||isNaN(n)?"0,00%":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n*100)+"%",Jj=({setMostrarGerenciador:n})=>{const{listarOrcamentos:e,carregarOrcamento:t,excluirOrcamento:r,carregando:i,erro:s}=So(),[o,a]=On.useState([]),[l,c]=On.useState(""),d=async()=>{try{const w=(await e()).reduce((E,L)=>(E.find(G=>G.id===L.id)||E.push(L),E),[]);a(w)}catch(R){console.error("Erro ao carregar lista:",R)}};On.useEffect(()=>{d()},[]);const p=async R=>{try{await t(R),n(!1)}catch(w){console.error("Erro ao carregar oramento:",w)}},v=async(R,w)=>{if(confirm(`Tem certeza que deseja excluir o oramento "${w}"?`))try{await r(R),await d()}catch(E){console.error("Erro ao excluir oramento:",E)}},g=R=>{var le;const w=ce=>isNaN(ce)||ce===null||ce===void 0?0:Number(ce),E=(R.coordenacao||[]).reduce((ce,Ne)=>{const M=w(Ne.dias)/30;return ce+M*w(Ne.subtotal)*w(Ne.quant)},0),L=(R.profissionais||[]).reduce((ce,Ne)=>{const M=w(Ne.dias)/30;return ce+M*w(Ne.prolabore)*w(Ne.pessoas)},0),$=(R.valoresUnicos||[]).reduce((ce,Ne)=>ce+w(Ne.valor)*w(Ne.pessoas)*w(Ne.dias),0),G=(R.logistica||[]).reduce((ce,Ne)=>ce+w(Ne.valor)*w(Ne.qtd)*w(Ne.dias),0),K=E+L+$+G,P=R.parametros||{},I=(E+L)*w(P.encargosPessoal),F=K+I,U=F*w(P.lucro),x=F*w(P.fundoGiro),S=F+U+x,k=S*w(P.imposto),X=F*w(P.despesasFiscais),ge=F*w(P.comissaoCaptacao),ve=S+k+X+ge,be=w((le=R==null?void 0:R.metadata)==null?void 0:le.desconto)/100,Z=ve*be;return ve-Z},N=R=>{var w;return((w=R==null?void 0:R.totais)==null?void 0:w.totalGeral)!==void 0?R.totais.totalGeral:g(R)},T=On.useMemo(()=>{const R=(l||"").trim().toLowerCase();return R?o.filter(w=>{var $,G;const E=((($=w==null?void 0:w.metadata)==null?void 0:$.nome)||"").toLowerCase(),L=(((G=w==null?void 0:w.metadata)==null?void 0:G.cliente)||"").toLowerCase();return E.includes(R)||L.includes(R)}):o},[o,l]);return i?C.jsx("div",{className:"flex justify-center items-center p-8",children:C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):C.jsxs("div",{className:"bg-white rounded-lg",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"text-2xl font-bold text-relevo-text font-heading",children:"Gerenciar Oramentos"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{placeholder:"Buscar por nome/cliente",value:l,onChange:R=>c(R.target.value),className:"border rounded px-3 py-2 text-sm",style:{minWidth:240}}),C.jsx("button",{onClick:d,className:"bg-relevo-green text-white px-4 py-2 rounded-lg hover:bg-relevo-green-light transition font-sans",children:"Atualizar Lista"})]})]}),s&&C.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),C.jsxs("div",{className:"overflow-x-auto",children:[C.jsxs("table",{className:"min-w-full bg-white",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-relevo-light-gray",children:[C.jsx("th",{className:"py-3 px-4 text-left",children:"Nome"}),C.jsx("th",{className:"py-3 px-4 text-left",children:"Cliente"}),C.jsx("th",{className:"py-3 px-4 text-left",children:"Data"}),C.jsx("th",{className:"py-3 px-4 text-right",children:"Valor Total"}),C.jsx("th",{className:"py-3 px-4 text-center",children:"Aes"})]})}),C.jsx("tbody",{children:T.map(R=>{var L,$,G,K;const w=N(R),E=(L=R==null?void 0:R.metadata)!=null&&L.data?new Date(R.metadata.data+"T00:00:00").toLocaleDateString("pt-BR"):($=R==null?void 0:R.atualizadoEm)!=null&&$.toDate?R.atualizadoEm.toDate().toLocaleDateString("pt-BR"):R!=null&&R.atualizadoEm?new Date(R.atualizadoEm).toLocaleDateString("pt-BR"):"";return C.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[C.jsx("td",{className:"py-3 px-4",children:((G=R.metadata)==null?void 0:G.nome)||"Sem nome"}),C.jsx("td",{className:"py-3 px-4",children:((K=R.metadata)==null?void 0:K.cliente)||"No informado"}),C.jsx("td",{className:"py-3 px-4",children:E}),C.jsxs("td",{className:"py-3 px-4 text-right font-semibold",children:["R$ ",it(w)]}),C.jsx("td",{className:"py-3 px-4 text-center",children:C.jsxs("div",{className:"flex justify-center space-x-2",children:[C.jsx("button",{onClick:()=>p(R.id),className:"bg-relevo-blue text-white px-3 py-1 rounded hover:bg-relevo-blue/90 transition text-sm font-sans",children:"Carregar"}),C.jsx("button",{onClick:()=>{var P;return v(R.id,(P=R.metadata)==null?void 0:P.nome)},className:"bg-relevo-orange text-white px-3 py-1 rounded hover:bg-relevo-orange/90 transition text-sm font-sans",children:"Excluir"})]})})]},R.id)})})]}),T.length===0&&C.jsx("div",{className:"text-center py-8 text-relevo-text/60 font-sans",children:"Nenhum oramento encontrado para o filtro aplicado."})]})]})},Yj="modulepreload",Xj=function(n){return"/orcamento/"+n},$E={},p2=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Xj(s),s in $E)return;$E[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Yj,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,p)=>{c.addEventListener("load",d),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Jt(n){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(n)}var Ur=Uint8Array,$i=Uint16Array,t5=Int32Array,p1=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),m1=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m2=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U4=function(n,e){for(var t=new $i(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new t5(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},B4=U4(p1,2),q4=B4.b,g2=B4.r;q4[28]=258,g2[258]=28;var z4=U4(m1,0),Zj=z4.b,GE=z4.r,v2=new $i(32768);for(var yn=0;yn<32768;++yn){var Ha=(yn&43690)>>1|(yn&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,v2[yn]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var _o=function(n,e,t){for(var r=n.length,i=0,s=new $i(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new $i(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new $i(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[v2[p]>>l]=c}else for(a=new $i(r),i=0;i<r;++i)n[i]&&(a[i]=v2[o[n[i]-1]++]>>15-n[i]);return a},Cl=new Ur(288);for(var yn=0;yn<144;++yn)Cl[yn]=8;for(var yn=144;yn<256;++yn)Cl[yn]=9;for(var yn=256;yn<280;++yn)Cl[yn]=7;for(var yn=280;yn<288;++yn)Cl[yn]=8;var hp=new Ur(32);for(var yn=0;yn<32;++yn)hp[yn]=5;var e9=_o(Cl,9,0),t9=_o(Cl,9,1),n9=_o(hp,5,0),r9=_o(hp,5,1),Tv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ds=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Sv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},n5=function(n){return(n+7)/8|0},$4=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Ur(n.subarray(e,t))},i9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ms=function(n,e,t){var r=new Error(e||i9[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Ms),!t)throw r;return r},s9=function(n,e,t,r){var i=n.length,s=r?r.length:0;if(!i||e.f&&!e.l)return t||new Ur(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Ur(i*3));var c=function(De){var ze=t.length;if(De>ze){var Ue=new Ur(Math.max(ze*2,De));Ue.set(t),t=Ue}},d=e.f||0,p=e.p||0,v=e.b||0,g=e.l,N=e.d,T=e.m,R=e.n,w=i*8;do{if(!g){d=Ds(n,p,1);var E=Ds(n,p+1,3);if(p+=3,E)if(E==1)g=t9,N=r9,T=9,R=5;else if(E==2){var K=Ds(n,p,31)+257,P=Ds(n,p+10,15)+4,I=K+Ds(n,p+5,31)+1;p+=14;for(var F=new Ur(I),U=new Ur(19),x=0;x<P;++x)U[m2[x]]=Ds(n,p+x*3,7);p+=P*3;for(var S=Tv(U),k=(1<<S)-1,X=_o(U,S,1),x=0;x<I;){var ge=X[Ds(n,p,k)];p+=ge&15;var L=ge>>4;if(L<16)F[x++]=L;else{var ve=0,be=0;for(L==16?(be=3+Ds(n,p,3),p+=2,ve=F[x-1]):L==17?(be=3+Ds(n,p,7),p+=3):L==18&&(be=11+Ds(n,p,127),p+=7);be--;)F[x++]=ve}}var Z=F.subarray(0,K),le=F.subarray(K);T=Tv(Z),R=Tv(le),g=_o(Z,T,1),N=_o(le,R,1)}else Ms(1);else{var L=n5(p)+4,$=n[L-4]|n[L-3]<<8,G=L+$;if(G>i){l&&Ms(0);break}a&&c(v+$),t.set(n.subarray(L,G),v),e.b=v+=$,e.p=p=G*8,e.f=d;continue}if(p>w){l&&Ms(0);break}}a&&c(v+131072);for(var ce=(1<<T)-1,Ne=(1<<R)-1,M=p;;M=p){var ve=g[Sv(n,p)&ce],W=ve>>4;if(p+=ve&15,p>w){l&&Ms(0);break}if(ve||Ms(2),W<256)t[v++]=W;else if(W==256){M=p,g=null;break}else{var J=W-254;if(W>264){var x=W-257,ee=p1[x];J=Ds(n,p,(1<<ee)-1)+q4[x],p+=ee}var se=N[Sv(n,p)&Ne],he=se>>4;se||Ms(3),p+=se&15;var le=Zj[he];if(he>3){var ee=m1[he];le+=Sv(n,p)&(1<<ee)-1,p+=ee}if(p>w){l&&Ms(0);break}a&&c(v+131072);var ye=v+J;if(v<le){var _e=s-le,Me=Math.min(le,ye);for(_e+v<0&&Ms(3);v<Me;++v)t[v]=r[_e+v]}for(;v<ye;++v)t[v]=t[v-le]}}e.l=g,e.p=M,e.b=v,e.f=d,g&&(d=1,e.m=T,e.d=N,e.n=R)}while(!d);return v!=t.length&&o?$4(t,0,v):t.subarray(0,v)},Wo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Bd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Nv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:W4,l:0};if(i==1){var o=new Ur(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(G,K){return G.f-K.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,d=1,p=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=t[t[c].f<t[p].f?c++:p++],l=t[c!=d&&t[c].f<t[p].f?c++:p++],t[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new $i(v+1),N=y2(t[d-1],g,0);if(N>e){var r=0,T=0,R=N-e,w=1<<R;for(s.sort(function(K,P){return g[P.s]-g[K.s]||K.f-P.f});r<i;++r){var E=s[r].s;if(g[E]>e)T+=w-(1<<N-g[E]),g[E]=e;else break}for(T>>=R;T>0;){var L=s[r].s;g[L]<e?T-=1<<e-g[L]++-1:++r}for(;r>=0&&T;--r){var $=s[r].s;g[$]==e&&(--g[$],++T)}N=e}return{t:new Ur(g),l:N}},y2=function(n,e,t){return n.s==-1?Math.max(y2(n.l,e,t+1),y2(n.r,e,t+1)):e[n.s]=t},WE=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new $i(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},qd=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},G4=function(n,e,t){var r=t.length,i=n5(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},HE=function(n,e,t,r,i,s,o,a,l,c,d){Wo(e,d++,t),++i[256];for(var p=Nv(i,15),v=p.t,g=p.l,N=Nv(s,15),T=N.t,R=N.l,w=WE(v),E=w.c,L=w.n,$=WE(T),G=$.c,K=$.n,P=new $i(19),I=0;I<E.length;++I)++P[E[I]&31];for(var I=0;I<G.length;++I)++P[G[I]&31];for(var F=Nv(P,7),U=F.t,x=F.l,S=19;S>4&&!U[m2[S-1]];--S);var k=c+5<<3,X=qd(i,Cl)+qd(s,hp)+o,ge=qd(i,v)+qd(s,T)+o+14+3*S+qd(P,U)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&k<=X&&k<=ge)return G4(e,d,n.subarray(l,l+c));var ve,be,Z,le;if(Wo(e,d,1+(ge<X)),d+=2,ge<X){ve=_o(v,g,0),be=v,Z=_o(T,R,0),le=T;var ce=_o(U,x,0);Wo(e,d,L-257),Wo(e,d+5,K-1),Wo(e,d+10,S-4),d+=14;for(var I=0;I<S;++I)Wo(e,d+3*I,U[m2[I]]);d+=3*S;for(var Ne=[E,G],M=0;M<2;++M)for(var W=Ne[M],I=0;I<W.length;++I){var J=W[I]&31;Wo(e,d,ce[J]),d+=U[J],J>15&&(Wo(e,d,W[I]>>5&127),d+=W[I]>>12)}}else ve=e9,be=Cl,Z=n9,le=hp;for(var I=0;I<a;++I){var ee=r[I];if(ee>255){var J=ee>>18&31;Bd(e,d,ve[J+257]),d+=be[J+257],J>7&&(Wo(e,d,ee>>23&31),d+=p1[J]);var se=ee&31;Bd(e,d,Z[se]),d+=le[se],se>3&&(Bd(e,d,ee>>5&8191),d+=m1[se])}else Bd(e,d,ve[ee]),d+=be[ee]}return Bd(e,d,ve[256]),d+be[256]},o9=new t5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W4=new Ur(0),a9=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Ur(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=o9[e-1],v=p>>13,g=p&8191,N=(1<<t)-1,T=s.p||new $i(32768),R=s.h||new $i(N+1),w=Math.ceil(t/3),E=2*w,L=function(lt){return(n[lt]^n[lt+1]<<w^n[lt+2]<<E)&N},$=new t5(25e3),G=new $i(288),K=new $i(32),P=0,I=0,F=s.i||0,U=0,x=s.w||0,S=0;F+2<o;++F){var k=L(F),X=F&32767,ge=R[k];if(T[X]=ge,R[k]=X,x<=F){var ve=o-F;if((P>7e3||U>24576)&&(ve>423||!c)){d=HE(n,l,0,$,G,K,I,U,S,F-S,d),U=P=I=0,S=F;for(var be=0;be<286;++be)G[be]=0;for(var be=0;be<30;++be)K[be]=0}var Z=2,le=0,ce=g,Ne=X-ge&32767;if(ve>2&&k==L(F-Ne))for(var M=Math.min(v,ve)-1,W=Math.min(32767,F),J=Math.min(258,ve);Ne<=W&&--ce&&X!=ge;){if(n[F+Z]==n[F+Z-Ne]){for(var ee=0;ee<J&&n[F+ee]==n[F+ee-Ne];++ee);if(ee>Z){if(Z=ee,le=Ne,ee>M)break;for(var se=Math.min(Ne,ee-2),he=0,be=0;be<se;++be){var ye=F-Ne+be&32767,_e=T[ye],Me=ye-_e&32767;Me>he&&(he=Me,ge=ye)}}}X=ge,ge=T[X],Ne+=X-ge&32767}if(le){$[U++]=268435456|g2[Z]<<18|GE[le];var De=g2[Z]&31,ze=GE[le]&31;I+=p1[De]+m1[ze],++G[257+De],++K[ze],x=F+Z,++P}else $[U++]=n[F],++G[n[F]]}}for(F=Math.max(F,x);F<o;++F)$[U++]=n[F],++G[n[F]];d=HE(n,l,c,$,G,K,I,U,S,F-S,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=R,s.p=T,s.i=F,s.w=x)}else{for(var F=s.w||0;F<o+c;F+=65535){var Ue=F+65535;Ue>=o&&(l[d/8|0]=c,Ue=o),d=G4(l,d+1,n.subarray(F,Ue))}s.i=o}return $4(a,0,r+n5(d)+i)},H4=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},l9=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ur(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return a9(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},K4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},u9=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=H4();i.p(e.dictionary),K4(n,2,i.d())}},c9=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ms(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ms(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function _2(n,e){e||(e={});var t=H4();t.p(n);var r=l9(n,e,e.dictionary?6:2,4);return u9(r,e),K4(r,r.length-4,t.d()),r}function h9(n,e){return s9(n.subarray(c9(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var d9=typeof TextDecoder<"u"&&new TextDecoder,f9=0;try{d9.decode(W4,{stream:!0}),f9=1}catch{}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pv(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var on={log:Pv,warn:function(n){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):Pv.call(null,arguments))},error:function(n){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):Pv(n))}};function Cv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){du(r.response,e,t)},r.onerror=function(){on.error("could not download file")},r.send()}function KE(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Om(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Af,w2,du=pt.saveAs||((typeof window>"u"?"undefined":Jt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=pt.URL||pt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?KE(i.href)?Cv(n,e,t):Om(i,i.target="_blank"):Om(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Om(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(KE(n))Cv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Om(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Jt(s)!=="object"&&(on.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Cv(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(pt.HTMLElement)||pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Jt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(n)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(n);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Q4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kv(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Or(t,r,i,s,e[0],7,-680876936),s=Or(s,t,r,i,e[1],12,-389564586),i=Or(i,s,t,r,e[2],17,606105819),r=Or(r,i,s,t,e[3],22,-1044525330),t=Or(t,r,i,s,e[4],7,-176418897),s=Or(s,t,r,i,e[5],12,1200080426),i=Or(i,s,t,r,e[6],17,-1473231341),r=Or(r,i,s,t,e[7],22,-45705983),t=Or(t,r,i,s,e[8],7,1770035416),s=Or(s,t,r,i,e[9],12,-1958414417),i=Or(i,s,t,r,e[10],17,-42063),r=Or(r,i,s,t,e[11],22,-1990404162),t=Or(t,r,i,s,e[12],7,1804603682),s=Or(s,t,r,i,e[13],12,-40341101),i=Or(i,s,t,r,e[14],17,-1502002290),t=Fr(t,r=Or(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Fr(s,t,r,i,e[6],9,-1069501632),i=Fr(i,s,t,r,e[11],14,643717713),r=Fr(r,i,s,t,e[0],20,-373897302),t=Fr(t,r,i,s,e[5],5,-701558691),s=Fr(s,t,r,i,e[10],9,38016083),i=Fr(i,s,t,r,e[15],14,-660478335),r=Fr(r,i,s,t,e[4],20,-405537848),t=Fr(t,r,i,s,e[9],5,568446438),s=Fr(s,t,r,i,e[14],9,-1019803690),i=Fr(i,s,t,r,e[3],14,-187363961),r=Fr(r,i,s,t,e[8],20,1163531501),t=Fr(t,r,i,s,e[13],5,-1444681467),s=Fr(s,t,r,i,e[2],9,-51403784),i=Fr(i,s,t,r,e[7],14,1735328473),t=Mr(t,r=Fr(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Mr(s,t,r,i,e[8],11,-2022574463),i=Mr(i,s,t,r,e[11],16,1839030562),r=Mr(r,i,s,t,e[14],23,-35309556),t=Mr(t,r,i,s,e[1],4,-1530992060),s=Mr(s,t,r,i,e[4],11,1272893353),i=Mr(i,s,t,r,e[7],16,-155497632),r=Mr(r,i,s,t,e[10],23,-1094730640),t=Mr(t,r,i,s,e[13],4,681279174),s=Mr(s,t,r,i,e[0],11,-358537222),i=Mr(i,s,t,r,e[3],16,-722521979),r=Mr(r,i,s,t,e[6],23,76029189),t=Mr(t,r,i,s,e[9],4,-640364487),s=Mr(s,t,r,i,e[12],11,-421815835),i=Mr(i,s,t,r,e[15],16,530742520),t=Vr(t,r=Mr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Vr(s,t,r,i,e[7],10,1126891415),i=Vr(i,s,t,r,e[14],15,-1416354905),r=Vr(r,i,s,t,e[5],21,-57434055),t=Vr(t,r,i,s,e[12],6,1700485571),s=Vr(s,t,r,i,e[3],10,-1894986606),i=Vr(i,s,t,r,e[10],15,-1051523),r=Vr(r,i,s,t,e[1],21,-2054922799),t=Vr(t,r,i,s,e[8],6,1873313359),s=Vr(s,t,r,i,e[15],10,-30611744),i=Vr(i,s,t,r,e[6],15,-1560198380),r=Vr(r,i,s,t,e[13],21,1309151649),t=Vr(t,r,i,s,e[4],6,-145523070),s=Vr(s,t,r,i,e[11],10,-1120210379),i=Vr(i,s,t,r,e[2],15,718787259),r=Vr(r,i,s,t,e[9],21,-343485551),n[0]=al(t,n[0]),n[1]=al(r,n[1]),n[2]=al(i,n[2]),n[3]=al(s,n[3])}function g1(n,e,t,r,i,s){return e=al(al(e,n),al(r,s)),al(e<<i|e>>>32-i,t)}function Or(n,e,t,r,i,s,o){return g1(e&t|~e&r,n,e,i,s,o)}function Fr(n,e,t,r,i,s,o){return g1(e&r|t&~r,n,e,i,s,o)}function Mr(n,e,t,r,i,s,o){return g1(e^t^r,n,e,i,s,o)}function Vr(n,e,t,r,i,s,o){return g1(t^(e|~r),n,e,i,s,o)}function J4(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)kv(r,p9(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(kv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,kv(r,i),r}function p9(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Af=pt.atob.bind(pt),w2=pt.btoa.bind(pt);var QE="0123456789abcdef".split("");function m9(n){for(var e="",t=0;t<4;t++)e+=QE[n>>8*t+4&15]+QE[n>>8*t&15];return e}function g9(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function b2(n){return J4(n).map(g9).join("")}var v9=function(n){for(var e=0;e<n.length;e++)n[e]=m9(n[e]);return n.join("")}(J4("hello"))!="5d41402abc4b2a76b9719d911017c592";function al(n,e){if(v9){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function I2(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}t=n,r=a}else a=r;var p=e.length,v=0,g=0,N="";for(l=0;l<p;l++)g=(g+(d=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=d,o=a[(a[v]+a[g])%256],N+=String.fromCharCode(e.charCodeAt(l)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var JE={print:4,modify:8,copy:16,"annot-forms":32};function Gc(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(JE.perm!==void 0)throw new Error("Invalid permission: "+a);i+=JE[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=b2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=I2(this.encryptionKey,this.padding)}function Wc(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function YE(n){if(Jt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){pt.console&&on.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function p0(n){if(!(this instanceof p0))return new p0(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Y4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function yu(n,e,t,r,i){if(!(this instanceof yu))return new yu(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Y4.call(this,r,i)}function oh(n,e,t,r,i){if(!(this instanceof oh))return new oh(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Y4.call(this,r,i)}function ft(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;Jt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=YE;var N="1.3",T=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(m){N=m};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return R};var w=g.__private__.getPageFormat=function(m){return R[m]};i=i||"a4";var E={COMPAT:"compat",ADVANCED:"advanced"},L=E.COMPAT;function $(){this.saveGraphicsState(),Y(new ut(Ke,0,0,-Ke,0,Ps()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),c="n",L=E.ADVANCED}function G(){this.restoreGraphicsState(),c="S",L=E.COMPAT}var K=g.__private__.combineFontStyleAndFontWeight=function(m,D){if(m=="bold"&&D=="normal"||m=="bold"&&D==400||m=="normal"&&D=="italic"||m=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(m=D==400||D==="normal"?m==="italic"?"italic":"normal":D!=700&&D!=="bold"||m!=="normal"?(D==700?"bold":D)+""+m:"bold"),m};g.advancedAPI=function(m){var D=L===E.COMPAT;return D&&$.call(this),typeof m!="function"||(m(this),D&&G.call(this)),this},g.compatAPI=function(m){var D=L===E.ADVANCED;return D&&G.call(this),typeof m!="function"||(m(this),D&&$.call(this)),this},g.isAdvancedAPI=function(){return L===E.ADVANCED};var P,I=function(m){if(L!==E.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=g.roundToPrecision=g.__private__.roundToPrecision=function(m,D){var Q=e||D;if(isNaN(m)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(Q).replace(/0+$/,"")};P=g.hpf=g.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return F(m,16)};var U=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return F(m,2)},x=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return F(m,3)},S=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return L===E.COMPAT?m*Ke:L===E.ADVANCED?m:void 0},k=function(m){return L===E.COMPAT?Ps()-m:L===E.ADVANCED?m:void 0},X=function(m){return S(k(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var ge,ve="00000000000000000000000000000000",be=g.__private__.getFileId=function(){return ve},Z=g.__private__.setFileId=function(m){return ve=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(kn=new Gc(d.userPermissions,d.userPassword,d.ownerPassword,ve)),ve};g.setFileId=function(m){return Z(m),this},g.getFileId=function(){return be()};var le=g.__private__.convertDateToPDFDate=function(m){var D=m.getTimezoneOffset(),Q=D<0?"+":"-",te=Math.floor(Math.abs(D/60)),ue=Math.abs(D%60),we=[Q,J(te),"'",J(ue),"'"].join("");return["D:",m.getFullYear(),J(m.getMonth()+1),J(m.getDate()),J(m.getHours()),J(m.getMinutes()),J(m.getSeconds()),we].join("")},ce=g.__private__.convertPDFDateToDate=function(m){var D=parseInt(m.substr(2,4),10),Q=parseInt(m.substr(6,2),10)-1,te=parseInt(m.substr(8,2),10),ue=parseInt(m.substr(10,2),10),we=parseInt(m.substr(12,2),10),Ce=parseInt(m.substr(14,2),10);return new Date(D,Q,te,ue,we,Ce,0)},Ne=g.__private__.setCreationDate=function(m){var D;if(m===void 0&&(m=new Date),m instanceof Date)D=le(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=m}return ge=D},M=g.__private__.getCreationDate=function(m){var D=ge;return m==="jsDate"&&(D=ce(ge)),D};g.setCreationDate=function(m){return Ne(m),this},g.getCreationDate=function(m){return M(m)};var W,J=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},ee=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},se=0,he=[],ye=[],_e=0,Me=[],De=[],ze=!1,Ue=ye,lt=function(){se=0,_e=0,ye=[],he=[],Me=[],Is=Cn(),Ci=Cn()};g.__private__.setCustomOutputDestination=function(m){ze=!0,Ue=m};var Ae=function(m){ze||(Ue=m)};g.__private__.resetCustomOutputDestination=function(){ze=!1,Ue=ye};var Y=g.__private__.out=function(m){return m=m.toString(),_e+=m.length+1,Ue.push(m),Ue},yt=g.__private__.write=function(m){return Y(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},tt=g.__private__.getArrayBuffer=function(m){for(var D=m.length,Q=new ArrayBuffer(D),te=new Uint8Array(Q);D--;)te[D]=m.charCodeAt(D);return Q},Oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Oe};var je=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return je=L===E.ADVANCED?m/Ke:m,this};var We,$e=g.__private__.getFontSize=g.getFontSize=function(){return L===E.COMPAT?je:je*Ke},at=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return at=m,this},g.__private__.getR2L=g.getR2L=function(){return at};var mt,bt=g.__private__.setZoomMode=function(m){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))We=m;else if(isNaN(m)){if(D.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');We=m}else We=parseInt(m,10)};g.__private__.getZoomMode=function(){return We};var xt,dt=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');mt=m};g.__private__.getPageMode=function(){return mt};var It=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');xt=m};g.__private__.getLayoutMode=function(){return xt},g.__private__.setDisplayMode=g.setDisplayMode=function(m,D,Q){return bt(m),It(D),dt(Q),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(ct).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[m]},g.__private__.getDocumentProperties=function(){return ct},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var D in ct)ct.hasOwnProperty(D)&&m[D]&&(ct[D]=m[D]);return this},g.__private__.setDocumentProperty=function(m,D){if(Object.keys(ct).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[m]=D};var Nt,Ke,lr,Ct,si,$t={},Xt={},Yi=[],jt={},bs={},fn={},oi={},zr=null,ln=0,gt=[],kt=new YE(g),Hs=n.hotfixes||[],Pn={},Si={},Pr=[],ut=function m(D,Q,te,ue,we,Ce){if(!(this instanceof m))return new m(D,Q,te,ue,we,Ce);isNaN(D)&&(D=1),isNaN(Q)&&(Q=0),isNaN(te)&&(te=0),isNaN(ue)&&(ue=1),isNaN(we)&&(we=0),isNaN(Ce)&&(Ce=0),this._matrix=[D,Q,te,ue,we,Ce]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(m)},ut.prototype.multiply=function(m){var D=m.sx*this.sx+m.shy*this.shx,Q=m.sx*this.shy+m.shy*this.sy,te=m.shx*this.sx+m.sy*this.shx,ue=m.shx*this.shy+m.sy*this.sy,we=m.tx*this.sx+m.ty*this.shx+this.tx,Ce=m.tx*this.shy+m.ty*this.sy+this.ty;return new ut(D,Q,te,ue,we,Ce)},ut.prototype.decompose=function(){var m=this.sx,D=this.shy,Q=this.shx,te=this.sy,ue=this.tx,we=this.ty,Ce=Math.sqrt(m*m+D*D),Qe=(m/=Ce)*Q+(D/=Ce)*te;Q-=m*Qe,te-=D*Qe;var nt=Math.sqrt(Q*Q+te*te);return Qe/=nt,m*(te/=nt)<D*(Q/=nt)&&(m=-m,D=-D,Qe=-Qe,Ce=-Ce),{scale:new ut(Ce,0,0,nt,0,0),translate:new ut(1,0,0,1,ue,we),rotate:new ut(m,D,-D,m,0,0),skew:new ut(1,0,Qe,1,0,0)}},ut.prototype.toString=function(m){return this.join(" ")},ut.prototype.inversed=function(){var m=this.sx,D=this.shy,Q=this.shx,te=this.sy,ue=this.tx,we=this.ty,Ce=1/(m*te-D*Q),Qe=te*Ce,nt=-D*Ce,h=-Q*Ce,_=m*Ce;return new ut(Qe,nt,h,_,-Qe*ue-h*we,-nt*ue-_*we)},ut.prototype.applyToPoint=function(m){var D=m.x*this.sx+m.y*this.shx+this.tx,Q=m.x*this.shy+m.y*this.sy+this.ty;return new ts(D,Q)},ut.prototype.applyToRectangle=function(m){var D=this.applyToPoint(m),Q=this.applyToPoint(new ts(m.x+m.w,m.y+m.h));return new Sa(D.x,D.y,Q.x-D.x,Q.y-D.y)},ut.prototype.clone=function(){var m=this.sx,D=this.shy,Q=this.shx,te=this.sy,ue=this.tx,we=this.ty;return new ut(m,D,Q,te,ue,we)},g.Matrix=ut;var nn=g.matrixMult=function(m,D){return D.multiply(m)},Ni=new ut(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Ni;var Jn=function(m,D){if(!bs[m]){var Q=(D instanceof yu?"Sh":"P")+(Object.keys(jt).length+1).toString(10);D.id=Q,bs[m]=Q,jt[Q]=D,kt.publish("addPattern",D)}};g.ShadingPattern=yu,g.TilingPattern=oh,g.addShadingPattern=function(m,D){return I("addShadingPattern()"),Jn(m,D),this},g.beginTilingPattern=function(m){I("beginTilingPattern()"),Pa(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,D){I("endTilingPattern()"),D.stream=De[W].join(`
`),Jn(m,D),kt.publish("endTilingPattern",D),Pr.pop().restore()};var pn=g.__private__.newObject=function(){var m=Cn();return $r(m,!0),m},Cn=g.__private__.newObjectDeferred=function(){return se++,he[se]=function(){return _e},se},$r=function(m,D){return D=typeof D=="boolean"&&D,he[m]=_e,D&&Y(m+" 0 obj"),m},Pi=g.__private__.newAdditionalObject=function(){var m={objId:Cn(),content:""};return Me.push(m),m},Is=Cn(),Ci=Cn(),Cr=g.__private__.decodeColorString=function(m){var D=m.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var Q=parseFloat(D[0]);D=[Q,Q,Q,"r"]}for(var te="#",ue=0;ue<3;ue++)te+=("0"+Math.floor(255*parseFloat(D[ue])).toString(16)).slice(-2);return te},ai=g.__private__.encodeColorString=function(m){var D;typeof m=="string"&&(m={ch1:m});var Q=m.ch1,te=m.ch2,ue=m.ch3,we=m.ch4,Ce=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var Qe=new Q4(Q);if(Qe.ok)Q=Qe.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var nt=parseInt(Q.substr(1),16);Q=nt>>16&255,te=nt>>8&255,ue=255&nt}if(te===void 0||we===void 0&&Q===te&&te===ue)if(typeof Q=="string")D=Q+" "+Ce[0];else switch(m.precision){case 2:D=U(Q/255)+" "+Ce[0];break;case 3:default:D=x(Q/255)+" "+Ce[0]}else if(we===void 0||Jt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return D=["1.","1.","1.",Ce[1]].join(" ");if(typeof Q=="string")D=[Q,te,ue,Ce[1]].join(" ");else switch(m.precision){case 2:D=[U(Q/255),U(te/255),U(ue/255),Ce[1]].join(" ");break;default:case 3:D=[x(Q/255),x(te/255),x(ue/255),Ce[1]].join(" ")}}else if(typeof Q=="string")D=[Q,te,ue,we,Ce[2]].join(" ");else switch(m.precision){case 2:D=[U(Q),U(te),U(ue),U(we),Ce[2]].join(" ");break;case 3:default:D=[x(Q),x(te),x(ue),x(we),Ce[2]].join(" ")}return D},li=g.__private__.getFilters=function(){return o},vr=g.__private__.putStream=function(m){var D=(m=m||{}).data||"",Q=m.filters||li(),te=m.alreadyAppliedFilters||[],ue=m.addLength1||!1,we=D.length,Ce=m.objectId,Qe=function(Le){return Le};if(d!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qe=kn.encryptor(Ce,0));var nt={};Q===!0&&(Q=["FlateEncode"]);var h=m.additionalKeyValues||[],_=(nt=ft.API.processDataByFilters!==void 0?ft.API.processDataByFilters(D,Q):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(nt.data.length!==0&&(h.push({key:"Length",value:nt.data.length}),ue===!0&&h.push({key:"Length1",value:we})),_.length!=0)if(_.split("/").length-1==1)h.push({key:"Filter",value:_});else{h.push({key:"Filter",value:"["+_+"]"});for(var A=0;A<h.length;A+=1)if(h[A].key==="DecodeParms"){for(var B=[],ie=0;ie<nt.reverseChain.split("/").length-1;ie+=1)B.push("null");B.push(h[A].value),h[A].value="["+B.join(" ")+"]"}}Y("<<");for(var de=0;de<h.length;de++)Y("/"+h[de].key+" "+h[de].value);Y(">>"),nt.data.length!==0&&(Y("stream"),Y(Qe(nt.data)),Y("endstream"))},nr=g.__private__.putPage=function(m){var D=m.number,Q=m.data,te=m.objId,ue=m.contentsObjId;$r(te,!0),Y("<</Type /Page"),Y("/Parent "+m.rootDictionaryObjId+" 0 R"),Y("/Resources "+m.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(P(m.mediaBox.bottomLeftX))+" "+parseFloat(P(m.mediaBox.bottomLeftY))+" "+P(m.mediaBox.topRightX)+" "+P(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&Y("/CropBox ["+P(m.cropBox.bottomLeftX)+" "+P(m.cropBox.bottomLeftY)+" "+P(m.cropBox.topRightX)+" "+P(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&Y("/BleedBox ["+P(m.bleedBox.bottomLeftX)+" "+P(m.bleedBox.bottomLeftY)+" "+P(m.bleedBox.topRightX)+" "+P(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&Y("/TrimBox ["+P(m.trimBox.bottomLeftX)+" "+P(m.trimBox.bottomLeftY)+" "+P(m.trimBox.topRightX)+" "+P(m.trimBox.topRightY)+"]"),m.artBox!==null&&Y("/ArtBox ["+P(m.artBox.bottomLeftX)+" "+P(m.artBox.bottomLeftY)+" "+P(m.artBox.topRightX)+" "+P(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&Y("/UserUnit "+m.userUnit),kt.publish("putPage",{objId:te,pageContext:gt[D],pageNumber:D,page:Q}),Y("/Contents "+ue+" 0 R"),Y(">>"),Y("endobj");var we=Q.join(`
`);return L===E.ADVANCED&&(we+=`
Q`),$r(ue,!0),vr({data:we,filters:li(),objectId:ue}),Y("endobj"),te},Ks=g.__private__.putPages=function(){var m,D,Q=[];for(m=1;m<=ln;m++)gt[m].objId=Cn(),gt[m].contentsObjId=Cn();for(m=1;m<=ln;m++)Q.push(nr({number:m,data:De[m],objId:gt[m].objId,contentsObjId:gt[m].contentsObjId,mediaBox:gt[m].mediaBox,cropBox:gt[m].cropBox,bleedBox:gt[m].bleedBox,trimBox:gt[m].trimBox,artBox:gt[m].artBox,userUnit:gt[m].userUnit,rootDictionaryObjId:Is,resourceDictionaryObjId:Ci}));$r(Is,!0),Y("<</Type /Pages");var te="/Kids [";for(D=0;D<ln;D++)te+=Q[D]+" 0 R ";Y(te+"]"),Y("/Count "+ln),Y(">>"),Y("endobj"),kt.publish("postPutPages")},Po=function(m){kt.publish("putFont",{font:m,out:Y,newObject:pn,putStream:vr}),m.isAlreadyPutted!==!0&&(m.objectNumber=pn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Wc(m.postScriptName)),Y("/Subtype /Type1"),typeof m.encoding=="string"&&Y("/Encoding /"+m.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Qs=function(){for(var m in $t)$t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&Po($t[m])},Js=function(m){m.objectNumber=pn();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[P(m.x),P(m.y),P(m.x+m.width),P(m.y+m.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var Q=m.pages[1].join(`
`);vr({data:Q,additionalKeyValues:D,objectId:m.objectNumber}),Y("endobj")},Co=function(){for(var m in Pn)Pn.hasOwnProperty(m)&&Js(Pn[m])},Bl=function(m,D){var Q,te=[],ue=1/(D-1);for(Q=0;Q<1;Q+=ue)te.push(Q);if(te.push(1),m[0].offset!=0){var we={offset:0,color:m[0].color};m.unshift(we)}if(m[m.length-1].offset!=1){var Ce={offset:1,color:m[m.length-1].color};m.push(Ce)}for(var Qe="",nt=0,h=0;h<te.length;h++){for(Q=te[h];Q>m[nt+1].offset;)nt++;var _=m[nt].offset,A=(Q-_)/(m[nt+1].offset-_),B=m[nt].color,ie=m[nt+1].color;Qe+=ee(Math.round((1-A)*B[0]+A*ie[0]).toString(16))+ee(Math.round((1-A)*B[1]+A*ie[1]).toString(16))+ee(Math.round((1-A)*B[2]+A*ie[2]).toString(16))}return Qe.trim()},ad=function(m,D){D||(D=21);var Q=pn(),te=Bl(m.colors,D),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+D+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vr({data:te,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),Y("endobj"),m.objectNumber=pn(),Y("<< /ShadingType "+m.type),Y("/ColorSpace /DeviceRGB");var we="/Coords ["+P(parseFloat(m.coords[0]))+" "+P(parseFloat(m.coords[1]))+" ";m.type===2?we+=P(parseFloat(m.coords[2]))+" "+P(parseFloat(m.coords[3])):we+=P(parseFloat(m.coords[2]))+" "+P(parseFloat(m.coords[3]))+" "+P(parseFloat(m.coords[4]))+" "+P(parseFloat(m.coords[5])),Y(we+="]"),m.matrix&&Y("/Matrix ["+m.matrix.toString()+"]"),Y("/Function "+Q+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},ga=function(m,D){var Q=Cn(),te=pn();D.push({resourcesOid:Q,objectOid:te}),m.objectNumber=te;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+m.boundingBox.map(P).join(" ")+"]"}),ue.push({key:"XStep",value:P(m.xStep)}),ue.push({key:"YStep",value:P(m.yStep)}),ue.push({key:"Resources",value:Q+" 0 R"}),m.matrix&&ue.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),vr({data:m.stream,additionalKeyValues:ue,objectId:m.objectNumber}),Y("endobj")},ko=function(m){var D;for(D in jt)jt.hasOwnProperty(D)&&(jt[D]instanceof yu?ad(jt[D]):jt[D]instanceof oh&&ga(jt[D],m))},va=function(m){for(var D in m.objectNumber=pn(),Y("<<"),m)switch(D){case"opacity":Y("/ca "+U(m[D]));break;case"stroke-opacity":Y("/CA "+U(m[D]))}Y(">>"),Y("endobj")},Ro=function(){var m;for(m in fn)fn.hasOwnProperty(m)&&va(fn[m])},ki=function(){for(var m in Y("/XObject <<"),Pn)Pn.hasOwnProperty(m)&&Pn[m].objectNumber>=0&&Y("/"+m+" "+Pn[m].objectNumber+" 0 R");kt.publish("putXobjectDict"),Y(">>")},ql=function(){kn.oid=pn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+kn.v),Y("/R "+kn.r),Y("/U <"+kn.toHexString(kn.U)+">"),Y("/O <"+kn.toHexString(kn.O)+">"),Y("/P "+kn.P),Y(">>"),Y("endobj")},sc=function(){for(var m in Y("/Font <<"),$t)$t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&Y("/"+m+" "+$t[m].objectNumber+" 0 R");Y(">>")},oc=function(){if(Object.keys(jt).length>0){for(var m in Y("/Shading <<"),jt)jt.hasOwnProperty(m)&&jt[m]instanceof yu&&jt[m].objectNumber>=0&&Y("/"+m+" "+jt[m].objectNumber+" 0 R");kt.publish("putShadingPatternDict"),Y(">>")}},Lo=function(m){if(Object.keys(jt).length>0){for(var D in Y("/Pattern <<"),jt)jt.hasOwnProperty(D)&&jt[D]instanceof g.TilingPattern&&jt[D].objectNumber>=0&&jt[D].objectNumber<m&&Y("/"+D+" "+jt[D].objectNumber+" 0 R");kt.publish("putTilingPatternDict"),Y(">>")}},ac=function(){if(Object.keys(fn).length>0){var m;for(m in Y("/ExtGState <<"),fn)fn.hasOwnProperty(m)&&fn[m].objectNumber>=0&&Y("/"+m+" "+fn[m].objectNumber+" 0 R");kt.publish("putGStateDict"),Y(">>")}},mn=function(m){$r(m.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),sc(),oc(),Lo(m.objectOid),ac(),ki(),Y(">>"),Y("endobj")},ya=function(){var m=[];Qs(),Ro(),Co(),ko(m),kt.publish("putResources"),m.forEach(mn),mn({resourcesOid:Ci,objectOid:Number.MAX_SAFE_INTEGER}),kt.publish("postPutResources")},zl=function(){kt.publish("putAdditionalObjects");for(var m=0;m<Me.length;m++){var D=Me[m];$r(D.objId,!0),Y(D.content),Y("endobj")}kt.publish("postPutAdditionalObjects")},$l=function(m){Xt[m.fontName]=Xt[m.fontName]||{},Xt[m.fontName][m.fontStyle]=m.id},Gl=function(m,D,Q,te,ue){var we={id:"F"+(Object.keys($t).length+1).toString(10),postScriptName:m,fontName:D,fontStyle:Q,encoding:te,isStandardFont:ue||!1,metadata:{}};return kt.publish("addFont",{font:we,instance:this}),$t[we.id]=we,$l(we),we.id},ld=function(m){for(var D=0,Q=Oe.length;D<Q;D++){var te=Gl.call(this,m[D][0],m[D][1],m[D][2],Oe[D][3],!0);p===!1&&(v[te]=!0);var ue=m[D][0].split("-");$l({id:te,fontName:ue[0],fontStyle:ue[1]||""})}kt.publish("addFonts",{fonts:$t,dictionary:Xt})},ui=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(te){var D=te.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var Q="Error in function "+D.split(`
`)[0].split("<")[0]+": "+te.message;if(!pt.console)throw new Error(Q);pt.console.error(Q,te),pt.alert&&alert(Q)}},m.foo.bar=m,m.foo},Do=function(m,D){var Q,te,ue,we,Ce,Qe,nt,h,_;if(ue=(D=D||{}).sourceEncoding||"Unicode",Ce=D.outputEncoding,(D.autoencode||Ce)&&$t[Nt].metadata&&$t[Nt].metadata[ue]&&$t[Nt].metadata[ue].encoding&&(we=$t[Nt].metadata[ue].encoding,!Ce&&$t[Nt].encoding&&(Ce=$t[Nt].encoding),!Ce&&we.codePages&&(Ce=we.codePages[0]),typeof Ce=="string"&&(Ce=we[Ce]),Ce)){for(nt=!1,Qe=[],Q=0,te=m.length;Q<te;Q++)(h=Ce[m.charCodeAt(Q)])?Qe.push(String.fromCharCode(h)):Qe.push(m[Q]),Qe[Q].charCodeAt(0)>>8&&(nt=!0);m=Qe.join("")}for(Q=m.length;nt===void 0&&Q!==0;)m.charCodeAt(Q-1)>>8&&(nt=!0),Q--;if(!nt)return m;for(Qe=D.noBOM?[]:[254,255],Q=0,te=m.length;Q<te;Q++){if((_=(h=m.charCodeAt(Q))>>8)>>8)throw new Error("Character at position "+Q+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(_),Qe.push(h-(_<<8))}return String.fromCharCode.apply(void 0,Qe)},kr=g.__private__.pdfEscape=g.pdfEscape=function(m,D){return Do(m,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ri=g.__private__.beginPage=function(m){De[++ln]=[],gt[ln]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},Oo(ln),Ae(De[W])},ci=function(m,D){var Q,te,ue;switch(t=D||t,typeof m=="string"&&(Q=w(m.toLowerCase()),Array.isArray(Q)&&(te=Q[0],ue=Q[1])),Array.isArray(m)&&(te=m[0]*Ke,ue=m[1]*Ke),isNaN(te)&&(te=i[0],ue=i[1]),(te>14400||ue>14400)&&(on.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ue=Math.min(14400,ue)),i=[te,ue],t.substr(0,1)){case"l":ue>te&&(i=[ue,te]);break;case"p":te>ue&&(i=[ue,te])}Ri(i),mc(Zt),Y(Oi),Zs!==0&&Y(Zs+" J"),Xl!==0&&Y(Xl+" j"),kt.publish("addPage",{pageNumber:ln})},_a=function(m){m>0&&m<=ln&&(De.splice(m,1),gt.splice(m,1),ln--,W>ln&&(W=ln),this.setPage(W))},Oo=function(m){m>0&&m<=ln&&(W=m)},lc=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Gt=function(m,D,Q){var te,ue=void 0;return Q=Q||{},m=m!==void 0?m:$t[Nt].fontName,D=D!==void 0?D:$t[Nt].fontStyle,te=m.toLowerCase(),Xt[te]!==void 0&&Xt[te][D]!==void 0?ue=Xt[te][D]:Xt[m]!==void 0&&Xt[m][D]!==void 0?ue=Xt[m][D]:Q.disableWarning===!1&&on.warn("Unable to look up font label for font '"+m+"', '"+D+"'. Refer to getFontList() for available fonts."),ue||Q.noFallback||(ue=Xt.times[D])==null&&(ue=Xt.times.normal),ue},wa=g.__private__.putInfo=function(){var m=pn(),D=function(te){return te};for(var Q in d!==null&&(D=kn.encryptor(m,0)),Y("<<"),Y("/Producer ("+kr(D("jsPDF "+ft.version))+")"),ct)ct.hasOwnProperty(Q)&&ct[Q]&&Y("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+kr(D(ct[Q]))+")");Y("/CreationDate ("+kr(D(ge))+")"),Y(">>"),Y("endobj")},Es=g.__private__.putCatalog=function(m){var D=(m=m||{}).rootDictionaryObjId||Is;switch(pn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+D+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+We;Q.substr(Q.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+U(We)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}mt&&Y("/PageMode /"+mt),kt.publish("putCatalog"),Y(">>"),Y("endobj")},Fo=g.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(se+1)),Y("/Root "+se+" 0 R"),Y("/Info "+(se-1)+" 0 R"),d!==null&&Y("/Encrypt "+kn.oid+" 0 R"),Y("/ID [ <"+ve+"> <"+ve+"> ]"),Y(">>")},ud=g.__private__.putHeader=function(){Y("%PDF-"+N),Y("%")},uc=g.__private__.putXRef=function(){var m="0000000000";Y("xref"),Y("0 "+(se+1)),Y("0000000000 65535 f ");for(var D=1;D<=se;D++)typeof he[D]=="function"?Y((m+he[D]()).slice(-10)+" 00000 n "):he[D]!==void 0?Y((m+he[D]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},As=g.__private__.buildDocument=function(){lt(),Ae(ye),kt.publish("buildDocument"),ud(),Ks(),zl(),ya(),d!==null&&ql(),wa(),Es();var m=_e;return uc(),Fo(),Y("startxref"),Y(""+m),Y("%%EOF"),Ae(De[W]),ye.join(`
`)},ba=g.__private__.getBlob=function(m){return new Blob([tt(m)],{type:"application/pdf"})},Ia=g.output=g.__private__.output=ui(function(m,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",m){case void 0:return As();case"save":g.save(D.filename);break;case"arraybuffer":return tt(As());case"blob":return ba(As());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(ba(As()))||void 0;on.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",te=As();try{Q=w2(te)}catch{Q=w2(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+D.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(ue=D.pdfObjectUrl,we="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",Qe=pt.open();return Qe!==null&&Qe.document.write(Ce),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',h=pt.open();if(h!==null){h.document.write(nt);var _=this;h.document.documentElement.querySelector("#pdfViewer").onload=function(){h.document.title=D.filename,h.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_.output("bloburl"))}}return h}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',B=pt.open();if(B!==null&&(B.document.write(A),B.document.title=D.filename),B||typeof safari>"u")return B;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",D);default:return null}}),cc=function(m){return Array.isArray(Hs)===!0&&Hs.indexOf(m)>-1};switch(r){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=cc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ke=r}var kn=null;Ne(),Z();var Xi=function(m){return d!==null?kn.encryptor(m,0):function(D){return D}},Wl=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[m].objId,pageNumber:m,pageContext:gt[m]}},vt=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in gt)if(gt[D].objId===m)break;return Wl(D)},hc=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:gt[W].objId,pageNumber:W,pageContext:gt[W]}};g.addPage=function(){return ci.apply(this,arguments),this},g.setPage=function(){return Oo.apply(this,arguments),Ae.call(this,De[W]),this},g.insertPage=function(m){return this.addPage(),this.movePage(W,m),this},g.movePage=function(m,D){var Q,te;if(m>D){Q=De[m],te=gt[m];for(var ue=m;ue>D;ue--)De[ue]=De[ue-1],gt[ue]=gt[ue-1];De[D]=Q,gt[D]=te,this.setPage(D)}else if(m<D){Q=De[m],te=gt[m];for(var we=m;we<D;we++)De[we]=De[we+1],gt[we]=gt[we+1];De[D]=Q,gt[D]=te,this.setPage(D)}return this},g.deletePage=function(){return _a.apply(this,arguments),this},g.__private__.text=g.text=function(m,D,Q,te,ue){var we,Ce,Qe,nt,h,_,A,B,ie,de=(te=te||{}).scope||this;if(typeof m=="number"&&typeof D=="number"&&(typeof Q=="string"||Array.isArray(Q))){var Le=Q;Q=D,D=m,m=Le}if(arguments[3]instanceof ut?(I("The transform parameter of text() with a Matrix value"),ie=ue):(Qe=arguments[4],nt=arguments[5],Jt(A=arguments[3])==="object"&&A!==null||(typeof Qe=="string"&&(nt=Qe,Qe=null),typeof A=="string"&&(nt=A,A=null),typeof A=="number"&&(Qe=A,A=null),te={flags:A,angle:Qe,align:nt})),isNaN(D)||isNaN(Q)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return de;var _t="",Wt=!1,wt=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:xs,rn=de.internal.scaleFactor;function Un(un){return un=un.split("	").join(Array(te.TabLen||9).join(" ")),kr(un,A)}function rs(un){for(var cn,qn=un.concat(),rr=[],qo=qn.length;qo--;)typeof(cn=qn.shift())=="string"?rr.push(cn):Array.isArray(un)&&(cn.length===1||cn[1]===void 0&&cn[2]===void 0)?rr.push(cn[0]):rr.push([cn[0],cn[1],cn[2]]);return rr}function yr(un,cn){var qn;if(typeof un=="string")qn=cn(un)[0];else if(Array.isArray(un)){for(var rr,qo,vd=un.concat(),xc=[],$p=vd.length;$p--;)typeof(rr=vd.shift())=="string"?xc.push(cn(rr)[0]):Array.isArray(rr)&&typeof rr[0]=="string"&&(qo=cn(rr[0],rr[1],rr[2]),xc.push([qo[0],qo[1],qo[2]]));qn=xc}return qn}var Cs=!1,Vo=!0;if(typeof m=="string")Cs=!0;else if(Array.isArray(m)){var hd=m.concat();Ce=[];for(var vc,_r=hd.length;_r--;)(typeof(vc=hd.shift())!="string"||Array.isArray(vc)&&typeof vc[0]!="string")&&(Vo=!1);Cs=Vo}if(Cs===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var yc=je/de.internal.scaleFactor,_c=yc*(wt-1);switch(te.baseline){case"bottom":Q-=_c;break;case"top":Q+=yc-_c;break;case"hanging":Q+=yc-2*_c;break;case"middle":Q+=yc/2-_c}if((_=te.maxWidth||0)>0&&(typeof m=="string"?m=de.splitTextToSize(m,_):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(un,cn){return un.concat(de.splitTextToSize(cn,_))},[]))),we={text:m,x:D,y:Q,options:te,mutex:{pdfEscape:kr,activeFontKey:Nt,fonts:$t,activeFontSize:je}},kt.publish("preProcessText",we),m=we.text,Qe=(te=we.options).angle,!(ie instanceof ut)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,te.rotationDirection===0&&(Qe=-Qe),L===E.ADVANCED&&(Qe=-Qe);var wc=Math.cos(Qe),dd=Math.sin(Qe);ie=new ut(wc,dd,-dd,wc,0,0)}else Qe&&Qe instanceof ut&&(ie=Qe);L!==E.ADVANCED||ie||(ie=Ni),(h=te.charSpace||Ns)!==void 0&&(_t+=P(S(h))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(B=te.horizontalScale)!==void 0&&(_t+=P(100*B)+` Tz
`),te.lang;var di=-1,v1=te.renderingMode!==void 0?te.renderingMode:te.stroke,fd=de.internal.getCurrentPageInfo().pageContext;switch(v1){case 0:case!1:case"fill":di=0;break;case 1:case!0:case"stroke":di=1;break;case 2:case"fillThenStroke":di=2;break;case 3:case"invisible":di=3;break;case 4:case"fillAndAddForClipping":di=4;break;case 5:case"strokeAndAddPathForClipping":di=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":di=6;break;case 7:case"addToPathForClipping":di=7}var Up=fd.usedRenderingMode!==void 0?fd.usedRenderingMode:-1;di!==-1?_t+=di+` Tr
`:Up!==-1&&(_t+=`0 Tr
`),di!==-1&&(fd.usedRenderingMode=di),nt=te.align||"left";var is,bc=je*wt,Bp=de.internal.pageSize.getWidth(),qp=$t[Nt];h=te.charSpace||Ns,_=te.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},te.flags);var ka=[],tu=function(un){return de.getStringUnitWidth(un,{font:qp,charSpace:h,fontSize:je,doKerning:!1})*je/rn};if(Object.prototype.toString.call(m)==="[object Array]"){var fi;Ce=rs(m),nt!=="left"&&(is=Ce.map(tu));var Hr,Ra=0;if(nt==="right"){D-=is[0],m=[],_r=Ce.length;for(var jo=0;jo<_r;jo++)jo===0?(Hr=Wr(D),fi=es(Q)):(Hr=S(Ra-is[jo]),fi=-bc),m.push([Ce[jo],Hr,fi]),Ra=is[jo]}else if(nt==="center"){D-=is[0]/2,m=[],_r=Ce.length;for(var Uo=0;Uo<_r;Uo++)Uo===0?(Hr=Wr(D),fi=es(Q)):(Hr=S((Ra-is[Uo])/2),fi=-bc),m.push([Ce[Uo],Hr,fi]),Ra=is[Uo]}else if(nt==="left"){m=[],_r=Ce.length;for(var Ic=0;Ic<_r;Ic++)m.push(Ce[Ic])}else if(nt==="justify"&&qp.encoding==="Identity-H"){m=[],_r=Ce.length,_=_!==0?_:Bp;for(var Bo=0,Bn=0;Bn<_r;Bn++)if(fi=Bn===0?es(Q):-bc,Hr=Bn===0?Wr(D):Bo,Bn<_r-1){var pd=S((_-is[Bn])/(Ce[Bn].split(" ").length-1)),Kr=Ce[Bn].split(" ");m.push([Kr[0]+" ",Hr,fi]),Bo=0;for(var ss=1;ss<Kr.length;ss++){var Ec=(tu(Kr[ss-1]+" "+Kr[ss])-tu(Kr[ss]))*rn+pd;ss==Kr.length-1?m.push([Kr[ss],Ec,0]):m.push([Kr[ss]+" ",Ec,0]),Bo-=Ec}}else m.push([Ce[Bn],Hr,fi]);m.push(["",Bo,0])}else{if(nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],_r=Ce.length,_=_!==0?_:Bp,Bn=0;Bn<_r;Bn++)fi=Bn===0?es(Q):-bc,Hr=Bn===0?Wr(D):0,Bn<_r-1?ka.push(P(S((_-is[Bn])/(Ce[Bn].split(" ").length-1)))):ka.push(0),m.push([Ce[Bn],Hr,fi])}}var zp=typeof te.R2L=="boolean"?te.R2L:at;zp===!0&&(m=yr(m,function(un,cn,qn){return[un.split("").reverse().join(""),cn,qn]})),we={text:m,x:D,y:Q,options:te,mutex:{pdfEscape:kr,activeFontKey:Nt,fonts:$t,activeFontSize:je}},kt.publish("postProcessText",we),m=we.text,Wt=we.mutex.isHex||!1;var md=$t[Nt].encoding;md!=="WinAnsiEncoding"&&md!=="StandardEncoding"||(m=yr(m,function(un,cn,qn){return[Un(un),cn,qn]})),Ce=rs(m),m=[];for(var nu,ru,La,iu=0,Ac=1,su=Array.isArray(Ce[0])?Ac:iu,Da="",gd=function(un,cn,qn){var rr="";return qn instanceof ut?(qn=typeof te.angle=="number"?nn(qn,new ut(1,0,0,1,un,cn)):nn(new ut(1,0,0,1,un,cn),qn),L===E.ADVANCED&&(qn=nn(new ut(1,0,0,-1,0,0),qn)),rr=qn.join(" ")+` Tm
`):rr=P(un)+" "+P(cn)+` Td
`,rr},os=0;os<Ce.length;os++){switch(Da="",su){case Ac:La=(Wt?"<":"(")+Ce[os][0]+(Wt?">":")"),nu=parseFloat(Ce[os][1]),ru=parseFloat(Ce[os][2]);break;case iu:La=(Wt?"<":"(")+Ce[os]+(Wt?">":")"),nu=Wr(D),ru=es(Q)}ka!==void 0&&ka[os]!==void 0&&(Da=ka[os]+` Tw
`),os===0?m.push(Da+gd(nu,ru,ie)+La):su===iu?m.push(Da+La):su===Ac&&m.push(Da+gd(nu,ru,ie)+La)}m=su===iu?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var as=`BT
/`;return as+=Nt+" "+je+` Tf
`,as+=P(je*wt)+` TL
`,as+=Xs+`
`,as+=_t,as+=m,Y(as+="ET"),v[Nt]=!0,de};var Ys=g.__private__.clip=g.clip=function(m){return Y(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ys("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Y("n"),this};var Zi=g.__private__.isValidStyle=function(m){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(D=!0),D};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return Zi(m)&&(c=m),this};var dc=g.__private__.getStyle=g.getStyle=function(m){var D=c;switch(m){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=m}return D},fc=g.close=function(){return Y("h"),this};g.stroke=function(){return Y("S"),this},g.fill=function(m){return Gr("f",m),this},g.fillEvenOdd=function(m){return Gr("f*",m),this},g.fillStroke=function(m){return Gr("B",m),this},g.fillStrokeEvenOdd=function(m){return Gr("B*",m),this};var Gr=function(m,D){Jt(D)==="object"?Ea(D,m):Y(m)},Hl=function(m){m===null||L===E.ADVANCED&&m===void 0||(m=dc(m),Y(m))};function cd(m,D,Q,te,ue){var we=new oh(D||this.boundingBox,Q||this.xStep,te||this.yStep,this.gState,ue||this.matrix);we.stream=this.stream;var Ce=m+"$$"+this.cloneIndex+++"$$";return Jn(Ce,we),we}var Ea=function(m,D){var Q=bs[m.key],te=jt[Q];if(te instanceof yu)Y("q"),Y(Aa(D)),te.gState&&g.setGState(te.gState),Y(m.matrix.toString()+" cm"),Y("/"+Q+" sh"),Y("Q");else if(te instanceof oh){var ue=new ut(1,0,0,-1,0,Ps());m.matrix&&(ue=ue.multiply(m.matrix||Ni),Q=cd.call(te,m.key,m.boundingBox,m.xStep,m.yStep,ue).id),Y("q"),Y("/Pattern cs"),Y("/"+Q+" scn"),te.gState&&g.setGState(te.gState),Y(D),Y("Q")}},Aa=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xa=g.moveTo=function(m,D){return Y(P(S(m))+" "+P(X(D))+" m"),this},Li=g.lineTo=function(m,D){return Y(P(S(m))+" "+P(X(D))+" l"),this},hi=g.curveTo=function(m,D,Q,te,ue,we){return Y([P(S(m)),P(X(D)),P(S(Q)),P(X(te)),P(S(ue)),P(X(we)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,D,Q,te,ue){if(isNaN(m)||isNaN(D)||isNaN(Q)||isNaN(te)||!Zi(ue))throw new Error("Invalid arguments passed to jsPDF.line");return L===E.COMPAT?this.lines([[Q-m,te-D]],m,D,[1,1],ue||"S"):this.lines([[Q-m,te-D]],m,D,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,D,Q,te,ue,we){var Ce,Qe,nt,h,_,A,B,ie,de,Le,_t,Wt;if(typeof m=="number"&&(Wt=Q,Q=D,D=m,m=Wt),te=te||[1,1],we=we||!1,isNaN(D)||isNaN(Q)||!Array.isArray(m)||!Array.isArray(te)||!Zi(ue)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xa(D,Q),Ce=te[0],Qe=te[1],h=m.length,Le=D,_t=Q,nt=0;nt<h;nt++)(_=m[nt]).length===2?(Le=_[0]*Ce+Le,_t=_[1]*Qe+_t,Li(Le,_t)):(A=_[0]*Ce+Le,B=_[1]*Qe+_t,ie=_[2]*Ce+Le,de=_[3]*Qe+_t,Le=_[4]*Ce+Le,_t=_[5]*Qe+_t,hi(A,B,ie,de,Le,_t));return we&&fc(),Hl(ue),this},g.path=function(m){for(var D=0;D<m.length;D++){var Q=m[D],te=Q.c;switch(Q.op){case"m":xa(te[0],te[1]);break;case"l":Li(te[0],te[1]);break;case"c":hi.apply(this,te);break;case"h":fc()}}return this},g.__private__.rect=g.rect=function(m,D,Q,te,ue){if(isNaN(m)||isNaN(D)||isNaN(Q)||isNaN(te)||!Zi(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return L===E.COMPAT&&(te=-te),Y([P(S(m)),P(X(D)),P(S(Q)),P(S(te)),"re"].join(" ")),Hl(ue),this},g.__private__.triangle=g.triangle=function(m,D,Q,te,ue,we,Ce){if(isNaN(m)||isNaN(D)||isNaN(Q)||isNaN(te)||isNaN(ue)||isNaN(we)||!Zi(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-m,te-D],[ue-Q,we-te],[m-ue,D-we]],m,D,[1,1],Ce,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,D,Q,te,ue,we,Ce){if(isNaN(m)||isNaN(D)||isNaN(Q)||isNaN(te)||isNaN(ue)||isNaN(we)||!Zi(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*Q),we=Math.min(we,.5*te),this.lines([[Q-2*ue,0],[ue*Qe,0,ue,we-we*Qe,ue,we],[0,te-2*we],[0,we*Qe,-ue*Qe,we,-ue,we],[2*ue-Q,0],[-ue*Qe,0,-ue,-we*Qe,-ue,-we],[0,2*we-te],[0,-we*Qe,ue*Qe,-we,ue,-we]],m+ue,D,[1,1],Ce,!0),this},g.__private__.ellipse=g.ellipse=function(m,D,Q,te,ue){if(isNaN(m)||isNaN(D)||isNaN(Q)||isNaN(te)||!Zi(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*Q,Ce=4/3*(Math.SQRT2-1)*te;return xa(m+Q,D),hi(m+Q,D-Ce,m+we,D-te,m,D-te),hi(m-we,D-te,m-Q,D-Ce,m-Q,D),hi(m-Q,D+Ce,m-we,D+te,m,D+te),hi(m+we,D+te,m+Q,D+Ce,m+Q,D),Hl(ue),this},g.__private__.circle=g.circle=function(m,D,Q,te){if(isNaN(m)||isNaN(D)||isNaN(Q)||!Zi(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,D,Q,Q,te)},g.setFont=function(m,D,Q){return Q&&(D=K(D,Q)),Nt=Gt(m,D,{disableWarning:!1}),this};var pc=g.__private__.getFont=g.getFont=function(){return $t[Gt.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,D,Q={};for(m in Xt)if(Xt.hasOwnProperty(m))for(D in Q[m]=[],Xt[m])Xt[m].hasOwnProperty(D)&&Q[m].push(D);return Q},g.addFont=function(m,D,Q,te,ue){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(Q=K(Q,te)),ue=ue||"Identity-H",Gl.call(this,m,D,Q,ue)};var xs,Zt=n.lineWidth||.200025,Ta=g.__private__.getLineWidth=g.getLineWidth=function(){return Zt},mc=g.__private__.setLineWidth=g.setLineWidth=function(m){return Zt=m,Y(P(S(m))+" w"),this};g.__private__.setLineDash=ft.API.setLineDash=ft.API.setLineDashPattern=function(m,D){if(m=m||[],D=D||0,isNaN(D)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(Q){return P(S(Q))}).join(" "),D=P(S(D)),Y("["+m+"] "+D+" d"),this};var Kl=g.__private__.getLineHeight=g.getLineHeight=function(){return je*xs};g.__private__.getLineHeight=g.getLineHeight=function(){return je*xs};var Ql=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(xs=m),this},Jl=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return xs};Ql(n.lineHeight);var Wr=g.__private__.getHorizontalCoordinate=function(m){return S(m)},es=g.__private__.getVerticalCoordinate=function(m){return L===E.ADVANCED?m:gt[W].mediaBox.topRightY-gt[W].mediaBox.bottomLeftY-S(m)},Di=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return P(Wr(m))},Ts=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return P(es(m))},Oi=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Cr(Oi)},g.__private__.setStrokeColor=g.setDrawColor=function(m,D,Q,te){return Oi=ai({ch1:m,ch2:D,ch3:Q,ch4:te,pdfColorType:"draw",precision:2}),Y(Oi),this};var Ss=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Cr(Ss)},g.__private__.setFillColor=g.setFillColor=function(m,D,Q,te){return Ss=ai({ch1:m,ch2:D,ch3:Q,ch4:te,pdfColorType:"fill",precision:2}),Y(Ss),this};var Xs=n.textColor||"0 g",Yl=g.__private__.getTextColor=g.getTextColor=function(){return Cr(Xs)};g.__private__.setTextColor=g.setTextColor=function(m,D,Q,te){return Xs=ai({ch1:m,ch2:D,ch3:Q,ch4:te,pdfColorType:"text",precision:3}),this};var Ns=n.charSpace,gc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ns||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ns=m,this};var Zs=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var D=g.CapJoinStyles[m];if(D===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zs=D,Y(D+" J"),this};var Xl=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var D=g.CapJoinStyles[m];if(D===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xl=D,Y(D+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(P(S(m))+" M"),this},g.GState=p0,g.setGState=function(m){(m=typeof m=="string"?fn[oi[m]]:Zl(null,m)).equals(zr)||(Y("/"+m.id+" gs"),zr=m)};var Zl=function(m,D){if(!m||!oi[m]){var Q=!1;for(var te in fn)if(fn.hasOwnProperty(te)&&fn[te].equals(D)){Q=!0;break}if(Q)D=fn[te];else{var ue="GS"+(Object.keys(fn).length+1).toString(10);fn[ue]=D,D.id=ue}return m&&(oi[m]=D.id),kt.publish("addGState",D),D}};g.addGState=function(m,D){return Zl(m,D),this},g.saveGraphicsState=function(){return Y("q"),Yi.push({key:Nt,size:je,color:Xs}),this},g.restoreGraphicsState=function(){Y("Q");var m=Yi.pop();return Nt=m.key,je=m.size,Xs=m.color,zr=null,this},g.setCurrentTransformationMatrix=function(m){return Y(m.toString()+" cm"),this},g.comment=function(m){return Y("#"+m),this};var ts=function(m,D){var Q=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(we){isNaN(we)||(Q=parseFloat(we))}});var te=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(we){isNaN(we)||(te=parseFloat(we))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(we){ue=we.toString()}}),this},Sa=function(m,D,Q,te){ts.call(this,m,D),this.type="rect";var ue=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(Ce){isNaN(Ce)||(ue=parseFloat(Ce))}});var we=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ce){isNaN(Ce)||(we=parseFloat(Ce))}}),this},Na=function(){this.page=ln,this.currentPage=W,this.pages=De.slice(0),this.pagesContext=gt.slice(0),this.x=lr,this.y=Ct,this.matrix=si,this.width=ns(W),this.height=Ps(W),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Na.prototype.restore=function(){ln=this.page,W=this.currentPage,gt=this.pagesContext,De=this.pages,lr=this.x,Ct=this.y,si=this.matrix,Ca(W,this.width),Fi(W,this.height),Ue=this.outputDestination};var Pa=function(m,D,Q,te,ue){Pr.push(new Na),ln=W=0,De=[],lr=m,Ct=D,si=ue,Ri([Q,te])},eu=function(m){if(Si[m])Pr.pop().restore();else{var D=new Na,Q="Xo"+(Object.keys(Pn).length+1).toString(10);D.id=Q,Si[m]=Q,Pn[Q]=D,kt.publish("addFormObject",D),Pr.pop().restore()}};for(var Mo in g.beginFormObject=function(m,D,Q,te,ue){return Pa(m,D,Q,te,ue),this},g.endFormObject=function(m){return eu(m),this},g.doFormObject=function(m,D){var Q=Pn[Si[m]];return Y("q"),Y(D.toString()+" cm"),Y("/"+Q.id+" Do"),Y("Q"),this},g.getFormObject=function(m){var D=Pn[Si[m]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},g.save=function(m,D){return m=m||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(du(ba(As()),m),typeof du.unload=="function"&&pt.setTimeout&&setTimeout(du.unload,911),this):new Promise(function(Q,te){try{var ue=du(ba(As()),m);typeof du.unload=="function"&&pt.setTimeout&&setTimeout(du.unload,911),Q(ue)}catch(we){te(we.message)}})},ft.API)ft.API.hasOwnProperty(Mo)&&(Mo==="events"&&ft.API.events.length?function(m,D){var Q,te,ue;for(ue=D.length-1;ue!==-1;ue--)Q=D[ue][0],te=D[ue][1],m.subscribe.apply(m,[Q].concat(typeof te=="function"?[te]:te))}(kt,ft.API.events):g[Mo]=ft.API[Mo]);var ns=g.getPageWidth=function(m){return(gt[m=m||W].mediaBox.topRightX-gt[m].mediaBox.bottomLeftX)/Ke},Ca=g.setPageWidth=function(m,D){gt[m].mediaBox.topRightX=D*Ke+gt[m].mediaBox.bottomLeftX},Ps=g.getPageHeight=function(m){return(gt[m=m||W].mediaBox.topRightY-gt[m].mediaBox.bottomLeftY)/Ke},Fi=g.setPageHeight=function(m,D){gt[m].mediaBox.topRightY=D*Ke+gt[m].mediaBox.bottomLeftY};return g.internal={pdfEscape:kr,getStyle:dc,getFont:pc,getFontSize:$e,getCharSpace:gc,getTextColor:Yl,getLineHeight:Kl,getLineHeightFactor:Jl,getLineWidth:Ta,write:yt,getHorizontalCoordinate:Wr,getVerticalCoordinate:es,getCoordinateString:Di,getVerticalCoordinateString:Ts,collections:{},newObject:pn,newAdditionalObject:Pi,newObjectDeferred:Cn,newObjectDeferredBegin:$r,getFilters:li,putStream:vr,events:kt,scaleFactor:Ke,pageSize:{getWidth:function(){return ns(W)},setWidth:function(m){Ca(W,m)},getHeight:function(){return Ps(W)},setHeight:function(m){Fi(W,m)}},encryptionOptions:d,encryption:kn,getEncryptor:Xi,output:Ia,getNumberOfPages:lc,pages:De,out:Y,f2:U,f3:x,getPageInfo:Wl,getPageInfoByObjId:vt,getCurrentPageInfo:hc,getPDFVersion:T,Point:ts,Rectangle:Sa,Matrix:ut,hasHotfix:cc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ns(W)},set:function(m){Ca(W,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ps(W)},set:function(m){Fi(W,m)},enumerable:!0,configurable:!0}),ld.call(g,Oe),Nt="F1",ci(i,t),kt.publish("initialized"),g}Gc.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Gc.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gc.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Gc.prototype.processOwnerPassword=function(n,e){return I2(b2(e).substr(0,5),n)},Gc.prototype.encryptor=function(n,e){var t=b2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return I2(t,r)}},p0.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Jt(n)!==Jt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},ft.API={events:[]},ft.version="2.5.2";var Ln=ft.API,r5=1,ic=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Et=function(n){return n.toFixed(2)},Ka=function(n){return n.toFixed(5)};Ln.__acroform__={};var Ti=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},XE=function(n){return n*r5},ro=function(n){var e=new Z4,t=Ze.internal.getHeight(n)||0,r=Ze.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Et(r)),Number(Et(t))],e},y9=Ln.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},_9=Ln.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},w9=Ln.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},$n=Ln.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return w9(n,e-1)},Gn=Ln.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return y9(n,e-1)},Wn=Ln.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _9(n,e-1)},b9=Ln.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Et(l.lowerLeft_X)),Number(Et(l.lowerLeft_Y)),Number(Et(l.upperRight_X)),Number(Et(l.upperRight_Y))]},I9=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=E2(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Et(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ro(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},E2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(x){return x.split(`
`)}):i.map(function(x){return[x]});var s=t,o=Ze.internal.getHeight(n)||0;o=o<0?-o:o;var a=Ze.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(x,S,k){if(x+1<i.length){var X=S+" "+i[x+1][0];return Fm(X,n,k).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=Fm("3",n,s).height,v=n.multiline?o-s:(o-p)/2,g=v+=2,N=0,T=0,R=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fm(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",E=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var $=!1;if(i[L].length!==1&&R!==i[L].length-1){if((p+2)*(E+2)+2>o)continue e;w+=i[L][R],$=!0,T=L,L--}else{w=(w+=i[L][R]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var G=parseInt(L),K=l(G,w,s),P=L>=i.length-1;if(K&&!P){w+=" ",R=0;continue}if(K||P){if(P)T=G;else if(n.multiline&&(p+2)*(E+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(E+2)+2>o)continue e;T=G}}for(var I="",F=N;F<=T;F++){var U=i[F];if(n.multiline){if(F===T){I+=U[R]+" ",R=(R+1)%U.length;continue}if(F===N){I+=U[U.length-1]+" ";continue}}I+=U[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=Fm(I,n,s).width,n.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Et(c)+" "+Et(g)+` Td
`,e+="("+ic(I)+`) Tj
`,e+=-Et(c)+` 0 Td
`,g=-(s+2),d=0,N=$?T:T+1,E++,w=""}break}return r.text=e,r.fontSize=s,r},Fm=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},E9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},A9=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},x9=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Jt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},T9=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Gs.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(E9)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r5=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new e3,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&A9(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=b9(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ze.createDefaultAppearanceStream(a),Jt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=I9(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var N=g[o];typeof N=="function"&&(N=N.call(i,a)),p+="/"+o+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,a)),p+="/"+o+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&x9(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},X4=Ln.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Jt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+ic(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+ic(r(n))+")"},po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};po.prototype.toString=function(){return this.objId+" 0 R"},po.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},po.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:X4(i,this.objId,this.scope)}):i instanceof po?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Z4=function(){po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ti(Z4,po);var e3=function(){po.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ic(t(n))+")"}},set:function(t){n=t}})};Ti(e3,po);var Gs=function n(){po.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$n(e,3)},set:function(w){w?this.F=Gn(e,3):this.F=Wn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof m0)return;s="FieldObject"+n.FieldNum++}var w=function(E){return E};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+ic(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/r5:c},set:function(w){c=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof m0||this instanceof Ru))return Rv(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof pr?v:Rv(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof pr?w:w.substr(0,1)==="("?Mc(w.substr(1,w.length-2)):Mc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?Mc(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof pr?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof pr?g:Rv(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof pr?w:w.substr(0,1)==="("?Mc(w.substr(1,w.length-2)):Mc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?Mc(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof pr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(w){w=!!w,T=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(w){N=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,1)},set:function(w){w?this.Ff=Gn(this.Ff,1):this.Ff=Wn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,2)},set:function(w){w?this.Ff=Gn(this.Ff,2):this.Ff=Wn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,3)},set:function(w){w?this.Ff=Gn(this.Ff,3):this.Ff=Wn(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');R=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(R){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Ti(Gs,po);var _h=function(){Gs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X4(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,18)},set:function(t){t?this.Ff=Gn(this.Ff,18):this.Ff=Wn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Gn(this.Ff,19):this.Ff=Wn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,20)},set:function(t){t?(this.Ff=Gn(this.Ff,20),e.sort()):this.Ff=Wn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,22)},set:function(t){t?this.Ff=Gn(this.Ff,22):this.Ff=Wn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(t){t?this.Ff=Gn(this.Ff,23):this.Ff=Wn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,27)},set:function(t){t?this.Ff=Gn(this.Ff,27):this.Ff=Wn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ti(_h,Gs);var wh=function(){_h.call(this),this.fontName="helvetica",this.combo=!1};Ti(wh,_h);var bh=function(){wh.call(this),this.combo=!0};Ti(bh,wh);var mg=function(){bh.call(this),this.edit=!0};Ti(mg,bh);var pr=function(){Gs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,15)},set:function(t){t?this.Ff=Gn(this.Ff,15):this.Ff=Wn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,16)},set:function(t){t?this.Ff=Gn(this.Ff,16):this.Ff=Wn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,17)},set:function(t){t?this.Ff=Gn(this.Ff,17):this.Ff=Wn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(t){t?this.Ff=Gn(this.Ff,26):this.Ff=Wn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ic(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Jt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ti(pr,Gs);var gg=function(){pr.call(this),this.pushButton=!0};Ti(gg,pr);var Ih=function(){pr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ti(Ih,pr);var m0=function(){var n,e;Gs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+ic(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Jt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ti(m0,Gs),Ih.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ih.prototype.createOption=function(n){var e=new m0;return e.Parent=this,e.optionName=n,this.Kids.push(e),S9.call(this.scope,e),e};var vg=function(){pr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};Ti(vg,pr);var Ru=function(){Gs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,13)},set:function(e){e?this.Ff=Gn(this.Ff,13):this.Ff=Wn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,21)},set:function(e){e?this.Ff=Gn(this.Ff,21):this.Ff=Wn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(e){e?this.Ff=Gn(this.Ff,23):this.Ff=Wn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,24)},set:function(e){e?this.Ff=Gn(this.Ff,24):this.Ff=Wn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,25)},set:function(e){e?this.Ff=Gn(this.Ff,25):this.Ff=Wn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(e){e?this.Ff=Gn(this.Ff,26):this.Ff=Wn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ti(Ru,Gs);var yg=function(){Ru.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,14)},set:function(n){n?this.Ff=Gn(this.Ff,14):this.Ff=Wn(this.Ff,14)}}),this.password=!0};Ti(yg,Ru);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=E2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Et(Ze.internal.getWidth(n))+" "+Et(Ze.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Et(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ro(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ze.internal.getHeight(n),o=Ze.internal.getWidth(n),a=E2(n,n.caption);return i.push("1 g"),i.push("0 0 "+Et(o)+" "+Et(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Et(o-1)+" "+Et(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Et(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Et(Ze.internal.getWidth(n))+" "+Et(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Circle.YesNormal,e.D[n]=Ze.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ro(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ze.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ka(Ze.internal.getWidth(n)/2)+" "+Ka(Ze.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ze.internal.Bezier_C).toFixed(5)),o=Number((r*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ka(Ze.internal.getWidth(n)/2)+" "+Ka(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ka(Ze.internal.getWidth(n)/2)+" "+Ka(Ze.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ka(Ze.internal.getWidth(n)/2)+" "+Ka(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Cross.YesNormal,e.D[n]=Ze.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ro(n);e.scope=n.scope;var t=[],r=Ze.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Et(Ze.internal.getWidth(n)-2)+" "+Et(Ze.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Et(r.x1.x)+" "+Et(r.x1.y)+" m"),t.push(Et(r.x2.x)+" "+Et(r.x2.y)+" l"),t.push(Et(r.x4.x)+" "+Et(r.x4.y)+" m"),t.push(Et(r.x3.x)+" "+Et(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=Ze.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Et(Ze.internal.getWidth(n))+" "+Et(Ze.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Et(Ze.internal.getWidth(n)-2)+" "+Et(Ze.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Et(t.x1.x)+" "+Et(t.x1.y)+" m"),r.push(Et(t.x2.x)+" "+Et(t.x2.y)+" l"),r.push(Et(t.x4.x)+" "+Et(t.x4.y)+" m"),r.push(Et(t.x3.x)+" "+Et(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ro(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Et(Ze.internal.getWidth(n))+" "+Et(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ze.internal.getWidth(n),t=Ze.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ze.internal.getWidth=function(n){var e=0;return Jt(n)==="object"&&(e=XE(n.Rect[2])),e},Ze.internal.getHeight=function(n){var e=0;return Jt(n)==="object"&&(e=XE(n.Rect[3])),e};var S9=Ln.addField=function(n){if(T9(this,n),!(n instanceof Gs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=_h,Ln.AcroFormListBox=wh,Ln.AcroFormComboBox=bh,Ln.AcroFormEditBox=mg,Ln.AcroFormButton=pr,Ln.AcroFormPushButton=gg,Ln.AcroFormRadioButton=Ih,Ln.AcroFormCheckBox=vg,Ln.AcroFormTextField=Ru,Ln.AcroFormPasswordField=yg,Ln.AcroFormAppearance=Ze,Ln.AcroForm={ChoiceField:_h,ListBox:wh,ComboBox:bh,EditBox:mg,Button:pr,PushButton:gg,RadioButton:Ih,CheckBox:vg,TextField:Ru,PasswordField:yg,Appearance:Ze},ft.AcroForm={ChoiceField:_h,ListBox:wh,ComboBox:bh,EditBox:mg,Button:pr,PushButton:gg,RadioButton:Ih,CheckBox:vg,TextField:Ru,PasswordField:yg,Appearance:Ze};function t3(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(x,S){var k,X,ge,ve,be,Z=e;if((S=S||e)==="RGBA"||x.data!==void 0&&x.data instanceof Uint8ClampedArray&&"height"in x&&"width"in x)return"RGBA";if(K(x))for(be in t)for(ge=t[be],k=0;k<ge.length;k+=1){for(ve=!0,X=0;X<ge[k].length;X+=1)if(ge[k][X]!==void 0&&ge[k][X]!==x[X]){ve=!1;break}if(ve===!0){Z=be;break}}else for(be in t)for(ge=t[be],k=0;k<ge.length;k+=1){for(ve=!0,X=0;X<ge[k].length;X+=1)if(ge[k][X]!==void 0&&ge[k][X]!==x.charCodeAt(X)){ve=!1;break}if(ve===!0){Z=be;break}}return Z===e&&S!==e&&(Z=S),Z},i=function x(S){for(var k=this.internal.write,X=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:S.width}),ve.push({key:"Height",value:S.height}),S.colorSpace===R.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===R.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var be="",Z=0,le=S.transparency.length;Z<le;Z++)be+=S.transparency[Z]+" "+S.transparency[Z]+" ";ve.push({key:"Mask",value:"["+be+"]"})}S.sMask!==void 0&&ve.push({key:"SMask",value:S.objectId+1+" 0 R"});var ce=S.filter!==void 0?["/"+S.filter]:void 0;if(X({data:S.data,additionalKeyValues:ve,alreadyAppliedFilters:ce,objectId:S.objectId}),k("endobj"),"sMask"in S&&S.sMask!==void 0){var Ne="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,M={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:Ne,data:S.sMask};"filter"in S&&(M.filter=S.filter),x.call(this,M)}if(S.colorSpace===R.INDEXED){var W=this.internal.newObject();X({data:I(new Uint8Array(S.palette)),objectId:W}),k("endobj")}},s=function(){var x=this.internal.collections.addImage_images;for(var S in x)i.call(this,x[S])},o=function(){var x,S=this.internal.collections.addImage_images,k=this.internal.write;for(var X in S)k("/I"+(x=S[X]).index,x.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var x=this.internal.collections.addImage_images;return a.call(this),x},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(x){return typeof n["process"+x.toUpperCase()]=="function"},p=function(x){return Jt(x)==="object"&&x.nodeType===1},v=function(x,S){if(x.nodeName==="IMG"&&x.hasAttribute("src")){var k=""+x.getAttribute("src");if(k.indexOf("data:image/")===0)return Af(unescape(k).split("base64,").pop());var X=n.loadFile(k,!0);if(X!==void 0)return X}if(x.nodeName==="CANVAS"){if(x.width===0||x.height===0)throw new Error("Given canvas must have data. Canvas width: "+x.width+", height: "+x.height);var ge;switch(S){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;case"JPEG":case"JPG":default:ge="image/jpeg"}return Af(x.toDataURL(ge,1).split("base64,").pop())}},g=function(x){var S=this.internal.collections.addImage_images;if(S){for(var k in S)if(x===S[k].alias)return S[k]}},N=function(x,S,k){return x||S||(x=-96,S=-96),x<0&&(x=-1*k.width*72/x/this.internal.scaleFactor),S<0&&(S=-1*k.height*72/S/this.internal.scaleFactor),x===0&&(x=S*k.width/k.height),S===0&&(S=x*k.height/k.width),[x,S]},T=function(x,S,k,X,ge,ve){var be=N.call(this,k,X,ge),Z=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,ce=l.call(this);if(k=be[0],X=be[1],ce[ge.index]=ge,ve){ve*=Math.PI/180;var Ne=Math.cos(ve),M=Math.sin(ve),W=function(ee){return ee.toFixed(4)},J=[W(Ne),W(M),W(-1*M),W(Ne),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,Z(x),le(S+X),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([Z(k),"0","0",Z(X),"0","0","cm"].join(" "))):this.internal.write([Z(k),"0","0",Z(X),Z(x),le(S+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=n.__addimage__.sHashCode=function(x){var S,k,X=0;if(typeof x=="string")for(k=x.length,S=0;S<k;S++)X=(X<<5)-X+x.charCodeAt(S),X|=0;else if(K(x))for(k=x.byteLength/2,S=0;S<k;S++)X=(X<<5)-X+x[S],X|=0;return X},L=n.__addimage__.validateStringAsBase64=function(x){(x=x||"").toString().trim();var S=!0;return x.length===0&&(S=!1),x.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(x.substr(0,x.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(x.substr(-2))===!1&&(S=!1),S},$=n.__addimage__.extractImageFromDataUrl=function(x){var S=(x=x||"").split("base64,"),k=null;if(S.length===2){var X=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(X)&&(k={mimeType:X[1],charset:X[2],data:S[1]})}return k},G=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(x){return G()&&x instanceof ArrayBuffer};var K=n.__addimage__.isArrayBufferView=function(x){return G()&&typeof Uint32Array<"u"&&(x instanceof Int8Array||x instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array)},P=n.__addimage__.binaryStringToUint8Array=function(x){for(var S=x.length,k=new Uint8Array(S),X=0;X<S;X++)k[X]=x.charCodeAt(X);return k},I=n.__addimage__.arrayBufferToBinaryString=function(x){for(var S="",k=K(x)?x:new Uint8Array(x),X=0;X<k.length;X+=8192)S+=String.fromCharCode.apply(null,k.subarray(X,X+8192));return S};n.addImage=function(){var x,S,k,X,ge,ve,be,Z,le;if(typeof arguments[1]=="number"?(S=e,k=arguments[1],X=arguments[2],ge=arguments[3],ve=arguments[4],be=arguments[5],Z=arguments[6],le=arguments[7]):(S=arguments[1],k=arguments[2],X=arguments[3],ge=arguments[4],ve=arguments[5],be=arguments[6],Z=arguments[7],le=arguments[8]),Jt(x=arguments[0])==="object"&&!p(x)&&"imageData"in x){var ce=x;x=ce.imageData,S=ce.format||S||e,k=ce.x||k||0,X=ce.y||X||0,ge=ce.w||ce.width||ge,ve=ce.h||ce.height||ve,be=ce.alias||be,Z=ce.compression||Z,le=ce.rotation||ce.angle||le}var Ne=this.internal.getFilters();if(Z===void 0&&Ne.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(k)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=F.call(this,x,S,be,Z);return T.call(this,k,X,ge,ve,M,le),this};var F=function(x,S,k,X){var ge,ve,be;if(typeof x=="string"&&r(x)===e){x=unescape(x);var Z=U(x,!1);(Z!==""||(Z=n.loadFile(x,!0))!==void 0)&&(x=Z)}if(p(x)&&(x=v(x,S)),S=r(x,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((be=k)==null||be.length===0)&&(k=function(le){return typeof le=="string"||K(le)?E(le):K(le.data)?E(le.data):null}(x)),(ge=g.call(this,k))||(G()&&(x instanceof Uint8Array||S==="RGBA"||(ve=x,x=P(x))),ge=this["process"+S.toUpperCase()](x,c.call(this),k,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in n.image_compression?le:w.NONE}(X),ve)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},U=n.__addimage__.convertBase64ToBinaryString=function(x,S){var k;S=typeof S!="boolean"||S;var X,ge="";if(typeof x=="string"){X=(k=$(x))!==null?k.data:x;try{ge=Af(X)}catch(ve){if(S)throw L(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};n.getImageProperties=function(x){var S,k,X="";if(p(x)&&(x=v(x)),typeof x=="string"&&r(x)===e&&((X=U(x,!1))===""&&(X=n.loadFile(x)||""),x=X),k=r(x),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(!G()||x instanceof Uint8Array||(x=P(x)),!(S=this["process"+k.toUpperCase()](x)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=k,S}})(ft.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};ft.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(T.objId),E=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",s+=" /Popup "+R.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(w(E))+") >>",T.content=s;var L=T.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",R.content=s,this.internal.write(T.objId,"0 R",R.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var $=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var G=this.annotations._nameMap[r.options.name];r.options.pageNumber=G.page,r.options.top=G.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var K=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+K+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(r),w:l(t+i),h:c(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(t,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(t,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(ft.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(T){return e[T.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},a=n.__arabicParser__.isArabicEndLetter=function(T){return o(T)&&s(T)&&e[T.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(T){return o(T)&&i.indexOf(T.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return o(T)&&s(T)&&e[T.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(T){return o(T)&&s(T)&&e[T.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(T){return o(T)&&s(T)&&e[T.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(T){return o(T)&&s(T)&&e[T.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(T){var R=0,w=t,E="",L=0;for(R=0;R<T.length;R+=1)w[T.charCodeAt(R)]!==void 0?(L++,typeof(w=w[T.charCodeAt(R)])=="number"&&(E+=String.fromCharCode(w),w=t,L=0),R===T.length-1&&(w=t,E+=T.charAt(R-(L-1)),R-=L-1,L=0)):(w=t,E+=T.charAt(R-L),R-=L,L=0);return E};n.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&r[T.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(T,R,w){return o(T)?s(T)===!1?-1:!c(T)||!o(R)&&!o(w)||!o(w)&&a(R)||a(T)&&!o(R)||a(T)&&l(R)||a(T)&&a(R)?0:d(T)&&o(R)&&!a(R)&&o(w)&&c(w)?3:a(T)||!o(w)?1:2:-1},g=function(T){var R=0,w=0,E=0,L="",$="",G="",K=(T=T||"").split("\\s+"),P=[];for(R=0;R<K.length;R+=1){for(P.push(""),w=0;w<K[R].length;w+=1)L=K[R][w],$=K[R][w-1],G=K[R][w+1],o(L)?(E=v(L,$,G),P[R]+=E!==-1?String.fromCharCode(e[L.charCodeAt(0)][E]):L):P[R]+=L;P[R]=p(P[R])}return P.join(" ")},N=n.__arabicParser__.processArabic=n.processArabic=function(){var T,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(R)){var E=0;for(w=[],E=0;E<R.length;E+=1)Array.isArray(R[E])?w.push([g(R[E][0]),R[E][1],R[E][2]]):w.push([g(R[E])]);T=w}else T=g(R);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};n.events.push(["preProcessText",N])}(ft.API),ft.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ft.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(T){l=T}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(T){c=T}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(T){d=T}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(T){p=T}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(T){g=T}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(T){N=T}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,g=0,N=0,T=0,R=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(L,$){return L.concat(R.splitTextToSize($,w))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)g<(T=this.getStringUnitWidth(l[E],{font:p})*d)&&(g=T);return g!==0&&(N=l.length),{w:g/=v,h:Math.max((N*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,N,T,R,w=[],E=[],L=[],$={},G={},K=[],P=[],I=(v=v||{}).autoSize||!1,F=v.printHeaders!==!1,U=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,x=v.margins||Object.assign({width:this.getPageWidth()},e),S=typeof v.padding=="number"?v.padding:3,k=v.headerBackgroundColor||"#c8c8c8",X=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=x,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=X,this.setFontSize(U),p==null)E=w=Object.keys(d[0]),L=w.map(function(){return"left"});else if(Array.isArray(p)&&Jt(p[0])==="object")for(w=p.map(function(ce){return ce.name}),E=p.map(function(ce){return ce.prompt||ce.name||""}),L=p.map(function(ce){return ce.align||"left"}),g=0;g<p.length;g+=1)G[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(E=w=p,L=w.map(function(){return"left"}));if(I||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<w.length;g+=1){for($[R=w[g]]=d.map(function(ce){return ce[R]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(E[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=$[R],this.setFont(void 0,"normal"),T=0;T<N.length;T+=1)K.push(this.getTextDimensions(N[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[R]=Math.max.apply(null,K)+S+S,K=[]}if(F){var ge={};for(g=0;g<w.length;g+=1)ge[w[g]]={},ge[w[g]].text=E[g],ge[w[g]].align=L[g];var ve=a.call(this,ge,G);P=w.map(function(ce){return new s(l,c,G[ce],ve,ge[ce].text,void 0,ge[ce].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var be=p.reduce(function(ce,Ne){return ce[Ne.name]=Ne.align,ce},{});for(g=0;g<d.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:d[g]},this);var Z=a.call(this,d[g],G);for(T=0;T<w.length;T+=1){var le=d[g][w[T]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:T,data:le},this),o.call(this,new s(l,c,G[w[T]],Z,le,g+2,be[w[T]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var N=l[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+d+d},this).reduce(function(g,N){return Math.max(g,N)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(N)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(ft.API);var n3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},r3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],A2=t3(r3),i3=[100,200,300,400,500,600,700,800,900],N9=t3(i3);function x2(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return n3[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof A2[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function ZE(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var P9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},eA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tA(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function C9(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},P9,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=x2(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+tA(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=A2[l],p=d<=A2.normal?-1:1,v=ZE(c,r3,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=n3[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=N9[l],p=ZE(c,i3,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+tA(s)+"'.");return o}function nA(n){return n.trimLeft()}function k9(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function R9(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Mm,rA,iA,Lv=["times"];(function(n){var e,t,r,i,s,o,a,l,c,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=M;Object.defineProperty(this,"pdf",{get:function(){return W}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Ae){J=!!Ae}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(Ae){ee=!!Ae}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Ae){isNaN(Ae)||(se=Ae)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Ae){isNaN(Ae)||(he=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ae){var Y;typeof Ae=="number"?Y=[Ae,Ae,Ae,Ae]:((Y=new Array(4))[0]=Ae[0],Y[1]=Ae.length>=2?Ae[1]:Y[0],Y[2]=Ae.length>=3?Ae[2]:Y[0],Y[3]=Ae.length>=4?Ae[3]:Y[1]),c.margin=Y}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Ae){ye=Ae}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(Ae){_e=Ae}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Ae){Me=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ae){Ae instanceof d&&(c=Ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ae){c.path=Ae}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Ae){De=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var Y;Y=v(Ae),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var Y=v(Ae);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var ze=null;function Ue(Ae,Y){if(ze===null){var yt=function(tt){var Oe=[];return Object.keys(tt).forEach(function(je){tt[je].forEach(function(We){var $e=null;switch(We){case"bold":$e={family:je,weight:"bold"};break;case"italic":$e={family:je,style:"italic"};break;case"bolditalic":$e={family:je,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:je}}$e!==null&&($e.ref={name:je,style:We},Oe.push($e))})}),Oe}(Ae.getFontList());ze=function(tt){for(var Oe={},je=0;je<tt.length;++je){var We=x2(tt[je]),$e=We.family,at=We.stretch,mt=We.style,bt=We.weight;Oe[$e]=Oe[$e]||{},Oe[$e][at]=Oe[$e][at]||{},Oe[$e][at][mt]=Oe[$e][at][mt]||{},Oe[$e][at][mt][bt]=We}return Oe}(yt.concat(Y))}return ze}var lt=null;Object.defineProperty(this,"fontFaces",{get:function(){return lt},set:function(Ae){ze=null,lt=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var Y;if(this.ctx.font=Ae,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var yt=Y[1],tt=(Y[2],Y[3]),Oe=Y[4],je=(Y[5],Y[6]),We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(We==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var $e=function(ct){var Nt,Ke,lr=[],Ct=ct.trim();if(Ct==="")return Lv;if(Ct in eA)return[eA[Ct]];for(;Ct!=="";){switch(Ke=null,Nt=(Ct=nA(Ct)).charAt(0)){case'"':case"'":Ke=k9(Ct.substring(1),Nt);break;default:Ke=R9(Ct)}if(Ke===null||(lr.push(Ke[0]),(Ct=nA(Ke[1]))!==""&&Ct.charAt(0)!==","))return Lv;Ct=Ct.replace(/^,/,"")}return lr}(je);if(this.fontFaces){var at=C9(Ue(this.pdf,this.fontFaces),$e.map(function(ct){return{family:ct,stretch:"normal",weight:tt,style:yt}}));this.pdf.setFont(at.ref.name,at.ref.style)}else{var mt="";(tt==="bold"||parseInt(tt,10)>=700||yt==="bold")&&(mt="bold"),yt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var bt="",xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<$e.length;dt++){if(this.pdf.internal.getFont($e[dt],mt,{noFallback:!0,disableWarning:!0})!==void 0){bt=$e[dt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont($e[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)bt=$e[dt],mt="bold";else if(this.pdf.internal.getFont($e[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){bt=$e[dt],mt="normal";break}}if(bt===""){for(var It=0;It<$e.length;It++)if(xt[$e[It]]){bt=xt[$e[It]];break}}bt=bt===""?"Times":bt,this.pdf.setFont(bt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,Ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,Ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};p.prototype.setLineDash=function(M){this.lineDash=M},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){$.call(this,"fill",!1)},p.prototype.stroke=function(){$.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(M,W){if(isNaN(M)||isNaN(W))throw on.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(M,W));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(M,W)},p.prototype.closePath=function(){var M=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Jt(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){M=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},p.prototype.lineTo=function(M,W){if(isNaN(M)||isNaN(W))throw on.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(M,W));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},p.prototype.quadraticCurveTo=function(M,W,J,ee){if(isNaN(J)||isNaN(ee)||isNaN(M)||isNaN(W))throw on.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(J,ee)),he=this.ctx.transform.applyToPoint(new o(M,W));this.path.push({type:"qct",x1:he.x,y1:he.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.bezierCurveTo=function(M,W,J,ee,se,he){if(isNaN(se)||isNaN(he)||isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee))throw on.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new o(se,he)),_e=this.ctx.transform.applyToPoint(new o(M,W)),Me=this.ctx.transform.applyToPoint(new o(J,ee));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Me.x,y2:Me.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},p.prototype.arc=function(M,W,J,ee,se,he){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee)||isNaN(se))throw on.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new o(M,W));M=ye.x,W=ye.y;var _e=this.ctx.transform.applyToPoint(new o(0,J)),Me=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(_e.x-Me.x,2)+Math.pow(_e.y-Me.y,2))}Math.abs(se-ee)>=2*Math.PI&&(ee=0,se=2*Math.PI),this.path.push({type:"arc",x:M,y:W,radius:J,startAngle:ee,endAngle:se,counterclockwise:he})},p.prototype.arcTo=function(M,W,J,ee,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(M,W,J,ee){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee))throw on.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,W),this.lineTo(M+J,W),this.lineTo(M+J,W+ee),this.lineTo(M,W+ee),this.lineTo(M,W),this.lineTo(M+J,W),this.lineTo(M,W)},p.prototype.fillRect=function(M,W,J,ee){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee))throw on.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,W,J,ee),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(M,W,J,ee){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee))throw on.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(M,W,J,ee),this.stroke())},p.prototype.clearRect=function(M,W,J,ee){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee))throw on.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,W,J,ee))},p.prototype.save=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},p.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(W),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(M){var W,J,ee,se;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))W=0,J=0,ee=0,se=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(he!==null)W=parseInt(he[1]),J=parseInt(he[2]),ee=parseInt(he[3]),se=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)W=parseInt(he[1]),J=parseInt(he[2]),ee=parseInt(he[3]),se=parseFloat(he[4]);else{if(se=1,typeof M=="string"&&M.charAt(0)!=="#"){var ye=new Q4(M);M=ye.ok?ye.toHex():"#000000"}M.length===4?(W=M.substring(1,2),W+=W,J=M.substring(2,3),J+=J,ee=M.substring(3,4),ee+=ee):(W=M.substring(1,3),J=M.substring(3,5),ee=M.substring(5,7)),W=parseInt(W,16),J=parseInt(J,16),ee=parseInt(ee,16)}}return{r:W,g:J,b:ee,a:se,style:M}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(M,W,J,ee){if(isNaN(W)||isNaN(J)||typeof M!="string")throw on.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var se=Z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;S.call(this,{text:M,x:W,y:J,scale:he,angle:se,align:this.textAlign,maxWidth:ee})}},p.prototype.strokeText=function(M,W,J,ee){if(isNaN(W)||isNaN(J)||typeof M!="string")throw on.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ee=isNaN(ee)?void 0:ee;var se=Z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;S.call(this,{text:M,x:W,y:J,scale:he,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ee})}},p.prototype.measureText=function(M){if(typeof M!="string")throw on.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,J=this.pdf.internal.scaleFactor,ee=W.internal.getFontSize(),se=W.getStringUnitWidth(M)*ee/W.internal.scaleFactor,he=function(ye){var _e=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this};return new he({width:se*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(M,W){if(isNaN(M)||isNaN(W))throw on.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(M,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(M){if(isNaN(M))throw on.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},p.prototype.translate=function(M,W){if(isNaN(M)||isNaN(W))throw on.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,M,W);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(M,W,J,ee,se,he){if(isNaN(M)||isNaN(W)||isNaN(J)||isNaN(ee)||isNaN(se)||isNaN(he))throw on.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new l(M,W,J,ee,se,he);this.ctx.transform=this.ctx.transform.multiply(ye)},p.prototype.setTransform=function(M,W,J,ee,se,he){M=isNaN(M)?1:M,W=isNaN(W)?0:W,J=isNaN(J)?0:J,ee=isNaN(ee)?1:ee,se=isNaN(se)?0:se,he=isNaN(he)?0:he,this.ctx.transform=new l(M,W,J,ee,se,he)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(M,W,J,ee,se,he,ye,_e,Me){var De=this.pdf.getImageProperties(M),ze=1,Ue=1,lt=1,Ae=1;ee!==void 0&&_e!==void 0&&(lt=_e/ee,Ae=Me/se,ze=De.width/ee*_e/ee,Ue=De.height/se*Me/se),he===void 0&&(he=W,ye=J,W=0,J=0),ee!==void 0&&_e===void 0&&(_e=ee,Me=se),ee===void 0&&_e===void 0&&(_e=De.width,Me=De.height);for(var Y,yt=this.ctx.transform.decompose(),tt=Z(yt.rotate.shx),Oe=new l,je=(Oe=(Oe=(Oe=Oe.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale)).applyToRectangle(new a(he-W*lt,ye-J*Ae,ee*ze,se*Ue)),We=R.call(this,je),$e=[],at=0;at<We.length;at+=1)$e.indexOf(We[at])===-1&&$e.push(We[at]);if(L($e),this.autoPaging)for(var mt=$e[0],bt=$e[$e.length-1],xt=mt;xt<bt+1;xt++){this.pdf.setPage(xt);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=xt===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=xt===1?0:ct+(xt-2)*Nt;if(this.ctx.clip_path.length!==0){var lr=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Y,this.posX+this.margin[3],-Ke+It+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=lr}var Ct=JSON.parse(JSON.stringify(je));Ct=E([Ct],this.posX+this.margin[3],-Ke+It+this.ctx.prevPageLastElemOffset)[0];var si=(xt>mt||xt<bt)&&T.call(this);si&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Nt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,tt),si&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",je.x,je.y,je.w,je.h,null,null,tt)};var R=function(M,W,J){var ee=[];W=W||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ee.push(Math.floor((M.y+se)/J)+1);break;case"arc":ee.push(Math.floor((M.y+se-M.radius)/J)+1),ee.push(Math.floor((M.y+se+M.radius)/J)+1);break;case"qct":var he=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ee.push(Math.floor((he.y+se)/J)+1),ee.push(Math.floor((he.y+he.h+se)/J)+1);break;case"bct":var ye=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ee.push(Math.floor((ye.y+se)/J)+1),ee.push(Math.floor((ye.y+ye.h+se)/J)+1);break;case"rect":ee.push(Math.floor((M.y+se)/J)+1),ee.push(Math.floor((M.y+M.h+se)/J)+1)}for(var _e=0;_e<ee.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<ee[_e];)w.call(this);return ee},w=function(){var M=this.fillStyle,W=this.strokeStyle,J=this.font,ee=this.lineCap,se=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=W,this.font=J,this.lineCap=ee,this.lineWidth=se,this.lineJoin=he},E=function(M,W,J){for(var ee=0;ee<M.length;ee++)switch(M[ee].type){case"bct":M[ee].x2+=W,M[ee].y2+=J;case"qct":M[ee].x1+=W,M[ee].y1+=J;case"mt":case"lt":case"arc":default:M[ee].x+=W,M[ee].y+=J}return M},L=function(M){return M.sort(function(W,J){return W-J})},$=function(M,W){for(var J,ee,se=this.fillStyle,he=this.strokeStyle,ye=this.lineCap,_e=this.lineWidth,Me=Math.abs(_e*this.ctx.transform.scaleX),De=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),lt=[],Ae=0;Ae<Ue.length;Ae++)if(Ue[Ae].x!==void 0)for(var Y=R.call(this,Ue[Ae]),yt=0;yt<Y.length;yt+=1)lt.indexOf(Y[yt])===-1&&lt.push(Y[yt]);for(var tt=0;tt<lt.length;tt++)for(;this.pdf.internal.getNumberOfPages()<lt[tt];)w.call(this);if(L(lt),this.autoPaging)for(var Oe=lt[0],je=lt[lt.length-1],We=Oe;We<je+1;We++){this.pdf.setPage(We),this.fillStyle=se,this.strokeStyle=he,this.lineCap=ye,this.lineWidth=Me,this.lineJoin=De;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=We===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=We===1?0:mt+(We-2)*bt;if(this.ctx.clip_path.length!==0){var dt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(J,this.posX+this.margin[3],-xt+at+this.ctx.prevPageLastElemOffset),G.call(this,M,!0),this.path=dt}if(ee=JSON.parse(JSON.stringify(ze)),this.path=E(ee,this.posX+this.margin[3],-xt+at+this.ctx.prevPageLastElemOffset),W===!1||We===0){var It=(We>Oe||We<je)&&T.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,bt,null).clip().discardPath()),G.call(this,M,W),It&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}else this.lineWidth=Me,G.call(this,M,W),this.lineWidth=_e;this.path=ze},G=function(M,W){if((M!=="stroke"||W||!N.call(this))&&(M==="stroke"||W||!g.call(this))){for(var J,ee,se=[],he=this.path,ye=0;ye<he.length;ye++){var _e=he[ye];switch(_e.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:_e,deltas:[],abs:[]});break;case"lt":var Me=se.length;if(he[ye-1]&&!isNaN(he[ye-1].x)&&(J=[_e.x-he[ye-1].x,_e.y-he[ye-1].y],Me>0)){for(;Me>=0;Me--)if(se[Me-1].close!==!0&&se[Me-1].begin!==!0){se[Me-1].deltas.push(J),se[Me-1].abs.push(_e);break}}break;case"bct":J=[_e.x1-he[ye-1].x,_e.y1-he[ye-1].y,_e.x2-he[ye-1].x,_e.y2-he[ye-1].y,_e.x-he[ye-1].x,_e.y-he[ye-1].y],se[se.length-1].deltas.push(J);break;case"qct":var De=he[ye-1].x+2/3*(_e.x1-he[ye-1].x),ze=he[ye-1].y+2/3*(_e.y1-he[ye-1].y),Ue=_e.x+2/3*(_e.x1-_e.x),lt=_e.y+2/3*(_e.y1-_e.y),Ae=_e.x,Y=_e.y;J=[De-he[ye-1].x,ze-he[ye-1].y,Ue-he[ye-1].x,lt-he[ye-1].y,Ae-he[ye-1].x,Y-he[ye-1].y],se[se.length-1].deltas.push(J);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(_e)}}ee=W?null:M==="stroke"?"stroke":"fill";for(var yt=!1,tt=0;tt<se.length;tt++)if(se[tt].arc)for(var Oe=se[tt].abs,je=0;je<Oe.length;je++){var We=Oe[je];We.type==="arc"?I.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,W,!yt):k.call(this,We.x,We.y),yt=!0}else if(se[tt].close===!0)this.pdf.internal.out("h"),yt=!1;else if(se[tt].begin!==!0){var $e=se[tt].start.x,at=se[tt].start.y;X.call(this,se[tt].deltas,$e,at),yt=!0}ee&&F.call(this,ee),W&&U.call(this)}},K=function(M){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-J;case"top":return M+W-J;case"hanging":return M+W-2*J;case"middle":return M+W/2-J;case"ideographic":return M;case"alphabetic":default:return M}},P=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(W,J){this.colorStops.push([W,J])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(M,W,J,ee,se,he,ye,_e,Me){for(var De=ve.call(this,J,ee,se,he),ze=0;ze<De.length;ze++){var Ue=De[ze];ze===0&&(Me?x.call(this,Ue.x1+M,Ue.y1+W):k.call(this,Ue.x1+M,Ue.y1+W)),ge.call(this,M,W,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}_e?U.call(this):F.call(this,ye)},F=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},x=function(M,W){this.pdf.internal.out(t(M)+" "+r(W)+" m")},S=function(M){var W;switch(M.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var J=this.pdf.getTextDimensions(M.text),ee=K.call(this,M.y),se=P.call(this,ee)-J.h,he=this.ctx.transform.applyToPoint(new o(M.x,ee)),ye=this.ctx.transform.decompose(),_e=new l;_e=(_e=(_e=_e.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Me,De,ze,Ue=this.ctx.transform.applyToRectangle(new a(M.x,ee,J.w,J.h)),lt=_e.applyToRectangle(new a(M.x,se,J.w,J.h)),Ae=R.call(this,lt),Y=[],yt=0;yt<Ae.length;yt+=1)Y.indexOf(Ae[yt])===-1&&Y.push(Ae[yt]);if(L(Y),this.autoPaging)for(var tt=Y[0],Oe=Y[Y.length-1],je=tt;je<Oe+1;je++){this.pdf.setPage(je);var We=je===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[2],mt=at-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],xt=bt-this.margin[3],dt=je===1?0:$e+(je-2)*mt;if(this.ctx.clip_path.length!==0){var It=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Me,this.posX+this.margin[3],-1*dt+We),G.call(this,"fill",!0),this.path=It}var ct=E([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-dt+We+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*M.scale),ze=this.lineWidth,this.lineWidth=ze*M.scale);var Nt=this.autoPaging!=="text";if(Nt||ct.y+ct.h<=at){if(Nt||ct.y>=We&&ct.x<=bt){var Ke=Nt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||bt-ct.x)[0],lr=E([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-dt+We+this.ctx.prevPageLastElemOffset)[0],Ct=Nt&&(je>tt||je<Oe)&&T.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,mt,null).clip().discardPath()),this.pdf.text(Ke,lr.x,lr.y,{angle:M.angle,align:W,renderingMode:M.renderingMode}),Ct&&this.pdf.restoreGraphicsState()}}else ct.y<at&&(this.ctx.prevPageLastElemOffset+=at-ct.y);M.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ze)}else M.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*M.scale),ze=this.lineWidth,this.lineWidth=ze*M.scale),this.pdf.text(M.text,he.x+this.posX,he.y+this.posY,{angle:M.angle,align:W,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ze)},k=function(M,W,J,ee){J=J||0,ee=ee||0,this.pdf.internal.out(t(M+J)+" "+r(W+ee)+" l")},X=function(M,W,J){return this.pdf.lines(M,W,J,null,null)},ge=function(M,W,J,ee,se,he,ye,_e){this.pdf.internal.out([e(i(J+M)),e(s(ee+W)),e(i(se+M)),e(s(he+W)),e(i(ye+M)),e(s(_e+W)),"c"].join(" "))},ve=function(M,W,J,ee){for(var se=2*Math.PI,he=Math.PI/2;W>J;)W-=se;var ye=Math.abs(J-W);ye<se&&ee&&(ye=se-ye);for(var _e=[],Me=ee?-1:1,De=W;ye>1e-5;){var ze=De+Me*Math.min(ye,he);_e.push(be.call(this,M,De,ze)),ye-=Math.abs(ze-De),De=ze}return _e},be=function(M,W,J){var ee=(J-W)/2,se=M*Math.cos(ee),he=M*Math.sin(ee),ye=se,_e=-he,Me=ye*ye+_e*_e,De=Me+ye*se+_e*he,ze=4/3*(Math.sqrt(2*Me*De)-De)/(ye*he-_e*se),Ue=ye-ze*_e,lt=_e+ze*ye,Ae=Ue,Y=-lt,yt=ee+W,tt=Math.cos(yt),Oe=Math.sin(yt);return{x1:M*Math.cos(W),y1:M*Math.sin(W),x2:Ue*tt-lt*Oe,y2:Ue*Oe+lt*tt,x3:Ae*tt-Y*Oe,y3:Ae*Oe+Y*tt,x4:M*Math.cos(J),y4:M*Math.sin(J)}},Z=function(M){return 180*M/Math.PI},le=function(M,W,J,ee,se,he){var ye=M+.5*(J-M),_e=W+.5*(ee-W),Me=se+.5*(J-se),De=he+.5*(ee-he),ze=Math.min(M,se,ye,Me),Ue=Math.max(M,se,ye,Me),lt=Math.min(W,he,_e,De),Ae=Math.max(W,he,_e,De);return new a(ze,lt,Ue-ze,Ae-lt)},ce=function(M,W,J,ee,se,he,ye,_e){var Me,De,ze,Ue,lt,Ae,Y,yt,tt,Oe,je,We,$e,at,mt=J-M,bt=ee-W,xt=se-J,dt=he-ee,It=ye-se,ct=_e-he;for(De=0;De<41;De++)tt=(Y=(ze=M+(Me=De/40)*mt)+Me*((lt=J+Me*xt)-ze))+Me*(lt+Me*(se+Me*It-lt)-Y),Oe=(yt=(Ue=W+Me*bt)+Me*((Ae=ee+Me*dt)-Ue))+Me*(Ae+Me*(he+Me*ct-Ae)-yt),De==0?(je=tt,We=Oe,$e=tt,at=Oe):(je=Math.min(je,tt),We=Math.min(We,Oe),$e=Math.max($e,tt),at=Math.max(at,Oe));return new a(Math.round(je),Math.round(We),Math.round($e-je),Math.round(at-We))},Ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,W,J=(M=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:W}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(ft.API),function(n){var e=function(s){var o,a,l,c,d,p,v,g,N,T;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(T=d%85))/85)-(N=d%85))/85)-(g=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,g+33,N+33,T+33)):a.push(122);return function(R,w){for(var E=w;E>0;E--)R.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,c,d,p=String,v="length",g=255,N="charCodeAt",T="slice",R="replace";for(s[T](-2),s=s[T](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[T](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[N](c)-33)+614125*(s[N](c+1)-33)+7225*(s[N](c+2)-33)+85*(s[N](c+3)-33)+(s[N](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(w,E){for(var L=E;L>0;L--)w.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=_2(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ft.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,g=function(N){var T=N.length,R=[],w=String.fromCharCode;for(v=0;v<T;v+=1)R.push(w(255&N.charCodeAt(v)));return R.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(ft.API),function(n){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):p2(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):p2(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Jt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var g=c[v],N=g.src.find(function(T){return T.format==="truetype"});N&&l.addFont(N.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ft.getPageSize=function(o,a,l){if(Jt(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,N=0,T=0;if(v.hasOwnProperty(p))N=v[p][1]/d,T=v[p][0]/d;else try{N=l[1],T=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",T>N&&(g=T,T=N,N=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",N>T&&(g=T,T=N,N=g)}return{width:T,height:N,unit:a,k:d,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(x2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ft.API),ft.API.addJS=function(n){return iA=n,this.internal.events.subscribe("postPutResources",function(){Mm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),rA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+iA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mm!==void 0&&rA!==void 0&&this.internal.out("/Names <</JavaScript "+Mm+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=t.internal.newObject();d.push(p);var v=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ft.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,T={width:0,height:0,numcomponents:1},R=4;R<N;R+=2){if(R+=g,e.indexOf(p.charCodeAt(R+1))!==-1){v=256*p.charCodeAt(R+5)+p.charCodeAt(R+6),T={width:256*p.charCodeAt(R+7)+p.charCodeAt(R+8),height:v,numcomponents:p.charCodeAt(R+9)};break}g=256*p.charCodeAt(R+2)+p.charCodeAt(R+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(ft.API);var Vc,Vm,sA,oA,aA,L9=function(){var n,e,t;function r(s){var o,a,l,c,d,p,v,g,N,T,R,w,E,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),N=(function(){var $,G;for(G=[],$=0;$<4;++$)G.push(String.fromCharCode(this.data[this.pos++]));return G}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((T=l-this.transparency.indexed.length)>0)for(E=0;0<=T?E<T:E>T;0<=T?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(R=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,R.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,R.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,g,N){var T,R,w,E,L,$,G,K,P,I,F,U,x,S,k,X,ge,ve,be,Z,le,ce=Math.ceil((c.width-p)/g),Ne=Math.ceil((c.height-v)/N),M=c.width==ce&&c.height==Ne;for(S=o*ce,U=M?a:new Uint8Array(S*Ne),$=s.length,x=0,R=0;x<Ne&&l<$;){switch(s[l++]){case 0:for(E=ge=0;ge<S;E=ge+=1)U[R++]=s[l++];break;case 1:for(E=ve=0;ve<S;E=ve+=1)T=s[l++],L=E<o?0:U[R-o],U[R++]=(T+L)%256;break;case 2:for(E=be=0;be<S;E=be+=1)T=s[l++],w=(E-E%o)/o,k=x&&U[(x-1)*S+w*o+E%o],U[R++]=(k+T)%256;break;case 3:for(E=Z=0;Z<S;E=Z+=1)T=s[l++],w=(E-E%o)/o,L=E<o?0:U[R-o],k=x&&U[(x-1)*S+w*o+E%o],U[R++]=(T+Math.floor((L+k)/2))%256;break;case 4:for(E=le=0;le<S;E=le+=1)T=s[l++],w=(E-E%o)/o,L=E<o?0:U[R-o],x===0?k=X=0:(k=U[(x-1)*S+w*o+E%o],X=w&&U[(x-1)*S+(w-1)*o+E%o]),G=L+k-X,K=Math.abs(G-L),I=Math.abs(G-k),F=Math.abs(G-X),P=K<=I&&K<=F?L:I<=F?k:X,U[R++]=(T+P)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var W=((v+x*N)*c.width+p)*o,J=x*S;for(E=0;E<ce;E+=1){for(var ee=0;ee<o;ee+=1)a[W++]=U[J++];W+=(g-1)*o}}x++}}return s=h9(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,g;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(g=d[s++])!=null?g:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,g,N,T,R,w;if(l=this.colors,T=null,a=this.hasAlphaChannel,this.palette.length&&(T=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),N=(c=s.data||s).length,p=T||o,d=v=0,l===1)for(;d<N;)g=T?4*o[d/4]:v,R=p[g++],c[d++]=R,c[d++]=R,c[d++]=R,c[d++]=a?p[g++]:255,v=g;else for(;d<N;)g=T?4*o[d/4]:v,c[d++]=p[g++],c[d++]=p[g++],c[d++]=p[g++],c[d++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(pt)==="[object Window]"){try{e=pt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,g;if(this.animation){for(g=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,g.push(o.image=n(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var g,N;if(g=a++%c,N=l[g],v.renderFrame(s,g),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function D9(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,g=0,N=null;for(this.width=t,this.height=r;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,N=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var T=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],!(1&T)&&(v=null),g=T>>2&7,e++;break;case 254:for(;;){if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var R=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,E=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,$=n[e++],G=$>>6&1,K=1<<(7&$)+1,P=a,I=l,F=!1;$>>7&&(F=!0,P=e,I=K,e+=3*K);var U=e;for(e++;;){var x;if(!((x=n[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}d.push({x:R,y:w,width:E,height:L,has_local_palette:F,palette_offset:P,palette_size:I,data_offset:U,data_length:e-U,transparent_index:v,interlaced:!!G,delay:p,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return N},this.frameInfo=function(S){if(S<0||S>=d.length)throw new Error("Frame index out of range.");return d[S]},this.decodeAndBlitFrameBGRA=function(S,k){var X=this.frameInfo(S),ge=X.width*X.height,ve=new Uint8Array(ge);lA(n,X.data_offset,ve,ge);var be=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var le=X.width,ce=t-le,Ne=le,M=4*(X.y*t+X.x),W=4*((X.y+X.height)*t+X.x),J=M,ee=4*ce;X.interlaced===!0&&(ee+=4*t*7);for(var se=8,he=0,ye=ve.length;he<ye;++he){var _e=ve[he];if(Ne===0&&(Ne=le,(J+=ee)>=W&&(ee=4*ce+4*t*(se-1),J=M+(le+ce)*(se<<1),se>>=1)),_e===Z)J+=4;else{var Me=n[be+3*_e],De=n[be+3*_e+1],ze=n[be+3*_e+2];k[J++]=ze,k[J++]=De,k[J++]=Me,k[J++]=255}--Ne}},this.decodeAndBlitFrameRGBA=function(S,k){var X=this.frameInfo(S),ge=X.width*X.height,ve=new Uint8Array(ge);lA(n,X.data_offset,ve,ge);var be=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var le=X.width,ce=t-le,Ne=le,M=4*(X.y*t+X.x),W=4*((X.y+X.height)*t+X.x),J=M,ee=4*ce;X.interlaced===!0&&(ee+=4*t*7);for(var se=8,he=0,ye=ve.length;he<ye;++he){var _e=ve[he];if(Ne===0&&(Ne=le,(J+=ee)>=W&&(ee=4*ce+4*t*(se-1),J=M+(le+ce)*(se<<1),se>>=1)),_e===Z)J+=4;else{var Me=n[be+3*_e],De=n[be+3*_e+1],ze=n[be+3*_e+2];k[J++]=Me,k[J++]=De,k[J++]=ze,k[J++]=255}--Ne}}}function lA(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,g=n[e++],N=new Int32Array(4096),T=null;;){for(;d<16&&g!==0;)p|=n[e++]<<d,d+=8,g===1?g=n[e++]:--g;if(d<l)break;var R=p&c;if(p>>=l,d-=l,R!==s){if(R===o)break;for(var w=R<a?R:T,E=0,L=w;L>s;)L=N[L]>>8,++E;var $=L;if(v+E+(w!==R?1:0)>r)return void on.log("Warning, gif stream longer than expected.");t[v++]=$;var G=v+=E;for(w!==R&&(t[v++]=$),L=w;E--;)L=N[L],t[--G]=255&L,L>>=8;T!==null&&a<4096&&(N[a++]=T<<8|$,a>=c+1&&l<12&&(++l,c=c<<1|1)),T=R}else a=o+1,c=(1<<(l=i+1))-1,T=null}return v!==r&&on.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Dv(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),N=new Array(64),T=[],R=0,w=7,E=new Array(64),L=new Array(64),$=new Array(64),G=new Array(256),K=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(M,W){for(var J=0,ee=0,se=new Array,he=1;he<=16;he++){for(var ye=1;ye<=M[he];ye++)se[W[ee]]=[],se[W[ee]][0]=J,se[W[ee]][1]=he,ee++,J++;J*=2}return se}function be(M){for(var W=M[0],J=M[1]-1;J>=0;)W&1<<J&&(R|=1<<w),J--,--w<0&&(R==255?(Z(255),Z(0)):Z(R),w=7,R=0)}function Z(M){T.push(M)}function le(M){Z(M>>8&255),Z(255&M)}function ce(M,W,J,ee,se){for(var he,ye=se[0],_e=se[240],Me=function(Oe,je){var We,$e,at,mt,bt,xt,dt,It,ct,Nt,Ke=0;for(ct=0;ct<8;++ct){We=Oe[Ke],$e=Oe[Ke+1],at=Oe[Ke+2],mt=Oe[Ke+3],bt=Oe[Ke+4],xt=Oe[Ke+5],dt=Oe[Ke+6];var lr=We+(It=Oe[Ke+7]),Ct=We-It,si=$e+dt,$t=$e-dt,Xt=at+xt,Yi=at-xt,jt=mt+bt,bs=mt-bt,fn=lr+jt,oi=lr-jt,zr=si+Xt,ln=si-Xt;Oe[Ke]=fn+zr,Oe[Ke+4]=fn-zr;var gt=.707106781*(ln+oi);Oe[Ke+2]=oi+gt,Oe[Ke+6]=oi-gt;var kt=.382683433*((fn=bs+Yi)-(ln=$t+Ct)),Hs=.5411961*fn+kt,Pn=1.306562965*ln+kt,Si=.707106781*(zr=Yi+$t),Pr=Ct+Si,ut=Ct-Si;Oe[Ke+5]=ut+Hs,Oe[Ke+3]=ut-Hs,Oe[Ke+1]=Pr+Pn,Oe[Ke+7]=Pr-Pn,Ke+=8}for(Ke=0,ct=0;ct<8;++ct){We=Oe[Ke],$e=Oe[Ke+8],at=Oe[Ke+16],mt=Oe[Ke+24],bt=Oe[Ke+32],xt=Oe[Ke+40],dt=Oe[Ke+48];var nn=We+(It=Oe[Ke+56]),Ni=We-It,Jn=$e+dt,pn=$e-dt,Cn=at+xt,$r=at-xt,Pi=mt+bt,Is=mt-bt,Ci=nn+Pi,Cr=nn-Pi,ai=Jn+Cn,li=Jn-Cn;Oe[Ke]=Ci+ai,Oe[Ke+32]=Ci-ai;var vr=.707106781*(li+Cr);Oe[Ke+16]=Cr+vr,Oe[Ke+48]=Cr-vr;var nr=.382683433*((Ci=Is+$r)-(li=pn+Ni)),Ks=.5411961*Ci+nr,Po=1.306562965*li+nr,Qs=.707106781*(ai=$r+pn),Js=Ni+Qs,Co=Ni-Qs;Oe[Ke+40]=Co+Ks,Oe[Ke+24]=Co-Ks,Oe[Ke+8]=Js+Po,Oe[Ke+56]=Js-Po,Ke++}for(ct=0;ct<64;++ct)Nt=Oe[ct]*je[ct],g[ct]=Nt>0?Nt+.5|0:Nt-.5|0;return g}(M,W),De=0;De<64;++De)N[P[De]]=Me[De];var ze=N[0]-J;J=N[0],ze==0?be(ee[0]):(be(ee[v[he=32767+ze]]),be(p[he]));for(var Ue=63;Ue>0&&N[Ue]==0;)Ue--;if(Ue==0)return be(ye),J;for(var lt,Ae=1;Ae<=Ue;){for(var Y=Ae;N[Ae]==0&&Ae<=Ue;)++Ae;var yt=Ae-Y;if(yt>=16){lt=yt>>4;for(var tt=1;tt<=lt;++tt)be(_e);yt&=15}he=32767+N[Ae],be(se[(yt<<4)+v[he]]),be(p[he]),Ae++}return Ue!=63&&be(ye),J}function Ne(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(W){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var se=o((J[ee]*W+50)/100);se=Math.min(Math.max(se,1),255),a[P[ee]]=se}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var _e=o((he[ye]*W+50)/100);_e=Math.min(Math.max(_e,1),255),l[P[ye]]=_e}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,ze=0;ze<8;ze++)for(var Ue=0;Ue<8;Ue++)c[De]=1/(a[P[De]]*Me[ze]*Me[Ue]*8),d[De]=1/(l[P[De]]*Me[ze]*Me[Ue]*8),De++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,W){W&&Ne(W),T=new Array,R=0,w=7,le(65496),le(65504),le(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),le(1),le(1),Z(0),Z(0),function(){le(65499),le(132),Z(0);for(var $e=0;$e<64;$e++)Z(a[$e]);Z(1);for(var at=0;at<64;at++)Z(l[at])}(),function($e,at){le(65472),le(17),Z(8),le(at),le($e),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(M.width,M.height),function(){le(65476),le(418),Z(0);for(var $e=0;$e<16;$e++)Z(I[$e+1]);for(var at=0;at<=11;at++)Z(F[at]);Z(16);for(var mt=0;mt<16;mt++)Z(U[mt+1]);for(var bt=0;bt<=161;bt++)Z(x[bt]);Z(1);for(var xt=0;xt<16;xt++)Z(S[xt+1]);for(var dt=0;dt<=11;dt++)Z(k[dt]);Z(17);for(var It=0;It<16;It++)Z(X[It+1]);for(var ct=0;ct<=161;ct++)Z(ge[ct])}(),le(65498),le(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var J=0,ee=0,se=0;R=0,w=7,this.encode.displayName="_encode_";for(var he,ye,_e,Me,De,ze,Ue,lt,Ae,Y=M.data,yt=M.width,tt=M.height,Oe=4*yt,je=0;je<tt;){for(he=0;he<Oe;){for(De=Oe*je+he,Ue=-1,lt=0,Ae=0;Ae<64;Ae++)ze=De+(lt=Ae>>3)*Oe+(Ue=4*(7&Ae)),je+lt>=tt&&(ze-=Oe*(je+1+lt-tt)),he+Ue>=Oe&&(ze-=he+Ue-Oe+4),ye=Y[ze++],_e=Y[ze++],Me=Y[ze++],E[Ae]=(K[ye]+K[_e+256>>0]+K[Me+512>>0]>>16)-128,L[Ae]=(K[ye+768>>0]+K[_e+1024>>0]+K[Me+1280>>0]>>16)-128,$[Ae]=(K[ye+1280>>0]+K[_e+1536>>0]+K[Me+1792>>0]>>16)-128;J=ce(E,c,J,e,r),ee=ce(L,d,ee,t,i),se=ce($,d,se,t,i),he+=32}je+=8}if(w>=0){var We=[];We[1]=w+1,We[0]=(1<<w+1)-1,be(We)}return le(65497),new Uint8Array(T)},n=n||50,function(){for(var M=String.fromCharCode,W=0;W<256;W++)G[W]=M(W)}(),e=ve(I,F),t=ve(S,k),r=ve(U,x),i=ve(X,ge),function(){for(var M=1,W=2,J=1;J<=15;J++){for(var ee=M;ee<W;ee++)v[32767+ee]=J,p[32767+ee]=[],p[32767+ee][1]=J,p[32767+ee][0]=ee;for(var se=-(W-1);se<=-M;se++)v[32767+se]=J,p[32767+se]=[],p[32767+se][1]=J,p[32767+se][0]=W-1+se;M<<=1,W<<=1}}(),function(){for(var M=0;M<256;M++)K[M]=19595*M,K[M+256>>0]=38470*M,K[M+512>>0]=7471*M+32768,K[M+768>>0]=-11059*M,K[M+1024>>0]=-21709*M,K[M+1280>>0]=32768*M+8421375,K[M+1536>>0]=-27439*M,K[M+1792>>0]=-5329*M}(),Ne(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Os(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uA(n){function e(I){if(!I)throw Error("assert :P")}function t(I,F,U){for(var x=0;4>x;x++)if(I[F+x]!=U.charCodeAt(x))return!0;return!1}function r(I,F,U,x,S){for(var k=0;k<S;k++)I[F+k]=U[x+k]}function i(I,F,U,x){for(var S=0;S<x;S++)I[F+S]=U}function s(I){return new Int32Array(I)}function o(I,F){for(var U=[],x=0;x<I;x++)U.push(new F);return U}function a(I,F){var U=[];return function x(S,k,X){for(var ge=X[k],ve=0;ve<ge&&(S.push(X.length>k+1?[]:new F),!(X.length<k+1));ve++)x(S[ve],k+1,X)}(U,0,I),U}var l=function(){var I=this;function F(u,f){for(var y=1<<f-1>>>0;u&y;)y>>>=1;return y?(u&y-1)+y:u}function U(u,f,y,b,O){e(!(b%y));do u[f+(b-=y)]=O;while(0<b)}function x(u,f,y,b,O){if(e(2328>=O),512>=O)var V=s(512);else if((V=s(O))==null)return 0;return function(j,q,z,H,ne,fe){var pe,ae,Se=q,Ee=1<<z,re=s(16),oe=s(16);for(e(ne!=0),e(H!=null),e(j!=null),e(0<z),ae=0;ae<ne;++ae){if(15<H[ae])return 0;++re[H[ae]]}if(re[0]==ne)return 0;for(oe[1]=0,pe=1;15>pe;++pe){if(re[pe]>1<<pe)return 0;oe[pe+1]=oe[pe]+re[pe]}for(ae=0;ae<ne;++ae)pe=H[ae],0<H[ae]&&(fe[oe[pe]++]=ae);if(oe[15]==1)return(H=new S).g=0,H.value=fe[0],U(j,Se,1,Ee,H),Ee;var xe,Pe=-1,Te=Ee-1,Je=0,Be=1,ht=1,He=1<<z;for(ae=0,pe=1,ne=2;pe<=z;++pe,ne<<=1){if(Be+=ht<<=1,0>(ht-=re[pe]))return 0;for(;0<re[pe];--re[pe])(H=new S).g=pe,H.value=fe[ae++],U(j,Se+Je,ne,He,H),Je=F(Je,pe)}for(pe=z+1,ne=2;15>=pe;++pe,ne<<=1){if(Be+=ht<<=1,0>(ht-=re[pe]))return 0;for(;0<re[pe];--re[pe]){if(H=new S,(Je&Te)!=Pe){for(Se+=He,xe=1<<(Pe=pe)-z;15>Pe&&!(0>=(xe-=re[Pe]));)++Pe,xe<<=1;Ee+=He=1<<(xe=Pe-z),j[q+(Pe=Je&Te)].g=xe+z,j[q+Pe].value=Se-q-Pe}H.g=pe-z,H.value=fe[ae++],U(j,Se+(Je>>z),ne,He,H),Je=F(Je,pe)}}return Be!=2*oe[15]-1?0:Ee}(u,f,y,b,O,V)}function S(){this.value=this.g=0}function k(){this.value=this.g=0}function X(){this.G=o(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(_r,k)}function ge(u,f,y,b){e(u!=null),e(f!=null),e(2147483648>b),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=y,u.Jd=f,u.Yc=y+b,u.Zc=4<=b?y+b-4+1:y,he(u)}function ve(u,f){for(var y=0;0<f--;)y|=_e(u,128)<<f;return y}function be(u,f){var y=ve(u,f);return ye(u)?-y:y}function Z(u,f,y,b){var O,V=0;for(e(u!=null),e(f!=null),e(4294967288>b),u.Sb=b,u.Ra=0,u.u=0,u.h=0,4<b&&(b=4),O=0;O<b;++O)V+=f[y+O]<<8*O;u.Ra=V,u.bb=b,u.oa=f,u.pa=y}function le(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<wc-8>>>0,++u.bb,u.u-=8;J(u)&&(u.h=1,u.u=0)}function ce(u,f){if(e(0<=f),!u.h&&f<=_c){var y=W(u)&yc[f];return u.u+=f,le(u),y}return u.h=1,u.u=0}function Ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(u){return u.Ra>>>(u.u&wc-1)>>>0}function J(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>wc}function ee(u,f){u.u=f,u.h=J(u)}function se(u){u.u>=dd&&(e(u.u>=dd),le(u))}function he(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ye(u){return ve(u,1)}function _e(u,f){var y=u.Ca;0>u.b&&he(u);var b=u.b,O=y*f>>>8,V=(u.I>>>b>O)+0;for(V?(y-=O,u.I-=O+1<<b>>>0):y=O+1,b=y,O=0;256<=b;)O+=8,b>>=8;return b=7^O+di[b],u.b-=b,u.Ca=(y<<b)-1,V}function Me(u,f,y){u[f+0]=y>>24&255,u[f+1]=y>>16&255,u[f+2]=y>>8&255,u[f+3]=y>>0&255}function De(u,f){return u[f+0]<<0|u[f+1]<<8}function ze(u,f){return De(u,f)|u[f+2]<<16}function Ue(u,f){return De(u,f)|De(u,f+2)<<16}function lt(u,f){var y=1<<f;return e(u!=null),e(0<f),u.X=s(y),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function Ae(u,f){e(u!=null),e(f!=null),e(u.Xa==f.Xa),r(f.X,0,u.X,0,1<<f.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function yt(u,f,y,b){e(y!=null),e(b!=null);var O=y[0],V=b[0];return O==0&&(O=(u*V+f/2)/f),V==0&&(V=(f*O+u/2)/u),0>=O||0>=V?0:(y[0]=O,b[0]=V,1)}function tt(u,f){return u+(1<<f)-1>>>f}function Oe(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function je(u,f){I[f]=function(y,b,O,V,j,q,z){var H;for(H=0;H<j;++H){var ne=I[u](q[z+H-1],O,V+H);q[z+H]=Oe(y[b+H],ne)}}}function We(){this.ud=this.hd=this.jd=0}function $e(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function at(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function mt(u,f){return at(u+(u-f+.5>>1))}function bt(u,f,y){return Math.abs(f-y)-Math.abs(u-y)}function xt(u,f,y,b,O,V,j){for(b=V[j-1],y=0;y<O;++y)V[j+y]=b=Oe(u[f+y],b)}function dt(u,f,y,b,O){var V;for(V=0;V<y;++V){var j=u[f+V],q=j>>8&255,z=16711935&(z=(z=16711935&j)+((q<<16)+q));b[O+V]=(4278255360&j)+z>>>0}}function It(u,f){f.jd=u>>0&255,f.hd=u>>8&255,f.ud=u>>16&255}function ct(u,f,y,b,O,V){var j;for(j=0;j<b;++j){var q=f[y+j],z=q>>>8,H=q,ne=255&(ne=(ne=q>>>16)+((u.jd<<24>>24)*(z<<24>>24)>>>5));H=255&(H=(H=H+((u.hd<<24>>24)*(z<<24>>24)>>>5))+((u.ud<<24>>24)*(ne<<24>>24)>>>5)),O[V+j]=(4278255360&q)+(ne<<16)+H}}function Nt(u,f,y,b,O){I[f]=function(V,j,q,z,H,ne,fe,pe,ae){for(z=fe;z<pe;++z)for(fe=0;fe<ae;++fe)H[ne++]=O(q[b(V[j++])])},I[u]=function(V,j,q,z,H,ne,fe){var pe=8>>V.b,ae=V.Ea,Se=V.K[0],Ee=V.w;if(8>pe)for(V=(1<<V.b)-1,Ee=(1<<pe)-1;j<q;++j){var re,oe=0;for(re=0;re<ae;++re)re&V||(oe=b(z[H++])),ne[fe++]=O(Se[oe&Ee]),oe>>=pe}else I["VP8LMapColor"+y](z,H,Se,Ee,ne,fe,j,q,ae)}}function Ke(u,f,y,b,O){for(y=f+y;f<y;){var V=u[f++];b[O++]=V>>16&255,b[O++]=V>>8&255,b[O++]=V>>0&255}}function lr(u,f,y,b,O){for(y=f+y;f<y;){var V=u[f++];b[O++]=V>>16&255,b[O++]=V>>8&255,b[O++]=V>>0&255,b[O++]=V>>24&255}}function Ct(u,f,y,b,O){for(y=f+y;f<y;){var V=(j=u[f++])>>16&240|j>>12&15,j=j>>0&240|j>>28&15;b[O++]=V,b[O++]=j}}function si(u,f,y,b,O){for(y=f+y;f<y;){var V=(j=u[f++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;b[O++]=V,b[O++]=j}}function $t(u,f,y,b,O){for(y=f+y;f<y;){var V=u[f++];b[O++]=V>>0&255,b[O++]=V>>8&255,b[O++]=V>>16&255}}function Xt(u,f,y,b,O,V){if(V==0)for(y=f+y;f<y;)Me(b,((V=u[f++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),O+=32;else r(b,O,u,f,y)}function Yi(u,f){I[f][0]=I[u+"0"],I[f][1]=I[u+"1"],I[f][2]=I[u+"2"],I[f][3]=I[u+"3"],I[f][4]=I[u+"4"],I[f][5]=I[u+"5"],I[f][6]=I[u+"6"],I[f][7]=I[u+"7"],I[f][8]=I[u+"8"],I[f][9]=I[u+"9"],I[f][10]=I[u+"10"],I[f][11]=I[u+"11"],I[f][12]=I[u+"12"],I[f][13]=I[u+"13"],I[f][14]=I[u+"0"],I[f][15]=I[u+"0"]}function jt(u){return u==w1||u==b1||u==Jp||u==I1}function bs(){this.eb=[],this.size=this.A=this.fb=0}function fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bs,this.f.kb=new fn,this.sd=null}function zr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ln(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function kt(u,f){var y=u.T,b=f.ba.f.RGBA,O=b.eb,V=b.fb+u.ka*b.A,j=us[f.ba.S],q=u.y,z=u.O,H=u.f,ne=u.N,fe=u.ea,pe=u.W,ae=f.cc,Se=f.dc,Ee=f.Mc,re=f.Nc,oe=u.ka,xe=u.ka+u.T,Pe=u.U,Te=Pe+1>>1;for(oe==0?j(q,z,null,null,H,ne,fe,pe,H,ne,fe,pe,O,V,null,null,Pe):(j(f.ec,f.fc,q,z,ae,Se,Ee,re,H,ne,fe,pe,O,V-b.A,O,V,Pe),++y);oe+2<xe;oe+=2)ae=H,Se=ne,Ee=fe,re=pe,ne+=u.Rc,pe+=u.Rc,V+=2*b.A,j(q,(z+=2*u.fa)-u.fa,q,z,ae,Se,Ee,re,H,ne,fe,pe,O,V-b.A,O,V,Pe);return z+=u.fa,u.j+xe<u.o?(r(f.ec,f.fc,q,z,Pe),r(f.cc,f.dc,H,ne,Te),r(f.Mc,f.Nc,fe,pe,Te),y--):1&xe||j(q,z,null,null,H,ne,fe,pe,H,ne,fe,pe,O,V+b.A,null,null,Pe),y}function Hs(u,f,y){var b=u.F,O=[u.J];if(b!=null){var V=u.U,j=f.ba.S,q=j==Qp||j==Jp;f=f.ba.f.RGBA;var z=[0],H=u.ka;z[0]=u.T,u.Kb&&(H==0?--z[0]:(--H,O[0]-=u.width),u.j+u.ka+u.T==u.o&&(z[0]=u.o-u.j-H));var ne=f.eb;H=f.fb+H*f.A,u=cn(b,O[0],u.width,V,z,ne,H+(q?0:3),f.A),e(y==z),u&&jt(j)&&as(ne,H,q,V,z,f.A)}return 0}function Pn(u){var f=u.ma,y=f.ba.S,b=11>y,O=y==Hp||y==Kp||y==Qp||y==_1||y==12||jt(y);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Vo(f.Oa,u,O?11:12))return 0;if(O&&jt(y)&&Ce(),u.da)alert("todo:use_scaling");else{if(b){if(f.Ib=gt,u.Kb){if(y=u.U+1>>1,f.memory=s(u.U+2*y),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+y,f.Ib=kt,Ce()}}else alert("todo:EmitYUV");O&&(f.Jb=Hs,b&&ue())}if(b&&!p5){for(u=0;256>u;++u)x3[u]=89858*(u-128)+Xp>>Yp,N3[u]=-22014*(u-128)+Xp,S3[u]=-45773*(u-128),T3[u]=113618*(u-128)+Xp>>Yp;for(u=_d;u<x1;++u)f=76283*(u-16)+Xp>>Yp,P3[u-_d]=wt(f,255),C3[u-_d]=wt(f+8>>4,15);p5=1}return 1}function Si(u){var f=u.ma,y=u.U,b=u.T;return e(!(1&u.ka)),0>=y||0>=b?0:(y=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,y),f.Dc+=y,1)}function Pr(u){u.ma.memory=null}function ut(u,f,y,b){return ce(u,8)!=47?0:(f[0]=ce(u,14)+1,y[0]=ce(u,14)+1,b[0]=ce(u,1),ce(u,3)!=0?0:!u.h)}function nn(u,f){if(4>u)return u+1;var y=u-2>>1;return(2+(1&u)<<y)+ce(f,y)+1}function Ni(u,f){return 120<f?f-120:1<=(y=((y=h3[f-1])>>4)*u+(8-(15&y)))?y:1;var y}function Jn(u,f,y){var b=W(y),O=u[f+=255&b].g-8;return 0<O&&(ee(y,y.u+8),b=W(y),f+=u[f].value,f+=b&(1<<O)-1),ee(y,y.u+u[f].g),u[f].value}function pn(u,f,y){return y.g+=u.g,y.value+=u.value<<f>>>0,e(8>=y.g),u.g}function Cn(u,f,y){var b=u.xc;return e((f=b==0?0:u.vc[u.md*(y>>b)+(f>>b)])<u.Wb),u.Ya[f]}function $r(u,f,y,b){var O=u.ab,V=u.c*f,j=u.C;f=j+f;var q=y,z=b;for(b=u.Ta,y=u.Ua;0<O--;){var H=u.gc[O],ne=j,fe=f,pe=q,ae=z,Se=(z=b,q=y,H.Ea);switch(e(ne<fe),e(fe<=H.nc),H.hc){case 2:Up(pe,ae,(fe-ne)*Se,z,q);break;case 0:var Ee=ne,re=fe,oe=z,xe=q,Pe=(He=H).Ea;Ee==0&&(v1(pe,ae,null,null,1,oe,xe),xt(pe,ae+1,0,0,Pe-1,oe,xe+1),ae+=Pe,xe+=Pe,++Ee);for(var Te=1<<He.b,Je=Te-1,Be=tt(Pe,He.b),ht=He.K,He=He.w+(Ee>>He.b)*Be;Ee<re;){var qt=ht,Ht=He,Mt=1;for(fd(pe,ae,oe,xe-Pe,1,oe,xe);Mt<Pe;){var Rt=(Mt&~Je)+Te;Rt>Pe&&(Rt=Pe),(0,ka[qt[Ht++]>>8&15])(pe,ae+ +Mt,oe,xe+Mt-Pe,Rt-Mt,oe,xe+Mt),Mt=Rt}ae+=Pe,xe+=Pe,++Ee&Je||(He+=Be)}fe!=H.nc&&r(z,q-Se,z,q+(fe-ne-1)*Se,Se);break;case 1:for(Se=pe,re=ae,Pe=(pe=H.Ea)-(xe=pe&~(oe=(ae=1<<H.b)-1)),Ee=tt(pe,H.b),Te=H.K,H=H.w+(ne>>H.b)*Ee;ne<fe;){for(Je=Te,Be=H,ht=new We,He=re+xe,qt=re+pe;re<He;)It(Je[Be++],ht),tu(ht,Se,re,ae,z,q),re+=ae,q+=ae;re<qt&&(It(Je[Be++],ht),tu(ht,Se,re,Pe,z,q),re+=Pe,q+=Pe),++ne&oe||(H+=Ee)}break;case 3:if(pe==z&&ae==q&&0<H.b){for(re=z,pe=Se=q+(fe-ne)*Se-(xe=(fe-ne)*tt(H.Ea,H.b)),ae=z,oe=q,Ee=[],xe=(Pe=xe)-1;0<=xe;--xe)Ee[xe]=ae[oe+xe];for(xe=Pe-1;0<=xe;--xe)re[pe+xe]=Ee[xe];is(H,ne,fe,z,Se,z,q)}else is(H,ne,fe,pe,ae,z,q)}q=b,z=y}z!=y&&r(b,y,q,z,V)}function Pi(u,f){var y=u.V,b=u.Ba+u.c*u.C,O=f-u.C;if(e(f<=u.l.o),e(16>=O),0<O){var V=u.l,j=u.Ta,q=u.Ua,z=V.width;if($r(u,O,y,b),O=q=[q],e((y=u.C)<(b=f)),e(V.v<V.va),b>V.o&&(b=V.o),y<V.j){var H=V.j-y;y=V.j,O[0]+=H*z}if(y>=b?y=0:(O[0]+=4*V.v,V.ka=y-V.j,V.U=V.va-V.v,V.T=b-y,y=1),y){if(q=q[0],11>(y=u.ca).S){var ne=y.f.RGBA,fe=(b=y.S,O=V.U,V=V.T,H=ne.eb,ne.A),pe=V;for(ne=ne.fb+u.Ma*ne.A;0<pe--;){var ae=j,Se=q,Ee=O,re=H,oe=ne;switch(b){case Wp:fi(ae,Se,Ee,re,oe);break;case Hp:Hr(ae,Se,Ee,re,oe);break;case w1:Hr(ae,Se,Ee,re,oe),as(re,oe,0,Ee,1,0);break;case i5:Uo(ae,Se,Ee,re,oe);break;case Kp:Xt(ae,Se,Ee,re,oe,1);break;case b1:Xt(ae,Se,Ee,re,oe,1),as(re,oe,0,Ee,1,0);break;case Qp:Xt(ae,Se,Ee,re,oe,0);break;case Jp:Xt(ae,Se,Ee,re,oe,0),as(re,oe,1,Ee,1,0);break;case _1:Ra(ae,Se,Ee,re,oe);break;case I1:Ra(ae,Se,Ee,re,oe),un(re,oe,Ee,1,0);break;case s5:jo(ae,Se,Ee,re,oe);break;default:e(0)}q+=z,ne+=fe}u.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=y.height)}}u.C=f,e(u.C<=u.i)}function Is(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var y=u.Ya[f].G,b=u.Ya[f].H;if(0<y[1][b[1]+0].g||0<y[2][b[2]+0].g||0<y[3][b[3]+0].g)return 0}return 1}function Ci(u,f,y,b,O,V){if(u.Z!=0){var j=u.qd,q=u.rd;for(e(Fa[u.Z]!=null);f<y;++f)Fa[u.Z](j,q,b,O,b,O,V),j=b,q=O,O+=V;u.qd=j,u.rd=q}}function Cr(u,f){var y=u.l.ma,b=y.Z==0||y.Z==1?u.l.j:u.C;if(b=u.C<b?b:u.C,e(f<=u.l.o),f>b){var O=u.l.width,V=y.ca,j=y.tb+O*b,q=u.V,z=u.Ba+u.c*b,H=u.gc;e(u.ab==1),e(H[0].hc==3),Bp(H[0],b,f,q,z,V,j),Ci(y,b,f,V,j,O)}u.C=u.Ma=f}function ai(u,f,y,b,O,V,j){var q=u.$/b,z=u.$%b,H=u.m,ne=u.s,fe=y+u.$,pe=fe;O=y+b*O;var ae=y+b*V,Se=280+ne.ua,Ee=u.Pb?q:16777216,re=0<ne.ua?ne.Wa:null,oe=ne.wc,xe=fe<ae?Cn(ne,z,q):null;e(u.C<V),e(ae<=O);var Pe=!1;e:for(;;){for(;Pe||fe<ae;){var Te=0;if(q>=Ee){var Je=fe-y;e((Ee=u).Pb),Ee.wd=Ee.m,Ee.xd=Je,0<Ee.s.ua&&Ae(Ee.s.Wa,Ee.s.vb),Ee=q+f3}if(z&oe||(xe=Cn(ne,z,q)),e(xe!=null),xe.Qb&&(f[fe]=xe.qb,Pe=!0),!Pe)if(se(H),xe.jc){Te=H,Je=f;var Be=fe,ht=xe.pd[W(Te)&_r-1];e(xe.jc),256>ht.g?(ee(Te,Te.u+ht.g),Je[Be]=ht.value,Te=0):(ee(Te,Te.u+ht.g-256),e(256<=ht.value),Te=ht.value),Te==0&&(Pe=!0)}else Te=Jn(xe.G[0],xe.H[0],H);if(H.h)break;if(Pe||256>Te){if(!Pe)if(xe.nd)f[fe]=(xe.qb|Te<<8)>>>0;else{if(se(H),Pe=Jn(xe.G[1],xe.H[1],H),se(H),Je=Jn(xe.G[2],xe.H[2],H),Be=Jn(xe.G[3],xe.H[3],H),H.h)break;f[fe]=(Be<<24|Pe<<16|Te<<8|Je)>>>0}if(Pe=!1,++fe,++z>=b&&(z=0,++q,j!=null&&q<=V&&!(q%16)&&j(u,q),re!=null))for(;pe<fe;)Te=f[pe++],re.X[(506832829*Te&4294967295)>>>re.Mb]=Te}else if(280>Te){if(Te=nn(Te-256,H),Je=Jn(xe.G[4],xe.H[4],H),se(H),Je=Ni(b,Je=nn(Je,H)),H.h)break;if(fe-y<Je||O-fe<Te)break e;for(Be=0;Be<Te;++Be)f[fe+Be]=f[fe+Be-Je];for(fe+=Te,z+=Te;z>=b;)z-=b,++q,j!=null&&q<=V&&!(q%16)&&j(u,q);if(e(fe<=O),z&oe&&(xe=Cn(ne,z,q)),re!=null)for(;pe<fe;)Te=f[pe++],re.X[(506832829*Te&4294967295)>>>re.Mb]=Te}else{if(!(Te<Se))break e;for(Pe=Te-280,e(re!=null);pe<fe;)Te=f[pe++],re.X[(506832829*Te&4294967295)>>>re.Mb]=Te;Te=fe,e(!(Pe>>>(Je=re).Xa)),f[Te]=Je.X[Pe],Pe=!0}Pe||e(H.h==J(H))}if(u.Pb&&H.h&&fe<O)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Ae(u.s.vb,u.s.Wa);else{if(H.h)break e;j!=null&&j(u,q>V?V:q),u.a=0,u.$=fe-y}return 1}return u.a=3,0}function li(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,e(u!=null)}function vr(){var u=new eu;return u==null?null:(u.a=0,u.xb=l5,Yi("Predictor","VP8LPredictors"),Yi("Predictor","VP8LPredictors_C"),Yi("PredictorAdd","VP8LPredictorsAdd"),Yi("PredictorAdd","VP8LPredictorsAdd_C"),Up=dt,tu=ct,fi=Ke,Hr=lr,Ra=Ct,jo=si,Uo=$t,I.VP8LMapColor32b=bc,I.VP8LMapColor8b=qp,u)}function nr(u,f,y,b,O){var V=1,j=[u],q=[f],z=b.m,H=b.s,ne=null,fe=0;e:for(;;){if(y)for(;V&&ce(z,1);){var pe=j,ae=q,Se=b,Ee=1,re=Se.m,oe=Se.gc[Se.ab],xe=ce(re,2);if(Se.Oc&1<<xe)V=0;else{switch(Se.Oc|=1<<xe,oe.hc=xe,oe.Ea=pe[0],oe.nc=ae[0],oe.K=[null],++Se.ab,e(4>=Se.ab),xe){case 0:case 1:oe.b=ce(re,3)+2,Ee=nr(tt(oe.Ea,oe.b),tt(oe.nc,oe.b),0,Se,oe.K),oe.K=oe.K[0];break;case 3:var Pe,Te=ce(re,8)+1,Je=16<Te?0:4<Te?1:2<Te?2:3;if(pe[0]=tt(oe.Ea,Je),oe.b=Je,Pe=Ee=nr(Te,1,0,Se,oe.K)){var Be,ht=Te,He=oe,qt=1<<(8>>He.b),Ht=s(qt);if(Ht==null)Pe=0;else{var Mt=He.K[0],Rt=He.w;for(Ht[0]=He.K[0][0],Be=1;Be<1*ht;++Be)Ht[Be]=Oe(Mt[Rt+Be],Ht[Be-1]);for(;Be<4*qt;++Be)Ht[Be]=0;He.K[0]=null,He.K[0]=Ht,Pe=1}}Ee=Pe;break;case 2:break;default:e(0)}V=Ee}}if(j=j[0],q=q[0],V&&ce(z,1)&&!(V=1<=(fe=ce(z,4))&&11>=fe)){b.a=3;break e}var sn;if(sn=V)t:{var en,Tt,Yn,pi=b,Xn=j,mi=q,Kt=fe,Vi=y,ji=pi.m,ur=pi.s,wr=[null],Qr=1,cs=0,eo=d3[Kt];n:for(;;){if(Vi&&ce(ji,1)){var cr=ce(ji,3)+2,$o=tt(Xn,cr),ou=tt(mi,cr),Tc=$o*ou;if(!nr($o,ou,0,pi,wr))break n;for(wr=wr[0],ur.xc=cr,en=0;en<Tc;++en){var Ma=wr[en]>>8&65535;wr[en]=Ma,Ma>=Qr&&(Qr=Ma+1)}}if(ji.h)break n;for(Tt=0;5>Tt;++Tt){var Rn=o5[Tt];!Tt&&0<Kt&&(Rn+=1<<Kt),cs<Rn&&(cs=Rn)}var T1=o(Qr*eo,S),v5=Qr,y5=o(v5,X);if(y5==null)var em=null;else e(65536>=v5),em=y5;var wd=s(cs);if(em==null||wd==null||T1==null){pi.a=1;break n}var tm=T1;for(en=Yn=0;en<Qr;++en){var Rs=em[en],Sc=Rs.G,Nc=Rs.H,_5=0,nm=1,w5=0;for(Tt=0;5>Tt;++Tt){Rn=o5[Tt],Sc[Tt]=tm,Nc[Tt]=Yn,!Tt&&0<Kt&&(Rn+=1<<Kt);i:{var rm,S1=Rn,im=pi,bd=wd,L3=tm,D3=Yn,N1=0,Va=im.m,O3=ce(Va,1);if(i(bd,0,0,S1),O3){var F3=ce(Va,1)+1,M3=ce(Va,1),b5=ce(Va,M3==0?1:8);bd[b5]=1,F3==2&&(bd[b5=ce(Va,8)]=1);var sm=1}else{var I5=s(19),E5=ce(Va,4)+4;if(19<E5){im.a=3;var om=0;break i}for(rm=0;rm<E5;++rm)I5[c3[rm]]=ce(Va,3);var P1=void 0,Id=void 0,A5=im,V3=I5,am=S1,x5=bd,C1=0,ja=A5.m,T5=8,S5=o(128,S);r:for(;x(S5,0,7,V3,19);){if(ce(ja,1)){var j3=2+2*ce(ja,3);if((P1=2+ce(ja,j3))>am)break r}else P1=am;for(Id=0;Id<am&&P1--;){se(ja);var N5=S5[0+(127&W(ja))];ee(ja,ja.u+N5.g);var Pc=N5.value;if(16>Pc)x5[Id++]=Pc,Pc!=0&&(T5=Pc);else{var U3=Pc==16,P5=Pc-16,B3=l3[P5],C5=ce(ja,a3[P5])+B3;if(Id+C5>am)break r;for(var q3=U3?T5:0;0<C5--;)x5[Id++]=q3}}C1=1;break r}C1||(A5.a=3),sm=C1}(sm=sm&&!Va.h)&&(N1=x(L3,D3,8,bd,S1)),sm&&N1!=0?om=N1:(im.a=3,om=0)}if(om==0)break n;if(nm&&u3[Tt]==1&&(nm=tm[Yn].g==0),_5+=tm[Yn].g,Yn+=om,3>=Tt){var Ed,k1=wd[0];for(Ed=1;Ed<Rn;++Ed)wd[Ed]>k1&&(k1=wd[Ed]);w5+=k1}}if(Rs.nd=nm,Rs.Qb=0,nm&&(Rs.qb=(Sc[3][Nc[3]+0].value<<24|Sc[1][Nc[1]+0].value<<16|Sc[2][Nc[2]+0].value)>>>0,_5==0&&256>Sc[0][Nc[0]+0].value&&(Rs.Qb=1,Rs.qb+=Sc[0][Nc[0]+0].value<<8)),Rs.jc=!Rs.Qb&&6>w5,Rs.jc){var lm,Go=Rs;for(lm=0;lm<_r;++lm){var Ua=lm,Ba=Go.pd[Ua],um=Go.G[0][Go.H[0]+Ua];256<=um.value?(Ba.g=um.g+256,Ba.value=um.value):(Ba.g=0,Ba.value=0,Ua>>=pn(um,8,Ba),Ua>>=pn(Go.G[1][Go.H[1]+Ua],16,Ba),Ua>>=pn(Go.G[2][Go.H[2]+Ua],0,Ba),pn(Go.G[3][Go.H[3]+Ua],24,Ba))}}}ur.vc=wr,ur.Wb=Qr,ur.Ya=em,ur.yc=T1,sn=1;break t}sn=0}if(!(V=sn)){b.a=3;break e}if(0<fe){if(H.ua=1<<fe,!lt(H.Wa,fe)){b.a=1,V=0;break e}}else H.ua=0;var R1=b,k5=j,z3=q,L1=R1.s,D1=L1.xc;if(R1.c=k5,R1.i=z3,L1.md=tt(k5,D1),L1.wc=D1==0?-1:(1<<D1)-1,y){b.xb=w3;break e}if((ne=s(j*q))==null){b.a=1,V=0;break e}V=(V=ai(b,ne,0,j,q,q,null))&&!z.h;break e}return V?(O!=null?O[0]=ne:(e(ne==null),e(y)),b.$=0,y||li(H)):li(H),V}function Ks(u,f){var y=u.c*u.i,b=y+f+16*f;return e(u.c<=f),u.V=s(b),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+y+f,1)}function Po(u,f){var y=u.C,b=f-y,O=u.V,V=u.Ba+u.c*y;for(e(f<=u.l.o);0<b;){var j=16<b?16:b,q=u.l.ma,z=u.l.width,H=z*j,ne=q.ca,fe=q.tb+z*y,pe=u.Ta,ae=u.Ua;$r(u,j,O,V),qn(pe,ae,ne,fe,H),Ci(q,y,y+j,ne,fe,z),b-=j,O+=j*u.c,y+=j}e(y==f),u.C=u.Ma=f}function Qs(){this.ub=this.yd=this.td=this.Rb=0}function Js(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Co(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Bl(){this.Yb=function(){var u=[];return function f(y,b,O){for(var V=O[b],j=0;j<V&&(y.push(O.length>b+1?[]:0),!(O.length<b+1));j++)f(y[j],b+1,O)}(u,0,[3,11]),u}()}function ad(){this.jb=s(3),this.Wc=a([4,8],Bl),this.Xc=a([4,17],Bl)}function ga(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ko(){this.ld=this.La=this.dd=this.tc=0}function va(){this.Na=this.la=0}function Ro(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ki(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ql(){this.uc=this.M=this.Nb=0,this.wa=Array(new ko),this.Y=0,this.ya=Array(new ki),this.aa=0,this.l=new Lo}function sc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function oc(){this.cb=this.a=0,this.sc="",this.m=new Ne,this.Od=new Qs,this.Kc=new Js,this.ed=new ga,this.Qa=new Co,this.Ic=this.$c=this.Aa=0,this.D=new ql,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ne),this.ia=0,this.pb=o(4,Ro),this.Pa=new ad,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new sc),this.Hd=0,this.rb=Array(new va),this.sb=0,this.wa=Array(new ko),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ki),this.L=this.aa=0,this.gd=a([4,2],ko),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Lo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ac(){var u=new oc;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,yd||(yd=$l)),u}function mn(u,f,y){return u.a==0&&(u.a=f,u.sc=y,u.cb=0),0}function ya(u,f,y){return 3<=y&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function zl(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return mn(u,2,"null VP8Io passed to VP8GetHeaders()");var y=f.data,b=f.w,O=f.ha;if(4>O)return mn(u,7,"Truncated header.");var V=y[b+0]|y[b+1]<<8|y[b+2]<<16,j=u.Od;if(j.Rb=!(1&V),j.td=V>>1&7,j.yd=V>>4&1,j.ub=V>>5,3<j.td)return mn(u,3,"Incorrect keyframe parameters.");if(!j.yd)return mn(u,4,"Frame not displayable.");b+=3,O-=3;var q=u.Kc;if(j.Rb){if(7>O)return mn(u,7,"cannot parse picture header");if(!ya(y,b,O))return mn(u,3,"Bad code word");q.c=16383&(y[b+4]<<8|y[b+3]),q.Td=y[b+4]>>6,q.i=16383&(y[b+6]<<8|y[b+5]),q.Ud=y[b+6]>>6,b+=7,O-=7,u.za=q.c+15>>4,u.Ub=q.i+15>>4,f.width=q.c,f.height=q.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((V=u.Pa).jb,0,255,V.jb.length),e((V=u.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(j.ub>O)return mn(u,7,"bad partition length");ge(V=u.m,y,b,j.ub),b+=j.ub,O-=j.ub,j.Rb&&(q.Ld=ye(V),q.Kd=ye(V)),q=u.Qa;var z,H=u.Pa;if(e(V!=null),e(q!=null),q.Cb=ye(V),q.Cb){if(q.Bb=ye(V),ye(V)){for(q.Fb=ye(V),z=0;4>z;++z)q.Zb[z]=ye(V)?be(V,7):0;for(z=0;4>z;++z)q.Lb[z]=ye(V)?be(V,6):0}if(q.Bb)for(z=0;3>z;++z)H.jb[z]=ye(V)?ve(V,8):255}else q.Bb=0;if(V.Ka)return mn(u,3,"cannot parse segment header");if((q=u.ed).zd=ye(V),q.Tb=ve(V,6),q.wb=ve(V,3),q.Pc=ye(V),q.Pc&&ye(V)){for(H=0;4>H;++H)ye(V)&&(q.vd[H]=be(V,6));for(H=0;4>H;++H)ye(V)&&(q.od[H]=be(V,6))}if(u.L=q.Tb==0?0:q.zd?1:2,V.Ka)return mn(u,3,"cannot parse filter header");var ne=O;if(O=z=b,b=z+ne,q=ne,u.Xb=(1<<ve(u.m,2))-1,ne<3*(H=u.Xb))y=7;else{for(z+=3*H,q-=3*H,ne=0;ne<H;++ne){var fe=y[O+0]|y[O+1]<<8|y[O+2]<<16;fe>q&&(fe=q),ge(u.Jc[+ne],y,z,fe),z+=fe,q-=fe,O+=3}ge(u.Jc[+H],y,z,q),y=z<b?0:5}if(y!=0)return mn(u,y,"cannot parse partitions");for(y=ve(z=u.m,7),O=ye(z)?be(z,4):0,b=ye(z)?be(z,4):0,q=ye(z)?be(z,4):0,H=ye(z)?be(z,4):0,z=ye(z)?be(z,4):0,ne=u.Qa,fe=0;4>fe;++fe){if(ne.Cb){var pe=ne.Zb[fe];ne.Fb||(pe+=y)}else{if(0<fe){u.pb[fe]=u.pb[0];continue}pe=y}var ae=u.pb[fe];ae.Sc[0]=E1[wt(pe+O,127)],ae.Sc[1]=A1[wt(pe+0,127)],ae.Eb[0]=2*E1[wt(pe+b,127)],ae.Eb[1]=101581*A1[wt(pe+q,127)]>>16,8>ae.Eb[1]&&(ae.Eb[1]=8),ae.Qc[0]=E1[wt(pe+H,117)],ae.Qc[1]=A1[wt(pe+z,127)],ae.lc=pe+z}if(!j.Rb)return mn(u,4,"Not a key frame.");for(ye(V),j=u.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(b=0;3>b;++b)for(q=0;11>q;++q)H=_e(V,y3[y][O][b][q])?ve(V,8):g3[y][O][b][q],j.Wc[y][O].Yb[b][q]=H;for(O=0;17>O;++O)j.Xc[y][O]=j.Wc[y][_3[O]]}return u.kc=ye(V),u.kc&&(u.Bd=ve(V,8)),u.cb=1}function $l(u,f,y,b,O,V,j){var q=f[O].Yb[y];for(y=0;16>O;++O){if(!_e(u,q[y+0]))return O;for(;!_e(u,q[y+1]);)if(q=f[++O].Yb[0],y=0,O==16)return 16;var z=f[O+1].Yb;if(_e(u,q[y+2])){var H=u,ne=0;if(_e(H,(pe=q)[(fe=y)+3]))if(_e(H,pe[fe+6])){for(q=0,fe=2*(ne=_e(H,pe[fe+8]))+(pe=_e(H,pe[fe+9+ne])),ne=0,pe=p3[fe];pe[q];++q)ne+=ne+_e(H,pe[q]);ne+=3+(8<<fe)}else _e(H,pe[fe+7])?(ne=7+2*_e(H,165),ne+=_e(H,145)):ne=5+_e(H,159);else ne=_e(H,pe[fe+4])?3+_e(H,pe[fe+5]):2;q=z[2]}else ne=1,q=z[1];z=j+m3[O],0>(H=u).b&&he(H);var fe,pe=H.b,ae=(fe=H.Ca>>1)-(H.I>>pe)>>31;--H.b,H.Ca+=ae,H.Ca|=1,H.I-=(fe+1&ae)<<pe,V[z]=((ne^ae)-ae)*b[(0<O)+0]}return 16}function Gl(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function ld(u,f){if(u==null)return 0;if(f==null)return mn(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!zl(u,f))return 0;if(e(u.cb),f.ac==null||f.ac(f)){f.ob&&(u.L=0);var y=Zp[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=f.v-y>>4,u.zb=f.j-y>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=f.o+15+y>>4,u.Hb=f.va+15+y>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var b=u.ed;for(y=0;4>y;++y){var O;if(u.Qa.Cb){var V=u.Qa.Lb[y];u.Qa.Fb||(V+=b.Tb)}else V=b.Tb;for(O=0;1>=O;++O){var j=u.gd[y][O],q=V;if(b.Pc&&(q+=b.vd[0],O&&(q+=b.od[0])),0<(q=0>q?0:63<q?63:q)){var z=q;0<b.wb&&(z=4<b.wb?z>>2:z>>1)>9-b.wb&&(z=9-b.wb),1>z&&(z=1),j.dd=z,j.tc=2*q+z,j.ld=40<=q?2:15<=q?1:0}else j.tc=0;j.La=O}}}y=0}else mn(u,6,"Frame setup failed"),y=u.a;if(y=y==0){if(y){u.$c=0,0<u.Aa||(u.Ic=R3);e:{y=u.Ic,b=4*(z=u.za);var H=32*z,ne=z+1,fe=0<u.L?z*(0<u.Aa?2:1):0,pe=(u.Aa==2?2:1)*z;if((j=b+832+(O=3*(16*y+Zp[u.L])/2*H)+(V=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=j)y=0;else{if(j>u.Vb){if(u.Vb=0,u.Ec=s(j),u.Fc=0,u.Ec==null){y=mn(u,1,"no memory during frame initialization.");break e}u.Vb=j}j=u.Ec,q=u.Fc,u.Ac=j,u.Bc=q,q+=b,u.Gd=o(H,sc),u.Hd=0,u.rb=o(ne+1,va),u.sb=1,u.wa=fe?o(fe,ko):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=z),e(!0),u.oc=j,u.pc=q,q+=832,u.ya=o(pe,ki),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=z),u.R=16*z,u.B=8*z,z=(H=Zp[u.L])*u.R,H=H/2*u.B,u.sa=j,u.ta=q+z,u.qa=u.sa,u.ra=u.ta+16*y*u.R+H,u.Ha=u.qa,u.Ia=u.ra+8*y*u.B+H,u.$c=0,q+=O,u.mb=V?j:null,u.nb=V?q:null,e(q+V<=u.Fc+u.Vb),Gl(u),i(u.Ac,u.Bc,0,b),y=1}}if(y){if(f.ka=0,f.y=u.sa,f.O=u.ta,f.f=u.qa,f.N=u.ra,f.ea=u.Ha,f.Vd=u.Ia,f.fa=u.R,f.Rc=u.B,f.F=null,f.J=0,!$p){for(y=-255;255>=y;++y)rr[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)qo[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)vd[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)xc[255+y]=0>y?0:255<y?255:y;$p=1}Ic=wa,Bo=_a,pd=Oo,Kr=lc,ss=Gt,Bn=ci,Ec=Ss,zp=Xs,md=gc,nu=Zs,ru=Yl,La=Ns,iu=Xl,Ac=Zl,su=Jl,Da=Wr,gd=es,os=Di,ks[0]=Zi,ks[1]=Fo,ks[2]=hc,ks[3]=Ys,ks[4]=dc,ks[5]=Gr,ks[6]=fc,ks[7]=Hl,ks[8]=Ea,ks[9]=cd,Oa[0]=cc,Oa[1]=uc,Oa[2]=As,Oa[3]=ba,Oa[4]=kn,Oa[5]=Xi,Oa[6]=Wl,zo[0]=hi,zo[1]=ud,zo[2]=Aa,zo[3]=xa,zo[4]=xs,zo[5]=pc,zo[6]=Zt,y=1}else y=0}y&&(y=function(ae,Se){for(ae.M=0;ae.M<ae.Va;++ae.M){var Ee,re=ae.Jc[ae.M&ae.Xb],oe=ae.m,xe=ae;for(Ee=0;Ee<xe.za;++Ee){var Pe=oe,Te=xe,Je=Te.Ac,Be=Te.Bc+4*Ee,ht=Te.zc,He=Te.ya[Te.aa+Ee];if(Te.Qa.Bb?He.$b=_e(Pe,Te.Pa.jb[0])?2+_e(Pe,Te.Pa.jb[2]):_e(Pe,Te.Pa.jb[1]):He.$b=0,Te.kc&&(He.Ad=_e(Pe,Te.Bd)),He.Za=!_e(Pe,145)+0,He.Za){var qt=He.Ob,Ht=0;for(Te=0;4>Te;++Te){var Mt,Rt=ht[0+Te];for(Mt=0;4>Mt;++Mt){Rt=v3[Je[Be+Mt]][Rt];for(var sn=a5[_e(Pe,Rt[0])];0<sn;)sn=a5[2*sn+_e(Pe,Rt[sn])];Rt=-sn,Je[Be+Mt]=Rt}r(qt,Ht,Je,Be,4),Ht+=4,ht[0+Te]=Rt}}else Rt=_e(Pe,156)?_e(Pe,128)?1:3:_e(Pe,163)?2:0,He.Ob[0]=Rt,i(Je,Be,Rt,4),i(ht,0,Rt,4);He.Dd=_e(Pe,142)?_e(Pe,114)?_e(Pe,183)?1:3:2:0}if(xe.m.Ka)return mn(ae,7,"Premature end-of-partition0 encountered.");for(;ae.ja<ae.za;++ae.ja){if(xe=re,Pe=(oe=ae).rb[oe.sb-1],Je=oe.rb[oe.sb+oe.ja],Ee=oe.ya[oe.aa+oe.ja],Be=oe.kc?Ee.Ad:0)Pe.la=Je.la=0,Ee.Za||(Pe.Na=Je.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var en,Tt;if(Pe=Je,Je=xe,Be=oe.Pa.Xc,ht=oe.ya[oe.aa+oe.ja],He=oe.pb[ht.$b],Te=ht.ad,qt=0,Ht=oe.rb[oe.sb-1],Rt=Mt=0,i(Te,qt,0,384),ht.Za)var Yn=0,pi=Be[3];else{sn=s(16);var Xn=Pe.Na+Ht.Na;if(Xn=yd(Je,Be[1],Xn,He.Eb,0,sn,0),Pe.Na=Ht.Na=(0<Xn)+0,1<Xn)Ic(sn,0,Te,qt);else{var mi=sn[0]+3>>3;for(sn=0;256>sn;sn+=16)Te[qt+sn]=mi}Yn=1,pi=Be[0]}var Kt=15&Pe.la,Vi=15&Ht.la;for(sn=0;4>sn;++sn){var ji=1&Vi;for(mi=Tt=0;4>mi;++mi)Kt=Kt>>1|(ji=(Xn=yd(Je,pi,Xn=ji+(1&Kt),He.Sc,Yn,Te,qt))>Yn)<<7,Tt=Tt<<2|(3<Xn?3:1<Xn?2:Te[qt+0]!=0),qt+=16;Kt>>=4,Vi=Vi>>1|ji<<7,Mt=(Mt<<8|Tt)>>>0}for(pi=Kt,Yn=Vi>>4,en=0;4>en;en+=2){for(Tt=0,Kt=Pe.la>>4+en,Vi=Ht.la>>4+en,sn=0;2>sn;++sn){for(ji=1&Vi,mi=0;2>mi;++mi)Xn=ji+(1&Kt),Kt=Kt>>1|(ji=0<(Xn=yd(Je,Be[2],Xn,He.Qc,0,Te,qt)))<<3,Tt=Tt<<2|(3<Xn?3:1<Xn?2:Te[qt+0]!=0),qt+=16;Kt>>=2,Vi=Vi>>1|ji<<5}Rt|=Tt<<4*en,pi|=Kt<<4<<en,Yn|=(240&Vi)<<en}Pe.la=pi,Ht.la=Yn,ht.Hc=Mt,ht.Gc=Rt,ht.ia=43690&Rt?0:He.ia,Be=!(Mt|Rt)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[Ee.$b][Ee.Za],oe.wa[oe.Y+oe.ja].La|=!Be),xe.Ka)return mn(ae,7,"Premature end-of-file encountered.")}if(Gl(ae),oe=Se,xe=1,Ee=(re=ae).D,Pe=0<re.L&&re.M>=re.zb&&re.M<=re.Va,re.Aa==0)e:{if(Ee.M=re.M,Ee.uc=Pe,yr(re,Ee),xe=1,Ee=(Tt=re.D).Nb,Pe=(Rt=Zp[re.L])*re.R,Je=Rt/2*re.B,sn=16*Ee*re.R,mi=8*Ee*re.B,Be=re.sa,ht=re.ta-Pe+sn,He=re.qa,Te=re.ra-Je+mi,qt=re.Ha,Ht=re.Ia-Je+mi,Vi=(Kt=Tt.M)==0,Mt=Kt>=re.Va-1,re.Aa==2&&yr(re,Tt),Tt.uc)for(ji=(Xn=re).D.M,e(Xn.D.uc),Tt=Xn.yb;Tt<Xn.Hb;++Tt){Yn=Tt,pi=ji;var ur=(wr=(Rn=Xn).D).Nb;en=Rn.R;var wr=wr.wa[wr.Y+Yn],Qr=Rn.sa,cs=Rn.ta+16*ur*en+16*Yn,eo=wr.dd,cr=wr.tc;if(cr!=0)if(e(3<=cr),Rn.L==1)0<Yn&&Da(Qr,cs,en,cr+4),wr.La&&os(Qr,cs,en,cr),0<pi&&su(Qr,cs,en,cr+4),wr.La&&gd(Qr,cs,en,cr);else{var $o=Rn.B,ou=Rn.qa,Tc=Rn.ra+8*ur*$o+8*Yn,Ma=Rn.Ha,Rn=Rn.Ia+8*ur*$o+8*Yn;ur=wr.ld,0<Yn&&(zp(Qr,cs,en,cr+4,eo,ur),nu(ou,Tc,Ma,Rn,$o,cr+4,eo,ur)),wr.La&&(La(Qr,cs,en,cr,eo,ur),Ac(ou,Tc,Ma,Rn,$o,cr,eo,ur)),0<pi&&(Ec(Qr,cs,en,cr+4,eo,ur),md(ou,Tc,Ma,Rn,$o,cr+4,eo,ur)),wr.La&&(ru(Qr,cs,en,cr,eo,ur),iu(ou,Tc,Ma,Rn,$o,cr,eo,ur))}}if(re.ia&&alert("todo:DitherRow"),oe.put!=null){if(Tt=16*Kt,Kt=16*(Kt+1),Vi?(oe.y=re.sa,oe.O=re.ta+sn,oe.f=re.qa,oe.N=re.ra+mi,oe.ea=re.Ha,oe.W=re.Ia+mi):(Tt-=Rt,oe.y=Be,oe.O=ht,oe.f=He,oe.N=Te,oe.ea=qt,oe.W=Ht),Mt||(Kt-=Rt),Kt>oe.o&&(Kt=oe.o),oe.F=null,oe.J=null,re.Fa!=null&&0<re.Fa.length&&Tt<Kt&&(oe.J=Fi(re,oe,Tt,Kt-Tt),oe.F=re.mb,oe.F==null&&oe.F.length==0)){xe=mn(re,3,"Could not decode alpha data.");break e}Tt<oe.j&&(Rt=oe.j-Tt,Tt=oe.j,e(!(1&Rt)),oe.O+=re.R*Rt,oe.N+=re.B*(Rt>>1),oe.W+=re.B*(Rt>>1),oe.F!=null&&(oe.J+=oe.width*Rt)),Tt<Kt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=Tt-oe.j,oe.U=oe.va-oe.v,oe.T=Kt-Tt,xe=oe.put(oe))}Ee+1!=re.Ic||Mt||(r(re.sa,re.ta-Pe,Be,ht+16*re.R,Pe),r(re.qa,re.ra-Je,He,Te+8*re.B,Je),r(re.Ha,re.Ia-Je,qt,Ht+8*re.B,Je))}if(!xe)return mn(ae,6,"Output aborted.")}return 1}(u,f)),f.bc!=null&&f.bc(f),y&=1}return y?(u.cb=0,y):0}function ui(u,f,y,b,O){O=u[f+y+32*b]+(O>>3),u[f+y+32*b]=-256&O?0>O?0:255:O}function Do(u,f,y,b,O,V){ui(u,f,0,y,b+O),ui(u,f,1,y,b+V),ui(u,f,2,y,b-V),ui(u,f,3,y,b-O)}function kr(u){return(20091*u>>16)+u}function Ri(u,f,y,b){var O,V=0,j=s(16);for(O=0;4>O;++O){var q=u[f+0]+u[f+8],z=u[f+0]-u[f+8],H=(35468*u[f+4]>>16)-kr(u[f+12]),ne=kr(u[f+4])+(35468*u[f+12]>>16);j[V+0]=q+ne,j[V+1]=z+H,j[V+2]=z-H,j[V+3]=q-ne,V+=4,f++}for(O=V=0;4>O;++O)q=(u=j[V+0]+4)+j[V+8],z=u-j[V+8],H=(35468*j[V+4]>>16)-kr(j[V+12]),ui(y,b,0,0,q+(ne=kr(j[V+4])+(35468*j[V+12]>>16))),ui(y,b,1,0,z+H),ui(y,b,2,0,z-H),ui(y,b,3,0,q-ne),V++,b+=32}function ci(u,f,y,b){var O=u[f+0]+4,V=35468*u[f+4]>>16,j=kr(u[f+4]),q=35468*u[f+1]>>16;Do(y,b,0,O+j,u=kr(u[f+1]),q),Do(y,b,1,O+V,u,q),Do(y,b,2,O-V,u,q),Do(y,b,3,O-j,u,q)}function _a(u,f,y,b,O){Ri(u,f,y,b),O&&Ri(u,f+16,y,b+4)}function Oo(u,f,y,b){Bo(u,f+0,y,b,1),Bo(u,f+32,y,b+128,1)}function lc(u,f,y,b){var O;for(u=u[f+0]+4,O=0;4>O;++O)for(f=0;4>f;++f)ui(y,b,f,O,u)}function Gt(u,f,y,b){u[f+0]&&Kr(u,f+0,y,b),u[f+16]&&Kr(u,f+16,y,b+4),u[f+32]&&Kr(u,f+32,y,b+128),u[f+48]&&Kr(u,f+48,y,b+128+4)}function wa(u,f,y,b){var O,V=s(16);for(O=0;4>O;++O){var j=u[f+0+O]+u[f+12+O],q=u[f+4+O]+u[f+8+O],z=u[f+4+O]-u[f+8+O],H=u[f+0+O]-u[f+12+O];V[0+O]=j+q,V[8+O]=j-q,V[4+O]=H+z,V[12+O]=H-z}for(O=0;4>O;++O)j=(u=V[0+4*O]+3)+V[3+4*O],q=V[1+4*O]+V[2+4*O],z=V[1+4*O]-V[2+4*O],H=u-V[3+4*O],y[b+0]=j+q>>3,y[b+16]=H+z>>3,y[b+32]=j-q>>3,y[b+48]=H-z>>3,b+=64}function Es(u,f,y){var b,O=f-32,V=Mi,j=255-u[O-1];for(b=0;b<y;++b){var q,z=V,H=j+u[f-1];for(q=0;q<y;++q)u[f+q]=z[H+u[O+q]];f+=32}}function Fo(u,f){Es(u,f,4)}function ud(u,f){Es(u,f,8)}function uc(u,f){Es(u,f,16)}function As(u,f){var y;for(y=0;16>y;++y)r(u,f+32*y,u,f-32,16)}function ba(u,f){var y;for(y=16;0<y;--y)i(u,f,u[f-1],16),f+=32}function Ia(u,f,y){var b;for(b=0;16>b;++b)i(f,y+32*b,u,16)}function cc(u,f){var y,b=16;for(y=0;16>y;++y)b+=u[f-1+32*y]+u[f+y-32];Ia(b>>5,u,f)}function kn(u,f){var y,b=8;for(y=0;16>y;++y)b+=u[f-1+32*y];Ia(b>>4,u,f)}function Xi(u,f){var y,b=8;for(y=0;16>y;++y)b+=u[f+y-32];Ia(b>>4,u,f)}function Wl(u,f){Ia(128,u,f)}function vt(u,f,y){return u+2*f+y+2>>2}function hc(u,f){var y,b=f-32;for(b=new Uint8Array([vt(u[b-1],u[b+0],u[b+1]),vt(u[b+0],u[b+1],u[b+2]),vt(u[b+1],u[b+2],u[b+3]),vt(u[b+2],u[b+3],u[b+4])]),y=0;4>y;++y)r(u,f+32*y,b,0,b.length)}function Ys(u,f){var y=u[f-1],b=u[f-1+32],O=u[f-1+64],V=u[f-1+96];Me(u,f+0,16843009*vt(u[f-1-32],y,b)),Me(u,f+32,16843009*vt(y,b,O)),Me(u,f+64,16843009*vt(b,O,V)),Me(u,f+96,16843009*vt(O,V,V))}function Zi(u,f){var y,b=4;for(y=0;4>y;++y)b+=u[f+y-32]+u[f-1+32*y];for(b>>=3,y=0;4>y;++y)i(u,f+32*y,b,4)}function dc(u,f){var y=u[f-1+0],b=u[f-1+32],O=u[f-1+64],V=u[f-1-32],j=u[f+0-32],q=u[f+1-32],z=u[f+2-32],H=u[f+3-32];u[f+0+96]=vt(b,O,u[f-1+96]),u[f+1+96]=u[f+0+64]=vt(y,b,O),u[f+2+96]=u[f+1+64]=u[f+0+32]=vt(V,y,b),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=vt(j,V,y),u[f+3+64]=u[f+2+32]=u[f+1+0]=vt(q,j,V),u[f+3+32]=u[f+2+0]=vt(z,q,j),u[f+3+0]=vt(H,z,q)}function fc(u,f){var y=u[f+1-32],b=u[f+2-32],O=u[f+3-32],V=u[f+4-32],j=u[f+5-32],q=u[f+6-32],z=u[f+7-32];u[f+0+0]=vt(u[f+0-32],y,b),u[f+1+0]=u[f+0+32]=vt(y,b,O),u[f+2+0]=u[f+1+32]=u[f+0+64]=vt(b,O,V),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=vt(O,V,j),u[f+3+32]=u[f+2+64]=u[f+1+96]=vt(V,j,q),u[f+3+64]=u[f+2+96]=vt(j,q,z),u[f+3+96]=vt(q,z,z)}function Gr(u,f){var y=u[f-1+0],b=u[f-1+32],O=u[f-1+64],V=u[f-1-32],j=u[f+0-32],q=u[f+1-32],z=u[f+2-32],H=u[f+3-32];u[f+0+0]=u[f+1+64]=V+j+1>>1,u[f+1+0]=u[f+2+64]=j+q+1>>1,u[f+2+0]=u[f+3+64]=q+z+1>>1,u[f+3+0]=z+H+1>>1,u[f+0+96]=vt(O,b,y),u[f+0+64]=vt(b,y,V),u[f+0+32]=u[f+1+96]=vt(y,V,j),u[f+1+32]=u[f+2+96]=vt(V,j,q),u[f+2+32]=u[f+3+96]=vt(j,q,z),u[f+3+32]=vt(q,z,H)}function Hl(u,f){var y=u[f+0-32],b=u[f+1-32],O=u[f+2-32],V=u[f+3-32],j=u[f+4-32],q=u[f+5-32],z=u[f+6-32],H=u[f+7-32];u[f+0+0]=y+b+1>>1,u[f+1+0]=u[f+0+64]=b+O+1>>1,u[f+2+0]=u[f+1+64]=O+V+1>>1,u[f+3+0]=u[f+2+64]=V+j+1>>1,u[f+0+32]=vt(y,b,O),u[f+1+32]=u[f+0+96]=vt(b,O,V),u[f+2+32]=u[f+1+96]=vt(O,V,j),u[f+3+32]=u[f+2+96]=vt(V,j,q),u[f+3+64]=vt(j,q,z),u[f+3+96]=vt(q,z,H)}function cd(u,f){var y=u[f-1+0],b=u[f-1+32],O=u[f-1+64],V=u[f-1+96];u[f+0+0]=y+b+1>>1,u[f+2+0]=u[f+0+32]=b+O+1>>1,u[f+2+32]=u[f+0+64]=O+V+1>>1,u[f+1+0]=vt(y,b,O),u[f+3+0]=u[f+1+32]=vt(b,O,V),u[f+3+32]=u[f+1+64]=vt(O,V,V),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=V}function Ea(u,f){var y=u[f-1+0],b=u[f-1+32],O=u[f-1+64],V=u[f-1+96],j=u[f-1-32],q=u[f+0-32],z=u[f+1-32],H=u[f+2-32];u[f+0+0]=u[f+2+32]=y+j+1>>1,u[f+0+32]=u[f+2+64]=b+y+1>>1,u[f+0+64]=u[f+2+96]=O+b+1>>1,u[f+0+96]=V+O+1>>1,u[f+3+0]=vt(q,z,H),u[f+2+0]=vt(j,q,z),u[f+1+0]=u[f+3+32]=vt(y,j,q),u[f+1+32]=u[f+3+64]=vt(b,y,j),u[f+1+64]=u[f+3+96]=vt(O,b,y),u[f+1+96]=vt(V,O,b)}function Aa(u,f){var y;for(y=0;8>y;++y)r(u,f+32*y,u,f-32,8)}function xa(u,f){var y;for(y=0;8>y;++y)i(u,f,u[f-1],8),f+=32}function Li(u,f,y){var b;for(b=0;8>b;++b)i(f,y+32*b,u,8)}function hi(u,f){var y,b=8;for(y=0;8>y;++y)b+=u[f+y-32]+u[f-1+32*y];Li(b>>4,u,f)}function pc(u,f){var y,b=4;for(y=0;8>y;++y)b+=u[f+y-32];Li(b>>3,u,f)}function xs(u,f){var y,b=4;for(y=0;8>y;++y)b+=u[f-1+32*y];Li(b>>3,u,f)}function Zt(u,f){Li(128,u,f)}function Ta(u,f,y){var b=u[f-y],O=u[f+0],V=3*(O-b)+y1[1020+u[f-2*y]-u[f+y]],j=Gp[112+(V+4>>3)];u[f-y]=Mi[255+b+Gp[112+(V+3>>3)]],u[f+0]=Mi[255+O-j]}function mc(u,f,y,b){var O=u[f+0],V=u[f+y];return ls[255+u[f-2*y]-u[f-y]]>b||ls[255+V-O]>b}function Kl(u,f,y,b){return 4*ls[255+u[f-y]-u[f+0]]+ls[255+u[f-2*y]-u[f+y]]<=b}function Ql(u,f,y,b,O){var V=u[f-3*y],j=u[f-2*y],q=u[f-y],z=u[f+0],H=u[f+y],ne=u[f+2*y],fe=u[f+3*y];return 4*ls[255+q-z]+ls[255+j-H]>b?0:ls[255+u[f-4*y]-V]<=O&&ls[255+V-j]<=O&&ls[255+j-q]<=O&&ls[255+fe-ne]<=O&&ls[255+ne-H]<=O&&ls[255+H-z]<=O}function Jl(u,f,y,b){var O=2*b+1;for(b=0;16>b;++b)Kl(u,f+b,y,O)&&Ta(u,f+b,y)}function Wr(u,f,y,b){var O=2*b+1;for(b=0;16>b;++b)Kl(u,f+b*y,1,O)&&Ta(u,f+b*y,1)}function es(u,f,y,b){var O;for(O=3;0<O;--O)Jl(u,f+=4*y,y,b)}function Di(u,f,y,b){var O;for(O=3;0<O;--O)Wr(u,f+=4,y,b)}function Ts(u,f,y,b,O,V,j,q){for(V=2*V+1;0<O--;){if(Ql(u,f,y,V,j))if(mc(u,f,y,q))Ta(u,f,y);else{var z=u,H=f,ne=y,fe=z[H-2*ne],pe=z[H-ne],ae=z[H+0],Se=z[H+ne],Ee=z[H+2*ne],re=27*(xe=y1[1020+3*(ae-pe)+y1[1020+fe-Se]])+63>>7,oe=18*xe+63>>7,xe=9*xe+63>>7;z[H-3*ne]=Mi[255+z[H-3*ne]+xe],z[H-2*ne]=Mi[255+fe+oe],z[H-ne]=Mi[255+pe+re],z[H+0]=Mi[255+ae-re],z[H+ne]=Mi[255+Se-oe],z[H+2*ne]=Mi[255+Ee-xe]}f+=b}}function Oi(u,f,y,b,O,V,j,q){for(V=2*V+1;0<O--;){if(Ql(u,f,y,V,j))if(mc(u,f,y,q))Ta(u,f,y);else{var z=u,H=f,ne=y,fe=z[H-ne],pe=z[H+0],ae=z[H+ne],Se=Gp[112+((Ee=3*(pe-fe))+4>>3)],Ee=Gp[112+(Ee+3>>3)],re=Se+1>>1;z[H-2*ne]=Mi[255+z[H-2*ne]+re],z[H-ne]=Mi[255+fe+Ee],z[H+0]=Mi[255+pe-Se],z[H+ne]=Mi[255+ae-re]}f+=b}}function Ss(u,f,y,b,O,V){Ts(u,f,y,1,16,b,O,V)}function Xs(u,f,y,b,O,V){Ts(u,f,1,y,16,b,O,V)}function Yl(u,f,y,b,O,V){var j;for(j=3;0<j;--j)Oi(u,f+=4*y,y,1,16,b,O,V)}function Ns(u,f,y,b,O,V){var j;for(j=3;0<j;--j)Oi(u,f+=4,1,y,16,b,O,V)}function gc(u,f,y,b,O,V,j,q){Ts(u,f,O,1,8,V,j,q),Ts(y,b,O,1,8,V,j,q)}function Zs(u,f,y,b,O,V,j,q){Ts(u,f,1,O,8,V,j,q),Ts(y,b,1,O,8,V,j,q)}function Xl(u,f,y,b,O,V,j,q){Oi(u,f+4*O,O,1,8,V,j,q),Oi(y,b+4*O,O,1,8,V,j,q)}function Zl(u,f,y,b,O,V,j,q){Oi(u,f+4,1,O,8,V,j,q),Oi(y,b+4,1,O,8,V,j,q)}function ts(){this.ba=new oi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ln,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Sa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pa(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new S}function eu(){this.xb=this.a=0,this.l=new Lo,this.ca=new oi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pa,this.ab=0,this.gc=o(4,Na),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Lo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ns(u,f,y,b,O,V,j){for(u=u==null?0:u[f+0],f=0;f<j;++f)O[V+f]=u+y[b+f]&255,u=O[V+f]}function Ca(u,f,y,b,O,V,j){var q;if(u==null)ns(null,null,y,b,O,V,j);else for(q=0;q<j;++q)O[V+q]=u[f+q]+y[b+q]&255}function Ps(u,f,y,b,O,V,j){if(u==null)ns(null,null,y,b,O,V,j);else{var q,z=u[f+0],H=z,ne=z;for(q=0;q<j;++q)H=ne+(z=u[f+q])-H,ne=y[b+q]+(-256&H?0>H?0:255:H)&255,H=z,O[V+q]=ne}}function Fi(u,f,y,b){var O=f.width,V=f.o;if(e(u!=null&&f!=null),0>y||0>=b||y+b>V)return null;if(!u.Cc){if(u.ga==null){var j;if(u.ga=new Mo,(j=u.ga==null)||(j=f.width*f.o,e(u.Gb.length==0),u.Gb=s(j),u.Uc=0,u.Gb==null?j=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,j=1),j=!j),!j){j=u.ga;var q=u.Fa,z=u.P,H=u.qc,ne=u.mb,fe=u.nb,pe=z+1,ae=H-1,Se=j.l;if(e(q!=null&&ne!=null&&f!=null),Fa[0]=null,Fa[1]=ns,Fa[2]=Ca,Fa[3]=Ps,j.ca=ne,j.tb=fe,j.c=f.width,j.i=f.height,e(0<j.c&&0<j.i),1>=H)f=0;else if(j.$a=q[z+0]>>0&3,j.Z=q[z+0]>>2&3,j.Lc=q[z+0]>>4&3,z=q[z+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||z)f=0;else if(Se.put=Si,Se.ac=Pn,Se.bc=Pr,Se.ma=j,Se.width=f.width,Se.height=f.height,Se.Da=f.Da,Se.v=f.v,Se.va=f.va,Se.j=f.j,Se.o=f.o,j.$a)e:{e(j.$a==1),f=vr();t:for(;;){if(f==null){f=0;break e}if(e(j!=null),j.mc=f,f.c=j.c,f.i=j.i,f.l=j.l,f.l.ma=j,f.l.width=j.c,f.l.height=j.i,f.a=0,Z(f.m,q,pe,ae),!nr(j.c,j.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Is(f.s)?(j.ic=1,q=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(q),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(j.ic=0,f=Ks(f,j.c)),!f))break t;f=1;break e}j.mc=null,f=0}else f=ae>=j.c*j.i;j=!f}if(j)return null;u.ga.Lc!=1?u.Ga=0:b=V-y}e(u.ga!=null),e(y+b<=V);e:{if(f=(q=u.ga).c,V=q.l.o,q.$a==0){if(pe=u.rc,ae=u.Vc,Se=u.Fa,z=u.P+1+y*f,H=u.mb,ne=u.nb+y*f,e(z<=u.P+u.qc),q.Z!=0)for(e(Fa[q.Z]!=null),j=0;j<b;++j)Fa[q.Z](pe,ae,Se,z,H,ne,f),pe=H,ae=ne,ne+=f,z+=f;else for(j=0;j<b;++j)r(H,ne,Se,z,f),pe=H,ae=ne,ne+=f,z+=f;u.rc=pe,u.Vc=ae}else{if(e(q.mc!=null),f=y+b,e((j=q.mc)!=null),e(f<=j.i),j.C>=f)f=1;else if(q.ic||ue(),q.ic){q=j.V,pe=j.Ba,ae=j.c;var Ee=j.i,re=(Se=1,z=j.$/ae,H=j.$%ae,ne=j.m,fe=j.s,j.$),oe=ae*Ee,xe=ae*f,Pe=fe.wc,Te=re<xe?Cn(fe,H,z):null;e(re<=oe),e(f<=Ee),e(Is(fe));t:for(;;){for(;!ne.h&&re<xe;){if(H&Pe||(Te=Cn(fe,H,z)),e(Te!=null),se(ne),256>(Ee=Jn(Te.G[0],Te.H[0],ne)))q[pe+re]=Ee,++re,++H>=ae&&(H=0,++z<=f&&!(z%16)&&Cr(j,z));else{if(!(280>Ee)){Se=0;break t}Ee=nn(Ee-256,ne);var Je,Be=Jn(Te.G[4],Te.H[4],ne);if(se(ne),!(re>=(Be=Ni(ae,Be=nn(Be,ne)))&&oe-re>=Ee)){Se=0;break t}for(Je=0;Je<Ee;++Je)q[pe+re+Je]=q[pe+re+Je-Be];for(re+=Ee,H+=Ee;H>=ae;)H-=ae,++z<=f&&!(z%16)&&Cr(j,z);re<xe&&H&Pe&&(Te=Cn(fe,H,z))}e(ne.h==J(ne))}Cr(j,z>f?f:z);break t}!Se||ne.h&&re<oe?(Se=0,j.a=ne.h?5:3):j.$=re,f=Se}else f=ai(j,j.V,j.Ba,j.c,j.i,f,Po);if(!f){b=0;break e}}y+b>=V&&(u.Cc=1),b=1}if(!b)return null;if(u.Cc&&((b=u.ga)!=null&&(b.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+y*O}function m(u,f,y,b,O,V){for(;0<O--;){var j,q=u,z=f+(y?1:0),H=u,ne=f+(y?0:3);for(j=0;j<b;++j){var fe=H[ne+4*j];fe!=255&&(fe*=32897,q[z+4*j+0]=q[z+4*j+0]*fe>>23,q[z+4*j+1]=q[z+4*j+1]*fe>>23,q[z+4*j+2]=q[z+4*j+2]*fe>>23)}f+=V}}function D(u,f,y,b,O){for(;0<b--;){var V;for(V=0;V<y;++V){var j=u[f+2*V+0],q=15&(H=u[f+2*V+1]),z=4369*q,H=(240&H|H>>4)*z>>16;u[f+2*V+0]=(240&j|j>>4)*z>>16&240|(15&j|j<<4)*z>>16>>4&15,u[f+2*V+1]=240&H|q}f+=O}}function Q(u,f,y,b,O,V,j,q){var z,H,ne=255;for(H=0;H<O;++H){for(z=0;z<b;++z){var fe=u[f+z];V[j+4*z]=fe,ne&=fe}f+=y,j+=q}return ne!=255}function te(u,f,y,b,O){var V;for(V=0;V<O;++V)y[b+V]=u[f+V]>>8}function ue(){as=m,un=D,cn=Q,qn=te}function we(u,f,y){I[u]=function(b,O,V,j,q,z,H,ne,fe,pe,ae,Se,Ee,re,oe,xe,Pe){var Te,Je=Pe-1>>1,Be=q[z+0]|H[ne+0]<<16,ht=fe[pe+0]|ae[Se+0]<<16;e(b!=null);var He=3*Be+ht+131074>>2;for(f(b[O+0],255&He,He>>16,Ee,re),V!=null&&(He=3*ht+Be+131074>>2,f(V[j+0],255&He,He>>16,oe,xe)),Te=1;Te<=Je;++Te){var qt=q[z+Te]|H[ne+Te]<<16,Ht=fe[pe+Te]|ae[Se+Te]<<16,Mt=Be+qt+ht+Ht+524296,Rt=Mt+2*(qt+ht)>>3;He=Rt+Be>>1,Be=(Mt=Mt+2*(Be+Ht)>>3)+qt>>1,f(b[O+2*Te-1],255&He,He>>16,Ee,re+(2*Te-1)*y),f(b[O+2*Te-0],255&Be,Be>>16,Ee,re+(2*Te-0)*y),V!=null&&(He=Mt+ht>>1,Be=Rt+Ht>>1,f(V[j+2*Te-1],255&He,He>>16,oe,xe+(2*Te-1)*y),f(V[j+2*Te+0],255&Be,Be>>16,oe,xe+(2*Te+0)*y)),Be=qt,ht=Ht}1&Pe||(He=3*Be+ht+131074>>2,f(b[O+Pe-1],255&He,He>>16,Ee,re+(Pe-1)*y),V!=null&&(He=3*ht+Be+131074>>2,f(V[j+Pe-1],255&He,He>>16,oe,xe+(Pe-1)*y)))}}function Ce(){us[Wp]=b3,us[Hp]=u5,us[i5]=I3,us[Kp]=c5,us[Qp]=h5,us[_1]=d5,us[s5]=E3,us[w1]=u5,us[b1]=c5,us[Jp]=h5,us[I1]=d5}function Qe(u){return u&~A3?0>u?0:255:u>>f5}function nt(u,f){return Qe((19077*u>>8)+(26149*f>>8)-14234)}function h(u,f,y){return Qe((19077*u>>8)-(6419*f>>8)-(13320*y>>8)+8708)}function _(u,f){return Qe((19077*u>>8)+(33050*f>>8)-17685)}function A(u,f,y,b,O){b[O+0]=nt(u,y),b[O+1]=h(u,f,y),b[O+2]=_(u,f)}function B(u,f,y,b,O){b[O+0]=_(u,f),b[O+1]=h(u,f,y),b[O+2]=nt(u,y)}function ie(u,f,y,b,O){var V=h(u,f,y);f=V<<3&224|_(u,f)>>3,b[O+0]=248&nt(u,y)|V>>5,b[O+1]=f}function de(u,f,y,b,O){var V=240&_(u,f)|15;b[O+0]=240&nt(u,y)|h(u,f,y)>>4,b[O+1]=V}function Le(u,f,y,b,O){b[O+0]=255,A(u,f,y,b,O+1)}function _t(u,f,y,b,O){B(u,f,y,b,O),b[O+3]=255}function Wt(u,f,y,b,O){A(u,f,y,b,O),b[O+3]=255}function wt(u,f){return 0>u?0:u>f?f:u}function rn(u,f,y){I[u]=function(b,O,V,j,q,z,H,ne,fe){for(var pe=ne+(-2&fe)*y;ne!=pe;)f(b[O+0],V[j+0],q[z+0],H,ne),f(b[O+1],V[j+0],q[z+0],H,ne+y),O+=2,++j,++z,ne+=2*y;1&fe&&f(b[O+0],V[j+0],q[z+0],H,ne)}}function Un(u,f,y){return y==0?u==0?f==0?6:5:f==0?4:0:y}function rs(u,f,y,b,O){switch(u>>>30){case 3:Bo(f,y,b,O,0);break;case 2:Bn(f,y,b,O);break;case 1:Kr(f,y,b,O)}}function yr(u,f){var y,b,O=f.M,V=f.Nb,j=u.oc,q=u.pc+40,z=u.oc,H=u.pc+584,ne=u.oc,fe=u.pc+600;for(y=0;16>y;++y)j[q+32*y-1]=129;for(y=0;8>y;++y)z[H+32*y-1]=129,ne[fe+32*y-1]=129;for(0<O?j[q-1-32]=z[H-1-32]=ne[fe-1-32]=129:(i(j,q-32-1,127,21),i(z,H-32-1,127,9),i(ne,fe-32-1,127,9)),b=0;b<u.za;++b){var pe=f.ya[f.aa+b];if(0<b){for(y=-1;16>y;++y)r(j,q+32*y-4,j,q+32*y+12,4);for(y=-1;8>y;++y)r(z,H+32*y-4,z,H+32*y+4,4),r(ne,fe+32*y-4,ne,fe+32*y+4,4)}var ae=u.Gd,Se=u.Hd+b,Ee=pe.ad,re=pe.Hc;if(0<O&&(r(j,q-32,ae[Se].y,0,16),r(z,H-32,ae[Se].f,0,8),r(ne,fe-32,ae[Se].ea,0,8)),pe.Za){var oe=j,xe=q-32+16;for(0<O&&(b>=u.za-1?i(oe,xe,ae[Se].y[15],4):r(oe,xe,ae[Se+1].y,0,4)),y=0;4>y;y++)oe[xe+128+y]=oe[xe+256+y]=oe[xe+384+y]=oe[xe+0+y];for(y=0;16>y;++y,re<<=2)oe=j,xe=q+m5[y],ks[pe.Ob[y]](oe,xe),rs(re,Ee,16*+y,oe,xe)}else if(oe=Un(b,O,pe.Ob[0]),Oa[oe](j,q),re!=0)for(y=0;16>y;++y,re<<=2)rs(re,Ee,16*+y,j,q+m5[y]);for(y=pe.Gc,oe=Un(b,O,pe.Dd),zo[oe](z,H),zo[oe](ne,fe),re=Ee,oe=z,xe=H,255&(pe=y>>0)&&(170&pe?pd(re,256,oe,xe):ss(re,256,oe,xe)),pe=ne,re=fe,255&(y>>=8)&&(170&y?pd(Ee,320,pe,re):ss(Ee,320,pe,re)),O<u.Ub-1&&(r(ae[Se].y,0,j,q+480,16),r(ae[Se].f,0,z,H+224,8),r(ae[Se].ea,0,ne,fe+224,8)),y=8*V*u.B,ae=u.sa,Se=u.ta+16*b+16*V*u.R,Ee=u.qa,pe=u.ra+8*b+y,re=u.Ha,oe=u.Ia+8*b+y,y=0;16>y;++y)r(ae,Se+y*u.R,j,q+32*y,16);for(y=0;8>y;++y)r(Ee,pe+y*u.B,z,H+32*y,8),r(re,oe+y*u.B,ne,fe+32*y,8)}}function Cs(u,f,y,b,O,V,j,q,z){var H=[0],ne=[0],fe=0,pe=z!=null?z.kd:0,ae=z??new Sa;if(u==null||12>y)return 7;ae.data=u,ae.w=f,ae.ha=y,f=[f],y=[y],ae.gb=[ae.gb];e:{var Se=f,Ee=y,re=ae.gb;if(e(u!=null),e(Ee!=null),e(re!=null),re[0]=0,12<=Ee[0]&&!t(u,Se[0],"RIFF")){if(t(u,Se[0]+8,"WEBP")){re=3;break e}var oe=Ue(u,Se[0]+4);if(12>oe||4294967286<oe){re=3;break e}if(pe&&oe>Ee[0]-8){re=7;break e}re[0]=oe,Se[0]+=12,Ee[0]-=12}re=0}if(re!=0)return re;for(oe=0<ae.gb[0],y=y[0];;){e:{var xe=u;Ee=f,re=y;var Pe=H,Te=ne,Je=Se=[0];if((He=fe=[fe])[0]=0,8>re[0])re=7;else{if(!t(xe,Ee[0],"VP8X")){if(Ue(xe,Ee[0]+4)!=10){re=3;break e}if(18>re[0]){re=7;break e}var Be=Ue(xe,Ee[0]+8),ht=1+ze(xe,Ee[0]+12);if(2147483648<=ht*(xe=1+ze(xe,Ee[0]+15))){re=3;break e}Je!=null&&(Je[0]=Be),Pe!=null&&(Pe[0]=ht),Te!=null&&(Te[0]=xe),Ee[0]+=18,re[0]-=18,He[0]=1}re=0}}if(fe=fe[0],Se=Se[0],re!=0)return re;if(Ee=!!(2&Se),!oe&&fe)return 3;if(V!=null&&(V[0]=!!(16&Se)),j!=null&&(j[0]=Ee),q!=null&&(q[0]=0),j=H[0],Se=ne[0],fe&&Ee&&z==null){re=0;break}if(4>y){re=7;break}if(oe&&fe||!oe&&!fe&&!t(u,f[0],"ALPH")){y=[y],ae.na=[ae.na],ae.P=[ae.P],ae.Sa=[ae.Sa];e:{Be=u,re=f,oe=y;var He=ae.gb;Pe=ae.na,Te=ae.P,Je=ae.Sa,ht=22,e(Be!=null),e(oe!=null),xe=re[0];var qt=oe[0];for(e(Pe!=null),e(Je!=null),Pe[0]=null,Te[0]=null,Je[0]=0;;){if(re[0]=xe,oe[0]=qt,8>qt){re=7;break e}var Ht=Ue(Be,xe+4);if(4294967286<Ht){re=3;break e}var Mt=8+Ht+1&-2;if(ht+=Mt,0<He&&ht>He){re=3;break e}if(!t(Be,xe,"VP8 ")||!t(Be,xe,"VP8L")){re=0;break e}if(qt[0]<Mt){re=7;break e}t(Be,xe,"ALPH")||(Pe[0]=Be,Te[0]=xe+8,Je[0]=Ht),xe+=Mt,qt-=Mt}}if(y=y[0],ae.na=ae.na[0],ae.P=ae.P[0],ae.Sa=ae.Sa[0],re!=0)break}y=[y],ae.Ja=[ae.Ja],ae.xa=[ae.xa];e:if(He=u,re=f,oe=y,Pe=ae.gb[0],Te=ae.Ja,Je=ae.xa,Be=re[0],xe=!t(He,Be,"VP8 "),ht=!t(He,Be,"VP8L"),e(He!=null),e(oe!=null),e(Te!=null),e(Je!=null),8>oe[0])re=7;else{if(xe||ht){if(He=Ue(He,Be+4),12<=Pe&&He>Pe-12){re=3;break e}if(pe&&He>oe[0]-8){re=7;break e}Te[0]=He,re[0]+=8,oe[0]-=8,Je[0]=ht}else Je[0]=5<=oe[0]&&He[Be+0]==47&&!(He[Be+4]>>5),Te[0]=oe[0];re=0}if(y=y[0],ae.Ja=ae.Ja[0],ae.xa=ae.xa[0],f=f[0],re!=0)break;if(4294967286<ae.Ja)return 3;if(q==null||Ee||(q[0]=ae.xa?2:1),j=[j],Se=[Se],ae.xa){if(5>y){re=7;break}q=j,pe=Se,Ee=V,u==null||5>y?u=0:5<=y&&u[f+0]==47&&!(u[f+4]>>5)?(oe=[0],He=[0],Pe=[0],Z(Te=new M,u,f,y),ut(Te,oe,He,Pe)?(q!=null&&(q[0]=oe[0]),pe!=null&&(pe[0]=He[0]),Ee!=null&&(Ee[0]=Pe[0]),u=1):u=0):u=0}else{if(10>y){re=7;break}q=Se,u==null||10>y||!ya(u,f+3,y-3)?u=0:(pe=u[f+0]|u[f+1]<<8|u[f+2]<<16,Ee=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&pe||3<(pe>>1&7)||!(pe>>4&1)||pe>>5>=ae.Ja||!Ee||!u?u=0:(j&&(j[0]=Ee),q&&(q[0]=u),u=1))}if(!u||(j=j[0],Se=Se[0],fe&&(H[0]!=j||ne[0]!=Se)))return 3;z!=null&&(z[0]=ae,z.offset=f-z.w,e(4294967286>f-z.w),e(z.offset==z.ha-y));break}return re==0||re==7&&fe&&z==null?(V!=null&&(V[0]|=ae.na!=null&&0<ae.na.length),b!=null&&(b[0]=j),O!=null&&(O[0]=Se),0):re}function Vo(u,f,y){var b=f.width,O=f.height,V=0,j=0,q=b,z=O;if(f.Da=u!=null&&0<u.Da,f.Da&&(q=u.cd,z=u.bd,V=u.v,j=u.j,11>y||(V&=-2,j&=-2),0>V||0>j||0>=q||0>=z||V+q>b||j+z>O))return 0;if(f.v=V,f.j=j,f.va=V+q,f.o=j+z,f.U=q,f.T=z,f.da=u!=null&&0<u.da,f.da){if(!yt(q,z,y=[u.ib],V=[u.hb]))return 0;f.ib=y[0],f.hb=V[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*b/4&&f.hb<3*O/4,f.Kb=0),1}function hd(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function vc(u,f,y,b){if(b==null||0>=u||0>=f)return 2;if(y!=null){if(y.Da){var O=y.cd,V=y.bd,j=-2&y.v,q=-2&y.j;if(0>j||0>q||0>=O||0>=V||j+O>u||q+V>f)return 2;u=O,f=V}if(y.da){if(!yt(u,f,O=[y.ib],V=[y.hb]))return 2;u=O[0],f=V[0]}}b.width=u,b.height=f;e:{var z=b.width,H=b.height;if(u=b.S,0>=z||0>=H||!(u>=Wp&&13>u))u=2;else{if(0>=b.Rd&&b.sd==null){j=V=O=f=0;var ne=(q=z*g5[u])*H;if(11>u||(V=(H+1)/2*(f=(z+1)/2),u==12&&(j=(O=z)*H)),(H=s(ne+2*V+j))==null){u=1;break e}b.sd=H,11>u?((z=b.f.RGBA).eb=H,z.fb=0,z.A=q,z.size=ne):((z=b.f.kb).y=H,z.O=0,z.fa=q,z.Fd=ne,z.f=H,z.N=0+ne,z.Ab=f,z.Cd=V,z.ea=H,z.W=0+ne+V,z.Db=f,z.Ed=V,u==12&&(z.F=H,z.J=0+ne+2*V),z.Tc=j,z.lb=O)}if(f=1,O=b.S,V=b.width,j=b.height,O>=Wp&&13>O)if(11>O)u=b.f.RGBA,f&=(q=Math.abs(u.A))*(j-1)+V<=u.size,f&=q>=V*g5[O],f&=u.eb!=null;else{u=b.f.kb,q=(V+1)/2,ne=(j+1)/2,z=Math.abs(u.fa),H=Math.abs(u.Ab);var fe=Math.abs(u.Db),pe=Math.abs(u.lb),ae=pe*(j-1)+V;f&=z*(j-1)+V<=u.Fd,f&=H*(ne-1)+q<=u.Cd,f=(f&=fe*(ne-1)+q<=u.Ed)&z>=V&H>=q&fe>=q,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,O==12&&(f&=pe>=V,f&=ae<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||y!=null&&y.fd&&(u=hd(b)),u}var _r=64,yc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_c=24,wc=32,dd=8,di=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];je("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(u){return u},I.Predictor2=function(u,f,y){return f[y+0]},I.Predictor3=function(u,f,y){return f[y+1]},I.Predictor4=function(u,f,y){return f[y-1]},I.Predictor5=function(u,f,y){return $e($e(u,f[y+1]),f[y+0])},I.Predictor6=function(u,f,y){return $e(u,f[y-1])},I.Predictor7=function(u,f,y){return $e(u,f[y+0])},I.Predictor8=function(u,f,y){return $e(f[y-1],f[y+0])},I.Predictor9=function(u,f,y){return $e(f[y+0],f[y+1])},I.Predictor10=function(u,f,y){return $e($e(u,f[y-1]),$e(f[y+0],f[y+1]))},I.Predictor11=function(u,f,y){var b=f[y+0];return 0>=bt(b>>24&255,u>>24&255,(f=f[y-1])>>24&255)+bt(b>>16&255,u>>16&255,f>>16&255)+bt(b>>8&255,u>>8&255,f>>8&255)+bt(255&b,255&u,255&f)?b:u},I.Predictor12=function(u,f,y){var b=f[y+0];return(at((u>>24&255)+(b>>24&255)-((f=f[y-1])>>24&255))<<24|at((u>>16&255)+(b>>16&255)-(f>>16&255))<<16|at((u>>8&255)+(b>>8&255)-(f>>8&255))<<8|at((255&u)+(255&b)-(255&f)))>>>0},I.Predictor13=function(u,f,y){var b=f[y-1];return(mt((u=$e(u,f[y+0]))>>24&255,b>>24&255)<<24|mt(u>>16&255,b>>16&255)<<16|mt(u>>8&255,b>>8&255)<<8|mt(u>>0&255,b>>0&255))>>>0};var v1=I.PredictorAdd0;I.PredictorAdd1=xt,je("Predictor2","PredictorAdd2"),je("Predictor3","PredictorAdd3"),je("Predictor4","PredictorAdd4"),je("Predictor5","PredictorAdd5"),je("Predictor6","PredictorAdd6"),je("Predictor7","PredictorAdd7"),je("Predictor8","PredictorAdd8"),je("Predictor9","PredictorAdd9"),je("Predictor10","PredictorAdd10"),je("Predictor11","PredictorAdd11"),je("Predictor12","PredictorAdd12"),je("Predictor13","PredictorAdd13");var fd=I.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Up,is=I.ColorIndexInverseTransform,bc=I.MapARGB,Bp=I.VP8LColorIndexInverseTransformAlpha,qp=I.MapAlpha,ka=I.VP8LPredictorsAdd=[];ka.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var tu,fi,Hr,Ra,jo,Uo,Ic,Bo,Bn,pd,Kr,ss,Ec,zp,md,nu,ru,La,iu,Ac,su,Da,gd,os,as,un,cn,qn,rr=s(511),qo=s(2041),vd=s(225),xc=s(767),$p=0,y1=qo,Gp=vd,Mi=xc,ls=rr,Wp=0,Hp=1,i5=2,Kp=3,Qp=4,_1=5,s5=6,w1=7,b1=8,Jp=9,I1=10,a3=[2,3,7],l3=[3,3,11],o5=[280,256,256,256,40],u3=[0,1,1,1,0],c3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],h3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],d3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],f3=8,E1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],A1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yd=null,p3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],m3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],a5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],g3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],v3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],y3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oa=[],ks=[],zo=[],w3=1,l5=2,Fa=[],us=[];we("UpsampleRgbLinePair",A,3),we("UpsampleBgrLinePair",B,3),we("UpsampleRgbaLinePair",Wt,4),we("UpsampleBgraLinePair",_t,4),we("UpsampleArgbLinePair",Le,4),we("UpsampleRgba4444LinePair",de,2),we("UpsampleRgb565LinePair",ie,2);var b3=I.UpsampleRgbLinePair,I3=I.UpsampleBgrLinePair,u5=I.UpsampleRgbaLinePair,c5=I.UpsampleBgraLinePair,h5=I.UpsampleArgbLinePair,d5=I.UpsampleRgba4444LinePair,E3=I.UpsampleRgb565LinePair,Yp=16,Xp=1<<Yp-1,_d=-227,x1=482,f5=6,A3=(256<<f5)-1,p5=0,x3=s(256),T3=s(256),S3=s(256),N3=s(256),P3=s(x1-_d),C3=s(x1-_d);rn("YuvToRgbRow",A,3),rn("YuvToBgrRow",B,3),rn("YuvToRgbaRow",Wt,4),rn("YuvToBgraRow",_t,4),rn("YuvToArgbRow",Le,4),rn("YuvToRgba4444Row",de,2),rn("YuvToRgb565Row",ie,2);var m5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zp=[0,2,8],k3=[8,7,6,4,4,2,2,2,1,1,1,1],R3=1;this.WebPDecodeRGBA=function(u,f,y,b,O){var V=Hp,j=new ts,q=new oi;j.ba=q,q.S=V,q.width=[q.width],q.height=[q.height];var z=q.width,H=q.height,ne=new zr;if(ne==null||u==null)var fe=2;else e(ne!=null),fe=Cs(u,f,y,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(fe!=0?z=0:(z!=null&&(z[0]=ne.width[0]),H!=null&&(H[0]=ne.height[0]),z=1),z){q.width=q.width[0],q.height=q.height[0],b!=null&&(b[0]=q.width),O!=null&&(O[0]=q.height);e:{if(b=new Lo,(O=new Sa).data=u,O.w=f,O.ha=y,O.kd=1,f=[0],e(O!=null),((u=Cs(O.data,O.w,O.ha,null,null,null,f,null,O))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(e(j!=null),b.data=O.data,b.w=O.w+O.offset,b.ha=O.ha-O.offset,b.put=Si,b.ac=Pn,b.bc=Pr,b.ma=j,O.xa){if((u=vr())==null){j=1;break e}if(function(pe,ae){var Se=[0],Ee=[0],re=[0];t:for(;;){if(pe==null)return 0;if(ae==null)return pe.a=2,0;if(pe.l=ae,pe.a=0,Z(pe.m,ae.data,ae.w,ae.ha),!ut(pe.m,Se,Ee,re)){pe.a=3;break t}if(pe.xb=l5,ae.width=Se[0],ae.height=Ee[0],!nr(Se[0],Ee[0],1,pe,null))break t;return 1}return e(pe.a!=0),0}(u,b)){if(b=(f=vc(b.width,b.height,j.Oa,j.ba))==0){t:{b=u;n:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((y=b.l)!=null),e((O=y.ma)!=null),b.xb!=0){if(b.ca=O.ba,b.tb=O.tb,e(b.ca!=null),!Vo(O.Oa,y,Kp)){b.a=2;break n}if(!Ks(b,y.width)||y.da)break n;if((y.da||jt(b.ca.S))&&ue(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&ue()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!lt(b.s.vb,b.s.Wa.Xa)){b.a=1;break n}b.xb=0}if(!ai(b,b.V,b.Ba,b.c,b.i,y.o,Pi))break n;O.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(f=u.a)}else f=u.a}else{if((u=new ac)==null){j=1;break e}if(u.Fa=O.na,u.P=O.P,u.qc=O.Sa,zl(u,b)){if((f=vc(b.width,b.height,j.Oa,j.ba))==0){if(u.Aa=0,y=j.Oa,e((O=u)!=null),y!=null){if(0<(z=0>(z=y.Md)?0:100<z?255:255*z/100)){for(H=ne=0;4>H;++H)12>(fe=O.pb[H]).lc&&(fe.ia=z*k3[0>fe.lc?0:fe.lc]>>3),ne|=fe.ia;ne&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}ld(u,b)||(f=u.a)}}else f=u.a}f==0&&j.Oa!=null&&j.Oa.fd&&(f=hd(j.ba))}j=f}V=j!=0?null:11>V?q.f.RGBA.eb:q.f.kb.y}else V=null;return V};var g5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,F){for(var U="",x=0;x<4;x++)U+=String.fromCharCode(I[F++]);return U}function d(I,F){return(I[F+0]<<0|I[F+1]<<8|I[F+2]<<16)>>>0}function p(I,F){return(I[F+0]<<0|I[F+1]<<8|I[F+2]<<16|I[F+3]<<24)>>>0}new l;var v=[0],g=[0],N=[],T=new l,R=n,w=function(I,F){var U={},x=0,S=!1,k=0,X=0;if(U.frames=[],!function(W,J,ee,se){for(var he=0;he<se;he++)if(W[J+he]!=ee.charCodeAt(he))return!0;return!1}(I,F,"RIFF",4)){var ge,ve;for(p(I,F+=4),F+=8;F<I.length;){var be=c(I,F),Z=p(I,F+=4);F+=4;var le=Z+(1&Z);switch(be){case"VP8 ":case"VP8L":U.frames[x]===void 0&&(U.frames[x]={}),(M=U.frames[x]).src_off=S?X:F-8,M.src_size=k+Z+8,x++,S&&(S=!1,k=0,X=0);break;case"VP8X":(M=U.header={}).feature_flags=I[F];var ce=F+4;M.canvas_width=1+d(I,ce),ce+=3,M.canvas_height=1+d(I,ce),ce+=3;break;case"ALPH":S=!0,k=le+8,X=F-8;break;case"ANIM":(M=U.header).bgcolor=p(I,F),ce=F+4,M.loop_count=(ge=I)[(ve=ce)+0]<<0|ge[ve+1]<<8,ce+=2;break;case"ANMF":var Ne,M;(M=U.frames[x]={}).offset_x=2*d(I,F),F+=3,M.offset_y=2*d(I,F),F+=3,M.width=1+d(I,F),F+=3,M.height=1+d(I,F),F+=3,M.duration=d(I,F),F+=3,Ne=I[F++],M.dispose=1&Ne,M.blend=Ne>>1&1}be!="ANMF"&&(F+=le)}return U}}(R,0);w.response=R,w.rgbaoutput=!0,w.dataurl=!1;var E=w.header?w.header:null,L=w.frames?w.frames:null;if(E){E.loop_counter=E.loop_count,v=[E.canvas_height],g=[E.canvas_width];for(var $=0;$<L.length&&L[$].blend!=0;$++);}var G=L[0],K=T.WebPDecodeRGBA(R,G.src_off,G.src_size,g,v);G.rgba=K,G.imgwidth=g[0],G.imgheight=v[0];for(var P=0;P<g[0]*v[0]*4;P++)N[P]=K[P];return this.width=g,this.height=v,this.data=N,this}(function(n){var e=function(){return typeof _2=="function"},t=function(v,g,N,T){var R=4,w=o;switch(T){case n.image_compression.FAST:R=1,w=s;break;case n.image_compression.MEDIUM:R=6,w=a;break;case n.image_compression.SLOW:R=9,w=l}v=r(v,g,N,w);var E=_2(v,{level:R});return n.__addimage__.arrayBufferToBinaryString(E)},r=function(v,g,N,T){for(var R,w,E,L=v.length/g,$=new Uint8Array(v.length+L),G=d(),K=0;K<L;K+=1){if(E=K*g,R=v.subarray(E,E+g),T)$.set(T(R,N,w),E+K);else{for(var P,I=G.length,F=[];P<I;P+=1)F[P]=G[P](R,N,w);var U=p(F.concat());$.set(F[U],E+K)}w=R}return $},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var N,T=[],R=v.length;T[0]=1;for(var w=0;w<R;w+=1)N=v[w-g]||0,T[w+1]=v[w]-N+256&255;return T},o=function(v,g,N){var T,R=[],w=v.length;R[0]=2;for(var E=0;E<w;E+=1)T=N&&N[E]||0,R[E+1]=v[E]-T+256&255;return R},a=function(v,g,N){var T,R,w=[],E=v.length;w[0]=3;for(var L=0;L<E;L+=1)T=v[L-g]||0,R=N&&N[L]||0,w[L+1]=v[L]+256-(T+R>>>1)&255;return w},l=function(v,g,N){var T,R,w,E,L=[],$=v.length;L[0]=4;for(var G=0;G<$;G+=1)T=v[G-g]||0,R=N&&N[G]||0,w=N&&N[G-g]||0,E=c(T,R,w),L[G+1]=v[G]-E+256&255;return L},c=function(v,g,N){if(v===g&&g===N)return v;var T=Math.abs(g-N),R=Math.abs(v-N),w=Math.abs(v+g-N-N);return T<=R&&T<=w?v:R<=w?g:N},d=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(N){return N.reduce(function(T,R){return T+Math.abs(R)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(v,g,N,T){var R,w,E,L,$,G,K,P,I,F,U,x,S,k,X,ge=this.decode.FLATE_DECODE,ve="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(E=new L9(v)).imgData,w=E.bits,R=E.colorSpace,$=E.colors,[4,6].indexOf(E.colorType)!==-1){if(E.bits===8){I=(P=E.pixelBitlength==32?new Uint32Array(E.decodePixels().buffer):E.pixelBitlength==16?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,U=new Uint8Array(I*E.colors),F=new Uint8Array(I);var be,Z=E.pixelBitlength-E.bits;for(k=0,X=0;k<I;k++){for(S=P[k],be=0;be<Z;)U[X++]=S>>>be&255,be+=E.bits;F[k]=S>>>be&255}}if(E.bits===16){I=(P=new Uint32Array(E.decodePixels().buffer)).length,U=new Uint8Array(I*(32/E.pixelBitlength)*E.colors),F=new Uint8Array(I*(32/E.pixelBitlength)),x=E.colors>1,k=0,X=0;for(var le=0;k<I;)S=P[k++],U[X++]=S>>>0&255,x&&(U[X++]=S>>>16&255,S=P[k++],U[X++]=S>>>0&255),F[le++]=S>>>16&255;w=8}T!==n.image_compression.NONE&&e()?(v=t(U,E.width*E.colors,E.colors,T),K=t(F,E.width,1,T)):(v=U,K=F,ge=void 0)}if(E.colorType===3&&(R=this.color_spaces.INDEXED,G=E.palette,E.transparency.indexed)){var ce=E.transparency.indexed,Ne=0;for(k=0,I=ce.length;k<I;++k)Ne+=ce[k];if((Ne/=255)===I-1&&ce.indexOf(0)!==-1)L=[ce.indexOf(0)];else if(Ne!==I){for(P=E.decodePixels(),F=new Uint8Array(P.length),k=0,I=P.length;k<I;k++)F[k]=ce[P[k]];K=t(F,E.width,1)}}var M=function(W){var J;switch(W){case n.image_compression.FAST:J=11;break;case n.image_compression.MEDIUM:J=13;break;case n.image_compression.SLOW:J=14;break;default:J=12}return J}(T);return ge===this.decode.FLATE_DECODE&&(ve="/Predictor "+M+" "),ve+="/Colors "+$+" /BitsPerComponent "+w+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(K&&this.__addimage__.isArrayBuffer(K)||this.__addimage__.isArrayBufferView(K))&&(K=this.__addimage__.arrayBufferToBinaryString(K)),{alias:N,data:v,index:g,filter:ge,decodeParameters:ve,transparency:L,palette:G,sMask:K,predictor:M,width:E.width,height:E.height,bitsPerComponent:w,colorSpace:R}}}})(ft.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new D9(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new Dv(100).encode(c,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(ft.API),Os.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Os.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){on.log("bit decode error:"+t)}},Os.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Os.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Os.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Os.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=n}},Os.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=n}},Os.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Os.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Os.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Os(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Dv(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}}(ft.API),uA.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new uA(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Dv(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}}(ft.API),ft.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],g=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ft.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vc=ft.API,Vm=Vc.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,g=n.length,N=0,T=a[0]||l,R=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?R.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Jt(c[r])==="object"&&!isNaN(parseInt(c[r][N],10))?c[r][N]/d:0,R.push((a[r]||T)/l+v)),N=r;return R},sA=Vc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Vc.processArabic&&(n=Vc.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Vm.apply(this,arguments).reduce(function(s,o){return s+o},0)},oA=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},aA=function(n,e,t){t||(t={});var r,i,s,o,a,l,c,d=[],p=[d],v=t.textIndent||0,g=0,N=0,T=n.split(" "),R=Vm.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),E=[];T.map(function($){($=$.split(/\s*\n/)).length>1?E=E.concat($.map(function(G,K){return(K&&G.length?`
`:"")+G})):E.push($[0])}),T=E,l=sA.apply(this,[w,t])}for(s=0,o=T.length;s<o;s++){var L=0;if(r=T[s],l&&r[0]==`
`&&(r=r.substr(1),L=1),v+g+(N=(i=Vm.apply(this,[r,t])).reduce(function($,G){return $+G},0))>e||L){if(N>e){for(a=oA.apply(this,[r,i,e-(v+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);N=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function($,G){return $+G},0)}else d=[r];p.push(d),v=N+l,g=R}else d.push(r),v+=g+N,g=R}return c=l?function($,G){return(G?w:"")+$.join(" ")}:function($){return $.join(" ")},p.map(c)},Vc.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(aA.apply(this,[r[a],o,s]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var v,g,N,T,R=["{"];for(var w in p){if(v=p[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=s(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(N=s(v).slice(3),T="-"):(N=s(v).slice(2),T=""),N=T+N.slice(0,-1)+r[N.slice(-1)];else{if(Jt(v)!=="object")throw new Error("Don't know what to do with value type "+Jt(v)+".");N=o(v)}R.push(g+N)}return R.push("}"),R.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,N,T,R={},w=1,E=R,L=[],$="",G="",K=p.length-1,P=1;P<K;P+=1)(T=p[P])=="'"?v?(N=v.join(""),v=void 0):v=[]:v?v.push(T):T=="{"?(L.push([E,N]),E={},N=void 0):T=="}"?((g=L.pop())[0][g[1]]=E,N=void 0,E=g[0]):T=="-"?w=-1:N===void 0?t.hasOwnProperty(T)?($+=t[T],N=parseInt($,16)*w,w=1,$=""):$+=T:t.hasOwnProperty(T)?(G+=t[T],E[N]=parseInt(G,16)*w,w=1,N=void 0,G=""):G+=T;return R},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var v=p.font,g=d.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var N=c.Unicode[v.postScriptName];N&&(v.metadata.Unicode.encoding=N,v.encoding=N.codePages[0])}])}(ft.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Af(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ft),function(n){function e(){return(pt.canvg?Promise.resolve(pt.canvg):p2(()=>import("./index.es-8f8096c0.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}ft.API.addSvgAsImage=function(t,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw on.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw on.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(N){return N.fromString(p,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(v)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),ft.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},ft.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(N,T){var R,w=!1;for(R=0;R<N.length;R+=1)N[R]===T&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Jt(n)==="object"){for(i in n)if(s=n[i],v(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&v(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,T=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?T.push("/"+N+" /"+t[N].value):T.push("/"+N+" "+t[N].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(ft.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,N){return g-N})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",N=0;N<v.length;N++)g+=String.fromCharCode(v[N]);var T=c();d({data:g,addLength1:!0,objectId:T}),l("endobj");var R=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:R}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Wc(a.fontName)),l("/FontFile2 "+T+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var E=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Wc(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+R+" 0 R"),l("/BaseFont /"+Wc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var N=c();d({data:v,addLength1:!0,objectId:N}),l("endobj");var T=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var R=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+N+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Wc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+Wc(a.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,N=p.fonts,T=g,R="",w=0,E="",L=N[T].encoding;if(N[T].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(E=a,T=g,Array.isArray(a)&&(E=a[0]),w=0;w<E.length;w+=1)N[T].metadata.hasOwnProperty("cmap")&&(o=N[T].metadata.cmap.unicode.codeMap[E[w].charCodeAt(0)]),o||E[w].charCodeAt(0)<256&&N[T].metadata.hasOwnProperty("Unicode")?R+=E[w]:R+="";var $="";return parseInt(T.slice(1))<14||L==="WinAnsiEncoding"?$=v(R,T).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&($=t(R,N[T])),p.isHex=!0,{text:$,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ft),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(ft.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,L=0;this.__bidiEngine__={};var $=function(x){var S=x.charCodeAt(),k=S>>8,X=T[k];return X!==void 0?p[256*X+(255&S)]:k===252||k===253?"AL":w.test(k)?"L":k===8?"R":"N"},G=function(x){for(var S,k=0;k<x.length;k++){if((S=$(x.charAt(k)))==="L")return!1;if(S==="R")return!0}return!1},K=function(x,S,k,X){var ge,ve,be,Z,le=S[X];switch(le){case"L":case"R":E=!1;break;case"N":case"AN":break;case"EN":E&&(le="AN");break;case"AL":E=!0,le="R";break;case"WS":le="N";break;case"CS":X<1||X+1>=S.length||(ge=k[X-1])!=="EN"&&ge!=="AN"||(ve=S[X+1])!=="EN"&&ve!=="AN"?le="N":E&&(ve="AN"),le=ve===ge?ve:"N";break;case"ES":le=(ge=X>0?k[X-1]:"B")==="EN"&&X+1<S.length&&S[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&k[X-1]==="EN"){le="EN";break}if(E){le="N";break}for(be=X+1,Z=S.length;be<Z&&S[be]==="ET";)be++;le=be<Z&&S[be]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Z=S.length,be=X+1;be<Z&&S[be]==="NSM";)be++;if(be<Z){var ce=x[X],Ne=ce>=1425&&ce<=2303||ce===64286;if(ge=S[be],Ne&&(ge==="R"||ge==="AL")){le="R";break}}}le=X<1||(ge=S[X-1])==="B"?"N":k[X-1];break;case"B":E=!1,i=!0,le=L;break;case"S":s=!0,le="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"BN":le="N"}return le},P=function(x,S,k){var X=x.split("");return k&&I(X,k,{hiLevel:L}),X.reverse(),S&&S.reverse(),X.join("")},I=function(x,S,k){var X,ge,ve,be,Z,le=-1,ce=x.length,Ne=0,M=[],W=L?g:v,J=[];for(E=!1,i=!1,s=!1,ge=0;ge<ce;ge++)J[ge]=$(x[ge]);for(ve=0;ve<ce;ve++){if(Z=Ne,M[ve]=K(x,J,M,ve),X=240&(Ne=W[Z][N[M[ve]]]),Ne&=15,S[ve]=be=W[Ne][5],X>0)if(X===16){for(ge=le;ge<ve;ge++)S[ge]=1;le=-1}else le=-1;if(W[Ne][6])le===-1&&(le=ve);else if(le>-1){for(ge=le;ge<ve;ge++)S[ge]=be;le=-1}J[ve]==="B"&&(S[ve]=0),k.hiLevel|=be}s&&function(ee,se,he){for(var ye=0;ye<he;ye++)if(ee[ye]==="S"){se[ye]=L;for(var _e=ye-1;_e>=0&&ee[_e]==="WS";_e--)se[_e]=L}}(J,S,ce)},F=function(x,S,k,X,ge){if(!(ge.hiLevel<x)){if(x===1&&L===1&&!i)return S.reverse(),void(k&&k.reverse());for(var ve,be,Z,le,ce=S.length,Ne=0;Ne<ce;){if(X[Ne]>=x){for(Z=Ne+1;Z<ce&&X[Z]>=x;)Z++;for(le=Ne,be=Z-1;le<be;le++,be--)ve=S[le],S[le]=S[be],S[be]=ve,k&&(ve=k[le],k[le]=k[be],k[be]=ve);Ne=Z}Ne++}}},U=function(x,S,k){var X=x.split(""),ge={hiLevel:L};return k||(k=[]),I(X,k,ge),function(ve,be,Z){if(Z.hiLevel!==0&&d)for(var le,ce=0;ce<ve.length;ce++)be[ce]===1&&(le=R.indexOf(ve[ce]))>=0&&(ve[ce]=R[le+1])}(X,k,ge),F(2,X,S,k,ge),F(1,X,S,k,ge),X.join("")};return this.__bidiEngine__.doBidiReorder=function(x,S,k){if(function(ge,ve){if(ve)for(var be=0;be<ge.length;be++)ve[be]=be;a===void 0&&(a=G(ge)),c===void 0&&(c=G(ge))}(x,S),o||!l||c)if(o&&l&&a^c)L=a?1:0,x=P(x,S,k);else if(!o&&l&&c)L=a?1:0,x=U(x,S,k),x=P(x,S);else if(!o||a||l||c){if(o&&!l&&a^c)x=P(x,S),a?(L=0,x=U(x,S,k)):(L=1,x=U(x,S,k),x=P(x,S));else if(o&&a&&!l&&c)L=1,x=U(x,S,k),x=P(x,S);else if(!o&&!l&&a^c){var X=d;a?(L=1,x=U(x,S,k),L=0,d=!1,x=U(x,S,k),d=X):(L=0,x=U(x,S,k),x=P(x,S),L=1,d=!1,x=U(x,S,k),d=X,x=P(x,S))}}else L=0,x=U(x,S,k);else L=a?1:0,x=U(x,S,k);return x},this.__bidiEngine__.setOptions=function(x){x&&(o=x.isInputVisual,l=x.isOutputVisual,a=x.isInputRtl,c=x.isOutputRtl,d=x.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(ft),ft.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new kl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Q9(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new O9(this.contents),this.head=new M9(this),this.name=new q9(this),this.cmap=new s3(this),this.toUnicode={},this.hhea=new V9(this),this.maxp=new z9(this),this.hmtx=new $9(this),this.post=new U9(this),this.os2=new j9(this),this.loca=new K9(this),this.glyf=new G9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Ws,kl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),O9=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,c,d,p,v,g,N,T;for(T in g=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),d=16*g-p,(i=new kl).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*g,c=i.pos+s,a=null,N=[],t)for(v=t[T],i.writeString(T),i.writeInt(n(v)),i.writeInt(c),i.writeInt(v.length),N=N.concat(v),T==="head"&&(a=c),c+=v.length;c%4;)N.push(0),c++;return i.write(N),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=o3.call(t);t.length%4;)t.push(0);for(s=new kl(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),F9={}.hasOwnProperty,No=function(n,e){for(var t in e)F9.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ws=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var M9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new kl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),cA=function(){function n(e,t){var r,i,s,o,a,l,c,d,p,v,g,N,T,R,w,E,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var $,G;for(G=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)G.push(e.readUInt16());return G}(),e.pos+=2,T=function(){var $,G;for(G=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)G.push(e.readUInt16());return G}(),c=function(){var $,G;for(G=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)G.push(e.readUInt16());return G}(),d=function(){var $,G;for(G=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)G.push(e.readUInt16());return G}(),i=(this.length-e.pos+this.offset)/2,a=function(){var $,G;for(G=[],l=$=0;0<=i?$<i:$>i;l=0<=i?++$:--$)G.push(e.readUInt16());return G}(),l=w=0,L=s.length;w<L;l=++w)for(R=s[l],r=E=N=T[l];N<=R?E<=R:E>=R;r=N<=R?++E:--E)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-N)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,l,c,d,p,v,g,N,T,R,w,E,L,$,G,K,P,I,F,U,x,S,k,X,ge,ve,be,Z,le,ce,Ne,M,W,J,ee,se,he,ye,_e,Me,De,ze;switch(X=new kl,o=Object.keys(e).sort(function(Ue,lt){return Ue-lt}),t){case"macroman":for(T=0,R=function(){var Ue=[];for(N=0;N<256;++N)Ue.push(0);return Ue}(),E={0:0},s={},ge=0,le=o.length;ge<le;ge++)E[_e=e[i=o[ge]]]==null&&(E[_e]=++T),s[i]={old:e[i],new:E[e[i]]},R[i]=E[e[i]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(R),{charMap:s,subtable:X.data,maxGlyphID:T+1};case"unicode":for(S=[],p=[],L=0,E={},r={},w=c=null,ve=0,ce=o.length;ve<ce;ve++)E[G=e[i=o[ve]]]==null&&(E[G]=++L),r[i]={old:G,new:E[G]},a=E[G]-i,w!=null&&a===c||(w&&p.push(w),S.push(i),c=a),w=i;for(w&&p.push(w),p.push(65535),S.push(65535),U=2*(F=S.length),I=2*Math.pow(Math.log(F)/Math.LN2,2),v=Math.log(I/2)/Math.LN2,P=2*F-I,l=[],K=[],g=[],N=be=0,Ne=S.length;be<Ne;N=++be){if(x=S[N],d=p[N],x===65535){l.push(0),K.push(0);break}if(x-(k=r[x].new)>=32768)for(l.push(0),K.push(2*(g.length+F-N)),i=Z=x;x<=d?Z<=d:Z>=d;i=x<=d?++Z:--Z)g.push(r[i].new);else l.push(k-x),K.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*F+2*g.length),X.writeUInt16(0),X.writeUInt16(U),X.writeUInt16(I),X.writeUInt16(v),X.writeUInt16(P),he=0,M=p.length;he<M;he++)i=p[he],X.writeUInt16(i);for(X.writeUInt16(0),ye=0,W=S.length;ye<W;ye++)i=S[ye],X.writeUInt16(i);for(Me=0,J=l.length;Me<J;Me++)a=l[Me],X.writeUInt16(a);for(De=0,ee=K.length;De<ee;De++)$=K[De],X.writeUInt16($);for(ze=0,se=g.length;ze<se;ze++)T=g[ze],X.writeUInt16(T);return{charMap:r,subtable:X.data,maxGlyphID:L+1}}},n}(),s3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new cA(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=cA.encode(t,r),(s=new kl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),V9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),j9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),U9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(t.readUInt32());return c}).call(this)}},e}(),B9=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},q9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,c,d,p,v,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],t.pos=s.offset,d=t.readString(s.length),a=new B9(d,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),z9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),$9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,v,g;for(g=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),o3=[].slice,G9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,c,d,p,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new kl(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[t]=a===-1?new H9(l,d,v,c,p):new W9(l,a,d,v,c,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),W9=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),H9=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new kl(o3.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),K9=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,Ws),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),Q9=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,c,d,p,v,g,N,T,R,w;for(i in r=s3.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},w=r.charMap)g[(l=w[i]).old]=l.new;for(N in v=r.maxGlyphID,o)N in g||(g[N]=v++);return d=function(E){var L,$;for(L in $={},E)$[E[L]]=L;return $}(g),p=Object.keys(d).sort(function(E,L){return E-L}),T=function(){var E,L,$;for($=[],E=0,L=p.length;E<L;E++)a=p[E],$.push(d[a]);return $}(),s=this.font.glyf.encode(o,T,g),c=this.font.loca.encode(s.offsets,T),R={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n}();ft.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)r=t[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();class J9{constructor(e,t){this.doc=new ft,this.orcamento=e,this.totais=t,this.margin=20,this.y=this.margin,this.pageHeight=this.doc.internal.pageSize.getHeight(),this.pageWidth=this.doc.internal.pageSize.getWidth(),this.styles={primary:[46,125,50],secondary:[0,151,167],accent:[255,107,53],text:[51,51,51],border:[221,221,221]}}checkPageBreak(e=0){return this.y+e>this.pageHeight-this.margin?(this.doc.addPage(),this.y=this.margin,!0):!1}addText(e,t=this.margin,r=10,i=this.styles.text,s="left"){this.doc.setFontSize(r),this.doc.setTextColor(...i);let o=t;if(s==="center"){const a=this.doc.getTextWidth(e);o=(this.pageWidth-a)/2}else if(s==="right"){const a=this.doc.getTextWidth(e);o=this.pageWidth-this.margin-a}this.doc.text(e,o,this.y),this.y+=r/2+2}addTitle(e,t=16){this.checkPageBreak(20),this.addText(e,this.margin,t,this.styles.primary),this.y+=5}addDivider(){this.y+=5,this.doc.setDrawColor(...this.styles.border),this.doc.line(this.margin,this.y,this.pageWidth-this.margin,this.y),this.y+=10}addTable(e,t,r=null){this.checkPageBreak(t.length*8+20);const i=this.y,s=this.pageWidth-2*this.margin,o=s/e.length,a=r||e.map(()=>o);let l=i;this.doc.setFillColor(...this.styles.primary),this.doc.setTextColor(255,255,255),this.doc.setFontSize(9),this.doc.setFont(void 0,"bold");let c=this.margin;e.forEach((d,p)=>{this.doc.rect(c,l,a[p],8,"F"),this.doc.text(d,c+2,l+5),c+=a[p]}),l+=8,this.doc.setTextColor(...this.styles.text),this.doc.setFont(void 0,"normal"),t.forEach((d,p)=>{p%2===0&&(this.doc.setFillColor(245,245,245),this.doc.rect(this.margin,l,s,8,"F")),c=this.margin,d.forEach((v,g)=>{this.doc.text(v.toString(),c+2,l+5),c+=a[g]}),l+=8,l>this.pageHeight-this.margin-20&&(this.doc.addPage(),l=this.margin,this.doc.setFillColor(...this.styles.primary),this.doc.setTextColor(255,255,255),c=this.margin,e.forEach((v,g)=>{this.doc.rect(c,l,a[g],8,"F"),this.doc.text(v,c+2,l+5),c+=a[g]}),l+=8,this.doc.setTextColor(...this.styles.text))}),this.y=l+10}generateHeader(){this.addText("RELEVO CONSULTORIA AMBIENTAL",this.margin,16,this.styles.primary),this.addText("SISTEMA DE ORAMENTOS",this.margin,12,this.styles.secondary),this.addDivider()}generateMetadata(){this.addTitle("INFORMAES DO ORAMENTO",14),this.addText(`Nome: ${this.orcamento.metadata.nome}`,this.margin,10),this.addText(`Cliente: ${this.orcamento.metadata.cliente}`,this.margin,10),this.addText(`Data: ${new Date(this.orcamento.metadata.data).toLocaleDateString("pt-BR")}`,this.margin,10),this.addText(`Verso: ${this.orcamento.metadata.versao}`,this.margin,10),this.orcamento.metadata.desconto>0&&this.addText(`Desconto: ${this.orcamento.metadata.desconto}%`,this.margin,10,this.styles.accent),this.addDivider()}generateFinancialSummary(){this.addTitle("RESUMO FINANCEIRO",14);const e=["Descrio","Valor (R$)"],t=[120,50],r=[["Coordenao",it(this.totais.subtotalCoordenacao)],["Profissionais",it(this.totais.subtotalProfissionais)],["Valores nicos",it(this.totais.subtotalValoresUnicos)],["Logstica",it(this.totais.subtotalLogistica)],["",""],["SUBTOTAL GERAL",it(this.totais.subtotalGeral)],["Encargos de Pessoal",it(this.totais.encargosPessoal)],["Custo Total",it(this.totais.custoTotal)],["",""],["Lucro",it(this.totais.lucro)],["Fundo de Giro",it(this.totais.fundoGiro)],["Impostos",it(this.totais.impostos)],["Despesas Fiscais",it(this.totais.despesasFiscais)],["Comisso Captao",it(this.totais.comissaoCaptacao)],["",""],["TOTAL ANTES DO DESCONTO",it(this.totais.totalAntesDesconto)]];this.totais.desconto>0&&r.push(["DESCONTO",`-${it(this.totais.desconto)}`]),r.push(["TOTAL GERAL",it(this.totais.totalGeral)]),this.addTable(e,r,t),this.addDivider()}generateParameters(){this.addTitle("PARMETROS DE CLCULO",14);const e=["Parmetro","Valor"],t=[100,70],r=Object.entries(this.orcamento.parametros).map(([i,s])=>[i.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase()),Ya(s)]);this.addTable(e,r,t)}generateCategoryDetail(e,t,r,i){const s=t.filter(a=>i(a).total>0);if(s.length===0)return;this.checkPageBreak(30),this.addTitle(e.toUpperCase(),12);const o=s.map(a=>i(a).row);this.addTable(r,o)}generateAllCategories(){[{nome:"COORDENAO",dados:this.orcamento.coordenacao,headers:["Cargo","Profissional","Subtotal","Quant.","Dias","Total"],mapper:t=>{const r=t.dias/30*t.subtotal*t.quant;return{total:r,row:[t.cargo,t.profissional,it(t.subtotal),t.quant.toString(),t.dias.toString(),it(r)]}}},{nome:"PROFISSIONAIS",dados:this.orcamento.profissionais,headers:["Cargo","Prolabore","Pessoas","Dias","Total"],mapper:t=>{const r=t.dias/30*t.prolabore*t.pessoas;return{total:r,row:[t.cargo,it(t.prolabore),t.pessoas.toString(),t.dias.toString(),it(r)]}}},{nome:"VALORES NICOS",dados:this.orcamento.valoresUnicos,headers:["Item","Valor Unit.","Pessoas","Dias","Total"],mapper:t=>{const r=t.valor*t.pessoas*t.dias;return{total:r,row:[t.item,it(t.valor),t.pessoas.toString(),t.dias.toString(),it(r)]}}},{nome:"LOGSTICA",dados:this.orcamento.logistica,headers:["Item","Valor","Unidade","Quant.","Dias","Total"],mapper:t=>{const r=t.valor*t.qtd*t.dias;return{total:r,row:[t.item,it(t.valor),t.unidade,t.qtd.toString(),t.dias.toString(),it(r)]}}}].forEach(t=>{this.generateCategoryDetail(t.nome,t.dados,t.headers,t.mapper)})}addFooter(){const e=this.doc.internal.getNumberOfPages();for(let t=1;t<=e;t++)this.doc.setPage(t),this.doc.setFontSize(8),this.doc.setTextColor(...this.styles.text),this.doc.text(`Pgina ${t} de ${e}  Gerado em ${new Date().toLocaleDateString("pt-BR")}  Relevo Consultoria Ambiental`,this.pageWidth/2,this.pageHeight-10,{align:"center"})}generate(){return this.generateHeader(),this.generateMetadata(),this.generateFinancialSummary(),this.generateParameters(),this.generateAllCategories(),this.addFooter(),this.doc}}const Y9=async(n,e)=>{try{return new J9(n,e).generate()}catch(t){throw console.error("Erro ao gerar PDF:",t),new Error("Falha ao gerar PDF. Tente novamente.")}},X9=(n,e)=>{let t="";return t+=`RELEVO CONSULTORIA AMBIENTAL - ORAMENTO
`,t+=`Nome: ${n.metadata.nome}
`,t+=`Cliente: ${n.metadata.cliente}
`,t+=`Data: ${new Date(n.metadata.data).toLocaleDateString("pt-BR")}
`,t+=`Verso: ${n.metadata.versao}
`,n.metadata.desconto>0&&(t+=`Desconto: ${n.metadata.desconto}%
`),t+=`
`,t+=`RESUMO FINANCEIRO
`,t+=`Descrio,Valor (R$)
`,t+=`Coordenao,${it(e.subtotalCoordenacao)}
`,t+=`Profissionais,${it(e.subtotalProfissionais)}
`,t+=`Valores nicos,${it(e.subtotalValoresUnicos)}
`,t+=`Logstica,${it(e.subtotalLogistica)}
`,t+=`Subtotal Geral,${it(e.subtotalGeral)}
`,t+=`Encargos de Pessoal,${it(e.encargosPessoal)}
`,t+=`Custo Total,${it(e.custoTotal)}
`,t+=`Lucro,${it(e.lucro)}
`,t+=`Fundo de Giro,${it(e.fundoGiro)}
`,t+=`Impostos,${it(e.impostos)}
`,t+=`Despesas Fiscais,${it(e.despesasFiscais)}
`,t+=`Comisso Captao,${it(e.comissaoCaptacao)}
`,t+=`Total Antes do Desconto,${it(e.totalAntesDesconto)}
`,e.desconto>0&&(t+=`Desconto,-${it(e.desconto)}
`),t+=`TOTAL GERAL,${it(e.totalGeral)}
`,t+=`
`,t+=`PARMETROS DE CLCULO
`,t+=`Parmetro,Valor
`,Object.entries(n.parametros).forEach(([r,i])=>{const s=r.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase());t+=`${s},${Ya(i)}
`}),t},Z9=(n,e,t="text/csv")=>{const r=new Blob([n],{type:t}),i=window.URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)},eU=()=>{const{orcamentoAtual:n,totais:e,carregando:t}=So(),[r,i]=On.useState(!1),s=async()=>{if(!r){i(!0);try{const a=await Y9(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;a.save(l)}catch(a){console.error("Erro ao gerar PDF:",a),alert("Erro ao gerar PDF. Tente novamente.")}finally{i(!1)}}},o=()=>{if(!r){i(!0);try{const a=X9(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`;Z9(a,l,"text/csv;charset=utf-8;")}catch(a){console.error("Erro ao gerar CSV:",a),alert("Erro ao gerar CSV. Tente novamente.")}finally{i(!1)}}};return C.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[C.jsx("button",{onClick:s,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] border border-[#2E3E31] rounded-md hover:bg-[#3CC373] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar para PDF (formato de impresso)",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):C.jsx(C.Fragment,{children:" PDF"})}),C.jsx("button",{onClick:o,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] border border-[#2E3E31] rounded-md hover:bg-[#3CC373] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar para CSV (Excel/Planilhas)",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):C.jsx(C.Fragment,{children:" CSV"})})]})},jm=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),tU=({erros:n,onClose:e})=>!n||n.length===0?null:C.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[C.jsxs("div",{className:"flex justify-between items-start mb-2",children:[C.jsx("h3",{className:"text-yellow-800 font-semibold text-lg font-heading",children:" Erros de Validao"}),C.jsx("button",{onClick:e,className:"text-yellow-600 hover:text-yellow-800 text-lg font-bold",children:""})]}),C.jsx("p",{className:"text-yellow-700 mb-3 font-sans",children:"Corrija os seguintes erros antes de salvar:"}),C.jsx("ul",{className:"text-yellow-600 list-disc list-inside space-y-1 font-sans",children:n.map((t,r)=>C.jsx("li",{className:"text-sm",children:t},r))})]}),nU=()=>{const{orcamentoAtual:n,salvarOrcamento:e,totais:t,carregando:r,erro:i,errosValidacao:s,limparErro:o,dispatch:a,validarOrcamentoAtual:l,limparErrosValidacao:c}=So(),{user:d,logout:p}=e5(),[v,g]=On.useState(!1),[N,T]=On.useState(!0);On.useEffect(()=>{l()},[n]);const R=(G,K)=>{s.length>0&&c(),a({type:"UPDATE_METADATA",payload:{[G]:K}})},w=async()=>{if(confirm("Deseja sair do sistema? Isso ir desconectar voc do Portal Relevo."))try{await p()}catch(G){console.error("Erro ao fazer logout:",G),alert("Erro ao sair do sistema")}},E=async()=>{try{if(o(),!l().valido){T(!0),window.scrollTo({top:0,behavior:"smooth"});return}const K=await e(n);K&&(alert(` Oramento salvo com sucesso!
ID: ${K}`),c())}catch(G){console.error("Erro ao salvar oramento:",G)}},L=()=>{confirm("Deseja criar um novo oramento? Todas as alteraes no salvas sero perdidas.")&&window.location.reload()},$=s.length===0;return C.jsxs("div",{className:"bg-relevo-background shadow-lg border-b border-relevo-border p-6 mb-6",children:[N&&s.length>0&&C.jsx(tU,{erros:s,onClose:()=>T(!1)}),s.length>0&&!N&&C.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4 flex justify-between items-center",children:[C.jsxs("span",{className:"text-yellow-700 text-sm font-sans",children:[" Existem ",s.length," erro(s) de validao"]}),C.jsx("button",{onClick:()=>T(!0),className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600 transition font-sans",children:"Ver Erros"})]}),C.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-8",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsxs("div",{className:"flex-shrink-0",children:[C.jsx("img",{src:"https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_vertical.png",alt:"Relevo Consultoria Ambiental",className:"h-16 w-auto",onError:G=>{G.target.style.display="none",G.target.nextSibling.style.display="flex"}}),C.jsx("div",{className:"h-16 w-16 bg-relevo-green rounded-lg flex items-center justify-center hidden",children:C.jsx("span",{className:"text-white font-bold text-lg",children:"R"})})]}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Relevo Consultoria Ambiental"}),C.jsx("p",{className:"font-medium text-relevo-blue font-heading",children:"Sistema de Oramentos"}),d&&C.jsxs("p",{className:"text-sm text-relevo-text/70 font-sans mt-1",children:["Logado como: ",C.jsx("strong",{children:d.email})]})]})]}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[C.jsx(eU,{}),C.jsx("button",{onClick:E,disabled:r||!$,className:`px-6 py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base ${$?"bg-[#2EAD60] hover:bg-[#3CC373] text-white focus:ring-[#2EAD60]":"opacity-50 cursor-not-allowed bg-gray-400 text-white"}`,title:$?"Salvar oramento no Firebase":"Corrija os erros de validao para salvar",children:r?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):C.jsx(C.Fragment,{children:$?" Salvar":" Corrigir"})}),C.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Gerenciar"}),C.jsx("button",{onClick:L,className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Novo"}),C.jsx("button",{onClick:w,className:"px-4 py-3 text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 font-medium transition-colors font-sans text-sm",title:`Sair do sistema (${d==null?void 0:d.email})`,children:" Sair"})]})]}),C.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-relevo-border p-4 mb-6",children:C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Subtotal"}),C.jsxs("div",{className:"text-lg font-bold text-relevo-blue font-sans",children:["R$ ",jm((t==null?void 0:t.subtotalGeral)||0)]})]}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Custos Indiretos"}),C.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["R$ ",jm(((t==null?void 0:t.totalAntesDesconto)||0)-((t==null?void 0:t.subtotalGeral)||0))]})]}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Total"}),C.jsxs("div",{className:"text-lg font-bold text-relevo-green font-sans",children:["R$ ",jm((t==null?void 0:t.totalGeral)||0)]})]}),n.metadata.desconto>0&&C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Desconto Aplicado"}),C.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["-R$ ",jm((t==null?void 0:t.desconto)||0)]}),C.jsxs("div",{className:"text-xs text-relevo-orange font-sans",children:[n.metadata.desconto,"% de desconto"]})]}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Margem"}),C.jsxs("div",{className:"text-lg font-bold font-sans",style:{color:(t==null?void 0:t.lucro)>0?"#2E7D32":"#FF6B35"},children:[((t==null?void 0:t.lucro)/((t==null?void 0:t.totalGeral)||1)*100).toFixed(1).replace(".",","),"%"]})]})]})}),C.jsx("div",{className:"bg-[#2EAD60] rounded-lg p-4 mb-6",children:C.jsxs("div",{className:"w-full",children:[C.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center font-heading",children:"Informaes do Oramento"}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3",children:[C.jsxs("div",{className:"lg:col-span-5",children:[C.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Nome do Oramento *"}),C.jsx("input",{type:"text",value:n.metadata.nome,onChange:G=>R("nome",G.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Ex: Projeto EIA-RIMA Serra Azul"}),C.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Mnimo 3 caracteres"})]}),C.jsxs("div",{className:"lg:col-span-4",children:[C.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Cliente *"}),C.jsx("input",{type:"text",value:n.metadata.cliente,onChange:G=>R("cliente",G.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Nome da empresa cliente"}),C.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),C.jsxs("div",{className:"lg:col-span-2",children:[C.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Data *"}),C.jsx("input",{type:"date",value:n.metadata.data,onChange:G=>R("data",G.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900"}),C.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),C.jsxs("div",{className:"lg:col-span-1",children:[C.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Desconto (%)"}),C.jsx("input",{type:"number",min:"0",max:"100",value:n.metadata.desconto,onChange:G=>R("desconto",G.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"0"}),C.jsx("p",{className:"text-xs text-white/80 mt-1",children:"0 a 100"})]})]})]})}),v&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Gerenciar Oramentos"}),C.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-800 text-2xl font-bold",children:""})]}),C.jsx(Jj,{setMostrarGerenciador:g})]})}),i&&C.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded fixed bottom-4 right-4 z-50 shadow-lg",children:[C.jsx("p",{children:i}),C.jsx("button",{onClick:o,className:"absolute top-1 right-2 text-red-700 font-bold",children:"x"})]})]})},rU=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=So(),r=(s,o)=>{var c,d;const a=parseFloat(o)/100||0,l=(d=(c=et.parametros)[s])==null?void 0:d.call(c,a);l&&console.warn(`Erro de validao em ${s}:`,l),e({type:"UPDATE_PARAMETROS",payload:{[s]:a}})},i=((t==null?void 0:t.encargosPessoal)||0)+((t==null?void 0:t.lucro)||0)+((t==null?void 0:t.fundoGiro)||0)+((t==null?void 0:t.impostos)||0)+((t==null?void 0:t.despesasFiscais)||0)+((t==null?void 0:t.comissaoCaptacao)||0);return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Custos Gerais e Parmetros"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"imposto",label:"Impostos (%)"},{key:"lucro",label:"Lucro (%)"},{key:"fundoGiro",label:"Fundo de Giro (%)"},{key:"encargosPessoal",label:"Encargos Pessoal (%)"},{key:"despesasFiscais",label:"Despesas Fiscais (%)"},{key:"comissaoCaptacao",label:"Comisso de Captao (%)"}].map(s=>{var l,c;const o=n.parametros[s.key]*100,a=(c=(l=et.parametros)[s.key])==null?void 0:c.call(l,n.parametros[s.key]);return C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-relevo-text/80 font-sans mb-1",children:s.label}),C.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:o,onChange:d=>r(s.key,d.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${a?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-relevo-green-light"}`}),a&&C.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[C.jsx("span",{className:"mr-1",children:""}),a.replace("0-1","0-100%")]})]},s.key)})}),C.jsxs("div",{className:"mt-6 p-4 bg-[#E8F5E9] rounded-lg border border-[#C8E6C9]",children:[C.jsx("h3",{className:"font-semibold text-[#2E3E31] font-heading mb-4",children:"Resumo dos Custos Indiretos"}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Despesas Fiscais:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.despesasFiscais)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.despesasFiscais)})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Lucro:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.lucro)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.lucro)})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Fundo de Giro:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.fundoGiro)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.fundoGiro)})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Impostos:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.impostos)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.imposto)})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm border-t border-[#C8E6C9] pt-4",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Encargos Pessoal:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.encargosPessoal)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.encargosPessoal)})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Comisso Captao:"}),C.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",it((t==null?void 0:t.comissaoCaptacao)||0)]}),C.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Ya(n.parametros.comissaoCaptacao)})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Total Custos Indiretos:"}),C.jsxs("div",{className:"font-semibold text-[#2EAD60] font-sans",children:["R$ ",it(i)]})]})]})]})]})},iU=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=So(),r=(s,o,a)=>{const l=o==="profissional"||o==="cargo",c=l?a:parseFloat(a)||0;let d=null;!l&&et.coordenacao[o]&&(d=et.coordenacao[o](c)),d&&console.warn(`Erro de validao em ${o}:`,d),e({type:"UPDATE_COORDENACAO",payload:{id:s,updates:{[o]:c}}})},i=(s,o,a=!1)=>{var d,p;if(a)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const l=(p=(d=et.coordenacao)[s])==null?void 0:p.call(d,o),c="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return l?`${c} border-red-300 focus:ring-red-500 bg-red-50`:`${c} border-gray-300 focus:ring-blue-500`};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Coordenao"}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-[#E8F5E9]",children:[C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Profissional"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quant."}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),C.jsx("tbody",{children:n.coordenacao.map(s=>{const o=s.dias*8*s.quant,a=s.dias/30,l=a*s.prolabore*s.quant,c=et.coordenacao.prolabore?et.coordenacao.prolabore(s.prolabore):null,d=et.coordenacao.quant(s.quant),p=et.coordenacao.dias(s.dias),v=c||d||p;return C.jsxs("tr",{className:`border-b border-gray-200 hover:bg-relevo-light-gray ${v?"bg-red-50 hover:bg-red-100":""}`,children:[C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"flex items-center",children:[s.cargo,v&&C.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste coordenador",children:""})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsx("input",{type:"text",value:s.profissional,onChange:g=>r(s.id,"profissional",g.target.value),className:i("profissional",s.profissional,!0),placeholder:"Ex: Snior, Pleno",title:"Nvel do profissional (Snior, Pleno, etc.)"})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"100",value:s.prolabore,onChange:g=>r(s.id,"prolabore",g.target.value),className:i("prolabore",s.prolabore),title:c||"Valor mensal do coordenador"}),c&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:c})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:s.quant,onChange:g=>r(s.id,"quant",g.target.value),className:i("quant",s.quant),title:d||"Quantidade de coordenadores"}),d&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:s.dias,onChange:g=>r(s.id,"dias",g.target.value),className:i("dias",s.dias),title:p||"Dias de trabalho"}),p&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:p})]})}),C.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:o.toFixed(1).replace(".",",")}),C.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:a.toFixed(2).replace(".",",")}),C.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",it(l)]})]},s.id)})}),C.jsx("tfoot",{children:C.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[C.jsx("td",{colSpan:"7",className:"px-4 py-2 text-right text-white",children:"Total Coordenao:"}),C.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",it((t==null?void 0:t.subtotalCoordenacao)||0)]})]})})]})})]})},sU=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=So(),r=(o,a,l)=>{const c=parseFloat(l)||0;let d=null;et.profissionais[a]&&(d=et.profissionais[a](c)),d&&console.warn(`Erro de validao em ${a}:`,d),e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{[a]:c}}})},i=()=>{const o=Math.max(...n.profissionais.map(a=>a.id))+1;e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{cargo:"Novo Profissional",prolabore:0,pessoas:0,dias:0}}})},s=(o,a,l)=>{var p,v;const c=(v=(p=et.profissionais)[a])==null?void 0:v.call(p,l),d="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return c?`${d} border-red-300 focus:ring-red-500 bg-red-50`:`${d} border-gray-300 focus:ring-blue-500`};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Profissionais"}),C.jsx("button",{onClick:i,className:"bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Profissional"})]}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-[#E8F5E9]",children:[C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),C.jsx("tbody",{children:n.profissionais.map(o=>{const a=o.dias*8*o.pessoas,l=o.dias/30,c=l*o.prolabore*o.pessoas,d=et.profissionais.prolabore(o.prolabore),p=et.profissionais.pessoas(o.pessoas),v=et.profissionais.dias(o.dias),g=d||p||v;return C.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${g?"bg-red-50 hover:bg-red-100":""}`,children:[C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{type:"text",value:o.cargo,onChange:N=>r(o.id,"cargo",N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nome do cargo"}),g&&C.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste profissional",children:""})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"100",value:o.prolabore,onChange:N=>r(o.id,"prolabore",N.target.value),className:s(o.id,"prolabore",o.prolabore),title:d||"Valor do prolabore mensal"}),d&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:N=>r(o.id,"pessoas",N.target.value),className:s(o.id,"pessoas",o.pessoas),title:p||"Nmero de profissionais"}),p&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:p})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:N=>r(o.id,"dias",N.target.value),className:s(o.id,"dias",o.dias),title:v||"Dias de trabalho"}),v&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:v})]})}),C.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:a.toFixed(1).replace(".",",")}),C.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:l.toFixed(2).replace(".",",")}),C.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",it(c)]})]},o.id)})}),C.jsx("tfoot",{children:C.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[C.jsx("td",{colSpan:"6",className:"px-4 py-2 text-right text-white",children:"Total Profissionais:"}),C.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",it((t==null?void 0:t.subtotalProfissionais)||0)]})]})})]})})]})},oU=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=So(),r=(o,a,l)=>{const c=a==="item",d=c?l:parseFloat(l)||0;let p=null;!c&&et.valoresUnicos[a]&&(p=et.valoresUnicos[a](d)),p&&console.warn(`Erro de validao em ${a}:`,p),e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{[a]:d}}})},i=()=>{const o=Math.max(...n.valoresUnicos.map(a=>a.id))+1;e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{item:"Novo Item",valor:0,pessoas:1,dias:1}}})},s=(o,a,l=!1)=>{var p,v;if(l)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const c=(v=(p=et.valoresUnicos)[o])==null?void 0:v.call(p,a),d="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return c?`${d} border-red-300 focus:ring-red-500 bg-red-50`:`${d} border-gray-300 focus:ring-blue-500`};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Valores nicos"}),C.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Item"})]}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-[#E8F5E9]",children:[C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor Unitrio (R$)"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),C.jsx("tbody",{children:n.valoresUnicos.map(o=>{const a=o.valor*o.pessoas*o.dias,l=et.valoresUnicos.valor(o.valor),c=et.valoresUnicos.pessoas(o.pessoas),d=et.valoresUnicos.dias(o.dias),p=l||c||d;return C.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${p?"bg-red-50 hover:bg-red-100":""}`,children:[C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{type:"text",value:o.item,onChange:v=>r(o.id,"item",v.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item",title:"Descrio do item ou servio"}),p&&C.jsx("span",{className:"ml-2 text-red-500 text-xs flex-shrink-0",title:"Verifique os valores deste item",children:""})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"0.01",value:o.valor,onChange:v=>r(o.id,"valor",v.target.value),className:s("valor",o.valor),title:l||"Valor unitrio do item"}),l&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:l})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:v=>r(o.id,"pessoas",v.target.value),className:s("pessoas",o.pessoas),title:c||"Nmero de pessoas envolvidas"}),c&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:c})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:v=>r(o.id,"dias",v.target.value),className:s("dias",o.dias),title:d||"Dias de utilizao/durao"}),d&&C.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),C.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",it(a)]})]},o.id)})}),C.jsx("tfoot",{children:C.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[C.jsx("td",{colSpan:"4",className:"px-4 py-2 text-right text-white",children:"Total Valores nicos:"}),C.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",it((t==null?void 0:t.subtotalValoresUnicos)||0)]})]})})]})})]})},aU=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=So(),r=(o,a,l)=>{e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{[a]:a==="item"||a==="unidade"?l:parseFloat(l)||0}}})},i=()=>{const o=Math.max(...n.logistica.map(a=>a.id))+1;e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{item:"Novo Item",valor:0,unidade:"unidade",qtd:1,dias:1}}})},s=(o,a)=>{var d,p;const l=(p=(d=et.logistica)[o])==null?void 0:p.call(d,a),c="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 font-sans";return l?`${c} border-red-300 focus:ring-red-500 bg-red-50`:`${c} border-relevo-border focus:ring-relevo-green-light`};return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Logstica"}),C.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm font-sans",children:"+ Adicionar Item"})]}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"bg-[#E8F5E9]",children:[C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor (R$)"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Unidade"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quantidade"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),C.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),C.jsx("tbody",{children:n.logistica.map(o=>{const a=o.valor*o.qtd*o.dias;return C.jsxs("tr",{className:"border-b border-relevo-border hover:bg-relevo-light-gray",children:[C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsx("input",{type:"text",value:o.item,onChange:l=>r(o.id,"item",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item"})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsx("input",{type:"number",value:o.valor,onChange:l=>r(o.id,"valor",l.target.value),className:s("valor",o.valor)})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsxs("select",{value:o.unidade,onChange:l=>r(o.id,"unidade",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",children:[C.jsx("option",{value:"dia/pessoa",children:"dia/pessoa"}),C.jsx("option",{value:"dia/veculo",children:"dia/veculo"}),C.jsx("option",{value:"pessoa",children:"pessoa"}),C.jsx("option",{value:"veculo",children:"veculo"}),C.jsx("option",{value:"dia",children:"dia"}),C.jsx("option",{value:"ms/veculo",children:"ms/veculo"}),C.jsx("option",{value:"lote",children:"lote"}),C.jsx("option",{value:"unidade",children:"unidade"}),C.jsx("option",{value:"km",children:"km"})]})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsx("input",{type:"number",value:o.qtd,onChange:l=>r(o.id,"qtd",l.target.value),className:s("qtd",o.qtd)})}),C.jsx("td",{className:"px-4 py-2 text-sm",children:C.jsx("input",{type:"number",value:o.dias,onChange:l=>r(o.id,"dias",l.target.value),className:s("dias",o.dias)})}),C.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",it(a)]})]},o.id)})}),C.jsx("tfoot",{children:C.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[C.jsx("td",{colSpan:"5",className:"px-4 py-2 text-right text-white",children:"Total Logstica:"}),C.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",it(t.subtotalLogistica)]})]})})]})})]})},lU=()=>{const{totais:n}=So();return C.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[C.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Custos Diretos & Valor Total da Proposta"}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-2",children:"Composio dos Custos Diretos"}),C.jsxs("div",{className:"space-y-2 text-sm",children:[C.jsx(jc,{label:"Coordenao",valor:n.subtotalCoordenacao}),C.jsx(jc,{label:"Profissionais",valor:n.subtotalProfissionais}),C.jsx(jc,{label:"Valores nicos",valor:n.subtotalValoresUnicos}),C.jsx(jc,{label:"Logstica",valor:n.subtotalLogistica})]}),C.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 flex justify-between font-semibold",children:[C.jsx("span",{className:"text-relevo-text font-heading",children:"Subtotal Direto"}),C.jsxs("span",{className:"text-relevo-blue font-sans",children:["R$ ",it(n.subtotalGeral)]})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-2",children:"Valor Final da Proposta"}),C.jsx(jc,{label:"Total Antes do Desconto",valor:n.totalAntesDesconto}),C.jsx(jc,{label:"Desconto Aplicado",valor:n.desconto}),C.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 flex justify-between text-lg font-bold",children:[C.jsx("span",{className:"text-relevo-text font-heading",children:"Total Final"}),C.jsxs("span",{className:"text-relevo-green font-sans",children:["R$ ",it(n.totalGeral)]})]})]})]})},jc=({label:n,valor:e})=>C.jsxs("div",{className:"flex justify-between border-b pb-1",children:[C.jsxs("span",{className:"text-relevo-text/70 font-sans",children:[n,":"]}),C.jsxs("span",{className:"font-medium",children:["R$ ",it(e)]})]}),uU=()=>{const{totais:n}=So(),e=r=>n.totalGeral>0?(r/n.totalGeral*100).toFixed(1).replace(".",","):"0,0",t=n.encargosPessoal+n.fundoGiro+n.lucro+n.despesasFiscais+n.comissaoCaptacao;return C.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[C.jsx("h2",{className:"text-xl font-bold mb-6 text-relevo-text font-heading",children:"Resumo Consolidado do Oramento"}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-3",children:"Custos Diretos (por categoria)"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx(no,{label:"Coordenao",valor:n.subtotalCoordenacao}),C.jsx(no,{label:"Profissionais",valor:n.subtotalProfissionais}),C.jsx(no,{label:"Valores nicos",valor:n.subtotalValoresUnicos}),C.jsx(no,{label:"Logstica",valor:n.subtotalLogistica}),C.jsx(zd,{label:"Subtotal Geral de Custos Diretos",valor:n.subtotalGeral,highlight:!0})]})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-3",children:"Custos Indiretos (percentuais sobre o subtotal geral)"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx(no,{label:"Encargos Pessoais",valor:n.encargosPessoal}),C.jsx(no,{label:"Fundo de Giro",valor:n.fundoGiro}),C.jsx(no,{label:"Lucro (Margem)",valor:n.lucro}),C.jsx(no,{label:"Despesas Fiscais",valor:n.despesasFiscais}),C.jsx(no,{label:"Comisso de Captao",valor:n.comissaoCaptacao}),C.jsx(zd,{label:"Subtotal de Custos Indiretos",valor:t,highlight:!0})]})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-3",children:"Impostos"}),C.jsx(zd,{label:"Impostos calculados sobre (Diretos + Indiretos)",valor:n.impostos})]}),C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-semibold text-relevo-text/80 font-heading mb-3",children:"Total Antes do Desconto"}),C.jsx(zd,{label:"Valor Base",valor:n.totalAntesDesconto}),C.jsx(no,{label:"Desconto Aplicado",valor:n.desconto}),C.jsx(zd,{label:"Total Final do Oramento",valor:n.totalGeral,highlightStrong:!0})]}),C.jsxs("div",{className:"mt-8 p-4 bg-relevo-light-gray rounded-lg",children:[C.jsx("h3",{className:"font-semibold text-relevo-blue font-heading mb-2",children:"Anlise Percentual"}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[C.jsx(Um,{label:"Margem de Lucro",valor:e(n.lucro)}),C.jsx(Um,{label:"Impostos",valor:e(n.impostos)}),C.jsx(Um,{label:"Custos Diretos",valor:e(n.subtotalGeral)}),C.jsx(Um,{label:"Custos Indiretos",valor:e(t)})]})]})]})},no=({label:n,valor:e})=>C.jsxs("div",{className:"flex justify-between border-b pb-2",children:[C.jsxs("span",{className:"text-relevo-text/70 font-sans",children:[n,":"]}),C.jsxs("span",{className:"font-medium",children:["R$ ",it(e)]})]}),zd=({label:n,valor:e,highlight:t,highlightStrong:r})=>C.jsxs("div",{className:`flex justify-between pb-3 border-b-2 ${r?"border-relevo-green text-lg font-bold":t?"border-gray-300 font-semibold":"border-gray-200"}`,children:[C.jsx("span",{className:"text-relevo-text font-heading",children:n}),C.jsxs("span",{className:r?"text-relevo-green":"text-relevo-blue",children:["R$ ",it(e)]})]}),Um=({label:n,valor:e})=>C.jsxs("div",{className:"text-center",children:[C.jsxs("div",{className:"text-relevo-blue font-sans font-semibold",children:[e,"%"]}),C.jsx("div",{className:"text-relevo-blue/80 font-sans text-xs",children:n})]}),cU=()=>{const{user:n,loading:e}=e5();return e?C.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),C.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),C.jsx("p",{className:"text-sm text-relevo-text/70 mt-2 font-sans",children:"Conectando com autenticao compartilhada"})]})}):n?null:C.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md text-center",children:[C.jsx("div",{className:"text-6xl mb-4",children:""}),C.jsx("h2",{className:"text-xl font-bold text-relevo-green mb-4 font-heading",children:"Sistema de Oramentos"}),C.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4 mb-6",children:[C.jsx("p",{className:"text-sm text-blue-800 font-sans",children:C.jsx("strong",{children:"Para acessar o sistema de oramentos:"})}),C.jsxs("p",{className:"text-sm text-blue-800 mt-2 font-sans",children:["1. Faa login no ",C.jsx("a",{href:"https://portal.relevo.eco.br",target:"_blank",className:"text-[#2EAD60] underline font-bold",children:"Portal Relevo"}),C.jsx("br",{}),"2. Volte aqui e recarregue a pgina"]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("button",{onClick:()=>window.open("https://portal.relevo.eco.br","_blank"),className:"w-full bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" Fazer Login no Portal"}),C.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" J fiz login, recarregar pgina"})]})]})})},hU=()=>C.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),C.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),C.jsx("p",{className:"text-relevo-text/70 text-sm mt-2 font-sans",children:"Conectando com o Portal Relevo"})]})}),dU=()=>{const{user:n,loading:e}=e5();return e?C.jsx(hU,{}):n?C.jsx(Kj,{children:C.jsxs("div",{className:"min-h-screen bg-relevo-background",children:[C.jsx(nU,{}),C.jsxs("main",{className:"container mx-auto px-4 py-6",children:[C.jsx(rU,{}),C.jsx(iU,{}),C.jsx(sU,{}),C.jsx(oU,{}),C.jsx(aU,{}),C.jsx(lU,{}),"   ",C.jsx(uU,{}),"         "]})]})}):C.jsx(cU,{})};function fU(){return C.jsx(Qj,{children:C.jsx(dU,{})})}Ov.createRoot(document.getElementById("root")).render(C.jsx(oC.StrictMode,{children:C.jsx(fU,{})}));export{Jt as _,pU as c,$3 as g};
