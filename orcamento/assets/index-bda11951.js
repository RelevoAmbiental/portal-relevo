(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var jq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tT={exports:{}},R0={},nT={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=Symbol.for("react.element"),eR=Symbol.for("react.portal"),tR=Symbol.for("react.fragment"),nR=Symbol.for("react.strict_mode"),rR=Symbol.for("react.profiler"),iR=Symbol.for("react.provider"),sR=Symbol.for("react.context"),oR=Symbol.for("react.forward_ref"),aR=Symbol.for("react.suspense"),lR=Symbol.for("react.memo"),uR=Symbol.for("react.lazy"),mI=Symbol.iterator;function cR(n){return n===null||typeof n!="object"?null:(n=mI&&n[mI]||n["@@iterator"],typeof n=="function"?n:null)}var rT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iT=Object.assign,sT={};function sd(n,e,t){this.props=n,this.context=e,this.refs=sT,this.updater=t||rT}sd.prototype.isReactComponent={};sd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};sd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function oT(){}oT.prototype=sd.prototype;function Z_(n,e,t){this.props=n,this.context=e,this.refs=sT,this.updater=t||rT}var e2=Z_.prototype=new oT;e2.constructor=Z_;iT(e2,sd.prototype);e2.isPureReactComponent=!0;var gI=Array.isArray,aT=Object.prototype.hasOwnProperty,t2={current:null},lT={key:!0,ref:!0,__self:!0,__source:!0};function uT(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)aT.call(e,r)&&!lT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ap,type:n,key:s,ref:o,props:i,_owner:t2.current}}function hR(n,e){return{$$typeof:Ap,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function n2(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ap}function dR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vI=/\/+/g;function rv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dR(""+n.key):e.toString(36)}function Zm(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ap:case eR:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+rv(o,0):r,gI(i)?(t="",n!=null&&(t=n.replace(vI,"$&/")+"/"),Zm(i,e,t,"",function(u){return u})):i!=null&&(n2(i)&&(i=hR(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",gI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+rv(s,a);o+=Zm(s,e,t,l,i)}else if(l=cR(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+rv(s,a++),o+=Zm(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Em(n,e,t){if(n==null)return n;var r=[],i=0;return Zm(n,r,"","",function(s){return e.call(t,s,i++)}),r}function fR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ri={current:null},eg={transition:null},pR={ReactCurrentDispatcher:ri,ReactCurrentBatchConfig:eg,ReactCurrentOwner:t2};Mt.Children={map:Em,forEach:function(n,e,t){Em(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Em(n,function(){e++}),e},toArray:function(n){return Em(n,function(e){return e})||[]},only:function(n){if(!n2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Mt.Component=sd;Mt.Fragment=tR;Mt.Profiler=rR;Mt.PureComponent=Z_;Mt.StrictMode=nR;Mt.Suspense=aR;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pR;Mt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=iT({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=t2.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)aT.call(e,l)&&!lT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ap,type:n.type,key:i,ref:s,props:r,_owner:o}};Mt.createContext=function(n){return n={$$typeof:sR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:iR,_context:n},n.Consumer=n};Mt.createElement=uT;Mt.createFactory=function(n){var e=uT.bind(null,n);return e.type=n,e};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(n){return{$$typeof:oR,render:n}};Mt.isValidElement=n2;Mt.lazy=function(n){return{$$typeof:uR,_payload:{_status:-1,_result:n},_init:fR}};Mt.memo=function(n,e){return{$$typeof:lR,type:n,compare:e===void 0?null:e}};Mt.startTransition=function(n){var e=eg.transition;eg.transition={};try{n()}finally{eg.transition=e}};Mt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Mt.useCallback=function(n,e){return ri.current.useCallback(n,e)};Mt.useContext=function(n){return ri.current.useContext(n)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(n){return ri.current.useDeferredValue(n)};Mt.useEffect=function(n,e){return ri.current.useEffect(n,e)};Mt.useId=function(){return ri.current.useId()};Mt.useImperativeHandle=function(n,e,t){return ri.current.useImperativeHandle(n,e,t)};Mt.useInsertionEffect=function(n,e){return ri.current.useInsertionEffect(n,e)};Mt.useLayoutEffect=function(n,e){return ri.current.useLayoutEffect(n,e)};Mt.useMemo=function(n,e){return ri.current.useMemo(n,e)};Mt.useReducer=function(n,e,t){return ri.current.useReducer(n,e,t)};Mt.useRef=function(n){return ri.current.useRef(n)};Mt.useState=function(n){return ri.current.useState(n)};Mt.useSyncExternalStore=function(n,e,t){return ri.current.useSyncExternalStore(n,e,t)};Mt.useTransition=function(){return ri.current.useTransition()};Mt.version="18.2.0";nT.exports=Mt;var On=nT.exports;const mR=Zk(On);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gR=On,vR=Symbol.for("react.element"),yR=Symbol.for("react.fragment"),_R=Object.prototype.hasOwnProperty,wR=gR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IR={key:!0,ref:!0,__self:!0,__source:!0};function cT(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_R.call(e,r)&&!IR.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vR,type:n,key:s,ref:o,props:i,_owner:wR.current}}R0.Fragment=yR;R0.jsx=cT;R0.jsxs=cT;tT.exports=R0;var j=tT.exports,ry={},hT={exports:{}},Qi={},dT={exports:{}},fT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Z,ue){var le=Z.length;Z.push(ue);e:for(;0<le;){var Te=le-1>>>1,F=Z[Te];if(0<i(F,ue))Z[Te]=ue,Z[le]=F,le=Te;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ue=Z[0],le=Z.pop();if(le!==ue){Z[0]=le;e:for(var Te=0,F=Z.length,G=F>>>1;Te<G;){var J=2*(Te+1)-1,ee=Z[J],se=J+1,he=Z[se];if(0>i(ee,le))se<F&&0>i(he,ee)?(Z[Te]=he,Z[se]=le,Te=se):(Z[Te]=ee,Z[J]=le,Te=J);else if(se<F&&0>i(he,le))Z[Te]=he,Z[se]=le,Te=se;else break e}}return ue}function i(Z,ue){var le=Z.sortIndex-ue.sortIndex;return le!==0?le:Z.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,p=null,v=3,g=!1,P=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Z){for(var ue=t(u);ue!==null;){if(ue.callback===null)r(u);else if(ue.startTime<=Z)r(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=t(u)}}function $(Z){if(S=!1,R(Z),!P)if(t(l)!==null)P=!0,ve(W);else{var ue=t(u);ue!==null&&Ie($,ue.startTime-Z)}}function W(Z,ue){P=!1,S&&(S=!1,w(E),E=-1),g=!0;var le=v;try{for(R(ue),p=t(l);p!==null&&(!(p.expirationTime>ue)||Z&&!T());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,v=p.priorityLevel;var F=Te(p.expirationTime<=ue);ue=n.unstable_now(),typeof F=="function"?p.callback=F:p===t(l)&&r(l),R(ue)}else r(l);p=t(l)}if(p!==null)var G=!0;else{var J=t(u);J!==null&&Ie($,J.startTime-ue),G=!1}return G}finally{p=null,v=le,g=!1}}var Q=!1,k=null,E=-1,O=5,U=-1;function T(){return!(n.unstable_now()-U<O)}function x(){if(k!==null){var Z=n.unstable_now();U=Z;var ue=!0;try{ue=k(!0,Z)}finally{ue?N():(Q=!1,k=null)}}else Q=!1}var N;if(typeof b=="function")N=function(){b(x)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ge=X.port2;X.port1.onmessage=x,N=function(){ge.postMessage(null)}}else N=function(){C(x,0)};function ve(Z){k=Z,Q||(Q=!0,N())}function Ie(Z,ue){E=C(function(){Z(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){P||g||(P=!0,ve(W))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var le=v;v=ue;try{return Z()}finally{v=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var le=v;v=Z;try{return ue()}finally{v=le}},n.unstable_scheduleCallback=function(Z,ue,le){var Te=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Te+le:Te):le=Te,Z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=le+F,Z={id:d++,callback:ue,priorityLevel:Z,startTime:le,expirationTime:F,sortIndex:-1},le>Te?(Z.sortIndex=le,e(u,Z),t(l)===null&&Z===t(u)&&(S?(w(E),E=-1):S=!0,Ie($,le-Te))):(Z.sortIndex=F,e(l,Z),P||g||(P=!0,ve(W))),Z},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(Z){var ue=v;return function(){var le=v;v=ue;try{return Z.apply(this,arguments)}finally{v=le}}}})(fT);dT.exports=fT;var bR=dT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT=On,Hi=bR;function Fe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mT=new Set,Mf={};function nc(n,e){Lh(n,e),Lh(n+"Capture",e)}function Lh(n,e){for(Mf[n]=e,n=0;n<e.length;n++)mT.add(e[n])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iy=Object.prototype.hasOwnProperty,ER=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yI={},_I={};function AR(n){return iy.call(_I,n)?!0:iy.call(yI,n)?!1:ER.test(n)?_I[n]=!0:(yI[n]=!0,!1)}function TR(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function SR(n,e,t,r){if(e===null||typeof e>"u"||TR(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ii(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xr[n]=new ii(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xr[e]=new ii(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xr[n]=new ii(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xr[n]=new ii(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xr[n]=new ii(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xr[n]=new ii(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xr[n]=new ii(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xr[n]=new ii(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xr[n]=new ii(n,5,!1,n.toLowerCase(),null,!1,!1)});var r2=/[\-:]([a-z])/g;function i2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(r2,i2);xr[e]=new ii(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(r2,i2);xr[e]=new ii(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(r2,i2);xr[e]=new ii(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xr[n]=new ii(n,1,!1,n.toLowerCase(),null,!1,!1)});xr.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xr[n]=new ii(n,1,!1,n.toLowerCase(),null,!0,!0)});function s2(n,e,t,r){var i=xr.hasOwnProperty(e)?xr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SR(e,t,i,r)&&(t=null),r||i===null?AR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ha=pT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Am=Symbol.for("react.element"),th=Symbol.for("react.portal"),nh=Symbol.for("react.fragment"),o2=Symbol.for("react.strict_mode"),sy=Symbol.for("react.profiler"),gT=Symbol.for("react.provider"),vT=Symbol.for("react.context"),a2=Symbol.for("react.forward_ref"),oy=Symbol.for("react.suspense"),ay=Symbol.for("react.suspense_list"),l2=Symbol.for("react.memo"),Ja=Symbol.for("react.lazy"),yT=Symbol.for("react.offscreen"),wI=Symbol.iterator;function Vd(n){return n===null||typeof n!="object"?null:(n=wI&&n[wI]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,iv;function rf(n){if(iv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);iv=e&&e[1]||""}return`
`+iv+n}var sv=!1;function ov(n,e){if(!n||sv)return"";sv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{sv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?rf(n):""}function xR(n){switch(n.tag){case 5:return rf(n.type);case 16:return rf("Lazy");case 13:return rf("Suspense");case 19:return rf("SuspenseList");case 0:case 2:case 15:return n=ov(n.type,!1),n;case 11:return n=ov(n.type.render,!1),n;case 1:return n=ov(n.type,!0),n;default:return""}}function ly(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case nh:return"Fragment";case th:return"Portal";case sy:return"Profiler";case o2:return"StrictMode";case oy:return"Suspense";case ay:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case vT:return(n.displayName||"Context")+".Consumer";case gT:return(n._context.displayName||"Context")+".Provider";case a2:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case l2:return e=n.displayName||null,e!==null?e:ly(n.type)||"Memo";case Ja:e=n._payload,n=n._init;try{return ly(n(e))}catch{}}return null}function PR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ly(e);case 8:return e===o2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _T(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NR(n){var e=_T(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Tm(n){n._valueTracker||(n._valueTracker=NR(n))}function wT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=_T(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Lg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function uy(n,e){var t=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function II(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=bl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IT(n,e){e=e.checked,e!=null&&s2(n,"checked",e,!1)}function cy(n,e){IT(n,e);var t=bl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?hy(n,e.type,t):e.hasOwnProperty("defaultValue")&&hy(n,e.type,bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function bI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function hy(n,e,t){(e!=="number"||Lg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var sf=Array.isArray;function gh(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+bl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function dy(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function EI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Fe(92));if(sf(t)){if(1<t.length)throw Error(Fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:bl(t)}}function bT(n,e){var t=bl(e.value),r=bl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function AI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ET(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fy(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ET(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sm,AT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Sm=Sm||document.createElement("div"),Sm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Vf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kR=["Webkit","ms","Moz","O"];Object.keys(vf).forEach(function(n){kR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vf[e]=vf[n]})});function TT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vf.hasOwnProperty(n)&&vf[n]?(""+e).trim():e+"px"}function ST(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=TT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var RR=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function py(n,e){if(e){if(RR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function my(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gy=null;function u2(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vy=null,vh=null,yh=null;function TI(n){if(n=xp(n)){if(typeof vy!="function")throw Error(Fe(280));var e=n.stateNode;e&&(e=F0(e),vy(n.stateNode,n.type,e))}}function xT(n){vh?yh?yh.push(n):yh=[n]:vh=n}function PT(){if(vh){var n=vh,e=yh;if(yh=vh=null,TI(n),e)for(n=0;n<e.length;n++)TI(e[n])}}function NT(n,e){return n(e)}function kT(){}var av=!1;function RT(n,e,t){if(av)return n(e,t);av=!0;try{return NT(n,e,t)}finally{av=!1,(vh!==null||yh!==null)&&(kT(),PT())}}function jf(n,e){var t=n.stateNode;if(t===null)return null;var r=F0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Fe(231,e,typeof t));return t}var yy=!1;if(ea)try{var jd={};Object.defineProperty(jd,"passive",{get:function(){yy=!0}}),window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{yy=!1}function CR(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var yf=!1,Dg=null,Og=!1,_y=null,LR={onError:function(n){yf=!0,Dg=n}};function DR(n,e,t,r,i,s,o,a,l){yf=!1,Dg=null,CR.apply(LR,arguments)}function OR(n,e,t,r,i,s,o,a,l){if(DR.apply(this,arguments),yf){if(yf){var u=Dg;yf=!1,Dg=null}else throw Error(Fe(198));Og||(Og=!0,_y=u)}}function rc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function CT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function SI(n){if(rc(n)!==n)throw Error(Fe(188))}function FR(n){var e=n.alternate;if(!e){if(e=rc(n),e===null)throw Error(Fe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return SI(i),n;if(s===r)return SI(i),e;s=s.sibling}throw Error(Fe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(t.alternate!==r)throw Error(Fe(190))}if(t.tag!==3)throw Error(Fe(188));return t.stateNode.current===t?n:e}function LT(n){return n=FR(n),n!==null?DT(n):null}function DT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=DT(n);if(e!==null)return e;n=n.sibling}return null}var OT=Hi.unstable_scheduleCallback,xI=Hi.unstable_cancelCallback,MR=Hi.unstable_shouldYield,VR=Hi.unstable_requestPaint,zn=Hi.unstable_now,jR=Hi.unstable_getCurrentPriorityLevel,c2=Hi.unstable_ImmediatePriority,FT=Hi.unstable_UserBlockingPriority,Fg=Hi.unstable_NormalPriority,UR=Hi.unstable_LowPriority,MT=Hi.unstable_IdlePriority,C0=null,uo=null;function BR(n){if(uo&&typeof uo.onCommitFiberRoot=="function")try{uo.onCommitFiberRoot(C0,n,void 0,(n.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:$R,qR=Math.log,zR=Math.LN2;function $R(n){return n>>>=0,n===0?32:31-(qR(n)/zR|0)|0}var xm=64,Pm=4194304;function of(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Mg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=of(a):(s&=o,s!==0&&(r=of(s)))}else o=t&~i,o!==0?r=of(o):s!==0&&(r=of(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Us(e),i=1<<t,r|=n[t],e&=~i;return r}function WR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GR(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Us(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=WR(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function wy(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function VT(){var n=xm;return xm<<=1,!(xm&4194240)&&(xm=64),n}function lv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Tp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Us(e),n[e]=t}function HR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Us(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function h2(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Us(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Xt=0;function jT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var UT,d2,BT,qT,zT,Iy=!1,Nm=[],dl=null,fl=null,pl=null,Uf=new Map,Bf=new Map,Za=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PI(n,e){switch(n){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Uf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(e.pointerId)}}function Ud(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xp(e),e!==null&&d2(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function QR(n,e,t,r,i){switch(e){case"focusin":return dl=Ud(dl,n,e,t,r,i),!0;case"dragenter":return fl=Ud(fl,n,e,t,r,i),!0;case"mouseover":return pl=Ud(pl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Uf.set(s,Ud(Uf.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Bf.set(s,Ud(Bf.get(s)||null,n,e,t,r,i)),!0}return!1}function $T(n){var e=Eu(n.target);if(e!==null){var t=rc(e);if(t!==null){if(e=t.tag,e===13){if(e=CT(t),e!==null){n.blockedOn=e,zT(n.priority,function(){BT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=by(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);gy=r,t.target.dispatchEvent(r),gy=null}else return e=xp(t),e!==null&&d2(e),n.blockedOn=t,!1;e.shift()}return!0}function NI(n,e,t){tg(n)&&t.delete(e)}function JR(){Iy=!1,dl!==null&&tg(dl)&&(dl=null),fl!==null&&tg(fl)&&(fl=null),pl!==null&&tg(pl)&&(pl=null),Uf.forEach(NI),Bf.forEach(NI)}function Bd(n,e){n.blockedOn===e&&(n.blockedOn=null,Iy||(Iy=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,JR)))}function qf(n){function e(i){return Bd(i,n)}if(0<Nm.length){Bd(Nm[0],n);for(var t=1;t<Nm.length;t++){var r=Nm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(dl!==null&&Bd(dl,n),fl!==null&&Bd(fl,n),pl!==null&&Bd(pl,n),Uf.forEach(e),Bf.forEach(e),t=0;t<Za.length;t++)r=Za[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Za.length&&(t=Za[0],t.blockedOn===null);)$T(t),t.blockedOn===null&&Za.shift()}var _h=ha.ReactCurrentBatchConfig,Vg=!0;function YR(n,e,t,r){var i=Xt,s=_h.transition;_h.transition=null;try{Xt=1,f2(n,e,t,r)}finally{Xt=i,_h.transition=s}}function XR(n,e,t,r){var i=Xt,s=_h.transition;_h.transition=null;try{Xt=4,f2(n,e,t,r)}finally{Xt=i,_h.transition=s}}function f2(n,e,t,r){if(Vg){var i=by(n,e,t,r);if(i===null)yv(n,e,r,jg,t),PI(n,r);else if(QR(i,n,e,t,r))r.stopPropagation();else if(PI(n,r),e&4&&-1<KR.indexOf(n)){for(;i!==null;){var s=xp(i);if(s!==null&&UT(s),s=by(n,e,t,r),s===null&&yv(n,e,r,jg,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else yv(n,e,r,null,t)}}var jg=null;function by(n,e,t,r){if(jg=null,n=u2(r),n=Eu(n),n!==null)if(e=rc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=CT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return jg=n,null}function WT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jR()){case c2:return 1;case FT:return 4;case Fg:case UR:return 16;case MT:return 536870912;default:return 16}default:return 16}}var al=null,p2=null,ng=null;function GT(){if(ng)return ng;var n,e=p2,t=e.length,r,i="value"in al?al.value:al.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return ng=i.slice(n,1<r?1-r:void 0)}function rg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function km(){return!0}function kI(){return!1}function Ji(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?km:kI,this.isPropagationStopped=kI,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),e}var od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m2=Ji(od),Sp=Pn({},od,{view:0,detail:0}),ZR=Ji(Sp),uv,cv,qd,L0=Pn({},Sp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qd&&(qd&&n.type==="mousemove"?(uv=n.screenX-qd.screenX,cv=n.screenY-qd.screenY):cv=uv=0,qd=n),uv)},movementY:function(n){return"movementY"in n?n.movementY:cv}}),RI=Ji(L0),eC=Pn({},L0,{dataTransfer:0}),tC=Ji(eC),nC=Pn({},Sp,{relatedTarget:0}),hv=Ji(nC),rC=Pn({},od,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=Ji(rC),sC=Pn({},od,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oC=Ji(sC),aC=Pn({},od,{data:0}),CI=Ji(aC),lC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hC(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=cC[n])?!!e[n]:!1}function g2(){return hC}var dC=Pn({},Sp,{key:function(n){if(n.key){var e=lC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=rg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g2,charCode:function(n){return n.type==="keypress"?rg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?rg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fC=Ji(dC),pC=Pn({},L0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LI=Ji(pC),mC=Pn({},Sp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g2}),gC=Ji(mC),vC=Pn({},od,{propertyName:0,elapsedTime:0,pseudoElement:0}),yC=Ji(vC),_C=Pn({},L0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wC=Ji(_C),IC=[9,13,27,32],v2=ea&&"CompositionEvent"in window,_f=null;ea&&"documentMode"in document&&(_f=document.documentMode);var bC=ea&&"TextEvent"in window&&!_f,HT=ea&&(!v2||_f&&8<_f&&11>=_f),DI=String.fromCharCode(32),OI=!1;function KT(n,e){switch(n){case"keyup":return IC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var rh=!1;function EC(n,e){switch(n){case"compositionend":return QT(e);case"keypress":return e.which!==32?null:(OI=!0,DI);case"textInput":return n=e.data,n===DI&&OI?null:n;default:return null}}function AC(n,e){if(rh)return n==="compositionend"||!v2&&KT(n,e)?(n=GT(),ng=p2=al=null,rh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HT&&e.locale!=="ko"?null:e.data;default:return null}}var TC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!TC[n.type]:e==="textarea"}function JT(n,e,t,r){xT(r),e=Ug(e,"onChange"),0<e.length&&(t=new m2("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var wf=null,zf=null;function SC(n){aS(n,0)}function D0(n){var e=oh(n);if(wT(e))return n}function xC(n,e){if(n==="change")return e}var YT=!1;if(ea){var dv;if(ea){var fv="oninput"in document;if(!fv){var MI=document.createElement("div");MI.setAttribute("oninput","return;"),fv=typeof MI.oninput=="function"}dv=fv}else dv=!1;YT=dv&&(!document.documentMode||9<document.documentMode)}function VI(){wf&&(wf.detachEvent("onpropertychange",XT),zf=wf=null)}function XT(n){if(n.propertyName==="value"&&D0(zf)){var e=[];JT(e,zf,n,u2(n)),RT(SC,e)}}function PC(n,e,t){n==="focusin"?(VI(),wf=e,zf=t,wf.attachEvent("onpropertychange",XT)):n==="focusout"&&VI()}function NC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return D0(zf)}function kC(n,e){if(n==="click")return D0(e)}function RC(n,e){if(n==="input"||n==="change")return D0(e)}function CC(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qs=typeof Object.is=="function"?Object.is:CC;function $f(n,e){if(qs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!iy.call(e,i)||!qs(n[i],e[i]))return!1}return!0}function jI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function UI(n,e){var t=jI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=jI(t)}}function ZT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ZT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function eS(){for(var n=window,e=Lg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Lg(n.document)}return e}function y2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function LC(n){var e=eS(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ZT(t.ownerDocument.documentElement,t)){if(r!==null&&y2(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=UI(t,s);var o=UI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var DC=ea&&"documentMode"in document&&11>=document.documentMode,ih=null,Ey=null,If=null,Ay=!1;function BI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ay||ih==null||ih!==Lg(r)||(r=ih,"selectionStart"in r&&y2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),If&&$f(If,r)||(If=r,r=Ug(Ey,"onSelect"),0<r.length&&(e=new m2("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ih)))}function Rm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var sh={animationend:Rm("Animation","AnimationEnd"),animationiteration:Rm("Animation","AnimationIteration"),animationstart:Rm("Animation","AnimationStart"),transitionend:Rm("Transition","TransitionEnd")},pv={},tS={};ea&&(tS=document.createElement("div").style,"AnimationEvent"in window||(delete sh.animationend.animation,delete sh.animationiteration.animation,delete sh.animationstart.animation),"TransitionEvent"in window||delete sh.transitionend.transition);function O0(n){if(pv[n])return pv[n];if(!sh[n])return n;var e=sh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tS)return pv[n]=e[t];return n}var nS=O0("animationend"),rS=O0("animationiteration"),iS=O0("animationstart"),sS=O0("transitionend"),oS=new Map,qI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(n,e){oS.set(n,e),nc(e,[n])}for(var mv=0;mv<qI.length;mv++){var gv=qI[mv],OC=gv.toLowerCase(),FC=gv[0].toUpperCase()+gv.slice(1);Fl(OC,"on"+FC)}Fl(nS,"onAnimationEnd");Fl(rS,"onAnimationIteration");Fl(iS,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(sS,"onTransitionEnd");Lh("onMouseEnter",["mouseout","mouseover"]);Lh("onMouseLeave",["mouseout","mouseover"]);Lh("onPointerEnter",["pointerout","pointerover"]);Lh("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MC=new Set("cancel close invalid load scroll toggle".split(" ").concat(af));function zI(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,OR(r,e,void 0,n),n.currentTarget=null}function aS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zI(i,a,u),s=l}}}if(Og)throw n=_y,Og=!1,_y=null,n}function gn(n,e){var t=e[Ny];t===void 0&&(t=e[Ny]=new Set);var r=n+"__bubble";t.has(r)||(lS(e,n,2,!1),t.add(r))}function vv(n,e,t){var r=0;e&&(r|=4),lS(t,n,r,e)}var Cm="_reactListening"+Math.random().toString(36).slice(2);function Wf(n){if(!n[Cm]){n[Cm]=!0,mT.forEach(function(t){t!=="selectionchange"&&(MC.has(t)||vv(t,!1,n),vv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Cm]||(e[Cm]=!0,vv("selectionchange",!1,e))}}function lS(n,e,t,r){switch(WT(e)){case 1:var i=YR;break;case 4:i=XR;break;default:i=f2}t=i.bind(null,e,t,n),i=void 0,!yy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function yv(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Eu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RT(function(){var u=s,d=u2(t),p=[];e:{var v=oS.get(n);if(v!==void 0){var g=m2,P=n;switch(n){case"keypress":if(rg(t)===0)break e;case"keydown":case"keyup":g=fC;break;case"focusin":P="focus",g=hv;break;case"focusout":P="blur",g=hv;break;case"beforeblur":case"afterblur":g=hv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=RI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=tC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=gC;break;case nS:case rS:case iS:g=iC;break;case sS:g=yC;break;case"scroll":g=ZR;break;case"wheel":g=wC;break;case"copy":case"cut":case"paste":g=oC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=LI}var S=(e&4)!==0,C=!S&&n==="scroll",w=S?v!==null?v+"Capture":null:v;S=[];for(var b=u,R;b!==null;){R=b;var $=R.stateNode;if(R.tag===5&&$!==null&&(R=$,w!==null&&($=jf(b,w),$!=null&&S.push(Gf(b,$,R)))),C)break;b=b.return}0<S.length&&(v=new g(v,P,null,t,d),p.push({event:v,listeners:S}))}}if(!(e&7)){e:{if(v=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",v&&t!==gy&&(P=t.relatedTarget||t.fromElement)&&(Eu(P)||P[ta]))break e;if((g||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,g?(P=t.relatedTarget||t.toElement,g=u,P=P?Eu(P):null,P!==null&&(C=rc(P),P!==C||P.tag!==5&&P.tag!==6)&&(P=null)):(g=null,P=u),g!==P)){if(S=RI,$="onMouseLeave",w="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(S=LI,$="onPointerLeave",w="onPointerEnter",b="pointer"),C=g==null?v:oh(g),R=P==null?v:oh(P),v=new S($,b+"leave",g,t,d),v.target=C,v.relatedTarget=R,$=null,Eu(d)===u&&(S=new S(w,b+"enter",P,t,d),S.target=R,S.relatedTarget=C,$=S),C=$,g&&P)t:{for(S=g,w=P,b=0,R=S;R;R=Fc(R))b++;for(R=0,$=w;$;$=Fc($))R++;for(;0<b-R;)S=Fc(S),b--;for(;0<R-b;)w=Fc(w),R--;for(;b--;){if(S===w||w!==null&&S===w.alternate)break t;S=Fc(S),w=Fc(w)}S=null}else S=null;g!==null&&$I(p,v,g,S,!1),P!==null&&C!==null&&$I(p,C,P,S,!0)}}e:{if(v=u?oh(u):window,g=v.nodeName&&v.nodeName.toLowerCase(),g==="select"||g==="input"&&v.type==="file")var W=xC;else if(FI(v))if(YT)W=RC;else{W=NC;var Q=PC}else(g=v.nodeName)&&g.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(W=kC);if(W&&(W=W(n,u))){JT(p,W,t,d);break e}Q&&Q(n,v,u),n==="focusout"&&(Q=v._wrapperState)&&Q.controlled&&v.type==="number"&&hy(v,"number",v.value)}switch(Q=u?oh(u):window,n){case"focusin":(FI(Q)||Q.contentEditable==="true")&&(ih=Q,Ey=u,If=null);break;case"focusout":If=Ey=ih=null;break;case"mousedown":Ay=!0;break;case"contextmenu":case"mouseup":case"dragend":Ay=!1,BI(p,t,d);break;case"selectionchange":if(DC)break;case"keydown":case"keyup":BI(p,t,d)}var k;if(v2)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else rh?KT(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(HT&&t.locale!=="ko"&&(rh||E!=="onCompositionStart"?E==="onCompositionEnd"&&rh&&(k=GT()):(al=d,p2="value"in al?al.value:al.textContent,rh=!0)),Q=Ug(u,E),0<Q.length&&(E=new CI(E,n,null,t,d),p.push({event:E,listeners:Q}),k?E.data=k:(k=QT(t),k!==null&&(E.data=k)))),(k=bC?EC(n,t):AC(n,t))&&(u=Ug(u,"onBeforeInput"),0<u.length&&(d=new CI("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:u}),d.data=k))}aS(p,e)})}function Gf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ug(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jf(n,t),s!=null&&r.unshift(Gf(n,s,i)),s=jf(n,e),s!=null&&r.push(Gf(n,s,i))),n=n.return}return r}function Fc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $I(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=jf(t,s),l!=null&&o.unshift(Gf(t,l,a))):i||(l=jf(t,s),l!=null&&o.push(Gf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var VC=/\r\n?/g,jC=/\u0000|\uFFFD/g;function WI(n){return(typeof n=="string"?n:""+n).replace(VC,`
`).replace(jC,"")}function Lm(n,e,t){if(e=WI(e),WI(n)!==e&&t)throw Error(Fe(425))}function Bg(){}var Ty=null,Sy=null;function xy(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Py=typeof setTimeout=="function"?setTimeout:void 0,UC=typeof clearTimeout=="function"?clearTimeout:void 0,GI=typeof Promise=="function"?Promise:void 0,BC=typeof queueMicrotask=="function"?queueMicrotask:typeof GI<"u"?function(n){return GI.resolve(null).then(n).catch(qC)}:Py;function qC(n){setTimeout(function(){throw n})}function _v(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),qf(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);qf(e)}function ml(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function HI(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ad=Math.random().toString(36).slice(2),io="__reactFiber$"+ad,Hf="__reactProps$"+ad,ta="__reactContainer$"+ad,Ny="__reactEvents$"+ad,zC="__reactListeners$"+ad,$C="__reactHandles$"+ad;function Eu(n){var e=n[io];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ta]||t[io]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=HI(n);n!==null;){if(t=n[io])return t;n=HI(n)}return e}n=t,t=n.parentNode}return null}function xp(n){return n=n[io]||n[ta],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Fe(33))}function F0(n){return n[Hf]||null}var ky=[],ah=-1;function Ml(n){return{current:n}}function _n(n){0>ah||(n.current=ky[ah],ky[ah]=null,ah--)}function hn(n,e){ah++,ky[ah]=n.current,n.current=e}var El={},Br=Ml(El),Ei=Ml(!1),Mu=El;function Dh(n,e){var t=n.type.contextTypes;if(!t)return El;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ai(n){return n=n.childContextTypes,n!=null}function qg(){_n(Ei),_n(Br)}function KI(n,e,t){if(Br.current!==El)throw Error(Fe(168));hn(Br,e),hn(Ei,t)}function uS(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,PR(n)||"Unknown",i));return Pn({},t,r)}function zg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||El,Mu=Br.current,hn(Br,n),hn(Ei,Ei.current),!0}function QI(n,e,t){var r=n.stateNode;if(!r)throw Error(Fe(169));t?(n=uS(n,e,Mu),r.__reactInternalMemoizedMergedChildContext=n,_n(Ei),_n(Br),hn(Br,n)):_n(Ei),hn(Ei,t)}var Wo=null,M0=!1,wv=!1;function cS(n){Wo===null?Wo=[n]:Wo.push(n)}function WC(n){M0=!0,cS(n)}function Vl(){if(!wv&&Wo!==null){wv=!0;var n=0,e=Xt;try{var t=Wo;for(Xt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Wo=null,M0=!1}catch(i){throw Wo!==null&&(Wo=Wo.slice(n+1)),OT(c2,Vl),i}finally{Xt=e,wv=!1}}return null}var lh=[],uh=0,$g=null,Wg=0,ds=[],fs=0,Vu=null,Go=1,Ho="";function du(n,e){lh[uh++]=Wg,lh[uh++]=$g,$g=n,Wg=e}function hS(n,e,t){ds[fs++]=Go,ds[fs++]=Ho,ds[fs++]=Vu,Vu=n;var r=Go;n=Ho;var i=32-Us(r)-1;r&=~(1<<i),t+=1;var s=32-Us(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Go=1<<32-Us(e)+i|t<<i|r,Ho=s+n}else Go=1<<s|t<<i|r,Ho=n}function _2(n){n.return!==null&&(du(n,1),hS(n,1,0))}function w2(n){for(;n===$g;)$g=lh[--uh],lh[uh]=null,Wg=lh[--uh],lh[uh]=null;for(;n===Vu;)Vu=ds[--fs],ds[fs]=null,Ho=ds[--fs],ds[fs]=null,Go=ds[--fs],ds[fs]=null}var Wi=null,qi=null,In=!1,js=null;function dS(n,e){var t=ps(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function JI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Wi=n,qi=ml(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Wi=n,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vu!==null?{id:Go,overflow:Ho}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ps(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Wi=n,qi=null,!0):!1;default:return!1}}function Ry(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Cy(n){if(In){var e=qi;if(e){var t=e;if(!JI(n,e)){if(Ry(n))throw Error(Fe(418));e=ml(t.nextSibling);var r=Wi;e&&JI(n,e)?dS(r,t):(n.flags=n.flags&-4097|2,In=!1,Wi=n)}}else{if(Ry(n))throw Error(Fe(418));n.flags=n.flags&-4097|2,In=!1,Wi=n}}}function YI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Wi=n}function Dm(n){if(n!==Wi)return!1;if(!In)return YI(n),In=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!xy(n.type,n.memoizedProps)),e&&(e=qi)){if(Ry(n))throw fS(),Error(Fe(418));for(;e;)dS(n,e),e=ml(e.nextSibling)}if(YI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Fe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){qi=ml(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}qi=null}}else qi=Wi?ml(n.stateNode.nextSibling):null;return!0}function fS(){for(var n=qi;n;)n=ml(n.nextSibling)}function Oh(){qi=Wi=null,In=!1}function I2(n){js===null?js=[n]:js.push(n)}var GC=ha.ReactCurrentBatchConfig;function Fs(n,e){if(n&&n.defaultProps){e=Pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Gg=Ml(null),Hg=null,ch=null,b2=null;function E2(){b2=ch=Hg=null}function A2(n){var e=Gg.current;_n(Gg),n._currentValue=e}function Ly(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function wh(n,e){Hg=n,b2=ch=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_i=!0),n.firstContext=null)}function ys(n){var e=n._currentValue;if(b2!==n)if(n={context:n,memoizedValue:e,next:null},ch===null){if(Hg===null)throw Error(Fe(308));ch=n,Hg.dependencies={lanes:0,firstContext:n}}else ch=ch.next=n;return e}var Au=null;function T2(n){Au===null?Au=[n]:Au.push(n)}function pS(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,T2(e)):(t.next=i.next,i.next=t),e.interleaved=t,na(n,r)}function na(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ya=!1;function S2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Xo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function gl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,na(n,t)}return i=r.interleaved,i===null?(e.next=e,T2(r)):(e.next=i.next,i.next=e),r.interleaved=e,na(n,t)}function ig(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,h2(n,t)}}function XI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Kg(n,e,t,r){var i=n.updateQueue;Ya=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=u=l=null,a=s;do{var v=a.lane,g=a.eventTime;if((r&v)===v){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var P=n,S=a;switch(v=e,g=t,S.tag){case 1:if(P=S.payload,typeof P=="function"){p=P.call(g,p,v);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=S.payload,v=typeof P=="function"?P.call(g,p,v):P,v==null)break e;p=Pn({},p,v);break e;case 2:Ya=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else g={eventTime:g,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=p):d=d.next=g,o|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(1);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Uu|=o,n.lanes=o,n.memoizedState=p}}function ZI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var gS=new pT.Component().refs;function Dy(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var V0={isMounted:function(n){return(n=n._reactInternals)?rc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Zr(),i=yl(n),s=Xo(r,i);s.payload=e,t!=null&&(s.callback=t),e=gl(n,s,i),e!==null&&(Bs(e,n,i,r),ig(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Zr(),i=yl(n),s=Xo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=gl(n,s,i),e!==null&&(Bs(e,n,i,r),ig(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Zr(),r=yl(n),i=Xo(t,r);i.tag=2,e!=null&&(i.callback=e),e=gl(n,i,r),e!==null&&(Bs(e,n,r,t),ig(e,n,r))}};function eb(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$f(t,r)||!$f(i,s):!0}function vS(n,e,t){var r=!1,i=El,s=e.contextType;return typeof s=="object"&&s!==null?s=ys(s):(i=Ai(e)?Mu:Br.current,r=e.contextTypes,s=(r=r!=null)?Dh(n,i):El),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=V0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function tb(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&V0.enqueueReplaceState(e,e.state,null)}function Oy(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=gS,S2(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ys(s):(s=Ai(e)?Mu:Br.current,i.context=Dh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dy(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&V0.enqueueReplaceState(i,i.state,null),Kg(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function zd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Fe(309));var r=t.stateNode}if(!r)throw Error(Fe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===gS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Fe(284));if(!t._owner)throw Error(Fe(290,n))}return n}function Om(n,e){throw n=Object.prototype.toString.call(e),Error(Fe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nb(n){var e=n._init;return e(n._payload)}function yS(n){function e(w,b){if(n){var R=w.deletions;R===null?(w.deletions=[b],w.flags|=16):R.push(b)}}function t(w,b){if(!n)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=_l(w,b),w.index=0,w.sibling=null,w}function s(w,b,R){return w.index=R,n?(R=w.alternate,R!==null?(R=R.index,R<b?(w.flags|=2,b):R):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,b,R,$){return b===null||b.tag!==6?(b=xv(R,w.mode,$),b.return=w,b):(b=i(b,R),b.return=w,b)}function l(w,b,R,$){var W=R.type;return W===nh?d(w,b,R.props.children,$,R.key):b!==null&&(b.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ja&&nb(W)===b.type)?($=i(b,R.props),$.ref=zd(w,b,R),$.return=w,$):($=cg(R.type,R.key,R.props,null,w.mode,$),$.ref=zd(w,b,R),$.return=w,$)}function u(w,b,R,$){return b===null||b.tag!==4||b.stateNode.containerInfo!==R.containerInfo||b.stateNode.implementation!==R.implementation?(b=Pv(R,w.mode,$),b.return=w,b):(b=i(b,R.children||[]),b.return=w,b)}function d(w,b,R,$,W){return b===null||b.tag!==7?(b=ku(R,w.mode,$,W),b.return=w,b):(b=i(b,R),b.return=w,b)}function p(w,b,R){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xv(""+b,w.mode,R),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Am:return R=cg(b.type,b.key,b.props,null,w.mode,R),R.ref=zd(w,null,b),R.return=w,R;case th:return b=Pv(b,w.mode,R),b.return=w,b;case Ja:var $=b._init;return p(w,$(b._payload),R)}if(sf(b)||Vd(b))return b=ku(b,w.mode,R,null),b.return=w,b;Om(w,b)}return null}function v(w,b,R,$){var W=b!==null?b.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return W!==null?null:a(w,b,""+R,$);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Am:return R.key===W?l(w,b,R,$):null;case th:return R.key===W?u(w,b,R,$):null;case Ja:return W=R._init,v(w,b,W(R._payload),$)}if(sf(R)||Vd(R))return W!==null?null:d(w,b,R,$,null);Om(w,R)}return null}function g(w,b,R,$,W){if(typeof $=="string"&&$!==""||typeof $=="number")return w=w.get(R)||null,a(b,w,""+$,W);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Am:return w=w.get($.key===null?R:$.key)||null,l(b,w,$,W);case th:return w=w.get($.key===null?R:$.key)||null,u(b,w,$,W);case Ja:var Q=$._init;return g(w,b,R,Q($._payload),W)}if(sf($)||Vd($))return w=w.get(R)||null,d(b,w,$,W,null);Om(b,$)}return null}function P(w,b,R,$){for(var W=null,Q=null,k=b,E=b=0,O=null;k!==null&&E<R.length;E++){k.index>E?(O=k,k=null):O=k.sibling;var U=v(w,k,R[E],$);if(U===null){k===null&&(k=O);break}n&&k&&U.alternate===null&&e(w,k),b=s(U,b,E),Q===null?W=U:Q.sibling=U,Q=U,k=O}if(E===R.length)return t(w,k),In&&du(w,E),W;if(k===null){for(;E<R.length;E++)k=p(w,R[E],$),k!==null&&(b=s(k,b,E),Q===null?W=k:Q.sibling=k,Q=k);return In&&du(w,E),W}for(k=r(w,k);E<R.length;E++)O=g(k,w,E,R[E],$),O!==null&&(n&&O.alternate!==null&&k.delete(O.key===null?E:O.key),b=s(O,b,E),Q===null?W=O:Q.sibling=O,Q=O);return n&&k.forEach(function(T){return e(w,T)}),In&&du(w,E),W}function S(w,b,R,$){var W=Vd(R);if(typeof W!="function")throw Error(Fe(150));if(R=W.call(R),R==null)throw Error(Fe(151));for(var Q=W=null,k=b,E=b=0,O=null,U=R.next();k!==null&&!U.done;E++,U=R.next()){k.index>E?(O=k,k=null):O=k.sibling;var T=v(w,k,U.value,$);if(T===null){k===null&&(k=O);break}n&&k&&T.alternate===null&&e(w,k),b=s(T,b,E),Q===null?W=T:Q.sibling=T,Q=T,k=O}if(U.done)return t(w,k),In&&du(w,E),W;if(k===null){for(;!U.done;E++,U=R.next())U=p(w,U.value,$),U!==null&&(b=s(U,b,E),Q===null?W=U:Q.sibling=U,Q=U);return In&&du(w,E),W}for(k=r(w,k);!U.done;E++,U=R.next())U=g(k,w,E,U.value,$),U!==null&&(n&&U.alternate!==null&&k.delete(U.key===null?E:U.key),b=s(U,b,E),Q===null?W=U:Q.sibling=U,Q=U);return n&&k.forEach(function(x){return e(w,x)}),In&&du(w,E),W}function C(w,b,R,$){if(typeof R=="object"&&R!==null&&R.type===nh&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Am:e:{for(var W=R.key,Q=b;Q!==null;){if(Q.key===W){if(W=R.type,W===nh){if(Q.tag===7){t(w,Q.sibling),b=i(Q,R.props.children),b.return=w,w=b;break e}}else if(Q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ja&&nb(W)===Q.type){t(w,Q.sibling),b=i(Q,R.props),b.ref=zd(w,Q,R),b.return=w,w=b;break e}t(w,Q);break}else e(w,Q);Q=Q.sibling}R.type===nh?(b=ku(R.props.children,w.mode,$,R.key),b.return=w,w=b):($=cg(R.type,R.key,R.props,null,w.mode,$),$.ref=zd(w,b,R),$.return=w,w=$)}return o(w);case th:e:{for(Q=R.key;b!==null;){if(b.key===Q)if(b.tag===4&&b.stateNode.containerInfo===R.containerInfo&&b.stateNode.implementation===R.implementation){t(w,b.sibling),b=i(b,R.children||[]),b.return=w,w=b;break e}else{t(w,b);break}else e(w,b);b=b.sibling}b=Pv(R,w.mode,$),b.return=w,w=b}return o(w);case Ja:return Q=R._init,C(w,b,Q(R._payload),$)}if(sf(R))return P(w,b,R,$);if(Vd(R))return S(w,b,R,$);Om(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,b!==null&&b.tag===6?(t(w,b.sibling),b=i(b,R),b.return=w,w=b):(t(w,b),b=xv(R,w.mode,$),b.return=w,w=b),o(w)):t(w,b)}return C}var Fh=yS(!0),_S=yS(!1),Pp={},co=Ml(Pp),Kf=Ml(Pp),Qf=Ml(Pp);function Tu(n){if(n===Pp)throw Error(Fe(174));return n}function x2(n,e){switch(hn(Qf,e),hn(Kf,n),hn(co,Pp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fy(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fy(e,n)}_n(co),hn(co,e)}function Mh(){_n(co),_n(Kf),_n(Qf)}function wS(n){Tu(Qf.current);var e=Tu(co.current),t=fy(e,n.type);e!==t&&(hn(Kf,n),hn(co,t))}function P2(n){Kf.current===n&&(_n(co),_n(Kf))}var Tn=Ml(0);function Qg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iv=[];function N2(){for(var n=0;n<Iv.length;n++)Iv[n]._workInProgressVersionPrimary=null;Iv.length=0}var sg=ha.ReactCurrentDispatcher,bv=ha.ReactCurrentBatchConfig,ju=0,Sn=null,ir=null,dr=null,Jg=!1,bf=!1,Jf=0,HC=0;function Cr(){throw Error(Fe(321))}function k2(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!qs(n[t],e[t]))return!1;return!0}function R2(n,e,t,r,i,s){if(ju=s,Sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sg.current=n===null||n.memoizedState===null?YC:XC,n=t(r,i),bf){s=0;do{if(bf=!1,Jf=0,25<=s)throw Error(Fe(301));s+=1,dr=ir=null,e.updateQueue=null,sg.current=ZC,n=t(r,i)}while(bf)}if(sg.current=Yg,e=ir!==null&&ir.next!==null,ju=0,dr=ir=Sn=null,Jg=!1,e)throw Error(Fe(300));return n}function C2(){var n=Jf!==0;return Jf=0,n}function ro(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Sn.memoizedState=dr=n:dr=dr.next=n,dr}function _s(){if(ir===null){var n=Sn.alternate;n=n!==null?n.memoizedState:null}else n=ir.next;var e=dr===null?Sn.memoizedState:dr.next;if(e!==null)dr=e,ir=n;else{if(n===null)throw Error(Fe(310));ir=n,n={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},dr===null?Sn.memoizedState=dr=n:dr=dr.next=n}return dr}function Yf(n,e){return typeof e=="function"?e(n):e}function Ev(n){var e=_s(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=ir,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((ju&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Sn.lanes|=d,Uu|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,qs(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Sn.lanes|=s,Uu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Av(n){var e=_s(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);qs(s,e.memoizedState)||(_i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function IS(){}function bS(n,e){var t=Sn,r=_s(),i=e(),s=!qs(r.memoizedState,i);if(s&&(r.memoizedState=i,_i=!0),r=r.queue,L2(TS.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||dr!==null&&dr.memoizedState.tag&1){if(t.flags|=2048,Xf(9,AS.bind(null,t,r,i,e),void 0,null),mr===null)throw Error(Fe(349));ju&30||ES(t,e,i)}return i}function ES(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function AS(n,e,t,r){e.value=t,e.getSnapshot=r,SS(e)&&xS(n)}function TS(n,e,t){return t(function(){SS(e)&&xS(n)})}function SS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qs(n,t)}catch{return!0}}function xS(n){var e=na(n,1);e!==null&&Bs(e,n,1,-1)}function rb(n){var e=ro();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:n},e.queue=n,n=n.dispatch=JC.bind(null,Sn,n),[e.memoizedState,n]}function Xf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function PS(){return _s().memoizedState}function og(n,e,t,r){var i=ro();Sn.flags|=n,i.memoizedState=Xf(1|e,t,void 0,r===void 0?null:r)}function j0(n,e,t,r){var i=_s();r=r===void 0?null:r;var s=void 0;if(ir!==null){var o=ir.memoizedState;if(s=o.destroy,r!==null&&k2(r,o.deps)){i.memoizedState=Xf(e,t,s,r);return}}Sn.flags|=n,i.memoizedState=Xf(1|e,t,s,r)}function ib(n,e){return og(8390656,8,n,e)}function L2(n,e){return j0(2048,8,n,e)}function NS(n,e){return j0(4,2,n,e)}function kS(n,e){return j0(4,4,n,e)}function RS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function CS(n,e,t){return t=t!=null?t.concat([n]):null,j0(4,4,RS.bind(null,e,n),t)}function D2(){}function LS(n,e){var t=_s();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&k2(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function DS(n,e){var t=_s();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&k2(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function OS(n,e,t){return ju&21?(qs(t,e)||(t=VT(),Sn.lanes|=t,Uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_i=!0),n.memoizedState=t)}function KC(n,e){var t=Xt;Xt=t!==0&&4>t?t:4,n(!0);var r=bv.transition;bv.transition={};try{n(!1),e()}finally{Xt=t,bv.transition=r}}function FS(){return _s().memoizedState}function QC(n,e,t){var r=yl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},MS(n))VS(e,t);else if(t=pS(n,e,t,r),t!==null){var i=Zr();Bs(t,n,r,i),jS(t,e,r)}}function JC(n,e,t){var r=yl(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(MS(n))VS(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,qs(a,o)){var l=e.interleaved;l===null?(i.next=i,T2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=pS(n,e,i,r),t!==null&&(i=Zr(),Bs(t,n,r,i),jS(t,e,r))}}function MS(n){var e=n.alternate;return n===Sn||e!==null&&e===Sn}function VS(n,e){bf=Jg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function jS(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,h2(n,t)}}var Yg={readContext:ys,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},YC={readContext:ys,useCallback:function(n,e){return ro().memoizedState=[n,e===void 0?null:e],n},useContext:ys,useEffect:ib,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,og(4194308,4,RS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return og(4194308,4,n,e)},useInsertionEffect:function(n,e){return og(4,2,n,e)},useMemo:function(n,e){var t=ro();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ro();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=QC.bind(null,Sn,n),[r.memoizedState,n]},useRef:function(n){var e=ro();return n={current:n},e.memoizedState=n},useState:rb,useDebugValue:D2,useDeferredValue:function(n){return ro().memoizedState=n},useTransition:function(){var n=rb(!1),e=n[0];return n=KC.bind(null,n[1]),ro().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Sn,i=ro();if(In){if(t===void 0)throw Error(Fe(407));t=t()}else{if(t=e(),mr===null)throw Error(Fe(349));ju&30||ES(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,ib(TS.bind(null,r,s,n),[n]),r.flags|=2048,Xf(9,AS.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=ro(),e=mr.identifierPrefix;if(In){var t=Ho,r=Go;t=(r&~(1<<32-Us(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=HC++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},XC={readContext:ys,useCallback:LS,useContext:ys,useEffect:L2,useImperativeHandle:CS,useInsertionEffect:NS,useLayoutEffect:kS,useMemo:DS,useReducer:Ev,useRef:PS,useState:function(){return Ev(Yf)},useDebugValue:D2,useDeferredValue:function(n){var e=_s();return OS(e,ir.memoizedState,n)},useTransition:function(){var n=Ev(Yf)[0],e=_s().memoizedState;return[n,e]},useMutableSource:IS,useSyncExternalStore:bS,useId:FS,unstable_isNewReconciler:!1},ZC={readContext:ys,useCallback:LS,useContext:ys,useEffect:L2,useImperativeHandle:CS,useInsertionEffect:NS,useLayoutEffect:kS,useMemo:DS,useReducer:Av,useRef:PS,useState:function(){return Av(Yf)},useDebugValue:D2,useDeferredValue:function(n){var e=_s();return ir===null?e.memoizedState=n:OS(e,ir.memoizedState,n)},useTransition:function(){var n=Av(Yf)[0],e=_s().memoizedState;return[n,e]},useMutableSource:IS,useSyncExternalStore:bS,useId:FS,unstable_isNewReconciler:!1};function Vh(n,e){try{var t="",r=e;do t+=xR(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Tv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Fy(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var eL=typeof WeakMap=="function"?WeakMap:Map;function US(n,e,t){t=Xo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Zg||(Zg=!0,Gy=r),Fy(n,e)},t}function BS(n,e,t){t=Xo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Fy(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Fy(n,e),typeof r!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function sb(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new eL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=pL.bind(null,n,e,t),e.then(n,n))}function ob(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ab(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Xo(-1,1),e.tag=2,gl(t,e,1))),t.lanes|=1),n)}var tL=ha.ReactCurrentOwner,_i=!1;function Jr(n,e,t,r){e.child=n===null?_S(e,null,t,r):Fh(e,n.child,t,r)}function lb(n,e,t,r,i){t=t.render;var s=e.ref;return wh(e,i),r=R2(n,e,t,r,s,i),t=C2(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ra(n,e,i)):(In&&t&&_2(e),e.flags|=1,Jr(n,e,r,i),e.child)}function ub(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!q2(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,qS(n,e,s,r,i)):(n=cg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:$f,t(o,r)&&n.ref===e.ref)return ra(n,e,i)}return e.flags|=1,n=_l(s,r),n.ref=e.ref,n.return=e,e.child=n}function qS(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if($f(s,r)&&n.ref===e.ref)if(_i=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_i=!0);else return e.lanes=n.lanes,ra(n,e,i)}return My(n,e,t,r,i)}function zS(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(dh,Ui),Ui|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,hn(dh,Ui),Ui|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,hn(dh,Ui),Ui|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,hn(dh,Ui),Ui|=r;return Jr(n,e,i,t),e.child}function $S(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function My(n,e,t,r,i){var s=Ai(t)?Mu:Br.current;return s=Dh(e,s),wh(e,i),t=R2(n,e,t,r,s,i),r=C2(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ra(n,e,i)):(In&&r&&_2(e),e.flags|=1,Jr(n,e,t,i),e.child)}function cb(n,e,t,r,i){if(Ai(t)){var s=!0;zg(e)}else s=!1;if(wh(e,i),e.stateNode===null)ag(n,e),vS(e,t,r),Oy(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ys(u):(u=Ai(t)?Mu:Br.current,u=Dh(e,u));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&tb(e,o,r,u),Ya=!1;var v=e.memoizedState;o.state=v,Kg(e,r,o,i),l=e.memoizedState,a!==r||v!==l||Ei.current||Ya?(typeof d=="function"&&(Dy(e,t,d,r),l=e.memoizedState),(a=Ya||eb(e,t,a,r,v,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mS(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Fs(e.type,a),o.props=u,p=e.pendingProps,v=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Ai(t)?Mu:Br.current,l=Dh(e,l));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||v!==l)&&tb(e,o,r,l),Ya=!1,v=e.memoizedState,o.state=v,Kg(e,r,o,i);var P=e.memoizedState;a!==p||v!==P||Ei.current||Ya?(typeof g=="function"&&(Dy(e,t,g,r),P=e.memoizedState),(u=Ya||eb(e,t,u,r,v,P,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),r=!1)}return Vy(n,e,t,r,s,i)}function Vy(n,e,t,r,i,s){$S(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&QI(e,t,!1),ra(n,e,s);r=e.stateNode,tL.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Fh(e,n.child,null,s),e.child=Fh(e,null,a,s)):Jr(n,e,a,s),e.memoizedState=r.state,i&&QI(e,t,!0),e.child}function WS(n){var e=n.stateNode;e.pendingContext?KI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&KI(n,e.context,!1),x2(n,e.containerInfo)}function hb(n,e,t,r,i){return Oh(),I2(i),e.flags|=256,Jr(n,e,t,r),e.child}var jy={dehydrated:null,treeContext:null,retryLane:0};function Uy(n){return{baseLanes:n,cachePool:null,transitions:null}}function GS(n,e,t){var r=e.pendingProps,i=Tn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),hn(Tn,i&1),n===null)return Cy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=q0(o,r,0,null),n=ku(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Uy(t),e.memoizedState=jy,n):O2(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nL(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_l(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_l(a,s):(s=ku(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Uy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=jy,r}return s=n.child,n=s.sibling,r=_l(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function O2(n,e){return e=q0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Fm(n,e,t,r){return r!==null&&I2(r),Fh(e,n.child,null,t),n=O2(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function nL(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Tv(Error(Fe(422))),Fm(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=q0({mode:"visible",children:r.children},i,0,null),s=ku(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fh(e,n.child,null,o),e.child.memoizedState=Uy(o),e.memoizedState=jy,s);if(!(e.mode&1))return Fm(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=Tv(s,r,void 0),Fm(n,e,o,r)}if(a=(o&n.childLanes)!==0,_i||a){if(r=mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,na(n,i),Bs(r,n,i,-1))}return B2(),r=Tv(Error(Fe(421))),Fm(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=mL.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,qi=ml(i.nextSibling),Wi=e,In=!0,js=null,n!==null&&(ds[fs++]=Go,ds[fs++]=Ho,ds[fs++]=Vu,Go=n.id,Ho=n.overflow,Vu=e),e=O2(e,r.children),e.flags|=4096,e)}function db(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Ly(n.return,e,t)}function Sv(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function HS(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jr(n,e,r.children,t),r=Tn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&db(n,t,e);else if(n.tag===19)db(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(hn(Tn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Qg(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Sv(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Qg(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Sv(e,!0,t,null,s);break;case"together":Sv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ag(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ra(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Fe(153));if(e.child!==null){for(n=e.child,t=_l(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_l(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function rL(n,e,t){switch(e.tag){case 3:WS(e),Oh();break;case 5:wS(e);break;case 1:Ai(e.type)&&zg(e);break;case 4:x2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;hn(Gg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(hn(Tn,Tn.current&1),e.flags|=128,null):t&e.child.childLanes?GS(n,e,t):(hn(Tn,Tn.current&1),n=ra(n,e,t),n!==null?n.sibling:null);hn(Tn,Tn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return HS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),hn(Tn,Tn.current),r)break;return null;case 22:case 23:return e.lanes=0,zS(n,e,t)}return ra(n,e,t)}var KS,By,QS,JS;KS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};By=function(){};QS=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Tu(co.current);var s=null;switch(t){case"input":i=uy(n,i),r=uy(n,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=dy(n,i),r=dy(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Bg)}py(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};JS=function(n,e,t,r){t!==r&&(e.flags|=4)};function $d(n,e){if(!In)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Lr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function iL(n,e,t){var r=e.pendingProps;switch(w2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return Ai(e.type)&&qg(),Lr(e),null;case 3:return r=e.stateNode,Mh(),_n(Ei),_n(Br),N2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Dm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,js!==null&&(Qy(js),js=null))),By(n,e),Lr(e),null;case 5:P2(e);var i=Tu(Qf.current);if(t=e.type,n!==null&&e.stateNode!=null)QS(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Lr(e),null}if(n=Tu(co.current),Dm(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[io]=e,r[Hf]=s,n=(e.mode&1)!==0,t){case"dialog":gn("cancel",r),gn("close",r);break;case"iframe":case"object":case"embed":gn("load",r);break;case"video":case"audio":for(i=0;i<af.length;i++)gn(af[i],r);break;case"source":gn("error",r);break;case"img":case"image":case"link":gn("error",r),gn("load",r);break;case"details":gn("toggle",r);break;case"input":II(r,s),gn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gn("invalid",r);break;case"textarea":EI(r,s),gn("invalid",r)}py(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lm(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lm(r.textContent,a,n),i=["children",""+a]):Mf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gn("scroll",r)}switch(t){case"input":Tm(r),bI(r,s,!0);break;case"textarea":Tm(r),AI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ET(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[io]=e,n[Hf]=r,KS(n,e,!1,!1),e.stateNode=n;e:{switch(o=my(t,r),t){case"dialog":gn("cancel",n),gn("close",n),i=r;break;case"iframe":case"object":case"embed":gn("load",n),i=r;break;case"video":case"audio":for(i=0;i<af.length;i++)gn(af[i],n);i=r;break;case"source":gn("error",n),i=r;break;case"img":case"image":case"link":gn("error",n),gn("load",n),i=r;break;case"details":gn("toggle",n),i=r;break;case"input":II(n,r),i=uy(n,r),gn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),gn("invalid",n);break;case"textarea":EI(n,r),i=dy(n,r),gn("invalid",n);break;default:i=r}py(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ST(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AT(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Vf(n,l):typeof l=="number"&&Vf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",n):l!=null&&s2(n,s,l,o))}switch(t){case"input":Tm(n),bI(n,r,!1);break;case"textarea":Tm(n),AI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+bl(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?gh(n,!!r.multiple,s,!1):r.defaultValue!=null&&gh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Bg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(n&&e.stateNode!=null)JS(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(t=Tu(Qf.current),Tu(co.current),Dm(e)){if(r=e.stateNode,t=e.memoizedProps,r[io]=e,(s=r.nodeValue!==t)&&(n=Wi,n!==null))switch(n.tag){case 3:Lm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Lm(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[io]=e,e.stateNode=r}return Lr(e),null;case 13:if(_n(Tn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(In&&qi!==null&&e.mode&1&&!(e.flags&128))fS(),Oh(),e.flags|=98560,s=!1;else if(s=Dm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[io]=e}else Oh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else js!==null&&(Qy(js),js=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Tn.current&1?sr===0&&(sr=3):B2())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return Mh(),By(n,e),n===null&&Wf(e.stateNode.containerInfo),Lr(e),null;case 10:return A2(e.type._context),Lr(e),null;case 17:return Ai(e.type)&&qg(),Lr(e),null;case 19:if(_n(Tn),s=e.memoizedState,s===null)return Lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$d(s,!1);else{if(sr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Qg(n),o!==null){for(e.flags|=128,$d(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return hn(Tn,Tn.current&1|2),e.child}n=n.sibling}s.tail!==null&&zn()>jh&&(e.flags|=128,r=!0,$d(s,!1),e.lanes=4194304)}else{if(!r)if(n=Qg(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),$d(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!In)return Lr(e),null}else 2*zn()-s.renderingStartTime>jh&&t!==1073741824&&(e.flags|=128,r=!0,$d(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zn(),e.sibling=null,t=Tn.current,hn(Tn,r?t&1|2:t&1),e):(Lr(e),null);case 22:case 23:return U2(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ui&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function sL(n,e){switch(w2(e),e.tag){case 1:return Ai(e.type)&&qg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Mh(),_n(Ei),_n(Br),N2(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return P2(e),null;case 13:if(_n(Tn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Oh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _n(Tn),null;case 4:return Mh(),null;case 10:return A2(e.type._context),null;case 22:case 23:return U2(),null;case 24:return null;default:return null}}var Mm=!1,jr=!1,oL=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function hh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dn(n,e,r)}else t.current=null}function qy(n,e,t){try{t()}catch(r){Dn(n,e,r)}}var fb=!1;function aL(n,e){if(Ty=Vg,n=eS(),y2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,d=0,p=n,v=null;t:for(;;){for(var g;p!==t||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)v=p,p=g;for(;;){if(p===n)break t;if(v===t&&++u===i&&(a=o),v===s&&++d===r&&(l=o),(g=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Sy={focusedElem:n,selectionRange:t},Vg=!1,Xe=e;Xe!==null;)if(e=Xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xe=n;else for(;Xe!==null;){e=Xe;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var S=P.memoizedProps,C=P.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:Fs(e.type,S),C);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch($){Dn(e,e.return,$)}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}return P=fb,fb=!1,P}function Ef(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&qy(e,t,s)}i=i.next}while(i!==r)}}function U0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function zy(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function YS(n){var e=n.alternate;e!==null&&(n.alternate=null,YS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[io],delete e[Hf],delete e[Ny],delete e[zC],delete e[$C])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function XS(n){return n.tag===5||n.tag===3||n.tag===4}function pb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||XS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $y(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Bg));else if(r!==4&&(n=n.child,n!==null))for($y(n,e,t),n=n.sibling;n!==null;)$y(n,e,t),n=n.sibling}function Wy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Wy(n,e,t),n=n.sibling;n!==null;)Wy(n,e,t),n=n.sibling}var br=null,Vs=!1;function za(n,e,t){for(t=t.child;t!==null;)ZS(n,e,t),t=t.sibling}function ZS(n,e,t){if(uo&&typeof uo.onCommitFiberUnmount=="function")try{uo.onCommitFiberUnmount(C0,t)}catch{}switch(t.tag){case 5:jr||hh(t,e);case 6:var r=br,i=Vs;br=null,za(n,e,t),br=r,Vs=i,br!==null&&(Vs?(n=br,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):br.removeChild(t.stateNode));break;case 18:br!==null&&(Vs?(n=br,t=t.stateNode,n.nodeType===8?_v(n.parentNode,t):n.nodeType===1&&_v(n,t),qf(n)):_v(br,t.stateNode));break;case 4:r=br,i=Vs,br=t.stateNode.containerInfo,Vs=!0,za(n,e,t),br=r,Vs=i;break;case 0:case 11:case 14:case 15:if(!jr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qy(t,e,o),i=i.next}while(i!==r)}za(n,e,t);break;case 1:if(!jr&&(hh(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dn(t,e,a)}za(n,e,t);break;case 21:za(n,e,t);break;case 22:t.mode&1?(jr=(r=jr)||t.memoizedState!==null,za(n,e,t),jr=r):za(n,e,t);break;default:za(n,e,t)}}function mb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new oL),e.forEach(function(r){var i=gL.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ls(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,Vs=!1;break e;case 3:br=a.stateNode.containerInfo,Vs=!0;break e;case 4:br=a.stateNode.containerInfo,Vs=!0;break e}a=a.return}if(br===null)throw Error(Fe(160));ZS(s,o,i),br=null,Vs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Dn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ex(e,n),e=e.sibling}function ex(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ls(e,n),to(n),r&4){try{Ef(3,n,n.return),U0(3,n)}catch(S){Dn(n,n.return,S)}try{Ef(5,n,n.return)}catch(S){Dn(n,n.return,S)}}break;case 1:Ls(e,n),to(n),r&512&&t!==null&&hh(t,t.return);break;case 5:if(Ls(e,n),to(n),r&512&&t!==null&&hh(t,t.return),n.flags&32){var i=n.stateNode;try{Vf(i,"")}catch(S){Dn(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&IT(i,s),my(a,o);var u=my(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?ST(i,p):d==="dangerouslySetInnerHTML"?AT(i,p):d==="children"?Vf(i,p):s2(i,d,p,u)}switch(a){case"input":cy(i,s);break;case"textarea":bT(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?gh(i,!!s.multiple,g,!1):v!==!!s.multiple&&(s.defaultValue!=null?gh(i,!!s.multiple,s.defaultValue,!0):gh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hf]=s}catch(S){Dn(n,n.return,S)}}break;case 6:if(Ls(e,n),to(n),r&4){if(n.stateNode===null)throw Error(Fe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){Dn(n,n.return,S)}}break;case 3:if(Ls(e,n),to(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{qf(e.containerInfo)}catch(S){Dn(n,n.return,S)}break;case 4:Ls(e,n),to(n);break;case 13:Ls(e,n),to(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(V2=zn())),r&4&&mb(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(jr=(u=jr)||d,Ls(e,n),jr=u):Ls(e,n),to(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Xe=n,d=n.child;d!==null;){for(p=Xe=d;Xe!==null;){switch(v=Xe,g=v.child,v.tag){case 0:case 11:case 14:case 15:Ef(4,v,v.return);break;case 1:hh(v,v.return);var P=v.stateNode;if(typeof P.componentWillUnmount=="function"){r=v,t=v.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(S){Dn(r,t,S)}}break;case 5:hh(v,v.return);break;case 22:if(v.memoizedState!==null){vb(p);continue}}g!==null?(g.return=v,Xe=g):vb(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TT("display",o))}catch(S){Dn(n,n.return,S)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(S){Dn(n,n.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ls(e,n),to(n),r&4&&mb(n);break;case 21:break;default:Ls(e,n),to(n)}}function to(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(XS(t)){var r=t;break e}t=t.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vf(i,""),r.flags&=-33);var s=pb(n);Wy(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pb(n);$y(n,a,o);break;default:throw Error(Fe(161))}}catch(l){Dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function lL(n,e,t){Xe=n,tx(n)}function tx(n,e,t){for(var r=(n.mode&1)!==0;Xe!==null;){var i=Xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jr;a=Mm;var u=jr;if(Mm=o,(jr=l)&&!u)for(Xe=i;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?yb(i):l!==null?(l.return=o,Xe=l):yb(i);for(;s!==null;)Xe=s,tx(s),s=s.sibling;Xe=i,Mm=a,jr=u}gb(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xe=s):gb(n)}}function gb(n){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jr||U0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Fs(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ZI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ZI(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&qf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}jr||e.flags&512&&zy(e)}catch(v){Dn(e,e.return,v)}}if(e===n){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function vb(n){for(;Xe!==null;){var e=Xe;if(e===n){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function yb(n){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{U0(4,e)}catch(l){Dn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{zy(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{zy(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===n){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var uL=Math.ceil,Xg=ha.ReactCurrentDispatcher,F2=ha.ReactCurrentOwner,gs=ha.ReactCurrentBatchConfig,Ut=0,mr=null,tr=null,Tr=0,Ui=0,dh=Ml(0),sr=0,Zf=null,Uu=0,B0=0,M2=0,Af=null,yi=null,V2=0,jh=1/0,$o=null,Zg=!1,Gy=null,vl=null,Vm=!1,ll=null,e0=0,Tf=0,Hy=null,lg=-1,ug=0;function Zr(){return Ut&6?zn():lg!==-1?lg:lg=zn()}function yl(n){return n.mode&1?Ut&2&&Tr!==0?Tr&-Tr:GC.transition!==null?(ug===0&&(ug=VT()),ug):(n=Xt,n!==0||(n=window.event,n=n===void 0?16:WT(n.type)),n):1}function Bs(n,e,t,r){if(50<Tf)throw Tf=0,Hy=null,Error(Fe(185));Tp(n,t,r),(!(Ut&2)||n!==mr)&&(n===mr&&(!(Ut&2)&&(B0|=t),sr===4&&el(n,Tr)),Ti(n,r),t===1&&Ut===0&&!(e.mode&1)&&(jh=zn()+500,M0&&Vl()))}function Ti(n,e){var t=n.callbackNode;GR(n,e);var r=Mg(n,n===mr?Tr:0);if(r===0)t!==null&&xI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&xI(t),e===1)n.tag===0?WC(_b.bind(null,n)):cS(_b.bind(null,n)),BC(function(){!(Ut&6)&&Vl()}),t=null;else{switch(jT(r)){case 1:t=c2;break;case 4:t=FT;break;case 16:t=Fg;break;case 536870912:t=MT;break;default:t=Fg}t=ux(t,nx.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function nx(n,e){if(lg=-1,ug=0,Ut&6)throw Error(Fe(327));var t=n.callbackNode;if(Ih()&&n.callbackNode!==t)return null;var r=Mg(n,n===mr?Tr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=t0(n,r);else{e=r;var i=Ut;Ut|=2;var s=ix();(mr!==n||Tr!==e)&&($o=null,jh=zn()+500,Nu(n,e));do try{dL();break}catch(a){rx(n,a)}while(1);E2(),Xg.current=s,Ut=i,tr!==null?e=0:(mr=null,Tr=0,e=sr)}if(e!==0){if(e===2&&(i=wy(n),i!==0&&(r=i,e=Ky(n,i))),e===1)throw t=Zf,Nu(n,0),el(n,r),Ti(n,zn()),t;if(e===6)el(n,r);else{if(i=n.current.alternate,!(r&30)&&!cL(i)&&(e=t0(n,r),e===2&&(s=wy(n),s!==0&&(r=s,e=Ky(n,s))),e===1))throw t=Zf,Nu(n,0),el(n,r),Ti(n,zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:fu(n,yi,$o);break;case 3:if(el(n,r),(r&130023424)===r&&(e=V2+500-zn(),10<e)){if(Mg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Zr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Py(fu.bind(null,n,yi,$o),e);break}fu(n,yi,$o);break;case 4:if(el(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Us(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uL(r/1960))-r,10<r){n.timeoutHandle=Py(fu.bind(null,n,yi,$o),r);break}fu(n,yi,$o);break;case 5:fu(n,yi,$o);break;default:throw Error(Fe(329))}}}return Ti(n,zn()),n.callbackNode===t?nx.bind(null,n):null}function Ky(n,e){var t=Af;return n.current.memoizedState.isDehydrated&&(Nu(n,e).flags|=256),n=t0(n,e),n!==2&&(e=yi,yi=t,e!==null&&Qy(e)),n}function Qy(n){yi===null?yi=n:yi.push.apply(yi,n)}function cL(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!qs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function el(n,e){for(e&=~M2,e&=~B0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Us(e),r=1<<t;n[t]=-1,e&=~r}}function _b(n){if(Ut&6)throw Error(Fe(327));Ih();var e=Mg(n,0);if(!(e&1))return Ti(n,zn()),null;var t=t0(n,e);if(n.tag!==0&&t===2){var r=wy(n);r!==0&&(e=r,t=Ky(n,r))}if(t===1)throw t=Zf,Nu(n,0),el(n,e),Ti(n,zn()),t;if(t===6)throw Error(Fe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,fu(n,yi,$o),Ti(n,zn()),null}function j2(n,e){var t=Ut;Ut|=1;try{return n(e)}finally{Ut=t,Ut===0&&(jh=zn()+500,M0&&Vl())}}function Bu(n){ll!==null&&ll.tag===0&&!(Ut&6)&&Ih();var e=Ut;Ut|=1;var t=gs.transition,r=Xt;try{if(gs.transition=null,Xt=1,n)return n()}finally{Xt=r,gs.transition=t,Ut=e,!(Ut&6)&&Vl()}}function U2(){Ui=dh.current,_n(dh)}function Nu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,UC(t)),tr!==null)for(t=tr.return;t!==null;){var r=t;switch(w2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qg();break;case 3:Mh(),_n(Ei),_n(Br),N2();break;case 5:P2(r);break;case 4:Mh();break;case 13:_n(Tn);break;case 19:_n(Tn);break;case 10:A2(r.type._context);break;case 22:case 23:U2()}t=t.return}if(mr=n,tr=n=_l(n.current,null),Tr=Ui=e,sr=0,Zf=null,M2=B0=Uu=0,yi=Af=null,Au!==null){for(e=0;e<Au.length;e++)if(t=Au[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Au=null}return n}function rx(n,e){do{var t=tr;try{if(E2(),sg.current=Yg,Jg){for(var r=Sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jg=!1}if(ju=0,dr=ir=Sn=null,bf=!1,Jf=0,F2.current=null,t===null||t.return===null){sr=1,Zf=e,tr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Tr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ob(o);if(g!==null){g.flags&=-257,ab(g,o,a,s,e),g.mode&1&&sb(s,u,e),e=g,l=u;var P=e.updateQueue;if(P===null){var S=new Set;S.add(l),e.updateQueue=S}else P.add(l);break e}else{if(!(e&1)){sb(s,u,e),B2();break e}l=Error(Fe(426))}}else if(In&&a.mode&1){var C=ob(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),ab(C,o,a,s,e),I2(Vh(l,a));break e}}s=l=Vh(l,a),sr!==4&&(sr=2),Af===null?Af=[s]:Af.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=US(s,l,e);XI(s,w);break e;case 1:a=l;var b=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(vl===null||!vl.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=BS(s,a,e);XI(s,$);break e}}s=s.return}while(s!==null)}ox(t)}catch(W){e=W,tr===t&&t!==null&&(tr=t=t.return);continue}break}while(1)}function ix(){var n=Xg.current;return Xg.current=Yg,n===null?Yg:n}function B2(){(sr===0||sr===3||sr===2)&&(sr=4),mr===null||!(Uu&268435455)&&!(B0&268435455)||el(mr,Tr)}function t0(n,e){var t=Ut;Ut|=2;var r=ix();(mr!==n||Tr!==e)&&($o=null,Nu(n,e));do try{hL();break}catch(i){rx(n,i)}while(1);if(E2(),Ut=t,Xg.current=r,tr!==null)throw Error(Fe(261));return mr=null,Tr=0,sr}function hL(){for(;tr!==null;)sx(tr)}function dL(){for(;tr!==null&&!MR();)sx(tr)}function sx(n){var e=lx(n.alternate,n,Ui);n.memoizedProps=n.pendingProps,e===null?ox(n):tr=e,F2.current=null}function ox(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=sL(t,e),t!==null){t.flags&=32767,tr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{sr=6,tr=null;return}}else if(t=iL(t,e,Ui),t!==null){tr=t;return}if(e=e.sibling,e!==null){tr=e;return}tr=e=n}while(e!==null);sr===0&&(sr=5)}function fu(n,e,t){var r=Xt,i=gs.transition;try{gs.transition=null,Xt=1,fL(n,e,t,r)}finally{gs.transition=i,Xt=r}return null}function fL(n,e,t,r){do Ih();while(ll!==null);if(Ut&6)throw Error(Fe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Fe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(HR(n,s),n===mr&&(tr=mr=null,Tr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Vm||(Vm=!0,ux(Fg,function(){return Ih(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=gs.transition,gs.transition=null;var o=Xt;Xt=1;var a=Ut;Ut|=4,F2.current=null,aL(n,t),ex(t,n),LC(Sy),Vg=!!Ty,Sy=Ty=null,n.current=t,lL(t),VR(),Ut=a,Xt=o,gs.transition=s}else n.current=t;if(Vm&&(Vm=!1,ll=n,e0=i),s=n.pendingLanes,s===0&&(vl=null),BR(t.stateNode),Ti(n,zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zg)throw Zg=!1,n=Gy,Gy=null,n;return e0&1&&n.tag!==0&&Ih(),s=n.pendingLanes,s&1?n===Hy?Tf++:(Tf=0,Hy=n):Tf=0,Vl(),null}function Ih(){if(ll!==null){var n=jT(e0),e=gs.transition,t=Xt;try{if(gs.transition=null,Xt=16>n?16:n,ll===null)var r=!1;else{if(n=ll,ll=null,e0=0,Ut&6)throw Error(Fe(331));var i=Ut;for(Ut|=4,Xe=n.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Xe=u;Xe!==null;){var d=Xe;switch(d.tag){case 0:case 11:case 15:Ef(8,d,s)}var p=d.child;if(p!==null)p.return=d,Xe=p;else for(;Xe!==null;){d=Xe;var v=d.sibling,g=d.return;if(YS(d),d===u){Xe=null;break}if(v!==null){v.return=g,Xe=v;break}Xe=g}}}var P=s.alternate;if(P!==null){var S=P.child;if(S!==null){P.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ef(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Xe=w;break e}Xe=s.return}}var b=n.current;for(Xe=b;Xe!==null;){o=Xe;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,Xe=R;else e:for(o=b;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:U0(9,a)}}catch(W){Dn(a,a.return,W)}if(a===o){Xe=null;break e}var $=a.sibling;if($!==null){$.return=a.return,Xe=$;break e}Xe=a.return}}if(Ut=i,Vl(),uo&&typeof uo.onPostCommitFiberRoot=="function")try{uo.onPostCommitFiberRoot(C0,n)}catch{}r=!0}return r}finally{Xt=t,gs.transition=e}}return!1}function wb(n,e,t){e=Vh(t,e),e=US(n,e,1),n=gl(n,e,1),e=Zr(),n!==null&&(Tp(n,1,e),Ti(n,e))}function Dn(n,e,t){if(n.tag===3)wb(n,n,t);else for(;e!==null;){if(e.tag===3){wb(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vl===null||!vl.has(r))){n=Vh(t,n),n=BS(e,n,1),e=gl(e,n,1),n=Zr(),e!==null&&(Tp(e,1,n),Ti(e,n));break}}e=e.return}}function pL(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Zr(),n.pingedLanes|=n.suspendedLanes&t,mr===n&&(Tr&t)===t&&(sr===4||sr===3&&(Tr&130023424)===Tr&&500>zn()-V2?Nu(n,0):M2|=t),Ti(n,e)}function ax(n,e){e===0&&(n.mode&1?(e=Pm,Pm<<=1,!(Pm&130023424)&&(Pm=4194304)):e=1);var t=Zr();n=na(n,e),n!==null&&(Tp(n,e,t),Ti(n,t))}function mL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ax(n,t)}function gL(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),ax(n,t)}var lx;lx=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ei.current)_i=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _i=!1,rL(n,e,t);_i=!!(n.flags&131072)}else _i=!1,In&&e.flags&1048576&&hS(e,Wg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ag(n,e),n=e.pendingProps;var i=Dh(e,Br.current);wh(e,t),i=R2(null,e,r,n,i,t);var s=C2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(s=!0,zg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,S2(e),i.updater=V0,e.stateNode=i,i._reactInternals=e,Oy(e,r,n,t),e=Vy(null,e,r,!0,s,t)):(e.tag=0,In&&s&&_2(e),Jr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ag(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yL(r),n=Fs(r,n),i){case 0:e=My(null,e,r,n,t);break e;case 1:e=cb(null,e,r,n,t);break e;case 11:e=lb(null,e,r,n,t);break e;case 14:e=ub(null,e,r,Fs(r.type,n),t);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),My(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),cb(n,e,r,i,t);case 3:e:{if(WS(e),n===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mS(n,e),Kg(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Vh(Error(Fe(423)),e),e=hb(n,e,r,t,i);break e}else if(r!==i){i=Vh(Error(Fe(424)),e),e=hb(n,e,r,t,i);break e}else for(qi=ml(e.stateNode.containerInfo.firstChild),Wi=e,In=!0,js=null,t=_S(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Oh(),r===i){e=ra(n,e,t);break e}Jr(n,e,r,t)}e=e.child}return e;case 5:return wS(e),n===null&&Cy(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,xy(r,i)?o=null:s!==null&&xy(r,s)&&(e.flags|=32),$S(n,e),Jr(n,e,o,t),e.child;case 6:return n===null&&Cy(e),null;case 13:return GS(n,e,t);case 4:return x2(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Fh(e,null,r,t):Jr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),lb(n,e,r,i,t);case 7:return Jr(n,e,e.pendingProps,t),e.child;case 8:return Jr(n,e,e.pendingProps.children,t),e.child;case 12:return Jr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,hn(Gg,r._currentValue),r._currentValue=o,s!==null)if(qs(s.value,o)){if(s.children===i.children&&!Ei.current){e=ra(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Ly(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Ly(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wh(e,t),i=ys(i),r=r(i),e.flags|=1,Jr(n,e,r,t),e.child;case 14:return r=e.type,i=Fs(r,e.pendingProps),i=Fs(r.type,i),ub(n,e,r,i,t);case 15:return qS(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),ag(n,e),e.tag=1,Ai(r)?(n=!0,zg(e)):n=!1,wh(e,t),vS(e,r,i),Oy(e,r,i,t),Vy(null,e,r,!0,n,t);case 19:return HS(n,e,t);case 22:return zS(n,e,t)}throw Error(Fe(156,e.tag))};function ux(n,e){return OT(n,e)}function vL(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(n,e,t,r){return new vL(n,e,t,r)}function q2(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yL(n){if(typeof n=="function")return q2(n)?1:0;if(n!=null){if(n=n.$$typeof,n===a2)return 11;if(n===l2)return 14}return 2}function _l(n,e){var t=n.alternate;return t===null?(t=ps(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cg(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")q2(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case nh:return ku(t.children,i,s,e);case o2:o=8,i|=8;break;case sy:return n=ps(12,t,e,i|2),n.elementType=sy,n.lanes=s,n;case oy:return n=ps(13,t,e,i),n.elementType=oy,n.lanes=s,n;case ay:return n=ps(19,t,e,i),n.elementType=ay,n.lanes=s,n;case yT:return q0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gT:o=10;break e;case vT:o=9;break e;case a2:o=11;break e;case l2:o=14;break e;case Ja:o=16,r=null;break e}throw Error(Fe(130,n==null?n:typeof n,""))}return e=ps(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ku(n,e,t,r){return n=ps(7,n,r,e),n.lanes=t,n}function q0(n,e,t,r){return n=ps(22,n,r,e),n.elementType=yT,n.lanes=t,n.stateNode={isHidden:!1},n}function xv(n,e,t){return n=ps(6,n,null,e),n.lanes=t,n}function Pv(n,e,t){return e=ps(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _L(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lv(0),this.expirationTimes=lv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function z2(n,e,t,r,i,s,o,a,l){return n=new _L(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ps(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},S2(s),n}function wL(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:th,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function cx(n){if(!n)return El;n=n._reactInternals;e:{if(rc(n)!==n||n.tag!==1)throw Error(Fe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(n.tag===1){var t=n.type;if(Ai(t))return uS(n,t,e)}return e}function hx(n,e,t,r,i,s,o,a,l){return n=z2(t,r,!0,n,i,s,o,a,l),n.context=cx(null),t=n.current,r=Zr(),i=yl(t),s=Xo(r,i),s.callback=e??null,gl(t,s,i),n.current.lanes=i,Tp(n,i,r),Ti(n,r),n}function z0(n,e,t,r){var i=e.current,s=Zr(),o=yl(i);return t=cx(t),e.context===null?e.context=t:e.pendingContext=t,e=Xo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=gl(i,e,o),n!==null&&(Bs(n,i,o,s),ig(n,i,o)),o}function n0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ib(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function $2(n,e){Ib(n,e),(n=n.alternate)&&Ib(n,e)}function IL(){return null}var dx=typeof reportError=="function"?reportError:function(n){console.error(n)};function W2(n){this._internalRoot=n}$0.prototype.render=W2.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Fe(409));z0(n,e,null,null)};$0.prototype.unmount=W2.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Bu(function(){z0(null,n,null,null)}),e[ta]=null}};function $0(n){this._internalRoot=n}$0.prototype.unstable_scheduleHydration=function(n){if(n){var e=qT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Za.length&&e!==0&&e<Za[t].priority;t++);Za.splice(t,0,n),t===0&&$T(n)}};function G2(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function W0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bb(){}function bL(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=n0(o);s.call(u)}}var o=hx(e,r,n,0,null,!1,!1,"",bb);return n._reactRootContainer=o,n[ta]=o.current,Wf(n.nodeType===8?n.parentNode:n),Bu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=n0(l);a.call(u)}}var l=z2(n,0,!1,null,null,!1,!1,"",bb);return n._reactRootContainer=l,n[ta]=l.current,Wf(n.nodeType===8?n.parentNode:n),Bu(function(){z0(e,l,t,r)}),l}function G0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=n0(o);a.call(l)}}z0(e,o,n,i)}else o=bL(t,e,n,i,r);return n0(o)}UT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=of(e.pendingLanes);t!==0&&(h2(e,t|1),Ti(e,zn()),!(Ut&6)&&(jh=zn()+500,Vl()))}break;case 13:Bu(function(){var r=na(n,1);if(r!==null){var i=Zr();Bs(r,n,1,i)}}),$2(n,1)}};d2=function(n){if(n.tag===13){var e=na(n,134217728);if(e!==null){var t=Zr();Bs(e,n,134217728,t)}$2(n,134217728)}};BT=function(n){if(n.tag===13){var e=yl(n),t=na(n,e);if(t!==null){var r=Zr();Bs(t,n,e,r)}$2(n,e)}};qT=function(){return Xt};zT=function(n,e){var t=Xt;try{return Xt=n,e()}finally{Xt=t}};vy=function(n,e,t){switch(e){case"input":if(cy(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=F0(r);if(!i)throw Error(Fe(90));wT(r),cy(r,i)}}}break;case"textarea":bT(n,t);break;case"select":e=t.value,e!=null&&gh(n,!!t.multiple,e,!1)}};NT=j2;kT=Bu;var EL={usingClientEntryPoint:!1,Events:[xp,oh,F0,xT,PT,j2]},Wd={findFiberByHostInstance:Eu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AL={bundleType:Wd.bundleType,version:Wd.version,rendererPackageName:Wd.rendererPackageName,rendererConfig:Wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=LT(n),n===null?null:n.stateNode},findFiberByHostInstance:Wd.findFiberByHostInstance||IL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{C0=jm.inject(AL),uo=jm}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EL;Qi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G2(e))throw Error(Fe(200));return wL(n,e,null,t)};Qi.createRoot=function(n,e){if(!G2(n))throw Error(Fe(299));var t=!1,r="",i=dx;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=z2(n,1,!1,null,null,t,!1,r,i),n[ta]=e.current,Wf(n.nodeType===8?n.parentNode:n),new W2(e)};Qi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Fe(188)):(n=Object.keys(n).join(","),Error(Fe(268,n)));return n=LT(e),n=n===null?null:n.stateNode,n};Qi.flushSync=function(n){return Bu(n)};Qi.hydrate=function(n,e,t){if(!W0(e))throw Error(Fe(200));return G0(null,n,e,!0,t)};Qi.hydrateRoot=function(n,e,t){if(!G2(n))throw Error(Fe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=dx;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=hx(e,null,n,1,t??null,i,!1,s,o),n[ta]=e.current,Wf(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new $0(e)};Qi.render=function(n,e,t){if(!W0(e))throw Error(Fe(200));return G0(null,n,e,!1,t)};Qi.unmountComponentAtNode=function(n){if(!W0(n))throw Error(Fe(40));return n._reactRootContainer?(Bu(function(){G0(null,null,n,!1,function(){n._reactRootContainer=null,n[ta]=null})}),!0):!1};Qi.unstable_batchedUpdates=j2;Qi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!W0(t))throw Error(Fe(200));if(n==null||n._reactInternals===void 0)throw Error(Fe(38));return G0(n,e,t,!1,r)};Qi.version="18.2.0-next-9e3b772b8-20220608";function fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fx)}catch(n){console.error(n)}}fx(),hT.exports=Qi;var TL=hT.exports,Eb=TL;ry.createRoot=Eb.createRoot,ry.hydrateRoot=Eb.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let v=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(v=64)),r.push(t[d],t[p],t[v],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(px(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new xL;const v=s<<2|a>>4;if(r.push(v),u!==64){const g=a<<4&240|u>>2;if(r.push(g),p!==64){const P=u<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PL=function(n){const e=px(n);return mx.encodeByteArray(e,!0)},r0=function(n){return PL(n).replace(/\./g,"")},H2=function(n){try{return mx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function i0(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!NL(t)||(n[t]=i0(n[t],e[t]));return n}function NL(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=()=>gx().__FIREBASE_DEFAULTS__,RL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&H2(n[1]);return e&&JSON.parse(e)},H0=()=>{try{return kL()||RL()||CL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LL=n=>{var e,t;return(t=(e=H0())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vx=()=>{var n;return(n=H0())===null||n===void 0?void 0:n.config},K2=n=>{var e;return(e=H0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[r0(JSON.stringify(t)),r0(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Q2(){var n;const e=(n=H0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FL(){return typeof window<"u"||_x()}function _x(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function K0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y2(){const n=Ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ix(){return!Q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ep(){try{return typeof indexedDB=="object"}catch{return!1}}function ML(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="FirebaseError";class gr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VL,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bo.prototype.create)}}class bo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gr(i,a,r)}}function jL(n,e){return n.replace(UL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function bx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(Tb(s)&&Tb(o)){if(!Uh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Tb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function lf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function X2(n,e){const t=new BL(n,e);return t.subscribe.bind(t)}class BL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nv),i.error===void 0&&(i.error=Nv),i.complete===void 0&&(i.complete=Nv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(n){return n&&n._delegate?n._delegate:n}class ws{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new DL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WL(e))try{this.getOrInitializeService({instanceIdentifier:pu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pu){return this.instances.has(e)}getOptions(e=pu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$L(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pu){return this.component?this.component.multipleInstances?e:pu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $L(n){return n===pu?void 0:n}function WL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=[];var kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(kt||(kt={}));const Ax={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},GL=kt.INFO,HL={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},KL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=HL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=GL,this._logHandler=KL,this._userLogHandler=null,Z2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ax[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}function QL(n){Z2.forEach(e=>{e.setLogLevel(n)})}function JL(n,e){for(const t of Z2){let r=null;e&&e.level&&(r=Ax[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:kt[s].toLowerCase(),message:a,args:o,type:i.name})}}}const YL=(n,e)=>e.some(t=>n instanceof t);let Sb,xb;function XL(){return Sb||(Sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZL(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tx=new WeakMap,Jy=new WeakMap,Sx=new WeakMap,kv=new WeakMap,ew=new WeakMap;function e6(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(wl(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Tx.set(t,n)}).catch(()=>{}),ew.set(e,n),e}function t6(n){if(Jy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Jy.set(n,e)}let Yy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n6(n){Yy=n(Yy)}function r6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Rv(this),e,...t);return Sx.set(r,e.sort?e.sort():[e]),wl(r)}:ZL().includes(n)?function(...e){return n.apply(Rv(this),e),wl(Tx.get(this))}:function(...e){return wl(n.apply(Rv(this),e))}}function i6(n){return typeof n=="function"?r6(n):(n instanceof IDBTransaction&&t6(n),YL(n,XL())?new Proxy(n,Yy):n)}function wl(n){if(n instanceof IDBRequest)return e6(n);if(kv.has(n))return kv.get(n);const e=i6(n);return e!==n&&(kv.set(n,e),ew.set(e,n)),e}const Rv=n=>ew.get(n);function s6(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=wl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wl(o.result),l.oldVersion,l.newVersion,wl(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const o6=["get","getKey","getAll","getAllKeys","count"],a6=["put","add","delete","clear"],Cv=new Map;function Pb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cv.get(e))return Cv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=a6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o6.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return Cv.set(e,s),s}n6(n=>({...n,get:(e,t,r)=>Pb(e,t)||n.get(e,t,r),has:(e,t)=>!!Pb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(u6(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function u6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const s0="@firebase/app",Xy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Np("@firebase/app"),c6="@firebase/app-compat",h6="@firebase/analytics-compat",d6="@firebase/analytics",f6="@firebase/app-check-compat",p6="@firebase/app-check",m6="@firebase/auth",g6="@firebase/auth-compat",v6="@firebase/database",y6="@firebase/data-connect",_6="@firebase/database-compat",w6="@firebase/functions",I6="@firebase/functions-compat",b6="@firebase/installations",E6="@firebase/installations-compat",A6="@firebase/messaging",T6="@firebase/messaging-compat",S6="@firebase/performance",x6="@firebase/performance-compat",P6="@firebase/remote-config",N6="@firebase/remote-config-compat",k6="@firebase/storage",R6="@firebase/storage-compat",C6="@firebase/firestore",L6="@firebase/vertexai-preview",D6="@firebase/firestore-compat",O6="firebase",F6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="[DEFAULT]",M6={[s0]:"fire-core",[c6]:"fire-core-compat",[d6]:"fire-analytics",[h6]:"fire-analytics-compat",[p6]:"fire-app-check",[f6]:"fire-app-check-compat",[m6]:"fire-auth",[g6]:"fire-auth-compat",[v6]:"fire-rtdb",[y6]:"fire-data-connect",[_6]:"fire-rtdb-compat",[w6]:"fire-fn",[I6]:"fire-fn-compat",[b6]:"fire-iid",[E6]:"fire-iid-compat",[A6]:"fire-fcm",[T6]:"fire-fcm-compat",[S6]:"fire-perf",[x6]:"fire-perf-compat",[P6]:"fire-rc",[N6]:"fire-rc-compat",[k6]:"fire-gcs",[R6]:"fire-gcs-compat",[C6]:"fire-fst",[D6]:"fire-fst-compat",[L6]:"fire-vertex","fire-js":"fire-js",[O6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Map,Bh=new Map,qh=new Map;function tp(n,e){try{n.container.addComponent(e)}catch(t){ia.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xx(n,e){n.container.addOrOverwriteComponent(e)}function vo(n){const e=n.name;if(qh.has(e))return ia.debug(`There were multiple attempts to register component ${e}.`),!1;qh.set(e,n);for(const t of Tl.values())tp(t,n);for(const t of Bh.values())tp(t,n);return!0}function Q0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function V6(n,e,t=Al){Q0(n,e).clearInstance(t)}function Px(n){return n.options!==void 0}function Gt(n){return n.settings!==void 0}function j6(){qh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new bo("app","Firebase",U6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nx=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6 extends Nx{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Gi(s0,Xy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){nw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vs.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=F6;function tw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Al,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(t||(t=vx()),!t)throw vs.create("no-options");const s=Tl.get(i);if(s){if(Uh(t,s.options)&&Uh(r,s.config))return s;throw vs.create("duplicate-app",{appName:i})}const o=new Ex(i);for(const l of qh.values())o.addComponent(l);const a=new Nx(t,r,o);return Tl.set(i,a),a}function q6(n,e){if(FL()&&!_x())throw vs.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Px(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((d,p)=>Math.imul(31,d)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw vs.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Bh.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Ex(s);for(const u of qh.values())a.addComponent(u);const l=new B6(t,e,s,a);return Bh.set(s,l),l}function kx(n=Al){const e=Tl.get(n);if(!e&&n===Al&&vx())return tw();if(!e)throw vs.create("no-app",{appName:n});return e}function z6(){return Array.from(Tl.values())}async function nw(n){let e=!1;const t=n.name;Tl.has(t)?(e=!0,Tl.delete(t)):Bh.has(t)&&n.decRefCount()<=0&&(Bh.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Gi(n,e,t){var r;let i=(r=M6[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ia.warn(a.join(" "));return}vo(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Rx(n,e){if(n!==null&&typeof n!="function")throw vs.create("invalid-log-argument");JL(n,e)}function Cx(n){QL(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="firebase-heartbeat-database",W6=1,np="firebase-heartbeat-store";let Lv=null;function Lx(){return Lv||(Lv=s6($6,W6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(np)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Lv}async function G6(n){try{const t=(await Lx()).transaction(np),r=await t.objectStore(np).get(Dx(n));return await t.done,r}catch(e){if(e instanceof gr)ia.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ia.warn(t.message)}}}async function Nb(n,e){try{const r=(await Lx()).transaction(np,"readwrite");await r.objectStore(np).put(e,Dx(n)),await r.done}catch(t){if(t instanceof gr)ia.warn(t.message);else{const r=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ia.warn(r.message)}}}function Dx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=1024,K6=30*24*60*60*1e3;class Q6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=K6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ia.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kb(),{heartbeatsToSend:r,unsentEntries:i}=J6(this._heartbeatsCache.heartbeats),s=r0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ia.warn(t),""}}}function kb(){return new Date().toISOString().substring(0,10)}function J6(n,e=H6){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Rb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Rb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Y6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ep()?ML().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await G6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rb(n){return r0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n){vo(new ws("platform-logger",e=>new l6(e),"PRIVATE")),vo(new ws("heartbeat",e=>new Q6(e),"PRIVATE")),Gi(s0,Xy,n),Gi(s0,Xy,"esm2017"),Gi("fire-js","")}X6("");const Z6=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gr,SDK_VERSION:Yi,_DEFAULT_ENTRY_NAME:Al,_addComponent:tp,_addOrOverwriteComponent:xx,_apps:Tl,_clearComponents:j6,_components:qh,_getProvider:Q0,_isFirebaseApp:Px,_isFirebaseServerApp:Gt,_registerComponent:vo,_removeServiceInstance:V6,_serverApps:Bh,deleteApp:nw,getApp:kx,getApps:z6,initializeApp:tw,initializeServerApp:q6,onLog:Rx,registerVersion:Gi,setLogLevel:Cx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this._delegate=e,this.firebase=t,tp(e,new ws("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),nw(this._delegate)))}_getService(e,t=Al){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Al){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){tp(this._delegate,e)}_addOrOverwriteComponent(e){xx(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Cb=new bo("app-compat","Firebase",tD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Gi,setLogLevel:Cx,onLog:Rx,apps:null,SDK_VERSION:Yi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Z6}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Al,!Ab(e,u))throw Cb.create("no-app",{appName:u});return e[u]}i.App=n;function s(u,d={}){const p=tw(u,d);if(Ab(e,p.name))return e[p.name];const v=new n(p,t);return e[p.name]=v,v}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,p=d.replace("-compat","");if(vo(u)&&u.type==="PUBLIC"){const v=(g=i())=>{if(typeof g[p]!="function")throw Cb.create("invalid-app-argument",{appName:d});return g[p]()};u.serviceProps!==void 0&&i0(v,u.serviceProps),t[p]=v,n.prototype[p]=function(...g){return this._getService.bind(this,d).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?t[p]:null}function l(u,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){const n=nD(eD);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Ox,extendNamespace:e,createSubscribe:X2,ErrorFactory:bo,deepExtend:i0});function e(t){i0(n,t)}return n}const rD=Ox();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Np("@firebase/app-compat"),iD="@firebase/app-compat",sD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){Gi(iD,sD,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=gx();if(n.firebase!==void 0){Lb.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Lb.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const yo=rD;oD();var aD="firebase",lD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yo.registerVersion(aD,lD,"app-compat");function ld(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Gd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Mc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Fx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cD=uD,hD=Fx,Mx=new bo("auth","Firebase",Fx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Np("@firebase/auth");function dD(n,...e){o0.logLevel<=kt.WARN&&o0.warn(`Auth (${Yi}): ${n}`,...e)}function hg(n,...e){o0.logLevel<=kt.ERROR&&o0.error(`Auth (${Yi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(n,...e){throw iw(n,...e)}function or(n,...e){return iw(n,...e)}function rw(n,e,t){const r=Object.assign(Object.assign({},hD()),{[e]:t});return new bo("auth","Firebase",r).create(e,{appName:n.name})}function vr(n){return rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ud(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pr(n,"argument-error"),rw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Mx.create(n,...e)}function Ve(n,e,...t){if(!n)throw iw(e,...t)}function so(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hg(e),new Error(e)}function zs(n,e){n||so(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function sw(){return Db()==="http:"||Db()==="https:"}function Db(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||J2()||"connection"in navigator)?navigator.onLine:!0}function pD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,zs(t>e,"Short delay should be less than long delay!"),this.isMobile=yx()||K0()}get(){return fD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e){zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vx=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;so("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;so("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;so("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new kp(3e4,6e4);function Vn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function jn(n,e,t,r,i={}){return jx(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$s(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return wx()||(u.referrerPolicy="no-referrer"),Vx.fetch()(Ux(n,n.config.apiHost,t,a),u)})}async function jx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},mD),e);try{const i=new yD(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw uf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw uf(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw rw(n,d,u);Pr(n,d)}}catch(i){if(i instanceof gr)throw i;Pr(n,"network-request-failed",{message:String(i)})}}async function da(n,e,t,r,i={}){const s=await jn(n,e,t,r,i);return"mfaPendingCredential"in s&&Pr(n,"multi-factor-auth-required",{_serverResponse:s}),s}function Ux(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ow(n.config,i):`${n.config.apiScheme}://${i}`}function vD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let yD=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),gD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=or(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(n){return n!==void 0&&n.getResponse!==void 0}function Fb(n){return n!==void 0&&n.enterprise!==void 0}class _D{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(n){return(await jn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ID(n,e){return jn(n,"GET","/v2/recaptchaConfig",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(n,e){return jn(n,"POST","/v1/accounts:delete",e)}async function ED(n,e){return jn(n,"POST","/v1/accounts:update",e)}async function Bx(n,e){return jn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AD(n,e=!1){const t=it(n),r=await t.getIdToken(e),i=J0(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sf(Dv(i.auth_time)),issuedAtTime:Sf(Dv(i.iat)),expirationTime:Sf(Dv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Dv(n){return Number(n)*1e3}function J0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hg("JWT malformed, contained fewer than 3 sections"),null;try{const i=H2(t);return i?JSON.parse(i):(hg("Failed to decode base64 JWT payload"),null)}catch(i){return hg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Mb(n){const e=J0(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gr&&TD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function TD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zy=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sf(this.lastLoginAt),this.creationTime=Sf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(n){var e;const t=n.auth,r=await n.getIdToken(),i=await sa(n,Bx(t,{idToken:r}));Ve(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qx(s.providerUserInfo):[],a=PD(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function xD(n){const e=it(n);await ip(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PD(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qx(n){return n.map(e=>{var{providerId:t}=e,r=ld(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(n,e){const t=await jx(n,{},async()=>{const r=$s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Ux(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kD(n,e){return jn(n,"POST","/v2/accounts:revokeToken",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ov=class e_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Mb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await ND(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new e_;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e_,this.toJSON())}_performRefresh(){return so("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let a0=class cf{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ld(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await sa(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AD(this,e)}reload(){return xD(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ip(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await sa(this,bD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,S=(a=t.tenantId)!==null&&a!==void 0?a:void 0,C=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:$,isAnonymous:W,providerData:Q,stsTokenManager:k}=t;Ve(R&&k,e,"internal-error");const E=Ov.fromJSON(this.name,k);Ve(typeof R=="string",e,"internal-error"),$a(p,e.name),$a(v,e.name),Ve(typeof $=="boolean",e,"internal-error"),Ve(typeof W=="boolean",e,"internal-error"),$a(g,e.name),$a(P,e.name),$a(S,e.name),$a(C,e.name),$a(w,e.name),$a(b,e.name);const O=new cf({uid:R,auth:e,email:v,emailVerified:$,displayName:p,isAnonymous:W,photoURL:P,phoneNumber:g,tenantId:S,stsTokenManager:E,createdAt:w,lastLoginAt:b});return Q&&Array.isArray(Q)&&(O.providerData=Q.map(U=>Object.assign({},U))),C&&(O._redirectEventId=C),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ov;i.updateFromServerResponse(t);const s=new cf({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ip(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?qx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ov;a.updateFromIdToken(r);const l=new cf({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new Map;function zi(n){zs(n instanceof Function,"Expected a class definition");let e=Vb.get(n);return e?(zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Vb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};zx.type="NONE";const zh=zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n,e,t){return`firebase:${n}:${e}:${t}`}let jb=class dg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ru(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ru("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?a0._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new dg(zi(zh),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||zi(zh);const o=Ru(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const d=await u._get(o);if(d){const p=a0._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new dg(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new dg(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($x(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Qx(e))return"Webos";if(Wx(e))return"Safari";if((e.includes("chrome/")||Gx(e))&&!e.includes("edge/"))return"Chrome";if(Rp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $x(n=Ft()){return/firefox\//i.test(n)}function Wx(n=Ft()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gx(n=Ft()){return/crios\//i.test(n)}function Hx(n=Ft()){return/iemobile/i.test(n)}function Rp(n=Ft()){return/android/i.test(n)}function Kx(n=Ft()){return/blackberry/i.test(n)}function Qx(n=Ft()){return/webos/i.test(n)}function Cp(n=Ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RD(n=Ft()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function CD(n=Ft()){var e;return Cp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LD(){return Y2()&&document.documentMode===10}function Jx(n=Ft()){return Cp(n)||Rp(n)||Qx(n)||Kx(n)||/windows phone/i.test(n)||Hx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n,e=[]){let t;switch(n){case"Browser":t=Ub(Ft());break;case"Worker":t=`${Ub(Ft())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e={}){return jn(n,"GET","/v2/passwordPolicy",Vn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=6;let MD=class{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:FD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VD=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new DD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jb.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bx(this,{idToken:e}),r=await a0._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ip(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(vr(this));const t=e?it(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OD(this),t=new MD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await jb.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}};function Fn(n){return it(n)}let Bb=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=X2(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jD(n){Lp=n}function aw(n){return Lp.loadJS(n)}function UD(){return Lp.recaptchaV2Script}function BD(){return Lp.recaptchaEnterpriseScript}function qD(){return Lp.gapiScript}function Xx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const zD="recaptcha-enterprise",$D="NO_RECAPTCHA";class WD{constructor(e){this.type=zD,this.auth=Fn(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{ID(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new _D(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Fb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o($D)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&Fb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BD();l.length!==0&&(l+=a),aw(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function qb(n,e,t,r=!1){const i=new WD(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sp(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await qb(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qb(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}function GD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(zi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HD(n,e,t){const r=Fn(n);Ve(r._canInitEmulator,r,"emulator-config-failed"),Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=Zx(e),{host:o,port:a}=KD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||QD()}function Zx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KD(n){const e=Zx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zb(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zb(o)}}}function zb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return so("not implemented")}_getIdTokenResponse(e){return so("not implemented")}_linkToIdToken(e,t){return so("not implemented")}_getReauthenticationResolver(e){return so("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(n,e){return jn(n,"POST","/v1/accounts:resetPassword",Vn(n,e))}async function JD(n,e){return jn(n,"POST","/v1/accounts:update",e)}async function YD(n,e){return jn(n,"POST","/v1/accounts:signUp",e)}async function XD(n,e){return jn(n,"POST","/v1/accounts:update",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(n,e){return da(n,"POST","/v1/accounts:signInWithPassword",Vn(n,e))}async function Y0(n,e){return jn(n,"POST","/v1/accounts:sendOobCode",Vn(n,e))}async function eO(n,e){return Y0(n,e)}async function tO(n,e){return Y0(n,e)}async function nO(n,e){return Y0(n,e)}async function rO(n,e){return Y0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(n,e){return da(n,"POST","/v1/accounts:signInWithEmailLink",Vn(n,e))}async function sO(n,e){return da(n,"POST","/v1/accounts:signInWithEmailLink",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends cd{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new op(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new op(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,t,"signInWithPassword",ZD);case"emailLink":return iO(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,r,"signUpPassword",YD);case"emailLink":return sO(e,{idToken:t,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(n,e){return da(n,"POST","/v1/accounts:signInWithIdp",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="http://localhost";let qu=class t_ extends cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new t_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ld(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new t_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:oO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$s(t)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n,e){return jn(n,"POST","/v1/accounts:sendVerificationCode",Vn(n,e))}async function lO(n,e){return da(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,e))}async function uO(n,e){const t=await da(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,e));if(t.temporaryProof)throw uf(n,"account-exists-with-different-credential",t);return t}const cO={USER_NOT_FOUND:"user-not-found"};async function hO(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return da(n,"POST","/v1/accounts:signInWithPhoneNumber",Vn(n,t),cO)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends cd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return lO(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return uO(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return hO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Cu({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fO(n){const e=fh(lf(n)).link,t=e?fh(lf(e)).deep_link_id:null,r=fh(lf(n)).deep_link_id;return(r?fh(lf(r)).link:null)||r||t||e||n}class X0{constructor(e){var t,r,i,s,o,a;const l=fh(lf(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=dO((i=l.mode)!==null&&i!==void 0?i:null);Ve(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=fO(e);try{return new X0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,t){return op._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=X0.parseLink(t);return Ve(r,"argument-error"),op._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=class extends fa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};class bh extends hd{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Ve("providerId"in t&&"signInMethod"in t,"argument-error"),qu._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ve(e.idToken||e.accessToken,"argument-error"),qu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return bh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return bh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new bh(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z0=class $c extends hd{constructor(){super("facebook.com")}static credential(e){return qu._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}};Z0.FACEBOOK_SIGN_IN_METHOD="facebook.com";Z0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e1=class Wc extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qu._fromParams({providerId:Wc.PROVIDER_ID,signInMethod:Wc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wc.credentialFromTaggedObject(e)}static credentialFromError(e){return Wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Wc.credential(t,r)}catch{return null}}};e1.GOOGLE_SIGN_IN_METHOD="google.com";e1.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t1=class Gc extends hd{constructor(){super("github.com")}static credential(e){return qu._fromParams({providerId:Gc.PROVIDER_ID,signInMethod:Gc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gc.credentialFromTaggedObject(e)}static credentialFromError(e){return Gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gc.credential(e.oauthAccessToken)}catch{return null}}};t1.GITHUB_SIGN_IN_METHOD="github.com";t1.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="http://localhost";class $h extends cd{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Zo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new $h(r,s)}static _create(e,t){return new $h(e,t)}buildRequest(){return{requestUri:pO,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="saml.";class l0 extends fa{constructor(e){Ve(e.startsWith(mO),"argument-error"),super(e)}static credentialFromResult(e){return l0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return l0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=$h.fromJSON(e);return Ve(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return $h._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n1=class Hc extends hd{constructor(){super("twitter.com")}static credential(e,t){return qu._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hc.credentialFromTaggedObject(e)}static credentialFromError(e){return Hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hc.credential(t,r)}catch{return null}}};n1.TWITTER_SIGN_IN_METHOD="twitter.com";n1.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e){return da(n,"POST","/v1/accounts:signUp",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa=class n_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await a0._fromIdTokenResponse(e,r,i),o=$b(r);return new n_({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=$b(r);return new n_({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function $b(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(n){var e;if(Gt(n.app))return Promise.reject(vr(n));const t=Fn(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new oa({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await tP(t,{returnSecureToken:!0}),i=await oa._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vO=class r_ extends gr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,r_.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new r_(e,t,r,i)}};function nP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vO._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(n,e){const t=it(n);await r1(!0,t,e);const{providerUserInfo:r}=await ED(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=rP(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function lw(n,e,t=!1){const r=await sa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return oa._forOperation(n,"link",r)}async function r1(n,e,t){await ip(e);const r=rP(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";Ve(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e,t=!1){const{auth:r}=n;if(Gt(r.app))return Promise.reject(vr(r));const i="reauthenticate";try{const s=await sa(n,nP(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const o=J0(s.idToken);Ve(o,r,"internal-error");const{sub:a}=o;return Ve(n.uid===a,r,"user-mismatch"),oa._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(n,e,t=!1){if(Gt(n.app))return Promise.reject(vr(n));const r="signIn",i=await nP(n,r,e),s=await oa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function i1(n,e){return sP(Fn(n),e)}async function oP(n,e){const t=it(n);return await r1(!1,t,e.providerId),lw(t,e)}async function aP(n,e){return iP(it(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e){return da(n,"POST","/v1/accounts:signInWithCustomToken",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(n,e){if(Gt(n.app))return Promise.reject(vr(n));const t=Fn(n),r=await _O(t,{token:e,returnSecureToken:!0}),i=await oa._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?uw._fromServerResponse(e,t):"totpInfo"in t?cw._fromServerResponse(e,t):Pr(e,"internal-error")}}class uw extends Dp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new uw(t)}}class cw extends Dp{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new cw(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n,e,t){var r;Ve(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(n){const e=Fn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IO(n,e,t){const r=Fn(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&s1(r,i,t),await sp(r,i,"getOobCode",tO)}async function bO(n,e,t){await eP(it(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hw(n),r})}async function EO(n,e){await XD(it(n),{oobCode:e})}async function lP(n,e){const t=it(n),r=await eP(t,{oobCode:e}),i=r.requestType;switch(Ve(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ve(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ve(r.mfaInfo,t,"internal-error");default:Ve(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Dp._fromServerResponse(Fn(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function AO(n,e){const{data:t}=await lP(it(n),e);return t.email}async function TO(n,e,t){if(Gt(n.app))return Promise.reject(vr(n));const r=Fn(n),o=await sp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tP).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&hw(n),l}),a=await oa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function SO(n,e,t){return Gt(n.app)?Promise.reject(vr(n)):i1(it(n),jl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hw(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e,t){const r=Fn(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){Ve(a.handleCodeInApp,r,"argument-error"),a&&s1(r,o,a)}s(i,t),await sp(r,i,"getOobCode",nO)}function PO(n,e){const t=X0.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function NO(n,e,t){if(Gt(n.app))return Promise.reject(vr(n));const r=it(n),i=jl.credentialWithLink(e,t||rp());return Ve(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),i1(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(n,e){return jn(n,"POST","/v1/accounts:createAuthUri",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(n,e){const t=sw()?rp():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await kO(it(n),r);return i||[]}async function CO(n,e){const t=it(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&s1(t.auth,i,e);const{email:s}=await eO(t.auth,i);s!==n.email&&await n.reload()}async function LO(n,e,t){const r=it(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&s1(r.auth,s,t);const{email:o}=await rO(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(n,e){return jn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=it(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await sa(r,DO(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function FO(n,e){const t=it(n);return Gt(t.auth.app)?Promise.reject(vr(t.auth)):uP(t,e,null)}function MO(n,e){return uP(it(n),null,e)}async function uP(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await sa(n,JD(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=J0(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Eh(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new jO(s,i);case"github.com":return new UO(s,i);case"google.com":return new BO(s,i);case"twitter.com":return new qO(s,i,n.screenName||null);case"custom":case"anonymous":return new Eh(s,null);default:return new Eh(s,r,i)}}class Eh{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class cP extends Eh{constructor(e,t,r,i){super(e,t,r),this.username=i}}class jO extends Eh{constructor(e,t){super(e,"facebook.com",t)}}class UO extends cP{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class BO extends Eh{constructor(e,t){super(e,"google.com",t)}}class qO extends cP{constructor(e,t,r){super(e,"twitter.com",t,r)}}function zO(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:VO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Su("enroll",e,t)}static _fromMfaPendingCredential(e){return new Su("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Su._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Su._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Fn(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Dp._fromServerResponse(r,a));Ve(i.mfaPendingCredential,r,"internal-error");const o=Su._fromMfaPendingCredential(i.mfaPendingCredential);return new dw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const d=await oa._fromIdTokenResponse(r,t.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return Ve(t.user,r,"internal-error"),oa._forOperation(t.user,t.operationType,u);default:Pr(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function $O(n,e){var t;const r=it(n),i=e;return Ve(e.customData.operationType,r,"argument-error"),Ve((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),dw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:start",Vn(n,e))}function GO(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:finalize",Vn(n,e))}function HO(n,e){return jn(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Vn(n,e))}class fw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Dp._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new fw(e)}async getSession(){return Su._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await sa(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await sa(this.user,HO(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Fv=new WeakMap;function KO(n){const e=it(n);return Fv.has(e)||Fv.set(e,fw._fromUser(e)),Fv.get(e)}const u0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hP=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(u0,"1"),this.storage.removeItem(u0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=1e3,JO=10;let dP=class extends hP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);LD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};dP.type="LOCAL";const pw=dP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fP=class extends hP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};fP.type="SESSION";const zu=fP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pP=class mP{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new mP(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await YO(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};pP.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XO=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Op("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function ZO(n){er().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function e8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function n8(){return mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebaseLocalStorageDb",r8=1,c0="firebaseLocalStorage",vP="fbase_key";let Fp=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function o1(n,e){return n.transaction([c0],e?"readwrite":"readonly").objectStore(c0)}function i8(){const n=indexedDB.deleteDatabase(gP);return new Fp(n).toPromise()}function i_(){const n=indexedDB.open(gP,r8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(c0,{keyPath:vP})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(c0)?e(r):(r.close(),await i8(),e(await i_()))})})}async function Wb(n,e,t){const r=o1(n,!0).put({[vP]:e,value:t});return new Fp(r).toPromise()}async function s8(n,e){const t=o1(n,!1).get(e),r=await new Fp(t).toPromise();return r===void 0?null:r.value}function Gb(n,e){const t=o1(n,!0).delete(e);return new Fp(t).toPromise()}const o8=800,a8=3;let yP=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>a8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pP._getInstance(n8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await e8(),!this.activeServiceWorker)return;this.sender=new XO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await i_();return await Wb(e,u0,"1"),await Gb(e,u0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>s8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=o1(i,!1).getAll();return new Fp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};yP.type="LOCAL";const ap=yP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(n,e){return jn(n,"POST","/v2/accounts/mfaSignIn:start",Vn(n,e))}function u8(n,e){return jn(n,"POST","/v2/accounts/mfaSignIn:finalize",Vn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=500,h8=6e4,Um=1e12;class d8{constructor(e){this.auth=e,this.counter=Um,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new f8(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Um;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Um;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Um;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class f8{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Ve(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=p8(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},h8)},c8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function p8(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=Xx("rcb"),m8=new kp(3e4,6e4);class g8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=er().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return Ve(v8(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ob(er().grecaptcha)?Promise.resolve(er().grecaptcha):new Promise((r,i)=>{const s=er().setTimeout(()=>{i(or(e,"network-request-failed"))},m8.get());er()[Mv]=()=>{er().clearTimeout(s),delete er()[Mv];const a=er().grecaptcha;if(!a||!Ob(a)){i(or(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const p=l(u,d);return this.counter++,p},this.hostLanguage=t,r(a)};const o=`${UD()}?${$s({onload:Mv,render:"explicit",hl:t})}`;aw(o).catch(()=>{clearTimeout(s),i(or(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=er().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function v8(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class y8{async load(e){return new d8(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="recaptcha",_8={theme:"light",type:"image"};let w8=class{constructor(e,t,r=Object.assign({},_8)){this.parameters=r,this.type=_P,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(e),this.isInvisible=this.parameters.size==="invisible",Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;Ve(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new y8:new g8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ve(!this.parameters.sitekey,this.auth,"argument-error"),Ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=er()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){Ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ve(sw()&&!mw(),this.auth,"internal-error"),await I8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await wD(this.auth);Ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function I8(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Cu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function b8(n,e,t){if(Gt(n.app))return Promise.reject(vr(n));const r=Fn(n),i=await a1(r,e,it(t));return new gw(i,s=>i1(r,s))}async function E8(n,e,t){const r=it(n);await r1(!1,r,"phone");const i=await a1(r.auth,e,it(t));return new gw(i,s=>oP(r,s))}async function A8(n,e,t){const r=it(n);if(Gt(r.auth.app))return Promise.reject(vr(r.auth));const i=await a1(r.auth,e,it(t));return new gw(i,s=>aP(r,s))}async function a1(n,e,t){var r;const i=await t.verify();try{Ve(typeof i=="string",n,"argument-error"),Ve(t.type===_P,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return Ve(o.type==="enroll",n,"internal-error"),(await WO(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ve(o.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return Ve(a,n,"missing-multi-factor-info"),(await l8(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await aO(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function T8(n,e){const t=it(n);if(Gt(t.auth.app))return Promise.reject(vr(t.auth));await lw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=class fg{constructor(e){this.providerId=fg.PROVIDER_ID,this.auth=Fn(e)}verifyPhoneNumber(e,t){return a1(this.auth,e,it(t))}static credential(e,t){return Cu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return fg.credentialFromTaggedObject(t)}static credentialFromError(e){return fg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Cu._fromTokenResponse(t,r):null}};$u.PROVIDER_ID="phone";$u.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(n,e){return e?zi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw=class extends cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function S8(n){return sP(n.auth,new vw(n),n.bypassAuthState)}function x8(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),iP(t,new vw(n),n.bypassAuthState)}async function P8(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),lw(t,new vw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wP=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S8;case"linkViaPopup":case"linkViaRedirect":return P8;case"reauthViaPopup":case"reauthViaRedirect":return x8;default:Pr(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=new kp(2e3,1e4);async function k8(n,e,t){if(Gt(n.app))return Promise.reject(or(n,"operation-not-supported-in-this-environment"));const r=Fn(n);ud(n,e,fa);const i=ic(r,t);return new l1(r,"signInViaPopup",e,i).executeNotNull()}async function R8(n,e,t){const r=it(n);if(Gt(r.auth.app))return Promise.reject(or(r.auth,"operation-not-supported-in-this-environment"));ud(r.auth,e,fa);const i=ic(r.auth,t);return new l1(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function C8(n,e,t){const r=it(n);ud(r.auth,e,fa);const i=ic(r.auth,t);return new l1(r.auth,"linkViaPopup",e,i,r).executeNotNull()}let l1=class hf extends wP{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hf.currentPopupAction&&hf.currentPopupAction.cancel(),hf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N8.get())};e()}};l1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8="pendingRedirect",xf=new Map;let D8=class extends wP{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xf.get(this.auth._key());if(!e){try{const r=await O8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function O8(n,e){const t=bP(e),r=IP(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function yw(n,e){return IP(n)._set(bP(e),"true")}function F8(){xf.clear()}function _w(n,e){xf.set(n._key(),e)}function IP(n){return zi(n._redirectPersistence)}function bP(n){return Ru(L8,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(n,e,t){return V8(n,e,t)}async function V8(n,e,t){if(Gt(n.app))return Promise.reject(vr(n));const r=Fn(n);ud(n,e,fa),await r._initializationPromise;const i=ic(r,t);return await yw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function j8(n,e,t){return U8(n,e,t)}async function U8(n,e,t){const r=it(n);if(ud(r.auth,e,fa),Gt(r.auth.app))return Promise.reject(vr(r.auth));await r.auth._initializationPromise;const i=ic(r.auth,t);await yw(i,r.auth);const s=await EP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function B8(n,e,t){return q8(n,e,t)}async function q8(n,e,t){const r=it(n);ud(r.auth,e,fa),await r.auth._initializationPromise;const i=ic(r.auth,t);await r1(!1,r,e.providerId),await yw(i,r.auth);const s=await EP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function z8(n,e){return await Fn(n)._initializationPromise,u1(n,e,!1)}async function u1(n,e,t=!1){if(Gt(n.app))return Promise.reject(vr(n));const r=Fn(n),i=ic(r,e),o=await new D8(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function EP(n){const e=Op(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=10*60*1e3;let AP=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(or(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hb(e))}saveEventToCache(e){this.cachedEventUids.add(Hb(e)),this.lastProcessedEventTime=Date.now()}};function Hb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TP({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function W8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TP(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,e={}){return jn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H8=/^https?/;async function K8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SP(n);for(const t of e)try{if(Q8(t))return}catch{}Pr(n,"unauthorized-domain")}function Q8(n){const e=rp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!H8.test(t))return!1;if(G8.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=new kp(3e4,6e4);function Kb(){const n=er().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Y8(n){return new Promise((e,t)=>{var r,i,s;function o(){Kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kb(),t(or(n,"network-request-failed"))},timeout:J8.get()})}if(!((i=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=er().gapi)===null||s===void 0)&&s.load)o();else{const a=Xx("iframefcb");return er()[a]=()=>{gapi.load?o():t(or(n,"network-request-failed"))},aw(`${qD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw pg=null,e})}let pg=null;function X8(n){return pg=pg||Y8(n),pg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new kp(5e3,15e3),eF="__/auth/iframe",tF="emulator/auth/iframe",nF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iF(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ow(e,tF):`https://${n.config.authDomain}/${eF}`,r={apiKey:e.apiKey,appName:n.name,v:Yi},i=rF.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$s(r).slice(1)}`}async function sF(n){const e=await X8(n),t=er().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:iF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=or(n,"network-request-failed"),a=er().setTimeout(()=>{s(o)},Z8.get());function l(){er().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aF=500,lF=600,uF="_blank",cF="http://localhost";let Qb=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hF(n,e,t,r=aF,i=lF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ft().toLowerCase();t&&(a=Gx(u)?uF:t),$x(u)&&(e=e||cF,l.scrollbars="yes");const d=Object.entries(l).reduce((v,[g,P])=>`${v}${g}=${P},`,"");if(CD(u)&&a!=="_self")return dF(e||"",a),new Qb(null);const p=window.open(e||"",a,d);Ve(p,n,"popup-blocked");try{p.focus()}catch{}return new Qb(p)}function dF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="__/auth/handler",pF="emulator/auth/handler",mF=encodeURIComponent("fac");async function s_(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yi,eventId:i};if(e instanceof fa){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",bx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof hd){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),u=l?`#${mF}=${encodeURIComponent(l)}`:"";return`${gF(n)}?${$s(a).slice(1)}${u}`}function gF({config:n}){return n.emulator?ow(n,pF):`https://${n.authDomain}/${fF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="webStorageSupport";let vF=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zu,this._completeRedirectFn=u1,this._overrideRedirectResult=_w}async _openPopup(e,t,r,i){var s;zs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await s_(e,t,r,rp(),i);return hF(e,o,Op())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await s_(e,t,r,rp(),i);return ZO(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(zs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await sF(e),r=new AP(e);return t.register("authEvent",i=>(Ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vv,{type:Vv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vv];o!==void 0&&t(!!o),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=K8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jx()||Wx()||Cp()}};const yF=vF;class _F{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return so("unexpected MultiFactorSessionType")}}}class ww extends _F{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ww(e)}_finalizeEnroll(e,t,r){return GO(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return u8(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xP{constructor(){}static assertion(e){return ww._fromCredential(e)}}xP.FACTOR_ID="phone";var Jb="@firebase/auth",Yb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wF=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bF(n){vo(new ws("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yx(n)},u=new VD(r,i,s,l);return GD(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vo(new ws("auth-internal",e=>{const t=Fn(e.getProvider("auth").getImmediate());return(r=>new wF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(Jb,Yb,IF(n)),Gi(Jb,Yb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=5*60;K2("authIdTokenMaxAge");function AF(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}jD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=or("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",AF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bF("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=2e3;async function SF(n,e,t){var r;const{BuildInfo:i}=Wu();zs(e.sessionId,"AuthEvent did not contain a session ID");const s=await RF(e.sessionId),o={};return Cp()?o.ibi=i.packageName:Rp()?o.apn=i.packageName:Pr(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,s_(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function xF(n){const{BuildInfo:e}=Wu(),t={};Cp()?t.iosBundleId=e.packageName:Rp()?t.androidPackageName=e.packageName:Pr(n,"operation-not-supported-in-this-environment"),await SP(n,t)}function PF(n){const{cordova:e}=Wu();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,RD()?"_blank":"_system","location=yes"),t(i)})})}async function NF(n,e,t){const{cordova:r}=Wu();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var p;s();const v=(p=r.plugins.browsertab)===null||p===void 0?void 0:p.close;typeof v=="function"&&v(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){a||(a=window.setTimeout(()=>{o(or(n,"redirect-cancelled-by-user"))},TF))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Rp()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function kF(n){var e,t,r,i,s,o,a,l,u,d;const p=Wu();Ve(typeof((e=p==null?void 0:p.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ve(typeof((t=p==null?void 0:p.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ve(typeof((s=(i=(r=p==null?void 0:p.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve(typeof((l=(a=(o=p==null?void 0:p.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve(typeof((d=(u=p==null?void 0:p.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function RF(n){const e=CF(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function CF(n){if(zs(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=20;class DF extends AP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function OF(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:VF(),postBody:null,tenantId:n.tenantId,error:or(n,"no-auth-event")}}function FF(n,e){return o_()._set(a_(n),e)}async function Xb(n){const e=await o_()._get(a_(n));return e&&await o_()._remove(a_(n)),e}function MF(n,e){var t,r;const i=UF(e);if(i.includes("/__/auth/callback")){const s=mg(i),o=s.firebaseError?jF(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?or(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function VF(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<LF;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function o_(){return zi(pw)}function a_(n){return Ru("authEvent",n.config.apiKey,n.name)}function jF(n){try{return JSON.parse(n)}catch{return null}}function UF(n){const e=mg(n),t=e.link?decodeURIComponent(e.link):void 0,r=mg(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return mg(i).link||i||r||t||n}function mg(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return fh(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=500;class qF{constructor(){this._redirectPersistence=zu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=u1,this._overrideRedirectResult=_w}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new DF(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Pr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){kF(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),F8(),await this._originValidation(e);const o=OF(e,r,i);await FF(e,o);const a=await SF(e,o,t),l=await PF(a);return NF(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xF(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Wu(),o=setTimeout(async()=>{await Xb(e),t.onEvent(Zb())},BF),a=async d=>{clearTimeout(o);const p=await Xb(e);let v=null;p&&(d!=null&&d.url)&&(v=MF(p,d.url)),t.onEvent(v||Zb())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Wu().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&a({url:d}),typeof l=="function")try{l(d)}catch(p){console.error(p)}}}}const zF=qF;function Zb(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:or("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(n,e){Fn(n)._logFramework(e)}var WF="@firebase/auth-compat",GF="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=1e3;function Pf(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function KF(){return Pf()==="http:"||Pf()==="https:"}function PP(n=Ft()){return!!((Pf()==="file:"||Pf()==="ionic:"||Pf()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function QF(){return K0()||Q2()}function JF(){return Y2()&&(document==null?void 0:document.documentMode)===11}function YF(n=Ft()){return/Edge\/\d+/.test(n)}function XF(n=Ft()){return JF()||YF(n)}function NP(){try{const n=self.localStorage,e=Op();if(n)return n.setItem(e,"1"),n.removeItem(e),XF()?ep():!0}catch{return Iw()&&ep()}return!1}function Iw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jv(){return(KF()||J2()||PP())&&!QF()&&NP()&&!Iw()}function kP(){return PP()&&typeof document<"u"}async function ZF(){return kP()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},HF);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function eM(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi={LOCAL:"local",NONE:"none",SESSION:"session"},Hd=Ve,RP="persistence";function tM(n,e){if(Hd(Object.values(Bi).includes(e),n,"invalid-persistence-type"),K0()){Hd(e!==Bi.SESSION,n,"unsupported-persistence-type");return}if(Q2()){Hd(e===Bi.NONE,n,"unsupported-persistence-type");return}if(Iw()){Hd(e===Bi.NONE||e===Bi.LOCAL&&ep(),n,"unsupported-persistence-type");return}Hd(e===Bi.NONE||NP(),n,"unsupported-persistence-type")}async function l_(n){await n._initializationPromise;const e=CP(),t=Ru(RP,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function nM(n,e){const t=CP();if(!t)return[];const r=Ru(RP,n,e);switch(t.getItem(r)){case Bi.NONE:return[zh];case Bi.LOCAL:return[ap,zu];case Bi.SESSION:return[zu];default:return[]}}function CP(){var n;try{return((n=eM())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=Ve;class ul{constructor(){this.browserResolver=zi(yF),this.cordovaResolver=zi(zF),this.underlyingResolver=null,this._redirectPersistence=zu,this._completeRedirectFn=u1,this._overrideRedirectResult=_w}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return kP()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rM(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await ZF();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n){return n.unwrap()}function iM(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(n){return DP(n)}function oM(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new aM(n,$O(n,e))}else if(r){const i=DP(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function DP(n){const{_tokenResponse:e}=n instanceof gr?n.customData:n;if(!e)return null;if(!(n instanceof gr)&&"temporaryProof"in e&&"phoneNumber"in e)return $u.credentialFromResult(n);const t=e.providerId;if(!t||t===Gd.PASSWORD)return null;let r;switch(t){case Gd.GOOGLE:r=e1;break;case Gd.FACEBOOK:r=Z0;break;case Gd.GITHUB:r=t1;break;case Gd.TWITTER:r=n1;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?$h._create(t,a):qu._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new bh(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof gr?r.credentialFromError(n):r.credentialFromResult(n)}function gi(n,e){return e.catch(t=>{throw t instanceof gr&&oM(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:sM(t),additionalUserInfo:zO(t),user:c1.getOrCreate(i)}})}async function u_(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>gi(n,t.confirm(r))}}class aM{constructor(e,t){this.resolver=t,this.auth=iM(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gi(LP(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c1=class df{constructor(e){this._delegate=e,this.multiFactor=KO(e)}static getOrCreate(e){return df.USER_MAP.has(e)||df.USER_MAP.set(e,new df(e)),df.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gi(this.auth,oP(this._delegate,e))}async linkWithPhoneNumber(e,t){return u_(this.auth,E8(this._delegate,e,t))}async linkWithPopup(e){return gi(this.auth,C8(this._delegate,e,ul))}async linkWithRedirect(e){return await l_(Fn(this.auth)),B8(this._delegate,e,ul)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gi(this.auth,aP(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return u_(this.auth,A8(this._delegate,e,t))}reauthenticateWithPopup(e){return gi(this.auth,R8(this._delegate,e,ul))}async reauthenticateWithRedirect(e){return await l_(Fn(this.auth)),j8(this._delegate,e,ul)}sendEmailVerification(e){return CO(this._delegate,e)}async unlink(e){return await yO(this._delegate,e),this}updateEmail(e){return FO(this._delegate,e)}updatePassword(e){return MO(this._delegate,e)}updatePhoneNumber(e){return T8(this._delegate,e)}updateProfile(e){return OO(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return LO(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};c1.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=Ve;class c_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Kd(r,"invalid-api-key",{appName:e.name}),Kd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ul:void 0;this._delegate=t.initialize({options:{persistence:lM(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(cD),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?c1.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){HD(this._delegate,e,t)}applyActionCode(e){return EO(this._delegate,e)}checkActionCode(e){return lP(this._delegate,e)}confirmPasswordReset(e,t){return bO(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gi(this._delegate,TO(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return RO(this._delegate,e)}isSignInWithEmailLink(e){return PO(this._delegate,e)}async getRedirectResult(){Kd(jv(),this._delegate,"operation-not-supported-in-this-environment");const e=await z8(this._delegate,ul);return e?gi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){$F(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=eE(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=eE(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return xO(this._delegate,e,t)}sendPasswordResetEmail(e,t){return IO(this._delegate,e,t||void 0)}async setPersistence(e){tM(this._delegate,e);let t;switch(e){case Bi.SESSION:t=zu;break;case Bi.LOCAL:t=await zi(ap)._isAvailable()?ap:pw;break;case Bi.NONE:t=zh;break;default:return Pr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gi(this._delegate,gO(this._delegate))}signInWithCredential(e){return gi(this._delegate,i1(this._delegate,e))}signInWithCustomToken(e){return gi(this._delegate,wO(this._delegate,e))}signInWithEmailAndPassword(e,t){return gi(this._delegate,SO(this._delegate,e,t))}signInWithEmailLink(e,t){return gi(this._delegate,NO(this._delegate,e,t))}signInWithPhoneNumber(e,t){return u_(this._delegate,b8(this._delegate,e,t))}async signInWithPopup(e){return Kd(jv(),this._delegate,"operation-not-supported-in-this-environment"),gi(this._delegate,k8(this._delegate,e,ul))}async signInWithRedirect(e){return Kd(jv(),this._delegate,"operation-not-supported-in-this-environment"),await l_(this._delegate),M8(this._delegate,e,ul)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return AO(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}c_.Persistence=Bi;function eE(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&c1.getOrCreate(o)),error:e,complete:t}}function lM(n,e){const t=nM(n,e);if(typeof self<"u"&&!t.includes(ap)&&t.push(ap),typeof window<"u")for(const r of[pw,zu])t.includes(r)||t.push(r);return t.includes(zh)||t.push(zh),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.providerId="phone",this._delegate=new $u(LP(yo.auth()))}static credential(e,t){return $u.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}bw.PHONE_SIGN_IN_METHOD=$u.PHONE_SIGN_IN_METHOD;bw.PROVIDER_ID=$u.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=Ve;class cM{constructor(e,t,r=yo.app()){var i;uM((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new w8(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="auth-compat";function dM(n){n.INTERNAL.registerComponent(new ws(hM,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new c_(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Mc.EMAIL_SIGNIN,PASSWORD_RESET:Mc.PASSWORD_RESET,RECOVER_EMAIL:Mc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Mc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Mc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Mc.VERIFY_EMAIL}},EmailAuthProvider:jl,FacebookAuthProvider:Z0,GithubAuthProvider:t1,GoogleAuthProvider:e1,OAuthProvider:bh,SAMLAuthProvider:l0,PhoneAuthProvider:bw,PhoneMultiFactorGenerator:xP,RecaptchaVerifier:cM,TwitterAuthProvider:n1,Auth:c_,AuthCredential:cd,Error:gr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(WF,GF)}dM(yo);var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lu,OP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,E){function O(){}O.prototype=E.prototype,k.D=E.prototype,k.prototype=new O,k.prototype.constructor=k,k.C=function(U,T,x){for(var N=Array(arguments.length-2),X=2;X<arguments.length;X++)N[X-2]=arguments[X];return E.prototype[T].apply(U,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,E,O){O||(O=0);var U=Array(16);if(typeof E=="string")for(var T=0;16>T;++T)U[T]=E.charCodeAt(O++)|E.charCodeAt(O++)<<8|E.charCodeAt(O++)<<16|E.charCodeAt(O++)<<24;else for(T=0;16>T;++T)U[T]=E[O++]|E[O++]<<8|E[O++]<<16|E[O++]<<24;E=k.g[0],O=k.g[1],T=k.g[2];var x=k.g[3],N=E+(x^O&(T^x))+U[0]+3614090360&4294967295;E=O+(N<<7&4294967295|N>>>25),N=x+(T^E&(O^T))+U[1]+3905402710&4294967295,x=E+(N<<12&4294967295|N>>>20),N=T+(O^x&(E^O))+U[2]+606105819&4294967295,T=x+(N<<17&4294967295|N>>>15),N=O+(E^T&(x^E))+U[3]+3250441966&4294967295,O=T+(N<<22&4294967295|N>>>10),N=E+(x^O&(T^x))+U[4]+4118548399&4294967295,E=O+(N<<7&4294967295|N>>>25),N=x+(T^E&(O^T))+U[5]+1200080426&4294967295,x=E+(N<<12&4294967295|N>>>20),N=T+(O^x&(E^O))+U[6]+2821735955&4294967295,T=x+(N<<17&4294967295|N>>>15),N=O+(E^T&(x^E))+U[7]+4249261313&4294967295,O=T+(N<<22&4294967295|N>>>10),N=E+(x^O&(T^x))+U[8]+1770035416&4294967295,E=O+(N<<7&4294967295|N>>>25),N=x+(T^E&(O^T))+U[9]+2336552879&4294967295,x=E+(N<<12&4294967295|N>>>20),N=T+(O^x&(E^O))+U[10]+4294925233&4294967295,T=x+(N<<17&4294967295|N>>>15),N=O+(E^T&(x^E))+U[11]+2304563134&4294967295,O=T+(N<<22&4294967295|N>>>10),N=E+(x^O&(T^x))+U[12]+1804603682&4294967295,E=O+(N<<7&4294967295|N>>>25),N=x+(T^E&(O^T))+U[13]+4254626195&4294967295,x=E+(N<<12&4294967295|N>>>20),N=T+(O^x&(E^O))+U[14]+2792965006&4294967295,T=x+(N<<17&4294967295|N>>>15),N=O+(E^T&(x^E))+U[15]+1236535329&4294967295,O=T+(N<<22&4294967295|N>>>10),N=E+(T^x&(O^T))+U[1]+4129170786&4294967295,E=O+(N<<5&4294967295|N>>>27),N=x+(O^T&(E^O))+U[6]+3225465664&4294967295,x=E+(N<<9&4294967295|N>>>23),N=T+(E^O&(x^E))+U[11]+643717713&4294967295,T=x+(N<<14&4294967295|N>>>18),N=O+(x^E&(T^x))+U[0]+3921069994&4294967295,O=T+(N<<20&4294967295|N>>>12),N=E+(T^x&(O^T))+U[5]+3593408605&4294967295,E=O+(N<<5&4294967295|N>>>27),N=x+(O^T&(E^O))+U[10]+38016083&4294967295,x=E+(N<<9&4294967295|N>>>23),N=T+(E^O&(x^E))+U[15]+3634488961&4294967295,T=x+(N<<14&4294967295|N>>>18),N=O+(x^E&(T^x))+U[4]+3889429448&4294967295,O=T+(N<<20&4294967295|N>>>12),N=E+(T^x&(O^T))+U[9]+568446438&4294967295,E=O+(N<<5&4294967295|N>>>27),N=x+(O^T&(E^O))+U[14]+3275163606&4294967295,x=E+(N<<9&4294967295|N>>>23),N=T+(E^O&(x^E))+U[3]+4107603335&4294967295,T=x+(N<<14&4294967295|N>>>18),N=O+(x^E&(T^x))+U[8]+1163531501&4294967295,O=T+(N<<20&4294967295|N>>>12),N=E+(T^x&(O^T))+U[13]+2850285829&4294967295,E=O+(N<<5&4294967295|N>>>27),N=x+(O^T&(E^O))+U[2]+4243563512&4294967295,x=E+(N<<9&4294967295|N>>>23),N=T+(E^O&(x^E))+U[7]+1735328473&4294967295,T=x+(N<<14&4294967295|N>>>18),N=O+(x^E&(T^x))+U[12]+2368359562&4294967295,O=T+(N<<20&4294967295|N>>>12),N=E+(O^T^x)+U[5]+4294588738&4294967295,E=O+(N<<4&4294967295|N>>>28),N=x+(E^O^T)+U[8]+2272392833&4294967295,x=E+(N<<11&4294967295|N>>>21),N=T+(x^E^O)+U[11]+1839030562&4294967295,T=x+(N<<16&4294967295|N>>>16),N=O+(T^x^E)+U[14]+4259657740&4294967295,O=T+(N<<23&4294967295|N>>>9),N=E+(O^T^x)+U[1]+2763975236&4294967295,E=O+(N<<4&4294967295|N>>>28),N=x+(E^O^T)+U[4]+1272893353&4294967295,x=E+(N<<11&4294967295|N>>>21),N=T+(x^E^O)+U[7]+4139469664&4294967295,T=x+(N<<16&4294967295|N>>>16),N=O+(T^x^E)+U[10]+3200236656&4294967295,O=T+(N<<23&4294967295|N>>>9),N=E+(O^T^x)+U[13]+681279174&4294967295,E=O+(N<<4&4294967295|N>>>28),N=x+(E^O^T)+U[0]+3936430074&4294967295,x=E+(N<<11&4294967295|N>>>21),N=T+(x^E^O)+U[3]+3572445317&4294967295,T=x+(N<<16&4294967295|N>>>16),N=O+(T^x^E)+U[6]+76029189&4294967295,O=T+(N<<23&4294967295|N>>>9),N=E+(O^T^x)+U[9]+3654602809&4294967295,E=O+(N<<4&4294967295|N>>>28),N=x+(E^O^T)+U[12]+3873151461&4294967295,x=E+(N<<11&4294967295|N>>>21),N=T+(x^E^O)+U[15]+530742520&4294967295,T=x+(N<<16&4294967295|N>>>16),N=O+(T^x^E)+U[2]+3299628645&4294967295,O=T+(N<<23&4294967295|N>>>9),N=E+(T^(O|~x))+U[0]+4096336452&4294967295,E=O+(N<<6&4294967295|N>>>26),N=x+(O^(E|~T))+U[7]+1126891415&4294967295,x=E+(N<<10&4294967295|N>>>22),N=T+(E^(x|~O))+U[14]+2878612391&4294967295,T=x+(N<<15&4294967295|N>>>17),N=O+(x^(T|~E))+U[5]+4237533241&4294967295,O=T+(N<<21&4294967295|N>>>11),N=E+(T^(O|~x))+U[12]+1700485571&4294967295,E=O+(N<<6&4294967295|N>>>26),N=x+(O^(E|~T))+U[3]+2399980690&4294967295,x=E+(N<<10&4294967295|N>>>22),N=T+(E^(x|~O))+U[10]+4293915773&4294967295,T=x+(N<<15&4294967295|N>>>17),N=O+(x^(T|~E))+U[1]+2240044497&4294967295,O=T+(N<<21&4294967295|N>>>11),N=E+(T^(O|~x))+U[8]+1873313359&4294967295,E=O+(N<<6&4294967295|N>>>26),N=x+(O^(E|~T))+U[15]+4264355552&4294967295,x=E+(N<<10&4294967295|N>>>22),N=T+(E^(x|~O))+U[6]+2734768916&4294967295,T=x+(N<<15&4294967295|N>>>17),N=O+(x^(T|~E))+U[13]+1309151649&4294967295,O=T+(N<<21&4294967295|N>>>11),N=E+(T^(O|~x))+U[4]+4149444226&4294967295,E=O+(N<<6&4294967295|N>>>26),N=x+(O^(E|~T))+U[11]+3174756917&4294967295,x=E+(N<<10&4294967295|N>>>22),N=T+(E^(x|~O))+U[2]+718787259&4294967295,T=x+(N<<15&4294967295|N>>>17),N=O+(x^(T|~E))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(T+(N<<21&4294967295|N>>>11))&4294967295,k.g[2]=k.g[2]+T&4294967295,k.g[3]=k.g[3]+x&4294967295}r.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var O=E-this.blockSize,U=this.B,T=this.h,x=0;x<E;){if(T==0)for(;x<=O;)i(this,k,x),x+=this.blockSize;if(typeof k=="string"){for(;x<E;)if(U[T++]=k.charCodeAt(x++),T==this.blockSize){i(this,U),T=0;break}}else for(;x<E;)if(U[T++]=k[x++],T==this.blockSize){i(this,U),T=0;break}}this.h=T,this.o+=E},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var O=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=O&255,O/=256;for(this.u(k),k=Array(16),E=O=0;4>E;++E)for(var U=0;32>U;U+=8)k[O++]=this.g[E]>>>U&255;return k};function s(k,E){var O=a;return Object.prototype.hasOwnProperty.call(O,k)?O[k]:O[k]=E(k)}function o(k,E){this.h=E;for(var O=[],U=!0,T=k.length-1;0<=T;T--){var x=k[T]|0;U&&x==E||(O[T]=x,U=!1)}this.g=O}var a={};function l(k){return-128<=k&&128>k?s(k,function(E){return new o([E|0],0>E?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return C(u(-k));for(var E=[],O=1,U=0;k>=O;U++)E[U]=k/O|0,O*=4294967296;return new o(E,0)}function d(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return C(d(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(E,8)),U=p,T=0;T<k.length;T+=8){var x=Math.min(8,k.length-T),N=parseInt(k.substring(T,T+x),E);8>x?(x=u(Math.pow(E,x)),U=U.j(x).add(u(N))):(U=U.j(O),U=U.add(u(N)))}return U}var p=l(0),v=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(S(this))return-C(this).m();for(var k=0,E=1,O=0;O<this.g.length;O++){var U=this.i(O);k+=(0<=U?U:4294967296+U)*E,E*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P(this))return"0";if(S(this))return"-"+C(this).toString(k);for(var E=u(Math.pow(k,6)),O=this,U="";;){var T=$(O,E).g;O=w(O,T.j(E));var x=((0<O.g.length?O.g[0]:O.h)>>>0).toString(k);if(O=T,P(O))return x+U;for(;6>x.length;)x="0"+x;U=x+U}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function P(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function S(k){return k.h==-1}n.l=function(k){return k=w(this,k),S(k)?-1:P(k)?0:1};function C(k){for(var E=k.g.length,O=[],U=0;U<E;U++)O[U]=~k.g[U];return new o(O,~k.h).add(v)}n.abs=function(){return S(this)?C(this):this},n.add=function(k){for(var E=Math.max(this.g.length,k.g.length),O=[],U=0,T=0;T<=E;T++){var x=U+(this.i(T)&65535)+(k.i(T)&65535),N=(x>>>16)+(this.i(T)>>>16)+(k.i(T)>>>16);U=N>>>16,x&=65535,N&=65535,O[T]=N<<16|x}return new o(O,O[O.length-1]&-2147483648?-1:0)};function w(k,E){return k.add(C(E))}n.j=function(k){if(P(this)||P(k))return p;if(S(this))return S(k)?C(this).j(C(k)):C(C(this).j(k));if(S(k))return C(this.j(C(k)));if(0>this.l(g)&&0>k.l(g))return u(this.m()*k.m());for(var E=this.g.length+k.g.length,O=[],U=0;U<2*E;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var T=0;T<k.g.length;T++){var x=this.i(U)>>>16,N=this.i(U)&65535,X=k.i(T)>>>16,ge=k.i(T)&65535;O[2*U+2*T]+=N*ge,b(O,2*U+2*T),O[2*U+2*T+1]+=x*ge,b(O,2*U+2*T+1),O[2*U+2*T+1]+=N*X,b(O,2*U+2*T+1),O[2*U+2*T+2]+=x*X,b(O,2*U+2*T+2)}for(U=0;U<E;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=E;U<2*E;U++)O[U]=0;return new o(O,0)};function b(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function R(k,E){this.g=k,this.h=E}function $(k,E){if(P(E))throw Error("division by zero");if(P(k))return new R(p,p);if(S(k))return E=$(C(k),E),new R(C(E.g),C(E.h));if(S(E))return E=$(k,C(E)),new R(C(E.g),E.h);if(30<k.g.length){if(S(k)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var O=v,U=E;0>=U.l(k);)O=W(O),U=W(U);var T=Q(O,1),x=Q(U,1);for(U=Q(U,2),O=Q(O,2);!P(U);){var N=x.add(U);0>=N.l(k)&&(T=T.add(O),x=N),U=Q(U,1),O=Q(O,1)}return E=w(k,T.j(E)),new R(T,E)}for(T=p;0<=k.l(E);){for(O=Math.max(1,Math.floor(k.m()/E.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),x=u(O),N=x.j(E);S(N)||0<N.l(k);)O-=U,x=u(O),N=x.j(E);P(x)&&(x=v),T=T.add(x),k=w(k,N)}return new R(T,k)}n.A=function(k){return $(this,k).h},n.and=function(k){for(var E=Math.max(this.g.length,k.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)&k.i(U);return new o(O,this.h&k.h)},n.or=function(k){for(var E=Math.max(this.g.length,k.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)|k.i(U);return new o(O,this.h|k.h)},n.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),O=[],U=0;U<E;U++)O[U]=this.i(U)^k.i(U);return new o(O,this.h^k.h)};function W(k){for(var E=k.g.length+1,O=[],U=0;U<E;U++)O[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(O,k.h)}function Q(k,E){var O=E>>5;E%=32;for(var U=k.g.length-O,T=[],x=0;x<U;x++)T[x]=0<E?k.i(x+O)>>>E|k.i(x+O+1)<<32-E:k.i(x+O);return new o(T,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Lu=o}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FP,ff,MP,gg,h_,VP,jP,UP;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,A){return h==Array.prototype||h==Object.prototype||(h[_]=A.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bm=="object"&&Bm];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function i(h,_){if(_)e:{var A=r;h=h.split(".");for(var B=0;B<h.length-1;B++){var ie=h[B];if(!(ie in A))break e;A=A[ie]}h=h[h.length-1],B=A[h],_=_(B),_!=B&&_!=null&&e(A,h,{configurable:!0,writable:!0,value:_})}}function s(h,_){h instanceof String&&(h+="");var A=0,B=!1,ie={next:function(){if(!B&&A<h.length){var de=A++;return{value:_(de,h[de]),done:!1}}return B=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}i("Array.prototype.values",function(h){return h||function(){return s(this,function(_,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function u(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function d(h,_,A){return h.call.apply(h.bind,arguments)}function p(h,_,A){if(!h)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,B),h.apply(_,ie)}}return function(){return h.apply(_,arguments)}}function v(h,_,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function g(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var B=A.slice();return B.push.apply(B,arguments),h.apply(this,B)}}function P(h,_){function A(){}A.prototype=_.prototype,h.aa=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(B,ie,de){for(var Le=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)Le[_t-2]=arguments[_t];return _.prototype[ie].apply(B,Le)}}function S(h){const _=h.length;if(0<_){const A=Array(_);for(let B=0;B<_;B++)A[B]=h[B];return A}return[]}function C(h,_){for(let A=1;A<arguments.length;A++){const B=arguments[A];if(l(B)){const ie=h.length||0,de=B.length||0;h.length=ie+de;for(let Le=0;Le<de;Le++)h[ie+Le]=B[Le]}else h.push(B)}}class w{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function b(h){return/^[\s\xa0]*$/.test(h)}function R(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function $(h){return $[" "](h),h}$[" "]=function(){};var W=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function Q(h,_,A){for(const B in h)_.call(A,h[B],B,h)}function k(h,_){for(const A in h)_.call(void 0,h[A],A,h)}function E(h){const _={};for(const A in h)_[A]=h[A];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let A,B;for(let ie=1;ie<arguments.length;ie++){B=arguments[ie];for(A in B)h[A]=B[A];for(let de=0;de<O.length;de++)A=O[de],Object.prototype.hasOwnProperty.call(B,A)&&(h[A]=B[A])}}function T(h){var _=1;h=h.split(":");const A=[];for(;0<_&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function x(h){a.setTimeout(()=>{throw h},0)}function N(){var h=ue;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class X{constructor(){this.h=this.g=null}add(_,A){const B=ge.get();B.set(_,A),this.h?this.h.next=B:this.g=B,this.h=B}}var ge=new w(()=>new ve,h=>h.reset());class ve{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Z=!1,ue=new X,le=()=>{const h=a.Promise.resolve(void 0);Ie=()=>{h.then(Te)}};var Te=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(A){x(A)}var _=ge;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Z=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};a.addEventListener("test",A,_),a.removeEventListener("test",A,_)}catch{}return h}();function ee(h,_){if(G.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,B=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(W){e:{try{$(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ee.aa.h.call(this)}}P(ee,G);var se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ye=0;function _e(h,_,A,B,ie){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!B,this.ha=ie,this.key=++ye,this.da=this.fa=!1}function Me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h){this.src=h,this.g={},this.h=0}De.prototype.add=function(h,_,A,B,ie){var de=h.toString();h=this.g[de],h||(h=this.g[de]=[],this.h++);var Le=Ue(h,_,B,ie);return-1<Le?(_=h[Le],A||(_.fa=!1)):(_=new _e(_,this.src,de,!!B,ie),_.fa=A,h.push(_)),_};function ze(h,_){var A=_.type;if(A in h.g){var B=h.g[A],ie=Array.prototype.indexOf.call(B,_,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(B,ie,1),de&&(Me(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function Ue(h,_,A,B){for(var ie=0;ie<h.length;++ie){var de=h[ie];if(!de.da&&de.listener==_&&de.capture==!!A&&de.ha==B)return ie}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Ae={};function Y(h,_,A,B,ie){if(B&&B.once)return Oe(h,_,A,B,ie);if(Array.isArray(_)){for(var de=0;de<_.length;de++)Y(h,_[de],A,B,ie);return null}return A=St(A),h&&h[he]?h.K(_,A,u(B)?!!B.capture:!!B,ie):yt(h,_,A,!1,B,ie)}function yt(h,_,A,B,ie,de){if(!_)throw Error("Invalid event type");var Le=u(ie)?!!ie.capture:!!ie,_t=mt(h);if(_t||(h[lt]=_t=new De(h)),A=_t.add(_,A,B,Le,de),A.proxy)return A;if(B=tt(),A.proxy=B,B.src=h,B.listener=A,h.addEventListener)J||(ie=Le),ie===void 0&&(ie=!1),h.addEventListener(_.toString(),B,ie);else if(h.attachEvent)h.attachEvent($e(_.toString()),B);else if(h.addListener&&h.removeListener)h.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return A}function tt(){function h(A){return _.call(h.src,h.listener,A)}const _=ot;return h}function Oe(h,_,A,B,ie){if(Array.isArray(_)){for(var de=0;de<_.length;de++)Oe(h,_[de],A,B,ie);return null}return A=St(A),h&&h[he]?h.L(_,A,u(B)?!!B.capture:!!B,ie):yt(h,_,A,!0,B,ie)}function je(h,_,A,B,ie){if(Array.isArray(_))for(var de=0;de<_.length;de++)je(h,_[de],A,B,ie);else B=u(B)?!!B.capture:!!B,A=St(A),h&&h[he]?(h=h.i,_=String(_).toString(),_ in h.g&&(de=h.g[_],A=Ue(de,A,B,ie),-1<A&&(Me(de[A]),Array.prototype.splice.call(de,A,1),de.length==0&&(delete h.g[_],h.h--)))):h&&(h=mt(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ue(_,A,B,ie)),(A=-1<h?_[h]:null)&&Ge(A))}function Ge(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[he])ze(_.i,h);else{var A=h.type,B=h.proxy;_.removeEventListener?_.removeEventListener(A,B,h.capture):_.detachEvent?_.detachEvent($e(A),B):_.addListener&&_.removeListener&&_.removeListener(B),(A=mt(_))?(ze(A,h),A.h==0&&(A.src=null,_[lt]=null)):Me(h)}}}function $e(h){return h in Ae?Ae[h]:Ae[h]="on"+h}function ot(h,_){if(h.da)h=!0;else{_=new ee(_,this);var A=h.listener,B=h.ha||h.src;h.fa&&Ge(h),h=A.call(B,_)}return h}function mt(h){return h=h[lt],h instanceof De?h:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(h){return typeof h=="function"?h:(h[bt]||(h[bt]=function(_){return h.handleEvent(_)}),h[bt])}function dt(){F.call(this),this.i=new De(this),this.M=this,this.F=null}P(dt,F),dt.prototype[he]=!0,dt.prototype.removeEventListener=function(h,_,A,B){je(this,h,_,A,B)};function Et(h,_){var A,B=h.F;if(B)for(A=[];B;B=B.F)A.push(B);if(h=h.M,B=_.type||_,typeof _=="string")_=new G(_,h);else if(_ instanceof G)_.target=_.target||h;else{var ie=_;_=new G(B,h),U(_,ie)}if(ie=!0,A)for(var de=A.length-1;0<=de;de--){var Le=_.g=A[de];ie=ct(Le,B,!0,_)&&ie}if(Le=_.g=h,ie=ct(Le,B,!0,_)&&ie,ie=ct(Le,B,!1,_)&&ie,A)for(de=0;de<A.length;de++)Le=_.g=A[de],ie=ct(Le,B,!1,_)&&ie}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var A=h.g[_],B=0;B<A.length;B++)Me(A[B]);delete h.g[_],h.h--}}this.F=null},dt.prototype.K=function(h,_,A,B){return this.i.add(String(h),_,!1,A,B)},dt.prototype.L=function(h,_,A,B){return this.i.add(String(h),_,!0,A,B)};function ct(h,_,A,B){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,de=0;de<_.length;++de){var Le=_[de];if(Le&&!Le.da&&Le.capture==A){var _t=Le.listener,Ht=Le.ha||Le.src;Le.fa&&ze(h.i,Le),ie=_t.call(Ht,B)!==!1&&ie}}return ie&&!B.defaultPrevented}function Nt(h,_,A){if(typeof h=="function")A&&(h=v(h,A));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function Ke(h){h.g=Nt(()=>{h.g=null,h.i&&(h.i=!1,Ke(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class lr extends F{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rt(h){F.call(this),this.h=h,this.g={}}P(Rt,F);var si=[];function $t(h){Q(h.g,function(_,A){this.g.hasOwnProperty(A)&&Ge(_)},h),h.g={}}Rt.prototype.N=function(){Rt.aa.N.call(this),$t(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=a.JSON.stringify,Xi=a.JSON.parse,Bt=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Is(){}Is.prototype.h=null;function fn(h){return h.h||(h.h=h.i())}function oi(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ln(){G.call(this,"d")}P(ln,G);function gt(){G.call(this,"c")}P(gt,G);var Ct={},Hs=null;function Nn(){return Hs=Hs||new dt}Ct.La="serverreachability";function xi(h){G.call(this,Ct.La,h)}P(xi,G);function Nr(h){const _=Nn();Et(_,new xi(_))}Ct.STAT_EVENT="statevent";function ut(h,_){G.call(this,Ct.STAT_EVENT,h),this.stat=_}P(ut,G);function rn(h){const _=Nn();Et(_,new ut(_,h))}Ct.Ma="timingevent";function Pi(h,_){G.call(this,Ct.Ma,h),this.size=_}P(Pi,G);function Jn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function kn(h,_,A,B,ie,de){h.info(function(){if(h.g)if(de)for(var Le="",_t=de.split("&"),Ht=0;Ht<_t.length;Ht++){var wt=_t[Ht].split("=");if(1<wt.length){var sn=wt[0];wt=wt[1];var Un=sn.split("_");Le=2<=Un.length&&Un[1]=="type"?Le+(sn+"="+wt+"&"):Le+(sn+"=redacted&")}}else Le=null;else Le=de;return"XMLHTTP REQ ("+B+") [attempt "+ie+"]: "+_+`
`+A+`
`+Le})}function $r(h,_,A,B,ie,de,Le){h.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ie+"]: "+_+`
`+A+`
`+de+" "+Le})}function Ni(h,_,A,B){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+ki(h,A)+(B?" "+B:"")})}function bs(h,_){h.info(function(){return"TIMEOUT: "+_})}pn.prototype.info=function(){};function ki(h,_){if(!h.g)return _;if(!_)return null;try{var A=JSON.parse(_);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var B=A[h];if(!(2>B.length)){var ie=B[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Le=1;Le<ie.length;Le++)ie[Le]=""}}}}return Zt(A)}catch{return _}}var kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function yr(){}P(yr,Is),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},li=new yr;function nr(h,_,A,B){this.j=h,this.i=_,this.l=A,this.R=B||1,this.U=new Rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ks}function Ks(){this.i=null,this.g="",this.h=!1}var Ao={},Qs={};function Js(h,_,A){h.L=1,h.v=Ia(ci(_)),h.m=A,h.P=!0,To(h,null)}function To(h,_){h.F=Date.now(),va(h),h.A=ci(h.v);var A=h.A,B=h.R;Array.isArray(B)||(B=[String(B)]),vc(A.i,"t",B),h.C=0,A=h.j.J,h.h=new Ks,h.g=K(h.j,A?_:null,!h.m),0<h.O&&(h.M=new lr(v(h.Y,h,h.g),h.O)),_=h.U,A=h.g,B=h.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(si[0]=ie.toString()),ie=si);for(var de=0;de<ie.length;de++){var Le=Y(A,ie[de],B||_.handleEvent,!1,_.h||_);if(!Le)break;_.g[Le.key]=Le}_=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Nr(),kn(h.i,h.u,h.A,h.l,h.R,h.m)}nr.prototype.ca=function(h){h=h.target;const _=this.M;_&&Di(h)==3?_.j():this.Y(h)},nr.prototype.Y=function(h){try{if(h==this.g)e:{const Un=Di(this.g);var _=this.g.Ba();const is=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Ss(this.g)))){this.J||Un!=4||_==7||(_==8||0>=is?Nr(3):Nr(2)),ya(this);var A=this.g.Z();this.X=A;t:if(Wl(this)){var B=Ss(this.g);h="";var ie=B.length,de=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),xo(this);var Le="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,h+=this.h.i.decode(B[_],{stream:!(de&&_==ie-1)});B.length=0,this.h.g+=h,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=A==200,$r(this.i,this.u,this.A,this.l,this.R,Un,A),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,Ht=this.g;if((_t=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(_t)){var wt=_t;break t}}wt=null}if(A=wt)Ni(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gl(this,A);else{this.o=!1,this.s=3,rn(12),Ri(this),xo(this);break e}}if(this.P){A=!0;let _r;for(;!this.J&&this.C<Le.length;)if(_r=Id(this,Le),_r==Qs){Un==4&&(this.s=4,rn(14),A=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==Ao){this.s=4,rn(15),Ni(this.i,this.l,Le,"[Invalid Chunk]"),A=!1;break}else Ni(this.i,this.l,_r,null),Gl(this,_r);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||Le.length!=0||this.h.h||(this.s=1,rn(16),A=!1),this.o=this.o&&A,!A)Ni(this.i,this.l,Le,"[Invalid Chunked Response]"),Ri(this),xo(this);else if(0<Le.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),iu(sn),sn.M=!0,rn(11))}}else Ni(this.i,this.l,Le,null),Gl(this,Le);Un==4&&Ri(this),this.o&&!this.J&&(Un==4?Ra(this.j,this):(this.o=!1,va(this)))}else Oi(this.g),A==400&&0<Le.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),Ri(this),xo(this)}}}catch{}finally{}};function Wl(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Id(h,_){var A=h.C,B=_.indexOf(`
`,A);return B==-1?Qs:(A=Number(_.substring(A,B)),isNaN(A)?Ao:(B+=1,B+A>_.length?Qs:(_=_.slice(B,B+A),h.C=B+A,_)))}nr.prototype.cancel=function(){this.J=!0,Ri(this)};function va(h){h.S=Date.now()+h.I,So(h,h.I)}function So(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Jn(v(h.ba,h),_)}function ya(h){h.B&&(a.clearTimeout(h.B),h.B=null)}nr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(bs(this.i,this.A),this.L!=2&&(Nr(),rn(17)),Ri(this),this.s=2,xo(this)):So(this,this.S-h)};function xo(h){h.j.G==0||h.J||Ra(h.j,h)}function Ri(h){ya(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,$t(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Gl(h,_){try{var A=h.j;if(A.G!=0&&(A.g==h||mn(A.h,h))){if(!h.K&&mn(A.h,h)&&A.G==3){try{var B=A.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ie=B;if(ie[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)rs(A),Ps(A);else break e;ka(A),rn(18)}}else A.za=ie[1],0<A.za-A.T&&37500>ie[2]&&A.F&&A.v==0&&!A.C&&(A.C=Jn(v(A.Za,A),6e3));if(1>=fc(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Fi(A,11)}else if((h.K||A.g==h)&&rs(A),!b(_))for(ie=A.Da.g.parse(_),_=0;_<ie.length;_++){let wt=ie[_];if(A.T=wt[0],wt=wt[1],A.G==2)if(wt[0]=="c"){A.K=wt[1],A.ia=wt[2];const sn=wt[3];sn!=null&&(A.la=sn,A.j.info("VER="+A.la));const Un=wt[4];Un!=null&&(A.Aa=Un,A.j.info("SVER="+A.Aa));const is=wt[5];is!=null&&typeof is=="number"&&0<is&&(B=1.5*is,A.L=B,A.j.info("backChannelRequestTimeoutMs_="+B)),B=A;const _r=h.g;if(_r){const ks=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var de=B.h;de.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(_a(de,de.h),de.h=null))}if(B.D){const Lo=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(B.ya=Lo,Wt(B.I,B.D,Lo))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),B=A;var Le=h;if(B.qa=L(B,B.J?B.ia:null,B.W),Le.K){Hl(B.h,Le);var _t=Le,Ht=B.L;Ht&&(_t.I=Ht),_t.B&&(ya(_t),va(_t)),B.g=Le}else Na(B);0<A.i.length&&Zs(A)}else wt[0]!="stop"&&wt[0]!="close"||Fi(A,7);else A.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Fi(A,7):tu(A):wt[0]!="noop"&&A.l&&A.l.ta(wt),A.v=0)}}Nr(4)}catch{}}var hc=class{constructor(h,_){this.g=h,this.map=_}};function dc(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fc(h){return h.h?1:h.g?h.g.size:0}function mn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function _a(h,_){h.g?h.g.add(_):h.h=_}function Hl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}dc.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Kl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const A of h.g.values())_=_.concat(A.D);return _}return S(h.i)}function Ql(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var _=[],A=h.length,B=0;B<A;B++)_.push(h[B]);return _}_=[],A=0;for(B in h)_[A++]=h[B];return _}function bd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var _=[];h=h.length;for(var A=0;A<h;A++)_.push(A);return _}_=[],A=0;for(const B in h)_[A++]=B;return _}}}function ui(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var A=bd(h),B=Ql(h),ie=B.length,de=0;de<ie;de++)_.call(void 0,B[de],A&&A[de],h)}var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rr(h,_){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var B=h[A].indexOf("="),ie=null;if(0<=B){var de=h[A].substring(0,B);ie=h[A].substring(B+1)}else de=h[A];_(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Ci(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ci){this.h=h.h,wa(this,h.j),this.o=h.o,this.g=h.g,ko(this,h.s),this.l=h.l;var _=h.i,A=new Rn;A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),pc(this,A),this.m=h.m}else h&&(_=String(h).match(No))?(this.h=!1,wa(this,_[1]||"",!0),this.o=Es(_[2]||""),this.g=Es(_[3]||"",!0),ko(this,_[4]),this.l=Es(_[5]||"",!0),pc(this,_[6]||"",!0),this.m=Es(_[7]||"")):(this.h=!1,this.i=new Rn(null,this.h))}Ci.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Ro(_,mc,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ro(_,mc,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Ro(A,A.charAt(0)=="/"?ba:As,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Ro(A,gc)),h.join("")};function ci(h){return new Ci(h)}function wa(h,_,A){h.j=A?Es(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ko(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function pc(h,_,A){_ instanceof Rn?(h.i=_,es(h.i,h.h)):(A||(_=Ro(_,Ea)),h.i=new Rn(_,h.h))}function Wt(h,_,A){h.i.set(_,A)}function Ia(h){return Wt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Es(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ro(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,Ed),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ed(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mc=/[#\/\?@]/g,As=/[#\?:]/g,ba=/[#\?]/g,Ea=/[#\?@]/g,gc=/#/g;function Rn(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Zi(h){h.g||(h.g=new Map,h.h=0,h.i&&Rr(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}n=Rn.prototype,n.add=function(h,_){Zi(this),this.i=null,h=Ys(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function Jl(h,_){Zi(h),_=Ys(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function vt(h,_){return Zi(h),_=Ys(h,_),h.g.has(_)}n.forEach=function(h,_){Zi(this),this.g.forEach(function(A,B){A.forEach(function(ie){h.call(_,ie,B,this)},this)},this)},n.na=function(){Zi(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),A=[];for(let B=0;B<_.length;B++){const ie=h[B];for(let de=0;de<ie.length;de++)A.push(_[B])}return A},n.V=function(h){Zi(this);let _=[];if(typeof h=="string")vt(this,h)&&(_=_.concat(this.g.get(Ys(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)_=_.concat(h[A])}return _},n.set=function(h,_){return Zi(this),this.i=null,h=Ys(this,h),vt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function vc(h,_,A){Jl(h,_),0<A.length&&(h.i=null,h.g.set(Ys(h,_),S(A)),h.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var A=0;A<_.length;A++){var B=_[A];const de=encodeURIComponent(String(B)),Le=this.V(B);for(B=0;B<Le.length;B++){var ie=de;Le[B]!==""&&(ie+="="+encodeURIComponent(String(Le[B]))),h.push(ie)}}return this.i=h.join("&")};function Ys(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function es(h,_){_&&!h.j&&(Zi(h),h.i=null,h.g.forEach(function(A,B){var ie=B.toLowerCase();B!=ie&&(Jl(this,B),vc(this,ie,A))},h)),h.j=_}function yc(h,_){const A=new pn;if(a.Image){const B=new Image;B.onload=g(Wr,A,"TestLoadImage: loaded",!0,_,B),B.onerror=g(Wr,A,"TestLoadImage: error",!1,_,B),B.onabort=g(Wr,A,"TestLoadImage: abort",!1,_,B),B.ontimeout=g(Wr,A,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=h}else _(!1)}function _c(h,_){const A=new pn,B=new AbortController,ie=setTimeout(()=>{B.abort(),Wr(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:B.signal}).then(de=>{clearTimeout(ie),de.ok?Wr(A,"TestPingServer: ok",!0,_):Wr(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),Wr(A,"TestPingServer: error",!1,_)})}function Wr(h,_,A,B,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),B(A)}catch{}}function Yl(){this.g=new Bt}function Ad(h,_,A){const B=A||"";try{ui(h,function(ie,de){let Le=ie;u(ie)&&(Le=Zt(ie)),_.push(B+de+"="+encodeURIComponent(Le))})}catch(ie){throw _.push(B+"type="+encodeURIComponent("_badmap")),ie}}function Aa(h){this.l=h.Ub||null,this.j=h.eb||!1}P(Aa,Is),Aa.prototype.g=function(){return new Ta(this.l,this.j)},Aa.prototype.i=function(h){return function(){return h}}({});function Ta(h,_){dt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ta,dt),n=Ta.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,hi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Li(this):hi(this),this.readyState==3&&Sa(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Li(this))},n.Qa=function(h){this.g&&(this.response=h,Li(this))},n.ga=function(){this.g&&Li(this)};function Li(h){h.readyState=4,h.l=null,h.j=null,h.v=null,hi(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function hi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function wc(h){let _="";return Q(h,function(A,B){_+=B,_+=":",_+=A,_+=`\r
`}),_}function Ts(h,_,A){e:{for(B in A){var B=!1;break e}B=!0}B||(A=wc(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):Wt(h,_,A))}function en(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(en,dt);var xa=/^https?$/i,Ic=["POST","PUT"];n=en.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,A,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?fn(this.o):fn(li),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(de){Xl(this,de);return}if(h=A||"",A=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ie in B)A.set(ie,B[ie]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const de of B.keys())A.set(de,B.get(de));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(A.keys()).find(de=>de.toLowerCase()=="content-type"),ie=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ic,_,void 0))||B||ie||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Le]of A)this.g.setRequestHeader(de,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ts(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){Xl(this,de)}};function Xl(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Zl(h),Gr(h)}function Zl(h){h.A||(h.A=!0,Et(h,"complete"),Et(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Et(this,"complete"),Et(this,"abort"),Gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),en.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eu(this):this.bb())},n.bb=function(){eu(this)};function eu(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Di(h)!=4||h.Z()!=2)){if(h.u&&Di(h)==4)Nt(h.Ea,0,h);else if(Et(h,"readystatechange"),Di(h)==4){h.h=!1;try{const Le=h.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var B;if(B=Le===0){var ie=String(h.D).match(No)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),B=!xa.test(ie?ie.toLowerCase():"")}A=B}if(A)Et(h,"complete"),Et(h,"success");else{h.m=6;try{var de=2<Di(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",Zl(h)}}finally{Gr(h)}}}}function Gr(h,_){if(h.g){ts(h);const A=h.g,B=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Et(h,"ready");try{A.onreadystatechange=B}catch{}}}function ts(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Di(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Xi(_)}};function Ss(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Oi(h){const _={};h=(h.g&&2<=Di(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<h.length;B++){if(b(h[B]))continue;var A=T(h[B]);const ie=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const de=_[ie]||[];_[ie]=de,de.push(A)}k(_,function(B){return B.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function Xs(h){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,h),this.cb=xs("retryDelaySeedMs",1e4,h),this.Wa=xs("forwardChannelMaxRetries",2,h),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new dc(h&&h.concurrentRequestLimit),this.Da=new Yl,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xs.prototype,n.la=8,n.G=1,n.connect=function(h,_,A,B){rn(0),this.W=h,this.H=_||{},A&&B!==void 0&&(this.H.OSID=A,this.H.OAID=B),this.F=this.X,this.I=L(this,null,this.W),Zs(this)};function tu(h){if(bc(h),h.G==3){var _=h.U++,A=ci(h.I);if(Wt(A,"SID",h.K),Wt(A,"RID",_),Wt(A,"TYPE","terminate"),ns(h,A),_=new nr(h,h.j,_),_.L=2,_.v=Ia(ci(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=_.v,A=!0),A||(_.g=K(_.j,null),_.g.ea(_.v)),_.F=Date.now(),va(_)}m(h)}function Ps(h){h.g&&(iu(h),h.g.cancel(),h.g=null)}function bc(h){Ps(h),h.u&&(a.clearTimeout(h.u),h.u=null),rs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Zs(h){if(!Po(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ie||le(),Z||(Ie(),Z=!0),ue.add(_,h),h.B=0}}function nu(h,_){return fc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Jn(v(h.Ga,h,_),Ns(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ie=new nr(this,this.j,h);let de=this.o;if(this.S&&(de?(de=E(de),U(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var B=this.i[A];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=Pa(this,ie,_),A=ci(this.I),Wt(A,"RID",h),Wt(A,"CVER",22),this.D&&Wt(A,"X-HTTP-Session-Id",this.D),ns(this,A),de&&(this.O?_="headers="+encodeURIComponent(String(wc(de)))+"&"+_:this.m&&Ts(A,this.m,de)),_a(this.h,ie),this.Ua&&Wt(A,"TYPE","init"),this.P?(Wt(A,"$req",_),Wt(A,"SID","null"),ie.T=!0,Js(ie,A,null)):Js(ie,A,_),this.G=2}}else this.G==3&&(h?ru(this,h):this.i.length==0||Po(this.h)||ru(this))};function ru(h,_){var A;_?A=_.l:A=h.U++;const B=ci(h.I);Wt(B,"SID",h.K),Wt(B,"RID",A),Wt(B,"AID",h.T),ns(h,B),h.m&&h.o&&Ts(B,h.m,h.o),A=new nr(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Pa(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),_a(h.h,A),Js(A,B,_)}function ns(h,_){h.H&&Q(h.H,function(A,B){Wt(_,B,A)}),h.l&&ui({},function(A,B){Wt(_,B,A)})}function Pa(h,_,A){A=Math.min(h.i.length,A);var B=h.l?v(h.l.Na,h.l,h):null;e:{var ie=h.i;let de=-1;for(;;){const Le=["count="+A];de==-1?0<A?(de=ie[0].g,Le.push("ofs="+de)):de=0:Le.push("ofs="+de);let _t=!0;for(let Ht=0;Ht<A;Ht++){let wt=ie[Ht].g;const sn=ie[Ht].map;if(wt-=de,0>wt)de=Math.max(0,ie[Ht].g-100),_t=!1;else try{Ad(sn,Le,"req"+wt+"_")}catch{B&&B(sn)}}if(_t){B=Le.join("&");break e}}}return h=h.i.splice(0,A),_.D=h,B}function Na(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ie||le(),Z||(Ie(),Z=!0),ue.add(_,h),h.v=0}}function ka(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Jn(v(h.Fa,h),Ns(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Co(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Jn(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Ps(this),Co(this))};function iu(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Co(h){h.g=new nr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=ci(h.qa);Wt(_,"RID","rpc"),Wt(_,"SID",h.K),Wt(_,"AID",h.T),Wt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Wt(_,"TO",h.ja),Wt(_,"TYPE","xmlhttp"),ns(h,_),h.m&&h.o&&Ts(_,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=Ia(ci(_)),A.m=null,A.P=!0,To(A,h)}n.Za=function(){this.C!=null&&(this.C=null,Ps(this),ka(this),rn(19))};function rs(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Ra(h,_){var A=null;if(h.g==_){rs(h),iu(h),h.g=null;var B=2}else if(mn(h.h,_))A=_.D,Hl(h.h,_),B=1;else return;if(h.G!=0){if(_.o)if(B==1){A=_.m?_.m.length:0,_=Date.now()-_.F;var ie=h.B;B=Nn(),Et(B,new Pi(B,A)),Zs(h)}else Na(h);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(B==1&&nu(h,_)||B==2&&ka(h)))switch(A&&0<A.length&&(_=h.h,_.i=_.i.concat(A)),ie){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function Ns(h,_){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*_}function Fi(h,_){if(h.j.info("Error code "+_),_==2){var A=v(h.fb,h),B=h.Xa;const ie=!B;B=new Ci(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wa(B,"https"),Ia(B),ie?yc(B.toString(),A):_c(B.toString(),A)}else rn(2);h.G=0,h.l&&h.l.sa(_),m(h),bc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function m(h){if(h.G=0,h.ka=[],h.l){const _=Kl(h.h);(_.length!=0||h.i.length!=0)&&(C(h.ka,_),C(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function L(h,_,A){var B=A instanceof Ci?ci(A):new Ci(A);if(B.g!="")_&&(B.g=_+"."+B.g),ko(B,B.s);else{var ie=a.location;B=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new Ci(null);B&&wa(de,B),_&&(de.g=_),ie&&ko(de,ie),A&&(de.l=A),B=de}return A=h.D,_=h.ya,A&&_&&Wt(B,A,_),Wt(B,"VER",h.la),ns(h,B),B}function K(h,_,A){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new en(new Aa({eb:A})):new en(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function te(){}n=te.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ce(){}ce.prototype.g=function(h,_){return new we(h,_)};function we(h,_){dt.call(this),this.g=new Xs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!b(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!b(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new nt(this)}P(we,dt),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){tu(this.g)},we.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=Zt(h),h=A);_.i.push(new hc(_.Ya++,h)),_.G==3&&Zs(_)},we.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,we.aa.N.call(this)};function ke(h){ln.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}P(ke,ln);function Qe(){gt.call(this),this.status=1}P(Qe,gt);function nt(h){this.g=h}P(nt,te),nt.prototype.ua=function(){Et(this.g,"a")},nt.prototype.ta=function(h){Et(this.g,new ke(h))},nt.prototype.sa=function(h){Et(this.g,new Qe)},nt.prototype.ra=function(){Et(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,UP=function(){return new ce},jP=function(){return Nn()},VP=Ct,h_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,gg=kr,ai.COMPLETE="complete",MP=ai,oi.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",dt.prototype.listen=dt.prototype.K,ff=oi,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,FP=en}).apply(typeof Bm<"u"?Bm:typeof self<"u"?self:typeof window<"u"?window:{});const nE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new Np("@firebase/firestore");function Kc(){return Sl.logLevel}function fM(n){Sl.setLogLevel(n)}function Ce(n,...e){if(Sl.logLevel<=kt.DEBUG){const t=e.map(Ew);Sl.debug(`Firestore (${dd}): ${n}`,...t)}}function Hn(n,...e){if(Sl.logLevel<=kt.ERROR){const t=e.map(Ew);Sl.error(`Firestore (${dd}): ${n}`,...t)}}function _o(n,...e){if(Sl.logLevel<=kt.WARN){const t=e.map(Ew);Sl.warn(`Firestore (${dd}): ${n}`,...t)}}function Ew(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n="Unexpected state"){const e=`FIRESTORE (${dd}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function rt(n,e){n||Ye()}function pM(n,e){n||Ye()}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class gM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vM{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string"),new BP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new fr(e)}}class yM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _M{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){rt(this.o===void 0);const r=s=>{s.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string"),this.R=t.token,new wM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function Wh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function zP(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.timestamp=e}static fromTimestamp(e){return new st(e)}static min(){return new st(new An(0,0))}static max(){return new st(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(),r===void 0?r=e.length-t:r>e.length-t&&Ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return lp.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dt extends lp{construct(e,t,r){return new Dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Dt(t)}static emptyPath(){return new Dt([])}}const EM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends lp{construct(e,t,r){return new bn(e,t,r)}static isValidIdentifier(e){return EM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Re(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Re(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Re(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Dt.fromString(e))}static fromName(e){return new qe(Dt.fromString(e).popFirst(5))}static empty(){return new qe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function d_(n){return n.fields.find(e=>e.kind===2)}function mu(n){return n.fields.filter(e=>e.kind!==2)}h0.UNKNOWN_ID=-1;class vg{constructor(e,t){this.fieldPath=e,this.kind=t}}class up{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new up(0,Ki.min())}}function $P(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=st.fromTimestamp(r===1e9?new An(t+1,0):new An(t,r));return new Ki(i,qe.empty(),e)}function WP(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(st.min(),qe.empty(),-1)}static max(){return new Ki(st.max(),qe.empty(),-1)}}function Aw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:Tt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==GP)throw n;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new me((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Sr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Nf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Tw(r.target.error);this.V.reject(new Nf(e,i))}}static open(e,t,r,i){try{return new h1(t,e.transaction(i,r))}catch(s){throw new Nf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TM(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.p=r,ho.S(Ft())===12.2&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ce("SimpleDb","Removing database:",e),vu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ep())return!1;if(ho.v())return!0;const e=Ft(),t=ho.S(e),r=0<t&&t<10,i=KP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Ce("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Nf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Re(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Re(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Nf(e,o))},i.onupgradeneeded=s=>{Ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Ce("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=h1.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),me.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(Ce("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function KP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class AM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vu(this.B.delete())}}class Nf extends Re{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bl(n){return n.name==="IndexedDbTransactionError"}class TM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vu(r)}add(e){return Ce("SimpleDb","ADD",this.store.name,e,e),vu(this.store.add(e))}get(e){return vu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ce("SimpleDb","DELETE",this.store.name,e),vu(this.store.delete(e))}count(){return Ce("SimpleDb","COUNT",this.store.name),vu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new me((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new me((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const o=Tw(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new me((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new AM(a),u=t(a.primaryKey,a.value,l);if(u instanceof me){const d=u.catch(p=>(l.done(),me.reject(p)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>me.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vu(n){return new me((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Tw(r.target.error);t(i)}})}let rE=!1;function Tw(n){const e=ho.S(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rE||(rE=!0,setTimeout(()=>{throw r},0)),r}}return n}class SM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Ce("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Bl(t)?Ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ul(t)}await this.X(6e4)})}}class xM{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return me.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Ce("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ce("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=WP(s);Aw(o,r)>0&&(r=o)}),new Ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wi.oe=-1;function Mp(n){return n==null}function cp(n){return n===0&&1/n==-1/0}function QP(n){return typeof n=="number"&&Number.isInteger(n)&&!cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iE(e)),e=PM(n.get(t),e);return iE(e)}function PM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function iE(n){return n+""}function oo(n){const e=n.length;if(rt(e>=2),e===2)return rt(n.charAt(0)===""&&n.charAt(1)===""),Dt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&Ye(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Ye()}s=o+2}return new Dt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,e){return[n,ei(e)]}function JP(n,e,t){return[n,ei(e),t]}const NM={},kM=["prefixPath","collectionGroup","readTime","documentId"],RM=["prefixPath","collectionGroup","documentId"],CM=["collectionGroup","readTime","prefixPath","documentId"],LM=["canonicalId","targetId"],DM=["targetId","path"],OM=["path","targetId"],FM=["collectionId","parent"],MM=["indexId","uid"],VM=["uid","sequenceNumber"],jM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UM=["indexId","uid","orderedDocumentKey"],BM=["userId","collectionPath","documentId"],qM=["userId","collectionPath","largestBatchId"],zM=["userId","collectionGroup","largestBatchId"],YP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$M=[...YP,"documentOverlays"],XP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZP=XP,Sw=[...ZP,"indexConfiguration","indexState","indexEntries"],WM=Sw,GM=[...Sw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends HP{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ar(n,e){const t=We(n);return ho.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qm(this.root,e,this.comparator,!0)}}class qm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=s??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Er(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ye();const e=this.left.check();if(e!==this.right.check())throw Ye();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1;Er.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye()}get value(){throw Ye()}get color(){throw Ye()}get left(){throw Ye()}get right(){throw Ye()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new nn(bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tN("Invalid base64 string: "+s):s}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const KM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(n){if(rt(!!n),typeof n=="string"){let e=0;const t=KM.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(n.seconds),nanos:wn(n.nanos)}}function wn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xl(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function xw(n){const e=n.mapValue.fields.__previous_value__;return d1(e)?xw(e):e}function hp(n){const e=aa(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Pl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_g={nullValue:"NULL_VALUE"};function Gu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d1(n)?4:nN(n)?9007199254740991:f1(n)?10:11:Ye()}function wo(n,e){if(n===e)return!0;const t=Gu(n);if(t!==Gu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hp(n).isEqual(hp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=aa(i.timestampValue),a=aa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return xl(i.bytesValue).isEqual(xl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return wn(i.geoPointValue.latitude)===wn(s.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wn(i.integerValue)===wn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wn(i.doubleValue),a=wn(s.doubleValue);return o===a?cp(o)===cp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Wh(n.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oE(o)!==oE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!wo(o[l],a[l])))return!1;return!0}(n,e);default:return Ye()}}function dp(n,e){return(n.values||[]).find(t=>wo(t,e))!==void 0}function Nl(n,e){if(n===e)return 0;const t=Gu(n),r=Gu(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wn(s.integerValue||s.doubleValue),l=wn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return lE(n.timestampValue,e.timestampValue);case 4:return lE(hp(n),hp(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=xl(s),l=xl(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Tt(a[u],l[u]);if(d!==0)return d}return Tt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(wn(s.latitude),wn(o.latitude));return a!==0?a:Tt(wn(s.longitude),wn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return uE(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const p=s.fields||{},v=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,P=(l=v.value)===null||l===void 0?void 0:l.arrayValue,S=Tt(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=P==null?void 0:P.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:uE(g,P)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===cl.mapValue&&o===cl.mapValue)return 0;if(s===cl.mapValue)return 1;if(o===cl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const v=Tt(l[p],d[p]);if(v!==0)return v;const g=Nl(a[l[p]],u[d[p]]);if(g!==0)return g}return Tt(l.length,d.length)}(n.mapValue,e.mapValue);default:throw Ye()}}function lE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tt(n,e);const t=aa(n),r=aa(e),i=Tt(t.seconds,r.seconds);return i!==0?i:Tt(t.nanos,r.nanos)}function uE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Nl(t[i],r[i]);if(s)return s}return Tt(t.length,r.length)}function Gh(n){return p_(n)}function p_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=aa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return qe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=p_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${p_(t.fields[o])}`;return i+"}"}(n.mapValue):Ye()}function Hu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function m_(n){return!!n&&"integerValue"in n}function fp(n){return!!n&&"arrayValue"in n}function cE(n){return!!n&&"nullValue"in n}function hE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wg(n){return!!n&&"mapValue"in n}function f1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function kf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function JM(n){return"nullValue"in n?_g:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hu(Pl.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?f1(n)?rN:{mapValue:{}}:Ye()}function YM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hu(Pl.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rN:"mapValue"in n?f1(n)?{mapValue:{}}:cl:Ye()}function dE(n,e){const t=Nl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fE(n,e){const t=Nl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kf(t)}setAll(e){let t=bn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=kf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());wg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ar(kf(this.value))}}function iN(n){const e=[];return sc(n.fields,(t,r)=>{const i=new bn([t]);if(wg(r)){const s=iN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vn(e,0,st.min(),st.min(),st.min(),Ar.empty(),0)}static newFoundDocument(e,t,r,i){return new vn(e,1,t,st.min(),r,i,0)}static newNoDocument(e,t){return new vn(e,2,t,st.min(),st.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,st.min(),st.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.position=e,this.inclusive=t}}function pE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=qe.comparator(qe.fromName(o.referenceValue),t.key):r=Nl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t="asc"){this.field=e,this.dir=t}}function XM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{}class Ot extends sN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZM(e,t,r):t==="array-contains"?new n7(e,r):t==="in"?new hN(e,r):t==="not-in"?new r7(e,r):t==="array-contains-any"?new i7(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new e7(e,r):new t7(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nl(t,this.value)):t!==null&&Gu(this.value)===Gu(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends sN{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jt(e,t)}matches(e){return Hh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hh(n){return n.op==="and"}function g_(n){return n.op==="or"}function Pw(n){return oN(n)&&Hh(n)}function oN(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function v_(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Gh(n.value);if(Pw(n))return n.filters.map(e=>v_(e)).join(",");{const e=n.filters.map(t=>v_(t)).join(",");return`${n.op}(${e})`}}function aN(n,e){return n instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&wo(r.value,i.value)}(n,e):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aN(o,i.filters[a]),!0):!1}(n,e):void Ye()}function lN(n,e){const t=n.filters.concat(e);return Jt.create(t,n.op)}function uN(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Gh(t.value)}`}(n):n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(uN).join(" ,")+"}"}(n):"Filter"}class ZM extends Ot{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class e7 extends Ot{constructor(e,t){super(e,"in",t),this.keys=cN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class t7 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=cN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class n7 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fp(t)&&dp(t.arrayValue,this.value)}}class hN extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dp(this.value.arrayValue,t)}}class r7 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!dp(this.value.arrayValue,t)}}class i7 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function y_(n,e=null,t=[],r=[],i=null,s=null,o=null){return new s7(n,e,t,r,i,s,o)}function Ku(n){const e=We(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>v_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gh(r)).join(",")),e.ue=t}return e.ue}function Vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mE(n.startAt,e.startAt)&&mE(n.endAt,e.endAt)}function d0(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function f0(n,e){return n.filters.filter(t=>t instanceof Ot&&t.field.isEqual(e))}function gE(n,e,t){let r=_g,i=!0;for(const s of f0(n,e)){let o=_g,a=!0;switch(s.op){case"<":case"<=":o=JM(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=_g}dE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];dE({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function vE(n,e,t){let r=cl,i=!0;for(const s of f0(n,e)){let o=cl,a=!0;switch(s.op){case">=":case">":o=YM(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=cl}fE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];fE({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dN(n,e,t,r,i,s,o,a){return new pa(n,e,t,r,i,s,o,a)}function fd(n){return new pa(n)}function yE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Nw(n){return n.collectionGroup!==null}function Ah(n){const e=We(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nn(bn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new pp(s,r))}),t.has(bn.keyField().canonicalString())||e.ce.push(new pp(bn.keyField(),r))}return e.ce}function ti(n){const e=We(n);return e.le||(e.le=o7(e,Ah(n))),e.le}function o7(n,e){if(n.limitType==="F")return y_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new pp(i.field,s)});const t=n.endAt?new kl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kl(n.startAt.position,n.startAt.inclusive):null;return y_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function __(n,e){const t=n.filters.concat([e]);return new pa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function p0(n,e,t){return new pa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jp(n,e){return Vp(ti(n),ti(e))&&n.limitType===e.limitType}function fN(n){return`${Ku(ti(n))}|lt:${n.limitType}`}function Qc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>uN(i)).join(", ")}]`),Mp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Gh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Gh(i)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function Up(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ah(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=pE(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ah(r),i)||r.endAt&&!function(o,a,l){const u=pE(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ah(r),i))}(n,e)}function pN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mN(n){return(e,t)=>{let r=!1;for(const i of Ah(n)){const s=a7(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function a7(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Nl(l,u):Ye()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=new dn(qe.comparator);function bi(){return l7}const gN=new dn(qe.comparator);function pf(...n){let e=gN;for(const t of n)e=e.insert(t.key,t);return e}function vN(n){let e=gN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ao(){return Rf()}function yN(){return Rf()}function Rf(){return new ql(n=>n.toString(),(n,e)=>n.isEqual(e))}const u7=new dn(qe.comparator),c7=new nn(qe.comparator);function Pt(...n){let e=c7;for(const t of n)e=e.add(t);return e}const h7=new nn(Tt);function kw(){return h7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cp(e)?"-0":e}}function _N(n){return{integerValue:""+n}}function wN(n,e){return QP(e)?_N(e):Rw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this._=void 0}}function d7(n,e,t){return n instanceof Kh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&d1(s)&&(s=xw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Qu?bN(n,e):n instanceof Ju?EN(n,e):function(i,s){const o=IN(i,s),a=_E(o)+_E(i.Pe);return m_(o)&&m_(i.Pe)?_N(a):Rw(i.serializer,a)}(n,e)}function f7(n,e,t){return n instanceof Qu?bN(n,e):n instanceof Ju?EN(n,e):t}function IN(n,e){return n instanceof Qh?function(r){return m_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kh extends p1{}class Qu extends p1{constructor(e){super(),this.elements=e}}function bN(n,e){const t=AN(e);for(const r of n.elements)t.some(i=>wo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ju extends p1{constructor(e){super(),this.elements=e}}function EN(n,e){let t=AN(e);for(const r of n.elements)t=t.filter(i=>!wo(i,r));return{arrayValue:{values:t}}}class Qh extends p1{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _E(n){return wn(n.integerValue||n.doubleValue)}function AN(n){return fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.field=e,this.transform=t}}function p7(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qu&&i instanceof Qu||r instanceof Ju&&i instanceof Ju?Wh(r.elements,i.elements,wo):r instanceof Qh&&i instanceof Qh?wo(r.Pe,i.Pe):r instanceof Kh&&i instanceof Kh}(n.transform,e.transform)}class m7{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ig(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class m1{}function TN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new md(n.key,En.none()):new pd(n.key,n.data,En.none());{const t=n.data,r=Ar.empty();let i=new nn(bn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ma(n.key,r,new Ii(i.toArray()),En.none())}}function g7(n,e,t){n instanceof pd?function(i,s,o){const a=i.value.clone(),l=IE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ma?function(i,s,o){if(!Ig(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=IE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(SN(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Cf(n,e,t,r){return n instanceof pd?function(s,o,a,l){if(!Ig(s.precondition,o))return a;const u=s.value.clone(),d=bE(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ma?function(s,o,a,l){if(!Ig(s.precondition,o))return a;const u=bE(s.fieldTransforms,l,o),d=o.data;return d.setAll(SN(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Ig(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function v7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=IN(r.transform,i||null);s!=null&&(t===null&&(t=Ar.empty()),t.set(r.field,s))}return t||null}function wE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wh(r,i,(s,o)=>p7(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pd extends m1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends m1{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IE(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,f7(o,a,t[i]))}return r}function bE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,d7(s,o,e))}return r}class md extends m1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cw extends m1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yN();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=TN(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Wh(this.mutations,e.mutations,(t,r)=>wE(t,r))&&Wh(this.baseMutations,e.baseMutations,(t,r)=>wE(t,r))}}class Dw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=function(){return u7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Dw(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,Vt;function xN(n){switch(n){default:return Ye();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function PN(n){if(n===void 0)return Hn("GRPC error has no .code"),be.UNKNOWN;switch(n){case Zn.OK:return be.OK;case Zn.CANCELLED:return be.CANCELLED;case Zn.UNKNOWN:return be.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return be.INTERNAL;case Zn.UNAVAILABLE:return be.UNAVAILABLE;case Zn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Zn.NOT_FOUND:return be.NOT_FOUND;case Zn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Zn.ABORTED:return be.ABORTED;case Zn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Zn.DATA_LOSS:return be.DATA_LOSS;default:return Ye()}}(Vt=Zn||(Zn={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new Lu([4294967295,4294967295],0);function EE(n){const e=NN().encode(n),t=new OP;return t.update(e),new Uint8Array(t.digest())}function AE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lu([t,r],0),new Lu([i,s],0)]}class Fw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mf(`Invalid padding: ${t}`);if(r<0)throw new mf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mf(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Lu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Lu.fromNumber(r)));return i.compare(_7)===1&&(i=new Lu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=EE(e),[r,i]=AE(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Fw(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=EE(e),[r,i]=AE(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qp(st.min(),i,new dn(Tt),bi(),Pt())}}class zp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zp(r,t,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class kN{constructor(e,t){this.targetId=e,this.me=t}}class RN{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class TE{constructor(){this.fe=0,this.ge=xE(),this.pe=Mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pt(),t=Pt(),r=Pt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ye()}}),new zp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=xE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class w7{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=SE(),this.Qe=new dn(Tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(d0(s))if(r===0){const o=new qe(s.path);this.Ue(t,o,vn.newNoDocument(o,st.min()))}else rt(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=xl(r).toUint8Array()}catch(l){if(l instanceof tN)return _o("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Fw(o,i,s)}catch(l){return _o(l instanceof mf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&d0(a.target)){const l=new qe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,vn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Pt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new qp(e,t,this.Qe,this.ke,r);return this.ke=bi(),this.qe=SE(),this.Qe=new dn(Tt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new TE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nn(Tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function SE(){return new dn(qe.comparator)}function xE(){return new dn(qe.comparator)}const I7=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),b7=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),E7=(()=>({and:"AND",or:"OR"}))();class A7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function w_(n,e){return n.useProto3Json||Mp(e)?e:{value:e}}function Jh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function T7(n,e){return Jh(n,e.toTimestamp())}function Kn(n){return rt(!!n),st.fromTimestamp(function(t){const r=aa(t);return new An(r.seconds,r.nanos)}(n))}function Mw(n,e){return I_(n,e).canonicalString()}function I_(n,e){const t=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LN(n){const e=Dt.fromString(n);return rt(zN(e)),e}function mp(n,e){return Mw(n.databaseId,e.path)}function fo(n,e){const t=LN(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(FN(t))}function DN(n,e){return Mw(n.databaseId,e)}function ON(n){const e=LN(n);return e.length===4?Dt.emptyPath():FN(e)}function b_(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FN(n){return rt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PE(n,e,t){return{name:mp(n,e),fields:t.value.mapValue.fields}}function MN(n,e,t){const r=fo(n,e.name),i=Kn(e.updateTime),s=e.createTime?Kn(e.createTime):st.min(),o=new Ar({mapValue:{fields:e.fields}}),a=vn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function S7(n,e){return"found"in e?function(r,i){rt(!!i.found),i.found.name,i.found.updateTime;const s=fo(r,i.found.name),o=Kn(i.found.updateTime),a=i.found.createTime?Kn(i.found.createTime):st.min(),l=new Ar({mapValue:{fields:i.found.fields}});return vn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){rt(!!i.missing),rt(!!i.readTime);const s=fo(r,i.missing),o=Kn(i.readTime);return vn.newNoDocument(s,o)}(n,e):Ye()}function x7(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(rt(d===void 0||typeof d=="string"),Mn.fromBase64String(d||"")):(rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Mn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?be.UNKNOWN:PN(u.code);return new Re(d,u.message||"")}(o);t=new RN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fo(n,r.document.name),s=Kn(r.document.updateTime),o=r.document.createTime?Kn(r.document.createTime):st.min(),a=new Ar({mapValue:{fields:r.document.fields}}),l=vn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new bg(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fo(n,r.document),s=r.readTime?Kn(r.readTime):st.min(),o=vn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new bg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fo(n,r.document),s=r.removedTargetIds||[];t=new bg([],s,i,null)}else{if(!("filter"in e))return Ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new y7(i,s),a=r.targetId;t=new kN(a,o)}}return t}function gp(n,e){let t;if(e instanceof pd)t={update:PE(n,e.key,e.value)};else if(e instanceof md)t={delete:mp(n,e.key)};else if(e instanceof ma)t={update:PE(n,e.key,e.data),updateMask:L7(e.fieldMask)};else{if(!(e instanceof Cw))return Ye();t={verify:mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:T7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ye()}(n,e.precondition)),t}function E_(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?En.updateTime(Kn(s.updateTime)):s.exists!==void 0?En.exists(s.exists):En.none()}(e.currentDocument):En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)rt(a.setToServerValue==="REQUEST_TIME"),l=new Kh;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Qu(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Ju(d)}else"increment"in a?l=new Qh(o,a.increment):Ye();const u=bn.fromServerFormat(a.fieldPath);return new Bp(u,l)}(n,i)):[];if(e.update){e.update.name;const i=fo(n,e.update.name),s=new Ar({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Ii(u.map(d=>bn.fromServerFormat(d)))}(e.updateMask);return new ma(i,s,o,t,r)}return new pd(i,s,t,r)}if(e.delete){const i=fo(n,e.delete);return new md(i,t)}if(e.verify){const i=fo(n,e.verify);return new Cw(i,t)}return Ye()}function P7(n,e){return n&&n.length>0?(rt(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Kn(i.updateTime):Kn(s);return o.isEqual(st.min())&&(o=Kn(s)),new m7(o,i.transformResults||[])}(t,e))):[]}function VN(n,e){return{documents:[DN(n,e.path)]}}function jN(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=DN(n,i);const s=function(u){if(u.length!==0)return qN(Jt.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(v){return{field:Jc(v.field),direction:k7(v.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=w_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function UN(n){let e=ON(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(r===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(p){const v=BN(p);return v instanceof Jt&&Pw(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(v=>function(P){return new pp(Yc(P.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(v))}(t.orderBy));let a=null;t.limit&&(a=function(p){let v;return v=typeof p=="object"?p.value:p,Mp(v)?null:v}(t.limit));let l=null;t.startAt&&(l=function(p){const v=!!p.before,g=p.values||[];return new kl(g,v)}(t.startAt));let u=null;return t.endAt&&(u=function(p){const v=!p.before,g=p.values||[];return new kl(g,v)}(t.endAt)),dN(e,i,o,s,a,"F",l,u)}function N7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yc(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yc(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yc(t.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yc(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ye()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Yc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Jt.create(t.compositeFilter.filters.map(r=>BN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ye()}}(t.compositeFilter.op))}(n):Ye()}function k7(n){return I7[n]}function R7(n){return b7[n]}function C7(n){return E7[n]}function Jc(n){return{fieldPath:n.canonicalString()}}function Yc(n){return bn.fromServerFormat(n.fieldPath)}function qN(n){return n instanceof Ot?function(t){if(t.op==="=="){if(hE(t.value))return{unaryFilter:{field:Jc(t.field),op:"IS_NAN"}};if(cE(t.value))return{unaryFilter:{field:Jc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hE(t.value))return{unaryFilter:{field:Jc(t.field),op:"IS_NOT_NAN"}};if(cE(t.value))return{unaryFilter:{field:Jc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jc(t.field),op:R7(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>qN(i));return r.length===1?r[0]:{compositeFilter:{op:C7(t.op),filters:r}}}(n):Ye()}function L7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t,r,i,s=st.min(),o=st.min(),a=Mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.ct=e}}function D7(n,e){let t;if(e.document)t=MN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Xu(e.noDocument.readTime);t=vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ye();{const r=qe.fromSegments(e.unknownDocument.path),i=Xu(e.unknownDocument.version);t=vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new An(i[0],i[1]);return st.fromTimestamp(s)}(e.readTime)),t}function NE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:m0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:mp(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Jh(s,o.version.toTimestamp()),createTime:Jh(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yu(e.version)};else{if(!e.isUnknownDocument())return Ye();r.unknownDocument={path:t.path.toArray(),version:Yu(e.version)}}return r}function m0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xu(n){const e=new An(n.seconds,n.nanoseconds);return st.fromTimestamp(e)}function yu(n,e){const t=(e.baseMutations||[]).map(s=>E_(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>E_(n.ct,s)),i=An.fromMillis(e.localWriteTimeMs);return new Lw(e.batchId,i,t,r)}function gf(n){const e=Xu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Xu(n.lastLimboFreeSnapshotVersion):st.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return rt(s.documents.length===1),ti(fd(ON(s.documents[0])))}(n.query):function(s){return ti(UN(s))}(n.query),new Ko(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mn.fromBase64String(n.resumeToken))}function WN(n,e){const t=Yu(e.snapshotVersion),r=Yu(e.lastLimboFreeSnapshotVersion);let i;i=d0(e.target)?VN(n.ct,e.target):jN(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vw(n){const e=UN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?p0(e,e.limit,"L"):e}function Uv(n,e){return new Ow(e.largestBatchId,E_(n.ct,e.overlayMutation))}function kE(n,e){const t=e.path.lastSegment();return[n,ei(e.path.popLast()),t]}function RE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yu(r.readTime),documentKey:ei(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{getBundleMetadata(e,t){return CE(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Xu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return CE(e).put(function(i){return{bundleId:i.id,createTime:Yu(Kn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return LE(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:Vw(s.bundledQuery),readTime:Xu(s.readTime)}}(r)})}saveNamedQuery(e,t){return LE(e).put(function(i){return{name:i.name,readTime:Yu(Kn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function CE(n){return ar(n,"bundles")}function LE(n){return ar(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new g1(e,r)}getOverlay(e,t){return Qd(e).get(kE(this.userId,t)).next(r=>r?Uv(this.serializer,r):null)}getOverlays(e,t){const r=ao();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new Ow(t,o);i.push(this.ht(e,a))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(ei(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Qd(e).j("collectionPathOverlayIndex",a))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ao(),s=ei(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Qd(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Uv(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ao();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qd(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{const p=Uv(this.serializer,u);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Qd(e).put(function(i,s,o){const[a,l,u]=kE(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:gp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Qd(n){return ar(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{Pt(e){return ar(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Mn.fromUint8Array(r):Mn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),cp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=aa(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?nN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):f1(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ye()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(wn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),qe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}_u.vt=new _u;function M7(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function DE(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=M7(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class V7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=DE(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=DE(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class j7{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class U7{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Jd{constructor(){this.jt=new V7,this.Ht=new j7(this.jt),this.Jt=new U7(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wu(this.indexId,this.documentKey,this.arrayValue,r)}}function Wa(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=OE(n.arrayValue,e.arrayValue),t!==0?t:(t=OE(n.directionalValue,e.directionalValue),t!==0?t:qe.comparator(n.documentKey,e.documentKey)))}function OE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.Xt=new nn((t,r)=>bn.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(rt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=d_(e);if(t!==void 0&&!this.sn(t))return!1;const r=mu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new nn(bn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new vg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new vg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new vg(r.field,r.dir==="asc"?0:1)));return new h0(h0.UNKNOWN_ID,this.collectionId,t,up.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(n){var e,t;if(rt(n instanceof Ot||n instanceof Jt),n instanceof Ot){if(n instanceof hN){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ot.create(n.field,"==",s)))||[];return Jt.create(i,"or")}return n}const r=n.filters.map(i=>GN(i));return Jt.create(r,n.op)}function B7(n){if(n.getFilters().length===0)return[];const e=S_(GN(n));return rt(HN(e)),A_(e)||T_(e)?[e]:e.getFilters()}function A_(n){return n instanceof Ot}function T_(n){return n instanceof Jt&&Pw(n)}function HN(n){return A_(n)||T_(n)||function(t){if(t instanceof Jt&&g_(t)){for(const r of t.getFilters())if(!A_(r)&&!T_(r))return!1;return!0}return!1}(n)}function S_(n){if(rt(n instanceof Ot||n instanceof Jt),n instanceof Ot)return n;if(n.filters.length===1)return S_(n.filters[0]);const e=n.filters.map(r=>S_(r));let t=Jt.create(e,n.op);return t=g0(t),HN(t)?t:(rt(t instanceof Jt),rt(Hh(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>jw(r,i)))}function jw(n,e){let t;return rt(n instanceof Ot||n instanceof Jt),rt(e instanceof Ot||e instanceof Jt),t=n instanceof Ot?e instanceof Ot?function(i,s){return Jt.create([i,s],"and")}(n,e):ME(n,e):e instanceof Ot?ME(e,n):function(i,s){if(rt(i.filters.length>0&&s.filters.length>0),Hh(i)&&Hh(s))return lN(i,s.getFilters());const o=g_(i)?i:s,a=g_(i)?s:i,l=o.filters.map(u=>jw(u,a));return Jt.create(l,"or")}(n,e),g0(t)}function ME(n,e){if(Hh(e))return lN(e,n.getFilters());{const t=e.filters.map(r=>jw(n,r));return Jt.create(t,"or")}}function g0(n){if(rt(n instanceof Ot||n instanceof Jt),n instanceof Ot)return n;const e=n.getFilters();if(e.length===1)return g0(e[0]);if(oN(n))return n;const t=e.map(i=>g0(i)),r=[];return t.forEach(i=>{i instanceof Ot?r.push(i):i instanceof Jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Jt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(){this.un=new Uw}addToCollectionParentIndex(e,t){return this.un.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Ki.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Uw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nn(Dt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Uint8Array(0);class z7{constructor(e,t){this.databaseId=t,this.cn=new Uw,this.ln=new ql(r=>Ku(r),(r,i)=>Vp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:ei(i)};return VE(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[zP(t),""],!1,!0);return VE(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(oo(o.parent))}return r})}addFieldIndex(e,t){const r=Yd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=Uc(e);return s.next(a=>{o.put(RE(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Yd(e),i=Uc(e),s=jc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Yd(e),r=jc(e),i=Uc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return me.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new FE(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=jc(e);let i=!0;const s=new Map;return me.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Pt();const a=[];return me.forEach(s,(l,u)=>{Ce("IndexedDbIndexManager",`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(l)} to execute ${Ku(t)}`);const d=function(R,$){const W=d_($);if(W===void 0)return null;for(const Q of f0(R,W.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(u,l),p=function(R,$){const W=new Map;for(const Q of mu($))for(const k of f0(R,Q.fieldPath))switch(k.op){case"==":case"in":W.set(Q.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return W.set(Q.fieldPath.canonicalString(),k.value),Array.from(W.values())}return null}(u,l),v=function(R,$){const W=[];let Q=!0;for(const k of mu($)){const E=k.kind===0?gE(R,k.fieldPath,R.startAt):vE(R,k.fieldPath,R.startAt);W.push(E.value),Q&&(Q=E.inclusive)}return new kl(W,Q)}(u,l),g=function(R,$){const W=[];let Q=!0;for(const k of mu($)){const E=k.kind===0?vE(R,k.fieldPath,R.endAt):gE(R,k.fieldPath,R.endAt);W.push(E.value),Q&&(Q=E.inclusive)}return new kl(W,Q)}(u,l),P=this.In(l,u,v),S=this.In(l,u,g),C=this.Tn(l,u,p),w=this.En(l.indexId,d,P,v.inclusive,S,g.inclusive,C);return me.forEach(w,b=>r.G(b,t.limit).next(R=>{R.forEach($=>{const W=qe.fromSegments($.documentKey);o.has(W)||(o=o.add(W),a.push(W))})}))}).next(()=>a)}return me.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=B7(Jt.create(e.filters,"and")).map(r=>y_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),d=[];for(let p=0;p<l;++p){const v=t?this.dn(t[p/u]):zm,g=this.An(e,v,r[p%u],i),P=this.Rn(e,v,s[p%u],o),S=a.map(C=>this.An(e,v,C,!0));d.push(...this.createRange(g,P,S))}return d}An(e,t,r,i){const s=new wu(e,qe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new wu(e,qe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new FE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return me.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new nn(bn.comparator),d=!1;for(const p of l.filters)for(const v of p.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?d=!0:u=u.add(v.field));for(const p of l.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Jd;for(const i of mu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);_u.vt.It(s,o)}return r.zt()}dn(e){const t=new Jd;return _u.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Jd;return _u.vt.It(Hu(this.databaseId,t),r.Yt(function(s){const o=mu(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Jd);let s=0;for(const o of mu(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&fp(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);_u.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Jd;l.seed(a.zt()),_u.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ot&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Yd(e),i=Uc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return me.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,p){const v=p?new up(p.sequenceNumber,new Ki(Xu(p.readTime),new qe(oo(p.documentKey)),p.largestBatchId)):up.empty(),g=d.fields.map(([P,S])=>new vg(bn.fromServerFormat(P),S));return new h0(d.indexId,d.collectionGroup,g,v)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Yd(e),s=Uc(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>me.forEach(a,l=>s.put(RE(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?me.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),me.forEach(a,l=>this.wn(e,i,l).next(u=>{const d=this.Sn(s,l);return u.isEqual(d)?me.resolve():this.bn(e,s,l,u,d)}))))})}Dn(e,t,r,i){return jc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return jc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=jc(e);let s=new nn(Wa);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new wu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new nn(Wa);const i=this.Vn(t,e);if(i==null)return r;const s=d_(t);if(s!=null){const o=e.data.field(s.fieldPath);if(fp(o))for(const a of o.arrayValue.values||[])r=r.add(new wu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new wu(t.indexId,e.key,zm,i));return r}bn(e,t,r,i,s){Ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,u,d,p,v){const g=l.getIterator(),P=u.getIterator();let S=Vc(g),C=Vc(P);for(;S||C;){let w=!1,b=!1;if(S&&C){const R=d(S,C);R<0?b=!0:R>0&&(w=!0)}else S!=null?b=!0:w=!0;w?(p(C),C=Vc(P)):b?(v(S),S=Vc(g)):(S=Vc(g),C=Vc(P))}}(i,s,Wa,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),me.waitFor(o)}yn(e){let t=1;return Uc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Wa(o,a)).filter((o,a,l)=>!a||Wa(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Wa(o,e),l=Wa(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,zm,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,zm,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return Wa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jE)}getMinOffset(e,t){return me.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Ye())).next(jE)}}function VE(n){return ar(n,"collectionParents")}function jc(n){return ar(n,"indexEntries")}function Yd(n){return ar(n,"indexConfiguration")}function Uc(n){return ar(n,"indexState")}function jE(n){rt(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Aw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ki(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(d,p,v)=>(a++,v.delete()));s.push(l.next(()=>{rt(a===1)}));const u=[];for(const d of t.mutations){const p=JP(e,d.key.path,t.batchId);s.push(i.delete(p)),u.push(d.key)}return me.waitFor(s).next(()=>u)}function v0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ye();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class v1{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){rt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new v1(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xc(e),o=Ga(e);return o.add({}).next(a=>{rt(typeof a=="number");const l=new Lw(a,t,r,i),u=function(g,P,S){const C=S.baseMutations.map(b=>gp(g.ct,b)),w=S.mutations.map(b=>gp(g.ct,b));return{userId:P,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:C,mutations:w}}(this.serializer,this.userId,l),d=[];let p=new nn((v,g)=>Tt(v.canonicalString(),g.canonicalString()));for(const v of i){const g=JP(this.userId,v.key.path,a);p=p.add(v.key.path.popLast()),d.push(o.put(u)),d.push(s.put(g,NM))}return p.forEach(v=>{d.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),me.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Ga(e).get(t).next(r=>r?(rt(r.userId===this.userId),yu(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?me.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ga(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(rt(a.batchId>=r),s=yu(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ga(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ga(e).U("userMutationsIndex",t).next(r=>r.map(i=>yu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xc(e).J({range:i},(o,a,l)=>{const[u,d,p]=o,v=oo(d);if(u===this.userId&&t.path.isEqual(v))return Ga(e).get(p).next(g=>{if(!g)throw Ye();rt(g.userId===this.userId),s.push(yu(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(Tt);const i=[];return t.forEach(s=>{const o=yg(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xc(e).J({range:a},(u,d,p)=>{const[v,g,P]=u,S=oo(g);v===this.userId&&s.path.isEqual(S)?r=r.add(P):p.done()});i.push(l)}),me.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=yg(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new nn(Tt);return Xc(e).J({range:o},(l,u,d)=>{const[p,v,g]=l,P=oo(v);p===this.userId&&r.isPrefixOf(P)?P.length===i&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ga(e).get(s).next(o=>{if(o===null)throw Ye();rt(o.userId===this.userId),r.push(yu(this.serializer,o))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return KN(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=oo(s[1]);i.push(l)}else a.done()}).next(()=>{rt(i.length===0)})})}containsKey(e,t){return QN(e,this.userId,t)}Nn(e){return JN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QN(n,e,t){const r=yg(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xc(n).J({range:s,H:!0},(a,l,u)=>{const[d,p,v]=a;d===e&&p===i&&(o=!0),u.done()}).next(()=>o)}function Ga(n){return ar(n,"mutations")}function Xc(n){return ar(n,"documentMutations")}function JN(n){return ar(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zu(0)}static kn(){return new Zu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Zu(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>st.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Bc(e).J((o,a)=>{const l=gf(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Bc(e).J((r,i)=>{const s=gf(i);t(s)})}qn(e){return BE(e).get("targetGlobalKey").next(t=>(rt(t!==null),t))}Qn(e,t){return BE(e).put("targetGlobalKey",t)}Kn(e,t){return Bc(e).put(WN(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ku(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Bc(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=gf(a);Vp(t,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=tl(e);return t.forEach(o=>{const a=ei(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=tl(e);return me.forEach(t,s=>{const o=ei(s.path);return me.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=tl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tl(e);let s=Pt();return i.J({range:r,H:!0},(o,a,l)=>{const u=oo(o[1]),d=new qe(u);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=ei(t.path),i=IDBKeyRange.bound([r],[zP(r)],!1,!0);let s=0;return tl(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return Bc(e).get(t).next(r=>r?gf(r):null)}}function Bc(n){return ar(n,"targets")}function BE(n){return ar(n,"targetGlobal")}function tl(n){return ar(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE([n,e],[t,r]){const i=Tt(n,t);return i===0?Tt(e,r):i}class W7{constructor(e){this.Un=e,this.buffer=new nn(qE),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bl(t)?Ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ul(t)}await this.Hn(3e5)})}}class H7{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return me.resolve(wi.oe);const r=new W7(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(UE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UE):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Kc()<=kt.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function K7(n,e){return new H7(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,t){this.db=e,this.garbageCollector=K7(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return $m(e,r)}removeReference(e,t,r){return $m(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $m(e,t)}nr(e,t){return function(i,s){let o=!1;return JN(i).Y(a=>QN(i,a,s).next(l=>(l&&(o=!0),me.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,st.min()),tl(e).delete(function(p){return[0,ei(p.path)]}(o))))});i.push(l)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $m(e,t)}tr(e,t){const r=tl(e);let i,s=wi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==wi.oe&&t(new qe(oo(i)),s),s=u,i=l):s=wi.oe}).next(()=>{s!==wi.oe&&t(new qe(oo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $m(n,e){return tl(n).put(function(r,i){return{targetId:0,path:ei(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.changes=new ql(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return hu(e).put(r)}removeEntry(e,t,r){return hu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],m0(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return hu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xd(t))},(i,s)=>{r={document:this.ir(t,s),size:v0(s)}}).next(()=>r)}getEntries(e,t){let r=bi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=bi(),i=new dn(qe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,v0(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return me.resolve();let i=new nn(WE);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Xd(i.first()),Xd(i.last())),o=i.getIterator();let a=o.getNext();return hu(e).J({index:"documentKeyIndex",range:s},(l,u,d)=>{const p=qe.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&WE(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Xd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),m0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hu(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=bi();for(const p of u){const v=this.ir(qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);v.isFoundDocument()&&(Up(t,v)||i.has(v.key))&&(d=d.insert(v.key,v))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=bi();const o=$E(t,r),a=$E(t,Ki.max());return hu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const p=this.ir(qe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Y7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zE(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}rr(e,t){return zE(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=D7(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(st.min())))return r}return vn.newInvalidDocument(e)}}function XN(n){return new J7(n)}class Y7 extends YN{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new ql(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nn((s,o)=>Tt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=NE(this.cr.serializer,o);i=i.add(s.path.popLast());const u=v0(l);r+=u-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=NE(this.cr.serializer,o.convertToNoDocument(st.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function zE(n){return ar(n,"remoteDocumentGlobal")}function hu(n){return ar(n,"remoteDocumentsV14")}function Xd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $E(n,e){const t=e.documentKey.path.toArray();return[n,m0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Tt(t[s],r[s]),i)return i;return i=Tt(t.length,r.length),i||(i=Tt(t[t.length-2],r[r.length-2]),i||Tt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Cf(r.mutation,i,Ii.empty(),An.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=pf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=bi();const o=Rf(),a=function(){return Rf()}();return t.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ma)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Cf(d.mutation,u,d.mutation.getFieldMask(),An.now())):o.set(u.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var p;return a.set(u,new X7(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Rf();let i=new dn((o,a)=>o-a),s=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let d=r.get(l)||Ii.empty();d=a.applyToLocalView(u,d),r.set(l,d);const p=(i.get(a.batchId)||Pt()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=yN();d.forEach(v=>{if(!s.has(v)){const g=TN(t.get(v),r.get(v));g!==null&&p.set(v,g),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return me.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return qe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):me.resolve(ao());let a=-1,l=s;return o.next(u=>me.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?me.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{l=l.insert(d,v)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Pt())).next(d=>({batchId:a,changes:vN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=pf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=pf();return this.indexManager.getCollectionParents(e,s).next(a=>me.forEach(a,l=>{const u=function(p,v){return new pa(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,vn.newInvalidDocument(d)))});let a=pf();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Cf(d.mutation,u,Ii.empty(),An.now()),Up(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return me.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Kn(i.createTime)}}(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Vw(i.bundledQuery),readTime:Kn(i.readTime)}}(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.overlays=new dn(qe.comparator),this.Ir=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ao();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=ao(),s=t.length+1,o=new qe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new dn((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ao(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=ao(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return me.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ow(t,r));let s=this.Ir.get(t);s===void 0&&(s=Pt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.Tr=new nn(hr.Er),this.dr=new nn(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new qe(new Dt([])),r=new hr(t,e),i=new hr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qe(new Dt([])),r=new hr(t,e),i=new hr(t,e+1);let s=Pt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hr(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qe.comparator(e.key,t.key)||Tt(e.wr,t.wr)}static Ar(e,t){return Tt(e.wr,t.wr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new nn(hr.Er)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lw(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return me.resolve(o)}lookupMutationBatch(e,t){return me.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),i=new hr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(Tt);return t.forEach(i=>{const s=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),me.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const o=new hr(new qe(s),0);let a=new nn(Tt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),me.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return me.forEach(t.mutations,i=>{const s=new hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hr(t,0),i=this.br.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.Mr=e,this.docs=function(){return new dn(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),me.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bi();const o=t.path,a=new qe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Aw(WP(d),r)<=0||(i.has(d.key)||Up(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ye()}Or(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iV(this)}getSize(e){return me.resolve(this.size)}}class iV extends YN{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.persistence=e,this.Nr=new ql(t=>Ku(t),Vp),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bw,this.targetCount=0,this.kr=Zu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),me.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Zu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Kn(t),me.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,t){this.qr={},this.overlays={},this.Qr=new wi(0),this.Kr=!1,this.Kr=!0,this.$r=new tV,this.referenceDelegate=e(this),this.Ur=new sV(this),this.indexManager=new q7,this.remoteDocumentCache=function(i){return new rV(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $N(t),this.Gr=new Z7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new nV(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ce("MemoryPersistence","Starting transaction:",e);const i=new oV(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return me.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class oV extends HP{constructor(e){super(),this.currentSequenceNumber=e}}class y1{constructor(e){this.persistence=e,this.Jr=new Bw,this.Yr=null}static Zr(e){return new y1(e)}get Xr(){if(this.Yr)return this.Yr;throw Ye()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),me.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xr,r=>{const i=qe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,st.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return me.or([()=>me.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.serializer=e}O(e,t,r,i){const s=new h1("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sE,{unique:!0}),l.createObjectStore("documentMutations")}(e),GE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=me.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),GE(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sE,{unique:!0});const p=u.store("mutations"),v=d.map(g=>p.put(g));return me.waitFor(v)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:BM});u.createIndex("collectionPathOverlayIndex",qM,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",zM,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:kM});u.createIndex("documentKeyIndex",RM),u.createIndex("collectionGroupIndex",CM)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:MM}).createIndex("sequenceNumberIndex",VM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:jM}).createIndex("documentKeyIndex",UM,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=v0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>me.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>me.forEach(a,l=>{rt(l.userId===s.userId);const u=yu(this.serializer,l);return KN(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Dt(o),u=function(p){return[0,ei(p)]}(l);s.push(t.get(u).next(d=>d?me.resolve():(p=>t.put({targetId:0,path:ei(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>me.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:FM});const r=t.store("collectionParents"),i=new Uw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ei(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Dt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],u)=>{const d=oo(a);return s(d.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=gf(i),o=WN(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(p){return p.document?new qe(Dt.fromString(p.document.name).popFirst(5)):p.noDocument?qe.fromSegments(p.noDocument.path):p.unknownDocument?qe.fromSegments(p.unknownDocument.path):Ye()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>me.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=XN(this.serializer),s=new e4(y1.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Pt();yu(this.serializer,l).keys().forEach(p=>d=d.add(p)),a.set(l.userId,d)}),me.forEach(a,(l,u)=>{const d=new fr(u),p=g1.lt(this.serializer,d),v=s.getIndexManager(d),g=v1.lt(d,this.serializer,v,s.referenceDelegate);return new ZN(i,g,p,v).recalculateAndSaveOverlaysForDocumentKeys(new f_(t,wi.oe),l).next()})})}}function GE(n){n.createObjectStore("targetDocuments",{keyPath:DM}).createIndex("documentTargetsIndex",OM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LM,{unique:!0}),n.createObjectStore("targetGlobal")}const Bv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qw{constructor(e,t,r,i,s,o,a,l,u,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!qw.D())throw new Re(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Q7(this,i),this.Ai=t+"main",this.serializer=new $N(l),this.Ri=new ho(this.Ai,this.hi,new aV(this.serializer)),this.$r=new F7,this.Ur=new $7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XN(this.serializer),this.Gr=new O7,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(be.FAILED_PRECONDITION,Bv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new wi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Bl(e))return Ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Zd(e).get("owner").next(t=>me.resolve(this.vi(t)))}Ci(e){return Wm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=ar(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return me.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?me.resolve(!0):Zd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Re(be.FAILED_PRECONDITION,Bv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wm(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new f_(e,wi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Wm(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return v1.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z7(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return g1.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ce("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?GM:l===16?WM:l===15?Sw:l===14?ZP:l===13?XP:l===12?$M:l===11?YP:void Ye()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new f_(a,this.Qr?this.Qr.next():wi.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Re(be.FAILED_PRECONDITION,GP);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Zd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(be.FAILED_PRECONDITION,Bv)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zd(e).put("owner",t)}static D(){return ho.D()}bi(e){const t=Zd(e);return t.get("owner").next(r=>this.vi(r)?(Ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Hn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;Ix()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zd(n){return ar(n,"owner")}function Wm(n){return ar(n,"clientMetadata")}function zw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Pt(),i=Pt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $w(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ix()?8:KP(Ft())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lV;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Kc()<=kt.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",Qc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),me.resolve()):(Kc()<=kt.DEBUG&&Ce("QueryEngine","Query:",Qc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Kc()<=kt.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",Qc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):me.resolve())}Yi(e,t){if(yE(t))return me.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=p0(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(t,a);return this.ns(t,u,o,l.readTime)?this.Yi(e,p0(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,r,i){return yE(t)||i.isEqual(st.min())?me.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?me.resolve(null):(Kc()<=kt.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qc(t)),this.rs(e,o,t,$P(i,-1)).next(a=>a))})}ts(e,t){let r=new nn(mN(e));return t.forEach((i,s)=>{Up(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Kc()<=kt.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ki.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new dn(Tt),this._s=new ql(s=>Ku(s),Vp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function n4(n,e,t,r){return new uV(n,e,t,r)}async function r4(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function cV(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const p=u.batch,v=p.keys();let g=me.resolve();return v.forEach(P=>{g=g.next(()=>d.getEntry(l,P)).next(S=>{const C=u.docVersions.get(P);rt(C!==null),S.version.compareTo(C)<0&&(p.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),d.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function i4(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function hV(n,e){const t=We(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((d,p)=>{const v=i.get(p);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,p)));let g=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Mn.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(p,g),function(S,C,w){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,g,d)&&a.push(t.Ur.updateTargetData(s,g))});let l=bi(),u=Pt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(s4(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(st.min())){const d=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return me.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=i,s))}function s4(n,e,t){let r=Pt(),i=Pt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bi();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(st.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function dV(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yh(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Xh(n,e,t){const r=We(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Bl(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function y0(n,e,t){const r=We(n);let i=st.min(),s=Pt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const p=We(l),v=p._s.get(d);return v!==void 0?me.resolve(p.os.get(v)):p.Ur.getTargetData(u,d)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:st.min(),t?s:Pt())).next(a=>(l4(r,pN(e),a),{documents:a,Ts:s})))}function o4(n,e){const t=We(n),r=We(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function a4(n,e){const t=We(n),r=t.us.get(e)||st.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,$P(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(l4(t,e,i),i))}function l4(n,e,t){let r=n.us.get(e)||st.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function fV(n,e,t,r){const i=We(n);let s=Pt(),o=bi();for(const u of t){const d=e.Es(u.metadata.name);u.document&&(s=s.add(d));const p=e.ds(u);p.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,p)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Yh(i,function(d){return ti(fd(Dt.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>s4(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))}async function pV(n,e,t=Pt()){const r=await Yh(n,ti(Vw(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Kn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Mn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function HE(n,e){return`firestore_clients_${n}_${e}`}function KE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qv(n,e){return`firestore_targets_${n}_${e}`}class _0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Re(i.error.code,i.error.message))),o?new _0(e,t,i.state,s):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Re(r.error.code,r.error.message))),s?new Lf(e,r.state,i):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class w0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=kw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=QP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new w0(e,s):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ww{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Ww(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class x_{constructor(){this.activeTargetIds=kw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zv{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new dn(Tt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=HE(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new x_),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(HE(this.persistenceKey,r));if(i){const s=w0.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(qv(this.persistenceKey,e));if(i){const s=Lf.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ce("SharedClientState","READ",e,t),t}setItem(e,t){Ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Ce("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let o=wi.oe;if(s!=null)try{const a=JSON.parse(s);rt(typeof a=="number"),o=a}catch(a){Hn("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==wi.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new _0(this.currentUser,e,t,r),s=KE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=KE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=qv(this.persistenceKey,e),s=new Lf(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return w0.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return _0.Rs(new fr(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Lf.Rs(i,t)}Ls(e){return Ww.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=kw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class u4{constructor(){this.so=new x_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new x_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm=null;function $v(){return Gm===null?Gm=function(){return 268435456+Math.round(2147483648*Math.random())}():Gm++,"0x"+Gm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="WebChannelConnection";class yV extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=$v(),l=this.xo(t,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,i).then(d=>(Ce("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw _o("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dd}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=gV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=$v();return new Promise((o,a)=>{const l=new FP;l.setWithCredentials(!0),l.listenOnce(MP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gg.NO_ERROR:const d=l.getResponseJson();Ce(Dr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case gg.TIMEOUT:Ce(Dr,`RPC '${e}' ${s} timed out`),a(new Re(be.DEADLINE_EXCEEDED,"Request time out"));break;case gg.HTTP_ERROR:const p=l.getStatus();if(Ce(Dr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const g=v==null?void 0:v.error;if(g&&g.status&&g.message){const P=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(w)>=0?w:be.UNKNOWN}(g.status);a(new Re(P,g.message))}else a(new Re(be.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Re(be.UNAVAILABLE,"Connection failed."));break;default:Ye()}}finally{Ce(Dr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ce(Dr,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=$v(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UP(),a=jP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Ce(Dr,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let v=!1,g=!1;const P=new vV({Io:C=>{g?Ce(Dr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(Ce(Dr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),Ce(Dr,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},To:()=>p.close()}),S=(C,w,b)=>{C.listen(w,R=>{try{b(R)}catch($){setTimeout(()=>{throw $},0)}})};return S(p,ff.EventType.OPEN,()=>{g||(Ce(Dr,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),S(p,ff.EventType.CLOSE,()=>{g||(g=!0,Ce(Dr,`RPC '${e}' stream ${i} transport closed`),P.So())}),S(p,ff.EventType.ERROR,C=>{g||(g=!0,_o(Dr,`RPC '${e}' stream ${i} transport errored:`,C),P.So(new Re(be.UNAVAILABLE,"The operation could not be completed")))}),S(p,ff.EventType.MESSAGE,C=>{var w;if(!g){const b=C.data[0];rt(!!b);const R=b,$=R.error||((w=R[0])===null||w===void 0?void 0:w.error);if($){Ce(Dr,`RPC '${e}' stream ${i} received error:`,$);const W=$.status;let Q=function(O){const U=Zn[O];if(U!==void 0)return PN(U)}(W),k=$.message;Q===void 0&&(Q=be.INTERNAL,k="Unknown error status: "+W+" with message "+$.message),g=!0,P.So(new Re(Q,k)),p.close()}else Ce(Dr,`RPC '${e}' stream ${i} received:`,b),P.bo(b)}}),S(a,VP.STAT_EVENT,C=>{C.stat===h_.PROXY?Ce(Dr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===h_.NOPROXY&&Ce(Dr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(n){return new A7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Re(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _V extends h4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=x7(this.serializer,e),r=function(s){if(!("targetChange"in s))return st.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?Kn(o.readTime):st.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=b_(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=d0(l)?{documents:VN(s,l)}:{query:jN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CN(s,o.resumeToken);const u=w_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(st.min())>0){a.readTime=Jh(s,o.snapshotVersion.toTimestamp());const u=w_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=N7(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=b_(this.serializer),t.removeTarget=e,this.a_(t)}}class wV extends h4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=P7(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=b_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gp(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,I_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(be.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,I_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(be.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hn(t),this.D_=!1):Ce("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{zl(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=We(l);u.L_.add(4),await gd(u),u.q_.set("Unknown"),u.L_.delete(4),await Wp(u)}(this))})}),this.q_=new bV(r,i)}}async function Wp(n){if(zl(n))for(const e of n.B_)await e(!0)}async function gd(n){for(const e of n.B_)await e(!1)}function _1(n,e){const t=We(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qw(t)?Kw(t):yd(t).r_()&&Hw(t,e))}function Zh(n,e){const t=We(n),r=yd(t);t.N_.delete(e),r.r_()&&d4(t,e),t.N_.size===0&&(r.r_()?r.o_():zl(t)&&t.q_.set("Unknown"))}function Hw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yd(n).A_(e)}function d4(n,e){n.Q_.xe(e),yd(n).R_(e)}function Kw(n){n.Q_=new w7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),yd(n).start(),n.q_.v_()}function Qw(n){return zl(n)&&!yd(n).n_()&&n.N_.size>0}function zl(n){return We(n).L_.size===0}function f4(n){n.Q_=void 0}async function AV(n){n.q_.set("Online")}async function TV(n){n.N_.forEach((e,t)=>{Hw(n,e)})}async function SV(n,e){f4(n),Qw(n)?(n.q_.M_(e),Kw(n)):n.q_.set("Unknown")}async function xV(n,e,t){if(n.q_.set("Online"),e instanceof RN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await I0(n,r)}else if(e instanceof bg?n.Q_.Ke(e):e instanceof kN?n.Q_.He(e):n.Q_.We(e),!t.isEqual(st.min()))try{const r=await i4(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Mn.EMPTY_BYTE_STRING,d.snapshotVersion)),d4(s,l);const p=new Ko(d.target,l,u,d.sequenceNumber);Hw(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),await I0(n,r)}}async function I0(n,e,t){if(!Bl(e))throw e;n.L_.add(1),await gd(n),n.q_.set("Offline"),t||(t=()=>i4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Wp(n)})}function p4(n,e){return e().catch(t=>I0(n,t,e))}async function vd(n){const e=We(n),t=Rl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PV(e);)try{const i=await dV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,NV(e,i)}catch(i){await I0(e,i)}m4(e)&&g4(e)}function PV(n){return zl(n)&&n.O_.length<10}function NV(n,e){n.O_.push(e);const t=Rl(n);t.r_()&&t.V_&&t.m_(e.mutations)}function m4(n){return zl(n)&&!Rl(n).n_()&&n.O_.length>0}function g4(n){Rl(n).start()}async function kV(n){Rl(n).p_()}async function RV(n){const e=Rl(n);for(const t of n.O_)e.m_(t.mutations)}async function CV(n,e,t){const r=n.O_.shift(),i=Dw.from(r,e,t);await p4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await vd(n)}async function LV(n,e){e&&Rl(n).V_&&await async function(r,i){if(function(o){return xN(o)&&o!==be.ABORTED}(i.code)){const s=r.O_.shift();Rl(r).s_(),await p4(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vd(r)}}(n,e),m4(n)&&g4(n)}async function JE(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=zl(t);t.L_.add(3),await gd(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Wp(t)}async function P_(n,e){const t=We(n);e?(t.L_.delete(2),await Wp(t)):e||(t.L_.add(2),await gd(t),t.q_.set("Unknown"))}function yd(n){return n.K_||(n.K_=function(t,r,i){const s=We(t);return s.w_(),new _V(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:AV.bind(null,n),Ro:TV.bind(null,n),mo:SV.bind(null,n),d_:xV.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Qw(n)?Kw(n):n.q_.set("Unknown")):(await n.K_.stop(),f4(n))})),n.K_}function Rl(n){return n.U_||(n.U_=function(t,r,i){const s=We(t);return s.w_(),new wV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kV.bind(null,n),mo:LV.bind(null,n),f_:RV.bind(null,n),g_:CV.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await vd(n)):(await n.U_.stop(),n.O_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Jw(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _d(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),Bl(n))return new Re(be.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=pf(),this.sortedSet=new dn(this.comparator)}static emptySet(e){return new Th(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Th)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Th;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.W_=new dn(qe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ye():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ed{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ed(e,t,Th.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OV{constructor(){this.queries=XE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=We(t),s=i.queries;i.queries=XE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Re(be.ABORTED,"Firestore shutting down"))}}function XE(){return new ql(n=>fN(n),jp)}async function Yw(n,e){const t=We(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DV,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=_d(o,`Initialization of query '${Qc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Zw(t)}async function Xw(n,e){const t=We(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FV(n,e){const t=We(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Zw(t)}function MV(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function Zw(n){n.Y_.forEach(e=>{e.next()})}var N_,ZE;(ZE=N_||(N_={})).ea="default",ZE.Cache="cache";class e5{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==N_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.serializer=e}Es(e){return fo(this.serializer,e)}ds(e){return e.metadata.exists?MN(this.serializer,e.document,!1):vn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Kn(e)}}class jV{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v4(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Dt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new eA(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Pt()).add(s);t.set(o,a)}}return t}async complete(){const e=await fV(this.localStore,new eA(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await pV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function v4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.key=e}}class _4{constructor(e){this.key=e}}class w4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pt(),this.mutatedKeys=Pt(),this.Aa=mN(e),this.Ra=new Th(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new YE,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const v=i.get(d),g=Up(this.query,p)?p:null,P=!!v&&this.mutatedKeys.has(v.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;v&&g?v.data.isEqual(g.data)?P!==S&&(r.track({type:3,doc:g}),C=!0):this.ga(v,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!v&&g?(r.track({type:0,doc:g}),C=!0):v&&!g&&(r.track({type:1,doc:v}),C=!0,(l||u)&&(a=!0)),C&&(g?(o=o.add(g),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(g,P){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye()}};return S(g)-S(P)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ed(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new YE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new _4(r))}),this.da.forEach(r=>{e.has(r)||t.push(new y4(r))}),t}ba(e){this.Ta=e.Ts,this.da=Pt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ed.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class UV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BV{constructor(e){this.key=e,this.va=!1}}class qV{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ql(a=>fN(a),jp),this.Ma=new Map,this.xa=new Set,this.Oa=new dn(qe.comparator),this.Na=new Map,this.La=new Bw,this.Ba={},this.ka=new Map,this.qa=Zu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zV(n,e,t=!0){const r=w1(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await I4(r,e,t,!0),i}async function $V(n,e){const t=w1(n);await I4(t,e,!0,!1)}async function I4(n,e,t,r){const i=await Yh(n.localStore,ti(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await t5(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&_1(n.remoteStore,i),a}async function t5(n,e,t,r,i){n.Ka=(p,v,g)=>async function(S,C,w,b){let R=C.view.ma(w);R.ns&&(R=await y0(S.localStore,C.query,!1).then(({documents:k})=>C.view.ma(k,R)));const $=b&&b.targetChanges.get(C.targetId),W=b&&b.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(R,S.isPrimaryClient,$,W);return k_(S,C.targetId,Q.wa),Q.snapshot}(n,p,v,g);const s=await y0(n.localStore,e,!0),o=new w4(e,s.Ts),a=o.ma(s.documents),l=zp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);k_(n,t,u.wa);const d=new UV(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function WV(n,e,t){const r=We(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zh(r.remoteStore,i.targetId),td(r,i.targetId)}).catch(Ul)):(td(r,i.targetId),await Xh(r.localStore,i.targetId,!0))}async function GV(n,e){const t=We(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zh(t.remoteStore,r.targetId))}async function HV(n,e,t){const r=s5(n);try{const i=await function(o,a){const l=We(o),u=An.now(),d=a.reduce((g,P)=>g.add(P.key),Pt());let p,v;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let P=bi(),S=Pt();return l.cs.getEntries(g,d).next(C=>{P=C,P.forEach((w,b)=>{b.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,P)).next(C=>{p=C;const w=[];for(const b of a){const R=v7(b,p.get(b.key).overlayedDocument);R!=null&&w.push(new ma(b.key,R,iN(R.value.mapValue),En.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,w,a)}).next(C=>{v=C;const w=C.applyToLocalDocumentSet(p,S);return l.documentOverlayCache.saveOverlays(g,C.batchId,w)})}).then(()=>({batchId:v.batchId,changes:vN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new dn(Tt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),await ga(r,i.changes),await vd(r.remoteStore)}catch(i){const s=_d(i,"Failed to persist write");t.reject(s)}}async function b4(n,e){const t=We(n);try{const r=await hV(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?rt(o.va):i.removedDocuments.size>0&&(rt(o.va),o.va=!1))}),await ga(t,r,e)}catch(r){await Ul(r)}}function tA(n,e,t){const r=We(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=We(o);l.onlineState=a;let u=!1;l.queries.forEach((d,p)=>{for(const v of p.j_)v.Z_(a)&&(u=!0)}),u&&Zw(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KV(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new dn(qe.comparator);o=o.insert(s,vn.newNoDocument(s,st.min()));const a=Pt().add(s),l=new qp(st.min(),new Map,new dn(Tt),o,a);await b4(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),i5(r)}else await Xh(r.localStore,e,!1).then(()=>td(r,e,t)).catch(Ul)}async function QV(n,e){const t=We(n),r=e.batch.batchId;try{const i=await cV(t.localStore,e);r5(t,r,null),n5(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ga(t,i)}catch(i){await Ul(i)}}async function JV(n,e,t){const r=We(n);try{const i=await function(o,a){const l=We(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(rt(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);r5(r,e,t),n5(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ga(r,i)}catch(i){await Ul(i)}}async function YV(n,e){const t=We(n);zl(t.remoteStore)||Ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=We(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=_d(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function n5(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function r5(n,e,t){const r=We(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function td(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||E4(n,r)})}function E4(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Zh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),i5(n))}function k_(n,e,t){for(const r of t)r instanceof y4?(n.La.addReference(r.key,e),XV(n,r)):r instanceof _4?(Ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||E4(n,r.key)):Ye()}function XV(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),i5(n))}function i5(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new qe(Dt.fromString(e)),r=n.qa.next();n.Na.set(r,new BV(t)),n.Oa=n.Oa.insert(t,r),_1(n.remoteStore,new Ko(ti(fd(t.path)),r,"TargetPurposeLimboResolution",wi.oe))}}async function ga(n,e,t){const r=We(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=$w.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=We(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>me.forEach(u,v=>me.forEach(v.$i,g=>d.persistence.referenceDelegate.addReference(p,v.targetId,g)).next(()=>me.forEach(v.Ui,g=>d.persistence.referenceDelegate.removeReference(p,v.targetId,g)))))}catch(p){if(!Bl(p))throw p;Ce("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const v=p.targetId;if(!p.fromCache){const g=d.os.get(v),P=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(P);d.os=d.os.insert(v,S)}}}(r.localStore,s))}async function ZV(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=await r4(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Re(be.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ga(t,r.hs)}}function ej(n,e){const t=We(n),r=t.Na.get(e);if(r&&r.va)return Pt().add(r.key);{let i=Pt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function tj(n,e){const t=We(n),r=await y0(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&k_(t,e.targetId,i.wa),i}async function nj(n,e){const t=We(n);return a4(t.localStore,e).then(r=>ga(t,r))}async function rj(n,e,t,r){const i=We(n),s=await function(a,l){const u=We(a),d=We(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>d.Mn(p,l).next(v=>v?u.localDocuments.getDocuments(p,v):me.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await vd(i.remoteStore):t==="acknowledged"||t==="rejected"?(r5(i,e,r||null),n5(i,e),function(a,l){We(We(a).mutationQueue).On(l)}(i.localStore,e)):Ye(),await ga(i,s)):Ce("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ij(n,e){const t=We(n);if(w1(t),s5(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await nA(t,r.toArray());t.Qa=!0,await P_(t.remoteStore,!0);for(const s of i)_1(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(td(t,o),Xh(t.localStore,o,!0))),Zh(t.remoteStore,o)}),await i,await nA(t,r),function(o){const a=We(o);a.Na.forEach((l,u)=>{Zh(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new dn(qe.comparator)}(t),t.Qa=!1,await P_(t.remoteStore,!1)}}async function nA(n,e,t){const r=We(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Yh(r.localStore,ti(l[0]));for(const u of l){const d=r.Fa.get(u),p=await tj(r,d);p.snapshot&&s.push(p.snapshot)}}else{const u=await o4(r.localStore,o);a=await Yh(r.localStore,u),await t5(r,A4(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function A4(n){return dN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sj(n){return function(t){return We(We(t).persistence).Qi()}(We(n).localStore)}async function oj(n,e,t,r){const i=We(n);if(i.Qa)return void Ce("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await a4(i.localStore,pN(s[0])),a=qp.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Mn.EMPTY_BYTE_STRING);await ga(i,o,a);break}case"rejected":await Xh(i.localStore,e,!0),td(i,e,r);break;default:Ye()}}async function aj(n,e,t){const r=w1(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ce("SyncEngine","Adding an already active target "+i);continue}const s=await o4(r.localStore,i),o=await Yh(r.localStore,s);await t5(r,A4(s),o.targetId,!1,o.resumeToken),_1(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&await Xh(r.localStore,i,!1).then(()=>{Zh(r.remoteStore,i),td(r,i)}).catch(Ul)}}function w1(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=b4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KV.bind(null,e),e.Ca.d_=FV.bind(null,e.eventManager),e.Ca.$a=MV.bind(null,e.eventManager),e}function s5(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JV.bind(null,e),e}function lj(n,e,t){const r=We(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,P){const S=We(g),C=Kn(P.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",w=>S.Gr.getBundleMetadata(w,P.id)).then(w=>!!w&&w.createTime.compareTo(C)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(v4(l));const u=new jV(l,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const v=await u.la(d);v&&a._updateProgress(v),d=await o.Ua()}const p=await u.complete();return await ga(s,p.Ia,void 0),await function(g,P){const S=We(g);return S.persistence.runTransaction("Save bundle","readwrite",C=>S.Gr.saveBundleMetadata(C,P))}(s.localStore,l),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return _o("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class vp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$p(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return n4(this.persistence,new t4,e.initialUser,this.serializer)}Ga(e){return new e4(y1.Zr,this.serializer)}Wa(e){return new u4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vp.provider={build:()=>new vp};class T4 extends vp{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await s5(this.Ja.syncEngine),await vd(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return n4(this.persistence,new t4,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new G7(r,e.asyncQueue,t)}Ha(e,t){const r=new xM(t,this.persistence);return new SM(e.asyncQueue,r)}Ga(e){const t=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new qw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,c4(),Eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new u4}}class uj extends T4{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof zv&&(this.sharedClientState.syncEngine={no:rj.bind(null,t),ro:oj.bind(null,t),io:aj.bind(null,t),Qi:sj.bind(null,t),eo:nj.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await ij(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=c4();if(!zv.D(t))throw new Re(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZV.bind(null,this.syncEngine),await P_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OV}()}createDatastore(e){const t=$p(e.databaseInfo.databaseId),r=function(s){return new yV(s)}(e.databaseInfo);return function(s,o,a,l){return new IV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new EV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>tA(this.syncEngine,t,0),function(){return QE.D()?new QE:new mV}())}createSyncEngine(e,t){return function(i,s,o,a,l,u,d){const p=new qV(i,s,o,a,l,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=We(i);Ce("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yp.provider={build:()=>new yp};function rA(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Sr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new VV(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Re(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=We(i),a={documents:s.map(p=>mp(o.serializer,p))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Dt.emptyPath(),a,s.length),u=new Map;l.forEach(p=>{const v=S7(o.serializer,p);u.set(v.key.toString(),v)});const d=[];return s.forEach(p=>{const v=u.get(p.toString());rt(!!v),d.push(v)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=qe.fromPath(r);this.mutations.push(new Cw(i,this.precondition(i)))}),await async function(r,i){const s=We(r),o={writes:i.map(a=>gp(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Dt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ye();t=st.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(st.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(st.min()))throw new Re(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Gw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new hj(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!Mp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xN(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=qP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_d(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wv(n,e){n.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await r4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function iA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o5(n);Ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JE(e.remoteStore,i)),n._onlineComponents=e}async function o5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),await Wv(n,new vp)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),await Wv(n,new vp);return n._offlineComponents}async function b1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),await iA(n,n._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),await iA(n,new yp))),n._onlineComponents}function S4(n){return o5(n).then(e=>e.persistence)}function a5(n){return o5(n).then(e=>e.localStore)}function x4(n){return b1(n).then(e=>e.remoteStore)}function l5(n){return b1(n).then(e=>e.syncEngine)}function pj(n){return b1(n).then(e=>e.datastore)}async function nd(n){const e=await b1(n),t=e.eventManager;return t.onListen=zV.bind(null,e.syncEngine),t.onUnlisten=WV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$V.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GV.bind(null,e.syncEngine),t}function mj(n){return n.asyncQueue.enqueue(async()=>{const e=await S4(n),t=await x4(n);return e.setNetworkEnabled(!0),function(i){const s=We(i);return s.L_.delete(0),Wp(s)}(t)})}function gj(n){return n.asyncQueue.enqueue(async()=>{const e=await S4(n),t=await x4(n);return e.setNetworkEnabled(!1),async function(i){const s=We(i);s.L_.add(0),await gd(s),s.q_.set("Offline")}(t)})}function vj(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const p=We(u);return p.persistence.runTransaction("read document","readonly",v=>p.localDocuments.getDocument(v,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Re(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=_d(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await a5(n),e,t)),t.promise}function P4(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new I1({next:v=>{d.Za(),o.enqueueAndForget(()=>Xw(s,p));const g=v.docs.has(a);!g&&v.fromCache?u.reject(new Re(be.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&v.fromCache&&l&&l.source==="server"?u.reject(new Re(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new e5(fd(a.path),d,{includeMetadataChanges:!0,_a:!0});return Yw(s,p)}(await nd(n),n.asyncQueue,e,t,r)),r.promise}function yj(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await y0(i,s,!0),l=new w4(s,a.Ts),u=l.ma(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const l=_d(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await a5(n),e,t)),t.promise}function N4(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new I1({next:v=>{d.Za(),o.enqueueAndForget(()=>Xw(s,p)),v.fromCache&&l.source==="server"?u.reject(new Re(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new e5(a,d,{includeMetadataChanges:!0,_a:!0});return Yw(s,p)}(await nd(n),n.asyncQueue,e,t,r)),r.promise}function _j(n,e){const t=new I1(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){We(i).Y_.add(s),s.next()}(await nd(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){We(i).Y_.delete(s)}(await nd(n),t))}}function wj(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?NN().encode(o):o,function(d,p){return new cj(d,p)}(function(d,p){if(d instanceof Uint8Array)return rA(d,p);if(d instanceof ArrayBuffer)return rA(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,$p(e));n.asyncQueue.enqueueAndForget(async()=>{lj(await l5(n),i,r)})}function Ij(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=We(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await a5(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e,t){if(!t)throw new Re(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function R4(n,e,t,r){if(e===!0&&r===!0)throw new Re(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oA(n){if(!qe.isDocumentKey(n))throw new Re(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aA(n){if(qe.isDocumentKey(n))throw new Re(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function E1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye()}function qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=E1(n);throw new Re(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function C4(n,e){if(e<=0)throw new Re(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Re(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lA(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mM;switch(r.type){case"firstParty":return new _M(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sA.get(t);r&&(Ce("ComponentProvider","Removing Datastore"),sA.delete(t),r.terminate())}(this),Promise.resolve()}}function bj(n,e,t,r={}){var i;const s=(n=qt(n,Gp))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=fr.MOCK_USER;else{a=OL(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Re(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fr(u)}n._authCredentials=new gM(new BP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=class L4{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new L4(this.firestore,e,this._query)}},xn=class D4{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new D4(this.firestore,e,this._key)}},Il=class O4 extends ni{constructor(e,t,r){super(e,t,fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new qe(e))}withConverter(e){return new O4(this.firestore,e,this._path)}};function c5(n,e,...t){if(n=it(n),u5("collection","path",e),n instanceof Gp){const r=Dt.fromString(e,...t);return aA(r),new Il(n,null,r)}{if(!(n instanceof xn||n instanceof Il))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Dt.fromString(e,...t));return aA(r),new Il(n.firestore,null,r)}}function Ej(n,e){if(n=qt(n,Gp),u5("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,function(r){return new pa(Dt.emptyPath(),r)}(e))}function Du(n,e,...t){if(n=it(n),arguments.length===1&&(e=qP.newId()),u5("doc","path",e),n instanceof Gp){const r=Dt.fromString(e,...t);return oA(r),new xn(n,null,new qe(r))}{if(!(n instanceof xn||n instanceof Il))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Dt.fromString(e,...t));return oA(r),new xn(n.firestore,n instanceof Il?n.converter:null,new qe(r))}}function F4(n,e){return n=it(n),e=it(e),(n instanceof xn||n instanceof Il)&&(e instanceof xn||e instanceof Il)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function M4(n,e){return n=it(n),e=it(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&jp(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gw(this,"async_queue_retry"),this.Vu=()=>{const r=Eg();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Bl(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Jw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function R_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Aj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=-1;let Qn=class extends Gp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uA(e),this._firestoreClient=void 0,await e}}};function qr(n){if(n._terminated)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V4(n),n._firestoreClient}function V4(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,u,d){return new QM(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,k4(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new fj(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function Sj(n,e){_o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return j4(n,yp.provider,{build:r=>new T4(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function xj(n){_o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();j4(n,yp.provider,{build:t=>new uj(t,e.cacheSizeBytes)})}function j4(n,e,t){if((n=qt(n,Qn))._firestoreClient||n._terminated)throw new Re(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Re(be.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},V4(n)}function Pj(n){if(n._initialized&&!n._terminated)throw new Re(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ho.D())return Promise.resolve();const i=r+"main";await ho.delete(i)}(zw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function Nj(n){return function(t){const r=new Sr;return t.asyncQueue.enqueueAndForget(async()=>YV(await l5(t),r)),r.promise}(qr(n=qt(n,Qn)))}function kj(n){return mj(qr(n=qt(n,Qn)))}function Rj(n){return gj(qr(n=qt(n,Qn)))}function Cj(n,e){const t=qr(n=qt(n,Qn)),r=new Aj;return wj(t,n._databaseId,e,r),r}function Lj(n,e){return Ij(qr(n=qt(n,Qn)),e).then(t=>t?new ni(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Io(Mn.fromBase64String(e))}catch(t){throw new Re(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Io(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=/^__.*__$/;class Oj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new pd(e,this.data,t,this.fieldTransforms)}}class U4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function B4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye()}}class T1{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new T1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return b0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(B4(this.Cu)&&Dj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Fj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$p(e)}Qu(e,t,r,i=!1){return new T1({Cu:e,methodName:t,qu:r,path:bn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(n){const e=n._freezeSettings(),t=$p(n._databaseId);return new Fj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S1(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);y5("Data must be an object, but it was:",o,r);const a=$4(r,o);let l,u;if(s.merge)l=new Ii(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const v=C_(e,p,t);if(!o.contains(v))throw new Re(be.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);G4(d,v)||d.push(v)}l=new Ii(d),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new Oj(new Ar(a),l,u)}class Hp extends oc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function q4(n,e,t){return new T1({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class d5 extends oc{_toFieldTransform(e){return new Bp(e.path,new Kh)}isEqual(e){return e instanceof d5}}class f5 extends oc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=q4(this,e,!0),r=this.Ku.map(s=>lc(s,t)),i=new Qu(r);return new Bp(e.path,i)}isEqual(e){return e instanceof f5&&Uh(this.Ku,e.Ku)}}class p5 extends oc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=q4(this,e,!0),r=this.Ku.map(s=>lc(s,t)),i=new Ju(r);return new Bp(e.path,i)}isEqual(e){return e instanceof p5&&Uh(this.Ku,e.Ku)}}class m5 extends oc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Qh(e.serializer,wN(e.serializer,this.$u));return new Bp(e.path,t)}isEqual(e){return e instanceof m5&&this.$u===e.$u}}function g5(n,e,t,r){const i=n.Qu(1,e,t);y5("Data must be an object, but it was:",i,r);const s=[],o=Ar.empty();sc(r,(l,u)=>{const d=_5(e,l,t);u=it(u);const p=i.Nu(d);if(u instanceof Hp)s.push(d);else{const v=lc(u,p);v!=null&&(s.push(d),o.set(d,v))}});const a=new Ii(s);return new U4(o,a,i.fieldTransforms)}function v5(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[C_(e,r,t)],l=[i];if(s.length%2!=0)throw new Re(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(C_(e,s[v])),l.push(s[v+1]);const u=[],d=Ar.empty();for(let v=a.length-1;v>=0;--v)if(!G4(u,a[v])){const g=a[v];let P=l[v];P=it(P);const S=o.Nu(g);if(P instanceof Hp)u.push(g);else{const C=lc(P,S);C!=null&&(u.push(g),d.set(g,C))}}const p=new Ii(u);return new U4(d,p,o.fieldTransforms)}function z4(n,e,t,r=!1){return lc(t,n.Qu(r?4:3,e))}function lc(n,e){if(W4(n=it(n)))return y5("Unsupported field value:",e,n),$4(n,e);if(n instanceof oc)return function(r,i){if(!B4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=lc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=An.fromDate(r);return{timestampValue:Jh(i.serializer,s)}}if(r instanceof An){const s=new An(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(i.serializer,s)}}if(r instanceof A1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof h5)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Rw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${E1(r)}`)}(n,e)}function $4(n,e){const t={};return eN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sc(n,(r,i)=>{const s=lc(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function W4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof An||n instanceof A1||n instanceof Io||n instanceof xn||n instanceof oc||n instanceof h5)}function y5(n,e,t){if(!W4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=E1(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function C_(n,e,t){if((e=it(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return _5(n,e);throw b0("Field path arguments must be of type string or ",n,!1,void 0,t)}const Mj=new RegExp("[~\\*/\\[\\]]");function _5(n,e,t){if(e.search(Mj)>=0)throw b0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw b0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function b0(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Re(be.INVALID_ARGUMENT,a+n+l)}function G4(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(x1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Vj extends _p{data(){return super.data()}}function x1(n,e){return typeof e=="string"?_5(n,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w5{}class Kp extends w5{}function zo(n,e,...t){let r=[];e instanceof w5&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof I5).length,a=s.filter(l=>l instanceof P1).length;if(o>1||o>0&&a>0)throw new Re(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class P1 extends Kp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new P1(e,t,r)}_apply(e){const t=this._parse(e);return J4(e._query,t),new ni(e.firestore,e.converter,__(e._query,t))}_parse(e){const t=ac(e.firestore);return function(s,o,a,l,u,d,p){let v;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Re(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hA(p,d);const g=[];for(const P of p)g.push(cA(l,s,P));v={arrayValue:{values:g}}}else v=cA(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hA(p,d),v=z4(a,o,p,d==="in"||d==="not-in");return Ot.create(u,d,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function jj(n,e,t){const r=e,i=x1("where",n);return P1._create(i,r,t)}class I5 extends w5{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new I5(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)J4(o,l),o=__(o,l)}(e._query,t),new ni(e.firestore,e.converter,__(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class b5 extends Kp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new b5(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pp(s,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new pa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function K4(n,e="asc"){const t=e,r=x1("orderBy",n);return b5._create(r,t)}class N1 extends Kp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new N1(e,t,r)}_apply(e){return new ni(e.firestore,e.converter,p0(e._query,this._limit,this._limitType))}}function Uj(n){return C4("limit",n),N1._create("limit",n,"F")}function Bj(n){return C4("limitToLast",n),N1._create("limitToLast",n,"L")}class k1 extends Kp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new k1(e,t,r)}_apply(e){const t=Q4(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,function(i,s){return new pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function qj(...n){return k1._create("startAt",n,!0)}function zj(...n){return k1._create("startAfter",n,!1)}class R1 extends Kp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new R1(e,t,r)}_apply(e){const t=Q4(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,function(i,s){return new pa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function $j(...n){return R1._create("endBefore",n,!1)}function Wj(...n){return R1._create("endAt",n,!0)}function Q4(n,e,t,r){if(t[0]=it(t[0]),t[0]instanceof _p)return function(s,o,a,l,u){if(!l)throw new Re(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of Ah(s))if(p.field.isKeyField())d.push(Hu(o,l.key));else{const v=l.data.field(p.field);if(d1(v))throw new Re(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const g=p.field.canonicalString();throw new Re(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(v)}return new kl(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ac(n.firestore);return function(o,a,l,u,d,p){const v=o.explicitOrderBy;if(d.length>v.length)throw new Re(be.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let P=0;P<d.length;P++){const S=d[P];if(v[P].field.isKeyField()){if(typeof S!="string")throw new Re(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!Nw(o)&&S.indexOf("/")!==-1)throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);const C=o.path.child(Dt.fromString(S));if(!qe.isDocumentKey(C))throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const w=new qe(C);g.push(Hu(a,w))}else{const C=z4(l,u,S);g.push(C)}}return new kl(g,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function cA(n,e,t){if(typeof(t=it(t))=="string"){if(t==="")throw new Re(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nw(e)&&t.indexOf("/")!==-1)throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Dt.fromString(t));if(!qe.isDocumentKey(r))throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hu(n,new qe(r))}if(t instanceof xn)return Hu(n,t._key);throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E1(t)}.`)}function hA(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J4(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class E5{convertValue(e,t="none"){switch(Gu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return sc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>wn(o.doubleValue));return new h5(s)}convertGeoPoint(e){return new A1(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hp(e));default:return null}}convertTimestamp(e){const t=aa(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Dt.fromString(e);rt(zN(r));const i=new Pl(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||Hn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Gj extends E5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let la=class extends _p{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(x1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Df=class extends la{data(e={}){return super.data(e)}},Ll=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Df(this._firestore,this._userDataWriter,r.key,r,new xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Df(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Df(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Hj(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Hj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye()}}function Y4(n,e){return n instanceof la&&e instanceof la?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ll&&e instanceof Ll&&n._firestore===e._firestore&&M4(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){n=qt(n,xn);const e=qt(n.firestore,Qn);return P4(qr(e),n._key).then(t=>A5(e,n,t))}class uc extends E5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function Kj(n){n=qt(n,xn);const e=qt(n.firestore,Qn),t=qr(e),r=new uc(e);return vj(t,n._key).then(i=>new la(e,r,n._key,i,new xu(i!==null&&i.hasLocalMutations,!0),n.converter))}function Qj(n){n=qt(n,xn);const e=qt(n.firestore,Qn);return P4(qr(e),n._key,{source:"server"}).then(t=>A5(e,n,t))}function Z4(n){n=qt(n,ni);const e=qt(n.firestore,Qn),t=qr(e),r=new uc(e);return H4(n._query),N4(t,n._query).then(i=>new Ll(e,r,n,i))}function Jj(n){n=qt(n,ni);const e=qt(n.firestore,Qn),t=qr(e),r=new uc(e);return yj(t,n._query).then(i=>new Ll(e,r,n,i))}function Yj(n){n=qt(n,ni);const e=qt(n.firestore,Qn),t=qr(e),r=new uc(e);return N4(t,n._query,{source:"server"}).then(i=>new Ll(e,r,n,i))}function dA(n,e,t){n=qt(n,xn);const r=qt(n.firestore,Qn),i=C1(n.converter,e,t);return Qp(r,[S1(ac(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,En.none())])}function L_(n,e,t,...r){n=qt(n,xn);const i=qt(n.firestore,Qn),s=ac(i);let o;return o=typeof(e=it(e))=="string"||e instanceof Cl?v5(s,"updateDoc",n._key,e,t,r):g5(s,"updateDoc",n._key,e),Qp(i,[o.toMutation(n._key,En.exists(!0))])}function e3(n){return Qp(qt(n.firestore,Qn),[new md(n._key,En.none())])}function t3(n,e){const t=qt(n.firestore,Qn),r=Du(n),i=C1(n.converter,e);return Qp(t,[S1(ac(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function n3(n,...e){var t,r,i;n=it(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||R_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(R_(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,d;if(n instanceof xn)u=qt(n.firestore,Qn),d=fd(n._key.path),l={next:p=>{e[o]&&e[o](A5(u,n,p))},error:e[o+1],complete:e[o+2]};else{const p=qt(n,ni);u=qt(p.firestore,Qn),d=p._query;const v=new uc(u);l={next:g=>{e[o]&&e[o](new Ll(u,v,p,g))},error:e[o+1],complete:e[o+2]},H4(n._query)}return function(v,g,P,S){const C=new I1(S),w=new e5(g,C,P);return v.asyncQueue.enqueueAndForget(async()=>Yw(await nd(v),w)),()=>{C.Za(),v.asyncQueue.enqueueAndForget(async()=>Xw(await nd(v),w))}}(qr(u),d,a,l)}function Xj(n,e){return _j(qr(n=qt(n,Qn)),R_(e)?e:{next:e})}function Qp(n,e){return function(r,i){const s=new Sr;return r.asyncQueue.enqueueAndForget(async()=>HV(await l5(r),i,s)),s.promise}(qr(n),e)}function A5(n,e,t){const r=t.docs.get(e._key),i=new uc(n);return new la(n,i,e._key,r,new xu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e9=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ac(e)}set(e,t,r){this._verifyNotCommitted();const i=nl(e,this._firestore),s=C1(i.converter,t,r),o=S1(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,En.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=nl(e,this._firestore);let o;return o=typeof(t=it(t))=="string"||t instanceof Cl?v5(this._dataReader,"WriteBatch.update",s._key,t,r,i):g5(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nl(e,this._firestore);return this._mutations=this._mutations.concat(new md(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function nl(n,e){if((n=it(n)).firestore!==e)throw new Re(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t9=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ac(t)}get(t){const r=nl(t,this._firestore),i=new Gj(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Ye();const o=s[0];if(o.isFoundDocument())return new _p(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new _p(this._firestore,i,r._key,null,r.converter);throw Ye()})}set(t,r,i){const s=nl(t,this._firestore),o=C1(s.converter,r,i),a=S1(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=nl(t,this._firestore);let a;return a=typeof(r=it(r))=="string"||r instanceof Cl?v5(this._dataReader,"Transaction.update",o._key,r,i,s):g5(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=nl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nl(e,this._firestore),r=new uc(this._firestore);return super.get(e).then(i=>new la(this._firestore,r,t._key,i._document,new xu(!1,!1),t.converter))}};function n9(n,e,t){n=qt(n,Qn);const r=Object.assign(Object.assign({},Zj),t);return function(s){if(s.maxAttempts<1)throw new Re(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Sr;return s.asyncQueue.enqueueAndForget(async()=>{const u=await pj(s);new dj(s.asyncQueue,u,a,o,l).au()}),l.promise}(qr(n),i=>e(new t9(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(){return new Hp("deleteField")}function i9(){return new d5("serverTimestamp")}function s9(...n){return new f5("arrayUnion",n)}function o9(...n){return new p5("arrayRemove",n)}function a9(n){return new m5("increment",n)}(function(e,t=!0){(function(i){dd=i})(Yi),vo(new ws("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Qn(new vM(r.getProvider("auth-internal")),new IM(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Gi(nE,"4.7.3",e),Gi(nE,"4.7.3","esm2017")})();const l9="@firebase/firestore-compat",u9="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function pA(){if(!HM())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let r3=class D_{constructor(e){this._delegate=e}static fromBase64String(e){return pA(),new D_(Io.fromBase64String(e))}static fromUint8Array(e){return fA(),new D_(Io.fromUint8Array(e))}toBase64(){return pA(),this._delegate.toBase64()}toUint8Array(){return fA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n){return c9(n,["next","error","complete"])}function c9(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{enableIndexedDbPersistence(e,t){return Sj(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return xj(e._delegate)}clearIndexedDbPersistence(e){return Pj(e._delegate)}}class i3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){bj(this._delegate,e,t,r)}enableNetwork(){return kj(this._delegate)}disableNetwork(){return Rj(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,R4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Nj(this._delegate)}onSnapshotsInSync(e){return Xj(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rd(this,c5(this._delegate,e))}catch(t){throw Xr(t,"collection()","Firestore.collection()")}}doc(e){try{return new ms(this,Du(this._delegate,e))}catch(t){throw Xr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yr(this,Ej(this._delegate,e))}catch(t){throw Xr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n9(this._delegate,t=>e(new s3(this,t)))}batch(){return qr(this._delegate),new o3(new e9(this._delegate,e=>Qp(this._delegate,e)))}loadBundle(e){return Cj(this._delegate,e)}namedQuery(e){return Lj(this._delegate,e).then(t=>t?new Yr(this,t):null)}}class L1 extends E5{constructor(e){super(),this.firestore=e}convertBytes(e){return new r3(new Io(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ms.forKey(t,this.firestore,null)}}function d9(n){fM(n)}class s3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new L1(e)}get(e){const t=Pu(e);return this._delegate.get(t).then(r=>new wp(this._firestore,new la(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Pu(e);return r?(T5("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}}class o3{constructor(e){this._delegate=e}set(e,t,r){const i=Pu(e);return r?(T5("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Pu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ec{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Df(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ip(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ec.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ec(e,new L1(e),t),i.set(t,s)),s}}ec.INSTANCES=new WeakMap;class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new L1(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ms(t,new xn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new ms(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rd(this.firestore,c5(this._delegate,e))}catch(t){throw Xr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=it(e),e instanceof xn?F4(this._delegate,e):!1}set(e,t){t=T5("DocumentReference.set",t);try{return t?dA(this._delegate,e,t):dA(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?L_(this._delegate,e):L_(this._delegate,e,t,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return e3(this._delegate)}onSnapshot(...e){const t=a3(e),r=l3(e,i=>new wp(this.firestore,new la(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return n3(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Kj(this._delegate):(e==null?void 0:e.source)==="server"?t=Qj(this._delegate):t=X4(this._delegate),t.then(r=>new wp(this.firestore,new la(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ms(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xr(n,e,t){return n.message=n.message.replace(e,t),n}function a3(n){for(const e of n)if(typeof e=="object"&&!O_(e))return e;return{}}function l3(n,e){var t,r;let i;return O_(n[0])?i=n[0]:O_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class wp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ms(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Y4(this._delegate,e._delegate)}}class Ip extends wp{data(e){const t=this._delegate.data(e);return this._delegate._converter||pM(t!==void 0),t}}class Yr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new L1(e)}where(e,t,r){try{return new Yr(this.firestore,zo(this._delegate,jj(e,t,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yr(this.firestore,zo(this._delegate,K4(e,t)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yr(this.firestore,zo(this._delegate,Uj(e)))}catch(t){throw Xr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yr(this.firestore,zo(this._delegate,Bj(e)))}catch(t){throw Xr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yr(this.firestore,zo(this._delegate,qj(...e)))}catch(t){throw Xr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yr(this.firestore,zo(this._delegate,zj(...e)))}catch(t){throw Xr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yr(this.firestore,zo(this._delegate,$j(...e)))}catch(t){throw Xr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yr(this.firestore,zo(this._delegate,Wj(...e)))}catch(t){throw Xr(t,"endAt()","Query.endAt()")}}isEqual(e){return M4(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Jj(this._delegate):(e==null?void 0:e.source)==="server"?t=Yj(this._delegate):t=Z4(this._delegate),t.then(r=>new F_(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=a3(e),r=l3(e,i=>new F_(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return n3(this._delegate,t,r)}withConverter(e){return new Yr(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class f9{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ip(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class F_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ip(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new f9(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ip(this._firestore,r))})}isEqual(e){return Y4(this._delegate,e._delegate)}}class rd extends Yr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ms(this.firestore,e):null}doc(e){try{return e===void 0?new ms(this.firestore,Du(this._delegate)):new ms(this.firestore,Du(this._delegate,e))}catch(t){throw Xr(t,"doc()","CollectionReference.doc()")}}add(e){return t3(this._delegate,e).then(t=>new ms(this.firestore,t))}isEqual(e){return F4(this._delegate,e._delegate)}withConverter(e){return new rd(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pu(n){return qt(n,xn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(...e){this._delegate=new Cl(...e)}static documentId(){return new S5(bn.keyField().canonicalString())}isEqual(e){return e=it(e),e instanceof Cl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this._delegate=e}static serverTimestamp(){const e=i9();return e._methodName="FieldValue.serverTimestamp",new Iu(e)}static delete(){const e=r9();return e._methodName="FieldValue.delete",new Iu(e)}static arrayUnion(...e){const t=s9(...e);return t._methodName="FieldValue.arrayUnion",new Iu(t)}static arrayRemove(...e){const t=o9(...e);return t._methodName="FieldValue.arrayRemove",new Iu(t)}static increment(e){const t=a9(e);return t._methodName="FieldValue.increment",new Iu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={Firestore:i3,GeoPoint:A1,Timestamp:An,Blob:r3,Transaction:s3,WriteBatch:o3,DocumentReference:ms,DocumentSnapshot:wp,Query:Yr,QueryDocumentSnapshot:Ip,QuerySnapshot:F_,CollectionReference:rd,FieldPath:S5,FieldValue:Iu,setLogLevel:d9,CACHE_SIZE_UNLIMITED:Tj};function m9(n,e){n.INTERNAL.registerComponent(new ws("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},p9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(n){m9(n,(e,t)=>new i3(e,t,new h9)),n.registerVersion(l9,u9)}g9(yo);if(window.firebase&&yo.apps.length)console.log(" Reutilizando instncia Firebase do portal existente");else{const n={apiKey:"AIzaSyBcQi5nToMOGVDBWprhhOY0NSJX4qE100w",authDomain:"portal-relevo.firebaseapp.com",projectId:"portal-relevo",storageBucket:"portal-relevo.firebasestorage.app",messagingSenderId:"182759626683",appId:"1:182759626683:web:2dde2eeef910d4c288569e",measurementId:"G-W8TTP3D3YQ"};yo.initializeApp(n),console.log(" Firebase compat inicializado (projeto portal-relevo)")}const x5=yo.app(),E0=yo.auth(),Ag=yo.firestore();console.log(" Firebase ativo:",x5.name);console.log(" Projeto conectado:",x5.options.projectId);console.log(" Usurio atual:",E0.currentUser?E0.currentUser.email:"nenhum");function u3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v9=u3,c3=new bo("auth","Firebase",u3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Np("@firebase/auth");function y9(n,...e){A0.logLevel<=kt.WARN&&A0.warn(`Auth (${Yi}): ${n}`,...e)}function Tg(n,...e){A0.logLevel<=kt.ERROR&&A0.error(`Auth (${Yi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(n,...e){throw P5(n,...e)}function po(n,...e){return P5(n,...e)}function h3(n,e,t){const r=Object.assign(Object.assign({},v9()),{[e]:t});return new bo("auth","Firebase",r).create(e,{appName:n.name})}function Ou(n){return h3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P5(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return c3.create(n,...e)}function It(n,e,...t){if(!n)throw P5(e,...t)}function Qo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tg(e),new Error(e)}function ca(n,e){n||Qo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _9(){return mA()==="http:"||mA()==="https:"}function mA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_9()||J2()||"connection"in navigator)?navigator.onLine:!0}function I9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.shortDelay=e,this.longDelay=t,ca(t>e,"Short delay should be less than long delay!"),this.isMobile=yx()||K0()}get(){return w9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n,e){ca(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=new Jp(3e4,6e4);function k5(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function wd(n,e,t,r,i={}){return f3(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$s(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return wx()||(u.referrerPolicy="no-referrer"),d3.fetch()(p3(n,n.config.apiHost,t,a),u)})}async function f3(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},b9),e);try{const i=new T9(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hm(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hm(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hm(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hm(n,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw h3(n,d,u);ua(n,d)}}catch(i){if(i instanceof gr)throw i;ua(n,"network-request-failed",{message:String(i)})}}async function A9(n,e,t,r,i={}){const s=await wd(n,e,t,r,i);return"mfaPendingCredential"in s&&ua(n,"multi-factor-auth-required",{_serverResponse:s}),s}function p3(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?N5(n.config,i):`${n.config.apiScheme}://${i}`}class T9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(po(this.auth,"network-request-failed")),E9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=po(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(n,e){return wd(n,"POST","/v1/accounts:delete",e)}async function m3(n,e){return wd(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x9(n,e=!1){const t=it(n),r=await t.getIdToken(e),i=R5(r);It(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Of(Gv(i.auth_time)),issuedAtTime:Of(Gv(i.iat)),expirationTime:Of(Gv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Gv(n){return Number(n)*1e3}function R5(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Tg("JWT malformed, contained fewer than 3 sections"),null;try{const i=H2(t);return i?JSON.parse(i):(Tg("Failed to decode base64 JWT payload"),null)}catch(i){return Tg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gA(n){const e=R5(n);return It(e,"internal-error"),It(typeof e.exp<"u","internal-error"),It(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gr&&P9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function P9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Of(this.lastLoginAt),this.creationTime=Of(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(n){var e;const t=n.auth,r=await n.getIdToken(),i=await bp(n,m3(t,{idToken:r}));It(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?g3(s.providerUserInfo):[],a=R9(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new V_(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function k9(n){const e=it(n);await T0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function g3(n){return n.map(e=>{var{providerId:t}=e,r=ld(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(n,e){const t=await f3(n,{},async()=>{const r=$s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=p3(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",d3.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function L9(n,e){return wd(n,"POST","/v2/accounts:revokeToken",k5(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){It(e.idToken,"internal-error"),It(typeof e.idToken<"u","internal-error"),It(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){It(e.length!==0,"internal-error");const t=gA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(It(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await C9(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Sh;return r&&(It(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(It(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(It(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sh,this.toJSON())}_performRefresh(){return Qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(n,e){It(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Jo{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ld(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new N9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new V_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await bp(this,this.stsTokenManager.getToken(this.auth,e));return It(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return x9(this,e)}reload(){return k9(this)}_assign(e){this!==e&&(It(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){It(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await T0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(Ou(this.auth));const e=await this.getIdToken();return await bp(this,S9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,S=(a=t.tenantId)!==null&&a!==void 0?a:void 0,C=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:$,isAnonymous:W,providerData:Q,stsTokenManager:k}=t;It(R&&k,e,"internal-error");const E=Sh.fromJSON(this.name,k);It(typeof R=="string",e,"internal-error"),Ha(p,e.name),Ha(v,e.name),It(typeof $=="boolean",e,"internal-error"),It(typeof W=="boolean",e,"internal-error"),Ha(g,e.name),Ha(P,e.name),Ha(S,e.name),Ha(C,e.name),Ha(w,e.name),Ha(b,e.name);const O=new Jo({uid:R,auth:e,email:v,emailVerified:$,displayName:p,isAnonymous:W,photoURL:P,phoneNumber:g,tenantId:S,stsTokenManager:E,createdAt:w,lastLoginAt:b});return Q&&Array.isArray(Q)&&(O.providerData=Q.map(U=>Object.assign({},U))),C&&(O._redirectEventId=C),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new Sh;i.updateFromServerResponse(t);const s=new Jo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await T0(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];It(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?g3(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Sh;a.updateFromIdToken(r);const l=new Jo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new V_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new Map;function Yo(n){ca(n instanceof Function,"Expected a class definition");let e=vA.get(n);return e?(ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}v3.type="NONE";const yA=v3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(n,e,t){return`firebase:${n}:${e}:${t}`}class xh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Sg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sg("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xh(Yo(yA),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Yo(yA);const o=Sg(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const d=await u._get(o);if(d){const p=Jo._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new xh(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new xh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(E3(e))return"Blackberry";if(A3(e))return"Webos";if(_3(e))return"Safari";if((e.includes("chrome/")||w3(e))&&!e.includes("edge/"))return"Chrome";if(b3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y3(n=Ft()){return/firefox\//i.test(n)}function _3(n=Ft()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w3(n=Ft()){return/crios\//i.test(n)}function I3(n=Ft()){return/iemobile/i.test(n)}function b3(n=Ft()){return/android/i.test(n)}function E3(n=Ft()){return/blackberry/i.test(n)}function A3(n=Ft()){return/webos/i.test(n)}function C5(n=Ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D9(n=Ft()){var e;return C5(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O9(){return Y2()&&document.documentMode===10}function T3(n=Ft()){return C5(n)||b3(n)||A3(n)||E3(n)||/windows phone/i.test(n)||I3(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(n,e=[]){let t;switch(n){case"Browser":t=_A(Ft());break;case"Worker":t=`${_A(Ft())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(n,e={}){return wd(n,"GET","/v2/passwordPolicy",k5(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=6;class j9{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:V9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wA(this),this.idTokenSubscription=new wA(this),this.beforeStateQueue=new F9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yo(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await m3(this,{idToken:e}),r=await Jo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return It(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await T0(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(Ou(this));const t=e?it(e):null;return t&&It(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&It(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(Ou(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(Ou(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M9(this),t=new j9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await L9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yo(e)||this._popupRedirectResolver;It(t,this,"argument-error"),this.redirectPersistenceManager=await xh.create(this,[Yo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(It(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return It(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&y9(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function L5(n){return it(n)}class wA{constructor(e){this.auth=e,this.observer=null,this.addObserver=X2(t=>this.observer=t)}get next(){return It(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B9(n){D5=n}function q9(n){return D5.loadJS(n)}function z9(){return D5.gapiScript}function $9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(n,e){const t=Q0(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Uh(s,e??{}))return i;ua(i,"already-initialized")}return t.initialize({options:e})}function G9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Yo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function H9(n,e,t){const r=L5(n);It(r._canInitEmulator,r,"emulator-config-failed"),It(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=x3(e),{host:o,port:a}=K9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Q9()}function x3(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function K9(n){const e=x3(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:IA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:IA(o)}}}function IA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Q9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qo("not implemented")}_getIdTokenResponse(e){return Qo("not implemented")}_linkToIdToken(e,t){return Qo("not implemented")}_getReauthenticationResolver(e){return Qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(n,e){return A9(n,"POST","/v1/accounts:signInWithIdp",k5(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="http://localhost";class tc extends P3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ua("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=ld(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new tc(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ph(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ph(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ph(e,t)}buildRequest(){const e={requestUri:J9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$s(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends N3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Yp{constructor(){super("facebook.com")}static credential(e){return tc._fromParams({providerId:rl.PROVIDER_ID,signInMethod:rl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rl.credentialFromTaggedObject(e)}static credentialFromError(e){return rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rl.credential(e.oauthAccessToken)}catch{return null}}}rl.FACEBOOK_SIGN_IN_METHOD="facebook.com";rl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends Yp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tc._fromParams({providerId:il.PROVIDER_ID,signInMethod:il.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return il.credentialFromTaggedObject(e)}static credentialFromError(e){return il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return il.credential(t,r)}catch{return null}}}il.GOOGLE_SIGN_IN_METHOD="google.com";il.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Yp{constructor(){super("github.com")}static credential(e){return tc._fromParams({providerId:sl.PROVIDER_ID,signInMethod:sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sl.credentialFromTaggedObject(e)}static credentialFromError(e){return sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sl.credential(e.oauthAccessToken)}catch{return null}}}sl.GITHUB_SIGN_IN_METHOD="github.com";sl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Yp{constructor(){super("twitter.com")}static credential(e,t){return tc._fromParams({providerId:ol.PROVIDER_ID,signInMethod:ol.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ol.credentialFromTaggedObject(e)}static credentialFromError(e){return ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ol.credential(t,r)}catch{return null}}}ol.TWITTER_SIGN_IN_METHOD="twitter.com";ol.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Jo._fromIdTokenResponse(e,r,i),o=bA(r);return new id({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=bA(r);return new id({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function bA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends gr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new S0(e,t,r,i)}}function k3(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S0._fromErrorAndOperation(n,s,e,r):s})}async function Y9(n,e,t=!1){const r=await bp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return id._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(n,e,t=!1){const{auth:r}=n;if(Gt(r.app))return Promise.reject(Ou(r));const i="reauthenticate";try{const s=await bp(n,k3(r,i,e,n),t);It(s.idToken,r,"internal-error");const o=R5(s.idToken);It(o,r,"internal-error");const{sub:a}=o;return It(n.uid===a,r,"user-mismatch"),id._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ua(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(n,e,t=!1){if(Gt(n.app))return Promise.reject(Ou(n));const r="signIn",i=await k3(n,r,e),s=await id._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function eU(n,e,t,r){return it(n).onIdTokenChanged(e,t,r)}function tU(n,e,t){return it(n).beforeAuthStateChanged(e,t)}function nU(n,e,t,r){return it(n).onAuthStateChanged(e,t,r)}function rU(n){return it(n).signOut()}const x0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(x0,"1"),this.storage.removeItem(x0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=1e3,sU=10;class C3 extends R3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);O9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},iU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}C3.type="LOCAL";const oU=C3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3 extends R3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}L3.type="SESSION";const D3=L3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new D1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await aU(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=O5("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===u)switch(v.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(){return window}function uU(n){mo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(){return typeof mo().WorkerGlobalScope<"u"&&typeof mo().importScripts=="function"}async function cU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dU(){return O3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="firebaseLocalStorageDb",fU=1,P0="firebaseLocalStorage",M3="fbase_key";class Xp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function O1(n,e){return n.transaction([P0],e?"readwrite":"readonly").objectStore(P0)}function pU(){const n=indexedDB.deleteDatabase(F3);return new Xp(n).toPromise()}function j_(){const n=indexedDB.open(F3,fU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(P0,{keyPath:M3})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(P0)?e(r):(r.close(),await pU(),e(await j_()))})})}async function EA(n,e,t){const r=O1(n,!0).put({[M3]:e,value:t});return new Xp(r).toPromise()}async function mU(n,e){const t=O1(n,!1).get(e),r=await new Xp(t).toPromise();return r===void 0?null:r.value}function AA(n,e){const t=O1(n,!0).delete(e);return new Xp(t).toPromise()}const gU=800,vU=3;class V3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D1._getInstance(dU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await cU(),!this.activeServiceWorker)return;this.sender=new lU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j_();return await EA(e,x0,"1"),await AA(e,x0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>EA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>mU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>AA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=O1(i,!1).getAll();return new Xp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V3.type="LOCAL";const yU=V3;new Jp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(n,e){return e?Yo(e):(It(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5 extends P3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ph(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ph(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ph(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wU(n){return Z9(n.auth,new F5(n),n.bypassAuthState)}function IU(n){const{auth:e,user:t}=n;return It(t,e,"internal-error"),X9(t,new F5(n),n.bypassAuthState)}async function bU(n){const{auth:e,user:t}=n;return It(t,e,"internal-error"),Y9(t,new F5(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wU;case"linkViaPopup":case"linkViaRedirect":return bU;case"reauthViaPopup":case"reauthViaRedirect":return IU;default:ua(this.auth,"internal-error")}}resolve(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=new Jp(2e3,1e4);class ph extends j3{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ph.currentPopupAction&&ph.currentPopupAction.cancel(),ph.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return It(e,this.auth,"internal-error"),e}async onExecution(){ca(this.filter.length===1,"Popup operations only handle one event");const e=O5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(po(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(po(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ph.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(po(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EU.get())};e()}}ph.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="pendingRedirect",xg=new Map;class TU extends j3{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xg.get(this.auth._key());if(!e){try{const r=await SU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xg.set(this.auth._key(),e)}return this.bypassAuthState||xg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SU(n,e){const t=NU(e),r=PU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function xU(n,e){xg.set(n._key(),e)}function PU(n){return Yo(n._redirectPersistence)}function NU(n){return Sg(AU,n.config.apiKey,n.name)}async function kU(n,e,t=!1){if(Gt(n.app))return Promise.reject(Ou(n));const r=L5(n),i=_U(r,e),o=await new TU(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=10*60*1e3;class CU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!U3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(po(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RU&&this.cachedEventUids.clear(),this.cachedEventUids.has(TA(e))}saveEventToCache(e){this.cachedEventUids.add(TA(e)),this.lastProcessedEventTime=Date.now()}}function TA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function U3({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U3(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(n,e={}){return wd(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FU=/^https?/;async function MU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DU(n);for(const t of e)try{if(VU(t))return}catch{}ua(n,"unauthorized-domain")}function VU(n){const e=M_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!FU.test(t))return!1;if(OU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=new Jp(3e4,6e4);function SA(){const n=mo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UU(n){return new Promise((e,t)=>{var r,i,s;function o(){SA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SA(),t(po(n,"network-request-failed"))},timeout:jU.get()})}if(!((i=(r=mo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=mo().gapi)===null||s===void 0)&&s.load)o();else{const a=$9("iframefcb");return mo()[a]=()=>{gapi.load?o():t(po(n,"network-request-failed"))},q9(`${z9()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Pg=null,e})}let Pg=null;function BU(n){return Pg=Pg||UU(n),Pg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new Jp(5e3,15e3),zU="__/auth/iframe",$U="emulator/auth/iframe",WU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HU(n){const e=n.config;It(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?N5(e,$U):`https://${n.config.authDomain}/${zU}`,r={apiKey:e.apiKey,appName:n.name,v:Yi},i=GU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$s(r).slice(1)}`}async function KU(n){const e=await BU(n),t=mo().gapi;return It(t,n,"internal-error"),e.open({where:document.body,url:HU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=po(n,"network-request-failed"),a=mo().setTimeout(()=>{s(o)},qU.get());function l(){mo().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JU=500,YU=600,XU="_blank",ZU="http://localhost";class xA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eB(n,e,t,r=JU,i=YU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},QU),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ft().toLowerCase();t&&(a=w3(u)?XU:t),y3(u)&&(e=e||ZU,l.scrollbars="yes");const d=Object.entries(l).reduce((v,[g,P])=>`${v}${g}=${P},`,"");if(D9(u)&&a!=="_self")return tB(e||"",a),new xA(null);const p=window.open(e||"",a,d);It(p,n,"popup-blocked");try{p.focus()}catch{}return new xA(p)}function tB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="__/auth/handler",rB="emulator/auth/handler",iB=encodeURIComponent("fac");async function PA(n,e,t,r,i,s){It(n.config.authDomain,n,"auth-domain-config-required"),It(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yi,eventId:i};if(e instanceof N3){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",bx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Yp){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),u=l?`#${iB}=${encodeURIComponent(l)}`:"";return`${sB(n)}?${$s(a).slice(1)}${u}`}function sB({config:n}){return n.emulator?N5(n,rB):`https://${n.authDomain}/${nB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="webStorageSupport";class oB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D3,this._completeRedirectFn=kU,this._overrideRedirectResult=xU}async _openPopup(e,t,r,i){var s;ca((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await PA(e,t,r,M_(),i);return eB(e,o,O5())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await PA(e,t,r,M_(),i);return uU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ca(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await KU(e),r=new CU(e);return t.register("authEvent",i=>(It(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hv,{type:Hv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hv];o!==void 0&&t(!!o),ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return T3()||_3()||C5()}}const aB=oB;var NA="@firebase/auth",kA="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){It(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(n){vo(new ws("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;It(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S3(n)},u=new U9(r,i,s,l);return G9(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vo(new ws("auth-internal",e=>{const t=L5(e.getProvider("auth").getImmediate());return(r=>new lB(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(NA,kA,uB(n)),Gi(NA,kA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=5*60,dB=K2("authIdTokenMaxAge")||hB;let RA=null;const fB=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dB)return;const i=t==null?void 0:t.token;RA!==i&&(RA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pB(n=kx()){const e=Q0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=W9(n,{popupRedirectResolver:aB,persistence:[yU,oU,D3]}),r=K2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fB(s.toString());tU(t,o,()=>o(t.currentUser)),eU(t,a=>o(a))}}const i=LL("auth");return i&&H9(t,`http://${i}`),t}function mB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}B9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=po("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");const CA=c5(Ag,"orcamentos");function LA(n){var $;const e=W=>isNaN(W)||W===null||W===void 0?0:Number(W),t=(n.coordenacao||[]).reduce((W,Q)=>{const E=e(Q.dias)/30,O=e(Q.subtotal),U=e(Q.quant);return W+E*O*U},0),r=(n.profissionais||[]).reduce((W,Q)=>{const E=e(Q.dias)/30,O=e(Q.prolabore),U=e(Q.pessoas);return W+E*O*U},0),i=(n.valoresUnicos||[]).reduce((W,Q)=>{const k=e(Q.valor),E=e(Q.pessoas),O=e(Q.dias);return W+k*E*O},0),s=(n.logistica||[]).reduce((W,Q)=>{const k=e(Q.valor),E=e(Q.qtd),O=e(Q.dias);return W+k*E*O},0),o=t+r+i+s,a=n.parametros||{},l=(t+r)*e(a.encargosPessoal),u=o+l,d=u*e(a.lucro),p=u*e(a.fundoGiro),v=u+d+p,g=v*e(a.imposto),P=u*e(a.despesasFiscais),S=u*e(a.comissaoCaptacao),C=v+g+P+S,w=e(($=n==null?void 0:n.metadata)==null?void 0:$.desconto)/100,b=C*w,R=C-b;return{categorias:{coordenacao:t,profissionais:r,valoresUnicos:i,logistica:s},encargosPessoal:l,custoTotal:u,lucro:d,fundoGiro:p,impostos:g,despesasFiscais:P,comissaoCaptacao:S,subtotal:o,subtotalComLucroFundo:v,totalAntesDesconto:C,desconto:b,totalGeral:R}}const ef={async criarOrcamento(n){var e,t,r;try{console.log(" Iniciando salvamento no Firebase...");const i=LA(n),s={...n,totais:i,criadoEm:new Date,atualizadoEm:new Date,versao:((e=n.metadata)==null?void 0:e.versao)||1};console.log(" Estrutura sendo salva:",{metadata:s.metadata,coordenacaoCount:(t=s.coordenacao)==null?void 0:t.length,profissionaisCount:(r=s.profissionais)==null?void 0:r.length,totaisResumo:{subtotal:s.totais.subtotal,totalGeral:s.totais.totalGeral}});const o=await t3(CA,s);return console.log(" NOVO ORAMENTO SALVO com ID nico:",o.id),o.id}catch(i){throw console.error(" Erro crtico ao criar oramento:",i),new Error(`Falha ao salvar oramento: ${i.message}`)}},async listarOrcamentos(){try{console.log(" Buscando oramentos no Firebase (ordem: atualizadoEm desc)...");const n=zo(CA,K4("atualizadoEm","desc")),t=(await Z4(n)).docs.map(r=>({id:r.id,...r.data()}));return console.log(`${t.length} documentos encontrados no total`),t}catch(n){throw console.error("Erro ao listar oramentos:",n),new Error(`Falha ao carregar oramentos: ${n.message}`)}},async buscarOrcamento(n){try{console.log("Buscando oramento:",n);const e=Du(Ag,"orcamentos",n),t=await X4(e);return t.exists()?(console.log(" Oramento encontrado e carregado"),{id:t.id,...t.data()}):(console.log(" Oramento no encontrado"),null)}catch(e){throw console.error("Erro ao buscar oramento:",e),new Error(`Falha ao carregar oramento: ${e.message}`)}},async atualizarOrcamento(n,e){try{console.log("Atualizando oramento:",n);const t=LA(e),r=Du(Ag,"orcamentos",n);await L_(r,{...e,totais:t,atualizadoEm:new Date}),console.log(" Oramento atualizado com sucesso (incluindo totais)")}catch(t){throw console.error("Erro ao atualizar oramento:",t),new Error(`Falha ao atualizar oramento: ${t.message}`)}},async excluirOrcamento(n){try{console.log("Excluindo oramento:",n);const e=Du(Ag,"orcamentos",n);await e3(e),console.log(" Oramento excludo com sucesso")}catch(e){throw console.error("Erro ao excluir oramento:",e),new Error(`Falha ao excluir oramento: ${e.message}`)}}},et={required:(n,e="Campo")=>n==null||n===""?`${e}  obrigatrio`:null,number:(n,e="Campo")=>n==null||n===""?null:isNaN(Number(n))?`${e} deve ser um nmero vlido`:null,minValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)<e?`${t} deve ser maior ou igual a ${e}`:null,maxValue:(n,e,t="Campo")=>n==null||n===""?null:Number(n)>e?`${t} deve ser menor ou igual a ${e}`:null,range:(n,e,t,r="Campo")=>{if(n==null||n==="")return null;const i=Number(n);return i<e||i>t?`${r} deve estar entre ${e} e ${t}`:null},metadata:{nome:n=>{const e=et.required(n,"Nome do oramento");return e||(n.length<3?"Nome do oramento deve ter pelo menos 3 caracteres":n.length>100?"Nome do oramento deve ter no mximo 100 caracteres":null)},cliente:n=>{const e=et.required(n,"Cliente");return e||(n.length<2?"Nome do cliente deve ter pelo menos 2 caracteres":null)},data:n=>et.required(n,"Data"),desconto:n=>{const e=et.number(n,"Desconto");return e||et.range(n,0,100,"Desconto")}},parametros:{imposto:n=>et.range(n,0,1,"Imposto"),lucro:n=>et.range(n,0,1,"Lucro"),fundoGiro:n=>et.range(n,0,1,"Fundo de Giro"),encargosPessoal:n=>et.range(n,0,1,"Encargos de Pessoal"),despesasFiscais:n=>et.range(n,0,1,"Despesas Fiscais"),comissaoCaptacao:n=>et.range(n,0,1,"Comisso de Captao")},coordenacao:{quant:n=>et.minValue(n,0,"Quantidade"),dias:n=>et.minValue(n,0,"Dias"),prolabore:n=>et.minValue(n,0,"Prolabore")},profissionais:{pessoas:n=>et.minValue(n,0,"Nmero de pessoas"),dias:n=>et.minValue(n,0,"Dias de trabalho"),prolabore:n=>et.minValue(n,0,"Prolabore")},valoresUnicos:{valor:n=>et.minValue(n,0,"Valor"),pessoas:n=>et.minValue(n,0,"Nmero de pessoas"),dias:n=>et.minValue(n,0,"Dias")},logistica:{valor:n=>et.minValue(n,0,"Valor"),qtd:n=>et.minValue(n,0,"Quantidade"),dias:n=>et.minValue(n,0,"Dias")}},gB=n=>{const e=[];if(n.metadata){const t=B3(n.metadata);e.push(...t)}if(n.parametros){const t=q3(n.parametros);e.push(...t)}if(n.coordenacao){const t=z3(n.coordenacao);e.push(...t)}if(n.profissionais){const t=$3(n.profissionais);e.push(...t)}if(n.valoresUnicos){const t=W3(n.valoresUnicos);e.push(...t)}if(n.logistica){const t=G3(n.logistica);e.push(...t)}return e},B3=n=>{const e=[];if(!n)return["Metadata no encontrada"];const t=et.metadata.nome(n.nome);t&&e.push(t);const r=et.metadata.cliente(n.cliente);r&&e.push(r);const i=et.metadata.data(n.data);i&&e.push(i);const s=et.metadata.desconto(n.desconto);return s&&e.push(s),e},q3=n=>{const e=[];return n?(Object.keys(n).forEach(t=>{if(et.parametros[t]){const r=et.parametros[t](n[t]);r&&e.push(r)}}),e):["Parmetros no encontrados"]},z3=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de coordenao invlidos"]:(n.forEach((t,r)=>{const i=`Coordenador ${r+1} (${t.cargo}):`,s=et.coordenacao.quant(t.quant);s&&e.push(`${i} ${s}`);const o=et.coordenacao.dias(t.dias);o&&e.push(`${i} ${o}`);const a=et.coordenacao.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},$3=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de profissionais invlidos"]:(n.forEach((t,r)=>{const i=`Profissional ${r+1} (${t.cargo}):`,s=et.profissionais.pessoas(t.pessoas);s&&e.push(`${i} ${s}`);const o=et.profissionais.dias(t.dias);o&&e.push(`${i} ${o}`);const a=et.profissionais.prolabore(t.prolabore);a&&e.push(`${i} ${a}`)}),e)},W3=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de valores nicos invlidos"]:(n.forEach((t,r)=>{const i=`Valor nico ${r+1} (${t.item}):`,s=et.valoresUnicos.valor(t.valor);s&&e.push(`${i} ${s}`);const o=et.valoresUnicos.pessoas(t.pessoas);o&&e.push(`${i} ${o}`);const a=et.valoresUnicos.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},G3=n=>{const e=[];return!n||!Array.isArray(n)?["Dados de logstica invlidos"]:(n.forEach((t,r)=>{const i=`Logstica ${r+1} (${t.item}):`,s=et.logistica.valor(t.valor);s&&e.push(`${i} ${s}`);const o=et.logistica.qtd(t.qtd);o&&e.push(`${i} ${o}`);const a=et.logistica.dias(t.dias);a&&e.push(`${i} ${a}`)}),e)},vB=n=>{const e=gB(n);return{valido:e.length===0,errors:e}},yB=pB(x5),Bo=window.relevoUser||yB.currentUser,H3=On.createContext(),U_={metadata:{nome:"",cliente:"",data:new Date().toISOString().split("T")[0],versao:"1.0",desconto:0},parametros:{imposto:.07,lucro:.05,fundoGiro:.05,encargosPessoal:.1,despesasFiscais:.03,comissaoCaptacao:.03},coordenacao:[{id:1,cargo:"Coordenador Geral",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:2,cargo:"Coordenador Tcnico",profissional:"Snior",prolabore:5e3,quant:1,dias:30},{id:3,cargo:"Coordenador de Campo",profissional:"Pleno",prolabore:2e3,quant:0,dias:30}],profissionais:[{id:1,cargo:"Gelogo I",prolabore:1e4,pessoas:0,dias:1},{id:2,cargo:"Gelogo II",prolabore:9e3,pessoas:0,dias:1},{id:3,cargo:"Geofsico",prolabore:11e3,pessoas:0,dias:1},{id:4,cargo:"Bilogo-Invertebrado",prolabore:9e3,pessoas:0,dias:1},{id:5,cargo:"Bilogo-vertebrado",prolabore:9e3,pessoas:0,dias:1},{id:6,cargo:"Bilogo-geral",prolabore:9500,pessoas:0,dias:1},{id:7,cargo:"Arquelogo",prolabore:9500,pessoas:0,dias:1},{id:8,cargo:"Socilogo",prolabore:9500,pessoas:0,dias:1},{id:9,cargo:"Paleontlogo",prolabore:9500,pessoas:0,dias:1},{id:10,cargo:"Engenheiro florestal",prolabore:9e3,pessoas:0,dias:1},{id:11,cargo:"Geoprocessamento",prolabore:9e3,pessoas:0,dias:1},{id:12,cargo:"Auxiliar de campo",prolabore:9e3,pessoas:0,dias:1},{id:13,cargo:"Administrador",prolabore:7e3,pessoas:0,dias:1},{id:14,cargo:"Croquista/topgrafo",prolabore:9e3,pessoas:0,dias:1}],valoresUnicos:[{id:1,item:"ARTs/RRTs",valor:300,pessoas:1,dias:1},{id:2,item:"Relatrios Tcnicos",valor:8e3,pessoas:1,dias:1},{id:3,item:"Digitalizao/Documentao",valor:50,pessoas:0,dias:1},{id:4,item:"Amostras/Anlises Laboratoriais",valor:500,pessoas:0,dias:1}],logistica:[{id:1,item:"Alimentao",valor:100,unidade:"dia/pessoa",qtd:0,dias:1},{id:2,item:"Hospedagem",valor:170,unidade:"dia/pessoa",qtd:0,dias:1},{id:3,item:"Lavanderia",valor:150,unidade:"dia/pessoa",qtd:0,dias:1},{id:4,item:"Exame mdico",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:5,item:"Seguro de Vida",valor:50,unidade:"pessoa",qtd:0,dias:1},{id:6,item:"Combustvel",valor:8,unidade:"dia/veculo",qtd:0,dias:1},{id:7,item:"Manuteno veculo",valor:100,unidade:"ms/veculo",qtd:0,dias:1},{id:8,item:"Veculo",valor:500,unidade:"dia",qtd:0,dias:1},{id:9,item:"Pedagios",valor:50,unidade:"dia/veculo",qtd:0,dias:1},{id:10,item:"Passagens areas",valor:1e3,unidade:"pessoa",qtd:0,dias:1},{id:11,item:"Passagens Terrestres",valor:250,unidade:"pessoa",qtd:0,dias:1},{id:12,item:"EPI",valor:500,unidade:"pessoa",qtd:0,dias:1},{id:13,item:"Aluguel de drone",valor:300,unidade:"dia",qtd:0,dias:1},{id:14,item:"Material de escritrio",valor:1e3,unidade:"lote",qtd:0,dias:1},{id:15,item:"Material de expediente",valor:800,unidade:"lote",qtd:0,dias:1}]};function _B(n,e){switch(e.type){case"UPDATE_METADATA":return{...n,metadata:{...n.metadata,...e.payload}};case"UPDATE_PARAMETROS":return{...n,parametros:{...n.parametros,...e.payload}};case"UPDATE_COORDENACAO":const t=n.coordenacao.map(u=>u.id===e.payload.id?{...u,...e.payload.updates}:u);return{...n,coordenacao:t};case"UPDATE_PROFISSIONAIS":if(!n.profissionais.find(u=>u.id===e.payload.id))return{...n,profissionais:[...n.profissionais,{id:e.payload.id,...e.payload.updates}]};const i=n.profissionais.map(u=>u.id===e.payload.id?{...u,...e.payload.updates}:u);return{...n,profissionais:i};case"UPDATE_VALORES_UNICOS":if(!n.valoresUnicos.find(u=>u.id===e.payload.id))return{...n,valoresUnicos:[...n.valoresUnicos,{id:e.payload.id,...e.payload.updates}]};const o=n.valoresUnicos.map(u=>u.id===e.payload.id?{...u,...e.payload.updates}:u);return{...n,valoresUnicos:o};case"UPDATE_LOGISTICA":if(!n.logistica.find(u=>u.id===e.payload.id))return{...n,logistica:[...n.logistica,{id:e.payload.id,...e.payload.updates}]};const l=n.logistica.map(u=>u.id===e.payload.id?{...u,...e.payload.updates}:u);return{...n,logistica:l};case"CARREGAR_ORCAMENTO":return{...e.payload,metadata:{...U_.metadata,...e.payload.metadata}};case"RESET_ORCAMENTO":return U_;default:return n}}const wB=n=>{const e=n.coordenacao.reduce((b,R)=>{const $=R.dias/30;return b+$*R.prolabore*R.quant},0),t=n.profissionais.reduce((b,R)=>{const $=R.dias/30;return b+$*R.prolabore*R.pessoas},0),r=n.valoresUnicos.reduce((b,R)=>b+R.valor*R.pessoas*R.dias,0),i=n.logistica.reduce((b,R)=>b+R.valor*R.qtd*R.dias,0),s=e+t+r+i,o=e+t,a=o*n.parametros.encargosPessoal,l=s+a,u=l*n.parametros.lucro,d=l*n.parametros.fundoGiro,p=l+u+d,v=p*n.parametros.imposto,g=l*n.parametros.despesasFiscais,P=l*n.parametros.comissaoCaptacao,S=p+v+g+P,C=S*(n.metadata.desconto/100),w=S-C;return{subtotalCoordenacao:e,subtotalProfissionais:t,subtotalValoresUnicos:r,subtotalLogistica:i,subtotalGeral:s,baseFolhaPagamento:o,custoTotal:l,subtotalComLucroFundo:p,encargosPessoal:a,lucro:u,fundoGiro:d,impostos:v,despesasFiscais:g,comissaoCaptacao:P,totalAntesDesconto:S,desconto:C,totalGeral:w}},IB=({children:n})=>{const[e,t]=On.useReducer(_B,U_),[r,i]=On.useState(!1),[s,o]=On.useState(null),[a,l]=On.useState([]),u=($,W,Q,k=null)=>{let E=[];switch($){case"metadata":E=B3({[W]:Q});break;case"parametros":E=q3({[W]:Q});break;case"coordenacao":const O=e.coordenacao.find(N=>N.id===k);if(O){const N={...O,[W]:Q};E=z3([N])}break;case"profissionais":const U=e.profissionais.find(N=>N.id===k);if(U){const N={...U,[W]:Q};E=$3([N])}break;case"valoresUnicos":const T=e.valoresUnicos.find(N=>N.id===k);if(T){const N={...T,[W]:Q};E=W3([N])}break;case"logistica":const x=e.logistica.find(N=>N.id===k);if(x){const N={...x,[W]:Q};E=G3([N])}break}return E},d=()=>{const $=vB(e);return l($.errors),$},p=()=>{l([])},v=$=>{var ve,Ie,Z,ue;const W=((ve=$.coordenacao)==null?void 0:ve.reduce((le,Te)=>le+(Te.valorTotal||0),0))||0,Q=((Ie=$.profissionais)==null?void 0:Ie.reduce((le,Te)=>le+(Te.valorTotal||0),0))||0,k=((Z=$.valoresUnicos)==null?void 0:Z.reduce((le,Te)=>le+(Te.valorTotal||0),0))||0,E=((ue=$.logistica)==null?void 0:ue.reduce((le,Te)=>le+(Te.valorTotal||0),0))||0,O=W+Q+k+E,U=$.custosIndiretos||0,T=$.margemLucro||.3,x=$.taxaAdministrativa||.1,N=O*T,X=O*x,ge=O+U+N+X;return{totalCoordenacao:W,totalProfissionais:Q,totalValoresUnicos:k,totalLogistica:E,totalServicos:O,custosIndiretos:U,margemLucroPercentual:T,margemLucro:N,taxaAdministrativaPercentual:x,taxaAdministrativa:X,valorTotal:ge,calculadoEm:new Date().toISOString(),versaoCalculo:"1.0"}},g=async($=e)=>{var Q,k,E,O,U;if(!d().valido)throw o("No  possvel salvar o oramento. Corrija os erros de validao primeiro."),new Error("Validao falhou");i(!0),o(null);try{const T=$.id||`orc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x=v($),N=JSON.parse(JSON.stringify({...$,id:T,resumo:x,coordenacao:((Q=$.coordenacao)==null?void 0:Q.map(ge=>({...ge})))||[],profissionais:((k=$.profissionais)==null?void 0:k.map(ge=>({...ge})))||[],valoresUnicos:((E=$.valoresUnicos)==null?void 0:E.map(ge=>({...ge})))||[],logistica:((O=$.logistica)==null?void 0:O.map(ge=>({...ge})))||[],metadata:{...$.metadata,criadoEm:((U=$.metadata)==null?void 0:U.criadoEm)||new Date().toISOString(),atualizadoEm:new Date().toISOString(),criadoPor:Bo==null?void 0:Bo.uid,versao:"2.0"}}));console.log(" Salvando oramento com ID nico:",T),console.log(" RESUMO includo:",x);const X=await ef.criarOrcamento(N);return console.log(" Oramento salvo com ID nico:",X),i(!1),X}catch(T){throw console.error(" Erro ao salvar oramento:",T),o(T.message),i(!1),T}},P=async $=>{var W,Q;i(!0),o(null),l([]);try{console.log(" INICIANDO carregamento do oramento ID:",$);const k=await ef.buscarOrcamento($);return console.log(" Dados recebidos do Firebase:",k),k?(console.log(" Dispatchando CARREGAR_ORCAMENTO..."),console.log(" Dados que sero dispatchados:",{metadata:k.metadata,coordenacao:(W=k.coordenacao)==null?void 0:W.length,profissionais:(Q=k.profissionais)==null?void 0:Q.length}),t({type:"CARREGAR_ORCAMENTO",payload:k}),console.log(" Dispatch completo. Estado atualizado.")):console.warn(" Oramento NULO recebido do Firebase"),i(!1),k}catch(k){throw console.error(" Erro ao carregar oramento:",k),o(k.message),i(!1),k}},S=async($,W)=>{i(!0),o(null);try{await ef.atualizarOrcamento($,W),i(!1)}catch(Q){throw o(Q.message),i(!1),Q}},C=async $=>{i(!0),o(null);try{await ef.excluirOrcamento($),i(!1)}catch(W){throw o(W.message),i(!1),W}},w=async()=>{i(!0),o(null);try{const W=(await ef.listarOrcamentos()).filter(Q=>{var k;return((k=Q.metadata)==null?void 0:k.criadoPor)===(Bo==null?void 0:Bo.uid)});return console.log(` ${W.length} oramentos do usurio ${Bo==null?void 0:Bo.email}`),console.log(" IDs nicos dos oramentos:",W.map(Q=>Q.id)),i(!1),W}catch($){throw o($.message),i(!1),$}},b=()=>o(null),R={orcamentoAtual:e,dispatch:t,carregando:r,erro:s,errosValidacao:a,totais:wB(e),salvarOrcamento:g,carregarOrcamento:P,listarOrcamentos:w,atualizarOrcamento:S,excluirOrcamento:C,validarCampo:u,validarOrcamentoAtual:d,limparErrosValidacao:p,limparErro:b};return j.jsx(H3.Provider,{value:R,children:n})},$l=()=>{const n=On.useContext(H3);if(!n)throw new Error("useOrcamento deve ser usado dentro de OrcamentoProvider");return n},K3=On.createContext(),M5=()=>{const n=On.useContext(K3);if(!n)throw new Error("useAuth deve ser usado dentro de AuthProvider");return n},bB=({children:n})=>{const[e,t]=On.useState(null),[r,i]=On.useState(!0);On.useEffect(()=>(console.log(" AuthContext: Monitorando autenticao..."),nU(E0,l=>{console.log(" AuthStateChanged:",l?`Logado: ${l.email}`:"Deslogado"),l?(console.log(" Usurio autenticado detectado"),t(l)):(console.log(" Nenhum usurio autenticado"),t(null)),i(!1)})),[]);const o={user:e,loading:r,logout:async()=>{try{await rU(E0),console.log(" Logout realizado com sucesso")}catch(a){throw console.error(" Erro ao fazer logout:",a),a}}};return j.jsx(K3.Provider,{value:o,children:n})},at=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),Xa=n=>n==null||isNaN(n)?"0,00%":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n*100)+"%",EB=({setMostrarGerenciador:n})=>{const{listarOrcamentos:e,carregarOrcamento:t,excluirOrcamento:r,carregando:i,erro:s}=$l(),[o,a]=On.useState([]),[l,u]=On.useState(""),d=async()=>{try{const w=(await e()).reduce((b,R)=>(b.find(W=>W.id===R.id)||b.push(R),b),[]);a(w)}catch(C){console.error("Erro ao carregar lista:",C)}};On.useEffect(()=>{d()},[]);const p=async C=>{try{await t(C),n(!1)}catch(w){console.error("Erro ao carregar oramento:",w)}},v=async(C,w)=>{if(confirm(`Tem certeza que deseja excluir o oramento "${w}"?`))try{await r(C),await d()}catch(b){console.error("Erro ao excluir oramento:",b)}},g=C=>{var ue;const w=le=>isNaN(le)||le===null||le===void 0?0:Number(le),b=(C.coordenacao||[]).reduce((le,Te)=>{const F=w(Te.dias)/30;return le+F*w(Te.subtotal)*w(Te.quant)},0),R=(C.profissionais||[]).reduce((le,Te)=>{const F=w(Te.dias)/30;return le+F*w(Te.prolabore)*w(Te.pessoas)},0),$=(C.valoresUnicos||[]).reduce((le,Te)=>le+w(Te.valor)*w(Te.pessoas)*w(Te.dias),0),W=(C.logistica||[]).reduce((le,Te)=>le+w(Te.valor)*w(Te.qtd)*w(Te.dias),0),Q=b+R+$+W,k=C.parametros||{},E=(b+R)*w(k.encargosPessoal),O=Q+E,U=O*w(k.lucro),T=O*w(k.fundoGiro),x=O+U+T,N=x*w(k.imposto),X=O*w(k.despesasFiscais),ge=O*w(k.comissaoCaptacao),ve=x+N+X+ge,Ie=w((ue=C==null?void 0:C.metadata)==null?void 0:ue.desconto)/100,Z=ve*Ie;return ve-Z},P=C=>{var w;return((w=C==null?void 0:C.totais)==null?void 0:w.totalGeral)!==void 0?C.totais.totalGeral:g(C)},S=On.useMemo(()=>{const C=(l||"").trim().toLowerCase();return C?o.filter(w=>{var $,W;const b=((($=w==null?void 0:w.metadata)==null?void 0:$.nome)||"").toLowerCase(),R=(((W=w==null?void 0:w.metadata)==null?void 0:W.cliente)||"").toLowerCase();return b.includes(C)||R.includes(C)}):o},[o,l]);return i?j.jsx("div",{className:"flex justify-center items-center p-8",children:j.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):j.jsxs("div",{className:"bg-white rounded-lg",children:[j.jsxs("div",{className:"flex justify-between items-center mb-6",children:[j.jsx("h2",{className:"text-2xl font-bold text-relevo-text font-heading",children:"Gerenciar Oramentos"}),j.jsxs("div",{className:"flex gap-2",children:[j.jsx("input",{placeholder:"Buscar por nome/cliente",value:l,onChange:C=>u(C.target.value),className:"border rounded px-3 py-2 text-sm",style:{minWidth:240}}),j.jsx("button",{onClick:d,className:"bg-relevo-green text-white px-4 py-2 rounded-lg hover:bg-relevo-green-light transition font-sans",children:"Atualizar Lista"})]})]}),s&&j.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),j.jsxs("div",{className:"overflow-x-auto",children:[j.jsxs("table",{className:"min-w-full bg-white",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-relevo-light-gray",children:[j.jsx("th",{className:"py-3 px-4 text-left",children:"Nome"}),j.jsx("th",{className:"py-3 px-4 text-left",children:"Cliente"}),j.jsx("th",{className:"py-3 px-4 text-left",children:"Data"}),j.jsx("th",{className:"py-3 px-4 text-right",children:"Valor Total"}),j.jsx("th",{className:"py-3 px-4 text-center",children:"Aes"})]})}),j.jsx("tbody",{children:S.map(C=>{var R,$,W,Q;const w=P(C),b=(R=C==null?void 0:C.metadata)!=null&&R.data?new Date(C.metadata.data+"T00:00:00").toLocaleDateString("pt-BR"):($=C==null?void 0:C.atualizadoEm)!=null&&$.toDate?C.atualizadoEm.toDate().toLocaleDateString("pt-BR"):C!=null&&C.atualizadoEm?new Date(C.atualizadoEm).toLocaleDateString("pt-BR"):"";return j.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[j.jsx("td",{className:"py-3 px-4",children:((W=C.metadata)==null?void 0:W.nome)||"Sem nome"}),j.jsx("td",{className:"py-3 px-4",children:((Q=C.metadata)==null?void 0:Q.cliente)||"No informado"}),j.jsx("td",{className:"py-3 px-4",children:b}),j.jsxs("td",{className:"py-3 px-4 text-right font-semibold",children:["R$ ",at(w)]}),j.jsx("td",{className:"py-3 px-4 text-center",children:j.jsxs("div",{className:"flex justify-center space-x-2",children:[j.jsx("button",{onClick:()=>p(C.id),className:"bg-relevo-blue text-white px-3 py-1 rounded hover:bg-relevo-blue/90 transition text-sm font-sans",children:"Carregar"}),j.jsx("button",{onClick:()=>{var k;return v(C.id,(k=C.metadata)==null?void 0:k.nome)},className:"bg-relevo-orange text-white px-3 py-1 rounded hover:bg-relevo-orange/90 transition text-sm font-sans",children:"Excluir"})]})})]},C.id)})})]}),S.length===0&&j.jsx("div",{className:"text-center py-8 text-relevo-text/60 font-sans",children:"Nenhum oramento encontrado para o filtro aplicado."})]})]})},AB="modulepreload",TB=function(n){return"/orcamento/"+n},DA={},B_=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=TB(s),s in DA)return;DA[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const p=i[d];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":AB,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,p)=>{u.addEventListener("load",d),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Yt(n){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(n)}var Ur=Uint8Array,$i=Uint16Array,V5=Int32Array,F1=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M1=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),q_=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Q3=function(n,e){for(var t=new $i(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new V5(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},J3=Q3(F1,2),Y3=J3.b,z_=J3.r;Y3[28]=258,z_[258]=28;var X3=Q3(M1,0),SB=X3.b,OA=X3.r,$_=new $i(32768);for(var yn=0;yn<32768;++yn){var Ka=(yn&43690)>>1|(yn&21845)<<1;Ka=(Ka&52428)>>2|(Ka&13107)<<2,Ka=(Ka&61680)>>4|(Ka&3855)<<4,$_[yn]=((Ka&65280)>>8|(Ka&255)<<8)>>1}var go=function(n,e,t){for(var r=n.length,i=0,s=new $i(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new $i(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new $i(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],p=o[n[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[$_[p]>>l]=u}else for(a=new $i(r),i=0;i<r;++i)n[i]&&(a[i]=$_[o[n[i]-1]++]>>15-n[i]);return a},Dl=new Ur(288);for(var yn=0;yn<144;++yn)Dl[yn]=8;for(var yn=144;yn<256;++yn)Dl[yn]=9;for(var yn=256;yn<280;++yn)Dl[yn]=7;for(var yn=280;yn<288;++yn)Dl[yn]=8;var Ep=new Ur(32);for(var yn=0;yn<32;++yn)Ep[yn]=5;var xB=go(Dl,9,0),PB=go(Dl,9,1),NB=go(Ep,5,0),kB=go(Ep,5,1),Kv=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ds=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Qv=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},j5=function(n){return(n+7)/8|0},Z3=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Ur(n.subarray(e,t))},RB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ms=function(n,e,t){var r=new Error(e||RB[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Ms),!t)throw r;return r},CB=function(n,e,t,r){var i=n.length,s=r?r.length:0;if(!i||e.f&&!e.l)return t||new Ur(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Ur(i*3));var u=function(De){var ze=t.length;if(De>ze){var Ue=new Ur(Math.max(ze*2,De));Ue.set(t),t=Ue}},d=e.f||0,p=e.p||0,v=e.b||0,g=e.l,P=e.d,S=e.m,C=e.n,w=i*8;do{if(!g){d=Ds(n,p,1);var b=Ds(n,p+1,3);if(p+=3,b)if(b==1)g=PB,P=kB,S=9,C=5;else if(b==2){var Q=Ds(n,p,31)+257,k=Ds(n,p+10,15)+4,E=Q+Ds(n,p+5,31)+1;p+=14;for(var O=new Ur(E),U=new Ur(19),T=0;T<k;++T)U[q_[T]]=Ds(n,p+T*3,7);p+=k*3;for(var x=Kv(U),N=(1<<x)-1,X=go(U,x,1),T=0;T<E;){var ge=X[Ds(n,p,N)];p+=ge&15;var R=ge>>4;if(R<16)O[T++]=R;else{var ve=0,Ie=0;for(R==16?(Ie=3+Ds(n,p,3),p+=2,ve=O[T-1]):R==17?(Ie=3+Ds(n,p,7),p+=3):R==18&&(Ie=11+Ds(n,p,127),p+=7);Ie--;)O[T++]=ve}}var Z=O.subarray(0,Q),ue=O.subarray(Q);S=Kv(Z),C=Kv(ue),g=go(Z,S,1),P=go(ue,C,1)}else Ms(1);else{var R=j5(p)+4,$=n[R-4]|n[R-3]<<8,W=R+$;if(W>i){l&&Ms(0);break}a&&u(v+$),t.set(n.subarray(R,W),v),e.b=v+=$,e.p=p=W*8,e.f=d;continue}if(p>w){l&&Ms(0);break}}a&&u(v+131072);for(var le=(1<<S)-1,Te=(1<<C)-1,F=p;;F=p){var ve=g[Qv(n,p)&le],G=ve>>4;if(p+=ve&15,p>w){l&&Ms(0);break}if(ve||Ms(2),G<256)t[v++]=G;else if(G==256){F=p,g=null;break}else{var J=G-254;if(G>264){var T=G-257,ee=F1[T];J=Ds(n,p,(1<<ee)-1)+Y3[T],p+=ee}var se=P[Qv(n,p)&Te],he=se>>4;se||Ms(3),p+=se&15;var ue=SB[he];if(he>3){var ee=M1[he];ue+=Qv(n,p)&(1<<ee)-1,p+=ee}if(p>w){l&&Ms(0);break}a&&u(v+131072);var ye=v+J;if(v<ue){var _e=s-ue,Me=Math.min(ue,ye);for(_e+v<0&&Ms(3);v<Me;++v)t[v]=r[_e+v]}for(;v<ye;++v)t[v]=t[v-ue]}}e.l=g,e.p=F,e.b=v,e.f=d,g&&(d=1,e.m=S,e.d=P,e.n=C)}while(!d);return v!=t.length&&o?Z3(t,0,v):t.subarray(0,v)},qo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},tf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Jv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:tk,l:0};if(i==1){var o=new Ur(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(W,Q){return W.f-Q.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,d=1,p=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=t[t[u].f<t[p].f?u++:p++],l=t[u!=d&&t[u].f<t[p].f?u++:p++],t[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new $i(v+1),P=W_(t[d-1],g,0);if(P>e){var r=0,S=0,C=P-e,w=1<<C;for(s.sort(function(Q,k){return g[k.s]-g[Q.s]||Q.f-k.f});r<i;++r){var b=s[r].s;if(g[b]>e)S+=w-(1<<P-g[b]),g[b]=e;else break}for(S>>=C;S>0;){var R=s[r].s;g[R]<e?S-=1<<e-g[R]++-1:++r}for(;r>=0&&S;--r){var $=s[r].s;g[$]==e&&(--g[$],++S)}P=e}return{t:new Ur(g),l:P}},W_=function(n,e,t){return n.s==-1?Math.max(W_(n.l,e,t+1),W_(n.r,e,t+1)):e[n.s]=t},FA=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new $i(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},nf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},ek=function(n,e,t){var r=t.length,i=j5(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},MA=function(n,e,t,r,i,s,o,a,l,u,d){qo(e,d++,t),++i[256];for(var p=Jv(i,15),v=p.t,g=p.l,P=Jv(s,15),S=P.t,C=P.l,w=FA(v),b=w.c,R=w.n,$=FA(S),W=$.c,Q=$.n,k=new $i(19),E=0;E<b.length;++E)++k[b[E]&31];for(var E=0;E<W.length;++E)++k[W[E]&31];for(var O=Jv(k,7),U=O.t,T=O.l,x=19;x>4&&!U[q_[x-1]];--x);var N=u+5<<3,X=nf(i,Dl)+nf(s,Ep)+o,ge=nf(i,v)+nf(s,S)+o+14+3*x+nf(k,U)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&N<=X&&N<=ge)return ek(e,d,n.subarray(l,l+u));var ve,Ie,Z,ue;if(qo(e,d,1+(ge<X)),d+=2,ge<X){ve=go(v,g,0),Ie=v,Z=go(S,C,0),ue=S;var le=go(U,T,0);qo(e,d,R-257),qo(e,d+5,Q-1),qo(e,d+10,x-4),d+=14;for(var E=0;E<x;++E)qo(e,d+3*E,U[q_[E]]);d+=3*x;for(var Te=[b,W],F=0;F<2;++F)for(var G=Te[F],E=0;E<G.length;++E){var J=G[E]&31;qo(e,d,le[J]),d+=U[J],J>15&&(qo(e,d,G[E]>>5&127),d+=G[E]>>12)}}else ve=xB,Ie=Dl,Z=NB,ue=Ep;for(var E=0;E<a;++E){var ee=r[E];if(ee>255){var J=ee>>18&31;tf(e,d,ve[J+257]),d+=Ie[J+257],J>7&&(qo(e,d,ee>>23&31),d+=F1[J]);var se=ee&31;tf(e,d,Z[se]),d+=ue[se],se>3&&(tf(e,d,ee>>5&8191),d+=M1[se])}else tf(e,d,ve[ee]),d+=Ie[ee]}return tf(e,d,ve[256]),d+Ie[256]},LB=new V5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tk=new Ur(0),DB=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Ur(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=LB[e-1],v=p>>13,g=p&8191,P=(1<<t)-1,S=s.p||new $i(32768),C=s.h||new $i(P+1),w=Math.ceil(t/3),b=2*w,R=function(lt){return(n[lt]^n[lt+1]<<w^n[lt+2]<<b)&P},$=new V5(25e3),W=new $i(288),Q=new $i(32),k=0,E=0,O=s.i||0,U=0,T=s.w||0,x=0;O+2<o;++O){var N=R(O),X=O&32767,ge=C[N];if(S[X]=ge,C[N]=X,T<=O){var ve=o-O;if((k>7e3||U>24576)&&(ve>423||!u)){d=MA(n,l,0,$,W,Q,E,U,x,O-x,d),U=k=E=0,x=O;for(var Ie=0;Ie<286;++Ie)W[Ie]=0;for(var Ie=0;Ie<30;++Ie)Q[Ie]=0}var Z=2,ue=0,le=g,Te=X-ge&32767;if(ve>2&&N==R(O-Te))for(var F=Math.min(v,ve)-1,G=Math.min(32767,O),J=Math.min(258,ve);Te<=G&&--le&&X!=ge;){if(n[O+Z]==n[O+Z-Te]){for(var ee=0;ee<J&&n[O+ee]==n[O+ee-Te];++ee);if(ee>Z){if(Z=ee,ue=Te,ee>F)break;for(var se=Math.min(Te,ee-2),he=0,Ie=0;Ie<se;++Ie){var ye=O-Te+Ie&32767,_e=S[ye],Me=ye-_e&32767;Me>he&&(he=Me,ge=ye)}}}X=ge,ge=S[X],Te+=X-ge&32767}if(ue){$[U++]=268435456|z_[Z]<<18|OA[ue];var De=z_[Z]&31,ze=OA[ue]&31;E+=F1[De]+M1[ze],++W[257+De],++Q[ze],T=O+Z,++k}else $[U++]=n[O],++W[n[O]]}}for(O=Math.max(O,T);O<o;++O)$[U++]=n[O],++W[n[O]];d=MA(n,l,u,$,W,Q,E,U,x,O-x,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=C,s.p=S,s.i=O,s.w=T)}else{for(var O=s.w||0;O<o+u;O+=65535){var Ue=O+65535;Ue>=o&&(l[d/8|0]=u,Ue=o),d=ek(l,d+1,n.subarray(O,Ue))}s.i=o}return Z3(a,0,r+j5(d)+i)},nk=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},OB=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ur(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return DB(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},rk=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},FB=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=nk();i.p(e.dictionary),rk(n,2,i.d())}},MB=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ms(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ms(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function G_(n,e){e||(e={});var t=nk();t.p(n);var r=OB(n,e,e.dictionary?6:2,4);return FB(r,e),rk(r,r.length-4,t.d()),r}function VB(n,e){return CB(n.subarray(MB(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var jB=typeof TextDecoder<"u"&&new TextDecoder,UB=0;try{jB.decode(tk,{stream:!0}),UB=1}catch{}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Yv(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var an={log:Yv,warn:function(n){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):Yv.call(null,arguments))},error:function(n){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):Yv(n))}};function Xv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){gu(r.response,e,t)},r.onerror=function(){an.error("could not download file")},r.send()}function VA(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Km(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ff,H_,gu=pt.saveAs||((typeof window>"u"?"undefined":Yt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=pt.URL||pt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?VA(i.href)?Xv(n,e,t):Km(i,i.target="_blank"):Km(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Km(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(VA(n))Xv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Km(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Yt(s)!=="object"&&(an.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Xv(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(pt.HTMLElement)||pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Yt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(n)}else{var l=pt.URL||pt.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ik(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Zv(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Or(t,r,i,s,e[0],7,-680876936),s=Or(s,t,r,i,e[1],12,-389564586),i=Or(i,s,t,r,e[2],17,606105819),r=Or(r,i,s,t,e[3],22,-1044525330),t=Or(t,r,i,s,e[4],7,-176418897),s=Or(s,t,r,i,e[5],12,1200080426),i=Or(i,s,t,r,e[6],17,-1473231341),r=Or(r,i,s,t,e[7],22,-45705983),t=Or(t,r,i,s,e[8],7,1770035416),s=Or(s,t,r,i,e[9],12,-1958414417),i=Or(i,s,t,r,e[10],17,-42063),r=Or(r,i,s,t,e[11],22,-1990404162),t=Or(t,r,i,s,e[12],7,1804603682),s=Or(s,t,r,i,e[13],12,-40341101),i=Or(i,s,t,r,e[14],17,-1502002290),t=Fr(t,r=Or(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Fr(s,t,r,i,e[6],9,-1069501632),i=Fr(i,s,t,r,e[11],14,643717713),r=Fr(r,i,s,t,e[0],20,-373897302),t=Fr(t,r,i,s,e[5],5,-701558691),s=Fr(s,t,r,i,e[10],9,38016083),i=Fr(i,s,t,r,e[15],14,-660478335),r=Fr(r,i,s,t,e[4],20,-405537848),t=Fr(t,r,i,s,e[9],5,568446438),s=Fr(s,t,r,i,e[14],9,-1019803690),i=Fr(i,s,t,r,e[3],14,-187363961),r=Fr(r,i,s,t,e[8],20,1163531501),t=Fr(t,r,i,s,e[13],5,-1444681467),s=Fr(s,t,r,i,e[2],9,-51403784),i=Fr(i,s,t,r,e[7],14,1735328473),t=Mr(t,r=Fr(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Mr(s,t,r,i,e[8],11,-2022574463),i=Mr(i,s,t,r,e[11],16,1839030562),r=Mr(r,i,s,t,e[14],23,-35309556),t=Mr(t,r,i,s,e[1],4,-1530992060),s=Mr(s,t,r,i,e[4],11,1272893353),i=Mr(i,s,t,r,e[7],16,-155497632),r=Mr(r,i,s,t,e[10],23,-1094730640),t=Mr(t,r,i,s,e[13],4,681279174),s=Mr(s,t,r,i,e[0],11,-358537222),i=Mr(i,s,t,r,e[3],16,-722521979),r=Mr(r,i,s,t,e[6],23,76029189),t=Mr(t,r,i,s,e[9],4,-640364487),s=Mr(s,t,r,i,e[12],11,-421815835),i=Mr(i,s,t,r,e[15],16,530742520),t=Vr(t,r=Mr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Vr(s,t,r,i,e[7],10,1126891415),i=Vr(i,s,t,r,e[14],15,-1416354905),r=Vr(r,i,s,t,e[5],21,-57434055),t=Vr(t,r,i,s,e[12],6,1700485571),s=Vr(s,t,r,i,e[3],10,-1894986606),i=Vr(i,s,t,r,e[10],15,-1051523),r=Vr(r,i,s,t,e[1],21,-2054922799),t=Vr(t,r,i,s,e[8],6,1873313359),s=Vr(s,t,r,i,e[15],10,-30611744),i=Vr(i,s,t,r,e[6],15,-1560198380),r=Vr(r,i,s,t,e[13],21,1309151649),t=Vr(t,r,i,s,e[4],6,-145523070),s=Vr(s,t,r,i,e[11],10,-1120210379),i=Vr(i,s,t,r,e[2],15,718787259),r=Vr(r,i,s,t,e[9],21,-343485551),n[0]=hl(t,n[0]),n[1]=hl(r,n[1]),n[2]=hl(i,n[2]),n[3]=hl(s,n[3])}function V1(n,e,t,r,i,s){return e=hl(hl(e,n),hl(r,s)),hl(e<<i|e>>>32-i,t)}function Or(n,e,t,r,i,s,o){return V1(e&t|~e&r,n,e,i,s,o)}function Fr(n,e,t,r,i,s,o){return V1(e&r|t&~r,n,e,i,s,o)}function Mr(n,e,t,r,i,s,o){return V1(e^t^r,n,e,i,s,o)}function Vr(n,e,t,r,i,s,o){return V1(t^(e|~r),n,e,i,s,o)}function sk(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Zv(r,BB(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Zv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Zv(r,i),r}function BB(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Ff=pt.atob.bind(pt),H_=pt.btoa.bind(pt);var jA="0123456789abcdef".split("");function qB(n){for(var e="",t=0;t<4;t++)e+=jA[n>>8*t+4&15]+jA[n>>8*t&15];return e}function zB(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function K_(n){return sk(n).map(zB).join("")}var $B=function(n){for(var e=0;e<n.length;e++)n[e]=qB(n[e]);return n.join("")}(sk("hello"))!="5d41402abc4b2a76b9719d911017c592";function hl(n,e){if($B){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Q_(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var d=a[l];u=(u+d+o.charCodeAt(l))%256,a[l]=a[u],a[u]=d}t=n,r=a}else a=r;var p=e.length,v=0,g=0,P="";for(l=0;l<p;l++)g=(g+(d=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=d,o=a[(a[v]+a[g])%256],P+=String.fromCharCode(e.charCodeAt(l)^o);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var UA={print:4,modify:8,copy:16,"annot-forms":32};function Zc(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(UA.perm!==void 0)throw new Error("Invalid permission: "+a);i+=UA[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=K_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Q_(this.encryptionKey,this.padding)}function eh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function BA(n){if(Yt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){pt.console&&an.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function N0(n){if(!(this instanceof N0))return new N0(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function ok(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function bu(n,e,t,r,i){if(!(this instanceof bu))return new bu(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,ok.call(this,r,i)}function mh(n,e,t,r,i){if(!(this instanceof mh))return new mh(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,ok.call(this,r,i)}function ft(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",d=null;Yt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=BA;var P="1.3",S=g.__private__.getPdfVersion=function(){return P};g.__private__.setPdfVersion=function(m){P=m};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var w=g.__private__.getPageFormat=function(m){return C[m]};i=i||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},R=b.COMPAT;function $(){this.saveGraphicsState(),Y(new ut(Ke,0,0,-Ke,0,Ns()*Ke).toString()+" cm"),this.setFontSize(this.getFontSize()/Ke),u="n",R=b.ADVANCED}function W(){this.restoreGraphicsState(),u="S",R=b.COMPAT}var Q=g.__private__.combineFontStyleAndFontWeight=function(m,L){if(m=="bold"&&L=="normal"||m=="bold"&&L==400||m=="normal"&&L=="italic"||m=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(m=L==400||L==="normal"?m==="italic"?"italic":"normal":L!=700&&L!=="bold"||m!=="normal"?(L==700?"bold":L)+""+m:"bold"),m};g.advancedAPI=function(m){var L=R===b.COMPAT;return L&&$.call(this),typeof m!="function"||(m(this),L&&W.call(this)),this},g.compatAPI=function(m){var L=R===b.ADVANCED;return L&&W.call(this),typeof m!="function"||(m(this),L&&$.call(this)),this},g.isAdvancedAPI=function(){return R===b.ADVANCED};var k,E=function(m){if(R!==b.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=g.roundToPrecision=g.__private__.roundToPrecision=function(m,L){var K=e||L;if(isNaN(m)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(K).replace(/0+$/,"")};k=g.hpf=g.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,16)};var U=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return O(m,2)},T=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return O(m,3)},x=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return R===b.COMPAT?m*Ke:R===b.ADVANCED?m:void 0},N=function(m){return R===b.COMPAT?Ns()-m:R===b.ADVANCED?m:void 0},X=function(m){return x(N(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var ge,ve="00000000000000000000000000000000",Ie=g.__private__.getFileId=function(){return ve},Z=g.__private__.setFileId=function(m){return ve=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Rn=new Zc(d.userPermissions,d.userPassword,d.ownerPassword,ve)),ve};g.setFileId=function(m){return Z(m),this},g.getFileId=function(){return Ie()};var ue=g.__private__.convertDateToPDFDate=function(m){var L=m.getTimezoneOffset(),K=L<0?"+":"-",te=Math.floor(Math.abs(L/60)),ce=Math.abs(L%60),we=[K,J(te),"'",J(ce),"'"].join("");return["D:",m.getFullYear(),J(m.getMonth()+1),J(m.getDate()),J(m.getHours()),J(m.getMinutes()),J(m.getSeconds()),we].join("")},le=g.__private__.convertPDFDateToDate=function(m){var L=parseInt(m.substr(2,4),10),K=parseInt(m.substr(6,2),10)-1,te=parseInt(m.substr(8,2),10),ce=parseInt(m.substr(10,2),10),we=parseInt(m.substr(12,2),10),ke=parseInt(m.substr(14,2),10);return new Date(L,K,te,ce,we,ke,0)},Te=g.__private__.setCreationDate=function(m){var L;if(m===void 0&&(m=new Date),m instanceof Date)L=ue(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=m}return ge=L},F=g.__private__.getCreationDate=function(m){var L=ge;return m==="jsDate"&&(L=le(ge)),L};g.setCreationDate=function(m){return Te(m),this},g.getCreationDate=function(m){return F(m)};var G,J=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},ee=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},se=0,he=[],ye=[],_e=0,Me=[],De=[],ze=!1,Ue=ye,lt=function(){se=0,_e=0,ye=[],he=[],Me=[],bs=kn(),ki=kn()};g.__private__.setCustomOutputDestination=function(m){ze=!0,Ue=m};var Ae=function(m){ze||(Ue=m)};g.__private__.resetCustomOutputDestination=function(){ze=!1,Ue=ye};var Y=g.__private__.out=function(m){return m=m.toString(),_e+=m.length+1,Ue.push(m),Ue},yt=g.__private__.write=function(m){return Y(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},tt=g.__private__.getArrayBuffer=function(m){for(var L=m.length,K=new ArrayBuffer(L),te=new Uint8Array(K);L--;)te[L]=m.charCodeAt(L);return K},Oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Oe};var je=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return je=R===b.ADVANCED?m/Ke:m,this};var Ge,$e=g.__private__.getFontSize=g.getFontSize=function(){return R===b.COMPAT?je:je*Ke},ot=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return ot=m,this},g.__private__.getR2L=g.getR2L=function(){return ot};var mt,bt=g.__private__.setZoomMode=function(m){var L=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Ge=m;else if(isNaN(m)){if(L.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Ge=m}else Ge=parseInt(m,10)};g.__private__.getZoomMode=function(){return Ge};var St,dt=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');mt=m};g.__private__.getPageMode=function(){return mt};var Et=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');St=m};g.__private__.getLayoutMode=function(){return St},g.__private__.setDisplayMode=g.setDisplayMode=function(m,L,K){return bt(m),Et(L),dt(K),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(ct).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[m]},g.__private__.getDocumentProperties=function(){return ct},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var L in ct)ct.hasOwnProperty(L)&&m[L]&&(ct[L]=m[L]);return this},g.__private__.setDocumentProperty=function(m,L){if(Object.keys(ct).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[m]=L};var Nt,Ke,lr,Rt,si,$t={},Zt={},Xi=[],Bt={},Is={},fn={},oi={},zr=null,ln=0,gt=[],Ct=new BA(g),Hs=n.hotfixes||[],Nn={},xi={},Nr=[],ut=function m(L,K,te,ce,we,ke){if(!(this instanceof m))return new m(L,K,te,ce,we,ke);isNaN(L)&&(L=1),isNaN(K)&&(K=0),isNaN(te)&&(te=0),isNaN(ce)&&(ce=1),isNaN(we)&&(we=0),isNaN(ke)&&(ke=0),this._matrix=[L,K,te,ce,we,ke]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(m)},ut.prototype.multiply=function(m){var L=m.sx*this.sx+m.shy*this.shx,K=m.sx*this.shy+m.shy*this.sy,te=m.shx*this.sx+m.sy*this.shx,ce=m.shx*this.shy+m.sy*this.sy,we=m.tx*this.sx+m.ty*this.shx+this.tx,ke=m.tx*this.shy+m.ty*this.sy+this.ty;return new ut(L,K,te,ce,we,ke)},ut.prototype.decompose=function(){var m=this.sx,L=this.shy,K=this.shx,te=this.sy,ce=this.tx,we=this.ty,ke=Math.sqrt(m*m+L*L),Qe=(m/=ke)*K+(L/=ke)*te;K-=m*Qe,te-=L*Qe;var nt=Math.sqrt(K*K+te*te);return Qe/=nt,m*(te/=nt)<L*(K/=nt)&&(m=-m,L=-L,Qe=-Qe,ke=-ke),{scale:new ut(ke,0,0,nt,0,0),translate:new ut(1,0,0,1,ce,we),rotate:new ut(m,L,-L,m,0,0),skew:new ut(1,0,Qe,1,0,0)}},ut.prototype.toString=function(m){return this.join(" ")},ut.prototype.inversed=function(){var m=this.sx,L=this.shy,K=this.shx,te=this.sy,ce=this.tx,we=this.ty,ke=1/(m*te-L*K),Qe=te*ke,nt=-L*ke,h=-K*ke,_=m*ke;return new ut(Qe,nt,h,_,-Qe*ce-h*we,-nt*ce-_*we)},ut.prototype.applyToPoint=function(m){var L=m.x*this.sx+m.y*this.shx+this.tx,K=m.x*this.shy+m.y*this.sy+this.ty;return new ns(L,K)},ut.prototype.applyToRectangle=function(m){var L=this.applyToPoint(m),K=this.applyToPoint(new ns(m.x+m.w,m.y+m.h));return new Pa(L.x,L.y,K.x-L.x,K.y-L.y)},ut.prototype.clone=function(){var m=this.sx,L=this.shy,K=this.shx,te=this.sy,ce=this.tx,we=this.ty;return new ut(m,L,K,te,ce,we)},g.Matrix=ut;var rn=g.matrixMult=function(m,L){return L.multiply(m)},Pi=new ut(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Pi;var Jn=function(m,L){if(!Is[m]){var K=(L instanceof bu?"Sh":"P")+(Object.keys(Bt).length+1).toString(10);L.id=K,Is[m]=K,Bt[K]=L,Ct.publish("addPattern",L)}};g.ShadingPattern=bu,g.TilingPattern=mh,g.addShadingPattern=function(m,L){return E("addShadingPattern()"),Jn(m,L),this},g.beginTilingPattern=function(m){E("beginTilingPattern()"),ka(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,L){E("endTilingPattern()"),L.stream=De[G].join(`
`),Jn(m,L),Ct.publish("endTilingPattern",L),Nr.pop().restore()};var pn=g.__private__.newObject=function(){var m=kn();return $r(m,!0),m},kn=g.__private__.newObjectDeferred=function(){return se++,he[se]=function(){return _e},se},$r=function(m,L){return L=typeof L=="boolean"&&L,he[m]=_e,L&&Y(m+" 0 obj"),m},Ni=g.__private__.newAdditionalObject=function(){var m={objId:kn(),content:""};return Me.push(m),m},bs=kn(),ki=kn(),kr=g.__private__.decodeColorString=function(m){var L=m.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length===5&&(L[4]==="k"||L[4]==="K")&&(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var K=parseFloat(L[0]);L=[K,K,K,"r"]}for(var te="#",ce=0;ce<3;ce++)te+=("0"+Math.floor(255*parseFloat(L[ce])).toString(16)).slice(-2);return te},ai=g.__private__.encodeColorString=function(m){var L;typeof m=="string"&&(m={ch1:m});var K=m.ch1,te=m.ch2,ce=m.ch3,we=m.ch4,ke=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var Qe=new ik(K);if(Qe.ok)K=Qe.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var nt=parseInt(K.substr(1),16);K=nt>>16&255,te=nt>>8&255,ce=255&nt}if(te===void 0||we===void 0&&K===te&&te===ce)if(typeof K=="string")L=K+" "+ke[0];else switch(m.precision){case 2:L=U(K/255)+" "+ke[0];break;case 3:default:L=T(K/255)+" "+ke[0]}else if(we===void 0||Yt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return L=["1.","1.","1.",ke[1]].join(" ");if(typeof K=="string")L=[K,te,ce,ke[1]].join(" ");else switch(m.precision){case 2:L=[U(K/255),U(te/255),U(ce/255),ke[1]].join(" ");break;default:case 3:L=[T(K/255),T(te/255),T(ce/255),ke[1]].join(" ")}}else if(typeof K=="string")L=[K,te,ce,we,ke[2]].join(" ");else switch(m.precision){case 2:L=[U(K),U(te),U(ce),U(we),ke[2]].join(" ");break;case 3:default:L=[T(K),T(te),T(ce),T(we),ke[2]].join(" ")}return L},li=g.__private__.getFilters=function(){return o},yr=g.__private__.putStream=function(m){var L=(m=m||{}).data||"",K=m.filters||li(),te=m.alreadyAppliedFilters||[],ce=m.addLength1||!1,we=L.length,ke=m.objectId,Qe=function(Le){return Le};if(d!==null&&ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Qe=Rn.encryptor(ke,0));var nt={};K===!0&&(K=["FlateEncode"]);var h=m.additionalKeyValues||[],_=(nt=ft.API.processDataByFilters!==void 0?ft.API.processDataByFilters(L,K):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(nt.data.length!==0&&(h.push({key:"Length",value:nt.data.length}),ce===!0&&h.push({key:"Length1",value:we})),_.length!=0)if(_.split("/").length-1==1)h.push({key:"Filter",value:_});else{h.push({key:"Filter",value:"["+_+"]"});for(var A=0;A<h.length;A+=1)if(h[A].key==="DecodeParms"){for(var B=[],ie=0;ie<nt.reverseChain.split("/").length-1;ie+=1)B.push("null");B.push(h[A].value),h[A].value="["+B.join(" ")+"]"}}Y("<<");for(var de=0;de<h.length;de++)Y("/"+h[de].key+" "+h[de].value);Y(">>"),nt.data.length!==0&&(Y("stream"),Y(Qe(nt.data)),Y("endstream"))},nr=g.__private__.putPage=function(m){var L=m.number,K=m.data,te=m.objId,ce=m.contentsObjId;$r(te,!0),Y("<</Type /Page"),Y("/Parent "+m.rootDictionaryObjId+" 0 R"),Y("/Resources "+m.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(k(m.mediaBox.bottomLeftX))+" "+parseFloat(k(m.mediaBox.bottomLeftY))+" "+k(m.mediaBox.topRightX)+" "+k(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&Y("/CropBox ["+k(m.cropBox.bottomLeftX)+" "+k(m.cropBox.bottomLeftY)+" "+k(m.cropBox.topRightX)+" "+k(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&Y("/BleedBox ["+k(m.bleedBox.bottomLeftX)+" "+k(m.bleedBox.bottomLeftY)+" "+k(m.bleedBox.topRightX)+" "+k(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&Y("/TrimBox ["+k(m.trimBox.bottomLeftX)+" "+k(m.trimBox.bottomLeftY)+" "+k(m.trimBox.topRightX)+" "+k(m.trimBox.topRightY)+"]"),m.artBox!==null&&Y("/ArtBox ["+k(m.artBox.bottomLeftX)+" "+k(m.artBox.bottomLeftY)+" "+k(m.artBox.topRightX)+" "+k(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&Y("/UserUnit "+m.userUnit),Ct.publish("putPage",{objId:te,pageContext:gt[L],pageNumber:L,page:K}),Y("/Contents "+ce+" 0 R"),Y(">>"),Y("endobj");var we=K.join(`
`);return R===b.ADVANCED&&(we+=`
Q`),$r(ce,!0),yr({data:we,filters:li(),objectId:ce}),Y("endobj"),te},Ks=g.__private__.putPages=function(){var m,L,K=[];for(m=1;m<=ln;m++)gt[m].objId=kn(),gt[m].contentsObjId=kn();for(m=1;m<=ln;m++)K.push(nr({number:m,data:De[m],objId:gt[m].objId,contentsObjId:gt[m].contentsObjId,mediaBox:gt[m].mediaBox,cropBox:gt[m].cropBox,bleedBox:gt[m].bleedBox,trimBox:gt[m].trimBox,artBox:gt[m].artBox,userUnit:gt[m].userUnit,rootDictionaryObjId:bs,resourceDictionaryObjId:ki}));$r(bs,!0),Y("<</Type /Pages");var te="/Kids [";for(L=0;L<ln;L++)te+=K[L]+" 0 R ";Y(te+"]"),Y("/Count "+ln),Y(">>"),Y("endobj"),Ct.publish("postPutPages")},Ao=function(m){Ct.publish("putFont",{font:m,out:Y,newObject:pn,putStream:yr}),m.isAlreadyPutted!==!0&&(m.objectNumber=pn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+eh(m.postScriptName)),Y("/Subtype /Type1"),typeof m.encoding=="string"&&Y("/Encoding /"+m.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Qs=function(){for(var m in $t)$t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&Ao($t[m])},Js=function(m){m.objectNumber=pn();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[k(m.x),k(m.y),k(m.x+m.width),k(m.y+m.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var K=m.pages[1].join(`
`);yr({data:K,additionalKeyValues:L,objectId:m.objectNumber}),Y("endobj")},To=function(){for(var m in Nn)Nn.hasOwnProperty(m)&&Js(Nn[m])},Wl=function(m,L){var K,te=[],ce=1/(L-1);for(K=0;K<1;K+=ce)te.push(K);if(te.push(1),m[0].offset!=0){var we={offset:0,color:m[0].color};m.unshift(we)}if(m[m.length-1].offset!=1){var ke={offset:1,color:m[m.length-1].color};m.push(ke)}for(var Qe="",nt=0,h=0;h<te.length;h++){for(K=te[h];K>m[nt+1].offset;)nt++;var _=m[nt].offset,A=(K-_)/(m[nt+1].offset-_),B=m[nt].color,ie=m[nt+1].color;Qe+=ee(Math.round((1-A)*B[0]+A*ie[0]).toString(16))+ee(Math.round((1-A)*B[1]+A*ie[1]).toString(16))+ee(Math.round((1-A)*B[2]+A*ie[2]).toString(16))}return Qe.trim()},Id=function(m,L){L||(L=21);var K=pn(),te=Wl(m.colors,L),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+L+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr({data:te,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),Y("endobj"),m.objectNumber=pn(),Y("<< /ShadingType "+m.type),Y("/ColorSpace /DeviceRGB");var we="/Coords ["+k(parseFloat(m.coords[0]))+" "+k(parseFloat(m.coords[1]))+" ";m.type===2?we+=k(parseFloat(m.coords[2]))+" "+k(parseFloat(m.coords[3])):we+=k(parseFloat(m.coords[2]))+" "+k(parseFloat(m.coords[3]))+" "+k(parseFloat(m.coords[4]))+" "+k(parseFloat(m.coords[5])),Y(we+="]"),m.matrix&&Y("/Matrix ["+m.matrix.toString()+"]"),Y("/Function "+K+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},va=function(m,L){var K=kn(),te=pn();L.push({resourcesOid:K,objectOid:te}),m.objectNumber=te;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+m.boundingBox.map(k).join(" ")+"]"}),ce.push({key:"XStep",value:k(m.xStep)}),ce.push({key:"YStep",value:k(m.yStep)}),ce.push({key:"Resources",value:K+" 0 R"}),m.matrix&&ce.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),yr({data:m.stream,additionalKeyValues:ce,objectId:m.objectNumber}),Y("endobj")},So=function(m){var L;for(L in Bt)Bt.hasOwnProperty(L)&&(Bt[L]instanceof bu?Id(Bt[L]):Bt[L]instanceof mh&&va(Bt[L],m))},ya=function(m){for(var L in m.objectNumber=pn(),Y("<<"),m)switch(L){case"opacity":Y("/ca "+U(m[L]));break;case"stroke-opacity":Y("/CA "+U(m[L]))}Y(">>"),Y("endobj")},xo=function(){var m;for(m in fn)fn.hasOwnProperty(m)&&ya(fn[m])},Ri=function(){for(var m in Y("/XObject <<"),Nn)Nn.hasOwnProperty(m)&&Nn[m].objectNumber>=0&&Y("/"+m+" "+Nn[m].objectNumber+" 0 R");Ct.publish("putXobjectDict"),Y(">>")},Gl=function(){Rn.oid=pn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Rn.v),Y("/R "+Rn.r),Y("/U <"+Rn.toHexString(Rn.U)+">"),Y("/O <"+Rn.toHexString(Rn.O)+">"),Y("/P "+Rn.P),Y(">>"),Y("endobj")},hc=function(){for(var m in Y("/Font <<"),$t)$t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&Y("/"+m+" "+$t[m].objectNumber+" 0 R");Y(">>")},dc=function(){if(Object.keys(Bt).length>0){for(var m in Y("/Shading <<"),Bt)Bt.hasOwnProperty(m)&&Bt[m]instanceof bu&&Bt[m].objectNumber>=0&&Y("/"+m+" "+Bt[m].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),Y(">>")}},Po=function(m){if(Object.keys(Bt).length>0){for(var L in Y("/Pattern <<"),Bt)Bt.hasOwnProperty(L)&&Bt[L]instanceof g.TilingPattern&&Bt[L].objectNumber>=0&&Bt[L].objectNumber<m&&Y("/"+L+" "+Bt[L].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),Y(">>")}},fc=function(){if(Object.keys(fn).length>0){var m;for(m in Y("/ExtGState <<"),fn)fn.hasOwnProperty(m)&&fn[m].objectNumber>=0&&Y("/"+m+" "+fn[m].objectNumber+" 0 R");Ct.publish("putGStateDict"),Y(">>")}},mn=function(m){$r(m.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),hc(),dc(),Po(m.objectOid),fc(),Ri(),Y(">>"),Y("endobj")},_a=function(){var m=[];Qs(),xo(),To(),So(m),Ct.publish("putResources"),m.forEach(mn),mn({resourcesOid:ki,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources")},Hl=function(){Ct.publish("putAdditionalObjects");for(var m=0;m<Me.length;m++){var L=Me[m];$r(L.objId,!0),Y(L.content),Y("endobj")}Ct.publish("postPutAdditionalObjects")},Kl=function(m){Zt[m.fontName]=Zt[m.fontName]||{},Zt[m.fontName][m.fontStyle]=m.id},Ql=function(m,L,K,te,ce){var we={id:"F"+(Object.keys($t).length+1).toString(10),postScriptName:m,fontName:L,fontStyle:K,encoding:te,isStandardFont:ce||!1,metadata:{}};return Ct.publish("addFont",{font:we,instance:this}),$t[we.id]=we,Kl(we),we.id},bd=function(m){for(var L=0,K=Oe.length;L<K;L++){var te=Ql.call(this,m[L][0],m[L][1],m[L][2],Oe[L][3],!0);p===!1&&(v[te]=!0);var ce=m[L][0].split("-");Kl({id:te,fontName:ce[0],fontStyle:ce[1]||""})}Ct.publish("addFonts",{fonts:$t,dictionary:Zt})},ui=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(te){var L=te.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var K="Error in function "+L.split(`
`)[0].split("<")[0]+": "+te.message;if(!pt.console)throw new Error(K);pt.console.error(K,te),pt.alert&&alert(K)}},m.foo.bar=m,m.foo},No=function(m,L){var K,te,ce,we,ke,Qe,nt,h,_;if(ce=(L=L||{}).sourceEncoding||"Unicode",ke=L.outputEncoding,(L.autoencode||ke)&&$t[Nt].metadata&&$t[Nt].metadata[ce]&&$t[Nt].metadata[ce].encoding&&(we=$t[Nt].metadata[ce].encoding,!ke&&$t[Nt].encoding&&(ke=$t[Nt].encoding),!ke&&we.codePages&&(ke=we.codePages[0]),typeof ke=="string"&&(ke=we[ke]),ke)){for(nt=!1,Qe=[],K=0,te=m.length;K<te;K++)(h=ke[m.charCodeAt(K)])?Qe.push(String.fromCharCode(h)):Qe.push(m[K]),Qe[K].charCodeAt(0)>>8&&(nt=!0);m=Qe.join("")}for(K=m.length;nt===void 0&&K!==0;)m.charCodeAt(K-1)>>8&&(nt=!0),K--;if(!nt)return m;for(Qe=L.noBOM?[]:[254,255],K=0,te=m.length;K<te;K++){if((_=(h=m.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(_),Qe.push(h-(_<<8))}return String.fromCharCode.apply(void 0,Qe)},Rr=g.__private__.pdfEscape=g.pdfEscape=function(m,L){return No(m,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ci=g.__private__.beginPage=function(m){De[++ln]=[],gt[ln]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},ko(ln),Ae(De[G])},ci=function(m,L){var K,te,ce;switch(t=L||t,typeof m=="string"&&(K=w(m.toLowerCase()),Array.isArray(K)&&(te=K[0],ce=K[1])),Array.isArray(m)&&(te=m[0]*Ke,ce=m[1]*Ke),isNaN(te)&&(te=i[0],ce=i[1]),(te>14400||ce>14400)&&(an.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ce=Math.min(14400,ce)),i=[te,ce],t.substr(0,1)){case"l":ce>te&&(i=[ce,te]);break;case"p":te>ce&&(i=[ce,te])}Ci(i),Ic(en),Y(Oi),Zs!==0&&Y(Zs+" J"),nu!==0&&Y(nu+" j"),Ct.publish("addPage",{pageNumber:ln})},wa=function(m){m>0&&m<=ln&&(De.splice(m,1),gt.splice(m,1),ln--,G>ln&&(G=ln),this.setPage(G))},ko=function(m){m>0&&m<=ln&&(G=m)},pc=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Wt=function(m,L,K){var te,ce=void 0;return K=K||{},m=m!==void 0?m:$t[Nt].fontName,L=L!==void 0?L:$t[Nt].fontStyle,te=m.toLowerCase(),Zt[te]!==void 0&&Zt[te][L]!==void 0?ce=Zt[te][L]:Zt[m]!==void 0&&Zt[m][L]!==void 0?ce=Zt[m][L]:K.disableWarning===!1&&an.warn("Unable to look up font label for font '"+m+"', '"+L+"'. Refer to getFontList() for available fonts."),ce||K.noFallback||(ce=Zt.times[L])==null&&(ce=Zt.times.normal),ce},Ia=g.__private__.putInfo=function(){var m=pn(),L=function(te){return te};for(var K in d!==null&&(L=Rn.encryptor(m,0)),Y("<<"),Y("/Producer ("+Rr(L("jsPDF "+ft.version))+")"),ct)ct.hasOwnProperty(K)&&ct[K]&&Y("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Rr(L(ct[K]))+")");Y("/CreationDate ("+Rr(L(ge))+")"),Y(">>"),Y("endobj")},Es=g.__private__.putCatalog=function(m){var L=(m=m||{}).rootDictionaryObjId||bs;switch(pn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+L+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+Ge;K.substr(K.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+U(Ge)+"]")}switch(St||(St="continuous"),St){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}mt&&Y("/PageMode /"+mt),Ct.publish("putCatalog"),Y(">>"),Y("endobj")},Ro=g.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(se+1)),Y("/Root "+se+" 0 R"),Y("/Info "+(se-1)+" 0 R"),d!==null&&Y("/Encrypt "+Rn.oid+" 0 R"),Y("/ID [ <"+ve+"> <"+ve+"> ]"),Y(">>")},Ed=g.__private__.putHeader=function(){Y("%PDF-"+P),Y("%")},mc=g.__private__.putXRef=function(){var m="0000000000";Y("xref"),Y("0 "+(se+1)),Y("0000000000 65535 f ");for(var L=1;L<=se;L++)typeof he[L]=="function"?Y((m+he[L]()).slice(-10)+" 00000 n "):he[L]!==void 0?Y((m+he[L]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},As=g.__private__.buildDocument=function(){lt(),Ae(ye),Ct.publish("buildDocument"),Ed(),Ks(),Hl(),_a(),d!==null&&Gl(),Ia(),Es();var m=_e;return mc(),Ro(),Y("startxref"),Y(""+m),Y("%%EOF"),Ae(De[G]),ye.join(`
`)},ba=g.__private__.getBlob=function(m){return new Blob([tt(m)],{type:"application/pdf"})},Ea=g.output=g.__private__.output=ui(function(m,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",m){case void 0:return As();case"save":g.save(L.filename);break;case"arraybuffer":return tt(As());case"blob":return ba(As());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(ba(As()))||void 0;an.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",te=As();try{K=H_(te)}catch{K=H_(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+L.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(ce=L.pdfObjectUrl,we="");var ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",Qe=pt.open();return Qe!==null&&Qe.document.write(ke),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',h=pt.open();if(h!==null){h.document.write(nt);var _=this;h.document.documentElement.querySelector("#pdfViewer").onload=function(){h.document.title=L.filename,h.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_.output("bloburl"))}}return h}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',B=pt.open();if(B!==null&&(B.document.write(A),B.document.title=L.filename),B||typeof safari>"u")return B;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",L);default:return null}}),gc=function(m){return Array.isArray(Hs)===!0&&Hs.indexOf(m)>-1};switch(r){case"pt":Ke=1;break;case"mm":Ke=72/25.4;break;case"cm":Ke=72/2.54;break;case"in":Ke=72;break;case"px":Ke=gc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ke=12;break;case"ex":Ke=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ke=r}var Rn=null;Te(),Z();var Zi=function(m){return d!==null?Rn.encryptor(m,0):function(L){return L}},Jl=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[m].objId,pageNumber:m,pageContext:gt[m]}},vt=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in gt)if(gt[L].objId===m)break;return Jl(L)},vc=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:gt[G].objId,pageNumber:G,pageContext:gt[G]}};g.addPage=function(){return ci.apply(this,arguments),this},g.setPage=function(){return ko.apply(this,arguments),Ae.call(this,De[G]),this},g.insertPage=function(m){return this.addPage(),this.movePage(G,m),this},g.movePage=function(m,L){var K,te;if(m>L){K=De[m],te=gt[m];for(var ce=m;ce>L;ce--)De[ce]=De[ce-1],gt[ce]=gt[ce-1];De[L]=K,gt[L]=te,this.setPage(L)}else if(m<L){K=De[m],te=gt[m];for(var we=m;we<L;we++)De[we]=De[we+1],gt[we]=gt[we+1];De[L]=K,gt[L]=te,this.setPage(L)}return this},g.deletePage=function(){return wa.apply(this,arguments),this},g.__private__.text=g.text=function(m,L,K,te,ce){var we,ke,Qe,nt,h,_,A,B,ie,de=(te=te||{}).scope||this;if(typeof m=="number"&&typeof L=="number"&&(typeof K=="string"||Array.isArray(K))){var Le=K;K=L,L=m,m=Le}if(arguments[3]instanceof ut?(E("The transform parameter of text() with a Matrix value"),ie=ce):(Qe=arguments[4],nt=arguments[5],Yt(A=arguments[3])==="object"&&A!==null||(typeof Qe=="string"&&(nt=Qe,Qe=null),typeof A=="string"&&(nt=A,A=null),typeof A=="number"&&(Qe=A,A=null),te={flags:A,angle:Qe,align:nt})),isNaN(L)||isNaN(K)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return de;var _t="",Ht=!1,wt=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:Ts,sn=de.internal.scaleFactor;function Un(un){return un=un.split("	").join(Array(te.TabLen||9).join(" ")),Rr(un,A)}function is(un){for(var cn,qn=un.concat(),rr=[],Mo=qn.length;Mo--;)typeof(cn=qn.shift())=="string"?rr.push(cn):Array.isArray(un)&&(cn.length===1||cn[1]===void 0&&cn[2]===void 0)?rr.push(cn[0]):rr.push([cn[0],cn[1],cn[2]]);return rr}function _r(un,cn){var qn;if(typeof un=="string")qn=cn(un)[0];else if(Array.isArray(un)){for(var rr,Mo,Rd=un.concat(),Rc=[],rm=Rd.length;rm--;)typeof(rr=Rd.shift())=="string"?Rc.push(cn(rr)[0]):Array.isArray(rr)&&typeof rr[0]=="string"&&(Mo=cn(rr[0],rr[1],rr[2]),Rc.push([Mo[0],Mo[1],Mo[2]]));qn=Rc}return qn}var ks=!1,Lo=!0;if(typeof m=="string")ks=!0;else if(Array.isArray(m)){var Td=m.concat();ke=[];for(var Ec,wr=Td.length;wr--;)(typeof(Ec=Td.shift())!="string"||Array.isArray(Ec)&&typeof Ec[0]!="string")&&(Lo=!1);ks=Lo}if(ks===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Ac=je/de.internal.scaleFactor,Tc=Ac*(wt-1);switch(te.baseline){case"bottom":K-=Tc;break;case"top":K+=Ac-Tc;break;case"hanging":K+=Ac-2*Tc;break;case"middle":K+=Ac/2-Tc}if((_=te.maxWidth||0)>0&&(typeof m=="string"?m=de.splitTextToSize(m,_):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(un,cn){return un.concat(de.splitTextToSize(cn,_))},[]))),we={text:m,x:L,y:K,options:te,mutex:{pdfEscape:Rr,activeFontKey:Nt,fonts:$t,activeFontSize:je}},Ct.publish("preProcessText",we),m=we.text,Qe=(te=we.options).angle,!(ie instanceof ut)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,te.rotationDirection===0&&(Qe=-Qe),R===b.ADVANCED&&(Qe=-Qe);var Sc=Math.cos(Qe),Sd=Math.sin(Qe);ie=new ut(Sc,Sd,-Sd,Sc,0,0)}else Qe&&Qe instanceof ut&&(ie=Qe);R!==b.ADVANCED||ie||(ie=Pi),(h=te.charSpace||Ps)!==void 0&&(_t+=k(x(h))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(B=te.horizontalScale)!==void 0&&(_t+=k(100*B)+` Tz
`),te.lang;var di=-1,j1=te.renderingMode!==void 0?te.renderingMode:te.stroke,xd=de.internal.getCurrentPageInfo().pageContext;switch(j1){case 0:case!1:case"fill":di=0;break;case 1:case!0:case"stroke":di=1;break;case 2:case"fillThenStroke":di=2;break;case 3:case"invisible":di=3;break;case 4:case"fillAndAddForClipping":di=4;break;case 5:case"strokeAndAddPathForClipping":di=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":di=6;break;case 7:case"addToPathForClipping":di=7}var Zp=xd.usedRenderingMode!==void 0?xd.usedRenderingMode:-1;di!==-1?_t+=di+` Tr
`:Zp!==-1&&(_t+=`0 Tr
`),di!==-1&&(xd.usedRenderingMode=di),nt=te.align||"left";var ss,xc=je*wt,em=de.internal.pageSize.getWidth(),tm=$t[Nt];h=te.charSpace||Ps,_=te.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},te.flags);var Ca=[],su=function(un){return de.getStringUnitWidth(un,{font:tm,charSpace:h,fontSize:je,doKerning:!1})*je/sn};if(Object.prototype.toString.call(m)==="[object Array]"){var fi;ke=is(m),nt!=="left"&&(ss=ke.map(su));var Hr,La=0;if(nt==="right"){L-=ss[0],m=[],wr=ke.length;for(var Do=0;Do<wr;Do++)Do===0?(Hr=Gr(L),fi=ts(K)):(Hr=x(La-ss[Do]),fi=-xc),m.push([ke[Do],Hr,fi]),La=ss[Do]}else if(nt==="center"){L-=ss[0]/2,m=[],wr=ke.length;for(var Oo=0;Oo<wr;Oo++)Oo===0?(Hr=Gr(L),fi=ts(K)):(Hr=x((La-ss[Oo])/2),fi=-xc),m.push([ke[Oo],Hr,fi]),La=ss[Oo]}else if(nt==="left"){m=[],wr=ke.length;for(var Pc=0;Pc<wr;Pc++)m.push(ke[Pc])}else if(nt==="justify"&&tm.encoding==="Identity-H"){m=[],wr=ke.length,_=_!==0?_:em;for(var Fo=0,Bn=0;Bn<wr;Bn++)if(fi=Bn===0?ts(K):-xc,Hr=Bn===0?Gr(L):Fo,Bn<wr-1){var Pd=x((_-ss[Bn])/(ke[Bn].split(" ").length-1)),Kr=ke[Bn].split(" ");m.push([Kr[0]+" ",Hr,fi]),Fo=0;for(var os=1;os<Kr.length;os++){var Nc=(su(Kr[os-1]+" "+Kr[os])-su(Kr[os]))*sn+Pd;os==Kr.length-1?m.push([Kr[os],Nc,0]):m.push([Kr[os]+" ",Nc,0]),Fo-=Nc}}else m.push([ke[Bn],Hr,fi]);m.push(["",Fo,0])}else{if(nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],wr=ke.length,_=_!==0?_:em,Bn=0;Bn<wr;Bn++)fi=Bn===0?ts(K):-xc,Hr=Bn===0?Gr(L):0,Bn<wr-1?Ca.push(k(x((_-ss[Bn])/(ke[Bn].split(" ").length-1)))):Ca.push(0),m.push([ke[Bn],Hr,fi])}}var nm=typeof te.R2L=="boolean"?te.R2L:ot;nm===!0&&(m=_r(m,function(un,cn,qn){return[un.split("").reverse().join(""),cn,qn]})),we={text:m,x:L,y:K,options:te,mutex:{pdfEscape:Rr,activeFontKey:Nt,fonts:$t,activeFontSize:je}},Ct.publish("postProcessText",we),m=we.text,Ht=we.mutex.isHex||!1;var Nd=$t[Nt].encoding;Nd!=="WinAnsiEncoding"&&Nd!=="StandardEncoding"||(m=_r(m,function(un,cn,qn){return[Un(un),cn,qn]})),ke=is(m),m=[];for(var ou,au,Da,lu=0,kc=1,uu=Array.isArray(ke[0])?kc:lu,Oa="",kd=function(un,cn,qn){var rr="";return qn instanceof ut?(qn=typeof te.angle=="number"?rn(qn,new ut(1,0,0,1,un,cn)):rn(new ut(1,0,0,1,un,cn),qn),R===b.ADVANCED&&(qn=rn(new ut(1,0,0,-1,0,0),qn)),rr=qn.join(" ")+` Tm
`):rr=k(un)+" "+k(cn)+` Td
`,rr},as=0;as<ke.length;as++){switch(Oa="",uu){case kc:Da=(Ht?"<":"(")+ke[as][0]+(Ht?">":")"),ou=parseFloat(ke[as][1]),au=parseFloat(ke[as][2]);break;case lu:Da=(Ht?"<":"(")+ke[as]+(Ht?">":")"),ou=Gr(L),au=ts(K)}Ca!==void 0&&Ca[as]!==void 0&&(Oa=Ca[as]+` Tw
`),as===0?m.push(Oa+kd(ou,au,ie)+Da):uu===lu?m.push(Oa+Da):uu===kc&&m.push(Oa+kd(ou,au,ie)+Da)}m=uu===lu?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var ls=`BT
/`;return ls+=Nt+" "+je+` Tf
`,ls+=k(je*wt)+` TL
`,ls+=Xs+`
`,ls+=_t,ls+=m,Y(ls+="ET"),v[Nt]=!0,de};var Ys=g.__private__.clip=g.clip=function(m){return Y(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ys("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Y("n"),this};var es=g.__private__.isValidStyle=function(m){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(L=!0),L};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return es(m)&&(u=m),this};var yc=g.__private__.getStyle=g.getStyle=function(m){var L=u;switch(m){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=m}return L},_c=g.close=function(){return Y("h"),this};g.stroke=function(){return Y("S"),this},g.fill=function(m){return Wr("f",m),this},g.fillEvenOdd=function(m){return Wr("f*",m),this},g.fillStroke=function(m){return Wr("B",m),this},g.fillStrokeEvenOdd=function(m){return Wr("B*",m),this};var Wr=function(m,L){Yt(L)==="object"?Aa(L,m):Y(m)},Yl=function(m){m===null||R===b.ADVANCED&&m===void 0||(m=yc(m),Y(m))};function Ad(m,L,K,te,ce){var we=new mh(L||this.boundingBox,K||this.xStep,te||this.yStep,this.gState,ce||this.matrix);we.stream=this.stream;var ke=m+"$$"+this.cloneIndex+++"$$";return Jn(ke,we),we}var Aa=function(m,L){var K=Is[m.key],te=Bt[K];if(te instanceof bu)Y("q"),Y(Ta(L)),te.gState&&g.setGState(te.gState),Y(m.matrix.toString()+" cm"),Y("/"+K+" sh"),Y("Q");else if(te instanceof mh){var ce=new ut(1,0,0,-1,0,Ns());m.matrix&&(ce=ce.multiply(m.matrix||Pi),K=Ad.call(te,m.key,m.boundingBox,m.xStep,m.yStep,ce).id),Y("q"),Y("/Pattern cs"),Y("/"+K+" scn"),te.gState&&g.setGState(te.gState),Y(L),Y("Q")}},Ta=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sa=g.moveTo=function(m,L){return Y(k(x(m))+" "+k(X(L))+" m"),this},Li=g.lineTo=function(m,L){return Y(k(x(m))+" "+k(X(L))+" l"),this},hi=g.curveTo=function(m,L,K,te,ce,we){return Y([k(x(m)),k(X(L)),k(x(K)),k(X(te)),k(x(ce)),k(X(we)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,L,K,te,ce){if(isNaN(m)||isNaN(L)||isNaN(K)||isNaN(te)||!es(ce))throw new Error("Invalid arguments passed to jsPDF.line");return R===b.COMPAT?this.lines([[K-m,te-L]],m,L,[1,1],ce||"S"):this.lines([[K-m,te-L]],m,L,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,L,K,te,ce,we){var ke,Qe,nt,h,_,A,B,ie,de,Le,_t,Ht;if(typeof m=="number"&&(Ht=K,K=L,L=m,m=Ht),te=te||[1,1],we=we||!1,isNaN(L)||isNaN(K)||!Array.isArray(m)||!Array.isArray(te)||!es(ce)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sa(L,K),ke=te[0],Qe=te[1],h=m.length,Le=L,_t=K,nt=0;nt<h;nt++)(_=m[nt]).length===2?(Le=_[0]*ke+Le,_t=_[1]*Qe+_t,Li(Le,_t)):(A=_[0]*ke+Le,B=_[1]*Qe+_t,ie=_[2]*ke+Le,de=_[3]*Qe+_t,Le=_[4]*ke+Le,_t=_[5]*Qe+_t,hi(A,B,ie,de,Le,_t));return we&&_c(),Yl(ce),this},g.path=function(m){for(var L=0;L<m.length;L++){var K=m[L],te=K.c;switch(K.op){case"m":Sa(te[0],te[1]);break;case"l":Li(te[0],te[1]);break;case"c":hi.apply(this,te);break;case"h":_c()}}return this},g.__private__.rect=g.rect=function(m,L,K,te,ce){if(isNaN(m)||isNaN(L)||isNaN(K)||isNaN(te)||!es(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return R===b.COMPAT&&(te=-te),Y([k(x(m)),k(X(L)),k(x(K)),k(x(te)),"re"].join(" ")),Yl(ce),this},g.__private__.triangle=g.triangle=function(m,L,K,te,ce,we,ke){if(isNaN(m)||isNaN(L)||isNaN(K)||isNaN(te)||isNaN(ce)||isNaN(we)||!es(ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-m,te-L],[ce-K,we-te],[m-ce,L-we]],m,L,[1,1],ke,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,L,K,te,ce,we,ke){if(isNaN(m)||isNaN(L)||isNaN(K)||isNaN(te)||isNaN(ce)||isNaN(we)||!es(ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*K),we=Math.min(we,.5*te),this.lines([[K-2*ce,0],[ce*Qe,0,ce,we-we*Qe,ce,we],[0,te-2*we],[0,we*Qe,-ce*Qe,we,-ce,we],[2*ce-K,0],[-ce*Qe,0,-ce,-we*Qe,-ce,-we],[0,2*we-te],[0,-we*Qe,ce*Qe,-we,ce,-we]],m+ce,L,[1,1],ke,!0),this},g.__private__.ellipse=g.ellipse=function(m,L,K,te,ce){if(isNaN(m)||isNaN(L)||isNaN(K)||isNaN(te)||!es(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*K,ke=4/3*(Math.SQRT2-1)*te;return Sa(m+K,L),hi(m+K,L-ke,m+we,L-te,m,L-te),hi(m-we,L-te,m-K,L-ke,m-K,L),hi(m-K,L+ke,m-we,L+te,m,L+te),hi(m+we,L+te,m+K,L+ke,m+K,L),Yl(ce),this},g.__private__.circle=g.circle=function(m,L,K,te){if(isNaN(m)||isNaN(L)||isNaN(K)||!es(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,L,K,K,te)},g.setFont=function(m,L,K){return K&&(L=Q(L,K)),Nt=Wt(m,L,{disableWarning:!1}),this};var wc=g.__private__.getFont=g.getFont=function(){return $t[Wt.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,L,K={};for(m in Zt)if(Zt.hasOwnProperty(m))for(L in K[m]=[],Zt[m])Zt[m].hasOwnProperty(L)&&K[m].push(L);return K},g.addFont=function(m,L,K,te,ce){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(K=Q(K,te)),ce=ce||"Identity-H",Ql.call(this,m,L,K,ce)};var Ts,en=n.lineWidth||.200025,xa=g.__private__.getLineWidth=g.getLineWidth=function(){return en},Ic=g.__private__.setLineWidth=g.setLineWidth=function(m){return en=m,Y(k(x(m))+" w"),this};g.__private__.setLineDash=ft.API.setLineDash=ft.API.setLineDashPattern=function(m,L){if(m=m||[],L=L||0,isNaN(L)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(K){return k(x(K))}).join(" "),L=k(x(L)),Y("["+m+"] "+L+" d"),this};var Xl=g.__private__.getLineHeight=g.getLineHeight=function(){return je*Ts};g.__private__.getLineHeight=g.getLineHeight=function(){return je*Ts};var Zl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Ts=m),this},eu=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ts};Zl(n.lineHeight);var Gr=g.__private__.getHorizontalCoordinate=function(m){return x(m)},ts=g.__private__.getVerticalCoordinate=function(m){return R===b.ADVANCED?m:gt[G].mediaBox.topRightY-gt[G].mediaBox.bottomLeftY-x(m)},Di=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return k(Gr(m))},Ss=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return k(ts(m))},Oi=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return kr(Oi)},g.__private__.setStrokeColor=g.setDrawColor=function(m,L,K,te){return Oi=ai({ch1:m,ch2:L,ch3:K,ch4:te,pdfColorType:"draw",precision:2}),Y(Oi),this};var xs=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return kr(xs)},g.__private__.setFillColor=g.setFillColor=function(m,L,K,te){return xs=ai({ch1:m,ch2:L,ch3:K,ch4:te,pdfColorType:"fill",precision:2}),Y(xs),this};var Xs=n.textColor||"0 g",tu=g.__private__.getTextColor=g.getTextColor=function(){return kr(Xs)};g.__private__.setTextColor=g.setTextColor=function(m,L,K,te){return Xs=ai({ch1:m,ch2:L,ch3:K,ch4:te,pdfColorType:"text",precision:3}),this};var Ps=n.charSpace,bc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ps||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ps=m,this};var Zs=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var L=g.CapJoinStyles[m];if(L===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zs=L,Y(L+" J"),this};var nu=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var L=g.CapJoinStyles[m];if(L===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nu=L,Y(L+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(k(x(m))+" M"),this},g.GState=N0,g.setGState=function(m){(m=typeof m=="string"?fn[oi[m]]:ru(null,m)).equals(zr)||(Y("/"+m.id+" gs"),zr=m)};var ru=function(m,L){if(!m||!oi[m]){var K=!1;for(var te in fn)if(fn.hasOwnProperty(te)&&fn[te].equals(L)){K=!0;break}if(K)L=fn[te];else{var ce="GS"+(Object.keys(fn).length+1).toString(10);fn[ce]=L,L.id=ce}return m&&(oi[m]=L.id),Ct.publish("addGState",L),L}};g.addGState=function(m,L){return ru(m,L),this},g.saveGraphicsState=function(){return Y("q"),Xi.push({key:Nt,size:je,color:Xs}),this},g.restoreGraphicsState=function(){Y("Q");var m=Xi.pop();return Nt=m.key,je=m.size,Xs=m.color,zr=null,this},g.setCurrentTransformationMatrix=function(m){return Y(m.toString()+" cm"),this},g.comment=function(m){return Y("#"+m),this};var ns=function(m,L){var K=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(we){isNaN(we)||(K=parseFloat(we))}});var te=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(we){isNaN(we)||(te=parseFloat(we))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(we){ce=we.toString()}}),this},Pa=function(m,L,K,te){ns.call(this,m,L),this.type="rect";var ce=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(ke){isNaN(ke)||(ce=parseFloat(ke))}});var we=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(ke){isNaN(ke)||(we=parseFloat(ke))}}),this},Na=function(){this.page=ln,this.currentPage=G,this.pages=De.slice(0),this.pagesContext=gt.slice(0),this.x=lr,this.y=Rt,this.matrix=si,this.width=rs(G),this.height=Ns(G),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Na.prototype.restore=function(){ln=this.page,G=this.currentPage,gt=this.pagesContext,De=this.pages,lr=this.x,Rt=this.y,si=this.matrix,Ra(G,this.width),Fi(G,this.height),Ue=this.outputDestination};var ka=function(m,L,K,te,ce){Nr.push(new Na),ln=G=0,De=[],lr=m,Rt=L,si=ce,Ci([K,te])},iu=function(m){if(xi[m])Nr.pop().restore();else{var L=new Na,K="Xo"+(Object.keys(Nn).length+1).toString(10);L.id=K,xi[m]=K,Nn[K]=L,Ct.publish("addFormObject",L),Nr.pop().restore()}};for(var Co in g.beginFormObject=function(m,L,K,te,ce){return ka(m,L,K,te,ce),this},g.endFormObject=function(m){return iu(m),this},g.doFormObject=function(m,L){var K=Nn[xi[m]];return Y("q"),Y(L.toString()+" cm"),Y("/"+K.id+" Do"),Y("Q"),this},g.getFormObject=function(m){var L=Nn[xi[m]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},g.save=function(m,L){return m=m||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(gu(ba(As()),m),typeof gu.unload=="function"&&pt.setTimeout&&setTimeout(gu.unload,911),this):new Promise(function(K,te){try{var ce=gu(ba(As()),m);typeof gu.unload=="function"&&pt.setTimeout&&setTimeout(gu.unload,911),K(ce)}catch(we){te(we.message)}})},ft.API)ft.API.hasOwnProperty(Co)&&(Co==="events"&&ft.API.events.length?function(m,L){var K,te,ce;for(ce=L.length-1;ce!==-1;ce--)K=L[ce][0],te=L[ce][1],m.subscribe.apply(m,[K].concat(typeof te=="function"?[te]:te))}(Ct,ft.API.events):g[Co]=ft.API[Co]);var rs=g.getPageWidth=function(m){return(gt[m=m||G].mediaBox.topRightX-gt[m].mediaBox.bottomLeftX)/Ke},Ra=g.setPageWidth=function(m,L){gt[m].mediaBox.topRightX=L*Ke+gt[m].mediaBox.bottomLeftX},Ns=g.getPageHeight=function(m){return(gt[m=m||G].mediaBox.topRightY-gt[m].mediaBox.bottomLeftY)/Ke},Fi=g.setPageHeight=function(m,L){gt[m].mediaBox.topRightY=L*Ke+gt[m].mediaBox.bottomLeftY};return g.internal={pdfEscape:Rr,getStyle:yc,getFont:wc,getFontSize:$e,getCharSpace:bc,getTextColor:tu,getLineHeight:Xl,getLineHeightFactor:eu,getLineWidth:xa,write:yt,getHorizontalCoordinate:Gr,getVerticalCoordinate:ts,getCoordinateString:Di,getVerticalCoordinateString:Ss,collections:{},newObject:pn,newAdditionalObject:Ni,newObjectDeferred:kn,newObjectDeferredBegin:$r,getFilters:li,putStream:yr,events:Ct,scaleFactor:Ke,pageSize:{getWidth:function(){return rs(G)},setWidth:function(m){Ra(G,m)},getHeight:function(){return Ns(G)},setHeight:function(m){Fi(G,m)}},encryptionOptions:d,encryption:Rn,getEncryptor:Zi,output:Ea,getNumberOfPages:pc,pages:De,out:Y,f2:U,f3:T,getPageInfo:Jl,getPageInfoByObjId:vt,getCurrentPageInfo:vc,getPDFVersion:S,Point:ns,Rectangle:Pa,Matrix:ut,hasHotfix:gc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return rs(G)},set:function(m){Ra(G,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ns(G)},set:function(m){Fi(G,m)},enumerable:!0,configurable:!0}),bd.call(g,Oe),Nt="F1",ci(i,t),Ct.publish("initialized"),g}Zc.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Zc.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zc.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Zc.prototype.processOwnerPassword=function(n,e){return Q_(K_(e).substr(0,5),n)},Zc.prototype.encryptor=function(n,e){var t=K_(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Q_(t,r)}},N0.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Yt(n)!==Yt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},ft.API={events:[]},ft.version="2.5.2";var Ln=ft.API,U5=1,cc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qc=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(n){return n.toFixed(2)},Qa=function(n){return n.toFixed(5)};Ln.__acroform__={};var Si=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},qA=function(n){return n*U5},no=function(n){var e=new lk,t=Ze.internal.getHeight(n)||0,r=Ze.internal.getWidth(n)||0;return e.BBox=[0,0,Number(At(r)),Number(At(t))],e},WB=Ln.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},GB=Ln.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},HB=Ln.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},$n=Ln.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HB(n,e-1)},Wn=Ln.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return WB(n,e-1)},Gn=Ln.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return GB(n,e-1)},KB=Ln.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},QB=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=J_(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=no(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},J_=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var s=t,o=Ze.internal.getHeight(n)||0;o=o<0?-o:o;var a=Ze.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(T,x,N){if(T+1<i.length){var X=x+" "+i[T+1][0];return Qm(X,n,N).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,p=Qm("3",n,s).height,v=n.multiline?o-s:(o-p)/2,g=v+=2,P=0,S=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Qm(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",b=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var $=!1;if(i[R].length!==1&&C!==i[R].length-1){if((p+2)*(b+2)+2>o)continue e;w+=i[R][C],$=!0,S=R,R--}else{w=(w+=i[R][C]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var W=parseInt(R),Q=l(W,w,s),k=R>=i.length-1;if(Q&&!k){w+=" ",C=0;continue}if(Q||k){if(k)S=W;else if(n.multiline&&(p+2)*(b+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(b+2)+2>o)continue e;S=W}}for(var E="",O=P;O<=S;O++){var U=i[O];if(n.multiline){if(O===S){E+=U[C]+" ",C=(C+1)%U.length;continue}if(O===P){E+=U[U.length-1]+" ";continue}}E+=U[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Qm(E,n,s).width,n.textAlign){case"right":u=a-d-2;break;case"center":u=(a-d)/2;break;case"left":default:u=2}e+=At(u)+" "+At(g)+` Td
`,e+="("+cc(E)+`) Tj
`,e+=-At(u)+` 0 Td
`,g=-(s+2),d=0,P=$?S:S+1,b++,w=""}break}return r.text=e,r.fontSize=s,r},Qm=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},JB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YB=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},XB=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Yt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},ZB=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ws.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(JB)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");U5=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new uk,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&YB(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=KB(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ze.createDefaultAppearanceStream(a),Yt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=QB(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var P=g[o];typeof P=="function"&&(P=P.call(i,a)),p+="/"+o+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=g)=="function"&&(P=P.call(i,a)),p+="/"+o+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&XB(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},ak=Ln.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Yt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+cc(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ey=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+cc(r(n))+")"},lo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lo.prototype.toString=function(){return this.objId+" 0 R"},lo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},lo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:ak(i,this.objId,this.scope)}):i instanceof lo?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var lk=function(){lo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Si(lk,lo);var uk=function(){lo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+cc(t(n))+")"}},set:function(t){n=t}})};Si(uk,lo);var Ws=function n(){lo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$n(e,3)},set:function(w){w?this.F=Wn(e,3):this.F=Gn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof k0)return;s="FieldObject"+n.FieldNum++}var w=function(b){return b};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+cc(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/U5:u},set:function(w){u=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof k0||this instanceof Fu))return ey(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof pr?v:ey(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof pr?w:w.substr(0,1)==="("?qc(w.substr(1,w.length-2)):qc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?qc(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof pr?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof pr?g:ey(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof pr?w:w.substr(0,1)==="("?qc(w.substr(1,w.length-2)):qc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?qc(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof pr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(w){w=!!w,S=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(w){P=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,1)},set:function(w){w?this.Ff=Wn(this.Ff,1):this.Ff=Gn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,2)},set:function(w){w?this.Ff=Wn(this.Ff,2):this.Ff=Gn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,3)},set:function(w){w?this.Ff=Wn(this.Ff,3):this.Ff=Gn(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');C=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(C){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};Si(Ws,lo);var Nh=function(){Ws.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ak(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,18)},set:function(t){t?this.Ff=Wn(this.Ff,18):this.Ff=Gn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Wn(this.Ff,19):this.Ff=Gn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,20)},set:function(t){t?(this.Ff=Wn(this.Ff,20),e.sort()):this.Ff=Gn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,22)},set:function(t){t?this.Ff=Wn(this.Ff,22):this.Ff=Gn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(t){t?this.Ff=Wn(this.Ff,23):this.Ff=Gn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,27)},set:function(t){t?this.Ff=Wn(this.Ff,27):this.Ff=Gn(this.Ff,27)}}),this.hasAppearanceStream=!1};Si(Nh,Ws);var kh=function(){Nh.call(this),this.fontName="helvetica",this.combo=!1};Si(kh,Nh);var Rh=function(){kh.call(this),this.combo=!0};Si(Rh,kh);var Ng=function(){Rh.call(this),this.edit=!0};Si(Ng,Rh);var pr=function(){Ws.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,15)},set:function(t){t?this.Ff=Wn(this.Ff,15):this.Ff=Gn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,16)},set:function(t){t?this.Ff=Wn(this.Ff,16):this.Ff=Gn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,17)},set:function(t){t?this.Ff=Wn(this.Ff,17):this.Ff=Gn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(t){t?this.Ff=Wn(this.Ff,26):this.Ff=Gn(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cc(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Si(pr,Ws);var kg=function(){pr.call(this),this.pushButton=!0};Si(kg,pr);var Ch=function(){pr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Si(Ch,pr);var k0=function(){var n,e;Ws.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+cc(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Yt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Si(k0,Ws),Ch.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ch.prototype.createOption=function(n){var e=new k0;return e.Parent=this,e.optionName=n,this.Kids.push(e),eq.call(this.scope,e),e};var Rg=function(){pr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};Si(Rg,pr);var Fu=function(){Ws.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,13)},set:function(e){e?this.Ff=Wn(this.Ff,13):this.Ff=Gn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,21)},set:function(e){e?this.Ff=Wn(this.Ff,21):this.Ff=Gn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(e){e?this.Ff=Wn(this.Ff,23):this.Ff=Gn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,24)},set:function(e){e?this.Ff=Wn(this.Ff,24):this.Ff=Gn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,25)},set:function(e){e?this.Ff=Wn(this.Ff,25):this.Ff=Gn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(e){e?this.Ff=Wn(this.Ff,26):this.Ff=Gn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Si(Fu,Ws);var Cg=function(){Fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,14)},set:function(n){n?this.Ff=Wn(this.Ff,14):this.Ff=Gn(this.Ff,14)}}),this.password=!0};Si(Cg,Fu);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=no(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=J_(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+At(Ze.internal.getWidth(n))+" "+At(Ze.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+At(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=no(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ze.internal.getHeight(n),o=Ze.internal.getWidth(n),a=J_(n,n.caption);return i.push("1 g"),i.push("0 0 "+At(o)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(o-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+At(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=no(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+At(Ze.internal.getWidth(n))+" "+At(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Circle.YesNormal,e.D[n]=Ze.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=no(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ze.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qa(Ze.internal.getWidth(n)/2)+" "+Qa(Ze.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=no(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ze.internal.Bezier_C).toFixed(5)),o=Number((r*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Ze.internal.getWidth(n)/2)+" "+Qa(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Ze.internal.getWidth(n)/2)+" "+Qa(Ze.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=no(n);e.scope=n.scope;var t=[],r=Ze.internal.getWidth(n)<=Ze.internal.getHeight(n)?Ze.internal.getWidth(n)/4:Ze.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ze.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qa(Ze.internal.getWidth(n)/2)+" "+Qa(Ze.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ze.RadioButton.Cross.YesNormal,e.D[n]=Ze.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=no(n);e.scope=n.scope;var t=[],r=Ze.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+At(Ze.internal.getWidth(n)-2)+" "+At(Ze.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),t.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),t.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),t.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=no(n);e.scope=n.scope;var t=Ze.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(Ze.internal.getWidth(n))+" "+At(Ze.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(Ze.internal.getWidth(n)-2)+" "+At(Ze.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(At(t.x1.x)+" "+At(t.x1.y)+" m"),r.push(At(t.x2.x)+" "+At(t.x2.y)+" l"),r.push(At(t.x4.x)+" "+At(t.x4.y)+" m"),r.push(At(t.x3.x)+" "+At(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=no(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+At(Ze.internal.getWidth(n))+" "+At(Ze.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ze.internal.getWidth(n),t=Ze.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ze.internal.getWidth=function(n){var e=0;return Yt(n)==="object"&&(e=qA(n.Rect[2])),e},Ze.internal.getHeight=function(n){var e=0;return Yt(n)==="object"&&(e=qA(n.Rect[3])),e};var eq=Ln.addField=function(n){if(ZB(this,n),!(n instanceof Ws))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=Nh,Ln.AcroFormListBox=kh,Ln.AcroFormComboBox=Rh,Ln.AcroFormEditBox=Ng,Ln.AcroFormButton=pr,Ln.AcroFormPushButton=kg,Ln.AcroFormRadioButton=Ch,Ln.AcroFormCheckBox=Rg,Ln.AcroFormTextField=Fu,Ln.AcroFormPasswordField=Cg,Ln.AcroFormAppearance=Ze,Ln.AcroForm={ChoiceField:Nh,ListBox:kh,ComboBox:Rh,EditBox:Ng,Button:pr,PushButton:kg,RadioButton:Ch,CheckBox:Rg,TextField:Fu,PasswordField:Cg,Appearance:Ze},ft.AcroForm={ChoiceField:Nh,ListBox:kh,ComboBox:Rh,EditBox:Ng,Button:pr,PushButton:kg,RadioButton:Ch,CheckBox:Rg,TextField:Fu,PasswordField:Cg,Appearance:Ze};function ck(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(T,x){var N,X,ge,ve,Ie,Z=e;if((x=x||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(Q(T))for(Ie in t)for(ge=t[Ie],N=0;N<ge.length;N+=1){for(ve=!0,X=0;X<ge[N].length;X+=1)if(ge[N][X]!==void 0&&ge[N][X]!==T[X]){ve=!1;break}if(ve===!0){Z=Ie;break}}else for(Ie in t)for(ge=t[Ie],N=0;N<ge.length;N+=1){for(ve=!0,X=0;X<ge[N].length;X+=1)if(ge[N][X]!==void 0&&ge[N][X]!==T.charCodeAt(X)){ve=!1;break}if(ve===!0){Z=Ie;break}}return Z===e&&x!==e&&(Z=x),Z},i=function T(x){for(var N=this.internal.write,X=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);x.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:x.width}),ve.push({key:"Height",value:x.height}),x.colorSpace===C.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(x.palette.length/3-1)+" "+("sMask"in x&&x.sMask!==void 0?x.objectId+2:x.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+x.colorSpace}),x.colorSpace===C.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:x.bitsPerComponent}),"decodeParameters"in x&&x.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+x.decodeParameters+">>"}),"transparency"in x&&Array.isArray(x.transparency)){for(var Ie="",Z=0,ue=x.transparency.length;Z<ue;Z++)Ie+=x.transparency[Z]+" "+x.transparency[Z]+" ";ve.push({key:"Mask",value:"["+Ie+"]"})}x.sMask!==void 0&&ve.push({key:"SMask",value:x.objectId+1+" 0 R"});var le=x.filter!==void 0?["/"+x.filter]:void 0;if(X({data:x.data,additionalKeyValues:ve,alreadyAppliedFilters:le,objectId:x.objectId}),N("endobj"),"sMask"in x&&x.sMask!==void 0){var Te="/Predictor "+x.predictor+" /Colors 1 /BitsPerComponent "+x.bitsPerComponent+" /Columns "+x.width,F={width:x.width,height:x.height,colorSpace:"DeviceGray",bitsPerComponent:x.bitsPerComponent,decodeParameters:Te,data:x.sMask};"filter"in x&&(F.filter=x.filter),T.call(this,F)}if(x.colorSpace===C.INDEXED){var G=this.internal.newObject();X({data:E(new Uint8Array(x.palette)),objectId:G}),N("endobj")}},s=function(){var T=this.internal.collections.addImage_images;for(var x in T)i.call(this,T[x])},o=function(){var T,x=this.internal.collections.addImage_images,N=this.internal.write;for(var X in x)N("/I"+(T=x[X]).index,T.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var T=this.internal.collections.addImage_images;return a.call(this),T},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(T){return typeof n["process"+T.toUpperCase()]=="function"},p=function(T){return Yt(T)==="object"&&T.nodeType===1},v=function(T,x){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var N=""+T.getAttribute("src");if(N.indexOf("data:image/")===0)return Ff(unescape(N).split("base64,").pop());var X=n.loadFile(N,!0);if(X!==void 0)return X}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var ge;switch(x){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;case"JPEG":case"JPG":default:ge="image/jpeg"}return Ff(T.toDataURL(ge,1).split("base64,").pop())}},g=function(T){var x=this.internal.collections.addImage_images;if(x){for(var N in x)if(T===x[N].alias)return x[N]}},P=function(T,x,N){return T||x||(T=-96,x=-96),T<0&&(T=-1*N.width*72/T/this.internal.scaleFactor),x<0&&(x=-1*N.height*72/x/this.internal.scaleFactor),T===0&&(T=x*N.width/N.height),x===0&&(x=T*N.height/N.width),[T,x]},S=function(T,x,N,X,ge,ve){var Ie=P.call(this,N,X,ge),Z=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,le=l.call(this);if(N=Ie[0],X=Ie[1],le[ge.index]=ge,ve){ve*=Math.PI/180;var Te=Math.cos(ve),F=Math.sin(ve),G=function(ee){return ee.toFixed(4)},J=[G(Te),G(F),G(-1*F),G(Te),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,Z(T),ue(x+X),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([Z(N),"0","0",Z(X),"0","0","cm"].join(" "))):this.internal.write([Z(N),"0","0",Z(X),Z(T),ue(x+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},C=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=n.__addimage__.sHashCode=function(T){var x,N,X=0;if(typeof T=="string")for(N=T.length,x=0;x<N;x++)X=(X<<5)-X+T.charCodeAt(x),X|=0;else if(Q(T))for(N=T.byteLength/2,x=0;x<N;x++)X=(X<<5)-X+T[x],X|=0;return X},R=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var x=!0;return T.length===0&&(x=!1),T.length%4!=0&&(x=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(x=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(x=!1),x},$=n.__addimage__.extractImageFromDataUrl=function(T){var x=(T=T||"").split("base64,"),N=null;if(x.length===2){var X=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(x[0]);Array.isArray(X)&&(N={mimeType:X[1],charset:X[2],data:x[1]})}return N},W=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(T){return W()&&T instanceof ArrayBuffer};var Q=n.__addimage__.isArrayBufferView=function(T){return W()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},k=n.__addimage__.binaryStringToUint8Array=function(T){for(var x=T.length,N=new Uint8Array(x),X=0;X<x;X++)N[X]=T.charCodeAt(X);return N},E=n.__addimage__.arrayBufferToBinaryString=function(T){for(var x="",N=Q(T)?T:new Uint8Array(T),X=0;X<N.length;X+=8192)x+=String.fromCharCode.apply(null,N.subarray(X,X+8192));return x};n.addImage=function(){var T,x,N,X,ge,ve,Ie,Z,ue;if(typeof arguments[1]=="number"?(x=e,N=arguments[1],X=arguments[2],ge=arguments[3],ve=arguments[4],Ie=arguments[5],Z=arguments[6],ue=arguments[7]):(x=arguments[1],N=arguments[2],X=arguments[3],ge=arguments[4],ve=arguments[5],Ie=arguments[6],Z=arguments[7],ue=arguments[8]),Yt(T=arguments[0])==="object"&&!p(T)&&"imageData"in T){var le=T;T=le.imageData,x=le.format||x||e,N=le.x||N||0,X=le.y||X||0,ge=le.w||le.width||ge,ve=le.h||le.height||ve,Ie=le.alias||Ie,Z=le.compression||Z,ue=le.rotation||le.angle||ue}var Te=this.internal.getFilters();if(Z===void 0&&Te.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(N)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=O.call(this,T,x,Ie,Z);return S.call(this,N,X,ge,ve,F,ue),this};var O=function(T,x,N,X){var ge,ve,Ie;if(typeof T=="string"&&r(T)===e){T=unescape(T);var Z=U(T,!1);(Z!==""||(Z=n.loadFile(T,!0))!==void 0)&&(T=Z)}if(p(T)&&(T=v(T,x)),x=r(T,x),!d(x))throw new Error("addImage does not support files of type '"+x+"', please ensure that a plugin for '"+x+"' support is added.");if(((Ie=N)==null||Ie.length===0)&&(N=function(ue){return typeof ue=="string"||Q(ue)?b(ue):Q(ue.data)?b(ue.data):null}(T)),(ge=g.call(this,N))||(W()&&(T instanceof Uint8Array||x==="RGBA"||(ve=T,T=k(T))),ge=this["process"+x.toUpperCase()](T,u.call(this),N,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in n.image_compression?ue:w.NONE}(X),ve)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},U=n.__addimage__.convertBase64ToBinaryString=function(T,x){var N;x=typeof x!="boolean"||x;var X,ge="";if(typeof T=="string"){X=(N=$(T))!==null?N.data:T;try{ge=Ff(X)}catch(ve){if(x)throw R(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};n.getImageProperties=function(T){var x,N,X="";if(p(T)&&(T=v(T)),typeof T=="string"&&r(T)===e&&((X=U(T,!1))===""&&(X=n.loadFile(T)||""),T=X),N=r(T),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(!W()||T instanceof Uint8Array||(T=k(T)),!(x=this["process"+N.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return x.fileType=N,x}})(ft.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};ft.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<u.length;v++){r=u[v];var g=this.internal.pdfEscape,P=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(S.objId),b=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(w(b))+") >>",S.content=s;var R=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(S.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var $=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(P(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var W=this.annotations._nameMap[r.options.name];r.options.pageNumber=W.page,r.options.top=W.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(P(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Q=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(t,a).length;o=Math.ceil(u*d)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(ft.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=n.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(S){var C=0,w=t,b="",R=0;for(C=0;C<S.length;C+=1)w[S.charCodeAt(C)]!==void 0?(R++,typeof(w=w[S.charCodeAt(C)])=="number"&&(b+=String.fromCharCode(w),w=t,R=0),C===S.length-1&&(w=t,b+=S.charAt(C-(R-1)),C-=R-1,R=0)):(w=t,b+=S.charAt(C-R),C-=R,R=0);return b};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(S,C,w){return o(S)?s(S)===!1?-1:!u(S)||!o(C)&&!o(w)||!o(w)&&a(C)||a(S)&&!o(C)||a(S)&&l(C)||a(S)&&a(C)?0:d(S)&&o(C)&&!a(C)&&o(w)&&u(w)?3:a(S)||!o(w)?1:2:-1},g=function(S){var C=0,w=0,b=0,R="",$="",W="",Q=(S=S||"").split("\\s+"),k=[];for(C=0;C<Q.length;C+=1){for(k.push(""),w=0;w<Q[C].length;w+=1)R=Q[C][w],$=Q[C][w-1],W=Q[C][w+1],o(R)?(b=v(R,$,W),k[C]+=b!==-1?String.fromCharCode(e[R.charCodeAt(0)][b]):R):k[C]+=R;k[C]=p(k[C])}return k.join(" ")},P=n.__arabicParser__.processArabic=n.processArabic=function(){var S,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(C)){var b=0;for(w=[],b=0;b<C.length;b+=1)Array.isArray(C[b])?w.push([g(C[b][0]),C[b][1],C[b][2]]):w.push([g(C[b])]);S=w}else S=g(C);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",P])}(ft.API),ft.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ft.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(S){P=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),v=u.scaleFactor||this.internal.scaleFactor,g=0,P=0,S=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,$){return R.concat(C.splitTextToSize($,w))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)g<(S=this.getStringUnitWidth(l[b],{font:p})*d)&&(g=S);return g!==0&&(P=l.length),{w:g/=v,h:Math.max((P*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,P,S,C,w=[],b=[],R=[],$={},W={},Q=[],k=[],E=(v=v||{}).autoSize||!1,O=v.printHeaders!==!1,U=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,T=v.margins||Object.assign({width:this.getPageWidth()},e),x=typeof v.padding=="number"?v.padding:3,N=v.headerBackgroundColor||"#c8c8c8",X=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=x,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=X,this.setFontSize(U),p==null)b=w=Object.keys(d[0]),R=w.map(function(){return"left"});else if(Array.isArray(p)&&Yt(p[0])==="object")for(w=p.map(function(le){return le.name}),b=p.map(function(le){return le.prompt||le.name||""}),R=p.map(function(le){return le.align||"left"}),g=0;g<p.length;g+=1)W[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(b=w=p,R=w.map(function(){return"left"}));if(E||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<w.length;g+=1){for($[C=w[g]]=d.map(function(le){return le[C]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(b[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=$[C],this.setFont(void 0,"normal"),S=0;S<P.length;S+=1)Q.push(this.getTextDimensions(P[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[C]=Math.max.apply(null,Q)+x+x,Q=[]}if(O){var ge={};for(g=0;g<w.length;g+=1)ge[w[g]]={},ge[w[g]].text=b[g],ge[w[g]].align=R[g];var ve=a.call(this,ge,W);k=w.map(function(le){return new s(l,u,W[le],ve,ge[le].text,void 0,ge[le].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var Ie=p.reduce(function(le,Te){return le[Te.name]=Te.align,le},{});for(g=0;g<d.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:d[g]},this);var Z=a.call(this,d[g],W);for(S=0;S<w.length;S+=1){var ue=d[g][w[S]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:S,data:ue},this),o.call(this,new s(l,u,W[w[S]],Z,ue,g+2,Ie[w[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var P=l[g];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+d+d},this).reduce(function(g,P){return Math.max(g,P)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(P)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(ft.API);var hk={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Y_=ck(dk),fk=[100,200,300,400,500,600,700,800,900],tq=ck(fk);function X_(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return hk[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Y_[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function zA(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var nq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$A={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WA(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function rq(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},nq,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=X_(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+WA(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var d=Y_[l],p=d<=Y_.normal?-1:1,v=zA(u,dk,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var d=hk[l],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=tq[l],p=zA(u,fk,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+WA(s)+"'.");return o}function GA(n){return n.trimLeft()}function iq(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function sq(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Jm,HA,KA,ty=["times"];(function(n){var e,t,r,i,s,o,a,l,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var p=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=F;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Ae){J=!!Ae}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(Ae){ee=!!Ae}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Ae){isNaN(Ae)||(se=Ae)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Ae){isNaN(Ae)||(he=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ae){var Y;typeof Ae=="number"?Y=[Ae,Ae,Ae,Ae]:((Y=new Array(4))[0]=Ae[0],Y[1]=Ae.length>=2?Ae[1]:Y[0],Y[2]=Ae.length>=3?Ae[2]:Y[0],Y[3]=Ae.length>=4?Ae[3]:Y[1]),u.margin=Y}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Ae){ye=Ae}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(Ae){_e=Ae}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Ae){Me=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ae){Ae instanceof d&&(u=Ae)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ae){u.path=Ae}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Ae){De=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var Y;Y=v(Ae),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var Y=v(Ae);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var ze=null;function Ue(Ae,Y){if(ze===null){var yt=function(tt){var Oe=[];return Object.keys(tt).forEach(function(je){tt[je].forEach(function(Ge){var $e=null;switch(Ge){case"bold":$e={family:je,weight:"bold"};break;case"italic":$e={family:je,style:"italic"};break;case"bolditalic":$e={family:je,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:je}}$e!==null&&($e.ref={name:je,style:Ge},Oe.push($e))})}),Oe}(Ae.getFontList());ze=function(tt){for(var Oe={},je=0;je<tt.length;++je){var Ge=X_(tt[je]),$e=Ge.family,ot=Ge.stretch,mt=Ge.style,bt=Ge.weight;Oe[$e]=Oe[$e]||{},Oe[$e][ot]=Oe[$e][ot]||{},Oe[$e][ot][mt]=Oe[$e][ot][mt]||{},Oe[$e][ot][mt][bt]=Ge}return Oe}(yt.concat(Y))}return ze}var lt=null;Object.defineProperty(this,"fontFaces",{get:function(){return lt},set:function(Ae){ze=null,lt=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var Y;if(this.ctx.font=Ae,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var yt=Y[1],tt=(Y[2],Y[3]),Oe=Y[4],je=(Y[5],Y[6]),Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(Ge==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var $e=function(ct){var Nt,Ke,lr=[],Rt=ct.trim();if(Rt==="")return ty;if(Rt in $A)return[$A[Rt]];for(;Rt!=="";){switch(Ke=null,Nt=(Rt=GA(Rt)).charAt(0)){case'"':case"'":Ke=iq(Rt.substring(1),Nt);break;default:Ke=sq(Rt)}if(Ke===null||(lr.push(Ke[0]),(Rt=GA(Ke[1]))!==""&&Rt.charAt(0)!==","))return ty;Rt=Rt.replace(/^,/,"")}return lr}(je);if(this.fontFaces){var ot=rq(Ue(this.pdf,this.fontFaces),$e.map(function(ct){return{family:ct,stretch:"normal",weight:tt,style:yt}}));this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var mt="";(tt==="bold"||parseInt(tt,10)>=700||yt==="bold")&&(mt="bold"),yt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var bt="",St={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<$e.length;dt++){if(this.pdf.internal.getFont($e[dt],mt,{noFallback:!0,disableWarning:!0})!==void 0){bt=$e[dt];break}if(mt==="bolditalic"&&this.pdf.internal.getFont($e[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)bt=$e[dt],mt="bold";else if(this.pdf.internal.getFont($e[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){bt=$e[dt],mt="normal";break}}if(bt===""){for(var Et=0;Et<$e.length;Et++)if(St[$e[Et]]){bt=St[$e[Et]];break}}bt=bt===""?"Times":bt,this.pdf.setFont(bt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};p.prototype.setLineDash=function(F){this.lineDash=F},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){$.call(this,"fill",!1)},p.prototype.stroke=function(){$.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(F,G){if(isNaN(F)||isNaN(G))throw an.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(F,G)},p.prototype.closePath=function(){var F=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Yt(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){F=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},p.prototype.lineTo=function(F,G){if(isNaN(F)||isNaN(G))throw an.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},p.prototype.quadraticCurveTo=function(F,G,J,ee){if(isNaN(J)||isNaN(ee)||isNaN(F)||isNaN(G))throw an.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(J,ee)),he=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"qct",x1:he.x,y1:he.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.bezierCurveTo=function(F,G,J,ee,se,he){if(isNaN(se)||isNaN(he)||isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee))throw an.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new o(se,he)),_e=this.ctx.transform.applyToPoint(new o(F,G)),Me=this.ctx.transform.applyToPoint(new o(J,ee));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Me.x,y2:Me.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},p.prototype.arc=function(F,G,J,ee,se,he){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee)||isNaN(se))throw an.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new o(F,G));F=ye.x,G=ye.y;var _e=this.ctx.transform.applyToPoint(new o(0,J)),Me=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(_e.x-Me.x,2)+Math.pow(_e.y-Me.y,2))}Math.abs(se-ee)>=2*Math.PI&&(ee=0,se=2*Math.PI),this.path.push({type:"arc",x:F,y:G,radius:J,startAngle:ee,endAngle:se,counterclockwise:he})},p.prototype.arcTo=function(F,G,J,ee,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(F,G,J,ee){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee))throw an.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,G),this.lineTo(F+J,G),this.lineTo(F+J,G+ee),this.lineTo(F,G+ee),this.lineTo(F,G),this.lineTo(F+J,G),this.lineTo(F,G)},p.prototype.fillRect=function(F,G,J,ee){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee))throw an.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,G,J,ee),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(F,G,J,ee){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee))throw an.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(F,G,J,ee),this.stroke())},p.prototype.clearRect=function(F,G,J,ee){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee))throw an.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,G,J,ee))},p.prototype.save=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},p.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(F){var G,J,ee,se;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))G=0,J=0,ee=0,se=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(he!==null)G=parseInt(he[1]),J=parseInt(he[2]),ee=parseInt(he[3]),se=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)G=parseInt(he[1]),J=parseInt(he[2]),ee=parseInt(he[3]),se=parseFloat(he[4]);else{if(se=1,typeof F=="string"&&F.charAt(0)!=="#"){var ye=new ik(F);F=ye.ok?ye.toHex():"#000000"}F.length===4?(G=F.substring(1,2),G+=G,J=F.substring(2,3),J+=J,ee=F.substring(3,4),ee+=ee):(G=F.substring(1,3),J=F.substring(3,5),ee=F.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),ee=parseInt(ee,16)}}return{r:G,g:J,b:ee,a:se,style:F}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(F,G,J,ee){if(isNaN(G)||isNaN(J)||typeof F!="string")throw an.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var se=Z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;x.call(this,{text:F,x:G,y:J,scale:he,angle:se,align:this.textAlign,maxWidth:ee})}},p.prototype.strokeText=function(F,G,J,ee){if(isNaN(G)||isNaN(J)||typeof F!="string")throw an.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){ee=isNaN(ee)?void 0:ee;var se=Z(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;x.call(this,{text:F,x:G,y:J,scale:he,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ee})}},p.prototype.measureText=function(F){if(typeof F!="string")throw an.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,ee=G.internal.getFontSize(),se=G.getStringUnitWidth(F)*ee/G.internal.scaleFactor,he=function(ye){var _e=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this};return new he({width:se*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(F,G){if(isNaN(F)||isNaN(G))throw an.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(F,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(F){if(isNaN(F))throw an.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(F,G){if(isNaN(F)||isNaN(G))throw an.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,F,G);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(F,G,J,ee,se,he){if(isNaN(F)||isNaN(G)||isNaN(J)||isNaN(ee)||isNaN(se)||isNaN(he))throw an.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new l(F,G,J,ee,se,he);this.ctx.transform=this.ctx.transform.multiply(ye)},p.prototype.setTransform=function(F,G,J,ee,se,he){F=isNaN(F)?1:F,G=isNaN(G)?0:G,J=isNaN(J)?0:J,ee=isNaN(ee)?1:ee,se=isNaN(se)?0:se,he=isNaN(he)?0:he,this.ctx.transform=new l(F,G,J,ee,se,he)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(F,G,J,ee,se,he,ye,_e,Me){var De=this.pdf.getImageProperties(F),ze=1,Ue=1,lt=1,Ae=1;ee!==void 0&&_e!==void 0&&(lt=_e/ee,Ae=Me/se,ze=De.width/ee*_e/ee,Ue=De.height/se*Me/se),he===void 0&&(he=G,ye=J,G=0,J=0),ee!==void 0&&_e===void 0&&(_e=ee,Me=se),ee===void 0&&_e===void 0&&(_e=De.width,Me=De.height);for(var Y,yt=this.ctx.transform.decompose(),tt=Z(yt.rotate.shx),Oe=new l,je=(Oe=(Oe=(Oe=Oe.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale)).applyToRectangle(new a(he-G*lt,ye-J*Ae,ee*ze,se*Ue)),Ge=C.call(this,je),$e=[],ot=0;ot<Ge.length;ot+=1)$e.indexOf(Ge[ot])===-1&&$e.push(Ge[ot]);if(R($e),this.autoPaging)for(var mt=$e[0],bt=$e[$e.length-1],St=mt;St<bt+1;St++){this.pdf.setPage(St);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=St===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=St===1?0:ct+(St-2)*Nt;if(this.ctx.clip_path.length!==0){var lr=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-Ke+Et+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=lr}var Rt=JSON.parse(JSON.stringify(je));Rt=b([Rt],this.posX+this.margin[3],-Ke+Et+this.ctx.prevPageLastElemOffset)[0];var si=(St>mt||St<bt)&&S.call(this);si&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Nt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,tt),si&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",je.x,je.y,je.w,je.h,null,null,tt)};var C=function(F,G,J){var ee=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ee.push(Math.floor((F.y+se)/J)+1);break;case"arc":ee.push(Math.floor((F.y+se-F.radius)/J)+1),ee.push(Math.floor((F.y+se+F.radius)/J)+1);break;case"qct":var he=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ee.push(Math.floor((he.y+se)/J)+1),ee.push(Math.floor((he.y+he.h+se)/J)+1);break;case"bct":var ye=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ee.push(Math.floor((ye.y+se)/J)+1),ee.push(Math.floor((ye.y+ye.h+se)/J)+1);break;case"rect":ee.push(Math.floor((F.y+se)/J)+1),ee.push(Math.floor((F.y+F.h+se)/J)+1)}for(var _e=0;_e<ee.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<ee[_e];)w.call(this);return ee},w=function(){var F=this.fillStyle,G=this.strokeStyle,J=this.font,ee=this.lineCap,se=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=G,this.font=J,this.lineCap=ee,this.lineWidth=se,this.lineJoin=he},b=function(F,G,J){for(var ee=0;ee<F.length;ee++)switch(F[ee].type){case"bct":F[ee].x2+=G,F[ee].y2+=J;case"qct":F[ee].x1+=G,F[ee].y1+=J;case"mt":case"lt":case"arc":default:F[ee].x+=G,F[ee].y+=J}return F},R=function(F){return F.sort(function(G,J){return G-J})},$=function(F,G){for(var J,ee,se=this.fillStyle,he=this.strokeStyle,ye=this.lineCap,_e=this.lineWidth,Me=Math.abs(_e*this.ctx.transform.scaleX),De=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),lt=[],Ae=0;Ae<Ue.length;Ae++)if(Ue[Ae].x!==void 0)for(var Y=C.call(this,Ue[Ae]),yt=0;yt<Y.length;yt+=1)lt.indexOf(Y[yt])===-1&&lt.push(Y[yt]);for(var tt=0;tt<lt.length;tt++)for(;this.pdf.internal.getNumberOfPages()<lt[tt];)w.call(this);if(R(lt),this.autoPaging)for(var Oe=lt[0],je=lt[lt.length-1],Ge=Oe;Ge<je+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=se,this.strokeStyle=he,this.lineCap=ye,this.lineWidth=Me,this.lineJoin=De;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Ge===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Ge===1?0:mt+(Ge-2)*bt;if(this.ctx.clip_path.length!==0){var dt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(J,this.posX+this.margin[3],-St+ot+this.ctx.prevPageLastElemOffset),W.call(this,F,!0),this.path=dt}if(ee=JSON.parse(JSON.stringify(ze)),this.path=b(ee,this.posX+this.margin[3],-St+ot+this.ctx.prevPageLastElemOffset),G===!1||Ge===0){var Et=(Ge>Oe||Ge<je)&&S.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,bt,null).clip().discardPath()),W.call(this,F,G),Et&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}else this.lineWidth=Me,W.call(this,F,G),this.lineWidth=_e;this.path=ze},W=function(F,G){if((F!=="stroke"||G||!P.call(this))&&(F==="stroke"||G||!g.call(this))){for(var J,ee,se=[],he=this.path,ye=0;ye<he.length;ye++){var _e=he[ye];switch(_e.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:_e,deltas:[],abs:[]});break;case"lt":var Me=se.length;if(he[ye-1]&&!isNaN(he[ye-1].x)&&(J=[_e.x-he[ye-1].x,_e.y-he[ye-1].y],Me>0)){for(;Me>=0;Me--)if(se[Me-1].close!==!0&&se[Me-1].begin!==!0){se[Me-1].deltas.push(J),se[Me-1].abs.push(_e);break}}break;case"bct":J=[_e.x1-he[ye-1].x,_e.y1-he[ye-1].y,_e.x2-he[ye-1].x,_e.y2-he[ye-1].y,_e.x-he[ye-1].x,_e.y-he[ye-1].y],se[se.length-1].deltas.push(J);break;case"qct":var De=he[ye-1].x+2/3*(_e.x1-he[ye-1].x),ze=he[ye-1].y+2/3*(_e.y1-he[ye-1].y),Ue=_e.x+2/3*(_e.x1-_e.x),lt=_e.y+2/3*(_e.y1-_e.y),Ae=_e.x,Y=_e.y;J=[De-he[ye-1].x,ze-he[ye-1].y,Ue-he[ye-1].x,lt-he[ye-1].y,Ae-he[ye-1].x,Y-he[ye-1].y],se[se.length-1].deltas.push(J);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(_e)}}ee=G?null:F==="stroke"?"stroke":"fill";for(var yt=!1,tt=0;tt<se.length;tt++)if(se[tt].arc)for(var Oe=se[tt].abs,je=0;je<Oe.length;je++){var Ge=Oe[je];Ge.type==="arc"?E.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,G,!yt):N.call(this,Ge.x,Ge.y),yt=!0}else if(se[tt].close===!0)this.pdf.internal.out("h"),yt=!1;else if(se[tt].begin!==!0){var $e=se[tt].start.x,ot=se[tt].start.y;X.call(this,se[tt].deltas,$e,ot),yt=!0}ee&&O.call(this,ee),G&&U.call(this)}},Q=function(F){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-J;case"top":return F+G-J;case"hanging":return F+G-2*J;case"middle":return F+G/2-J;case"ideographic":return F;case"alphabetic":default:return F}},k=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(G,J){this.colorStops.push([G,J])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(F,G,J,ee,se,he,ye,_e,Me){for(var De=ve.call(this,J,ee,se,he),ze=0;ze<De.length;ze++){var Ue=De[ze];ze===0&&(Me?T.call(this,Ue.x1+F,Ue.y1+G):N.call(this,Ue.x1+F,Ue.y1+G)),ge.call(this,F,G,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}_e?U.call(this):O.call(this,ye)},O=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(F,G){this.pdf.internal.out(t(F)+" "+r(G)+" m")},x=function(F){var G;switch(F.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var J=this.pdf.getTextDimensions(F.text),ee=Q.call(this,F.y),se=k.call(this,ee)-J.h,he=this.ctx.transform.applyToPoint(new o(F.x,ee)),ye=this.ctx.transform.decompose(),_e=new l;_e=(_e=(_e=_e.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Me,De,ze,Ue=this.ctx.transform.applyToRectangle(new a(F.x,ee,J.w,J.h)),lt=_e.applyToRectangle(new a(F.x,se,J.w,J.h)),Ae=C.call(this,lt),Y=[],yt=0;yt<Ae.length;yt+=1)Y.indexOf(Ae[yt])===-1&&Y.push(Ae[yt]);if(R(Y),this.autoPaging)for(var tt=Y[0],Oe=Y[Y.length-1],je=tt;je<Oe+1;je++){this.pdf.setPage(je);var Ge=je===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[2],mt=ot-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],St=bt-this.margin[3],dt=je===1?0:$e+(je-2)*mt;if(this.ctx.clip_path.length!==0){var Et=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Me,this.posX+this.margin[3],-1*dt+Ge),W.call(this,"fill",!0),this.path=Et}var ct=b([JSON.parse(JSON.stringify(lt))],this.posX+this.margin[3],-dt+Ge+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*F.scale),ze=this.lineWidth,this.lineWidth=ze*F.scale);var Nt=this.autoPaging!=="text";if(Nt||ct.y+ct.h<=ot){if(Nt||ct.y>=Ge&&ct.x<=bt){var Ke=Nt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||bt-ct.x)[0],lr=b([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-dt+Ge+this.ctx.prevPageLastElemOffset)[0],Rt=Nt&&(je>tt||je<Oe)&&S.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,mt,null).clip().discardPath()),this.pdf.text(Ke,lr.x,lr.y,{angle:F.angle,align:G,renderingMode:F.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else ct.y<ot&&(this.ctx.prevPageLastElemOffset+=ot-ct.y);F.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ze)}else F.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*F.scale),ze=this.lineWidth,this.lineWidth=ze*F.scale),this.pdf.text(F.text,he.x+this.posX,he.y+this.posY,{angle:F.angle,align:G,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ze)},N=function(F,G,J,ee){J=J||0,ee=ee||0,this.pdf.internal.out(t(F+J)+" "+r(G+ee)+" l")},X=function(F,G,J){return this.pdf.lines(F,G,J,null,null)},ge=function(F,G,J,ee,se,he,ye,_e){this.pdf.internal.out([e(i(J+F)),e(s(ee+G)),e(i(se+F)),e(s(he+G)),e(i(ye+F)),e(s(_e+G)),"c"].join(" "))},ve=function(F,G,J,ee){for(var se=2*Math.PI,he=Math.PI/2;G>J;)G-=se;var ye=Math.abs(J-G);ye<se&&ee&&(ye=se-ye);for(var _e=[],Me=ee?-1:1,De=G;ye>1e-5;){var ze=De+Me*Math.min(ye,he);_e.push(Ie.call(this,F,De,ze)),ye-=Math.abs(ze-De),De=ze}return _e},Ie=function(F,G,J){var ee=(J-G)/2,se=F*Math.cos(ee),he=F*Math.sin(ee),ye=se,_e=-he,Me=ye*ye+_e*_e,De=Me+ye*se+_e*he,ze=4/3*(Math.sqrt(2*Me*De)-De)/(ye*he-_e*se),Ue=ye-ze*_e,lt=_e+ze*ye,Ae=Ue,Y=-lt,yt=ee+G,tt=Math.cos(yt),Oe=Math.sin(yt);return{x1:F*Math.cos(G),y1:F*Math.sin(G),x2:Ue*tt-lt*Oe,y2:Ue*Oe+lt*tt,x3:Ae*tt-Y*Oe,y3:Ae*Oe+Y*tt,x4:F*Math.cos(J),y4:F*Math.sin(J)}},Z=function(F){return 180*F/Math.PI},ue=function(F,G,J,ee,se,he){var ye=F+.5*(J-F),_e=G+.5*(ee-G),Me=se+.5*(J-se),De=he+.5*(ee-he),ze=Math.min(F,se,ye,Me),Ue=Math.max(F,se,ye,Me),lt=Math.min(G,he,_e,De),Ae=Math.max(G,he,_e,De);return new a(ze,lt,Ue-ze,Ae-lt)},le=function(F,G,J,ee,se,he,ye,_e){var Me,De,ze,Ue,lt,Ae,Y,yt,tt,Oe,je,Ge,$e,ot,mt=J-F,bt=ee-G,St=se-J,dt=he-ee,Et=ye-se,ct=_e-he;for(De=0;De<41;De++)tt=(Y=(ze=F+(Me=De/40)*mt)+Me*((lt=J+Me*St)-ze))+Me*(lt+Me*(se+Me*Et-lt)-Y),Oe=(yt=(Ue=G+Me*bt)+Me*((Ae=ee+Me*dt)-Ue))+Me*(Ae+Me*(he+Me*ct-Ae)-yt),De==0?(je=tt,Ge=Oe,$e=tt,ot=Oe):(je=Math.min(je,tt),Ge=Math.min(Ge,Oe),$e=Math.max($e,tt),ot=Math.max(ot,Oe));return new a(Math.round(je),Math.round(Ge),Math.round($e-je),Math.round(ot-Ge))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,G,J=(F=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(ft.API),function(n){var e=function(s){var o,a,l,u,d,p,v,g,P,S;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(S=d%85))/85)-(P=d%85))/85)-(g=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,g+33,P+33,S+33)):a.push(122);return function(C,w){for(var b=w;b>0;b--)C.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,d,p=String,v="length",g=255,P="charCodeAt",S="slice",C="replace";for(s[S](-2),s=s[S](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),l=[],u=0,d=(s+=o="uuuuu"[S](s[v]%5||5))[v];d>u;u+=5)a=52200625*(s[P](u)-33)+614125*(s[P](u+1)-33)+7225*(s[P](u+2)-33)+85*(s[P](u+3)-33)+(s[P](u+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(w,b){for(var R=b;R>0;R--)w.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=G_(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(ft.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,d){var p=new XMLHttpRequest,v=0,g=function(P){var S=P.length,C=[],w=String.fromCharCode;for(v=0;v<S;v+=1)C.push(w(255&P.charCodeAt(v)));return C.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(ft.API),function(n){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):B_(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):B_(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Yt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),v=u.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var v=0;v<u.length;++v){var g=u[v],P=g.src.find(function(S){return S.format==="truetype"});P&&l.addFont(P.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ft.getPageSize=function(o,a,l){if(Yt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,P=0,S=0;if(v.hasOwnProperty(p))P=v[p][1]/d,S=v[p][0]/d;else try{P=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>P&&(g=S,S=P,P=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",P>S&&(g=S,S=P,P=g)}return{width:S,height:P,unit:a,k:d,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(X_):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ft.API),ft.API.addJS=function(n){return KA=n,this.internal.events.subscribe("postPutResources",function(){Jm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),HA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+KA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jm!==void 0&&HA!==void 0&&this.internal.out("/Names <</JavaScript "+Jm+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=t.internal.newObject();d.push(p);var v=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ft.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),P=p.length,S={width:0,height:0,numcomponents:1},C=4;C<P;C+=2){if(C+=g,e.indexOf(p.charCodeAt(C+1))!==-1){v=256*p.charCodeAt(C+5)+p.charCodeAt(C+6),S={width:256*p.charCodeAt(C+7)+p.charCodeAt(C+8),height:v,numcomponents:p.charCodeAt(C+9)};break}g=256*p.charCodeAt(C+2)+p.charCodeAt(C+3)}return S}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(ft.API);var zc,Ym,QA,JA,YA,oq=function(){var n,e,t;function r(s){var o,a,l,u,d,p,v,g,P,S,C,w,b,R;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),P=(function(){var $,W;for(W=[],$=0;$<4;++$)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(b=0;0<=S?b<S:b>S;0<=S?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(C=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,C.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,g,P){var S,C,w,b,R,$,W,Q,k,E,O,U,T,x,N,X,ge,ve,Ie,Z,ue,le=Math.ceil((u.width-p)/g),Te=Math.ceil((u.height-v)/P),F=u.width==le&&u.height==Te;for(x=o*le,U=F?a:new Uint8Array(x*Te),$=s.length,T=0,C=0;T<Te&&l<$;){switch(s[l++]){case 0:for(b=ge=0;ge<x;b=ge+=1)U[C++]=s[l++];break;case 1:for(b=ve=0;ve<x;b=ve+=1)S=s[l++],R=b<o?0:U[C-o],U[C++]=(S+R)%256;break;case 2:for(b=Ie=0;Ie<x;b=Ie+=1)S=s[l++],w=(b-b%o)/o,N=T&&U[(T-1)*x+w*o+b%o],U[C++]=(N+S)%256;break;case 3:for(b=Z=0;Z<x;b=Z+=1)S=s[l++],w=(b-b%o)/o,R=b<o?0:U[C-o],N=T&&U[(T-1)*x+w*o+b%o],U[C++]=(S+Math.floor((R+N)/2))%256;break;case 4:for(b=ue=0;ue<x;b=ue+=1)S=s[l++],w=(b-b%o)/o,R=b<o?0:U[C-o],T===0?N=X=0:(N=U[(T-1)*x+w*o+b%o],X=w&&U[(T-1)*x+(w-1)*o+b%o]),W=R+N-X,Q=Math.abs(W-R),E=Math.abs(W-N),O=Math.abs(W-X),k=Q<=E&&Q<=O?R:E<=O?N:X,U[C++]=(S+k)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!F){var G=((v+T*P)*u.width+p)*o,J=T*x;for(b=0;b<le;b+=1){for(var ee=0;ee<o;ee+=1)a[G++]=U[J++];G+=(g-1)*o}}T++}}return s=VB(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,d,p,v,g;for(a=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(g=d[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,d,p,v,g,P,S,C,w;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),P=(u=s.data||s).length,p=S||o,d=v=0,l===1)for(;d<P;)g=S?4*o[d/4]:v,C=p[g++],u[d++]=C,u[d++]=C,u[d++]=C,u[d++]=a?p[g++]:255,v=g;else for(;d<P;)g=S?4*o[d/4]:v,u[d++]=p[g++],u[d++]=p[g++],u[d++]=p[g++],u[d++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(pt)==="[object Window]"){try{e=pt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,d,p,v,g;if(this.animation){for(g=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,g.push(o.image=n(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,d,p,v=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var g,P;if(g=a++%u,P=l[g],v.renderFrame(s,g),u>1&&a/u<d)return v.animation._timeout=setTimeout(o,P.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function aq(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,d=[],p=0,v=null,g=0,P=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,P=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],!(1&S)&&(v=null),g=S>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var C=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,$=n[e++],W=$>>6&1,Q=1<<(7&$)+1,k=a,E=l,O=!1;$>>7&&(O=!0,k=e,E=Q,e+=3*Q);var U=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}d.push({x:C,y:w,width:b,height:R,has_local_palette:O,palette_offset:k,palette_size:E,data_offset:U,data_length:e-U,transparent_index:v,interlaced:!!W,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return P},this.frameInfo=function(x){if(x<0||x>=d.length)throw new Error("Frame index out of range.");return d[x]},this.decodeAndBlitFrameBGRA=function(x,N){var X=this.frameInfo(x),ge=X.width*X.height,ve=new Uint8Array(ge);XA(n,X.data_offset,ve,ge);var Ie=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var ue=X.width,le=t-ue,Te=ue,F=4*(X.y*t+X.x),G=4*((X.y+X.height)*t+X.x),J=F,ee=4*le;X.interlaced===!0&&(ee+=4*t*7);for(var se=8,he=0,ye=ve.length;he<ye;++he){var _e=ve[he];if(Te===0&&(Te=ue,(J+=ee)>=G&&(ee=4*le+4*t*(se-1),J=F+(ue+le)*(se<<1),se>>=1)),_e===Z)J+=4;else{var Me=n[Ie+3*_e],De=n[Ie+3*_e+1],ze=n[Ie+3*_e+2];N[J++]=ze,N[J++]=De,N[J++]=Me,N[J++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(x,N){var X=this.frameInfo(x),ge=X.width*X.height,ve=new Uint8Array(ge);XA(n,X.data_offset,ve,ge);var Ie=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var ue=X.width,le=t-ue,Te=ue,F=4*(X.y*t+X.x),G=4*((X.y+X.height)*t+X.x),J=F,ee=4*le;X.interlaced===!0&&(ee+=4*t*7);for(var se=8,he=0,ye=ve.length;he<ye;++he){var _e=ve[he];if(Te===0&&(Te=ue,(J+=ee)>=G&&(ee=4*le+4*t*(se-1),J=F+(ue+le)*(se<<1),se>>=1)),_e===Z)J+=4;else{var Me=n[Ie+3*_e],De=n[Ie+3*_e+1],ze=n[Ie+3*_e+2];N[J++]=Me,N[J++]=De,N[J++]=ze,N[J++]=255}--Te}}}function XA(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,d=0,p=0,v=0,g=n[e++],P=new Int32Array(4096),S=null;;){for(;d<16&&g!==0;)p|=n[e++]<<d,d+=8,g===1?g=n[e++]:--g;if(d<l)break;var C=p&u;if(p>>=l,d-=l,C!==s){if(C===o)break;for(var w=C<a?C:S,b=0,R=w;R>s;)R=P[R]>>8,++b;var $=R;if(v+b+(w!==C?1:0)>r)return void an.log("Warning, gif stream longer than expected.");t[v++]=$;var W=v+=b;for(w!==C&&(t[v++]=$),R=w;b--;)R=P[R],t[--W]=255&R,R>>=8;S!==null&&a<4096&&(P[a++]=S<<8|$,a>=u+1&&l<12&&(++l,u=u<<1|1)),S=C}else a=o+1,u=(1<<(l=i+1))-1,S=null}return v!==r&&an.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ny(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),P=new Array(64),S=[],C=0,w=7,b=new Array(64),R=new Array(64),$=new Array(64),W=new Array(256),Q=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],x=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(F,G){for(var J=0,ee=0,se=new Array,he=1;he<=16;he++){for(var ye=1;ye<=F[he];ye++)se[G[ee]]=[],se[G[ee]][0]=J,se[G[ee]][1]=he,ee++,J++;J*=2}return se}function Ie(F){for(var G=F[0],J=F[1]-1;J>=0;)G&1<<J&&(C|=1<<w),J--,--w<0&&(C==255?(Z(255),Z(0)):Z(C),w=7,C=0)}function Z(F){S.push(F)}function ue(F){Z(F>>8&255),Z(255&F)}function le(F,G,J,ee,se){for(var he,ye=se[0],_e=se[240],Me=function(Oe,je){var Ge,$e,ot,mt,bt,St,dt,Et,ct,Nt,Ke=0;for(ct=0;ct<8;++ct){Ge=Oe[Ke],$e=Oe[Ke+1],ot=Oe[Ke+2],mt=Oe[Ke+3],bt=Oe[Ke+4],St=Oe[Ke+5],dt=Oe[Ke+6];var lr=Ge+(Et=Oe[Ke+7]),Rt=Ge-Et,si=$e+dt,$t=$e-dt,Zt=ot+St,Xi=ot-St,Bt=mt+bt,Is=mt-bt,fn=lr+Bt,oi=lr-Bt,zr=si+Zt,ln=si-Zt;Oe[Ke]=fn+zr,Oe[Ke+4]=fn-zr;var gt=.707106781*(ln+oi);Oe[Ke+2]=oi+gt,Oe[Ke+6]=oi-gt;var Ct=.382683433*((fn=Is+Xi)-(ln=$t+Rt)),Hs=.5411961*fn+Ct,Nn=1.306562965*ln+Ct,xi=.707106781*(zr=Xi+$t),Nr=Rt+xi,ut=Rt-xi;Oe[Ke+5]=ut+Hs,Oe[Ke+3]=ut-Hs,Oe[Ke+1]=Nr+Nn,Oe[Ke+7]=Nr-Nn,Ke+=8}for(Ke=0,ct=0;ct<8;++ct){Ge=Oe[Ke],$e=Oe[Ke+8],ot=Oe[Ke+16],mt=Oe[Ke+24],bt=Oe[Ke+32],St=Oe[Ke+40],dt=Oe[Ke+48];var rn=Ge+(Et=Oe[Ke+56]),Pi=Ge-Et,Jn=$e+dt,pn=$e-dt,kn=ot+St,$r=ot-St,Ni=mt+bt,bs=mt-bt,ki=rn+Ni,kr=rn-Ni,ai=Jn+kn,li=Jn-kn;Oe[Ke]=ki+ai,Oe[Ke+32]=ki-ai;var yr=.707106781*(li+kr);Oe[Ke+16]=kr+yr,Oe[Ke+48]=kr-yr;var nr=.382683433*((ki=bs+$r)-(li=pn+Pi)),Ks=.5411961*ki+nr,Ao=1.306562965*li+nr,Qs=.707106781*(ai=$r+pn),Js=Pi+Qs,To=Pi-Qs;Oe[Ke+40]=To+Ks,Oe[Ke+24]=To-Ks,Oe[Ke+8]=Js+Ao,Oe[Ke+56]=Js-Ao,Ke++}for(ct=0;ct<64;++ct)Nt=Oe[ct]*je[ct],g[ct]=Nt>0?Nt+.5|0:Nt-.5|0;return g}(F,G),De=0;De<64;++De)P[k[De]]=Me[De];var ze=P[0]-J;J=P[0],ze==0?Ie(ee[0]):(Ie(ee[v[he=32767+ze]]),Ie(p[he]));for(var Ue=63;Ue>0&&P[Ue]==0;)Ue--;if(Ue==0)return Ie(ye),J;for(var lt,Ae=1;Ae<=Ue;){for(var Y=Ae;P[Ae]==0&&Ae<=Ue;)++Ae;var yt=Ae-Y;if(yt>=16){lt=yt>>4;for(var tt=1;tt<=lt;++tt)Ie(_e);yt&=15}he=32767+P[Ae],Ie(se[(yt<<4)+v[he]]),Ie(p[he]),Ae++}return Ue!=63&&Ie(ye),J}function Te(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var se=o((J[ee]*G+50)/100);se=Math.min(Math.max(se,1),255),a[k[ee]]=se}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var _e=o((he[ye]*G+50)/100);_e=Math.min(Math.max(_e,1),255),l[k[ye]]=_e}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,ze=0;ze<8;ze++)for(var Ue=0;Ue<8;Ue++)u[De]=1/(a[k[De]]*Me[ze]*Me[Ue]*8),d[De]=1/(l[k[De]]*Me[ze]*Me[Ue]*8),De++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,G){G&&Te(G),S=new Array,C=0,w=7,ue(65496),ue(65504),ue(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),ue(1),ue(1),Z(0),Z(0),function(){ue(65499),ue(132),Z(0);for(var $e=0;$e<64;$e++)Z(a[$e]);Z(1);for(var ot=0;ot<64;ot++)Z(l[ot])}(),function($e,ot){ue(65472),ue(17),Z(8),ue(ot),ue($e),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(F.width,F.height),function(){ue(65476),ue(418),Z(0);for(var $e=0;$e<16;$e++)Z(E[$e+1]);for(var ot=0;ot<=11;ot++)Z(O[ot]);Z(16);for(var mt=0;mt<16;mt++)Z(U[mt+1]);for(var bt=0;bt<=161;bt++)Z(T[bt]);Z(1);for(var St=0;St<16;St++)Z(x[St+1]);for(var dt=0;dt<=11;dt++)Z(N[dt]);Z(17);for(var Et=0;Et<16;Et++)Z(X[Et+1]);for(var ct=0;ct<=161;ct++)Z(ge[ct])}(),ue(65498),ue(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var J=0,ee=0,se=0;C=0,w=7,this.encode.displayName="_encode_";for(var he,ye,_e,Me,De,ze,Ue,lt,Ae,Y=F.data,yt=F.width,tt=F.height,Oe=4*yt,je=0;je<tt;){for(he=0;he<Oe;){for(De=Oe*je+he,Ue=-1,lt=0,Ae=0;Ae<64;Ae++)ze=De+(lt=Ae>>3)*Oe+(Ue=4*(7&Ae)),je+lt>=tt&&(ze-=Oe*(je+1+lt-tt)),he+Ue>=Oe&&(ze-=he+Ue-Oe+4),ye=Y[ze++],_e=Y[ze++],Me=Y[ze++],b[Ae]=(Q[ye]+Q[_e+256>>0]+Q[Me+512>>0]>>16)-128,R[Ae]=(Q[ye+768>>0]+Q[_e+1024>>0]+Q[Me+1280>>0]>>16)-128,$[Ae]=(Q[ye+1280>>0]+Q[_e+1536>>0]+Q[Me+1792>>0]>>16)-128;J=le(b,u,J,e,r),ee=le(R,d,ee,t,i),se=le($,d,se,t,i),he+=32}je+=8}if(w>=0){var Ge=[];Ge[1]=w+1,Ge[0]=(1<<w+1)-1,Ie(Ge)}return ue(65497),new Uint8Array(S)},n=n||50,function(){for(var F=String.fromCharCode,G=0;G<256;G++)W[G]=F(G)}(),e=ve(E,O),t=ve(x,N),r=ve(U,T),i=ve(X,ge),function(){for(var F=1,G=2,J=1;J<=15;J++){for(var ee=F;ee<G;ee++)v[32767+ee]=J,p[32767+ee]=[],p[32767+ee][1]=J,p[32767+ee][0]=ee;for(var se=-(G-1);se<=-F;se++)v[32767+se]=J,p[32767+se]=[],p[32767+se][1]=J,p[32767+se][0]=G-1+se;F<<=1,G<<=1}}(),function(){for(var F=0;F<256;F++)Q[F]=19595*F,Q[F+256>>0]=38470*F,Q[F+512>>0]=7471*F+32768,Q[F+768>>0]=-11059*F,Q[F+1024>>0]=-21709*F,Q[F+1280>>0]=32768*F+8421375,Q[F+1536>>0]=-27439*F,Q[F+1792>>0]=-5329*F}(),Te(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Os(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ZA(n){function e(E){if(!E)throw Error("assert :P")}function t(E,O,U){for(var T=0;4>T;T++)if(E[O+T]!=U.charCodeAt(T))return!0;return!1}function r(E,O,U,T,x){for(var N=0;N<x;N++)E[O+N]=U[T+N]}function i(E,O,U,T){for(var x=0;x<T;x++)E[O+x]=U}function s(E){return new Int32Array(E)}function o(E,O){for(var U=[],T=0;T<E;T++)U.push(new O);return U}function a(E,O){var U=[];return function T(x,N,X){for(var ge=X[N],ve=0;ve<ge&&(x.push(X.length>N+1?[]:new O),!(X.length<N+1));ve++)T(x[ve],N+1,X)}(U,0,E),U}var l=function(){var E=this;function O(c,f){for(var y=1<<f-1>>>0;c&y;)y>>>=1;return y?(c&y-1)+y:c}function U(c,f,y,I,D){e(!(I%y));do c[f+(I-=y)]=D;while(0<I)}function T(c,f,y,I,D){if(e(2328>=D),512>=D)var M=s(512);else if((M=s(D))==null)return 0;return function(V,q,z,H,ne,fe){var pe,ae,Pe=q,Ee=1<<z,re=s(16),oe=s(16);for(e(ne!=0),e(H!=null),e(V!=null),e(0<z),ae=0;ae<ne;++ae){if(15<H[ae])return 0;++re[H[ae]]}if(re[0]==ne)return 0;for(oe[1]=0,pe=1;15>pe;++pe){if(re[pe]>1<<pe)return 0;oe[pe+1]=oe[pe]+re[pe]}for(ae=0;ae<ne;++ae)pe=H[ae],0<H[ae]&&(fe[oe[pe]++]=ae);if(oe[15]==1)return(H=new x).g=0,H.value=fe[0],U(V,Pe,1,Ee,H),Ee;var Se,Ne=-1,xe=Ee-1,Je=0,Be=1,ht=1,He=1<<z;for(ae=0,pe=1,ne=2;pe<=z;++pe,ne<<=1){if(Be+=ht<<=1,0>(ht-=re[pe]))return 0;for(;0<re[pe];--re[pe])(H=new x).g=pe,H.value=fe[ae++],U(V,Pe+Je,ne,He,H),Je=O(Je,pe)}for(pe=z+1,ne=2;15>=pe;++pe,ne<<=1){if(Be+=ht<<=1,0>(ht-=re[pe]))return 0;for(;0<re[pe];--re[pe]){if(H=new x,(Je&xe)!=Ne){for(Pe+=He,Se=1<<(Ne=pe)-z;15>Ne&&!(0>=(Se-=re[Ne]));)++Ne,Se<<=1;Ee+=He=1<<(Se=Ne-z),V[q+(Ne=Je&xe)].g=Se+z,V[q+Ne].value=Pe-q-Ne}H.g=pe-z,H.value=fe[ae++],U(V,Pe+(Je>>z),ne,He,H),Je=O(Je,pe)}}return Be!=2*oe[15]-1?0:Ee}(c,f,y,I,D,M)}function x(){this.value=this.g=0}function N(){this.value=this.g=0}function X(){this.G=o(5,x),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wr,N)}function ge(c,f,y,I){e(c!=null),e(f!=null),e(2147483648>I),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=f,c.pa=y,c.Jd=f,c.Yc=y+I,c.Zc=4<=I?y+I-4+1:y,he(c)}function ve(c,f){for(var y=0;0<f--;)y|=_e(c,128)<<f;return y}function Ie(c,f){var y=ve(c,f);return ye(c)?-y:y}function Z(c,f,y,I){var D,M=0;for(e(c!=null),e(f!=null),e(4294967288>I),c.Sb=I,c.Ra=0,c.u=0,c.h=0,4<I&&(I=4),D=0;D<I;++D)M+=f[y+D]<<8*D;c.Ra=M,c.bb=I,c.oa=f,c.pa=y}function ue(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<Sc-8>>>0,++c.bb,c.u-=8;J(c)&&(c.h=1,c.u=0)}function le(c,f){if(e(0<=f),!c.h&&f<=Tc){var y=G(c)&Ac[f];return c.u+=f,ue(c),y}return c.h=1,c.u=0}function Te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(c){return c.Ra>>>(c.u&Sc-1)>>>0}function J(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>Sc}function ee(c,f){c.u=f,c.h=J(c)}function se(c){c.u>=Sd&&(e(c.u>=Sd),ue(c))}function he(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function ye(c){return ve(c,1)}function _e(c,f){var y=c.Ca;0>c.b&&he(c);var I=c.b,D=y*f>>>8,M=(c.I>>>I>D)+0;for(M?(y-=D,c.I-=D+1<<I>>>0):y=D+1,I=y,D=0;256<=I;)D+=8,I>>=8;return I=7^D+di[I],c.b-=I,c.Ca=(y<<I)-1,M}function Me(c,f,y){c[f+0]=y>>24&255,c[f+1]=y>>16&255,c[f+2]=y>>8&255,c[f+3]=y>>0&255}function De(c,f){return c[f+0]<<0|c[f+1]<<8}function ze(c,f){return De(c,f)|c[f+2]<<16}function Ue(c,f){return De(c,f)|De(c,f+2)<<16}function lt(c,f){var y=1<<f;return e(c!=null),e(0<f),c.X=s(y),c.X==null?0:(c.Mb=32-f,c.Xa=f,1)}function Ae(c,f){e(c!=null),e(f!=null),e(c.Xa==f.Xa),r(f.X,0,c.X,0,1<<f.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function yt(c,f,y,I){e(y!=null),e(I!=null);var D=y[0],M=I[0];return D==0&&(D=(c*M+f/2)/f),M==0&&(M=(f*D+c/2)/c),0>=D||0>=M?0:(y[0]=D,I[0]=M,1)}function tt(c,f){return c+(1<<f)-1>>>f}function Oe(c,f){return((4278255360&c)+(4278255360&f)>>>0&4278255360)+((16711935&c)+(16711935&f)>>>0&16711935)>>>0}function je(c,f){E[f]=function(y,I,D,M,V,q,z){var H;for(H=0;H<V;++H){var ne=E[c](q[z+H-1],D,M+H);q[z+H]=Oe(y[I+H],ne)}}}function Ge(){this.ud=this.hd=this.jd=0}function $e(c,f){return((4278124286&(c^f))>>>1)+(c&f)>>>0}function ot(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function mt(c,f){return ot(c+(c-f+.5>>1))}function bt(c,f,y){return Math.abs(f-y)-Math.abs(c-y)}function St(c,f,y,I,D,M,V){for(I=M[V-1],y=0;y<D;++y)M[V+y]=I=Oe(c[f+y],I)}function dt(c,f,y,I,D){var M;for(M=0;M<y;++M){var V=c[f+M],q=V>>8&255,z=16711935&(z=(z=16711935&V)+((q<<16)+q));I[D+M]=(4278255360&V)+z>>>0}}function Et(c,f){f.jd=c>>0&255,f.hd=c>>8&255,f.ud=c>>16&255}function ct(c,f,y,I,D,M){var V;for(V=0;V<I;++V){var q=f[y+V],z=q>>>8,H=q,ne=255&(ne=(ne=q>>>16)+((c.jd<<24>>24)*(z<<24>>24)>>>5));H=255&(H=(H=H+((c.hd<<24>>24)*(z<<24>>24)>>>5))+((c.ud<<24>>24)*(ne<<24>>24)>>>5)),D[M+V]=(4278255360&q)+(ne<<16)+H}}function Nt(c,f,y,I,D){E[f]=function(M,V,q,z,H,ne,fe,pe,ae){for(z=fe;z<pe;++z)for(fe=0;fe<ae;++fe)H[ne++]=D(q[I(M[V++])])},E[c]=function(M,V,q,z,H,ne,fe){var pe=8>>M.b,ae=M.Ea,Pe=M.K[0],Ee=M.w;if(8>pe)for(M=(1<<M.b)-1,Ee=(1<<pe)-1;V<q;++V){var re,oe=0;for(re=0;re<ae;++re)re&M||(oe=I(z[H++])),ne[fe++]=D(Pe[oe&Ee]),oe>>=pe}else E["VP8LMapColor"+y](z,H,Pe,Ee,ne,fe,V,q,ae)}}function Ke(c,f,y,I,D){for(y=f+y;f<y;){var M=c[f++];I[D++]=M>>16&255,I[D++]=M>>8&255,I[D++]=M>>0&255}}function lr(c,f,y,I,D){for(y=f+y;f<y;){var M=c[f++];I[D++]=M>>16&255,I[D++]=M>>8&255,I[D++]=M>>0&255,I[D++]=M>>24&255}}function Rt(c,f,y,I,D){for(y=f+y;f<y;){var M=(V=c[f++])>>16&240|V>>12&15,V=V>>0&240|V>>28&15;I[D++]=M,I[D++]=V}}function si(c,f,y,I,D){for(y=f+y;f<y;){var M=(V=c[f++])>>16&248|V>>13&7,V=V>>5&224|V>>3&31;I[D++]=M,I[D++]=V}}function $t(c,f,y,I,D){for(y=f+y;f<y;){var M=c[f++];I[D++]=M>>0&255,I[D++]=M>>8&255,I[D++]=M>>16&255}}function Zt(c,f,y,I,D,M){if(M==0)for(y=f+y;f<y;)Me(I,((M=c[f++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),D+=32;else r(I,D,c,f,y)}function Xi(c,f){E[f][0]=E[c+"0"],E[f][1]=E[c+"1"],E[f][2]=E[c+"2"],E[f][3]=E[c+"3"],E[f][4]=E[c+"4"],E[f][5]=E[c+"5"],E[f][6]=E[c+"6"],E[f][7]=E[c+"7"],E[f][8]=E[c+"8"],E[f][9]=E[c+"9"],E[f][10]=E[c+"10"],E[f][11]=E[c+"11"],E[f][12]=E[c+"12"],E[f][13]=E[c+"13"],E[f][14]=E[c+"0"],E[f][15]=E[c+"0"]}function Bt(c){return c==q1||c==z1||c==um||c==$1}function Is(){this.eb=[],this.size=this.A=this.fb=0}function fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Is,this.f.kb=new fn,this.sd=null}function zr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ln(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gt(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Ct(c,f){var y=c.T,I=f.ba.f.RGBA,D=I.eb,M=I.fb+c.ka*I.A,V=cs[f.ba.S],q=c.y,z=c.O,H=c.f,ne=c.N,fe=c.ea,pe=c.W,ae=f.cc,Pe=f.dc,Ee=f.Mc,re=f.Nc,oe=c.ka,Se=c.ka+c.T,Ne=c.U,xe=Ne+1>>1;for(oe==0?V(q,z,null,null,H,ne,fe,pe,H,ne,fe,pe,D,M,null,null,Ne):(V(f.ec,f.fc,q,z,ae,Pe,Ee,re,H,ne,fe,pe,D,M-I.A,D,M,Ne),++y);oe+2<Se;oe+=2)ae=H,Pe=ne,Ee=fe,re=pe,ne+=c.Rc,pe+=c.Rc,M+=2*I.A,V(q,(z+=2*c.fa)-c.fa,q,z,ae,Pe,Ee,re,H,ne,fe,pe,D,M-I.A,D,M,Ne);return z+=c.fa,c.j+Se<c.o?(r(f.ec,f.fc,q,z,Ne),r(f.cc,f.dc,H,ne,xe),r(f.Mc,f.Nc,fe,pe,xe),y--):1&Se||V(q,z,null,null,H,ne,fe,pe,H,ne,fe,pe,D,M+I.A,null,null,Ne),y}function Hs(c,f,y){var I=c.F,D=[c.J];if(I!=null){var M=c.U,V=f.ba.S,q=V==lm||V==um;f=f.ba.f.RGBA;var z=[0],H=c.ka;z[0]=c.T,c.Kb&&(H==0?--z[0]:(--H,D[0]-=c.width),c.j+c.ka+c.T==c.o&&(z[0]=c.o-c.j-H));var ne=f.eb;H=f.fb+H*f.A,c=cn(I,D[0],c.width,M,z,ne,H+(q?0:3),f.A),e(y==z),c&&Bt(V)&&ls(ne,H,q,M,z,f.A)}return 0}function Nn(c){var f=c.ma,y=f.ba.S,I=11>y,D=y==om||y==am||y==lm||y==B1||y==12||Bt(y);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Lo(f.Oa,c,D?11:12))return 0;if(D&&Bt(y)&&ke(),c.da)alert("todo:use_scaling");else{if(I){if(f.Ib=gt,c.Kb){if(y=c.U+1>>1,f.memory=s(c.U+2*y),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+c.U,f.Mc=f.cc,f.Nc=f.dc+y,f.Ib=Ct,ke()}}else alert("todo:EmitYUV");D&&(f.Jb=Hs,I&&ce())}if(I&&!Y5){for(c=0;256>c;++c)Dk[c]=89858*(c-128)+hm>>cm,Mk[c]=-22014*(c-128)+hm,Fk[c]=-45773*(c-128),Ok[c]=113618*(c-128)+hm>>cm;for(c=Ld;c<H1;++c)f=76283*(c-16)+hm>>cm,Vk[c-Ld]=wt(f,255),jk[c-Ld]=wt(f+8>>4,15);Y5=1}return 1}function xi(c){var f=c.ma,y=c.U,I=c.T;return e(!(1&c.ka)),0>=y||0>=I?0:(y=f.Ib(c,f),f.Jb!=null&&f.Jb(c,f,y),f.Dc+=y,1)}function Nr(c){c.ma.memory=null}function ut(c,f,y,I){return le(c,8)!=47?0:(f[0]=le(c,14)+1,y[0]=le(c,14)+1,I[0]=le(c,1),le(c,3)!=0?0:!c.h)}function rn(c,f){if(4>c)return c+1;var y=c-2>>1;return(2+(1&c)<<y)+le(f,y)+1}function Pi(c,f){return 120<f?f-120:1<=(y=((y=wk[f-1])>>4)*c+(8-(15&y)))?y:1;var y}function Jn(c,f,y){var I=G(y),D=c[f+=255&I].g-8;return 0<D&&(ee(y,y.u+8),I=G(y),f+=c[f].value,f+=I&(1<<D)-1),ee(y,y.u+c[f].g),c[f].value}function pn(c,f,y){return y.g+=c.g,y.value+=c.value<<f>>>0,e(8>=y.g),c.g}function kn(c,f,y){var I=c.xc;return e((f=I==0?0:c.vc[c.md*(y>>I)+(f>>I)])<c.Wb),c.Ya[f]}function $r(c,f,y,I){var D=c.ab,M=c.c*f,V=c.C;f=V+f;var q=y,z=I;for(I=c.Ta,y=c.Ua;0<D--;){var H=c.gc[D],ne=V,fe=f,pe=q,ae=z,Pe=(z=I,q=y,H.Ea);switch(e(ne<fe),e(fe<=H.nc),H.hc){case 2:Zp(pe,ae,(fe-ne)*Pe,z,q);break;case 0:var Ee=ne,re=fe,oe=z,Se=q,Ne=(He=H).Ea;Ee==0&&(j1(pe,ae,null,null,1,oe,Se),St(pe,ae+1,0,0,Ne-1,oe,Se+1),ae+=Ne,Se+=Ne,++Ee);for(var xe=1<<He.b,Je=xe-1,Be=tt(Ne,He.b),ht=He.K,He=He.w+(Ee>>He.b)*Be;Ee<re;){var zt=ht,Kt=He,jt=1;for(xd(pe,ae,oe,Se-Ne,1,oe,Se);jt<Ne;){var Lt=(jt&~Je)+xe;Lt>Ne&&(Lt=Ne),(0,Ca[zt[Kt++]>>8&15])(pe,ae+ +jt,oe,Se+jt-Ne,Lt-jt,oe,Se+jt),jt=Lt}ae+=Ne,Se+=Ne,++Ee&Je||(He+=Be)}fe!=H.nc&&r(z,q-Pe,z,q+(fe-ne-1)*Pe,Pe);break;case 1:for(Pe=pe,re=ae,Ne=(pe=H.Ea)-(Se=pe&~(oe=(ae=1<<H.b)-1)),Ee=tt(pe,H.b),xe=H.K,H=H.w+(ne>>H.b)*Ee;ne<fe;){for(Je=xe,Be=H,ht=new Ge,He=re+Se,zt=re+pe;re<He;)Et(Je[Be++],ht),su(ht,Pe,re,ae,z,q),re+=ae,q+=ae;re<zt&&(Et(Je[Be++],ht),su(ht,Pe,re,Ne,z,q),re+=Ne,q+=Ne),++ne&oe||(H+=Ee)}break;case 3:if(pe==z&&ae==q&&0<H.b){for(re=z,pe=Pe=q+(fe-ne)*Pe-(Se=(fe-ne)*tt(H.Ea,H.b)),ae=z,oe=q,Ee=[],Se=(Ne=Se)-1;0<=Se;--Se)Ee[Se]=ae[oe+Se];for(Se=Ne-1;0<=Se;--Se)re[pe+Se]=Ee[Se];ss(H,ne,fe,z,Pe,z,q)}else ss(H,ne,fe,pe,ae,z,q)}q=I,z=y}z!=y&&r(I,y,q,z,M)}function Ni(c,f){var y=c.V,I=c.Ba+c.c*c.C,D=f-c.C;if(e(f<=c.l.o),e(16>=D),0<D){var M=c.l,V=c.Ta,q=c.Ua,z=M.width;if($r(c,D,y,I),D=q=[q],e((y=c.C)<(I=f)),e(M.v<M.va),I>M.o&&(I=M.o),y<M.j){var H=M.j-y;y=M.j,D[0]+=H*z}if(y>=I?y=0:(D[0]+=4*M.v,M.ka=y-M.j,M.U=M.va-M.v,M.T=I-y,y=1),y){if(q=q[0],11>(y=c.ca).S){var ne=y.f.RGBA,fe=(I=y.S,D=M.U,M=M.T,H=ne.eb,ne.A),pe=M;for(ne=ne.fb+c.Ma*ne.A;0<pe--;){var ae=V,Pe=q,Ee=D,re=H,oe=ne;switch(I){case sm:fi(ae,Pe,Ee,re,oe);break;case om:Hr(ae,Pe,Ee,re,oe);break;case q1:Hr(ae,Pe,Ee,re,oe),ls(re,oe,0,Ee,1,0);break;case B5:Oo(ae,Pe,Ee,re,oe);break;case am:Zt(ae,Pe,Ee,re,oe,1);break;case z1:Zt(ae,Pe,Ee,re,oe,1),ls(re,oe,0,Ee,1,0);break;case lm:Zt(ae,Pe,Ee,re,oe,0);break;case um:Zt(ae,Pe,Ee,re,oe,0),ls(re,oe,1,Ee,1,0);break;case B1:La(ae,Pe,Ee,re,oe);break;case $1:La(ae,Pe,Ee,re,oe),un(re,oe,Ee,1,0);break;case q5:Do(ae,Pe,Ee,re,oe);break;default:e(0)}q+=z,ne+=fe}c.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=y.height)}}c.C=f,e(c.C<=c.i)}function bs(c){var f;if(0<c.ua)return 0;for(f=0;f<c.Wb;++f){var y=c.Ya[f].G,I=c.Ya[f].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function ki(c,f,y,I,D,M){if(c.Z!=0){var V=c.qd,q=c.rd;for(e(Ma[c.Z]!=null);f<y;++f)Ma[c.Z](V,q,I,D,I,D,M),V=I,q=D,D+=M;c.qd=V,c.rd=q}}function kr(c,f){var y=c.l.ma,I=y.Z==0||y.Z==1?c.l.j:c.C;if(I=c.C<I?I:c.C,e(f<=c.l.o),f>I){var D=c.l.width,M=y.ca,V=y.tb+D*I,q=c.V,z=c.Ba+c.c*I,H=c.gc;e(c.ab==1),e(H[0].hc==3),em(H[0],I,f,q,z,M,V),ki(y,I,f,M,V,D)}c.C=c.Ma=f}function ai(c,f,y,I,D,M,V){var q=c.$/I,z=c.$%I,H=c.m,ne=c.s,fe=y+c.$,pe=fe;D=y+I*D;var ae=y+I*M,Pe=280+ne.ua,Ee=c.Pb?q:16777216,re=0<ne.ua?ne.Wa:null,oe=ne.wc,Se=fe<ae?kn(ne,z,q):null;e(c.C<M),e(ae<=D);var Ne=!1;e:for(;;){for(;Ne||fe<ae;){var xe=0;if(q>=Ee){var Je=fe-y;e((Ee=c).Pb),Ee.wd=Ee.m,Ee.xd=Je,0<Ee.s.ua&&Ae(Ee.s.Wa,Ee.s.vb),Ee=q+bk}if(z&oe||(Se=kn(ne,z,q)),e(Se!=null),Se.Qb&&(f[fe]=Se.qb,Ne=!0),!Ne)if(se(H),Se.jc){xe=H,Je=f;var Be=fe,ht=Se.pd[G(xe)&wr-1];e(Se.jc),256>ht.g?(ee(xe,xe.u+ht.g),Je[Be]=ht.value,xe=0):(ee(xe,xe.u+ht.g-256),e(256<=ht.value),xe=ht.value),xe==0&&(Ne=!0)}else xe=Jn(Se.G[0],Se.H[0],H);if(H.h)break;if(Ne||256>xe){if(!Ne)if(Se.nd)f[fe]=(Se.qb|xe<<8)>>>0;else{if(se(H),Ne=Jn(Se.G[1],Se.H[1],H),se(H),Je=Jn(Se.G[2],Se.H[2],H),Be=Jn(Se.G[3],Se.H[3],H),H.h)break;f[fe]=(Be<<24|Ne<<16|xe<<8|Je)>>>0}if(Ne=!1,++fe,++z>=I&&(z=0,++q,V!=null&&q<=M&&!(q%16)&&V(c,q),re!=null))for(;pe<fe;)xe=f[pe++],re.X[(506832829*xe&4294967295)>>>re.Mb]=xe}else if(280>xe){if(xe=rn(xe-256,H),Je=Jn(Se.G[4],Se.H[4],H),se(H),Je=Pi(I,Je=rn(Je,H)),H.h)break;if(fe-y<Je||D-fe<xe)break e;for(Be=0;Be<xe;++Be)f[fe+Be]=f[fe+Be-Je];for(fe+=xe,z+=xe;z>=I;)z-=I,++q,V!=null&&q<=M&&!(q%16)&&V(c,q);if(e(fe<=D),z&oe&&(Se=kn(ne,z,q)),re!=null)for(;pe<fe;)xe=f[pe++],re.X[(506832829*xe&4294967295)>>>re.Mb]=xe}else{if(!(xe<Pe))break e;for(Ne=xe-280,e(re!=null);pe<fe;)xe=f[pe++],re.X[(506832829*xe&4294967295)>>>re.Mb]=xe;xe=fe,e(!(Ne>>>(Je=re).Xa)),f[xe]=Je.X[Ne],Ne=!0}Ne||e(H.h==J(H))}if(c.Pb&&H.h&&fe<D)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Ae(c.s.vb,c.s.Wa);else{if(H.h)break e;V!=null&&V(c,q>M?M:q),c.a=0,c.$=fe-y}return 1}return c.a=3,0}function li(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var f=c.Wa;f!=null&&(f.X=null),c.vb=null,e(c!=null)}function yr(){var c=new iu;return c==null?null:(c.a=0,c.xb=W5,Xi("Predictor","VP8LPredictors"),Xi("Predictor","VP8LPredictors_C"),Xi("PredictorAdd","VP8LPredictorsAdd"),Xi("PredictorAdd","VP8LPredictorsAdd_C"),Zp=dt,su=ct,fi=Ke,Hr=lr,La=Rt,Do=si,Oo=$t,E.VP8LMapColor32b=xc,E.VP8LMapColor8b=tm,c)}function nr(c,f,y,I,D){var M=1,V=[c],q=[f],z=I.m,H=I.s,ne=null,fe=0;e:for(;;){if(y)for(;M&&le(z,1);){var pe=V,ae=q,Pe=I,Ee=1,re=Pe.m,oe=Pe.gc[Pe.ab],Se=le(re,2);if(Pe.Oc&1<<Se)M=0;else{switch(Pe.Oc|=1<<Se,oe.hc=Se,oe.Ea=pe[0],oe.nc=ae[0],oe.K=[null],++Pe.ab,e(4>=Pe.ab),Se){case 0:case 1:oe.b=le(re,3)+2,Ee=nr(tt(oe.Ea,oe.b),tt(oe.nc,oe.b),0,Pe,oe.K),oe.K=oe.K[0];break;case 3:var Ne,xe=le(re,8)+1,Je=16<xe?0:4<xe?1:2<xe?2:3;if(pe[0]=tt(oe.Ea,Je),oe.b=Je,Ne=Ee=nr(xe,1,0,Pe,oe.K)){var Be,ht=xe,He=oe,zt=1<<(8>>He.b),Kt=s(zt);if(Kt==null)Ne=0;else{var jt=He.K[0],Lt=He.w;for(Kt[0]=He.K[0][0],Be=1;Be<1*ht;++Be)Kt[Be]=Oe(jt[Lt+Be],Kt[Be-1]);for(;Be<4*zt;++Be)Kt[Be]=0;He.K[0]=null,He.K[0]=Kt,Ne=1}}Ee=Ne;break;case 2:break;default:e(0)}M=Ee}}if(V=V[0],q=q[0],M&&le(z,1)&&!(M=1<=(fe=le(z,4))&&11>=fe)){I.a=3;break e}var on;if(on=M)t:{var tn,xt,Yn,pi=I,Xn=V,mi=q,Qt=fe,Vi=y,ji=pi.m,ur=pi.s,Ir=[null],Qr=1,hs=0,eo=Ik[Qt];n:for(;;){if(Vi&&le(ji,1)){var cr=le(ji,3)+2,jo=tt(Xn,cr),cu=tt(mi,cr),Cc=jo*cu;if(!nr(jo,cu,0,pi,Ir))break n;for(Ir=Ir[0],ur.xc=cr,tn=0;tn<Cc;++tn){var Va=Ir[tn]>>8&65535;Ir[tn]=Va,Va>=Qr&&(Qr=Va+1)}}if(ji.h)break n;for(xt=0;5>xt;++xt){var Cn=z5[xt];!xt&&0<Qt&&(Cn+=1<<Qt),hs<Cn&&(hs=Cn)}var K1=o(Qr*eo,x),eI=Qr,tI=o(eI,X);if(tI==null)var fm=null;else e(65536>=eI),fm=tI;var Dd=s(hs);if(fm==null||Dd==null||K1==null){pi.a=1;break n}var pm=K1;for(tn=Yn=0;tn<Qr;++tn){var Cs=fm[tn],Lc=Cs.G,Dc=Cs.H,nI=0,mm=1,rI=0;for(xt=0;5>xt;++xt){Cn=z5[xt],Lc[xt]=pm,Dc[xt]=Yn,!xt&&0<Qt&&(Cn+=1<<Qt);i:{var gm,Q1=Cn,vm=pi,Od=Dd,qk=pm,zk=Yn,J1=0,ja=vm.m,$k=le(ja,1);if(i(Od,0,0,Q1),$k){var Wk=le(ja,1)+1,Gk=le(ja,1),iI=le(ja,Gk==0?1:8);Od[iI]=1,Wk==2&&(Od[iI=le(ja,8)]=1);var ym=1}else{var sI=s(19),oI=le(ja,4)+4;if(19<oI){vm.a=3;var _m=0;break i}for(gm=0;gm<oI;++gm)sI[_k[gm]]=le(ja,3);var Y1=void 0,Fd=void 0,aI=vm,Hk=sI,wm=Q1,lI=Od,X1=0,Ua=aI.m,uI=8,cI=o(128,x);r:for(;T(cI,0,7,Hk,19);){if(le(Ua,1)){var Kk=2+2*le(Ua,3);if((Y1=2+le(Ua,Kk))>wm)break r}else Y1=wm;for(Fd=0;Fd<wm&&Y1--;){se(Ua);var hI=cI[0+(127&G(Ua))];ee(Ua,Ua.u+hI.g);var Oc=hI.value;if(16>Oc)lI[Fd++]=Oc,Oc!=0&&(uI=Oc);else{var Qk=Oc==16,dI=Oc-16,Jk=vk[dI],fI=le(Ua,gk[dI])+Jk;if(Fd+fI>wm)break r;for(var Yk=Qk?uI:0;0<fI--;)lI[Fd++]=Yk}}X1=1;break r}X1||(aI.a=3),ym=X1}(ym=ym&&!ja.h)&&(J1=T(qk,zk,8,Od,Q1)),ym&&J1!=0?_m=J1:(vm.a=3,_m=0)}if(_m==0)break n;if(mm&&yk[xt]==1&&(mm=pm[Yn].g==0),nI+=pm[Yn].g,Yn+=_m,3>=xt){var Md,Z1=Dd[0];for(Md=1;Md<Cn;++Md)Dd[Md]>Z1&&(Z1=Dd[Md]);rI+=Z1}}if(Cs.nd=mm,Cs.Qb=0,mm&&(Cs.qb=(Lc[3][Dc[3]+0].value<<24|Lc[1][Dc[1]+0].value<<16|Lc[2][Dc[2]+0].value)>>>0,nI==0&&256>Lc[0][Dc[0]+0].value&&(Cs.Qb=1,Cs.qb+=Lc[0][Dc[0]+0].value<<8)),Cs.jc=!Cs.Qb&&6>rI,Cs.jc){var Im,Uo=Cs;for(Im=0;Im<wr;++Im){var Ba=Im,qa=Uo.pd[Ba],bm=Uo.G[0][Uo.H[0]+Ba];256<=bm.value?(qa.g=bm.g+256,qa.value=bm.value):(qa.g=0,qa.value=0,Ba>>=pn(bm,8,qa),Ba>>=pn(Uo.G[1][Uo.H[1]+Ba],16,qa),Ba>>=pn(Uo.G[2][Uo.H[2]+Ba],0,qa),pn(Uo.G[3][Uo.H[3]+Ba],24,qa))}}}ur.vc=Ir,ur.Wb=Qr,ur.Ya=fm,ur.yc=K1,on=1;break t}on=0}if(!(M=on)){I.a=3;break e}if(0<fe){if(H.ua=1<<fe,!lt(H.Wa,fe)){I.a=1,M=0;break e}}else H.ua=0;var ev=I,pI=V,Xk=q,tv=ev.s,nv=tv.xc;if(ev.c=pI,ev.i=Xk,tv.md=tt(pI,nv),tv.wc=nv==0?-1:(1<<nv)-1,y){I.xb=Nk;break e}if((ne=s(V*q))==null){I.a=1,M=0;break e}M=(M=ai(I,ne,0,V,q,q,null))&&!z.h;break e}return M?(D!=null?D[0]=ne:(e(ne==null),e(y)),I.$=0,y||li(H)):li(H),M}function Ks(c,f){var y=c.c*c.i,I=y+f+16*f;return e(c.c<=f),c.V=s(I),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+y+f,1)}function Ao(c,f){var y=c.C,I=f-y,D=c.V,M=c.Ba+c.c*y;for(e(f<=c.l.o);0<I;){var V=16<I?16:I,q=c.l.ma,z=c.l.width,H=z*V,ne=q.ca,fe=q.tb+z*y,pe=c.Ta,ae=c.Ua;$r(c,V,D,M),qn(pe,ae,ne,fe,H),ki(q,y,y+V,ne,fe,z),I-=V,D+=V*c.c,y+=V}e(y==f),c.C=c.Ma=f}function Qs(){this.ub=this.yd=this.td=this.Rb=0}function Js(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function To(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Wl(){this.Yb=function(){var c=[];return function f(y,I,D){for(var M=D[I],V=0;V<M&&(y.push(D.length>I+1?[]:0),!(D.length<I+1));V++)f(y[V],I+1,D)}(c,0,[3,11]),c}()}function Id(){this.jb=s(3),this.Wc=a([4,8],Wl),this.Xc=a([4,17],Wl)}function va(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function So(){this.ld=this.La=this.dd=this.tc=0}function ya(){this.Na=this.la=0}function xo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ri(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gl(){this.uc=this.M=this.Nb=0,this.wa=Array(new So),this.Y=0,this.ya=Array(new Ri),this.aa=0,this.l=new Po}function hc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function dc(){this.cb=this.a=0,this.sc="",this.m=new Te,this.Od=new Qs,this.Kc=new Js,this.ed=new va,this.Qa=new To,this.Ic=this.$c=this.Aa=0,this.D=new Gl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Te),this.ia=0,this.pb=o(4,xo),this.Pa=new Id,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hc),this.Hd=0,this.rb=Array(new ya),this.sb=0,this.wa=Array(new So),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ri),this.L=this.aa=0,this.gd=a([4,2],So),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Po(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fc(){var c=new dc;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Cd||(Cd=Kl)),c}function mn(c,f,y){return c.a==0&&(c.a=f,c.sc=y,c.cb=0),0}function _a(c,f,y){return 3<=y&&c[f+0]==157&&c[f+1]==1&&c[f+2]==42}function Hl(c,f){if(c==null)return 0;if(c.a=0,c.sc="OK",f==null)return mn(c,2,"null VP8Io passed to VP8GetHeaders()");var y=f.data,I=f.w,D=f.ha;if(4>D)return mn(c,7,"Truncated header.");var M=y[I+0]|y[I+1]<<8|y[I+2]<<16,V=c.Od;if(V.Rb=!(1&M),V.td=M>>1&7,V.yd=M>>4&1,V.ub=M>>5,3<V.td)return mn(c,3,"Incorrect keyframe parameters.");if(!V.yd)return mn(c,4,"Frame not displayable.");I+=3,D-=3;var q=c.Kc;if(V.Rb){if(7>D)return mn(c,7,"cannot parse picture header");if(!_a(y,I,D))return mn(c,3,"Bad code word");q.c=16383&(y[I+4]<<8|y[I+3]),q.Td=y[I+4]>>6,q.i=16383&(y[I+6]<<8|y[I+5]),q.Ud=y[I+6]>>6,I+=7,D-=7,c.za=q.c+15>>4,c.Ub=q.i+15>>4,f.width=q.c,f.height=q.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((M=c.Pa).jb,0,255,M.jb.length),e((M=c.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,i(M.Zb,0,0,M.Zb.length),i(M.Lb,0,0,M.Lb)}if(V.ub>D)return mn(c,7,"bad partition length");ge(M=c.m,y,I,V.ub),I+=V.ub,D-=V.ub,V.Rb&&(q.Ld=ye(M),q.Kd=ye(M)),q=c.Qa;var z,H=c.Pa;if(e(M!=null),e(q!=null),q.Cb=ye(M),q.Cb){if(q.Bb=ye(M),ye(M)){for(q.Fb=ye(M),z=0;4>z;++z)q.Zb[z]=ye(M)?Ie(M,7):0;for(z=0;4>z;++z)q.Lb[z]=ye(M)?Ie(M,6):0}if(q.Bb)for(z=0;3>z;++z)H.jb[z]=ye(M)?ve(M,8):255}else q.Bb=0;if(M.Ka)return mn(c,3,"cannot parse segment header");if((q=c.ed).zd=ye(M),q.Tb=ve(M,6),q.wb=ve(M,3),q.Pc=ye(M),q.Pc&&ye(M)){for(H=0;4>H;++H)ye(M)&&(q.vd[H]=Ie(M,6));for(H=0;4>H;++H)ye(M)&&(q.od[H]=Ie(M,6))}if(c.L=q.Tb==0?0:q.zd?1:2,M.Ka)return mn(c,3,"cannot parse filter header");var ne=D;if(D=z=I,I=z+ne,q=ne,c.Xb=(1<<ve(c.m,2))-1,ne<3*(H=c.Xb))y=7;else{for(z+=3*H,q-=3*H,ne=0;ne<H;++ne){var fe=y[D+0]|y[D+1]<<8|y[D+2]<<16;fe>q&&(fe=q),ge(c.Jc[+ne],y,z,fe),z+=fe,q-=fe,D+=3}ge(c.Jc[+H],y,z,q),y=z<I?0:5}if(y!=0)return mn(c,y,"cannot parse partitions");for(y=ve(z=c.m,7),D=ye(z)?Ie(z,4):0,I=ye(z)?Ie(z,4):0,q=ye(z)?Ie(z,4):0,H=ye(z)?Ie(z,4):0,z=ye(z)?Ie(z,4):0,ne=c.Qa,fe=0;4>fe;++fe){if(ne.Cb){var pe=ne.Zb[fe];ne.Fb||(pe+=y)}else{if(0<fe){c.pb[fe]=c.pb[0];continue}pe=y}var ae=c.pb[fe];ae.Sc[0]=W1[wt(pe+D,127)],ae.Sc[1]=G1[wt(pe+0,127)],ae.Eb[0]=2*W1[wt(pe+I,127)],ae.Eb[1]=101581*G1[wt(pe+q,127)]>>16,8>ae.Eb[1]&&(ae.Eb[1]=8),ae.Qc[0]=W1[wt(pe+H,117)],ae.Qc[1]=G1[wt(pe+z,127)],ae.lc=pe+z}if(!V.Rb)return mn(c,4,"Not a key frame.");for(ye(M),V=c.Pa,y=0;4>y;++y){for(D=0;8>D;++D)for(I=0;3>I;++I)for(q=0;11>q;++q)H=_e(M,xk[y][D][I][q])?ve(M,8):Tk[y][D][I][q],V.Wc[y][D].Yb[I][q]=H;for(D=0;17>D;++D)V.Xc[y][D]=V.Wc[y][Pk[D]]}return c.kc=ye(M),c.kc&&(c.Bd=ve(M,8)),c.cb=1}function Kl(c,f,y,I,D,M,V){var q=f[D].Yb[y];for(y=0;16>D;++D){if(!_e(c,q[y+0]))return D;for(;!_e(c,q[y+1]);)if(q=f[++D].Yb[0],y=0,D==16)return 16;var z=f[D+1].Yb;if(_e(c,q[y+2])){var H=c,ne=0;if(_e(H,(pe=q)[(fe=y)+3]))if(_e(H,pe[fe+6])){for(q=0,fe=2*(ne=_e(H,pe[fe+8]))+(pe=_e(H,pe[fe+9+ne])),ne=0,pe=Ek[fe];pe[q];++q)ne+=ne+_e(H,pe[q]);ne+=3+(8<<fe)}else _e(H,pe[fe+7])?(ne=7+2*_e(H,165),ne+=_e(H,145)):ne=5+_e(H,159);else ne=_e(H,pe[fe+4])?3+_e(H,pe[fe+5]):2;q=z[2]}else ne=1,q=z[1];z=V+Ak[D],0>(H=c).b&&he(H);var fe,pe=H.b,ae=(fe=H.Ca>>1)-(H.I>>pe)>>31;--H.b,H.Ca+=ae,H.Ca|=1,H.I-=(fe+1&ae)<<pe,M[z]=((ne^ae)-ae)*I[(0<D)+0]}return 16}function Ql(c){var f=c.rb[c.sb-1];f.la=0,f.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function bd(c,f){if(c==null)return 0;if(f==null)return mn(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!Hl(c,f))return 0;if(e(c.cb),f.ac==null||f.ac(f)){f.ob&&(c.L=0);var y=dm[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=f.v-y>>4,c.zb=f.j-y>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=f.o+15+y>>4,c.Hb=f.va+15+y>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var I=c.ed;for(y=0;4>y;++y){var D;if(c.Qa.Cb){var M=c.Qa.Lb[y];c.Qa.Fb||(M+=I.Tb)}else M=I.Tb;for(D=0;1>=D;++D){var V=c.gd[y][D],q=M;if(I.Pc&&(q+=I.vd[0],D&&(q+=I.od[0])),0<(q=0>q?0:63<q?63:q)){var z=q;0<I.wb&&(z=4<I.wb?z>>2:z>>1)>9-I.wb&&(z=9-I.wb),1>z&&(z=1),V.dd=z,V.tc=2*q+z,V.ld=40<=q?2:15<=q?1:0}else V.tc=0;V.La=D}}}y=0}else mn(c,6,"Frame setup failed"),y=c.a;if(y=y==0){if(y){c.$c=0,0<c.Aa||(c.Ic=Bk);e:{y=c.Ic,I=4*(z=c.za);var H=32*z,ne=z+1,fe=0<c.L?z*(0<c.Aa?2:1):0,pe=(c.Aa==2?2:1)*z;if((V=I+832+(D=3*(16*y+dm[c.L])/2*H)+(M=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=V)y=0;else{if(V>c.Vb){if(c.Vb=0,c.Ec=s(V),c.Fc=0,c.Ec==null){y=mn(c,1,"no memory during frame initialization.");break e}c.Vb=V}V=c.Ec,q=c.Fc,c.Ac=V,c.Bc=q,q+=I,c.Gd=o(H,hc),c.Hd=0,c.rb=o(ne+1,ya),c.sb=1,c.wa=fe?o(fe,So):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=z),e(!0),c.oc=V,c.pc=q,q+=832,c.ya=o(pe,Ri),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=z),c.R=16*z,c.B=8*z,z=(H=dm[c.L])*c.R,H=H/2*c.B,c.sa=V,c.ta=q+z,c.qa=c.sa,c.ra=c.ta+16*y*c.R+H,c.Ha=c.qa,c.Ia=c.ra+8*y*c.B+H,c.$c=0,q+=D,c.mb=M?V:null,c.nb=M?q:null,e(q+M<=c.Fc+c.Vb),Ql(c),i(c.Ac,c.Bc,0,I),y=1}}if(y){if(f.ka=0,f.y=c.sa,f.O=c.ta,f.f=c.qa,f.N=c.ra,f.ea=c.Ha,f.Vd=c.Ia,f.fa=c.R,f.Rc=c.B,f.F=null,f.J=0,!rm){for(y=-255;255>=y;++y)rr[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Mo[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Rd[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)Rc[255+y]=0>y?0:255<y?255:y;rm=1}Pc=Ia,Fo=wa,Pd=ko,Kr=pc,os=Wt,Bn=ci,Nc=xs,nm=Xs,Nd=bc,ou=Zs,au=tu,Da=Ps,lu=nu,kc=ru,uu=eu,Oa=Gr,kd=ts,as=Di,Rs[0]=es,Rs[1]=Ro,Rs[2]=vc,Rs[3]=Ys,Rs[4]=yc,Rs[5]=Wr,Rs[6]=_c,Rs[7]=Yl,Rs[8]=Aa,Rs[9]=Ad,Fa[0]=gc,Fa[1]=mc,Fa[2]=As,Fa[3]=ba,Fa[4]=Rn,Fa[5]=Zi,Fa[6]=Jl,Vo[0]=hi,Vo[1]=Ed,Vo[2]=Ta,Vo[3]=Sa,Vo[4]=Ts,Vo[5]=wc,Vo[6]=en,y=1}else y=0}y&&(y=function(ae,Pe){for(ae.M=0;ae.M<ae.Va;++ae.M){var Ee,re=ae.Jc[ae.M&ae.Xb],oe=ae.m,Se=ae;for(Ee=0;Ee<Se.za;++Ee){var Ne=oe,xe=Se,Je=xe.Ac,Be=xe.Bc+4*Ee,ht=xe.zc,He=xe.ya[xe.aa+Ee];if(xe.Qa.Bb?He.$b=_e(Ne,xe.Pa.jb[0])?2+_e(Ne,xe.Pa.jb[2]):_e(Ne,xe.Pa.jb[1]):He.$b=0,xe.kc&&(He.Ad=_e(Ne,xe.Bd)),He.Za=!_e(Ne,145)+0,He.Za){var zt=He.Ob,Kt=0;for(xe=0;4>xe;++xe){var jt,Lt=ht[0+xe];for(jt=0;4>jt;++jt){Lt=Sk[Je[Be+jt]][Lt];for(var on=$5[_e(Ne,Lt[0])];0<on;)on=$5[2*on+_e(Ne,Lt[on])];Lt=-on,Je[Be+jt]=Lt}r(zt,Kt,Je,Be,4),Kt+=4,ht[0+xe]=Lt}}else Lt=_e(Ne,156)?_e(Ne,128)?1:3:_e(Ne,163)?2:0,He.Ob[0]=Lt,i(Je,Be,Lt,4),i(ht,0,Lt,4);He.Dd=_e(Ne,142)?_e(Ne,114)?_e(Ne,183)?1:3:2:0}if(Se.m.Ka)return mn(ae,7,"Premature end-of-partition0 encountered.");for(;ae.ja<ae.za;++ae.ja){if(Se=re,Ne=(oe=ae).rb[oe.sb-1],Je=oe.rb[oe.sb+oe.ja],Ee=oe.ya[oe.aa+oe.ja],Be=oe.kc?Ee.Ad:0)Ne.la=Je.la=0,Ee.Za||(Ne.Na=Je.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var tn,xt;if(Ne=Je,Je=Se,Be=oe.Pa.Xc,ht=oe.ya[oe.aa+oe.ja],He=oe.pb[ht.$b],xe=ht.ad,zt=0,Kt=oe.rb[oe.sb-1],Lt=jt=0,i(xe,zt,0,384),ht.Za)var Yn=0,pi=Be[3];else{on=s(16);var Xn=Ne.Na+Kt.Na;if(Xn=Cd(Je,Be[1],Xn,He.Eb,0,on,0),Ne.Na=Kt.Na=(0<Xn)+0,1<Xn)Pc(on,0,xe,zt);else{var mi=on[0]+3>>3;for(on=0;256>on;on+=16)xe[zt+on]=mi}Yn=1,pi=Be[0]}var Qt=15&Ne.la,Vi=15&Kt.la;for(on=0;4>on;++on){var ji=1&Vi;for(mi=xt=0;4>mi;++mi)Qt=Qt>>1|(ji=(Xn=Cd(Je,pi,Xn=ji+(1&Qt),He.Sc,Yn,xe,zt))>Yn)<<7,xt=xt<<2|(3<Xn?3:1<Xn?2:xe[zt+0]!=0),zt+=16;Qt>>=4,Vi=Vi>>1|ji<<7,jt=(jt<<8|xt)>>>0}for(pi=Qt,Yn=Vi>>4,tn=0;4>tn;tn+=2){for(xt=0,Qt=Ne.la>>4+tn,Vi=Kt.la>>4+tn,on=0;2>on;++on){for(ji=1&Vi,mi=0;2>mi;++mi)Xn=ji+(1&Qt),Qt=Qt>>1|(ji=0<(Xn=Cd(Je,Be[2],Xn,He.Qc,0,xe,zt)))<<3,xt=xt<<2|(3<Xn?3:1<Xn?2:xe[zt+0]!=0),zt+=16;Qt>>=2,Vi=Vi>>1|ji<<5}Lt|=xt<<4*tn,pi|=Qt<<4<<tn,Yn|=(240&Vi)<<tn}Ne.la=pi,Kt.la=Yn,ht.Hc=jt,ht.Gc=Lt,ht.ia=43690&Lt?0:He.ia,Be=!(jt|Lt)}if(0<oe.L&&(oe.wa[oe.Y+oe.ja]=oe.gd[Ee.$b][Ee.Za],oe.wa[oe.Y+oe.ja].La|=!Be),Se.Ka)return mn(ae,7,"Premature end-of-file encountered.")}if(Ql(ae),oe=Pe,Se=1,Ee=(re=ae).D,Ne=0<re.L&&re.M>=re.zb&&re.M<=re.Va,re.Aa==0)e:{if(Ee.M=re.M,Ee.uc=Ne,_r(re,Ee),Se=1,Ee=(xt=re.D).Nb,Ne=(Lt=dm[re.L])*re.R,Je=Lt/2*re.B,on=16*Ee*re.R,mi=8*Ee*re.B,Be=re.sa,ht=re.ta-Ne+on,He=re.qa,xe=re.ra-Je+mi,zt=re.Ha,Kt=re.Ia-Je+mi,Vi=(Qt=xt.M)==0,jt=Qt>=re.Va-1,re.Aa==2&&_r(re,xt),xt.uc)for(ji=(Xn=re).D.M,e(Xn.D.uc),xt=Xn.yb;xt<Xn.Hb;++xt){Yn=xt,pi=ji;var ur=(Ir=(Cn=Xn).D).Nb;tn=Cn.R;var Ir=Ir.wa[Ir.Y+Yn],Qr=Cn.sa,hs=Cn.ta+16*ur*tn+16*Yn,eo=Ir.dd,cr=Ir.tc;if(cr!=0)if(e(3<=cr),Cn.L==1)0<Yn&&Oa(Qr,hs,tn,cr+4),Ir.La&&as(Qr,hs,tn,cr),0<pi&&uu(Qr,hs,tn,cr+4),Ir.La&&kd(Qr,hs,tn,cr);else{var jo=Cn.B,cu=Cn.qa,Cc=Cn.ra+8*ur*jo+8*Yn,Va=Cn.Ha,Cn=Cn.Ia+8*ur*jo+8*Yn;ur=Ir.ld,0<Yn&&(nm(Qr,hs,tn,cr+4,eo,ur),ou(cu,Cc,Va,Cn,jo,cr+4,eo,ur)),Ir.La&&(Da(Qr,hs,tn,cr,eo,ur),kc(cu,Cc,Va,Cn,jo,cr,eo,ur)),0<pi&&(Nc(Qr,hs,tn,cr+4,eo,ur),Nd(cu,Cc,Va,Cn,jo,cr+4,eo,ur)),Ir.La&&(au(Qr,hs,tn,cr,eo,ur),lu(cu,Cc,Va,Cn,jo,cr,eo,ur))}}if(re.ia&&alert("todo:DitherRow"),oe.put!=null){if(xt=16*Qt,Qt=16*(Qt+1),Vi?(oe.y=re.sa,oe.O=re.ta+on,oe.f=re.qa,oe.N=re.ra+mi,oe.ea=re.Ha,oe.W=re.Ia+mi):(xt-=Lt,oe.y=Be,oe.O=ht,oe.f=He,oe.N=xe,oe.ea=zt,oe.W=Kt),jt||(Qt-=Lt),Qt>oe.o&&(Qt=oe.o),oe.F=null,oe.J=null,re.Fa!=null&&0<re.Fa.length&&xt<Qt&&(oe.J=Fi(re,oe,xt,Qt-xt),oe.F=re.mb,oe.F==null&&oe.F.length==0)){Se=mn(re,3,"Could not decode alpha data.");break e}xt<oe.j&&(Lt=oe.j-xt,xt=oe.j,e(!(1&Lt)),oe.O+=re.R*Lt,oe.N+=re.B*(Lt>>1),oe.W+=re.B*(Lt>>1),oe.F!=null&&(oe.J+=oe.width*Lt)),xt<Qt&&(oe.O+=oe.v,oe.N+=oe.v>>1,oe.W+=oe.v>>1,oe.F!=null&&(oe.J+=oe.v),oe.ka=xt-oe.j,oe.U=oe.va-oe.v,oe.T=Qt-xt,Se=oe.put(oe))}Ee+1!=re.Ic||jt||(r(re.sa,re.ta-Ne,Be,ht+16*re.R,Ne),r(re.qa,re.ra-Je,He,xe+8*re.B,Je),r(re.Ha,re.Ia-Je,zt,Kt+8*re.B,Je))}if(!Se)return mn(ae,6,"Output aborted.")}return 1}(c,f)),f.bc!=null&&f.bc(f),y&=1}return y?(c.cb=0,y):0}function ui(c,f,y,I,D){D=c[f+y+32*I]+(D>>3),c[f+y+32*I]=-256&D?0>D?0:255:D}function No(c,f,y,I,D,M){ui(c,f,0,y,I+D),ui(c,f,1,y,I+M),ui(c,f,2,y,I-M),ui(c,f,3,y,I-D)}function Rr(c){return(20091*c>>16)+c}function Ci(c,f,y,I){var D,M=0,V=s(16);for(D=0;4>D;++D){var q=c[f+0]+c[f+8],z=c[f+0]-c[f+8],H=(35468*c[f+4]>>16)-Rr(c[f+12]),ne=Rr(c[f+4])+(35468*c[f+12]>>16);V[M+0]=q+ne,V[M+1]=z+H,V[M+2]=z-H,V[M+3]=q-ne,M+=4,f++}for(D=M=0;4>D;++D)q=(c=V[M+0]+4)+V[M+8],z=c-V[M+8],H=(35468*V[M+4]>>16)-Rr(V[M+12]),ui(y,I,0,0,q+(ne=Rr(V[M+4])+(35468*V[M+12]>>16))),ui(y,I,1,0,z+H),ui(y,I,2,0,z-H),ui(y,I,3,0,q-ne),M++,I+=32}function ci(c,f,y,I){var D=c[f+0]+4,M=35468*c[f+4]>>16,V=Rr(c[f+4]),q=35468*c[f+1]>>16;No(y,I,0,D+V,c=Rr(c[f+1]),q),No(y,I,1,D+M,c,q),No(y,I,2,D-M,c,q),No(y,I,3,D-V,c,q)}function wa(c,f,y,I,D){Ci(c,f,y,I),D&&Ci(c,f+16,y,I+4)}function ko(c,f,y,I){Fo(c,f+0,y,I,1),Fo(c,f+32,y,I+128,1)}function pc(c,f,y,I){var D;for(c=c[f+0]+4,D=0;4>D;++D)for(f=0;4>f;++f)ui(y,I,f,D,c)}function Wt(c,f,y,I){c[f+0]&&Kr(c,f+0,y,I),c[f+16]&&Kr(c,f+16,y,I+4),c[f+32]&&Kr(c,f+32,y,I+128),c[f+48]&&Kr(c,f+48,y,I+128+4)}function Ia(c,f,y,I){var D,M=s(16);for(D=0;4>D;++D){var V=c[f+0+D]+c[f+12+D],q=c[f+4+D]+c[f+8+D],z=c[f+4+D]-c[f+8+D],H=c[f+0+D]-c[f+12+D];M[0+D]=V+q,M[8+D]=V-q,M[4+D]=H+z,M[12+D]=H-z}for(D=0;4>D;++D)V=(c=M[0+4*D]+3)+M[3+4*D],q=M[1+4*D]+M[2+4*D],z=M[1+4*D]-M[2+4*D],H=c-M[3+4*D],y[I+0]=V+q>>3,y[I+16]=H+z>>3,y[I+32]=V-q>>3,y[I+48]=H-z>>3,I+=64}function Es(c,f,y){var I,D=f-32,M=Mi,V=255-c[D-1];for(I=0;I<y;++I){var q,z=M,H=V+c[f-1];for(q=0;q<y;++q)c[f+q]=z[H+c[D+q]];f+=32}}function Ro(c,f){Es(c,f,4)}function Ed(c,f){Es(c,f,8)}function mc(c,f){Es(c,f,16)}function As(c,f){var y;for(y=0;16>y;++y)r(c,f+32*y,c,f-32,16)}function ba(c,f){var y;for(y=16;0<y;--y)i(c,f,c[f-1],16),f+=32}function Ea(c,f,y){var I;for(I=0;16>I;++I)i(f,y+32*I,c,16)}function gc(c,f){var y,I=16;for(y=0;16>y;++y)I+=c[f-1+32*y]+c[f+y-32];Ea(I>>5,c,f)}function Rn(c,f){var y,I=8;for(y=0;16>y;++y)I+=c[f-1+32*y];Ea(I>>4,c,f)}function Zi(c,f){var y,I=8;for(y=0;16>y;++y)I+=c[f+y-32];Ea(I>>4,c,f)}function Jl(c,f){Ea(128,c,f)}function vt(c,f,y){return c+2*f+y+2>>2}function vc(c,f){var y,I=f-32;for(I=new Uint8Array([vt(c[I-1],c[I+0],c[I+1]),vt(c[I+0],c[I+1],c[I+2]),vt(c[I+1],c[I+2],c[I+3]),vt(c[I+2],c[I+3],c[I+4])]),y=0;4>y;++y)r(c,f+32*y,I,0,I.length)}function Ys(c,f){var y=c[f-1],I=c[f-1+32],D=c[f-1+64],M=c[f-1+96];Me(c,f+0,16843009*vt(c[f-1-32],y,I)),Me(c,f+32,16843009*vt(y,I,D)),Me(c,f+64,16843009*vt(I,D,M)),Me(c,f+96,16843009*vt(D,M,M))}function es(c,f){var y,I=4;for(y=0;4>y;++y)I+=c[f+y-32]+c[f-1+32*y];for(I>>=3,y=0;4>y;++y)i(c,f+32*y,I,4)}function yc(c,f){var y=c[f-1+0],I=c[f-1+32],D=c[f-1+64],M=c[f-1-32],V=c[f+0-32],q=c[f+1-32],z=c[f+2-32],H=c[f+3-32];c[f+0+96]=vt(I,D,c[f-1+96]),c[f+1+96]=c[f+0+64]=vt(y,I,D),c[f+2+96]=c[f+1+64]=c[f+0+32]=vt(M,y,I),c[f+3+96]=c[f+2+64]=c[f+1+32]=c[f+0+0]=vt(V,M,y),c[f+3+64]=c[f+2+32]=c[f+1+0]=vt(q,V,M),c[f+3+32]=c[f+2+0]=vt(z,q,V),c[f+3+0]=vt(H,z,q)}function _c(c,f){var y=c[f+1-32],I=c[f+2-32],D=c[f+3-32],M=c[f+4-32],V=c[f+5-32],q=c[f+6-32],z=c[f+7-32];c[f+0+0]=vt(c[f+0-32],y,I),c[f+1+0]=c[f+0+32]=vt(y,I,D),c[f+2+0]=c[f+1+32]=c[f+0+64]=vt(I,D,M),c[f+3+0]=c[f+2+32]=c[f+1+64]=c[f+0+96]=vt(D,M,V),c[f+3+32]=c[f+2+64]=c[f+1+96]=vt(M,V,q),c[f+3+64]=c[f+2+96]=vt(V,q,z),c[f+3+96]=vt(q,z,z)}function Wr(c,f){var y=c[f-1+0],I=c[f-1+32],D=c[f-1+64],M=c[f-1-32],V=c[f+0-32],q=c[f+1-32],z=c[f+2-32],H=c[f+3-32];c[f+0+0]=c[f+1+64]=M+V+1>>1,c[f+1+0]=c[f+2+64]=V+q+1>>1,c[f+2+0]=c[f+3+64]=q+z+1>>1,c[f+3+0]=z+H+1>>1,c[f+0+96]=vt(D,I,y),c[f+0+64]=vt(I,y,M),c[f+0+32]=c[f+1+96]=vt(y,M,V),c[f+1+32]=c[f+2+96]=vt(M,V,q),c[f+2+32]=c[f+3+96]=vt(V,q,z),c[f+3+32]=vt(q,z,H)}function Yl(c,f){var y=c[f+0-32],I=c[f+1-32],D=c[f+2-32],M=c[f+3-32],V=c[f+4-32],q=c[f+5-32],z=c[f+6-32],H=c[f+7-32];c[f+0+0]=y+I+1>>1,c[f+1+0]=c[f+0+64]=I+D+1>>1,c[f+2+0]=c[f+1+64]=D+M+1>>1,c[f+3+0]=c[f+2+64]=M+V+1>>1,c[f+0+32]=vt(y,I,D),c[f+1+32]=c[f+0+96]=vt(I,D,M),c[f+2+32]=c[f+1+96]=vt(D,M,V),c[f+3+32]=c[f+2+96]=vt(M,V,q),c[f+3+64]=vt(V,q,z),c[f+3+96]=vt(q,z,H)}function Ad(c,f){var y=c[f-1+0],I=c[f-1+32],D=c[f-1+64],M=c[f-1+96];c[f+0+0]=y+I+1>>1,c[f+2+0]=c[f+0+32]=I+D+1>>1,c[f+2+32]=c[f+0+64]=D+M+1>>1,c[f+1+0]=vt(y,I,D),c[f+3+0]=c[f+1+32]=vt(I,D,M),c[f+3+32]=c[f+1+64]=vt(D,M,M),c[f+3+64]=c[f+2+64]=c[f+0+96]=c[f+1+96]=c[f+2+96]=c[f+3+96]=M}function Aa(c,f){var y=c[f-1+0],I=c[f-1+32],D=c[f-1+64],M=c[f-1+96],V=c[f-1-32],q=c[f+0-32],z=c[f+1-32],H=c[f+2-32];c[f+0+0]=c[f+2+32]=y+V+1>>1,c[f+0+32]=c[f+2+64]=I+y+1>>1,c[f+0+64]=c[f+2+96]=D+I+1>>1,c[f+0+96]=M+D+1>>1,c[f+3+0]=vt(q,z,H),c[f+2+0]=vt(V,q,z),c[f+1+0]=c[f+3+32]=vt(y,V,q),c[f+1+32]=c[f+3+64]=vt(I,y,V),c[f+1+64]=c[f+3+96]=vt(D,I,y),c[f+1+96]=vt(M,D,I)}function Ta(c,f){var y;for(y=0;8>y;++y)r(c,f+32*y,c,f-32,8)}function Sa(c,f){var y;for(y=0;8>y;++y)i(c,f,c[f-1],8),f+=32}function Li(c,f,y){var I;for(I=0;8>I;++I)i(f,y+32*I,c,8)}function hi(c,f){var y,I=8;for(y=0;8>y;++y)I+=c[f+y-32]+c[f-1+32*y];Li(I>>4,c,f)}function wc(c,f){var y,I=4;for(y=0;8>y;++y)I+=c[f+y-32];Li(I>>3,c,f)}function Ts(c,f){var y,I=4;for(y=0;8>y;++y)I+=c[f-1+32*y];Li(I>>3,c,f)}function en(c,f){Li(128,c,f)}function xa(c,f,y){var I=c[f-y],D=c[f+0],M=3*(D-I)+U1[1020+c[f-2*y]-c[f+y]],V=im[112+(M+4>>3)];c[f-y]=Mi[255+I+im[112+(M+3>>3)]],c[f+0]=Mi[255+D-V]}function Ic(c,f,y,I){var D=c[f+0],M=c[f+y];return us[255+c[f-2*y]-c[f-y]]>I||us[255+M-D]>I}function Xl(c,f,y,I){return 4*us[255+c[f-y]-c[f+0]]+us[255+c[f-2*y]-c[f+y]]<=I}function Zl(c,f,y,I,D){var M=c[f-3*y],V=c[f-2*y],q=c[f-y],z=c[f+0],H=c[f+y],ne=c[f+2*y],fe=c[f+3*y];return 4*us[255+q-z]+us[255+V-H]>I?0:us[255+c[f-4*y]-M]<=D&&us[255+M-V]<=D&&us[255+V-q]<=D&&us[255+fe-ne]<=D&&us[255+ne-H]<=D&&us[255+H-z]<=D}function eu(c,f,y,I){var D=2*I+1;for(I=0;16>I;++I)Xl(c,f+I,y,D)&&xa(c,f+I,y)}function Gr(c,f,y,I){var D=2*I+1;for(I=0;16>I;++I)Xl(c,f+I*y,1,D)&&xa(c,f+I*y,1)}function ts(c,f,y,I){var D;for(D=3;0<D;--D)eu(c,f+=4*y,y,I)}function Di(c,f,y,I){var D;for(D=3;0<D;--D)Gr(c,f+=4,y,I)}function Ss(c,f,y,I,D,M,V,q){for(M=2*M+1;0<D--;){if(Zl(c,f,y,M,V))if(Ic(c,f,y,q))xa(c,f,y);else{var z=c,H=f,ne=y,fe=z[H-2*ne],pe=z[H-ne],ae=z[H+0],Pe=z[H+ne],Ee=z[H+2*ne],re=27*(Se=U1[1020+3*(ae-pe)+U1[1020+fe-Pe]])+63>>7,oe=18*Se+63>>7,Se=9*Se+63>>7;z[H-3*ne]=Mi[255+z[H-3*ne]+Se],z[H-2*ne]=Mi[255+fe+oe],z[H-ne]=Mi[255+pe+re],z[H+0]=Mi[255+ae-re],z[H+ne]=Mi[255+Pe-oe],z[H+2*ne]=Mi[255+Ee-Se]}f+=I}}function Oi(c,f,y,I,D,M,V,q){for(M=2*M+1;0<D--;){if(Zl(c,f,y,M,V))if(Ic(c,f,y,q))xa(c,f,y);else{var z=c,H=f,ne=y,fe=z[H-ne],pe=z[H+0],ae=z[H+ne],Pe=im[112+((Ee=3*(pe-fe))+4>>3)],Ee=im[112+(Ee+3>>3)],re=Pe+1>>1;z[H-2*ne]=Mi[255+z[H-2*ne]+re],z[H-ne]=Mi[255+fe+Ee],z[H+0]=Mi[255+pe-Pe],z[H+ne]=Mi[255+ae-re]}f+=I}}function xs(c,f,y,I,D,M){Ss(c,f,y,1,16,I,D,M)}function Xs(c,f,y,I,D,M){Ss(c,f,1,y,16,I,D,M)}function tu(c,f,y,I,D,M){var V;for(V=3;0<V;--V)Oi(c,f+=4*y,y,1,16,I,D,M)}function Ps(c,f,y,I,D,M){var V;for(V=3;0<V;--V)Oi(c,f+=4,1,y,16,I,D,M)}function bc(c,f,y,I,D,M,V,q){Ss(c,f,D,1,8,M,V,q),Ss(y,I,D,1,8,M,V,q)}function Zs(c,f,y,I,D,M,V,q){Ss(c,f,1,D,8,M,V,q),Ss(y,I,1,D,8,M,V,q)}function nu(c,f,y,I,D,M,V,q){Oi(c,f+4*D,D,1,8,M,V,q),Oi(y,I+4*D,D,1,8,M,V,q)}function ru(c,f,y,I,D,M,V,q){Oi(c,f+4,1,D,8,M,V,q),Oi(y,I+4,1,D,8,M,V,q)}function ns(){this.ba=new oi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ln,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Pa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ka(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new x}function iu(){this.xb=this.a=0,this.l=new Po,this.ca=new oi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ka,this.ab=0,this.gc=o(4,Na),this.Oc=0}function Co(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Po,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rs(c,f,y,I,D,M,V){for(c=c==null?0:c[f+0],f=0;f<V;++f)D[M+f]=c+y[I+f]&255,c=D[M+f]}function Ra(c,f,y,I,D,M,V){var q;if(c==null)rs(null,null,y,I,D,M,V);else for(q=0;q<V;++q)D[M+q]=c[f+q]+y[I+q]&255}function Ns(c,f,y,I,D,M,V){if(c==null)rs(null,null,y,I,D,M,V);else{var q,z=c[f+0],H=z,ne=z;for(q=0;q<V;++q)H=ne+(z=c[f+q])-H,ne=y[I+q]+(-256&H?0>H?0:255:H)&255,H=z,D[M+q]=ne}}function Fi(c,f,y,I){var D=f.width,M=f.o;if(e(c!=null&&f!=null),0>y||0>=I||y+I>M)return null;if(!c.Cc){if(c.ga==null){var V;if(c.ga=new Co,(V=c.ga==null)||(V=f.width*f.o,e(c.Gb.length==0),c.Gb=s(V),c.Uc=0,c.Gb==null?V=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,V=1),V=!V),!V){V=c.ga;var q=c.Fa,z=c.P,H=c.qc,ne=c.mb,fe=c.nb,pe=z+1,ae=H-1,Pe=V.l;if(e(q!=null&&ne!=null&&f!=null),Ma[0]=null,Ma[1]=rs,Ma[2]=Ra,Ma[3]=Ns,V.ca=ne,V.tb=fe,V.c=f.width,V.i=f.height,e(0<V.c&&0<V.i),1>=H)f=0;else if(V.$a=q[z+0]>>0&3,V.Z=q[z+0]>>2&3,V.Lc=q[z+0]>>4&3,z=q[z+0]>>6&3,0>V.$a||1<V.$a||4<=V.Z||1<V.Lc||z)f=0;else if(Pe.put=xi,Pe.ac=Nn,Pe.bc=Nr,Pe.ma=V,Pe.width=f.width,Pe.height=f.height,Pe.Da=f.Da,Pe.v=f.v,Pe.va=f.va,Pe.j=f.j,Pe.o=f.o,V.$a)e:{e(V.$a==1),f=yr();t:for(;;){if(f==null){f=0;break e}if(e(V!=null),V.mc=f,f.c=V.c,f.i=V.i,f.l=V.l,f.l.ma=V,f.l.width=V.c,f.l.height=V.i,f.a=0,Z(f.m,q,pe,ae),!nr(V.c,V.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&bs(f.s)?(V.ic=1,q=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(q),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(V.ic=0,f=Ks(f,V.c)),!f))break t;f=1;break e}V.mc=null,f=0}else f=ae>=V.c*V.i;V=!f}if(V)return null;c.ga.Lc!=1?c.Ga=0:I=M-y}e(c.ga!=null),e(y+I<=M);e:{if(f=(q=c.ga).c,M=q.l.o,q.$a==0){if(pe=c.rc,ae=c.Vc,Pe=c.Fa,z=c.P+1+y*f,H=c.mb,ne=c.nb+y*f,e(z<=c.P+c.qc),q.Z!=0)for(e(Ma[q.Z]!=null),V=0;V<I;++V)Ma[q.Z](pe,ae,Pe,z,H,ne,f),pe=H,ae=ne,ne+=f,z+=f;else for(V=0;V<I;++V)r(H,ne,Pe,z,f),pe=H,ae=ne,ne+=f,z+=f;c.rc=pe,c.Vc=ae}else{if(e(q.mc!=null),f=y+I,e((V=q.mc)!=null),e(f<=V.i),V.C>=f)f=1;else if(q.ic||ce(),q.ic){q=V.V,pe=V.Ba,ae=V.c;var Ee=V.i,re=(Pe=1,z=V.$/ae,H=V.$%ae,ne=V.m,fe=V.s,V.$),oe=ae*Ee,Se=ae*f,Ne=fe.wc,xe=re<Se?kn(fe,H,z):null;e(re<=oe),e(f<=Ee),e(bs(fe));t:for(;;){for(;!ne.h&&re<Se;){if(H&Ne||(xe=kn(fe,H,z)),e(xe!=null),se(ne),256>(Ee=Jn(xe.G[0],xe.H[0],ne)))q[pe+re]=Ee,++re,++H>=ae&&(H=0,++z<=f&&!(z%16)&&kr(V,z));else{if(!(280>Ee)){Pe=0;break t}Ee=rn(Ee-256,ne);var Je,Be=Jn(xe.G[4],xe.H[4],ne);if(se(ne),!(re>=(Be=Pi(ae,Be=rn(Be,ne)))&&oe-re>=Ee)){Pe=0;break t}for(Je=0;Je<Ee;++Je)q[pe+re+Je]=q[pe+re+Je-Be];for(re+=Ee,H+=Ee;H>=ae;)H-=ae,++z<=f&&!(z%16)&&kr(V,z);re<Se&&H&Ne&&(xe=kn(fe,H,z))}e(ne.h==J(ne))}kr(V,z>f?f:z);break t}!Pe||ne.h&&re<oe?(Pe=0,V.a=ne.h?5:3):V.$=re,f=Pe}else f=ai(V,V.V,V.Ba,V.c,V.i,f,Ao);if(!f){I=0;break e}}y+I>=M&&(c.Cc=1),I=1}if(!I)return null;if(c.Cc&&((I=c.ga)!=null&&(I.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+y*D}function m(c,f,y,I,D,M){for(;0<D--;){var V,q=c,z=f+(y?1:0),H=c,ne=f+(y?0:3);for(V=0;V<I;++V){var fe=H[ne+4*V];fe!=255&&(fe*=32897,q[z+4*V+0]=q[z+4*V+0]*fe>>23,q[z+4*V+1]=q[z+4*V+1]*fe>>23,q[z+4*V+2]=q[z+4*V+2]*fe>>23)}f+=M}}function L(c,f,y,I,D){for(;0<I--;){var M;for(M=0;M<y;++M){var V=c[f+2*M+0],q=15&(H=c[f+2*M+1]),z=4369*q,H=(240&H|H>>4)*z>>16;c[f+2*M+0]=(240&V|V>>4)*z>>16&240|(15&V|V<<4)*z>>16>>4&15,c[f+2*M+1]=240&H|q}f+=D}}function K(c,f,y,I,D,M,V,q){var z,H,ne=255;for(H=0;H<D;++H){for(z=0;z<I;++z){var fe=c[f+z];M[V+4*z]=fe,ne&=fe}f+=y,V+=q}return ne!=255}function te(c,f,y,I,D){var M;for(M=0;M<D;++M)y[I+M]=c[f+M]>>8}function ce(){ls=m,un=L,cn=K,qn=te}function we(c,f,y){E[c]=function(I,D,M,V,q,z,H,ne,fe,pe,ae,Pe,Ee,re,oe,Se,Ne){var xe,Je=Ne-1>>1,Be=q[z+0]|H[ne+0]<<16,ht=fe[pe+0]|ae[Pe+0]<<16;e(I!=null);var He=3*Be+ht+131074>>2;for(f(I[D+0],255&He,He>>16,Ee,re),M!=null&&(He=3*ht+Be+131074>>2,f(M[V+0],255&He,He>>16,oe,Se)),xe=1;xe<=Je;++xe){var zt=q[z+xe]|H[ne+xe]<<16,Kt=fe[pe+xe]|ae[Pe+xe]<<16,jt=Be+zt+ht+Kt+524296,Lt=jt+2*(zt+ht)>>3;He=Lt+Be>>1,Be=(jt=jt+2*(Be+Kt)>>3)+zt>>1,f(I[D+2*xe-1],255&He,He>>16,Ee,re+(2*xe-1)*y),f(I[D+2*xe-0],255&Be,Be>>16,Ee,re+(2*xe-0)*y),M!=null&&(He=jt+ht>>1,Be=Lt+Kt>>1,f(M[V+2*xe-1],255&He,He>>16,oe,Se+(2*xe-1)*y),f(M[V+2*xe+0],255&Be,Be>>16,oe,Se+(2*xe+0)*y)),Be=zt,ht=Kt}1&Ne||(He=3*Be+ht+131074>>2,f(I[D+Ne-1],255&He,He>>16,Ee,re+(Ne-1)*y),M!=null&&(He=3*ht+Be+131074>>2,f(M[V+Ne-1],255&He,He>>16,oe,Se+(Ne-1)*y)))}}function ke(){cs[sm]=kk,cs[om]=G5,cs[B5]=Rk,cs[am]=H5,cs[lm]=K5,cs[B1]=Q5,cs[q5]=Ck,cs[q1]=G5,cs[z1]=H5,cs[um]=K5,cs[$1]=Q5}function Qe(c){return c&~Lk?0>c?0:255:c>>J5}function nt(c,f){return Qe((19077*c>>8)+(26149*f>>8)-14234)}function h(c,f,y){return Qe((19077*c>>8)-(6419*f>>8)-(13320*y>>8)+8708)}function _(c,f){return Qe((19077*c>>8)+(33050*f>>8)-17685)}function A(c,f,y,I,D){I[D+0]=nt(c,y),I[D+1]=h(c,f,y),I[D+2]=_(c,f)}function B(c,f,y,I,D){I[D+0]=_(c,f),I[D+1]=h(c,f,y),I[D+2]=nt(c,y)}function ie(c,f,y,I,D){var M=h(c,f,y);f=M<<3&224|_(c,f)>>3,I[D+0]=248&nt(c,y)|M>>5,I[D+1]=f}function de(c,f,y,I,D){var M=240&_(c,f)|15;I[D+0]=240&nt(c,y)|h(c,f,y)>>4,I[D+1]=M}function Le(c,f,y,I,D){I[D+0]=255,A(c,f,y,I,D+1)}function _t(c,f,y,I,D){B(c,f,y,I,D),I[D+3]=255}function Ht(c,f,y,I,D){A(c,f,y,I,D),I[D+3]=255}function wt(c,f){return 0>c?0:c>f?f:c}function sn(c,f,y){E[c]=function(I,D,M,V,q,z,H,ne,fe){for(var pe=ne+(-2&fe)*y;ne!=pe;)f(I[D+0],M[V+0],q[z+0],H,ne),f(I[D+1],M[V+0],q[z+0],H,ne+y),D+=2,++V,++z,ne+=2*y;1&fe&&f(I[D+0],M[V+0],q[z+0],H,ne)}}function Un(c,f,y){return y==0?c==0?f==0?6:5:f==0?4:0:y}function is(c,f,y,I,D){switch(c>>>30){case 3:Fo(f,y,I,D,0);break;case 2:Bn(f,y,I,D);break;case 1:Kr(f,y,I,D)}}function _r(c,f){var y,I,D=f.M,M=f.Nb,V=c.oc,q=c.pc+40,z=c.oc,H=c.pc+584,ne=c.oc,fe=c.pc+600;for(y=0;16>y;++y)V[q+32*y-1]=129;for(y=0;8>y;++y)z[H+32*y-1]=129,ne[fe+32*y-1]=129;for(0<D?V[q-1-32]=z[H-1-32]=ne[fe-1-32]=129:(i(V,q-32-1,127,21),i(z,H-32-1,127,9),i(ne,fe-32-1,127,9)),I=0;I<c.za;++I){var pe=f.ya[f.aa+I];if(0<I){for(y=-1;16>y;++y)r(V,q+32*y-4,V,q+32*y+12,4);for(y=-1;8>y;++y)r(z,H+32*y-4,z,H+32*y+4,4),r(ne,fe+32*y-4,ne,fe+32*y+4,4)}var ae=c.Gd,Pe=c.Hd+I,Ee=pe.ad,re=pe.Hc;if(0<D&&(r(V,q-32,ae[Pe].y,0,16),r(z,H-32,ae[Pe].f,0,8),r(ne,fe-32,ae[Pe].ea,0,8)),pe.Za){var oe=V,Se=q-32+16;for(0<D&&(I>=c.za-1?i(oe,Se,ae[Pe].y[15],4):r(oe,Se,ae[Pe+1].y,0,4)),y=0;4>y;y++)oe[Se+128+y]=oe[Se+256+y]=oe[Se+384+y]=oe[Se+0+y];for(y=0;16>y;++y,re<<=2)oe=V,Se=q+X5[y],Rs[pe.Ob[y]](oe,Se),is(re,Ee,16*+y,oe,Se)}else if(oe=Un(I,D,pe.Ob[0]),Fa[oe](V,q),re!=0)for(y=0;16>y;++y,re<<=2)is(re,Ee,16*+y,V,q+X5[y]);for(y=pe.Gc,oe=Un(I,D,pe.Dd),Vo[oe](z,H),Vo[oe](ne,fe),re=Ee,oe=z,Se=H,255&(pe=y>>0)&&(170&pe?Pd(re,256,oe,Se):os(re,256,oe,Se)),pe=ne,re=fe,255&(y>>=8)&&(170&y?Pd(Ee,320,pe,re):os(Ee,320,pe,re)),D<c.Ub-1&&(r(ae[Pe].y,0,V,q+480,16),r(ae[Pe].f,0,z,H+224,8),r(ae[Pe].ea,0,ne,fe+224,8)),y=8*M*c.B,ae=c.sa,Pe=c.ta+16*I+16*M*c.R,Ee=c.qa,pe=c.ra+8*I+y,re=c.Ha,oe=c.Ia+8*I+y,y=0;16>y;++y)r(ae,Pe+y*c.R,V,q+32*y,16);for(y=0;8>y;++y)r(Ee,pe+y*c.B,z,H+32*y,8),r(re,oe+y*c.B,ne,fe+32*y,8)}}function ks(c,f,y,I,D,M,V,q,z){var H=[0],ne=[0],fe=0,pe=z!=null?z.kd:0,ae=z??new Pa;if(c==null||12>y)return 7;ae.data=c,ae.w=f,ae.ha=y,f=[f],y=[y],ae.gb=[ae.gb];e:{var Pe=f,Ee=y,re=ae.gb;if(e(c!=null),e(Ee!=null),e(re!=null),re[0]=0,12<=Ee[0]&&!t(c,Pe[0],"RIFF")){if(t(c,Pe[0]+8,"WEBP")){re=3;break e}var oe=Ue(c,Pe[0]+4);if(12>oe||4294967286<oe){re=3;break e}if(pe&&oe>Ee[0]-8){re=7;break e}re[0]=oe,Pe[0]+=12,Ee[0]-=12}re=0}if(re!=0)return re;for(oe=0<ae.gb[0],y=y[0];;){e:{var Se=c;Ee=f,re=y;var Ne=H,xe=ne,Je=Pe=[0];if((He=fe=[fe])[0]=0,8>re[0])re=7;else{if(!t(Se,Ee[0],"VP8X")){if(Ue(Se,Ee[0]+4)!=10){re=3;break e}if(18>re[0]){re=7;break e}var Be=Ue(Se,Ee[0]+8),ht=1+ze(Se,Ee[0]+12);if(2147483648<=ht*(Se=1+ze(Se,Ee[0]+15))){re=3;break e}Je!=null&&(Je[0]=Be),Ne!=null&&(Ne[0]=ht),xe!=null&&(xe[0]=Se),Ee[0]+=18,re[0]-=18,He[0]=1}re=0}}if(fe=fe[0],Pe=Pe[0],re!=0)return re;if(Ee=!!(2&Pe),!oe&&fe)return 3;if(M!=null&&(M[0]=!!(16&Pe)),V!=null&&(V[0]=Ee),q!=null&&(q[0]=0),V=H[0],Pe=ne[0],fe&&Ee&&z==null){re=0;break}if(4>y){re=7;break}if(oe&&fe||!oe&&!fe&&!t(c,f[0],"ALPH")){y=[y],ae.na=[ae.na],ae.P=[ae.P],ae.Sa=[ae.Sa];e:{Be=c,re=f,oe=y;var He=ae.gb;Ne=ae.na,xe=ae.P,Je=ae.Sa,ht=22,e(Be!=null),e(oe!=null),Se=re[0];var zt=oe[0];for(e(Ne!=null),e(Je!=null),Ne[0]=null,xe[0]=null,Je[0]=0;;){if(re[0]=Se,oe[0]=zt,8>zt){re=7;break e}var Kt=Ue(Be,Se+4);if(4294967286<Kt){re=3;break e}var jt=8+Kt+1&-2;if(ht+=jt,0<He&&ht>He){re=3;break e}if(!t(Be,Se,"VP8 ")||!t(Be,Se,"VP8L")){re=0;break e}if(zt[0]<jt){re=7;break e}t(Be,Se,"ALPH")||(Ne[0]=Be,xe[0]=Se+8,Je[0]=Kt),Se+=jt,zt-=jt}}if(y=y[0],ae.na=ae.na[0],ae.P=ae.P[0],ae.Sa=ae.Sa[0],re!=0)break}y=[y],ae.Ja=[ae.Ja],ae.xa=[ae.xa];e:if(He=c,re=f,oe=y,Ne=ae.gb[0],xe=ae.Ja,Je=ae.xa,Be=re[0],Se=!t(He,Be,"VP8 "),ht=!t(He,Be,"VP8L"),e(He!=null),e(oe!=null),e(xe!=null),e(Je!=null),8>oe[0])re=7;else{if(Se||ht){if(He=Ue(He,Be+4),12<=Ne&&He>Ne-12){re=3;break e}if(pe&&He>oe[0]-8){re=7;break e}xe[0]=He,re[0]+=8,oe[0]-=8,Je[0]=ht}else Je[0]=5<=oe[0]&&He[Be+0]==47&&!(He[Be+4]>>5),xe[0]=oe[0];re=0}if(y=y[0],ae.Ja=ae.Ja[0],ae.xa=ae.xa[0],f=f[0],re!=0)break;if(4294967286<ae.Ja)return 3;if(q==null||Ee||(q[0]=ae.xa?2:1),V=[V],Pe=[Pe],ae.xa){if(5>y){re=7;break}q=V,pe=Pe,Ee=M,c==null||5>y?c=0:5<=y&&c[f+0]==47&&!(c[f+4]>>5)?(oe=[0],He=[0],Ne=[0],Z(xe=new F,c,f,y),ut(xe,oe,He,Ne)?(q!=null&&(q[0]=oe[0]),pe!=null&&(pe[0]=He[0]),Ee!=null&&(Ee[0]=Ne[0]),c=1):c=0):c=0}else{if(10>y){re=7;break}q=Pe,c==null||10>y||!_a(c,f+3,y-3)?c=0:(pe=c[f+0]|c[f+1]<<8|c[f+2]<<16,Ee=16383&(c[f+7]<<8|c[f+6]),c=16383&(c[f+9]<<8|c[f+8]),1&pe||3<(pe>>1&7)||!(pe>>4&1)||pe>>5>=ae.Ja||!Ee||!c?c=0:(V&&(V[0]=Ee),q&&(q[0]=c),c=1))}if(!c||(V=V[0],Pe=Pe[0],fe&&(H[0]!=V||ne[0]!=Pe)))return 3;z!=null&&(z[0]=ae,z.offset=f-z.w,e(4294967286>f-z.w),e(z.offset==z.ha-y));break}return re==0||re==7&&fe&&z==null?(M!=null&&(M[0]|=ae.na!=null&&0<ae.na.length),I!=null&&(I[0]=V),D!=null&&(D[0]=Pe),0):re}function Lo(c,f,y){var I=f.width,D=f.height,M=0,V=0,q=I,z=D;if(f.Da=c!=null&&0<c.Da,f.Da&&(q=c.cd,z=c.bd,M=c.v,V=c.j,11>y||(M&=-2,V&=-2),0>M||0>V||0>=q||0>=z||M+q>I||V+z>D))return 0;if(f.v=M,f.j=V,f.va=M+q,f.o=V+z,f.U=q,f.T=z,f.da=c!=null&&0<c.da,f.da){if(!yt(q,z,y=[c.ib],M=[c.hb]))return 0;f.ib=y[0],f.hb=M[0]}return f.ob=c!=null&&c.ob,f.Kb=c==null||!c.Sd,f.da&&(f.ob=f.ib<3*I/4&&f.hb<3*D/4,f.Kb=0),1}function Td(c){if(c==null)return 2;if(11>c.S){var f=c.f.RGBA;f.fb+=(c.height-1)*f.A,f.A=-f.A}else f=c.f.kb,c=c.height,f.O+=(c-1)*f.fa,f.fa=-f.fa,f.N+=(c-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(c-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(c-1)*f.lb,f.lb=-f.lb);return 0}function Ec(c,f,y,I){if(I==null||0>=c||0>=f)return 2;if(y!=null){if(y.Da){var D=y.cd,M=y.bd,V=-2&y.v,q=-2&y.j;if(0>V||0>q||0>=D||0>=M||V+D>c||q+M>f)return 2;c=D,f=M}if(y.da){if(!yt(c,f,D=[y.ib],M=[y.hb]))return 2;c=D[0],f=M[0]}}I.width=c,I.height=f;e:{var z=I.width,H=I.height;if(c=I.S,0>=z||0>=H||!(c>=sm&&13>c))c=2;else{if(0>=I.Rd&&I.sd==null){V=M=D=f=0;var ne=(q=z*Z5[c])*H;if(11>c||(M=(H+1)/2*(f=(z+1)/2),c==12&&(V=(D=z)*H)),(H=s(ne+2*M+V))==null){c=1;break e}I.sd=H,11>c?((z=I.f.RGBA).eb=H,z.fb=0,z.A=q,z.size=ne):((z=I.f.kb).y=H,z.O=0,z.fa=q,z.Fd=ne,z.f=H,z.N=0+ne,z.Ab=f,z.Cd=M,z.ea=H,z.W=0+ne+M,z.Db=f,z.Ed=M,c==12&&(z.F=H,z.J=0+ne+2*M),z.Tc=V,z.lb=D)}if(f=1,D=I.S,M=I.width,V=I.height,D>=sm&&13>D)if(11>D)c=I.f.RGBA,f&=(q=Math.abs(c.A))*(V-1)+M<=c.size,f&=q>=M*Z5[D],f&=c.eb!=null;else{c=I.f.kb,q=(M+1)/2,ne=(V+1)/2,z=Math.abs(c.fa),H=Math.abs(c.Ab);var fe=Math.abs(c.Db),pe=Math.abs(c.lb),ae=pe*(V-1)+M;f&=z*(V-1)+M<=c.Fd,f&=H*(ne-1)+q<=c.Cd,f=(f&=fe*(ne-1)+q<=c.Ed)&z>=M&H>=q&fe>=q,f&=c.y!=null,f&=c.f!=null,f&=c.ea!=null,D==12&&(f&=pe>=M,f&=ae<=c.Tc,f&=c.F!=null)}else f=0;c=f?0:2}}return c!=0||y!=null&&y.fd&&(c=Td(I)),c}var wr=64,Ac=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Tc=24,Sc=32,Sd=8,di=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];je("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(c){return c},E.Predictor2=function(c,f,y){return f[y+0]},E.Predictor3=function(c,f,y){return f[y+1]},E.Predictor4=function(c,f,y){return f[y-1]},E.Predictor5=function(c,f,y){return $e($e(c,f[y+1]),f[y+0])},E.Predictor6=function(c,f,y){return $e(c,f[y-1])},E.Predictor7=function(c,f,y){return $e(c,f[y+0])},E.Predictor8=function(c,f,y){return $e(f[y-1],f[y+0])},E.Predictor9=function(c,f,y){return $e(f[y+0],f[y+1])},E.Predictor10=function(c,f,y){return $e($e(c,f[y-1]),$e(f[y+0],f[y+1]))},E.Predictor11=function(c,f,y){var I=f[y+0];return 0>=bt(I>>24&255,c>>24&255,(f=f[y-1])>>24&255)+bt(I>>16&255,c>>16&255,f>>16&255)+bt(I>>8&255,c>>8&255,f>>8&255)+bt(255&I,255&c,255&f)?I:c},E.Predictor12=function(c,f,y){var I=f[y+0];return(ot((c>>24&255)+(I>>24&255)-((f=f[y-1])>>24&255))<<24|ot((c>>16&255)+(I>>16&255)-(f>>16&255))<<16|ot((c>>8&255)+(I>>8&255)-(f>>8&255))<<8|ot((255&c)+(255&I)-(255&f)))>>>0},E.Predictor13=function(c,f,y){var I=f[y-1];return(mt((c=$e(c,f[y+0]))>>24&255,I>>24&255)<<24|mt(c>>16&255,I>>16&255)<<16|mt(c>>8&255,I>>8&255)<<8|mt(c>>0&255,I>>0&255))>>>0};var j1=E.PredictorAdd0;E.PredictorAdd1=St,je("Predictor2","PredictorAdd2"),je("Predictor3","PredictorAdd3"),je("Predictor4","PredictorAdd4"),je("Predictor5","PredictorAdd5"),je("Predictor6","PredictorAdd6"),je("Predictor7","PredictorAdd7"),je("Predictor8","PredictorAdd8"),je("Predictor9","PredictorAdd9"),je("Predictor10","PredictorAdd10"),je("Predictor11","PredictorAdd11"),je("Predictor12","PredictorAdd12"),je("Predictor13","PredictorAdd13");var xd=E.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Zp,ss=E.ColorIndexInverseTransform,xc=E.MapARGB,em=E.VP8LColorIndexInverseTransformAlpha,tm=E.MapAlpha,Ca=E.VP8LPredictorsAdd=[];Ca.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var su,fi,Hr,La,Do,Oo,Pc,Fo,Bn,Pd,Kr,os,Nc,nm,Nd,ou,au,Da,lu,kc,uu,Oa,kd,as,ls,un,cn,qn,rr=s(511),Mo=s(2041),Rd=s(225),Rc=s(767),rm=0,U1=Mo,im=Rd,Mi=Rc,us=rr,sm=0,om=1,B5=2,am=3,lm=4,B1=5,q5=6,q1=7,z1=8,um=9,$1=10,gk=[2,3,7],vk=[3,3,11],z5=[280,256,256,256,40],yk=[0,1,1,1,0],_k=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wk=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ik=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bk=8,W1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],G1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Cd=null,Ek=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ak=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Tk=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Sk=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Pk=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fa=[],Rs=[],Vo=[],Nk=1,W5=2,Ma=[],cs=[];we("UpsampleRgbLinePair",A,3),we("UpsampleBgrLinePair",B,3),we("UpsampleRgbaLinePair",Ht,4),we("UpsampleBgraLinePair",_t,4),we("UpsampleArgbLinePair",Le,4),we("UpsampleRgba4444LinePair",de,2),we("UpsampleRgb565LinePair",ie,2);var kk=E.UpsampleRgbLinePair,Rk=E.UpsampleBgrLinePair,G5=E.UpsampleRgbaLinePair,H5=E.UpsampleBgraLinePair,K5=E.UpsampleArgbLinePair,Q5=E.UpsampleRgba4444LinePair,Ck=E.UpsampleRgb565LinePair,cm=16,hm=1<<cm-1,Ld=-227,H1=482,J5=6,Lk=(256<<J5)-1,Y5=0,Dk=s(256),Ok=s(256),Fk=s(256),Mk=s(256),Vk=s(H1-Ld),jk=s(H1-Ld);sn("YuvToRgbRow",A,3),sn("YuvToBgrRow",B,3),sn("YuvToRgbaRow",Ht,4),sn("YuvToBgraRow",_t,4),sn("YuvToArgbRow",Le,4),sn("YuvToRgba4444Row",de,2),sn("YuvToRgb565Row",ie,2);var X5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dm=[0,2,8],Uk=[8,7,6,4,4,2,2,2,1,1,1,1],Bk=1;this.WebPDecodeRGBA=function(c,f,y,I,D){var M=om,V=new ns,q=new oi;V.ba=q,q.S=M,q.width=[q.width],q.height=[q.height];var z=q.width,H=q.height,ne=new zr;if(ne==null||c==null)var fe=2;else e(ne!=null),fe=ks(c,f,y,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(fe!=0?z=0:(z!=null&&(z[0]=ne.width[0]),H!=null&&(H[0]=ne.height[0]),z=1),z){q.width=q.width[0],q.height=q.height[0],I!=null&&(I[0]=q.width),D!=null&&(D[0]=q.height);e:{if(I=new Po,(D=new Pa).data=c,D.w=f,D.ha=y,D.kd=1,f=[0],e(D!=null),((c=ks(D.data,D.w,D.ha,null,null,null,f,null,D))==0||c==7)&&f[0]&&(c=4),(f=c)==0){if(e(V!=null),I.data=D.data,I.w=D.w+D.offset,I.ha=D.ha-D.offset,I.put=xi,I.ac=Nn,I.bc=Nr,I.ma=V,D.xa){if((c=yr())==null){V=1;break e}if(function(pe,ae){var Pe=[0],Ee=[0],re=[0];t:for(;;){if(pe==null)return 0;if(ae==null)return pe.a=2,0;if(pe.l=ae,pe.a=0,Z(pe.m,ae.data,ae.w,ae.ha),!ut(pe.m,Pe,Ee,re)){pe.a=3;break t}if(pe.xb=W5,ae.width=Pe[0],ae.height=Ee[0],!nr(Pe[0],Ee[0],1,pe,null))break t;return 1}return e(pe.a!=0),0}(c,I)){if(I=(f=Ec(I.width,I.height,V.Oa,V.ba))==0){t:{I=c;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((D=y.ma)!=null),I.xb!=0){if(I.ca=D.ba,I.tb=D.tb,e(I.ca!=null),!Lo(D.Oa,y,am)){I.a=2;break n}if(!Ks(I,y.width)||y.da)break n;if((y.da||Bt(I.ca.S))&&ce(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ce()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!lt(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!ai(I,I.V,I.Ba,I.c,I.i,y.o,Ni))break n;D.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(f=c.a)}else f=c.a}else{if((c=new fc)==null){V=1;break e}if(c.Fa=D.na,c.P=D.P,c.qc=D.Sa,Hl(c,I)){if((f=Ec(I.width,I.height,V.Oa,V.ba))==0){if(c.Aa=0,y=V.Oa,e((D=c)!=null),y!=null){if(0<(z=0>(z=y.Md)?0:100<z?255:255*z/100)){for(H=ne=0;4>H;++H)12>(fe=D.pb[H]).lc&&(fe.ia=z*Uk[0>fe.lc?0:fe.lc]>>3),ne|=fe.ia;ne&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=y.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}bd(c,I)||(f=c.a)}}else f=c.a}f==0&&V.Oa!=null&&V.Oa.fd&&(f=Td(V.ba))}V=f}M=V!=0?null:11>M?q.f.RGBA.eb:q.f.kb.y}else M=null;return M};var Z5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,O){for(var U="",T=0;T<4;T++)U+=String.fromCharCode(E[O++]);return U}function d(E,O){return(E[O+0]<<0|E[O+1]<<8|E[O+2]<<16)>>>0}function p(E,O){return(E[O+0]<<0|E[O+1]<<8|E[O+2]<<16|E[O+3]<<24)>>>0}new l;var v=[0],g=[0],P=[],S=new l,C=n,w=function(E,O){var U={},T=0,x=!1,N=0,X=0;if(U.frames=[],!function(G,J,ee,se){for(var he=0;he<se;he++)if(G[J+he]!=ee.charCodeAt(he))return!0;return!1}(E,O,"RIFF",4)){var ge,ve;for(p(E,O+=4),O+=8;O<E.length;){var Ie=u(E,O),Z=p(E,O+=4);O+=4;var ue=Z+(1&Z);switch(Ie){case"VP8 ":case"VP8L":U.frames[T]===void 0&&(U.frames[T]={}),(F=U.frames[T]).src_off=x?X:O-8,F.src_size=N+Z+8,T++,x&&(x=!1,N=0,X=0);break;case"VP8X":(F=U.header={}).feature_flags=E[O];var le=O+4;F.canvas_width=1+d(E,le),le+=3,F.canvas_height=1+d(E,le),le+=3;break;case"ALPH":x=!0,N=ue+8,X=O-8;break;case"ANIM":(F=U.header).bgcolor=p(E,O),le=O+4,F.loop_count=(ge=E)[(ve=le)+0]<<0|ge[ve+1]<<8,le+=2;break;case"ANMF":var Te,F;(F=U.frames[T]={}).offset_x=2*d(E,O),O+=3,F.offset_y=2*d(E,O),O+=3,F.width=1+d(E,O),O+=3,F.height=1+d(E,O),O+=3,F.duration=d(E,O),O+=3,Te=E[O++],F.dispose=1&Te,F.blend=Te>>1&1}Ie!="ANMF"&&(O+=ue)}return U}}(C,0);w.response=C,w.rgbaoutput=!0,w.dataurl=!1;var b=w.header?w.header:null,R=w.frames?w.frames:null;if(b){b.loop_counter=b.loop_count,v=[b.canvas_height],g=[b.canvas_width];for(var $=0;$<R.length&&R[$].blend!=0;$++);}var W=R[0],Q=S.WebPDecodeRGBA(C,W.src_off,W.src_size,g,v);W.rgba=Q,W.imgwidth=g[0],W.imgheight=v[0];for(var k=0;k<g[0]*v[0]*4;k++)P[k]=Q[k];return this.width=g,this.height=v,this.data=P,this}(function(n){var e=function(){return typeof G_=="function"},t=function(v,g,P,S){var C=4,w=o;switch(S){case n.image_compression.FAST:C=1,w=s;break;case n.image_compression.MEDIUM:C=6,w=a;break;case n.image_compression.SLOW:C=9,w=l}v=r(v,g,P,w);var b=G_(v,{level:C});return n.__addimage__.arrayBufferToBinaryString(b)},r=function(v,g,P,S){for(var C,w,b,R=v.length/g,$=new Uint8Array(v.length+R),W=d(),Q=0;Q<R;Q+=1){if(b=Q*g,C=v.subarray(b,b+g),S)$.set(S(C,P,w),b+Q);else{for(var k,E=W.length,O=[];k<E;k+=1)O[k]=W[k](C,P,w);var U=p(O.concat());$.set(O[U],b+Q)}w=C}return $},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var P,S=[],C=v.length;S[0]=1;for(var w=0;w<C;w+=1)P=v[w-g]||0,S[w+1]=v[w]-P+256&255;return S},o=function(v,g,P){var S,C=[],w=v.length;C[0]=2;for(var b=0;b<w;b+=1)S=P&&P[b]||0,C[b+1]=v[b]-S+256&255;return C},a=function(v,g,P){var S,C,w=[],b=v.length;w[0]=3;for(var R=0;R<b;R+=1)S=v[R-g]||0,C=P&&P[R]||0,w[R+1]=v[R]+256-(S+C>>>1)&255;return w},l=function(v,g,P){var S,C,w,b,R=[],$=v.length;R[0]=4;for(var W=0;W<$;W+=1)S=v[W-g]||0,C=P&&P[W]||0,w=P&&P[W-g]||0,b=u(S,C,w),R[W+1]=v[W]-b+256&255;return R},u=function(v,g,P){if(v===g&&g===P)return v;var S=Math.abs(g-P),C=Math.abs(v-P),w=Math.abs(v+g-P-P);return S<=C&&S<=w?v:C<=w?g:P},d=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(P){return P.reduce(function(S,C){return S+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};n.processPNG=function(v,g,P,S){var C,w,b,R,$,W,Q,k,E,O,U,T,x,N,X,ge=this.decode.FLATE_DECODE,ve="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(b=new oq(v)).imgData,w=b.bits,C=b.colorSpace,$=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){E=(k=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,U=new Uint8Array(E*b.colors),O=new Uint8Array(E);var Ie,Z=b.pixelBitlength-b.bits;for(N=0,X=0;N<E;N++){for(x=k[N],Ie=0;Ie<Z;)U[X++]=x>>>Ie&255,Ie+=b.bits;O[N]=x>>>Ie&255}}if(b.bits===16){E=(k=new Uint32Array(b.decodePixels().buffer)).length,U=new Uint8Array(E*(32/b.pixelBitlength)*b.colors),O=new Uint8Array(E*(32/b.pixelBitlength)),T=b.colors>1,N=0,X=0;for(var ue=0;N<E;)x=k[N++],U[X++]=x>>>0&255,T&&(U[X++]=x>>>16&255,x=k[N++],U[X++]=x>>>0&255),O[ue++]=x>>>16&255;w=8}S!==n.image_compression.NONE&&e()?(v=t(U,b.width*b.colors,b.colors,S),Q=t(O,b.width,1,S)):(v=U,Q=O,ge=void 0)}if(b.colorType===3&&(C=this.color_spaces.INDEXED,W=b.palette,b.transparency.indexed)){var le=b.transparency.indexed,Te=0;for(N=0,E=le.length;N<E;++N)Te+=le[N];if((Te/=255)===E-1&&le.indexOf(0)!==-1)R=[le.indexOf(0)];else if(Te!==E){for(k=b.decodePixels(),O=new Uint8Array(k.length),N=0,E=k.length;N<E;N++)O[N]=le[k[N]];Q=t(O,b.width,1)}}var F=function(G){var J;switch(G){case n.image_compression.FAST:J=11;break;case n.image_compression.MEDIUM:J=13;break;case n.image_compression.SLOW:J=14;break;default:J=12}return J}(S);return ge===this.decode.FLATE_DECODE&&(ve="/Predictor "+F+" "),ve+="/Colors "+$+" /BitsPerComponent "+w+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:P,data:v,index:g,filter:ge,decodeParameters:ve,transparency:R,palette:W,sMask:Q,predictor:F,width:b.width,height:b.height,bitsPerComponent:w,colorSpace:C}}}})(ft.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new aq(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},d=new ny(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A}(ft.API),Os.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Os.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){an.log("bit decode error:"+t)}},Os.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Os.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Os.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Os.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=u}this.pos+=n}},Os.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=n}},Os.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Os.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Os.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Os(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new ny(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(ft.API),ZA.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new ZA(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new ny(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(ft.API),ft.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],v=r[u+2],g=r[u+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=g}var P=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:P,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ft.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zc=ft.API,Ym=zc.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,v=0,g=n.length,P=0,S=a[0]||l,C=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Yt(u[r])==="object"&&!isNaN(parseInt(u[r][P],10))?u[r][P]/d:0,C.push((a[r]||S)/l+v)),P=r;return C},QA=zc.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zc.processArabic&&(n=zc.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Ym.apply(this,arguments).reduce(function(s,o){return s+o},0)},JA=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},YA=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,d=[],p=[d],v=t.textIndent||0,g=0,P=0,S=n.split(" "),C=Ym.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),b=[];S.map(function($){($=$.split(/\s*\n/)).length>1?b=b.concat($.map(function(W,Q){return(Q&&W.length?`
`:"")+W})):b.push($[0])}),S=b,l=QA.apply(this,[w,t])}for(s=0,o=S.length;s<o;s++){var R=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),v+g+(P=(i=Ym.apply(this,[r,t])).reduce(function($,W){return $+W},0))>e||R){if(P>e){for(a=JA.apply(this,[r,i,e-(v+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);P=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function($,W){return $+W},0)}else d=[r];p.push(d),v=P+l,g=C}else d.push(r),v+=g+P,g=C}return u=l?function($,W){return(W?w:"")+$.join(" ")}:function($){return $.join(" ")},p.map(u)},zc.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(YA.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var v,g,P,S,C=["{"];for(var w in p){if(v=p[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=s(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(P=s(v).slice(3),S="-"):(P=s(v).slice(2),S=""),P=S+P.slice(0,-1)+r[P.slice(-1)];else{if(Yt(v)!=="object")throw new Error("Don't know what to do with value type "+Yt(v)+".");P=o(v)}C.push(g+P)}return C.push("}"),C.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,P,S,C={},w=1,b=C,R=[],$="",W="",Q=p.length-1,k=1;k<Q;k+=1)(S=p[k])=="'"?v?(P=v.join(""),v=void 0):v=[]:v?v.push(S):S=="{"?(R.push([b,P]),b={},P=void 0):S=="}"?((g=R.pop())[0][g[1]]=b,P=void 0,b=g[0]):S=="-"?w=-1:P===void 0?t.hasOwnProperty(S)?($+=t[S],P=parseInt($,16)*w,w=1,$=""):$+=S:t.hasOwnProperty(S)?(W+=t[S],b[P]=parseInt(W,16)*w,w=1,P=void 0,W=""):W+=S;return C},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var v=p.font,g=d.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var P=u.Unicode[v.postScriptName];P&&(v.metadata.Unicode.encoding=P,v.encoding=P.codePages[0])}])}(ft.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Ff(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ft),function(n){function e(){return(pt.canvg?Promise.resolve(pt.canvg):B_(()=>import("./index.es-dd3966a8.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}ft.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw an.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw an.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(P){return P.fromString(p,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(v)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),ft.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},ft.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,d=0,p=0;function v(P,S){var C,w=!1;for(C=0;C<P.length;C+=1)P[C]===S&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Yt(n)==="object"){for(i in n)if(s=n[i],v(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&v(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,S=[];for(P in t)t[P].explicitSet===!0&&(t[P].type==="name"?S.push("/"+P+" /"+t[P].value):S.push("/"+P+" "+t[P].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(ft.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(u[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,u,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,P){return g-P})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",P=0;P<v.length;P++)g+=String.fromCharCode(v[P]);var S=u();d({data:g,addLength1:!0,objectId:S}),l("endobj");var C=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+eh(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+eh(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+eh(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,d=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var P=u();d({data:v,addLength1:!0,objectId:P}),l("endobj");var S=u();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var C=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+P+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+eh(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+eh(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,P=p.fonts,S=g,C="",w=0,b="",R=P[S].encoding;if(P[S].encoding!=="Identity-H")return{text:a,x:l,y:u,options:d,mutex:p};for(b=a,S=g,Array.isArray(a)&&(b=a[0]),w=0;w<b.length;w+=1)P[S].metadata.hasOwnProperty("cmap")&&(o=P[S].metadata.cmap.unicode.codeMap[b[w].charCodeAt(0)]),o||b[w].charCodeAt(0)<256&&P[S].metadata.hasOwnProperty("Unicode")?C+=b[w]:C+="";var $="";return parseInt(S.slice(1))<14||R==="WinAnsiEncoding"?$=v(C,S).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&($=t(C,P[S])),p.isHex=!0,{text:$,x:l,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ft),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(ft.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,R=0;this.__bidiEngine__={};var $=function(T){var x=T.charCodeAt(),N=x>>8,X=S[N];return X!==void 0?p[256*X+(255&x)]:N===252||N===253?"AL":w.test(N)?"L":N===8?"R":"N"},W=function(T){for(var x,N=0;N<T.length;N++){if((x=$(T.charAt(N)))==="L")return!1;if(x==="R")return!0}return!1},Q=function(T,x,N,X){var ge,ve,Ie,Z,ue=x[X];switch(ue){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(ue="AN");break;case"AL":b=!0,ue="R";break;case"WS":ue="N";break;case"CS":X<1||X+1>=x.length||(ge=N[X-1])!=="EN"&&ge!=="AN"||(ve=x[X+1])!=="EN"&&ve!=="AN"?ue="N":b&&(ve="AN"),ue=ve===ge?ve:"N";break;case"ES":ue=(ge=X>0?N[X-1]:"B")==="EN"&&X+1<x.length&&x[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&N[X-1]==="EN"){ue="EN";break}if(b){ue="N";break}for(Ie=X+1,Z=x.length;Ie<Z&&x[Ie]==="ET";)Ie++;ue=Ie<Z&&x[Ie]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Z=x.length,Ie=X+1;Ie<Z&&x[Ie]==="NSM";)Ie++;if(Ie<Z){var le=T[X],Te=le>=1425&&le<=2303||le===64286;if(ge=x[Ie],Te&&(ge==="R"||ge==="AL")){ue="R";break}}}ue=X<1||(ge=x[X-1])==="B"?"N":N[X-1];break;case"B":b=!1,i=!0,ue=R;break;case"S":s=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":ue="N"}return ue},k=function(T,x,N){var X=T.split("");return N&&E(X,N,{hiLevel:R}),X.reverse(),x&&x.reverse(),X.join("")},E=function(T,x,N){var X,ge,ve,Ie,Z,ue=-1,le=T.length,Te=0,F=[],G=R?g:v,J=[];for(b=!1,i=!1,s=!1,ge=0;ge<le;ge++)J[ge]=$(T[ge]);for(ve=0;ve<le;ve++){if(Z=Te,F[ve]=Q(T,J,F,ve),X=240&(Te=G[Z][P[F[ve]]]),Te&=15,x[ve]=Ie=G[Te][5],X>0)if(X===16){for(ge=ue;ge<ve;ge++)x[ge]=1;ue=-1}else ue=-1;if(G[Te][6])ue===-1&&(ue=ve);else if(ue>-1){for(ge=ue;ge<ve;ge++)x[ge]=Ie;ue=-1}J[ve]==="B"&&(x[ve]=0),N.hiLevel|=Ie}s&&function(ee,se,he){for(var ye=0;ye<he;ye++)if(ee[ye]==="S"){se[ye]=R;for(var _e=ye-1;_e>=0&&ee[_e]==="WS";_e--)se[_e]=R}}(J,x,le)},O=function(T,x,N,X,ge){if(!(ge.hiLevel<T)){if(T===1&&R===1&&!i)return x.reverse(),void(N&&N.reverse());for(var ve,Ie,Z,ue,le=x.length,Te=0;Te<le;){if(X[Te]>=T){for(Z=Te+1;Z<le&&X[Z]>=T;)Z++;for(ue=Te,Ie=Z-1;ue<Ie;ue++,Ie--)ve=x[ue],x[ue]=x[Ie],x[Ie]=ve,N&&(ve=N[ue],N[ue]=N[Ie],N[Ie]=ve);Te=Z}Te++}}},U=function(T,x,N){var X=T.split(""),ge={hiLevel:R};return N||(N=[]),E(X,N,ge),function(ve,Ie,Z){if(Z.hiLevel!==0&&d)for(var ue,le=0;le<ve.length;le++)Ie[le]===1&&(ue=C.indexOf(ve[le]))>=0&&(ve[le]=C[ue+1])}(X,N,ge),O(2,X,x,N,ge),O(1,X,x,N,ge),X.join("")};return this.__bidiEngine__.doBidiReorder=function(T,x,N){if(function(ge,ve){if(ve)for(var Ie=0;Ie<ge.length;Ie++)ve[Ie]=Ie;a===void 0&&(a=W(ge)),u===void 0&&(u=W(ge))}(T,x),o||!l||u)if(o&&l&&a^u)R=a?1:0,T=k(T,x,N);else if(!o&&l&&u)R=a?1:0,T=U(T,x,N),T=k(T,x);else if(!o||a||l||u){if(o&&!l&&a^u)T=k(T,x),a?(R=0,T=U(T,x,N)):(R=1,T=U(T,x,N),T=k(T,x));else if(o&&a&&!l&&u)R=1,T=U(T,x,N),T=k(T,x);else if(!o&&!l&&a^u){var X=d;a?(R=1,T=U(T,x,N),R=0,d=!1,T=U(T,x,N),d=X):(R=0,T=U(T,x,N),T=k(T,x),R=1,d=!1,T=U(T,x,N),d=X,T=k(T,x))}}else R=0,T=U(T,x,N);else R=a?1:0,T=U(T,x,N);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,l=T.isOutputVisual,a=T.isInputRtl,u=T.isOutputRtl,d=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(ft),ft.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ol(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new bq(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new lq(this.contents),this.head=new cq(this),this.name=new mq(this),this.cmap=new pk(this),this.toUnicode={},this.hhea=new hq(this),this.maxp=new gq(this),this.hmtx=new vq(this),this.post=new fq(this),this.os2=new dq(this),this.loca=new Iq(this),this.glyf=new yq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Gs,Ol=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),lq=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,d,p,v,g,P,S;for(S in g=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),d=16*g-p,(i=new Ol).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*g,u=i.pos+s,a=null,P=[],t)for(v=t[S],i.writeString(S),i.writeInt(n(v)),i.writeInt(u),i.writeInt(v.length),P=P.concat(v),S==="head"&&(a=u),u+=v.length;u%4;)P.push(0),u++;return i.write(P),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=mk.call(t);t.length%4;)t.push(0);for(s=new Ol(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),uq={}.hasOwnProperty,Eo=function(n,e){for(var t in e)uq.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Gs=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var cq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ol).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),eT=function(){function n(e,t){var r,i,s,o,a,l,u,d,p,v,g,P,S,C,w,b,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var $,W;for(W=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)W.push(e.readUInt16());return W}(),e.pos+=2,S=function(){var $,W;for(W=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)W.push(e.readUInt16());return W}(),u=function(){var $,W;for(W=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)W.push(e.readUInt16());return W}(),d=function(){var $,W;for(W=[],l=$=0;0<=v?$<v:$>v;l=0<=v?++$:--$)W.push(e.readUInt16());return W}(),i=(this.length-e.pos+this.offset)/2,a=function(){var $,W;for(W=[],l=$=0;0<=i?$<i:$>i;l=0<=i?++$:--$)W.push(e.readUInt16());return W}(),l=w=0,R=s.length;w<R;l=++w)for(C=s[l],r=b=P=S[l];P<=C?b<=C:b>=C;r=P<=C?++b:--b)d[l]===0?o=r+u[l]:(o=a[d[l]/2+(r-P)-(v-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,l,u,d,p,v,g,P,S,C,w,b,R,$,W,Q,k,E,O,U,T,x,N,X,ge,ve,Ie,Z,ue,le,Te,F,G,J,ee,se,he,ye,_e,Me,De,ze;switch(X=new Ol,o=Object.keys(e).sort(function(Ue,lt){return Ue-lt}),t){case"macroman":for(S=0,C=function(){var Ue=[];for(P=0;P<256;++P)Ue.push(0);return Ue}(),b={0:0},s={},ge=0,ue=o.length;ge<ue;ge++)b[_e=e[i=o[ge]]]==null&&(b[_e]=++S),s[i]={old:e[i],new:b[e[i]]},C[i]=b[e[i]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(C),{charMap:s,subtable:X.data,maxGlyphID:S+1};case"unicode":for(x=[],p=[],R=0,b={},r={},w=u=null,ve=0,le=o.length;ve<le;ve++)b[W=e[i=o[ve]]]==null&&(b[W]=++R),r[i]={old:W,new:b[W]},a=b[W]-i,w!=null&&a===u||(w&&p.push(w),x.push(i),u=a),w=i;for(w&&p.push(w),p.push(65535),x.push(65535),U=2*(O=x.length),E=2*Math.pow(Math.log(O)/Math.LN2,2),v=Math.log(E/2)/Math.LN2,k=2*O-E,l=[],Q=[],g=[],P=Ie=0,Te=x.length;Ie<Te;P=++Ie){if(T=x[P],d=p[P],T===65535){l.push(0),Q.push(0);break}if(T-(N=r[T].new)>=32768)for(l.push(0),Q.push(2*(g.length+O-P)),i=Z=T;T<=d?Z<=d:Z>=d;i=T<=d?++Z:--Z)g.push(r[i].new);else l.push(N-T),Q.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*O+2*g.length),X.writeUInt16(0),X.writeUInt16(U),X.writeUInt16(E),X.writeUInt16(v),X.writeUInt16(k),he=0,F=p.length;he<F;he++)i=p[he],X.writeUInt16(i);for(X.writeUInt16(0),ye=0,G=x.length;ye<G;ye++)i=x[ye],X.writeUInt16(i);for(Me=0,J=l.length;Me<J;Me++)a=l[Me],X.writeUInt16(a);for(De=0,ee=Q.length;De<ee;De++)$=Q[De],X.writeUInt16($);for(ze=0,se=g.length;ze<se;ze++)S=g[ze],X.writeUInt16(S);return{charMap:r,subtable:X.data,maxGlyphID:R+1}}},n}(),pk=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new eT(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=eT.encode(t,r),(s=new Ol).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),hq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),dq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}).call(this)}},e}(),pq=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},mq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,d,p,v,g;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=p=0,v=i.length;p<v;o=++p)s=i[o],t.pos=s.offset,d=t.readString(s.length),a=new pq(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),gq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),vq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(t.readInt16());return p}(),this.widths=(function(){var d,p,v,g;for(g=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),mk=[].slice,yq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,d,p,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new Ol(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[t]=a===-1?new wq(l,d,v,u,p):new _q(l,a,d,v,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),_q=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),wq=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ol(mk.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Iq=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Eo(e,Gs),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),bq=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,d,p,v,g,P,S,C,w;for(i in r=pk.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},w=r.charMap)g[(l=w[i]).old]=l.new;for(P in v=r.maxGlyphID,o)P in g||(g[P]=v++);return d=function(b){var R,$;for(R in $={},b)$[b[R]]=R;return $}(g),p=Object.keys(d).sort(function(b,R){return b-R}),S=function(){var b,R,$;for($=[],b=0,R=p.length;b<R;b++)a=p[b],$.push(d[a]);return $}(),s=this.font.glyf.encode(o,S,g),u=this.font.loca.encode(s.offsets,S),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},n}();ft.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();class Eq{constructor(e,t){this.doc=new ft,this.orcamento=e,this.totais=t,this.margin=20,this.y=this.margin,this.pageHeight=this.doc.internal.pageSize.getHeight(),this.pageWidth=this.doc.internal.pageSize.getWidth(),this.styles={primary:[46,125,50],secondary:[0,151,167],accent:[255,107,53],text:[51,51,51],border:[221,221,221]}}checkPageBreak(e=0){return this.y+e>this.pageHeight-this.margin?(this.doc.addPage(),this.y=this.margin,!0):!1}addText(e,t=this.margin,r=10,i=this.styles.text,s="left"){this.doc.setFontSize(r),this.doc.setTextColor(...i);let o=t;if(s==="center"){const a=this.doc.getTextWidth(e);o=(this.pageWidth-a)/2}else if(s==="right"){const a=this.doc.getTextWidth(e);o=this.pageWidth-this.margin-a}this.doc.text(e,o,this.y),this.y+=r/2+2}addTitle(e,t=16){this.checkPageBreak(20),this.addText(e,this.margin,t,this.styles.primary),this.y+=5}addDivider(){this.y+=5,this.doc.setDrawColor(...this.styles.border),this.doc.line(this.margin,this.y,this.pageWidth-this.margin,this.y),this.y+=10}addTable(e,t,r=null){this.checkPageBreak(t.length*8+20);const i=this.y,s=this.pageWidth-2*this.margin,o=s/e.length,a=r||e.map(()=>o);let l=i;this.doc.setFillColor(...this.styles.primary),this.doc.setTextColor(255,255,255),this.doc.setFontSize(9),this.doc.setFont(void 0,"bold");let u=this.margin;e.forEach((d,p)=>{this.doc.rect(u,l,a[p],8,"F"),this.doc.text(d,u+2,l+5),u+=a[p]}),l+=8,this.doc.setTextColor(...this.styles.text),this.doc.setFont(void 0,"normal"),t.forEach((d,p)=>{p%2===0&&(this.doc.setFillColor(245,245,245),this.doc.rect(this.margin,l,s,8,"F")),u=this.margin,d.forEach((v,g)=>{this.doc.text(v.toString(),u+2,l+5),u+=a[g]}),l+=8,l>this.pageHeight-this.margin-20&&(this.doc.addPage(),l=this.margin,this.doc.setFillColor(...this.styles.primary),this.doc.setTextColor(255,255,255),u=this.margin,e.forEach((v,g)=>{this.doc.rect(u,l,a[g],8,"F"),this.doc.text(v,u+2,l+5),u+=a[g]}),l+=8,this.doc.setTextColor(...this.styles.text))}),this.y=l+10}generateHeader(){this.addText("RELEVO CONSULTORIA AMBIENTAL",this.margin,16,this.styles.primary),this.addText("SISTEMA DE ORAMENTOS",this.margin,12,this.styles.secondary),this.addDivider()}generateMetadata(){this.addTitle("INFORMAES DO ORAMENTO",14),this.addText(`Nome: ${this.orcamento.metadata.nome}`,this.margin,10),this.addText(`Cliente: ${this.orcamento.metadata.cliente}`,this.margin,10),this.addText(`Data: ${new Date(this.orcamento.metadata.data).toLocaleDateString("pt-BR")}`,this.margin,10),this.addText(`Verso: ${this.orcamento.metadata.versao}`,this.margin,10),this.orcamento.metadata.desconto>0&&this.addText(`Desconto: ${this.orcamento.metadata.desconto}%`,this.margin,10,this.styles.accent),this.addDivider()}generateFinancialSummary(){this.addTitle("RESUMO FINANCEIRO",14);const e=["Descrio","Valor (R$)"],t=[120,50],r=[["Coordenao",at(this.totais.subtotalCoordenacao)],["Profissionais",at(this.totais.subtotalProfissionais)],["Valores nicos",at(this.totais.subtotalValoresUnicos)],["Logstica",at(this.totais.subtotalLogistica)],["",""],["SUBTOTAL GERAL",at(this.totais.subtotalGeral)],["Encargos de Pessoal",at(this.totais.encargosPessoal)],["Custo Total",at(this.totais.custoTotal)],["",""],["Lucro",at(this.totais.lucro)],["Fundo de Giro",at(this.totais.fundoGiro)],["Impostos",at(this.totais.impostos)],["Despesas Fiscais",at(this.totais.despesasFiscais)],["Comisso Captao",at(this.totais.comissaoCaptacao)],["",""],["TOTAL ANTES DO DESCONTO",at(this.totais.totalAntesDesconto)]];this.totais.desconto>0&&r.push(["DESCONTO",`-${at(this.totais.desconto)}`]),r.push(["TOTAL GERAL",at(this.totais.totalGeral)]),this.addTable(e,r,t),this.addDivider()}generateParameters(){this.addTitle("PARMETROS DE CLCULO",14);const e=["Parmetro","Valor"],t=[100,70],r=Object.entries(this.orcamento.parametros).map(([i,s])=>[i.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase()),Xa(s)]);this.addTable(e,r,t)}generateCategoryDetail(e,t,r,i){const s=t.filter(a=>i(a).total>0);if(s.length===0)return;this.checkPageBreak(30),this.addTitle(e.toUpperCase(),12);const o=s.map(a=>i(a).row);this.addTable(r,o)}generateAllCategories(){[{nome:"COORDENAO",dados:this.orcamento.coordenacao,headers:["Cargo","Profissional","Subtotal","Quant.","Dias","Total"],mapper:t=>{const r=t.dias/30*t.subtotal*t.quant;return{total:r,row:[t.cargo,t.profissional,at(t.subtotal),t.quant.toString(),t.dias.toString(),at(r)]}}},{nome:"PROFISSIONAIS",dados:this.orcamento.profissionais,headers:["Cargo","Prolabore","Pessoas","Dias","Total"],mapper:t=>{const r=t.dias/30*t.prolabore*t.pessoas;return{total:r,row:[t.cargo,at(t.prolabore),t.pessoas.toString(),t.dias.toString(),at(r)]}}},{nome:"VALORES NICOS",dados:this.orcamento.valoresUnicos,headers:["Item","Valor Unit.","Pessoas","Dias","Total"],mapper:t=>{const r=t.valor*t.pessoas*t.dias;return{total:r,row:[t.item,at(t.valor),t.pessoas.toString(),t.dias.toString(),at(r)]}}},{nome:"LOGSTICA",dados:this.orcamento.logistica,headers:["Item","Valor","Unidade","Quant.","Dias","Total"],mapper:t=>{const r=t.valor*t.qtd*t.dias;return{total:r,row:[t.item,at(t.valor),t.unidade,t.qtd.toString(),t.dias.toString(),at(r)]}}}].forEach(t=>{this.generateCategoryDetail(t.nome,t.dados,t.headers,t.mapper)})}addFooter(){const e=this.doc.internal.getNumberOfPages();for(let t=1;t<=e;t++)this.doc.setPage(t),this.doc.setFontSize(8),this.doc.setTextColor(...this.styles.text),this.doc.text(`Pgina ${t} de ${e}  Gerado em ${new Date().toLocaleDateString("pt-BR")}  Relevo Consultoria Ambiental`,this.pageWidth/2,this.pageHeight-10,{align:"center"})}generate(){return this.generateHeader(),this.generateMetadata(),this.generateFinancialSummary(),this.generateParameters(),this.generateAllCategories(),this.addFooter(),this.doc}}const Aq=async(n,e)=>{try{return new Eq(n,e).generate()}catch(t){throw console.error("Erro ao gerar PDF:",t),new Error("Falha ao gerar PDF. Tente novamente.")}},Tq=(n,e)=>{let t="";return t+=`RELEVO CONSULTORIA AMBIENTAL - ORAMENTO
`,t+=`Nome: ${n.metadata.nome}
`,t+=`Cliente: ${n.metadata.cliente}
`,t+=`Data: ${new Date(n.metadata.data).toLocaleDateString("pt-BR")}
`,t+=`Verso: ${n.metadata.versao}
`,n.metadata.desconto>0&&(t+=`Desconto: ${n.metadata.desconto}%
`),t+=`
`,t+=`RESUMO FINANCEIRO
`,t+=`Descrio,Valor (R$)
`,t+=`Coordenao,${at(e.subtotalCoordenacao)}
`,t+=`Profissionais,${at(e.subtotalProfissionais)}
`,t+=`Valores nicos,${at(e.subtotalValoresUnicos)}
`,t+=`Logstica,${at(e.subtotalLogistica)}
`,t+=`Subtotal Geral,${at(e.subtotalGeral)}
`,t+=`Encargos de Pessoal,${at(e.encargosPessoal)}
`,t+=`Custo Total,${at(e.custoTotal)}
`,t+=`Lucro,${at(e.lucro)}
`,t+=`Fundo de Giro,${at(e.fundoGiro)}
`,t+=`Impostos,${at(e.impostos)}
`,t+=`Despesas Fiscais,${at(e.despesasFiscais)}
`,t+=`Comisso Captao,${at(e.comissaoCaptacao)}
`,t+=`Total Antes do Desconto,${at(e.totalAntesDesconto)}
`,e.desconto>0&&(t+=`Desconto,-${at(e.desconto)}
`),t+=`TOTAL GERAL,${at(e.totalGeral)}
`,t+=`
`,t+=`PARMETROS DE CLCULO
`,t+=`Parmetro,Valor
`,Object.entries(n.parametros).forEach(([r,i])=>{const s=r.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase());t+=`${s},${Xa(i)}
`}),t},Sq=(n,e,t="text/csv")=>{const r=new Blob([n],{type:t}),i=window.URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)},xq=()=>{const{orcamentoAtual:n,totais:e,carregando:t}=$l(),[r,i]=On.useState(!1),s=async()=>{if(!r){i(!0);try{const a=await Aq(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;a.save(l)}catch(a){console.error("Erro ao gerar PDF:",a),alert("Erro ao gerar PDF. Tente novamente.")}finally{i(!1)}}},o=()=>{if(!r){i(!0);try{const a=Tq(n,e),l=`Orcamento_${n.metadata.nome.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`;Sq(a,l,"text/csv;charset=utf-8;")}catch(a){console.error("Erro ao gerar CSV:",a),alert("Erro ao gerar CSV. Tente novamente.")}finally{i(!1)}}};return j.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[j.jsx("button",{onClick:s,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] border border-[#2E3E31] rounded-md hover:bg-[#3CC373] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar para PDF (formato de impresso)",children:r?j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):j.jsx(j.Fragment,{children:" PDF"})}),j.jsx("button",{onClick:o,disabled:r||t,className:"px-6 py-3 text-white bg-[#2E3E31] border border-[#2E3E31] rounded-md hover:bg-[#3CC373] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar para CSV (Excel/Planilhas)",children:r?j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Gerando..."]}):j.jsx(j.Fragment,{children:" CSV"})})]})},Xm=n=>n==null||isNaN(n)?"0,00":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n),Pq=({erros:n,onClose:e})=>!n||n.length===0?null:j.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[j.jsxs("div",{className:"flex justify-between items-start mb-2",children:[j.jsx("h3",{className:"text-yellow-800 font-semibold text-lg font-heading",children:" Erros de Validao"}),j.jsx("button",{onClick:e,className:"text-yellow-600 hover:text-yellow-800 text-lg font-bold",children:""})]}),j.jsx("p",{className:"text-yellow-700 mb-3 font-sans",children:"Corrija os seguintes erros antes de salvar:"}),j.jsx("ul",{className:"text-yellow-600 list-disc list-inside space-y-1 font-sans",children:n.map((t,r)=>j.jsx("li",{className:"text-sm",children:t},r))})]}),Nq=()=>{const{orcamentoAtual:n,salvarOrcamento:e,totais:t,carregando:r,erro:i,errosValidacao:s,limparErro:o,dispatch:a,validarOrcamentoAtual:l,limparErrosValidacao:u}=$l(),{user:d,logout:p}=M5(),[v,g]=On.useState(!1),[P,S]=On.useState(!0);On.useEffect(()=>{l()},[n]);const C=(W,Q)=>{s.length>0&&u(),a({type:"UPDATE_METADATA",payload:{[W]:Q}})},w=async()=>{if(confirm("Deseja sair do sistema? Isso ir desconectar voc do Portal Relevo."))try{await p()}catch(W){console.error("Erro ao fazer logout:",W),alert("Erro ao sair do sistema")}},b=async()=>{try{if(o(),!l().valido){S(!0),window.scrollTo({top:0,behavior:"smooth"});return}const Q=await e(n);Q&&(alert(` Oramento salvo com sucesso!
ID: ${Q}`),u())}catch(W){console.error("Erro ao salvar oramento:",W)}},R=()=>{confirm("Deseja criar um novo oramento? Todas as alteraes no salvas sero perdidas.")&&window.location.reload()},$=s.length===0;return j.jsxs("div",{className:"bg-relevo-background shadow-lg border-b border-relevo-border p-6 mb-6",children:[P&&s.length>0&&j.jsx(Pq,{erros:s,onClose:()=>S(!1)}),s.length>0&&!P&&j.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4 flex justify-between items-center",children:[j.jsxs("span",{className:"text-yellow-700 text-sm font-sans",children:[" Existem ",s.length," erro(s) de validao"]}),j.jsx("button",{onClick:()=>S(!0),className:"bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600 transition font-sans",children:"Ver Erros"})]}),j.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-8",children:[j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsxs("div",{className:"flex-shrink-0",children:[j.jsx("img",{src:"https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_vertical.png",alt:"Relevo Consultoria Ambiental",className:"h-16 w-auto",onError:W=>{W.target.style.display="none",W.target.nextSibling.style.display="flex"}}),j.jsx("div",{className:"h-16 w-16 bg-relevo-green rounded-lg flex items-center justify-center hidden",children:j.jsx("span",{className:"text-white font-bold text-lg",children:"R"})})]}),j.jsxs("div",{children:[j.jsx("h1",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Relevo Consultoria Ambiental"}),j.jsx("p",{className:"font-medium text-relevo-blue font-heading",children:"Sistema de Oramentos"}),d&&j.jsxs("p",{className:"text-sm text-relevo-text/70 font-sans mt-1",children:["Logado como: ",j.jsx("strong",{children:d.email})]})]})]}),j.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[j.jsx(xq,{}),j.jsx("button",{onClick:b,disabled:r||!$,className:`px-6 py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 font-medium transition-all duration-200 shadow-md flex items-center justify-center gap-2 min-w-[140px] font-sans text-base ${$?"bg-[#2EAD60] hover:bg-[#3CC373] text-white focus:ring-[#2EAD60]":"opacity-50 cursor-not-allowed bg-gray-400 text-white"}`,title:$?"Salvar oramento no Firebase":"Corrija os erros de validao para salvar",children:r?j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):j.jsx(j.Fragment,{children:$?" Salvar":" Corrigir"})}),j.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Gerenciar"}),j.jsx("button",{onClick:R,className:"px-6 py-3 text-[#333C35] bg-white border border-[rgba(0,0,0,0.1)] rounded-md hover:bg-[#F8F9F8] focus:outline-none focus:ring-2 focus:ring-[#2EAD60] focus:ring-offset-2 font-medium transition-all duration-200 shadow-md min-w-[140px] font-sans text-base",children:" Novo"}),j.jsx("button",{onClick:w,className:"px-4 py-3 text-red-600 bg-white border border-red-300 rounded-md hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 font-medium transition-colors font-sans text-sm",title:`Sair do sistema (${d==null?void 0:d.email})`,children:" Sair"})]})]}),j.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-relevo-border p-4 mb-6",children:j.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Subtotal"}),j.jsxs("div",{className:"text-lg font-bold text-relevo-blue font-sans",children:["R$ ",Xm((t==null?void 0:t.subtotalGeral)||0)]})]}),j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Custos Indiretos"}),j.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["R$ ",Xm(((t==null?void 0:t.totalAntesDesconto)||0)-((t==null?void 0:t.subtotalGeral)||0))]})]}),j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Total"}),j.jsxs("div",{className:"text-lg font-bold text-relevo-green font-sans",children:["R$ ",Xm((t==null?void 0:t.totalGeral)||0)]})]}),n.metadata.desconto>0&&j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Desconto Aplicado"}),j.jsxs("div",{className:"text-lg font-bold text-relevo-orange font-sans",children:["-R$ ",Xm((t==null?void 0:t.desconto)||0)]}),j.jsxs("div",{className:"text-xs text-relevo-orange font-sans",children:[n.metadata.desconto,"% de desconto"]})]}),j.jsxs("div",{children:[j.jsx("div",{className:"text-sm text-relevo-text/70 font-sans",children:"Margem"}),j.jsxs("div",{className:"text-lg font-bold font-sans",style:{color:(t==null?void 0:t.lucro)>0?"#2E7D32":"#FF6B35"},children:[((t==null?void 0:t.lucro)/((t==null?void 0:t.totalGeral)||1)*100).toFixed(1).replace(".",","),"%"]})]})]})}),j.jsx("div",{className:"bg-[#2EAD60] rounded-lg p-4 mb-6",children:j.jsxs("div",{className:"w-full",children:[j.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center font-heading",children:"Informaes do Oramento"}),j.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3",children:[j.jsxs("div",{className:"lg:col-span-5",children:[j.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Nome do Oramento *"}),j.jsx("input",{type:"text",value:n.metadata.nome,onChange:W=>C("nome",W.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Ex: Projeto EIA-RIMA Serra Azul"}),j.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Mnimo 3 caracteres"})]}),j.jsxs("div",{className:"lg:col-span-4",children:[j.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Cliente *"}),j.jsx("input",{type:"text",value:n.metadata.cliente,onChange:W=>C("cliente",W.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"Nome da empresa cliente"}),j.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),j.jsxs("div",{className:"lg:col-span-2",children:[j.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Data *"}),j.jsx("input",{type:"date",value:n.metadata.data,onChange:W=>C("data",W.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900"}),j.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Obrigatrio"})]}),j.jsxs("div",{className:"lg:col-span-1",children:[j.jsx("label",{className:"block text-sm font-medium mb-1 text-white font-sans",children:"Desconto (%)"}),j.jsx("input",{type:"number",min:"0",max:"100",value:n.metadata.desconto,onChange:W=>C("desconto",W.target.value),className:"w-full px-2 py-2 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#3CC373] transition-colors text-sm font-sans text-gray-900 placeholder-gray-500",placeholder:"0"}),j.jsx("p",{className:"text-xs text-white/80 mt-1",children:"0 a 100"})]})]})]})}),v&&j.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:j.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[j.jsxs("div",{className:"flex justify-between items-center mb-6",children:[j.jsx("h2",{className:"text-2xl font-bold text-relevo-green font-heading",children:"Gerenciar Oramentos"}),j.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-800 text-2xl font-bold",children:""})]}),j.jsx(EB,{setMostrarGerenciador:g})]})}),i&&j.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded fixed bottom-4 right-4 z-50 shadow-lg",children:[j.jsx("p",{children:i}),j.jsx("button",{onClick:o,className:"absolute top-1 right-2 text-red-700 font-bold",children:"x"})]})]})},kq=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=$l(),r=(s,o)=>{var u,d;const a=parseFloat(o)/100||0,l=(d=(u=et.parametros)[s])==null?void 0:d.call(u,a);l&&console.warn(`Erro de validao em ${s}:`,l),e({type:"UPDATE_PARAMETROS",payload:{[s]:a}})},i=((t==null?void 0:t.encargosPessoal)||0)+((t==null?void 0:t.lucro)||0)+((t==null?void 0:t.fundoGiro)||0)+((t==null?void 0:t.impostos)||0)+((t==null?void 0:t.despesasFiscais)||0)+((t==null?void 0:t.comissaoCaptacao)||0);return j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Custos Gerais e Parmetros"}),j.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"imposto",label:"Impostos (%)"},{key:"lucro",label:"Lucro (%)"},{key:"fundoGiro",label:"Fundo de Giro (%)"},{key:"encargosPessoal",label:"Encargos Pessoal (%)"},{key:"despesasFiscais",label:"Despesas Fiscais (%)"},{key:"comissaoCaptacao",label:"Comisso de Captao (%)"}].map(s=>{var l,u;const o=n.parametros[s.key]*100,a=(u=(l=et.parametros)[s.key])==null?void 0:u.call(l,n.parametros[s.key]);return j.jsxs("div",{children:[j.jsx("label",{className:"block text-sm font-medium text-relevo-text/80 font-sans mb-1",children:s.label}),j.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:o,onChange:d=>r(s.key,d.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${a?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-relevo-green-light"}`}),a&&j.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[j.jsx("span",{className:"mr-1",children:""}),a.replace("0-1","0-100%")]})]},s.key)})}),j.jsxs("div",{className:"mt-6 p-4 bg-[#E8F5E9] rounded-lg border border-[#C8E6C9]",children:[j.jsx("h3",{className:"font-semibold text-[#2E3E31] font-heading mb-4",children:"Resumo dos Custos Indiretos"}),j.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Despesas Fiscais:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.despesasFiscais)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.despesasFiscais)})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Lucro:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.lucro)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.lucro)})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Fundo de Giro:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.fundoGiro)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.fundoGiro)})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Impostos:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.impostos)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.imposto)})]})]}),j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm border-t border-[#C8E6C9] pt-4",children:[j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Encargos Pessoal:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.encargosPessoal)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.encargosPessoal)})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Comisso Captao:"}),j.jsxs("div",{className:"font-semibold text-[#2E3E31]",children:["R$ ",at((t==null?void 0:t.comissaoCaptacao)||0)]}),j.jsx("div",{className:"text-xs text-[#2E3E31]/60 font-sans",children:Xa(n.parametros.comissaoCaptacao)})]}),j.jsxs("div",{className:"text-center",children:[j.jsx("span",{className:"text-[#2E3E31]/80 font-sans block",children:"Total Custos Indiretos:"}),j.jsxs("div",{className:"font-semibold text-[#2EAD60] font-sans",children:["R$ ",at(i)]})]})]})]})]})},Rq=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=$l(),r=(s,o,a)=>{const l=o==="profissional"||o==="cargo",u=l?a:parseFloat(a)||0;let d=null;!l&&et.coordenacao[o]&&(d=et.coordenacao[o](u)),d&&console.warn(`Erro de validao em ${o}:`,d),e({type:"UPDATE_COORDENACAO",payload:{id:s,updates:{[o]:u}}})},i=(s,o,a=!1)=>{var d,p;if(a)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const l=(p=(d=et.coordenacao)[s])==null?void 0:p.call(d,o),u="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return l?`${u} border-red-300 focus:ring-red-500 bg-red-50`:`${u} border-gray-300 focus:ring-blue-500`};return j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsx("h2",{className:"text-xl font-bold mb-4 text-relevo-text font-heading",children:"Coordenao"}),j.jsx("div",{className:"overflow-x-auto",children:j.jsxs("table",{className:"w-full",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-[#E8F5E9]",children:[j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Profissional"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quant."}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),j.jsx("tbody",{children:n.coordenacao.map(s=>{const o=s.dias*8*s.quant,a=s.dias/30,l=a*s.prolabore*s.quant,u=et.coordenacao.prolabore?et.coordenacao.prolabore(s.prolabore):null,d=et.coordenacao.quant(s.quant),p=et.coordenacao.dias(s.dias),v=u||d||p;return j.jsxs("tr",{className:`border-b border-gray-200 hover:bg-relevo-light-gray ${v?"bg-red-50 hover:bg-red-100":""}`,children:[j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"flex items-center",children:[s.cargo,v&&j.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste coordenador",children:""})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsx("input",{type:"text",value:s.profissional,onChange:g=>r(s.id,"profissional",g.target.value),className:i("profissional",s.profissional,!0),placeholder:"Ex: Snior, Pleno",title:"Nvel do profissional (Snior, Pleno, etc.)"})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"100",value:s.prolabore,onChange:g=>r(s.id,"prolabore",g.target.value),className:i("prolabore",s.prolabore),title:u||"Valor mensal do coordenador"}),u&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:u})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:s.quant,onChange:g=>r(s.id,"quant",g.target.value),className:i("quant",s.quant),title:d||"Quantidade de coordenadores"}),d&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:s.dias,onChange:g=>r(s.id,"dias",g.target.value),className:i("dias",s.dias),title:p||"Dias de trabalho"}),p&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:p})]})}),j.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:o.toFixed(1).replace(".",",")}),j.jsx("td",{className:"px-4 py-2 text-sm text-relevo-text/70 font-sans",children:a.toFixed(2).replace(".",",")}),j.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",at(l)]})]},s.id)})}),j.jsx("tfoot",{children:j.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[j.jsx("td",{colSpan:"7",className:"px-4 py-2 text-right text-white",children:"Total Coordenao:"}),j.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",at((t==null?void 0:t.subtotalCoordenacao)||0)]})]})})]})})]})},Cq=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=$l(),r=(o,a,l)=>{const u=parseFloat(l)||0;let d=null;et.profissionais[a]&&(d=et.profissionais[a](u)),d&&console.warn(`Erro de validao em ${a}:`,d),e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{[a]:u}}})},i=()=>{const o=Math.max(...n.profissionais.map(a=>a.id))+1;e({type:"UPDATE_PROFISSIONAIS",payload:{id:o,updates:{cargo:"Novo Profissional",prolabore:0,pessoas:0,dias:0}}})},s=(o,a,l)=>{var p,v;const u=(v=(p=et.profissionais)[a])==null?void 0:v.call(p,l),d="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return u?`${d} border-red-300 focus:ring-red-500 bg-red-50`:`${d} border-gray-300 focus:ring-blue-500`};return j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsxs("div",{className:"flex justify-between items-center mb-4",children:[j.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Profissionais"}),j.jsx("button",{onClick:i,className:"bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Profissional"})]}),j.jsx("div",{className:"overflow-x-auto",children:j.jsxs("table",{className:"w-full",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-[#E8F5E9]",children:[j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Cargo"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Prolabore (R$)"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Horas"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Ms"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),j.jsx("tbody",{children:n.profissionais.map(o=>{const a=o.dias*8*o.pessoas,l=o.dias/30,u=l*o.prolabore*o.pessoas,d=et.profissionais.prolabore(o.prolabore),p=et.profissionais.pessoas(o.pessoas),v=et.profissionais.dias(o.dias),g=d||p||v;return j.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${g?"bg-red-50 hover:bg-red-100":""}`,children:[j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"flex items-center",children:[j.jsx("input",{type:"text",value:o.cargo,onChange:P=>r(o.id,"cargo",P.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nome do cargo"}),g&&j.jsx("span",{className:"ml-2 text-red-500 text-xs",title:"Verifique os valores deste profissional",children:""})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"100",value:o.prolabore,onChange:P=>r(o.id,"prolabore",P.target.value),className:s(o.id,"prolabore",o.prolabore),title:d||"Valor do prolabore mensal"}),d&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:P=>r(o.id,"pessoas",P.target.value),className:s(o.id,"pessoas",o.pessoas),title:p||"Nmero de profissionais"}),p&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:p})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:P=>r(o.id,"dias",P.target.value),className:s(o.id,"dias",o.dias),title:v||"Dias de trabalho"}),v&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:v})]})}),j.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:a.toFixed(1).replace(".",",")}),j.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:l.toFixed(2).replace(".",",")}),j.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",at(u)]})]},o.id)})}),j.jsx("tfoot",{children:j.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[j.jsx("td",{colSpan:"6",className:"px-4 py-2 text-right text-white",children:"Total Profissionais:"}),j.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",at((t==null?void 0:t.subtotalProfissionais)||0)]})]})})]})})]})},Lq=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=$l(),r=(o,a,l)=>{const u=a==="item",d=u?l:parseFloat(l)||0;let p=null;!u&&et.valoresUnicos[a]&&(p=et.valoresUnicos[a](d)),p&&console.warn(`Erro de validao em ${a}:`,p),e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{[a]:d}}})},i=()=>{const o=Math.max(...n.valoresUnicos.map(a=>a.id))+1;e({type:"UPDATE_VALORES_UNICOS",payload:{id:o,updates:{item:"Novo Item",valor:0,pessoas:1,dias:1}}})},s=(o,a,l=!1)=>{var p,v;if(l)return"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500";const u=(v=(p=et.valoresUnicos)[o])==null?void 0:v.call(p,a),d="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1";return u?`${d} border-red-300 focus:ring-red-500 bg-red-50`:`${d} border-gray-300 focus:ring-blue-500`};return j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsxs("div",{className:"flex justify-between items-center mb-4",children:[j.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Valores nicos"}),j.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm transition-colors font-sans",children:"+ Adicionar Item"})]}),j.jsx("div",{className:"overflow-x-auto",children:j.jsxs("table",{className:"w-full",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-[#E8F5E9]",children:[j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor Unitrio (R$)"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Pessoas"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),j.jsx("tbody",{children:n.valoresUnicos.map(o=>{const a=o.valor*o.pessoas*o.dias,l=et.valoresUnicos.valor(o.valor),u=et.valoresUnicos.pessoas(o.pessoas),d=et.valoresUnicos.dias(o.dias),p=l||u||d;return j.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${p?"bg-red-50 hover:bg-red-100":""}`,children:[j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"flex items-center",children:[j.jsx("input",{type:"text",value:o.item,onChange:v=>r(o.id,"item",v.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item",title:"Descrio do item ou servio"}),p&&j.jsx("span",{className:"ml-2 text-red-500 text-xs flex-shrink-0",title:"Verifique os valores deste item",children:""})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"0.01",value:o.valor,onChange:v=>r(o.id,"valor",v.target.value),className:s("valor",o.valor),title:l||"Valor unitrio do item"}),l&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:l})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:o.pessoas,onChange:v=>r(o.id,"pessoas",v.target.value),className:s("pessoas",o.pessoas),title:u||"Nmero de pessoas envolvidas"}),u&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:u})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("div",{className:"relative",children:[j.jsx("input",{type:"number",min:"0",step:"1",value:o.dias,onChange:v=>r(o.id,"dias",v.target.value),className:s("dias",o.dias),title:d||"Dias de utilizao/durao"}),d&&j.jsx("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded pointer-events-none opacity-0 hover:opacity-100 transition-opacity",children:d})]})}),j.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",at(a)]})]},o.id)})}),j.jsx("tfoot",{children:j.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[j.jsx("td",{colSpan:"4",className:"px-4 py-2 text-right text-white",children:"Total Valores nicos:"}),j.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",at((t==null?void 0:t.subtotalValoresUnicos)||0)]})]})})]})})]})},Dq=()=>{const{orcamentoAtual:n,dispatch:e,totais:t}=$l(),r=(o,a,l)=>{e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{[a]:a==="item"||a==="unidade"?l:parseFloat(l)||0}}})},i=()=>{const o=Math.max(...n.logistica.map(a=>a.id))+1;e({type:"UPDATE_LOGISTICA",payload:{id:o,updates:{item:"Novo Item",valor:0,unidade:"unidade",qtd:1,dias:1}}})},s=(o,a)=>{var d,p;const l=(p=(d=et.logistica)[o])==null?void 0:p.call(d,a),u="w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 font-sans";return l?`${u} border-red-300 focus:ring-red-500 bg-red-50`:`${u} border-relevo-border focus:ring-relevo-green-light`};return j.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[j.jsxs("div",{className:"flex justify-between items-center mb-4",children:[j.jsx("h2",{className:"text-xl font-bold text-relevo-text font-heading",children:"Logstica"}),j.jsx("button",{onClick:i,className:"bg-relevo-green hover:bg-relevo-green-light text-white font-bold py-2 px-4 rounded text-sm font-sans",children:"+ Adicionar Item"})]}),j.jsx("div",{className:"overflow-x-auto",children:j.jsxs("table",{className:"w-full",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-[#E8F5E9]",children:[j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Item"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Valor (R$)"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Unidade"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Quantidade"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Dias"}),j.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-[#2E3E31] font-sans",children:"Total (R$)"})]})}),j.jsx("tbody",{children:n.logistica.map(o=>{const a=o.valor*o.qtd*o.dias;return j.jsxs("tr",{className:"border-b border-relevo-border hover:bg-relevo-light-gray",children:[j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsx("input",{type:"text",value:o.item,onChange:l=>r(o.id,"item",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",placeholder:"Descrio do item"})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsx("input",{type:"number",value:o.valor,onChange:l=>r(o.id,"valor",l.target.value),className:s("valor",o.valor)})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsxs("select",{value:o.unidade,onChange:l=>r(o.id,"unidade",l.target.value),className:"w-full px-2 py-1 border border-relevo-border rounded text-sm font-sans",children:[j.jsx("option",{value:"dia/pessoa",children:"dia/pessoa"}),j.jsx("option",{value:"dia/veculo",children:"dia/veculo"}),j.jsx("option",{value:"pessoa",children:"pessoa"}),j.jsx("option",{value:"veculo",children:"veculo"}),j.jsx("option",{value:"dia",children:"dia"}),j.jsx("option",{value:"ms/veculo",children:"ms/veculo"}),j.jsx("option",{value:"lote",children:"lote"}),j.jsx("option",{value:"unidade",children:"unidade"}),j.jsx("option",{value:"km",children:"km"})]})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsx("input",{type:"number",value:o.qtd,onChange:l=>r(o.id,"qtd",l.target.value),className:s("qtd",o.qtd)})}),j.jsx("td",{className:"px-4 py-2 text-sm",children:j.jsx("input",{type:"number",value:o.dias,onChange:l=>r(o.id,"dias",l.target.value),className:s("dias",o.dias)})}),j.jsxs("td",{className:"px-4 py-2 text-sm font-semibold",children:["R$ ",at(a)]})]},o.id)})}),j.jsx("tfoot",{children:j.jsxs("tr",{className:"bg-[#2EAD60] font-semibold font-sans",children:[j.jsx("td",{colSpan:"5",className:"px-4 py-2 text-right text-white",children:"Total Logstica:"}),j.jsxs("td",{className:"px-4 py-2 text-sm text-white",children:["R$ ",at(t.subtotalLogistica)]})]})})]})})]})},Oq=()=>{const{user:n,loading:e}=M5();return e?j.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),j.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),j.jsx("p",{className:"text-sm text-relevo-text/70 mt-2 font-sans",children:"Conectando com autenticao compartilhada"})]})}):n?null:j.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center p-4",children:j.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md text-center",children:[j.jsx("div",{className:"text-6xl mb-4",children:""}),j.jsx("h2",{className:"text-xl font-bold text-relevo-green mb-4 font-heading",children:"Sistema de Oramentos"}),j.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4 mb-6",children:[j.jsx("p",{className:"text-sm text-blue-800 font-sans",children:j.jsx("strong",{children:"Para acessar o sistema de oramentos:"})}),j.jsxs("p",{className:"text-sm text-blue-800 mt-2 font-sans",children:["1. Faa login no ",j.jsx("a",{href:"https://portal.relevo.eco.br",target:"_blank",className:"text-[#2EAD60] underline font-bold",children:"Portal Relevo"}),j.jsx("br",{}),"2. Volte aqui e recarregue a pgina"]})]}),j.jsxs("div",{className:"space-y-3",children:[j.jsx("button",{onClick:()=>window.open("https://portal.relevo.eco.br","_blank"),className:"w-full bg-[#2EAD60] hover:bg-[#3CC373] text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" Fazer Login no Portal"}),j.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:" J fiz login, recarregar pgina"})]})]})})},Fq=()=>j.jsx("div",{className:"min-h-screen bg-relevo-background flex items-center justify-center",children:j.jsxs("div",{className:"text-center",children:[j.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2EAD60] mx-auto mb-4"}),j.jsx("p",{className:"text-relevo-text font-sans",children:"Verificando acesso ao sistema..."}),j.jsx("p",{className:"text-relevo-text/70 text-sm mt-2 font-sans",children:"Conectando com o Portal Relevo"})]})}),Mq=()=>{const{user:n,loading:e}=M5();return e?j.jsx(Fq,{}):n?j.jsx(IB,{children:j.jsxs("div",{className:"min-h-screen bg-relevo-background",children:[j.jsx(Nq,{}),j.jsxs("main",{className:"container mx-auto px-4 py-6",children:[j.jsx(kq,{}),j.jsx(Rq,{}),j.jsx(Cq,{}),j.jsx(Lq,{}),j.jsx(Dq,{})]})]})}):j.jsx(Oq,{})};function Vq(){return j.jsx(bB,{children:j.jsx(Mq,{})})}ry.createRoot(document.getElementById("root")).render(j.jsx(mR.StrictMode,{children:j.jsx(Vq,{})}));export{Yt as _,jq as c,Zk as g};
