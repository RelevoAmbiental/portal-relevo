<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />

  <script>
    /* ===================================================================
       404 UNIVERSAL PARA GH-PAGES (PORTAL + SUBAPPS)
       Intercepta qualquer rota inválida e restaura no SPA correto
       =================================================================== */

    const fullPath = location.pathname + location.search + location.hash;

    // Lista de sub-SPAs do Portal
    const subApps = [
      "/cronograma/",
      "/despesas/",
      "/orcamento/",
      "/inventario/"
    ];

    // Identifica qual SPA deve assumir a rota
    const match = subApps.find(prefix => fullPath.startsWith(prefix));

    if (match) {
      // Exemplo:
      // /cronograma/projetos → depois do prefixo vira "projetos"
      const relative = fullPath.replace(match, "");

      // Guarda para o React restaurar no carregamento
      sessionStorage.setItem("relevo_spa_path", "/" + relative);

      // Redireciona para o index da SPA correspondente
      window.location.replace(match);
    } 
    else {
      // Rotas comuns do portal caem no index geral
      window.location.replace("/");
    }
  </script>

</head>
<body></body>
</html>
