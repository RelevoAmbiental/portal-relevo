function r0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function i0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cg={exports:{}},tl={},hg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),s0=Symbol.for("react.portal"),o0=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),l0=Symbol.for("react.profiler"),u0=Symbol.for("react.provider"),c0=Symbol.for("react.context"),h0=Symbol.for("react.forward_ref"),d0=Symbol.for("react.suspense"),f0=Symbol.for("react.memo"),p0=Symbol.for("react.lazy"),Mf=Symbol.iterator;function m0(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fg=Object.assign,pg={};function Ii(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||dg}Ii.prototype.isReactComponent={};Ii.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ii.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mg(){}mg.prototype=Ii.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||dg}var ah=oh.prototype=new mg;ah.constructor=oh;fg(ah,Ii.prototype);ah.isPureReactComponent=!0;var Ff=Array.isArray,gg=Object.prototype.hasOwnProperty,lh={current:null},yg={key:!0,ref:!0,__self:!0,__source:!0};function vg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gg.call(e,r)&&!yg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ys,type:t,key:s,ref:o,props:i,_owner:lh.current}}function g0(t,e){return{$$typeof:Ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ys}function y0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bf=/\/+/g;function ou(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y0(""+t.key):e.toString(36)}function Jo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ys:case s0:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ou(o,0):r,Ff(i)?(n="",t!=null&&(n=t.replace(bf,"$&/")+"/"),Jo(i,e,n,"",function(h){return h})):i!=null&&(uh(i)&&(i=g0(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ff(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+ou(s,l);o+=Jo(s,e,n,u,i)}else if(u=m0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+ou(s,l++),o+=Jo(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xo(t,e,n){if(t==null)return t;var r=[],i=0;return Jo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},Zo={transition:null},_0={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Zo,ReactCurrentOwner:lh};function _g(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:xo,forEach:function(t,e,n){xo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xo(t,function(){e++}),e},toArray:function(t){return xo(t,function(e){return e})||[]},only:function(t){if(!uh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Ii;Z.Fragment=o0;Z.Profiler=l0;Z.PureComponent=oh;Z.StrictMode=a0;Z.Suspense=d0;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;Z.act=_g;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)gg.call(e,u)&&!yg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ys,type:t.type,key:i,ref:s,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:c0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u0,_context:t},t.Consumer=t};Z.createElement=vg;Z.createFactory=function(t){var e=vg.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:h0,render:t}};Z.isValidElement=uh;Z.lazy=function(t){return{$$typeof:p0,_payload:{_status:-1,_result:t},_init:v0}};Z.memo=function(t,e){return{$$typeof:f0,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Zo.transition;Zo.transition={};try{t()}finally{Zo.transition=e}};Z.unstable_act=_g;Z.useCallback=function(t,e){return it.current.useCallback(t,e)};Z.useContext=function(t){return it.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return it.current.useDeferredValue(t)};Z.useEffect=function(t,e){return it.current.useEffect(t,e)};Z.useId=function(){return it.current.useId()};Z.useImperativeHandle=function(t,e,n){return it.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return it.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return it.current.useReducer(t,e,n)};Z.useRef=function(t){return it.current.useRef(t)};Z.useState=function(t){return it.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return it.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return it.current.useTransition()};Z.version="18.3.1";hg.exports=Z;var L=hg.exports;const Eg=i0(L),E0=r0({__proto__:null,default:Eg},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=L,T0=Symbol.for("react.element"),S0=Symbol.for("react.fragment"),I0=Object.prototype.hasOwnProperty,A0=w0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C0={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)I0.call(e,r)&&!C0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:T0,type:t,key:s,ref:o,props:i,_owner:A0.current}}tl.Fragment=S0;tl.jsx=wg;tl.jsxs=wg;cg.exports=tl;var m=cg.exports,Bu={},Tg={exports:{}},Et={},Sg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var Y=z.length;z.push(G);e:for(;0<Y;){var ge=Y-1>>>1,ae=z[ge];if(0<i(ae,G))z[ge]=G,z[Y]=ae,Y=ge;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Y=z.pop();if(Y!==G){z[0]=Y;e:for(var ge=0,ae=z.length,Ie=ae>>>1;ge<Ie;){var Jt=2*(ge+1)-1,Zt=z[Jt],en=Jt+1,tn=z[en];if(0>i(Zt,Y))en<ae&&0>i(tn,Zt)?(z[ge]=tn,z[en]=Y,ge=en):(z[ge]=Zt,z[Jt]=Y,ge=Jt);else if(en<ae&&0>i(tn,Y))z[ge]=tn,z[en]=Y,ge=en;else break e}}return G}function i(z,G){var Y=z.sortIndex-G.sortIndex;return Y!==0?Y:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,g=3,T=!1,P=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=z)r(h),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(h)}}function N(z){if(R=!1,E(z),!P)if(n(u)!==null)P=!0,ji(O);else{var G=n(h);G!==null&&Yt(N,G.startTime-z)}}function O(z,G){P=!1,R&&(R=!1,w(_),_=-1),T=!0;var Y=g;try{for(E(G),p=n(u);p!==null&&(!(p.expirationTime>G)||z&&!x());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,g=p.priorityLevel;var ae=ge(p.expirationTime<=G);G=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(u)&&r(u),E(G)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var Jt=n(h);Jt!==null&&Yt(N,Jt.startTime-G),Ie=!1}return Ie}finally{p=null,g=Y,T=!1}}var F=!1,S=null,_=-1,I=5,A=-1;function x(){return!(t.unstable_now()-A<I)}function V(){if(S!==null){var z=t.unstable_now();A=z;var G=!0;try{G=S(!0,z)}finally{G?C():(F=!1,S=null)}}else F=!1}var C;if(typeof v=="function")C=function(){v(V)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,sr=Tt.port2;Tt.port1.onmessage=V,C=function(){sr.postMessage(null)}}else C=function(){k(V,0)};function ji(z){S=z,F||(F=!0,C())}function Yt(z,G){_=k(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,ji(O))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var Y=g;g=G;try{return z()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=g;g=z;try{return G()}finally{g=Y}},t.unstable_scheduleCallback=function(z,G,Y){var ge=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ge+Y:ge):Y=ge,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,z={id:f++,callback:G,priorityLevel:z,startTime:Y,expirationTime:ae,sortIndex:-1},Y>ge?(z.sortIndex=Y,e(h,z),n(u)===null&&z===n(h)&&(R?(w(_),_=-1):R=!0,Yt(N,Y-ge))):(z.sortIndex=ae,e(u,z),P||T||(P=!0,ji(O))),z},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(z){var G=g;return function(){var Y=g;g=G;try{return z.apply(this,arguments)}finally{g=Y}}}})(Ig);Sg.exports=Ig;var P0=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0=L,_t=P0;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ag=new Set,Is={};function Cr(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(Is[t]=e,t=0;t<e.length;t++)Ag.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=Object.prototype.hasOwnProperty,x0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},Bf={};function k0(t){return zu.call(Bf,t)?!0:zu.call(Uf,t)?!1:x0.test(t)?Bf[t]=!0:(Uf[t]=!0,!1)}function N0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D0(t,e,n,r){if(e===null||typeof e>"u"||N0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function st(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new st(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new st(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new st(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new st(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new st(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new st(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new st(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new st(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new st(t,5,!1,t.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ch,hh);$e[e]=new st(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ch,hh);$e[e]=new st(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ch,hh);$e[e]=new st(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new st(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new st(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,n,r){var i=$e.hasOwnProperty(e)?$e[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D0(e,n,i,r)&&(n=null),r||i===null?k0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yn=R0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ko=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),$u=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Rg=Symbol.for("react.offscreen"),zf=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=zf&&t[zf]||t["@@iterator"],typeof t=="function"?t:null)}var _e=Object.assign,au;function rs(t){if(au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);au=e&&e[1]||""}return`
`+au+t}var lu=!1;function uu(t,e){if(!t||lu)return"";lu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{lu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rs(t):""}function V0(t){switch(t.tag){case 5:return rs(t.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 2:case 15:return t=uu(t.type,!1),t;case 11:return t=uu(t.type.render,!1),t;case 1:return t=uu(t.type,!0),t;default:return""}}function qu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hr:return"Fragment";case $r:return"Portal";case $u:return"Profiler";case fh:return"StrictMode";case Hu:return"Suspense";case Wu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pg:return(t.displayName||"Context")+".Consumer";case Cg:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:qu(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return qu(t(e))}catch{}}return null}function j0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qu(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L0(t){var e=xg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function No(t){t._valueTracker||(t._valueTracker=L0(t))}function kg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qu(t,e){var n=e.checked;return _e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $f(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ng(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function Gu(t,e){Ng(t,e);var n=Hn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ku(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ku(t,e.type,Hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ku(t,e,n){(e!=="number"||ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var is=Array.isArray;function ti(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return _e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(is(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hn(n)}}function Dg(t,e){var n=Hn(e.value),r=Hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,jg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function As(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O0=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(t){O0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cs[e]=cs[t]})});function Lg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cs.hasOwnProperty(t)&&cs[t]?(""+e).trim():e+"px"}function Og(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Lg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var M0=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ju(t,e){if(e){if(M0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tc=null,ni=null,ri=null;function Qf(t){if(t=eo(t)){if(typeof tc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ol(e),tc(t.stateNode,t.type,e))}}function Mg(t){ni?ri?ri.push(t):ri=[t]:ni=t}function Fg(){if(ni){var t=ni,e=ri;if(ri=ni=null,Qf(t),e)for(t=0;t<e.length;t++)Qf(e[t])}}function bg(t,e){return t(e)}function Ug(){}var cu=!1;function Bg(t,e,n){if(cu)return t(e,n);cu=!0;try{return bg(t,e,n)}finally{cu=!1,(ni!==null||ri!==null)&&(Ug(),Fg())}}function Cs(t,e){var n=t.stateNode;if(n===null)return null;var r=ol(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var nc=!1;if(cn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){nc=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{nc=!1}function F0(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var hs=!1,ya=null,va=!1,rc=null,b0={onError:function(t){hs=!0,ya=t}};function U0(t,e,n,r,i,s,o,l,u){hs=!1,ya=null,F0.apply(b0,arguments)}function B0(t,e,n,r,i,s,o,l,u){if(U0.apply(this,arguments),hs){if(hs){var h=ya;hs=!1,ya=null}else throw Error(U(198));va||(va=!0,rc=h)}}function Pr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gf(t){if(Pr(t)!==t)throw Error(U(188))}function z0(t){var e=t.alternate;if(!e){if(e=Pr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gf(i),t;if(s===r)return Gf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function $g(t){return t=z0(t),t!==null?Hg(t):null}function Hg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hg(t);if(e!==null)return e;t=t.sibling}return null}var Wg=_t.unstable_scheduleCallback,Kf=_t.unstable_cancelCallback,$0=_t.unstable_shouldYield,H0=_t.unstable_requestPaint,Ce=_t.unstable_now,W0=_t.unstable_getCurrentPriorityLevel,yh=_t.unstable_ImmediatePriority,qg=_t.unstable_UserBlockingPriority,_a=_t.unstable_NormalPriority,q0=_t.unstable_LowPriority,Qg=_t.unstable_IdlePriority,nl=null,$t=null;function Q0(t){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(nl,t,void 0,(t.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:X0,G0=Math.log,K0=Math.LN2;function X0(t){return t>>>=0,t===0?32:31-(G0(t)/K0|0)|0}var Vo=64,jo=4194304;function ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ss(l):(s&=o,s!==0&&(r=ss(s)))}else o=n&~i,o!==0?r=ss(o):s!==0&&(r=ss(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Lt(e),i=1<<n,r|=t[n],e&=~i;return r}function Y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Lt(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Y0(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gg(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Lt(e),t[e]=n}function Z0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Lt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Lt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var oe=0;function Kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xg,_h,Yg,Jg,Zg,sc=!1,Lo=[],Nn=null,Dn=null,Vn=null,Ps=new Map,Rs=new Map,An=[],ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Ps.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(e.pointerId)}}function Xi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eo(e),e!==null&&_h(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tw(t,e,n,r,i){switch(e){case"focusin":return Nn=Xi(Nn,t,e,n,r,i),!0;case"dragenter":return Dn=Xi(Dn,t,e,n,r,i),!0;case"mouseover":return Vn=Xi(Vn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ps.set(s,Xi(Ps.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rs.set(s,Xi(Rs.get(s)||null,t,e,n,r,i)),!0}return!1}function ey(t){var e=dr(t.target);if(e!==null){var n=Pr(e);if(n!==null){if(e=n.tag,e===13){if(e=zg(n),e!==null){t.blockedOn=e,Zg(t.priority,function(){Yg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ec=r,n.target.dispatchEvent(r),ec=null}else return e=eo(n),e!==null&&_h(e),t.blockedOn=n,!1;e.shift()}return!0}function Yf(t,e,n){ea(t)&&n.delete(e)}function nw(){sc=!1,Nn!==null&&ea(Nn)&&(Nn=null),Dn!==null&&ea(Dn)&&(Dn=null),Vn!==null&&ea(Vn)&&(Vn=null),Ps.forEach(Yf),Rs.forEach(Yf)}function Yi(t,e){t.blockedOn===e&&(t.blockedOn=null,sc||(sc=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,nw)))}function xs(t){function e(i){return Yi(i,t)}if(0<Lo.length){Yi(Lo[0],t);for(var n=1;n<Lo.length;n++){var r=Lo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nn!==null&&Yi(Nn,t),Dn!==null&&Yi(Dn,t),Vn!==null&&Yi(Vn,t),Ps.forEach(e),Rs.forEach(e),n=0;n<An.length;n++)r=An[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)ey(n),n.blockedOn===null&&An.shift()}var ii=yn.ReactCurrentBatchConfig,wa=!0;function rw(t,e,n,r){var i=oe,s=ii.transition;ii.transition=null;try{oe=1,Eh(t,e,n,r)}finally{oe=i,ii.transition=s}}function iw(t,e,n,r){var i=oe,s=ii.transition;ii.transition=null;try{oe=4,Eh(t,e,n,r)}finally{oe=i,ii.transition=s}}function Eh(t,e,n,r){if(wa){var i=oc(t,e,n,r);if(i===null)wu(t,e,r,Ta,n),Xf(t,r);else if(tw(i,t,e,n,r))r.stopPropagation();else if(Xf(t,r),e&4&&-1<ew.indexOf(t)){for(;i!==null;){var s=eo(i);if(s!==null&&Xg(s),s=oc(t,e,n,r),s===null&&wu(t,e,r,Ta,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var Ta=null;function oc(t,e,n,r){if(Ta=null,t=gh(r),t=dr(t),t!==null)if(e=Pr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ta=t,null}function ty(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W0()){case yh:return 1;case qg:return 4;case _a:case q0:return 16;case Qg:return 536870912;default:return 16}default:return 16}}var Pn=null,wh=null,ta=null;function ny(){if(ta)return ta;var t,e=wh,n=e.length,r,i="value"in Pn?Pn.value:Pn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ta=i.slice(t,1<r?1-r:void 0)}function na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oo(){return!0}function Jf(){return!1}function wt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oo:Jf,this.isPropagationStopped=Jf,this}return _e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),e}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Th=wt(Ai),Zs=_e({},Ai,{view:0,detail:0}),sw=wt(Zs),du,fu,Ji,rl=_e({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(du=t.screenX-Ji.screenX,fu=t.screenY-Ji.screenY):fu=du=0,Ji=t),du)},movementY:function(t){return"movementY"in t?t.movementY:fu}}),Zf=wt(rl),ow=_e({},rl,{dataTransfer:0}),aw=wt(ow),lw=_e({},Zs,{relatedTarget:0}),pu=wt(lw),uw=_e({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),cw=wt(uw),hw=_e({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dw=wt(hw),fw=_e({},Ai,{data:0}),ep=wt(fw),pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gw[t])?!!e[t]:!1}function Sh(){return yw}var vw=_e({},Zs,{key:function(t){if(t.key){var e=pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_w=wt(vw),Ew=_e({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tp=wt(Ew),ww=_e({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),Tw=wt(ww),Sw=_e({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iw=wt(Sw),Aw=_e({},rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cw=wt(Aw),Pw=[9,13,27,32],Ih=cn&&"CompositionEvent"in window,ds=null;cn&&"documentMode"in document&&(ds=document.documentMode);var Rw=cn&&"TextEvent"in window&&!ds,ry=cn&&(!Ih||ds&&8<ds&&11>=ds),np=" ",rp=!1;function iy(t,e){switch(t){case"keyup":return Pw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wr=!1;function xw(t,e){switch(t){case"compositionend":return sy(e);case"keypress":return e.which!==32?null:(rp=!0,np);case"textInput":return t=e.data,t===np&&rp?null:t;default:return null}}function kw(t,e){if(Wr)return t==="compositionend"||!Ih&&iy(t,e)?(t=ny(),ta=wh=Pn=null,Wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ry&&e.locale!=="ko"?null:e.data;default:return null}}var Nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nw[t.type]:e==="textarea"}function oy(t,e,n,r){Mg(r),e=Sa(e,"onChange"),0<e.length&&(n=new Th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fs=null,ks=null;function Dw(t){yy(t,0)}function il(t){var e=Gr(t);if(kg(e))return t}function Vw(t,e){if(t==="change")return e}var ay=!1;if(cn){var mu;if(cn){var gu="oninput"in document;if(!gu){var sp=document.createElement("div");sp.setAttribute("oninput","return;"),gu=typeof sp.oninput=="function"}mu=gu}else mu=!1;ay=mu&&(!document.documentMode||9<document.documentMode)}function op(){fs&&(fs.detachEvent("onpropertychange",ly),ks=fs=null)}function ly(t){if(t.propertyName==="value"&&il(ks)){var e=[];oy(e,ks,t,gh(t)),Bg(Dw,e)}}function jw(t,e,n){t==="focusin"?(op(),fs=e,ks=n,fs.attachEvent("onpropertychange",ly)):t==="focusout"&&op()}function Lw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return il(ks)}function Ow(t,e){if(t==="click")return il(e)}function Mw(t,e){if(t==="input"||t==="change")return il(e)}function Fw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:Fw;function Ns(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zu.call(e,i)||!Ft(t[i],e[i]))return!1}return!0}function ap(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lp(t,e){var n=ap(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ap(n)}}function uy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cy(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ga(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bw(t){var e=cy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uy(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=lp(n,s);var o=lp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Uw=cn&&"documentMode"in document&&11>=document.documentMode,qr=null,ac=null,ps=null,lc=!1;function up(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lc||qr==null||qr!==ga(r)||(r=qr,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ps&&Ns(ps,r)||(ps=r,r=Sa(ac,"onSelect"),0<r.length&&(e=new Th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qr)))}function Mo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qr={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},yu={},hy={};cn&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function sl(t){if(yu[t])return yu[t];if(!Qr[t])return t;var e=Qr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hy)return yu[t]=e[n];return t}var dy=sl("animationend"),fy=sl("animationiteration"),py=sl("animationstart"),my=sl("transitionend"),gy=new Map,cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){gy.set(t,e),Cr(e,[t])}for(var vu=0;vu<cp.length;vu++){var _u=cp[vu],Bw=_u.toLowerCase(),zw=_u[0].toUpperCase()+_u.slice(1);Zn(Bw,"on"+zw)}Zn(dy,"onAnimationEnd");Zn(fy,"onAnimationIteration");Zn(py,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(my,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$w=new Set("cancel close invalid load scroll toggle".split(" ").concat(os));function hp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,B0(r,e,void 0,t),t.currentTarget=null}function yy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;hp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;hp(i,l,h),s=u}}}if(va)throw t=rc,va=!1,rc=null,t}function he(t,e){var n=e[fc];n===void 0&&(n=e[fc]=new Set);var r=t+"__bubble";n.has(r)||(vy(e,t,2,!1),n.add(r))}function Eu(t,e,n){var r=0;e&&(r|=4),vy(n,t,r,e)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[Fo]){t[Fo]=!0,Ag.forEach(function(n){n!=="selectionchange"&&($w.has(n)||Eu(n,!1,t),Eu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fo]||(e[Fo]=!0,Eu("selectionchange",!1,e))}}function vy(t,e,n,r){switch(ty(e)){case 1:var i=rw;break;case 4:i=iw;break;default:i=Eh}n=i.bind(null,e,n,t),i=void 0,!nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=dr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Bg(function(){var h=s,f=gh(n),p=[];e:{var g=gy.get(t);if(g!==void 0){var T=Th,P=t;switch(t){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":T=_w;break;case"focusin":P="focus",T=pu;break;case"focusout":P="blur",T=pu;break;case"beforeblur":case"afterblur":T=pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Tw;break;case dy:case fy:case py:T=cw;break;case my:T=Iw;break;case"scroll":T=sw;break;case"wheel":T=Cw;break;case"copy":case"cut":case"paste":T=dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=tp}var R=(e&4)!==0,k=!R&&t==="scroll",w=R?g!==null?g+"Capture":null:g;R=[];for(var v=h,E;v!==null;){E=v;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,w!==null&&(N=Cs(v,w),N!=null&&R.push(Vs(v,N,E)))),k)break;v=v.return}0<R.length&&(g=new T(g,P,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==ec&&(P=n.relatedTarget||n.fromElement)&&(dr(P)||P[hn]))break e;if((T||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?dr(P):null,P!==null&&(k=Pr(P),P!==k||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(R=Zf,N="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=tp,N="onPointerLeave",w="onPointerEnter",v="pointer"),k=T==null?g:Gr(T),E=P==null?g:Gr(P),g=new R(N,v+"leave",T,n,f),g.target=k,g.relatedTarget=E,N=null,dr(f)===h&&(R=new R(w,v+"enter",P,n,f),R.target=E,R.relatedTarget=k,N=R),k=N,T&&P)t:{for(R=T,w=P,v=0,E=R;E;E=Or(E))v++;for(E=0,N=w;N;N=Or(N))E++;for(;0<v-E;)R=Or(R),v--;for(;0<E-v;)w=Or(w),E--;for(;v--;){if(R===w||w!==null&&R===w.alternate)break t;R=Or(R),w=Or(w)}R=null}else R=null;T!==null&&dp(p,g,T,R,!1),P!==null&&k!==null&&dp(p,k,P,R,!0)}}e:{if(g=h?Gr(h):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var O=Vw;else if(ip(g))if(ay)O=Mw;else{O=Lw;var F=jw}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=Ow);if(O&&(O=O(t,h))){oy(p,O,n,f);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Ku(g,"number",g.value)}switch(F=h?Gr(h):window,t){case"focusin":(ip(F)||F.contentEditable==="true")&&(qr=F,ac=h,ps=null);break;case"focusout":ps=ac=qr=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,up(p,n,f);break;case"selectionchange":if(Uw)break;case"keydown":case"keyup":up(p,n,f)}var S;if(Ih)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wr?iy(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(ry&&n.locale!=="ko"&&(Wr||_!=="onCompositionStart"?_==="onCompositionEnd"&&Wr&&(S=ny()):(Pn=f,wh="value"in Pn?Pn.value:Pn.textContent,Wr=!0)),F=Sa(h,_),0<F.length&&(_=new ep(_,t,null,n,f),p.push({event:_,listeners:F}),S?_.data=S:(S=sy(n),S!==null&&(_.data=S)))),(S=Rw?xw(t,n):kw(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(f=new ep("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=S))}yy(p,e)})}function Vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cs(t,n),s!=null&&r.unshift(Vs(t,s,i)),s=Cs(t,e),s!=null&&r.push(Vs(t,s,i))),t=t.return}return r}function Or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Cs(n,s),u!=null&&o.unshift(Vs(n,u,l))):i||(u=Cs(n,s),u!=null&&o.push(Vs(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function fp(t){return(typeof t=="string"?t:""+t).replace(Hw,`
`).replace(Ww,"")}function bo(t,e,n){if(e=fp(e),fp(t)!==e&&n)throw Error(U(425))}function Ia(){}var uc=null,cc=null;function hc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,pp=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof pp<"u"?function(t){return pp.resolve(null).then(t).catch(Gw)}:dc;function Gw(t){setTimeout(function(){throw t})}function Tu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xs(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),zt="__reactFiber$"+Ci,js="__reactProps$"+Ci,hn="__reactContainer$"+Ci,fc="__reactEvents$"+Ci,Kw="__reactListeners$"+Ci,Xw="__reactHandles$"+Ci;function dr(t){var e=t[zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hn]||n[zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mp(t);t!==null;){if(n=t[zt])return n;t=mp(t)}return e}t=n,n=t.parentNode}return null}function eo(t){return t=t[zt]||t[hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ol(t){return t[js]||null}var pc=[],Kr=-1;function er(t){return{current:t}}function pe(t){0>Kr||(t.current=pc[Kr],pc[Kr]=null,Kr--)}function ue(t,e){Kr++,pc[Kr]=t.current,t.current=e}var Wn={},Ze=er(Wn),ht=er(!1),vr=Wn;function hi(t,e){var n=t.type.contextTypes;if(!n)return Wn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dt(t){return t=t.childContextTypes,t!=null}function Aa(){pe(ht),pe(Ze)}function gp(t,e,n){if(Ze.current!==Wn)throw Error(U(168));ue(Ze,e),ue(ht,n)}function _y(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,j0(t)||"Unknown",i));return _e({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,vr=Ze.current,ue(Ze,t),ue(ht,ht.current),!0}function yp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=_y(t,e,vr),r.__reactInternalMemoizedMergedChildContext=t,pe(ht),pe(Ze),ue(Ze,t)):pe(ht),ue(ht,n)}var on=null,al=!1,Su=!1;function Ey(t){on===null?on=[t]:on.push(t)}function Yw(t){al=!0,Ey(t)}function tr(){if(!Su&&on!==null){Su=!0;var t=0,e=oe;try{var n=on;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}on=null,al=!1}catch(i){throw on!==null&&(on=on.slice(t+1)),Wg(yh,tr),i}finally{oe=e,Su=!1}}return null}var Xr=[],Yr=0,Pa=null,Ra=0,St=[],It=0,_r=null,an=1,ln="";function cr(t,e){Xr[Yr++]=Ra,Xr[Yr++]=Pa,Pa=t,Ra=e}function wy(t,e,n){St[It++]=an,St[It++]=ln,St[It++]=_r,_r=t;var r=an;t=ln;var i=32-Lt(r)-1;r&=~(1<<i),n+=1;var s=32-Lt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,an=1<<32-Lt(e)+i|n<<i|r,ln=s+t}else an=1<<s|n<<i|r,ln=t}function Ch(t){t.return!==null&&(cr(t,1),wy(t,1,0))}function Ph(t){for(;t===Pa;)Pa=Xr[--Yr],Xr[Yr]=null,Ra=Xr[--Yr],Xr[Yr]=null;for(;t===_r;)_r=St[--It],St[It]=null,ln=St[--It],St[It]=null,an=St[--It],St[It]=null}var vt=null,gt=null,me=!1,jt=null;function Ty(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,gt=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_r!==null?{id:an,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vt=t,gt=null,!0):!1;default:return!1}}function mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gc(t){if(me){var e=gt;if(e){var n=e;if(!vp(t,e)){if(mc(t))throw Error(U(418));e=jn(n.nextSibling);var r=vt;e&&vp(t,e)?Ty(r,n):(t.flags=t.flags&-4097|2,me=!1,vt=t)}}else{if(mc(t))throw Error(U(418));t.flags=t.flags&-4097|2,me=!1,vt=t}}}function _p(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function Uo(t){if(t!==vt)return!1;if(!me)return _p(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hc(t.type,t.memoizedProps)),e&&(e=gt)){if(mc(t))throw Sy(),Error(U(418));for(;e;)Ty(t,e),e=jn(e.nextSibling)}if(_p(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=vt?jn(t.stateNode.nextSibling):null;return!0}function Sy(){for(var t=gt;t;)t=jn(t.nextSibling)}function di(){gt=vt=null,me=!1}function Rh(t){jt===null?jt=[t]:jt.push(t)}var Jw=yn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ep(t){var e=t._init;return e(t._payload)}function Iy(t){function e(w,v){if(t){var E=w.deletions;E===null?(w.deletions=[v],w.flags|=16):E.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=Fn(w,v),w.index=0,w.sibling=null,w}function s(w,v,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<v?(w.flags|=2,v):E):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,E,N){return v===null||v.tag!==6?(v=ku(E,w.mode,N),v.return=w,v):(v=i(v,E),v.return=w,v)}function u(w,v,E,N){var O=E.type;return O===Hr?f(w,v,E.props.children,N,E.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Sn&&Ep(O)===v.type)?(N=i(v,E.props),N.ref=Zi(w,v,E),N.return=w,N):(N=ua(E.type,E.key,E.props,null,w.mode,N),N.ref=Zi(w,v,E),N.return=w,N)}function h(w,v,E,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Nu(E,w.mode,N),v.return=w,v):(v=i(v,E.children||[]),v.return=w,v)}function f(w,v,E,N,O){return v===null||v.tag!==7?(v=yr(E,w.mode,N,O),v.return=w,v):(v=i(v,E),v.return=w,v)}function p(w,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ku(""+v,w.mode,E),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ko:return E=ua(v.type,v.key,v.props,null,w.mode,E),E.ref=Zi(w,null,v),E.return=w,E;case $r:return v=Nu(v,w.mode,E),v.return=w,v;case Sn:var N=v._init;return p(w,N(v._payload),E)}if(is(v)||Gi(v))return v=yr(v,w.mode,E,null),v.return=w,v;Bo(w,v)}return null}function g(w,v,E,N){var O=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:l(w,v,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ko:return E.key===O?u(w,v,E,N):null;case $r:return E.key===O?h(w,v,E,N):null;case Sn:return O=E._init,g(w,v,O(E._payload),N)}if(is(E)||Gi(E))return O!==null?null:f(w,v,E,N,null);Bo(w,E)}return null}function T(w,v,E,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(E)||null,l(v,w,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ko:return w=w.get(N.key===null?E:N.key)||null,u(v,w,N,O);case $r:return w=w.get(N.key===null?E:N.key)||null,h(v,w,N,O);case Sn:var F=N._init;return T(w,v,E,F(N._payload),O)}if(is(N)||Gi(N))return w=w.get(E)||null,f(v,w,N,O,null);Bo(v,N)}return null}function P(w,v,E,N){for(var O=null,F=null,S=v,_=v=0,I=null;S!==null&&_<E.length;_++){S.index>_?(I=S,S=null):I=S.sibling;var A=g(w,S,E[_],N);if(A===null){S===null&&(S=I);break}t&&S&&A.alternate===null&&e(w,S),v=s(A,v,_),F===null?O=A:F.sibling=A,F=A,S=I}if(_===E.length)return n(w,S),me&&cr(w,_),O;if(S===null){for(;_<E.length;_++)S=p(w,E[_],N),S!==null&&(v=s(S,v,_),F===null?O=S:F.sibling=S,F=S);return me&&cr(w,_),O}for(S=r(w,S);_<E.length;_++)I=T(S,w,_,E[_],N),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?_:I.key),v=s(I,v,_),F===null?O=I:F.sibling=I,F=I);return t&&S.forEach(function(x){return e(w,x)}),me&&cr(w,_),O}function R(w,v,E,N){var O=Gi(E);if(typeof O!="function")throw Error(U(150));if(E=O.call(E),E==null)throw Error(U(151));for(var F=O=null,S=v,_=v=0,I=null,A=E.next();S!==null&&!A.done;_++,A=E.next()){S.index>_?(I=S,S=null):I=S.sibling;var x=g(w,S,A.value,N);if(x===null){S===null&&(S=I);break}t&&S&&x.alternate===null&&e(w,S),v=s(x,v,_),F===null?O=x:F.sibling=x,F=x,S=I}if(A.done)return n(w,S),me&&cr(w,_),O;if(S===null){for(;!A.done;_++,A=E.next())A=p(w,A.value,N),A!==null&&(v=s(A,v,_),F===null?O=A:F.sibling=A,F=A);return me&&cr(w,_),O}for(S=r(w,S);!A.done;_++,A=E.next())A=T(S,w,_,A.value,N),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?_:A.key),v=s(A,v,_),F===null?O=A:F.sibling=A,F=A);return t&&S.forEach(function(V){return e(w,V)}),me&&cr(w,_),O}function k(w,v,E,N){if(typeof E=="object"&&E!==null&&E.type===Hr&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ko:e:{for(var O=E.key,F=v;F!==null;){if(F.key===O){if(O=E.type,O===Hr){if(F.tag===7){n(w,F.sibling),v=i(F,E.props.children),v.return=w,w=v;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Sn&&Ep(O)===F.type){n(w,F.sibling),v=i(F,E.props),v.ref=Zi(w,F,E),v.return=w,w=v;break e}n(w,F);break}else e(w,F);F=F.sibling}E.type===Hr?(v=yr(E.props.children,w.mode,N,E.key),v.return=w,w=v):(N=ua(E.type,E.key,E.props,null,w.mode,N),N.ref=Zi(w,v,E),N.return=w,w=N)}return o(w);case $r:e:{for(F=E.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(w,v.sibling),v=i(v,E.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Nu(E,w.mode,N),v.return=w,w=v}return o(w);case Sn:return F=E._init,k(w,v,F(E._payload),N)}if(is(E))return P(w,v,E,N);if(Gi(E))return R(w,v,E,N);Bo(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,E),v.return=w,w=v):(n(w,v),v=ku(E,w.mode,N),v.return=w,w=v),o(w)):n(w,v)}return k}var fi=Iy(!0),Ay=Iy(!1),xa=er(null),ka=null,Jr=null,xh=null;function kh(){xh=Jr=ka=null}function Nh(t){var e=xa.current;pe(xa),t._currentValue=e}function yc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function si(t,e){ka=t,xh=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ct=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(xh!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(ka===null)throw Error(U(308));Jr=t,ka.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var fr=null;function Dh(t){fr===null?fr=[t]:fr.push(t)}function Cy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dh(e)):(n.next=i.next,i.next=n),e.interleaved=n,dn(t,r)}function dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function Vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dn(t,n)}return i=r.interleaved,i===null?(e.next=e,Dh(r)):(e.next=i.next,i.next=e),r.interleaved=e,dn(t,n)}function ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function wp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var i=t.updateQueue;In=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var g=l.lane,T=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,R=l;switch(g=e,T=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){p=P.call(T,p,g);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,g=typeof P=="function"?P.call(T,p,g):P,g==null)break e;p=_e({},p,g);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wr|=o,t.lanes=o,t.memoizedState=p}}function Tp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var to={},Ht=er(to),Ls=er(to),Os=er(to);function pr(t){if(t===to)throw Error(U(174));return t}function jh(t,e){switch(ue(Os,e),ue(Ls,t),ue(Ht,to),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yu(e,t)}pe(Ht),ue(Ht,e)}function pi(){pe(Ht),pe(Ls),pe(Os)}function Ry(t){pr(Os.current);var e=pr(Ht.current),n=Yu(e,t.type);e!==n&&(ue(Ls,t),ue(Ht,n))}function Lh(t){Ls.current===t&&(pe(Ht),pe(Ls))}var ye=er(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Oh(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var ia=yn.ReactCurrentDispatcher,Au=yn.ReactCurrentBatchConfig,Er=0,ve=null,ke=null,Le=null,Va=!1,ms=!1,Ms=0,Zw=0;function Ge(){throw Error(U(321))}function Mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ft(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,i,s){if(Er=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=t===null||t.memoizedState===null?rT:iT,t=n(r,i),ms){s=0;do{if(ms=!1,Ms=0,25<=s)throw Error(U(301));s+=1,Le=ke=null,e.updateQueue=null,ia.current=sT,t=n(r,i)}while(ms)}if(ia.current=ja,e=ke!==null&&ke.next!==null,Er=0,Le=ke=ve=null,Va=!1,e)throw Error(U(300));return t}function bh(){var t=Ms!==0;return Ms=0,t}function Ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ve.memoizedState=Le=t:Le=Le.next=t,Le}function xt(){if(ke===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Le===null?ve.memoizedState:Le.next;if(e!==null)Le=e,ke=t;else{if(t===null)throw Error(U(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Le===null?ve.memoizedState=Le=t:Le=Le.next=t}return Le}function Fs(t,e){return typeof e=="function"?e(t):e}function Cu(t){var e=xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((Er&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ve.lanes|=f,wr|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Ft(r,e.memoizedState)||(ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,wr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ft(s,e.memoizedState)||(ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xy(){}function ky(t,e){var n=ve,r=xt(),i=e(),s=!Ft(r.memoizedState,i);if(s&&(r.memoizedState=i,ct=!0),r=r.queue,Uh(Vy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,bs(9,Dy.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(U(349));Er&30||Ny(n,e,i)}return i}function Ny(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dy(t,e,n,r){e.value=n,e.getSnapshot=r,jy(e)&&Ly(t)}function Vy(t,e,n){return n(function(){jy(e)&&Ly(t)})}function jy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ft(t,n)}catch{return!0}}function Ly(t){var e=dn(t,1);e!==null&&Ot(e,t,1,-1)}function Sp(t){var e=Ut();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:t},e.queue=t,t=t.dispatch=nT.bind(null,ve,t),[e.memoizedState,t]}function bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oy(){return xt().memoizedState}function sa(t,e,n,r){var i=Ut();ve.flags|=t,i.memoizedState=bs(1|e,n,void 0,r===void 0?null:r)}function ll(t,e,n,r){var i=xt();r=r===void 0?null:r;var s=void 0;if(ke!==null){var o=ke.memoizedState;if(s=o.destroy,r!==null&&Mh(r,o.deps)){i.memoizedState=bs(e,n,s,r);return}}ve.flags|=t,i.memoizedState=bs(1|e,n,s,r)}function Ip(t,e){return sa(8390656,8,t,e)}function Uh(t,e){return ll(2048,8,t,e)}function My(t,e){return ll(4,2,t,e)}function Fy(t,e){return ll(4,4,t,e)}function by(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uy(t,e,n){return n=n!=null?n.concat([t]):null,ll(4,4,by.bind(null,e,t),n)}function Bh(){}function By(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zy(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $y(t,e,n){return Er&21?(Ft(n,e)||(n=Gg(),ve.lanes|=n,wr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=n)}function eT(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=Au.transition;Au.transition={};try{t(!1),e()}finally{oe=n,Au.transition=r}}function Hy(){return xt().memoizedState}function tT(t,e,n){var r=Mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wy(t))qy(e,n);else if(n=Cy(t,e,n,r),n!==null){var i=rt();Ot(n,t,r,i),Qy(n,e,r)}}function nT(t,e,n){var r=Mn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wy(t))qy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ft(l,o)){var u=e.interleaved;u===null?(i.next=i,Dh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Cy(t,e,i,r),n!==null&&(i=rt(),Ot(n,t,r,i),Qy(n,e,r))}}function Wy(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function qy(t,e){ms=Va=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var ja={readContext:Rt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},rT={readContext:Rt,useCallback:function(t,e){return Ut().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:Ip,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sa(4194308,4,by.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return sa(4,2,t,e)},useMemo:function(t,e){var n=Ut();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ut();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tT.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Ut();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Bh,useDeferredValue:function(t){return Ut().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=eT.bind(null,t[1]),Ut().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=Ut();if(me){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Me===null)throw Error(U(349));Er&30||Ny(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ip(Vy.bind(null,r,s,t),[t]),r.flags|=2048,bs(9,Dy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ut(),e=Me.identifierPrefix;if(me){var n=ln,r=an;n=(r&~(1<<32-Lt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ms++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iT={readContext:Rt,useCallback:By,useContext:Rt,useEffect:Uh,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:zy,useReducer:Cu,useRef:Oy,useState:function(){return Cu(Fs)},useDebugValue:Bh,useDeferredValue:function(t){var e=xt();return $y(e,ke.memoizedState,t)},useTransition:function(){var t=Cu(Fs)[0],e=xt().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1},sT={readContext:Rt,useCallback:By,useContext:Rt,useEffect:Uh,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:zy,useReducer:Pu,useRef:Oy,useState:function(){return Pu(Fs)},useDebugValue:Bh,useDeferredValue:function(t){var e=xt();return ke===null?e.memoizedState=t:$y(e,ke.memoizedState,t)},useTransition:function(){var t=Pu(Fs)[0],e=xt().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1};function Dt(t,e){if(t&&t.defaultProps){e=_e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ul={isMounted:function(t){return(t=t._reactInternals)?Pr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Mn(t),s=un(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ln(t,s,i),e!==null&&(Ot(e,t,i,r),ra(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),i=Mn(t),s=un(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ln(t,s,i),e!==null&&(Ot(e,t,i,r),ra(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Mn(t),i=un(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ln(t,i,r),e!==null&&(Ot(e,t,r,n),ra(e,t,r))}};function Ap(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ns(n,r)||!Ns(i,s):!0}function Gy(t,e,n){var r=!1,i=Wn,s=e.contextType;return typeof s=="object"&&s!==null?s=Rt(s):(i=dt(e)?vr:Ze.current,r=e.contextTypes,s=(r=r!=null)?hi(t,i):Wn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ul,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ul.enqueueReplaceState(e,e.state,null)}function _c(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Vh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rt(s):(s=dt(e)?vr:Ze.current,i.context=hi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ul.enqueueReplaceState(i,i.state,null),Na(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mi(t,e){try{var n="",r=e;do n+=V0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ru(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ec(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oT=typeof WeakMap=="function"?WeakMap:Map;function Ky(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oa||(Oa=!0,kc=r),Ec(t,e)},n}function Xy(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ec(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ec(t,e),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Pp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ET.bind(null,t,e,n),e.then(t,t))}function Rp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Ln(n,e,1))),n.lanes|=1),t)}var aT=yn.ReactCurrentOwner,ct=!1;function nt(t,e,n,r){e.child=t===null?Ay(e,null,n,r):fi(e,t.child,n,r)}function kp(t,e,n,r,i){n=n.render;var s=e.ref;return si(e,i),r=Fh(t,e,n,r,s,i),n=bh(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(me&&n&&Ch(e),e.flags|=1,nt(t,e,r,i),e.child)}function Np(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Yy(t,e,s,r,i)):(t=ua(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(o,r)&&t.ref===e.ref)return fn(t,e,i)}return e.flags|=1,t=Fn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Yy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ns(s,r)&&t.ref===e.ref)if(ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,fn(t,e,i)}return wc(t,e,n,r,i)}function Jy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(ei,mt),mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(ei,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(ei,mt),mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(ei,mt),mt|=r;return nt(t,e,i,n),e.child}function Zy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wc(t,e,n,r,i){var s=dt(n)?vr:Ze.current;return s=hi(e,s),si(e,i),n=Fh(t,e,n,r,s,i),r=bh(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(me&&r&&Ch(e),e.flags|=1,nt(t,e,n,i),e.child)}function Dp(t,e,n,r,i){if(dt(n)){var s=!0;Ca(e)}else s=!1;if(si(e,i),e.stateNode===null)oa(t,e),Gy(e,n,r),_c(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Rt(h):(h=dt(n)?vr:Ze.current,h=hi(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cp(e,o,r,h),In=!1;var g=e.memoizedState;o.state=g,Na(e,r,o,i),u=e.memoizedState,l!==r||g!==u||ht.current||In?(typeof f=="function"&&(vc(e,n,f,r),u=e.memoizedState),(l=In||Ap(e,n,l,r,g,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Py(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Dt(e.type,l),o.props=h,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rt(u):(u=dt(n)?vr:Ze.current,u=hi(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Cp(e,o,r,u),In=!1,g=e.memoizedState,o.state=g,Na(e,r,o,i);var P=e.memoizedState;l!==p||g!==P||ht.current||In?(typeof T=="function"&&(vc(e,n,T,r),P=e.memoizedState),(h=In||Ap(e,n,h,r,g,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Tc(t,e,n,r,s,i)}function Tc(t,e,n,r,i,s){Zy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&yp(e,n,!1),fn(t,e,s);r=e.stateNode,aT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fi(e,t.child,null,s),e.child=fi(e,null,l,s)):nt(t,e,l,s),e.memoizedState=r.state,i&&yp(e,n,!0),e.child}function ev(t){var e=t.stateNode;e.pendingContext?gp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gp(t,e.context,!1),jh(t,e.containerInfo)}function Vp(t,e,n,r,i){return di(),Rh(i),e.flags|=256,nt(t,e,n,r),e.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function tv(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ye,i&1),t===null)return gc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dl(o,r,0,null),t=yr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ic(n),e.memoizedState=Sc,t):zh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lT(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fn(l,s):(s=yr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ic(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sc,r}return s=t.child,t=s.sibling,r=Fn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=dl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zo(t,e,n,r){return r!==null&&Rh(r),fi(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lT(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ru(Error(U(422))),zo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dl({mode:"visible",children:r.children},i,0,null),s=yr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fi(e,t.child,null,o),e.child.memoizedState=Ic(o),e.memoizedState=Sc,s);if(!(e.mode&1))return zo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Ru(s,r,void 0),zo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ct||l){if(r=Me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dn(t,i),Ot(r,t,i,-1))}return Gh(),r=Ru(Error(U(421))),zo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gt=jn(i.nextSibling),vt=e,me=!0,jt=null,t!==null&&(St[It++]=an,St[It++]=ln,St[It++]=_r,an=t.id,ln=t.overflow,_r=e),e=zh(e,r.children),e.flags|=4096,e)}function jp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yc(t.return,e,n)}function xu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nt(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jp(t,n,e);else if(t.tag===19)jp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Da(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Da(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xu(e,!0,n,null,s);break;case"together":xu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uT(t,e,n){switch(e.tag){case 3:ev(e),di();break;case 5:Ry(e);break;case 1:dt(e.type)&&Ca(e);break;case 4:jh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(xa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?tv(t,e,n):(ue(ye,ye.current&1),t=fn(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Jy(t,e,n)}return fn(t,e,n)}var rv,Ac,iv,sv;rv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ac=function(){};iv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pr(Ht.current);var s=null;switch(n){case"input":i=Qu(t,i),r=Qu(t,r),s=[];break;case"select":i=_e({},i,{value:void 0}),r=_e({},r,{value:void 0}),s=[];break;case"textarea":i=Xu(t,i),r=Xu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ia)}Ju(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Is.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Is.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&he("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};sv=function(t,e,n,r){n!==r&&(e.flags|=4)};function es(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cT(t,e,n){var r=e.pendingProps;switch(Ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return dt(e.type)&&Aa(),Ke(e),null;case 3:return r=e.stateNode,pi(),pe(ht),pe(Ze),Oh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(Vc(jt),jt=null))),Ac(t,e),Ke(e),null;case 5:Lh(e);var i=pr(Os.current);if(n=e.type,t!==null&&e.stateNode!=null)iv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ke(e),null}if(t=pr(Ht.current),Uo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zt]=e,r[js]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<os.length;i++)he(os[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":$f(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Wf(r,s),he("invalid",r)}Ju(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&bo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&bo(r.textContent,l,t),i=["children",""+l]):Is.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":No(r),Hf(r,s,!0);break;case"textarea":No(r),qf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ia)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zt]=e,t[js]=r,rv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zu(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<os.length;i++)he(os[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":$f(t,r),i=Qu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=_e({},r,{value:void 0}),he("invalid",t);break;case"textarea":Wf(t,r),i=Xu(t,r),he("invalid",t);break;default:i=r}Ju(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Og(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&As(t,u):typeof u=="number"&&As(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Is.hasOwnProperty(s)?u!=null&&s==="onScroll"&&he("scroll",t):u!=null&&dh(t,s,u,o))}switch(n){case"input":No(t),Hf(t,r,!1);break;case"textarea":No(t),qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ti(t,!!r.multiple,s,!1):r.defaultValue!=null&&ti(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)sv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=pr(Os.current),pr(Ht.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[zt]=e,(s=r.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:bo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=e,e.stateNode=r}return Ke(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&gt!==null&&e.mode&1&&!(e.flags&128))Sy(),di(),e.flags|=98560,s=!1;else if(s=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[zt]=e}else di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else jt!==null&&(Vc(jt),jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?De===0&&(De=3):Gh())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return pi(),Ac(t,e),t===null&&Ds(e.stateNode.containerInfo),Ke(e),null;case 10:return Nh(e.type._context),Ke(e),null;case 17:return dt(e.type)&&Aa(),Ke(e),null;case 19:if(pe(ye),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)es(s,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Da(t),o!==null){for(e.flags|=128,es(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>gi&&(e.flags|=128,r=!0,es(s,!1),e.lanes=4194304)}else{if(!r)if(t=Da(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),es(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!me)return Ke(e),null}else 2*Ce()-s.renderingStartTime>gi&&n!==1073741824&&(e.flags|=128,r=!0,es(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mt&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function hT(t,e){switch(Ph(e),e.tag){case 1:return dt(e.type)&&Aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),pe(ht),pe(Ze),Oh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return pi(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var $o=!1,Ye=!1,dT=typeof WeakSet=="function"?WeakSet:Set,H=null;function Zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){Te(t,e,r)}}var Lp=!1;function fT(t,e){if(uc=wa,t=cy(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,g=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)g=p,p=T;for(;;){if(p===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++f===r&&(u=o),(T=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cc={focusedElem:t,selectionRange:n},wa=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,k=P.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:Dt(e.type,R),k);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){Te(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return P=Lp,Lp=!1,P}function gs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cc(e,n,s)}i=i.next}while(i!==r)}}function cl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ov(t){var e=t.alternate;e!==null&&(t.alternate=null,ov(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zt],delete e[js],delete e[fc],delete e[Kw],delete e[Xw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function av(t){return t.tag===5||t.tag===3||t.tag===4}function Op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ia));else if(r!==4&&(t=t.child,t!==null))for(Rc(t,e,n),t=t.sibling;t!==null;)Rc(t,e,n),t=t.sibling}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}var be=null,Vt=!1;function Tn(t,e,n){for(n=n.child;n!==null;)lv(t,e,n),n=n.sibling}function lv(t,e,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(nl,n)}catch{}switch(n.tag){case 5:Ye||Zr(n,e);case 6:var r=be,i=Vt;be=null,Tn(t,e,n),be=r,Vt=i,be!==null&&(Vt?(t=be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(Vt?(t=be,n=n.stateNode,t.nodeType===8?Tu(t.parentNode,n):t.nodeType===1&&Tu(t,n),xs(t)):Tu(be,n.stateNode));break;case 4:r=be,i=Vt,be=n.stateNode.containerInfo,Vt=!0,Tn(t,e,n),be=r,Vt=i;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Cc(n,e,o),i=i.next}while(i!==r)}Tn(t,e,n);break;case 1:if(!Ye&&(Zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,Tn(t,e,n),Ye=r):Tn(t,e,n);break;default:Tn(t,e,n)}}function Mp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dT),e.forEach(function(r){var i=TT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:be=l.stateNode,Vt=!1;break e;case 3:be=l.stateNode.containerInfo,Vt=!0;break e;case 4:be=l.stateNode.containerInfo,Vt=!0;break e}l=l.return}if(be===null)throw Error(U(160));lv(s,o,i),be=null,Vt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Te(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uv(e,t),e=e.sibling}function uv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nt(e,t),bt(t),r&4){try{gs(3,t,t.return),cl(3,t)}catch(R){Te(t,t.return,R)}try{gs(5,t,t.return)}catch(R){Te(t,t.return,R)}}break;case 1:Nt(e,t),bt(t),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(Nt(e,t),bt(t),r&512&&n!==null&&Zr(n,n.return),t.flags&32){var i=t.stateNode;try{As(i,"")}catch(R){Te(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ng(i,s),Zu(l,o);var h=Zu(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Og(i,p):f==="dangerouslySetInnerHTML"?jg(i,p):f==="children"?As(i,p):dh(i,f,p,h)}switch(l){case"input":Gu(i,s);break;case"textarea":Dg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?ti(i,!!s.multiple,T,!1):g!==!!s.multiple&&(s.defaultValue!=null?ti(i,!!s.multiple,s.defaultValue,!0):ti(i,!!s.multiple,s.multiple?[]:"",!1))}i[js]=s}catch(R){Te(t,t.return,R)}}break;case 6:if(Nt(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Te(t,t.return,R)}}break;case 3:if(Nt(e,t),bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(e.containerInfo)}catch(R){Te(t,t.return,R)}break;case 4:Nt(e,t),bt(t);break;case 13:Nt(e,t),bt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wh=Ce())),r&4&&Mp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(h=Ye)||f,Nt(e,t),Ye=h):Nt(e,t),bt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(g=H,T=g.child,g.tag){case 0:case 11:case 14:case 15:gs(4,g,g.return);break;case 1:Zr(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){Te(r,n,R)}}break;case 5:Zr(g,g.return);break;case 22:if(g.memoizedState!==null){bp(p);continue}}T!==null?(T.return=g,H=T):bp(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lg("display",o))}catch(R){Te(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){Te(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Nt(e,t),bt(t),r&4&&Mp(t);break;case 21:break;default:Nt(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(av(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(As(i,""),r.flags&=-33);var s=Op(t);xc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Op(t);Rc(t,l,o);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pT(t,e,n){H=t,cv(t)}function cv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$o;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ye;l=$o;var h=Ye;if($o=o,(Ye=u)&&!h)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Up(i):u!==null?(u.return=o,H=u):Up(i);for(;s!==null;)H=s,cv(s),s=s.sibling;H=i,$o=l,Ye=h}Fp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Fp(t)}}function Fp(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||cl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Tp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&xs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ye||e.flags&512&&Pc(e)}catch(g){Te(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function bp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Up(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cl(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Te(e,i,u)}}var s=e.return;try{Pc(e)}catch(u){Te(e,s,u)}break;case 5:var o=e.return;try{Pc(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var mT=Math.ceil,La=yn.ReactCurrentDispatcher,$h=yn.ReactCurrentOwner,Pt=yn.ReactCurrentBatchConfig,re=0,Me=null,Re=null,ze=0,mt=0,ei=er(0),De=0,Us=null,wr=0,hl=0,Hh=0,ys=null,lt=null,Wh=0,gi=1/0,sn=null,Oa=!1,kc=null,On=null,Ho=!1,Rn=null,Ma=0,vs=0,Nc=null,aa=-1,la=0;function rt(){return re&6?Ce():aa!==-1?aa:aa=Ce()}function Mn(t){return t.mode&1?re&2&&ze!==0?ze&-ze:Jw.transition!==null?(la===0&&(la=Gg()),la):(t=oe,t!==0||(t=window.event,t=t===void 0?16:ty(t.type)),t):1}function Ot(t,e,n,r){if(50<vs)throw vs=0,Nc=null,Error(U(185));Js(t,n,r),(!(re&2)||t!==Me)&&(t===Me&&(!(re&2)&&(hl|=n),De===4&&Cn(t,ze)),ft(t,r),n===1&&re===0&&!(e.mode&1)&&(gi=Ce()+500,al&&tr()))}function ft(t,e){var n=t.callbackNode;J0(t,e);var r=Ea(t,t===Me?ze:0);if(r===0)n!==null&&Kf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kf(n),e===1)t.tag===0?Yw(Bp.bind(null,t)):Ey(Bp.bind(null,t)),Qw(function(){!(re&6)&&tr()}),n=null;else{switch(Kg(r)){case 1:n=yh;break;case 4:n=qg;break;case 16:n=_a;break;case 536870912:n=Qg;break;default:n=_a}n=vv(n,hv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hv(t,e){if(aa=-1,la=0,re&6)throw Error(U(327));var n=t.callbackNode;if(oi()&&t.callbackNode!==n)return null;var r=Ea(t,t===Me?ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fa(t,r);else{e=r;var i=re;re|=2;var s=fv();(Me!==t||ze!==e)&&(sn=null,gi=Ce()+500,gr(t,e));do try{vT();break}catch(l){dv(t,l)}while(!0);kh(),La.current=s,re=i,Re!==null?e=0:(Me=null,ze=0,e=De)}if(e!==0){if(e===2&&(i=ic(t),i!==0&&(r=i,e=Dc(t,i))),e===1)throw n=Us,gr(t,0),Cn(t,r),ft(t,Ce()),n;if(e===6)Cn(t,r);else{if(i=t.current.alternate,!(r&30)&&!gT(i)&&(e=Fa(t,r),e===2&&(s=ic(t),s!==0&&(r=s,e=Dc(t,s))),e===1))throw n=Us,gr(t,0),Cn(t,r),ft(t,Ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:hr(t,lt,sn);break;case 3:if(Cn(t,r),(r&130023424)===r&&(e=Wh+500-Ce(),10<e)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dc(hr.bind(null,t,lt,sn),e);break}hr(t,lt,sn);break;case 4:if(Cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Lt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mT(r/1960))-r,10<r){t.timeoutHandle=dc(hr.bind(null,t,lt,sn),r);break}hr(t,lt,sn);break;case 5:hr(t,lt,sn);break;default:throw Error(U(329))}}}return ft(t,Ce()),t.callbackNode===n?hv.bind(null,t):null}function Dc(t,e){var n=ys;return t.current.memoizedState.isDehydrated&&(gr(t,e).flags|=256),t=Fa(t,e),t!==2&&(e=lt,lt=n,e!==null&&Vc(e)),t}function Vc(t){lt===null?lt=t:lt.push.apply(lt,t)}function gT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ft(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~Hh,e&=~hl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Lt(e),r=1<<n;t[n]=-1,e&=~r}}function Bp(t){if(re&6)throw Error(U(327));oi();var e=Ea(t,0);if(!(e&1))return ft(t,Ce()),null;var n=Fa(t,e);if(t.tag!==0&&n===2){var r=ic(t);r!==0&&(e=r,n=Dc(t,r))}if(n===1)throw n=Us,gr(t,0),Cn(t,e),ft(t,Ce()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,lt,sn),ft(t,Ce()),null}function qh(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(gi=Ce()+500,al&&tr())}}function Tr(t){Rn!==null&&Rn.tag===0&&!(re&6)&&oi();var e=re;re|=1;var n=Pt.transition,r=oe;try{if(Pt.transition=null,oe=1,t)return t()}finally{oe=r,Pt.transition=n,re=e,!(re&6)&&tr()}}function Qh(){mt=ei.current,pe(ei)}function gr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qw(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Aa();break;case 3:pi(),pe(ht),pe(Ze),Oh();break;case 5:Lh(r);break;case 4:pi();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:Nh(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(Me=t,Re=t=Fn(t.current,null),ze=mt=e,De=0,Us=null,Hh=hl=wr=0,lt=ys=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fr=null}return t}function dv(t,e){do{var n=Re;try{if(kh(),ia.current=ja,Va){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Va=!1}if(Er=0,Le=ke=ve=null,ms=!1,Ms=0,$h.current=null,n===null||n.return===null){De=1,Us=e,Re=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Rp(o);if(T!==null){T.flags&=-257,xp(T,o,l,s,e),T.mode&1&&Pp(s,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var R=new Set;R.add(u),e.updateQueue=R}else P.add(u);break e}else{if(!(e&1)){Pp(s,h,e),Gh();break e}u=Error(U(426))}}else if(me&&l.mode&1){var k=Rp(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),xp(k,o,l,s,e),Rh(mi(u,l));break e}}s=u=mi(u,l),De!==4&&(De=2),ys===null?ys=[s]:ys.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Ky(s,u,e);wp(s,w);break e;case 1:l=u;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(On===null||!On.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Xy(s,l,e);wp(s,N);break e}}s=s.return}while(s!==null)}mv(n)}catch(O){e=O,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function fv(){var t=La.current;return La.current=ja,t===null?ja:t}function Gh(){(De===0||De===3||De===2)&&(De=4),Me===null||!(wr&268435455)&&!(hl&268435455)||Cn(Me,ze)}function Fa(t,e){var n=re;re|=2;var r=fv();(Me!==t||ze!==e)&&(sn=null,gr(t,e));do try{yT();break}catch(i){dv(t,i)}while(!0);if(kh(),re=n,La.current=r,Re!==null)throw Error(U(261));return Me=null,ze=0,De}function yT(){for(;Re!==null;)pv(Re)}function vT(){for(;Re!==null&&!$0();)pv(Re)}function pv(t){var e=yv(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?mv(t):Re=e,$h.current=null}function mv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hT(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Re=null;return}}else if(n=cT(n,e,mt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);De===0&&(De=5)}function hr(t,e,n){var r=oe,i=Pt.transition;try{Pt.transition=null,oe=1,_T(t,e,n,r)}finally{Pt.transition=i,oe=r}return null}function _T(t,e,n,r){do oi();while(Rn!==null);if(re&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z0(t,s),t===Me&&(Re=Me=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ho||(Ho=!0,vv(_a,function(){return oi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pt.transition,Pt.transition=null;var o=oe;oe=1;var l=re;re|=4,$h.current=null,fT(t,n),uv(n,t),bw(cc),wa=!!uc,cc=uc=null,t.current=n,pT(n),H0(),re=l,oe=o,Pt.transition=s}else t.current=n;if(Ho&&(Ho=!1,Rn=t,Ma=i),s=t.pendingLanes,s===0&&(On=null),Q0(n.stateNode),ft(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Oa)throw Oa=!1,t=kc,kc=null,t;return Ma&1&&t.tag!==0&&oi(),s=t.pendingLanes,s&1?t===Nc?vs++:(vs=0,Nc=t):vs=0,tr(),null}function oi(){if(Rn!==null){var t=Kg(Ma),e=Pt.transition,n=oe;try{if(Pt.transition=null,oe=16>t?16:t,Rn===null)var r=!1;else{if(t=Rn,Rn=null,Ma=0,re&6)throw Error(U(331));var i=re;for(re|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:gs(8,f,s)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var g=f.sibling,T=f.return;if(ov(f),f===h){H=null;break}if(g!==null){g.return=T,H=g;break}H=T}}}var P=s.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var k=R.sibling;R.sibling=null,R=k}while(R!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gs(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,H=w;break e}H=s.return}}var v=t.current;for(H=v;H!==null;){o=H;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,H=E;else e:for(o=v;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cl(9,l)}}catch(O){Te(l,l.return,O)}if(l===o){H=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,H=N;break e}H=l.return}}if(re=i,tr(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(nl,t)}catch{}r=!0}return r}finally{oe=n,Pt.transition=e}}return!1}function zp(t,e,n){e=mi(n,e),e=Ky(t,e,1),t=Ln(t,e,1),e=rt(),t!==null&&(Js(t,1,e),ft(t,e))}function Te(t,e,n){if(t.tag===3)zp(t,t,n);else for(;e!==null;){if(e.tag===3){zp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){t=mi(n,t),t=Xy(e,t,1),e=Ln(e,t,1),t=rt(),e!==null&&(Js(e,1,t),ft(e,t));break}}e=e.return}}function ET(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(ze&n)===n&&(De===4||De===3&&(ze&130023424)===ze&&500>Ce()-Wh?gr(t,0):Hh|=n),ft(t,e)}function gv(t,e){e===0&&(t.mode&1?(e=jo,jo<<=1,!(jo&130023424)&&(jo=4194304)):e=1);var n=rt();t=dn(t,e),t!==null&&(Js(t,e,n),ft(t,n))}function wT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gv(t,n)}function TT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),gv(t,n)}var yv;yv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ct=!1,uT(t,e,n);ct=!!(t.flags&131072)}else ct=!1,me&&e.flags&1048576&&wy(e,Ra,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var i=hi(e,Ze.current);si(e,n),i=Fh(null,e,r,t,i,n);var s=bh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(s=!0,Ca(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vh(e),i.updater=ul,e.stateNode=i,i._reactInternals=e,_c(e,r,t,n),e=Tc(null,e,r,!0,s,n)):(e.tag=0,me&&s&&Ch(e),nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IT(r),t=Dt(r,t),i){case 0:e=wc(null,e,r,t,n);break e;case 1:e=Dp(null,e,r,t,n);break e;case 11:e=kp(null,e,r,t,n);break e;case 14:e=Np(null,e,r,Dt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),wc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),Dp(t,e,r,i,n);case 3:e:{if(ev(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Py(t,e),Na(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mi(Error(U(423)),e),e=Vp(t,e,r,n,i);break e}else if(r!==i){i=mi(Error(U(424)),e),e=Vp(t,e,r,n,i);break e}else for(gt=jn(e.stateNode.containerInfo.firstChild),vt=e,me=!0,jt=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(di(),r===i){e=fn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return Ry(e),t===null&&gc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,hc(r,i)?o=null:s!==null&&hc(r,s)&&(e.flags|=32),Zy(t,e),nt(t,e,o,n),e.child;case 6:return t===null&&gc(e),null;case 13:return tv(t,e,n);case 4:return jh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fi(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),kp(t,e,r,i,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ue(xa,r._currentValue),r._currentValue=o,s!==null)if(Ft(s.value,o)){if(s.children===i.children&&!ht.current){e=fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=un(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),yc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,si(e,n),i=Rt(i),r=r(i),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,i=Dt(r,e.pendingProps),i=Dt(r.type,i),Np(t,e,r,i,n);case 15:return Yy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dt(r,i),oa(t,e),e.tag=1,dt(r)?(t=!0,Ca(e)):t=!1,si(e,n),Gy(e,r,i),_c(e,r,i,n),Tc(null,e,r,!0,t,n);case 19:return nv(t,e,n);case 22:return Jy(t,e,n)}throw Error(U(156,e.tag))};function vv(t,e){return Wg(t,e)}function ST(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new ST(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IT(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Fn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ua(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Kh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hr:return yr(n.children,i,s,e);case fh:o=8,i|=8;break;case $u:return t=Ct(12,n,e,i|2),t.elementType=$u,t.lanes=s,t;case Hu:return t=Ct(13,n,e,i),t.elementType=Hu,t.lanes=s,t;case Wu:return t=Ct(19,n,e,i),t.elementType=Wu,t.lanes=s,t;case Rg:return dl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cg:o=10;break e;case Pg:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case Sn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ct(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function yr(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function dl(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=Rg,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function Nu(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,i,s,o,l,u){return t=new AT(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ct(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(s),t}function CT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _v(t){if(!t)return Wn;t=t._reactInternals;e:{if(Pr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(dt(n))return _y(t,n,e)}return e}function Ev(t,e,n,r,i,s,o,l,u){return t=Xh(n,r,!0,t,i,s,o,l,u),t.context=_v(null),n=t.current,r=rt(),i=Mn(n),s=un(r,i),s.callback=e??null,Ln(n,s,i),t.current.lanes=i,Js(t,i,r),ft(t,r),t}function fl(t,e,n,r){var i=e.current,s=rt(),o=Mn(i);return n=_v(n),e.context===null?e.context=n:e.pendingContext=n,e=un(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ln(i,e,o),t!==null&&(Ot(t,i,o,s),ra(t,i,o)),o}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $p(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){$p(t,e),(t=t.alternate)&&$p(t,e)}function PT(){return null}var wv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}pl.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));fl(t,e,null,null)};pl.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tr(function(){fl(null,t,null,null)}),e[hn]=null}};function pl(t){this._internalRoot=t}pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<An.length&&e!==0&&e<An[n].priority;n++);An.splice(n,0,t),n===0&&ey(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function RT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=ba(o);s.call(h)}}var o=Ev(e,r,t,0,null,!1,!1,"",Hp);return t._reactRootContainer=o,t[hn]=o.current,Ds(t.nodeType===8?t.parentNode:t),Tr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=ba(u);l.call(h)}}var u=Xh(t,0,!1,null,null,!1,!1,"",Hp);return t._reactRootContainer=u,t[hn]=u.current,Ds(t.nodeType===8?t.parentNode:t),Tr(function(){fl(e,u,n,r)}),u}function gl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=ba(o);l.call(u)}}fl(e,o,t,i)}else o=RT(n,e,t,i,r);return ba(o)}Xg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ss(e.pendingLanes);n!==0&&(vh(e,n|1),ft(e,Ce()),!(re&6)&&(gi=Ce()+500,tr()))}break;case 13:Tr(function(){var r=dn(t,1);if(r!==null){var i=rt();Ot(r,t,1,i)}}),Yh(t,1)}};_h=function(t){if(t.tag===13){var e=dn(t,134217728);if(e!==null){var n=rt();Ot(e,t,134217728,n)}Yh(t,134217728)}};Yg=function(t){if(t.tag===13){var e=Mn(t),n=dn(t,e);if(n!==null){var r=rt();Ot(n,t,e,r)}Yh(t,e)}};Jg=function(){return oe};Zg=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};tc=function(t,e,n){switch(e){case"input":if(Gu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ol(r);if(!i)throw Error(U(90));kg(r),Gu(r,i)}}}break;case"textarea":Dg(t,n);break;case"select":e=n.value,e!=null&&ti(t,!!n.multiple,e,!1)}};bg=qh;Ug=Tr;var xT={usingClientEntryPoint:!1,Events:[eo,Gr,ol,Mg,Fg,qh]},ts={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kT={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$g(t),t===null?null:t.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||PT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{nl=Wo.inject(kT),$t=Wo}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xT;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(U(200));return CT(t,e,null,n)};Et.createRoot=function(t,e){if(!Zh(t))throw Error(U(299));var n=!1,r="",i=wv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,i),t[hn]=e.current,Ds(t.nodeType===8?t.parentNode:t),new Jh(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=$g(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Tr(t)};Et.hydrate=function(t,e,n){if(!ml(e))throw Error(U(200));return gl(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=wv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ev(e,null,t,1,n??null,i,!1,s,o),t[hn]=e.current,Ds(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pl(e)};Et.render=function(t,e,n){if(!ml(e))throw Error(U(200));return gl(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!ml(t))throw Error(U(40));return t._reactRootContainer?(Tr(function(){gl(null,null,t,!1,function(){t._reactRootContainer=null,t[hn]=null})}),!0):!1};Et.unstable_batchedUpdates=qh;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ml(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return gl(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function Tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tv)}catch(t){console.error(t)}}Tv(),Tg.exports=Et;var NT=Tg.exports,Wp=NT;Bu.createRoot=Wp.createRoot,Bu.hydrateRoot=Wp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bs(){return Bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bs.apply(this,arguments)}var xn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xn||(xn={}));const qp="popstate";function DT(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return jc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ua(i)}return jT(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ed(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VT(){return Math.random().toString(36).substr(2,8)}function Qp(t,e){return{usr:t.state,key:t.key,idx:e}}function jc(t,e,n,r){return n===void 0&&(n=null),Bs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Pi(e):e,{state:n,key:e&&e.key||r||VT()})}function Ua(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Pi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=xn.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(Bs({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=xn.Pop;let k=f(),w=k==null?null:k-h;h=k,u&&u({action:l,location:R.location,delta:w})}function g(k,w){l=xn.Push;let v=jc(R.location,k,w);h=f()+1;let E=Qp(v,h),N=R.createHref(v);try{o.pushState(E,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(N)}s&&u&&u({action:l,location:R.location,delta:1})}function T(k,w){l=xn.Replace;let v=jc(R.location,k,w);h=f();let E=Qp(v,h),N=R.createHref(v);o.replaceState(E,"",N),s&&u&&u({action:l,location:R.location,delta:0})}function P(k){let w=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof k=="string"?k:Ua(k);return v=v.replace(/ $/,"%20"),Se(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let R={get action(){return l},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qp,p),u=k,()=>{i.removeEventListener(qp,p),u=null}},createHref(k){return e(i,k)},createURL:P,encodeLocation(k){let w=P(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:T,go(k){return o.go(k)}};return R}var Gp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gp||(Gp={}));function LT(t,e,n){return n===void 0&&(n="/"),OT(t,e,n)}function OT(t,e,n,r){let i=typeof e=="string"?Pi(e):e,s=yi(i.pathname||"/",n);if(s==null)return null;let o=Sv(t);MT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=GT(s);l=qT(o[u],h)}return l}function Sv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Se(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=bn([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Sv(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:HT(h,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Iv(s.path))i(s,o,u)}),e}function Iv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Iv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function MT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FT=/^:[\w-]+$/,bT=3,UT=2,BT=1,zT=10,$T=-2,Kp=t=>t==="*";function HT(t,e){let n=t.split("/"),r=n.length;return n.some(Kp)&&(r+=$T),e&&(r+=UT),n.filter(i=>!Kp(i)).reduce((i,s)=>i+(FT.test(s)?bT:s===""?BT:zT),r)}function WT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qT(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=Lc({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:bn([s,p.pathname]),pathnameBase:ZT(bn([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=bn([s,p.pathnameBase]))}return o}function Lc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=QT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,p)=>{let{paramName:g,isOptional:T}=f;if(g==="*"){let R=l[p]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const P=l[p];return T&&!P?h[g]=void 0:h[g]=(P||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function QT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ed(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ed(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const KT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=t=>KT.test(t);function YT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Pi(t):t,s;if(n)if(XT(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ed(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Xp(n.substring(1),"/"):s=Xp(n,e)}else s=e;return{pathname:s,search:eS(r),hash:tS(i)}}function Xp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Du(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Av(t,e){let n=JT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Pi(t):(i=Bs({},t),Se(!i.pathname||!i.pathname.includes("?"),Du("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),Du("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),Du("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=YT(i,l),h=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const bn=t=>t.join("/").replace(/\/\/+/g,"/"),ZT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Pv=["post","put","patch","delete"];new Set(Pv);const rS=["get",...Pv];new Set(rS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zs.apply(this,arguments)}const yl=L.createContext(null),Rv=L.createContext(null),nr=L.createContext(null),vl=L.createContext(null),Rr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),xv=L.createContext(null);function iS(t,e){let{relative:n}=e===void 0?{}:e;no()||Se(!1);let{basename:r,navigator:i}=L.useContext(nr),{hash:s,pathname:o,search:l}=_l(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:bn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function no(){return L.useContext(vl)!=null}function Ri(){return no()||Se(!1),L.useContext(vl).location}function kv(t){L.useContext(nr).static||L.useLayoutEffect(t)}function Nv(){let{isDataRoute:t}=L.useContext(Rr);return t?yS():sS()}function sS(){no()||Se(!1);let t=L.useContext(yl),{basename:e,future:n,navigator:r}=L.useContext(nr),{matches:i}=L.useContext(Rr),{pathname:s}=Ri(),o=JSON.stringify(Av(i,n.v7_relativeSplatPath)),l=L.useRef(!1);return kv(()=>{l.current=!0}),L.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=Cv(h,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:bn([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}function _l(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(nr),{matches:i}=L.useContext(Rr),{pathname:s}=Ri(),o=JSON.stringify(Av(i,r.v7_relativeSplatPath));return L.useMemo(()=>Cv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function oS(t,e){return aS(t,e)}function aS(t,e,n,r){no()||Se(!1);let{navigator:i}=L.useContext(nr),{matches:s}=L.useContext(Rr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Ri(),f;if(e){var p;let k=typeof e=="string"?Pi(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||Se(!1),f=k}else f=h;let g=f.pathname||"/",T=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let P=LT(t,{pathname:T}),R=dS(P&&P.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:bn([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:bn([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&R?L.createElement(vl.Provider,{value:{location:zs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:xn.Pop}},R):R}function lS(){let t=gS(),e=nS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const uS=L.createElement(lS,null);class cS extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Rr.Provider,{value:this.props.routeContext},L.createElement(xv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hS(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(yl);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Rr.Provider,{value:e},r)}function dS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Se(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:g,errors:T}=n,P=p.route.loader&&g[p.route.id]===void 0&&(!T||T[p.route.id]===void 0);if(p.route.lazy||P){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let T,P=!1,R=null,k=null;n&&(T=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||uS,u&&(h<0&&g===0?(vS("route-fallback"),P=!0,k=null):h===g&&(P=!0,k=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),v=()=>{let E;return T?E=R:P?E=k:p.route.Component?E=L.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,L.createElement(hS,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?L.createElement(cS,{location:n.location,revalidation:n.revalidation,component:R,error:T,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var Dv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Dv||{}),Vv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vv||{});function fS(t){let e=L.useContext(yl);return e||Se(!1),e}function pS(t){let e=L.useContext(Rv);return e||Se(!1),e}function mS(t){let e=L.useContext(Rr);return e||Se(!1),e}function jv(t){let e=mS(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function gS(){var t;let e=L.useContext(xv),n=pS(),r=jv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yS(){let{router:t}=fS(Dv.UseNavigateStable),e=jv(Vv.UseNavigateStable),n=L.useRef(!1);return kv(()=>{n.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zs({fromRouteId:e},s)))},[t,e])}const Yp={};function vS(t,e,n){Yp[t]||(Yp[t]=!0)}function _S(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mr(t){Se(!1)}function ES(t){let{basename:e="/",children:n=null,location:r,navigationType:i=xn.Pop,navigator:s,static:o=!1,future:l}=t;no()&&Se(!1);let u=e.replace(/^\/*/,"/"),h=L.useMemo(()=>({basename:u,navigator:s,static:o,future:zs({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Pi(r));let{pathname:f="/",search:p="",hash:g="",state:T=null,key:P="default"}=r,R=L.useMemo(()=>{let k=yi(f,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:T,key:P},navigationType:i}},[u,f,p,g,T,P,i]);return R==null?null:L.createElement(nr.Provider,{value:h},L.createElement(vl.Provider,{children:n,value:R}))}function wS(t){let{children:e,location:n}=t;return oS(Oc(e),n)}new Promise(()=>{});function Oc(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,i)=>{if(!L.isValidElement(r))return;let s=[...e,i];if(r.type===L.Fragment){n.push.apply(n,Oc(r.props.children,s));return}r.type!==Mr&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Oc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ba.apply(this,arguments)}function Lv(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SS(t,e){return t.button===0&&(!e||e==="_self")&&!TS(t)}const IS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],CS="6";try{window.__reactRouterVersion=CS}catch{}const PS=L.createContext({isTransitioning:!1}),RS="startTransition",Jp=E0[RS];function xS(t){let{basename:e,children:n,future:r,window:i}=t,s=L.useRef();s.current==null&&(s.current=DT({window:i,v5Compat:!0}));let o=s.current,[l,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=L.useCallback(p=>{h&&Jp?Jp(()=>u(p)):u(p)},[u,h]);return L.useLayoutEffect(()=>o.listen(f),[o,f]),L.useEffect(()=>_S(r),[r]),L.createElement(ES,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fr=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,g=Lv(e,IS),{basename:T}=L.useContext(nr),P,R=!1;if(typeof h=="string"&&NS.test(h)&&(P=h,kS))try{let E=new URL(window.location.href),N=h.startsWith("//")?new URL(E.protocol+h):new URL(h),O=yi(N.pathname,T);N.origin===E.origin&&O!=null?h=O+N.search+N.hash:R=!0}catch{}let k=iS(h,{relative:i}),w=VS(h,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function v(E){r&&r(E),E.defaultPrevented||w(E)}return L.createElement("a",Ba({},g,{href:P||k,onClick:R||s?r:v,ref:n,target:u}))}),ns=L.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:h,children:f}=e,p=Lv(e,AS),g=_l(u,{relative:p.relative}),T=Ri(),P=L.useContext(Rv),{navigator:R,basename:k}=L.useContext(nr),w=P!=null&&jS(g)&&h===!0,v=R.encodeLocation?R.encodeLocation(g).pathname:g.pathname,E=T.pathname,N=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;i||(E=E.toLowerCase(),N=N?N.toLowerCase():null,v=v.toLowerCase()),N&&k&&(N=yi(N,k)||N);const O=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let F=E===v||!o&&E.startsWith(v)&&E.charAt(O)==="/",S=N!=null&&(N===v||!o&&N.startsWith(v)&&N.charAt(v.length)==="/"),_={isActive:F,isPending:S,isTransitioning:w},I=F?r:void 0,A;typeof s=="function"?A=s(_):A=[s,F?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(_):l;return L.createElement(Fr,Ba({},p,{"aria-current":I,className:A,ref:n,style:x,to:u,viewTransition:h}),typeof f=="function"?f(_):f)});var Mc;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mc||(Mc={}));var Zp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zp||(Zp={}));function DS(t){let e=L.useContext(yl);return e||Se(!1),e}function VS(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Nv(),h=Ri(),f=_l(t,{relative:o});return L.useCallback(p=>{if(SS(p,n)){p.preventDefault();let g=r!==void 0?r:Ua(h)===Ua(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,f,r,i,n,t,s,o,l])}function jS(t,e){e===void 0&&(e={});let n=L.useContext(PS);n==null&&Se(!1);let{basename:r}=DS(Mc.useViewTransitionState),i=_l(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lc(i.pathname,o)!=null||Lc(i.pathname,s)!=null}function LS(){const t=Ri(),e=n=>n==="/"?t.pathname==="/"?"nav-btn active":"nav-btn":t.pathname.startsWith(n)?"nav-btn active":"nav-btn";return m.jsxs("header",{className:"topbar",children:[m.jsxs("div",{className:"topbar-left",children:[m.jsx("img",{src:"https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_horizontal.png",alt:"Relevo Consultoria Ambiental",className:"topbar-logo"}),m.jsx("span",{className:"topbar-title",children:"Cronograma"})]}),m.jsxs("nav",{className:"topbar-nav",children:[m.jsx(Fr,{to:"/",className:e("/"),children:"Dashboard"}),m.jsx(Fr,{to:"/projetos",className:e("/projetos"),children:"Projetos"}),m.jsx(Fr,{to:"/tarefas",className:e("/tarefas"),children:"Tarefas"}),m.jsx(Fr,{to:"/calendario",className:e("/calendario"),children:"Calendrio"}),m.jsx(Fr,{to:"/importar",className:e("/importar"),children:"Importar (IA)"})]})]})}function OS(){return m.jsxs("footer",{children:[" ",new Date().getFullYear()," Relevo Consultoria Ambiental"]})}function MS(){return m.jsxs("nav",{className:"nav-cronograma",children:[m.jsx(ns,{to:"/",end:!0,children:" Dashboard"}),m.jsx(ns,{to:"/projetos",children:" Projetos"}),m.jsx(ns,{to:"/tarefas",children:" Tarefas"}),m.jsx(ns,{to:"/calendario",children:" Calendrio"}),m.jsx(ns,{to:"/importar",children:" Importar (IA)"})]})}const FS=()=>{};var em={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,T=h&63;u||(T=64,o||(g=64)),r.push(n[f],n[p],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ov(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new US;const g=s<<2|l>>4;if(r.push(g),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BS=function(t){const e=Ov(t);return Mv.encodeByteArray(e,!0)},Fv=function(t){return BS(t).replace(/\./g,"")},zS=function(t){try{return Mv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=()=>$S().__FIREBASE_DEFAULTS__,WS=()=>{if(typeof process>"u"||typeof em>"u")return;const t=em.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zS(t[1]);return e&&JSON.parse(e)},QS=()=>{try{return FS()||HS()||WS()||qS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XS(){var t;const e=(t=QS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YS(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="FirebaseError";class xi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eI,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bv.prototype.create)}}class bv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new xi(i,l,r)}}function tI(t,e){return t.replace(nI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t){return t&&t._delegate?t._delegate:t}class za{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const rI={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},iI=ne.INFO,sI={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},oI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uv{constructor(e){this.name=e,this._logLevel=iI,this._logHandler=oI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const aI=(t,e)=>e.some(n=>t instanceof n);let tm,nm;function lI(){return tm||(tm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uI(){return nm||(nm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bv=new WeakMap,Fc=new WeakMap,zv=new WeakMap,Vu=new WeakMap,td=new WeakMap;function cI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Un(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bv.set(n,t)}).catch(()=>{}),td.set(e,t),e}function hI(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fc.set(t,e)}let bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dI(t){bc=t(bc)}function fI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ju(this),e,...n);return zv.set(r,e.sort?e.sort():[e]),Un(r)}:uI().includes(t)?function(...e){return t.apply(ju(this),e),Un(Bv.get(this))}:function(...e){return Un(t.apply(ju(this),e))}}function pI(t){return typeof t=="function"?fI(t):(t instanceof IDBTransaction&&hI(t),aI(t,lI())?new Proxy(t,bc):t)}function Un(t){if(t instanceof IDBRequest)return cI(t);if(Vu.has(t))return Vu.get(t);const e=pI(t);return e!==t&&(Vu.set(t,e),td.set(e,t)),e}const ju=t=>td.get(t);function mI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Un(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Un(o.result),u.oldVersion,u.newVersion,Un(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const gI=["get","getKey","getAll","getAllKeys","count"],yI=["put","add","delete","clear"],Lu=new Map;function rm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lu.get(e))return Lu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gI.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Lu.set(e,s),s}dI(t=>({...t,get:(e,n,r)=>rm(e,n)||t.get(e,n,r),has:(e,n)=>!!rm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_I(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _I(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",im="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Uv("@firebase/app"),EI="@firebase/app-compat",wI="@firebase/analytics-compat",TI="@firebase/analytics",SI="@firebase/app-check-compat",II="@firebase/app-check",AI="@firebase/auth",CI="@firebase/auth-compat",PI="@firebase/database",RI="@firebase/data-connect",xI="@firebase/database-compat",kI="@firebase/functions",NI="@firebase/functions-compat",DI="@firebase/installations",VI="@firebase/installations-compat",jI="@firebase/messaging",LI="@firebase/messaging-compat",OI="@firebase/performance",MI="@firebase/performance-compat",FI="@firebase/remote-config",bI="@firebase/remote-config-compat",UI="@firebase/storage",BI="@firebase/storage-compat",zI="@firebase/firestore",$I="@firebase/ai",HI="@firebase/firestore-compat",WI="firebase",qI="11.10.0",QI={[Uc]:"fire-core",[EI]:"fire-core-compat",[TI]:"fire-analytics",[wI]:"fire-analytics-compat",[II]:"fire-app-check",[SI]:"fire-app-check-compat",[AI]:"fire-auth",[CI]:"fire-auth-compat",[PI]:"fire-rtdb",[RI]:"fire-data-connect",[xI]:"fire-rtdb-compat",[kI]:"fire-fn",[NI]:"fire-fn-compat",[DI]:"fire-iid",[VI]:"fire-iid-compat",[jI]:"fire-fcm",[LI]:"fire-fcm-compat",[OI]:"fire-perf",[MI]:"fire-perf-compat",[FI]:"fire-rc",[bI]:"fire-rc-compat",[UI]:"fire-gcs",[BI]:"fire-gcs-compat",[zI]:"fire-fst",[HI]:"fire-fst-compat",[$I]:"fire-vertex","fire-js":"fire-js",[WI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new Map,KI=new Map,sm=new Map;function om(t,e){try{t.container.addComponent(e)}catch(n){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $a(t){const e=t.name;if(sm.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,t);for(const n of GI.values())om(n,t);for(const n of KI.values())om(n,t);return!0}function XI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nd=new bv("app","Firebase",YI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=qI;function _s(t,e,n){var r;let i=(r=QI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(l.join(" "));return}$a(new za(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebase-heartbeat-database",e1=1,$s="firebase-heartbeat-store";let Ou=null;function $v(){return Ou||(Ou=mI(ZI,e1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($s)}catch(n){console.warn(n)}}}}).catch(t=>{throw nd.create("idb-open",{originalErrorMessage:t.message})})),Ou}async function t1(t){try{const n=(await $v()).transaction($s),r=await n.objectStore($s).get(Hv(t));return await n.done,r}catch(e){if(e instanceof xi)pn.warn(e.message);else{const n=nd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pn.warn(n.message)}}}async function am(t,e){try{const r=(await $v()).transaction($s,"readwrite");await r.objectStore($s).put(e,Hv(t)),await r.done}catch(n){if(n instanceof xi)pn.warn(n.message);else{const r=nd.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pn.warn(r.message)}}}function Hv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=1024,r1=30;class i1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new o1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>r1){const o=a1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lm(),{heartbeatsToSend:r,unsentEntries:i}=s1(this._heartbeatsCache.heartbeats),s=Fv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pn.warn(n),""}}}function lm(){return new Date().toISOString().substring(0,10)}function s1(t,e=n1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),um(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),um(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class o1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return am(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return am(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function um(t){return Fv(JSON.stringify({version:2,heartbeats:t})).length}function a1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){$a(new za("platform-logger",e=>new vI(e),"PRIVATE")),$a(new za("heartbeat",e=>new i1(e),"PRIVATE")),_s(Uc,im,t),_s(Uc,im,"esm2017"),_s("fire-js","")}l1("");var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bn,Wv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function I(){}I.prototype=_.prototype,S.D=_.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(A,x,V){for(var C=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)C[Tt-2]=arguments[Tt];return _.prototype[x].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,I){I||(I=0);var A=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)A[x]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(x=0;16>x;++x)A[x]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=S.g[0],I=S.g[1],x=S.g[2];var V=S.g[3],C=_+(V^I&(x^V))+A[0]+3614090360&4294967295;_=I+(C<<7&4294967295|C>>>25),C=V+(x^_&(I^x))+A[1]+3905402710&4294967295,V=_+(C<<12&4294967295|C>>>20),C=x+(I^V&(_^I))+A[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=I+(_^x&(V^_))+A[3]+3250441966&4294967295,I=x+(C<<22&4294967295|C>>>10),C=_+(V^I&(x^V))+A[4]+4118548399&4294967295,_=I+(C<<7&4294967295|C>>>25),C=V+(x^_&(I^x))+A[5]+1200080426&4294967295,V=_+(C<<12&4294967295|C>>>20),C=x+(I^V&(_^I))+A[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=I+(_^x&(V^_))+A[7]+4249261313&4294967295,I=x+(C<<22&4294967295|C>>>10),C=_+(V^I&(x^V))+A[8]+1770035416&4294967295,_=I+(C<<7&4294967295|C>>>25),C=V+(x^_&(I^x))+A[9]+2336552879&4294967295,V=_+(C<<12&4294967295|C>>>20),C=x+(I^V&(_^I))+A[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=I+(_^x&(V^_))+A[11]+2304563134&4294967295,I=x+(C<<22&4294967295|C>>>10),C=_+(V^I&(x^V))+A[12]+1804603682&4294967295,_=I+(C<<7&4294967295|C>>>25),C=V+(x^_&(I^x))+A[13]+4254626195&4294967295,V=_+(C<<12&4294967295|C>>>20),C=x+(I^V&(_^I))+A[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=I+(_^x&(V^_))+A[15]+1236535329&4294967295,I=x+(C<<22&4294967295|C>>>10),C=_+(x^V&(I^x))+A[1]+4129170786&4294967295,_=I+(C<<5&4294967295|C>>>27),C=V+(I^x&(_^I))+A[6]+3225465664&4294967295,V=_+(C<<9&4294967295|C>>>23),C=x+(_^I&(V^_))+A[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=I+(V^_&(x^V))+A[0]+3921069994&4294967295,I=x+(C<<20&4294967295|C>>>12),C=_+(x^V&(I^x))+A[5]+3593408605&4294967295,_=I+(C<<5&4294967295|C>>>27),C=V+(I^x&(_^I))+A[10]+38016083&4294967295,V=_+(C<<9&4294967295|C>>>23),C=x+(_^I&(V^_))+A[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=I+(V^_&(x^V))+A[4]+3889429448&4294967295,I=x+(C<<20&4294967295|C>>>12),C=_+(x^V&(I^x))+A[9]+568446438&4294967295,_=I+(C<<5&4294967295|C>>>27),C=V+(I^x&(_^I))+A[14]+3275163606&4294967295,V=_+(C<<9&4294967295|C>>>23),C=x+(_^I&(V^_))+A[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=I+(V^_&(x^V))+A[8]+1163531501&4294967295,I=x+(C<<20&4294967295|C>>>12),C=_+(x^V&(I^x))+A[13]+2850285829&4294967295,_=I+(C<<5&4294967295|C>>>27),C=V+(I^x&(_^I))+A[2]+4243563512&4294967295,V=_+(C<<9&4294967295|C>>>23),C=x+(_^I&(V^_))+A[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=I+(V^_&(x^V))+A[12]+2368359562&4294967295,I=x+(C<<20&4294967295|C>>>12),C=_+(I^x^V)+A[5]+4294588738&4294967295,_=I+(C<<4&4294967295|C>>>28),C=V+(_^I^x)+A[8]+2272392833&4294967295,V=_+(C<<11&4294967295|C>>>21),C=x+(V^_^I)+A[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=I+(x^V^_)+A[14]+4259657740&4294967295,I=x+(C<<23&4294967295|C>>>9),C=_+(I^x^V)+A[1]+2763975236&4294967295,_=I+(C<<4&4294967295|C>>>28),C=V+(_^I^x)+A[4]+1272893353&4294967295,V=_+(C<<11&4294967295|C>>>21),C=x+(V^_^I)+A[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=I+(x^V^_)+A[10]+3200236656&4294967295,I=x+(C<<23&4294967295|C>>>9),C=_+(I^x^V)+A[13]+681279174&4294967295,_=I+(C<<4&4294967295|C>>>28),C=V+(_^I^x)+A[0]+3936430074&4294967295,V=_+(C<<11&4294967295|C>>>21),C=x+(V^_^I)+A[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=I+(x^V^_)+A[6]+76029189&4294967295,I=x+(C<<23&4294967295|C>>>9),C=_+(I^x^V)+A[9]+3654602809&4294967295,_=I+(C<<4&4294967295|C>>>28),C=V+(_^I^x)+A[12]+3873151461&4294967295,V=_+(C<<11&4294967295|C>>>21),C=x+(V^_^I)+A[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=I+(x^V^_)+A[2]+3299628645&4294967295,I=x+(C<<23&4294967295|C>>>9),C=_+(x^(I|~V))+A[0]+4096336452&4294967295,_=I+(C<<6&4294967295|C>>>26),C=V+(I^(_|~x))+A[7]+1126891415&4294967295,V=_+(C<<10&4294967295|C>>>22),C=x+(_^(V|~I))+A[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=I+(V^(x|~_))+A[5]+4237533241&4294967295,I=x+(C<<21&4294967295|C>>>11),C=_+(x^(I|~V))+A[12]+1700485571&4294967295,_=I+(C<<6&4294967295|C>>>26),C=V+(I^(_|~x))+A[3]+2399980690&4294967295,V=_+(C<<10&4294967295|C>>>22),C=x+(_^(V|~I))+A[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=I+(V^(x|~_))+A[1]+2240044497&4294967295,I=x+(C<<21&4294967295|C>>>11),C=_+(x^(I|~V))+A[8]+1873313359&4294967295,_=I+(C<<6&4294967295|C>>>26),C=V+(I^(_|~x))+A[15]+4264355552&4294967295,V=_+(C<<10&4294967295|C>>>22),C=x+(_^(V|~I))+A[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=I+(V^(x|~_))+A[13]+1309151649&4294967295,I=x+(C<<21&4294967295|C>>>11),C=_+(x^(I|~V))+A[4]+4149444226&4294967295,_=I+(C<<6&4294967295|C>>>26),C=V+(I^(_|~x))+A[11]+3174756917&4294967295,V=_+(C<<10&4294967295|C>>>22),C=x+(_^(V|~I))+A[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=I+(V^(x|~_))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+V&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var I=_-this.blockSize,A=this.B,x=this.h,V=0;V<_;){if(x==0)for(;V<=I;)i(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<_;)if(A[x++]=S.charCodeAt(V++),x==this.blockSize){i(this,A),x=0;break}}else for(;V<_;)if(A[x++]=S[V++],x==this.blockSize){i(this,A),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var I=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=I&255,I/=256;for(this.u(S),S=Array(16),_=I=0;4>_;++_)for(var A=0;32>A;A+=8)S[I++]=this.g[_]>>>A&255;return S};function s(S,_){var I=l;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=_(S)}function o(S,_){this.h=_;for(var I=[],A=!0,x=S.length-1;0<=x;x--){var V=S[x]|0;A&&V==_||(I[x]=V,A=!1)}this.g=I}var l={};function u(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return k(h(-S));for(var _=[],I=1,A=0;S>=I;A++)_[A]=S/I|0,I*=4294967296;return new o(_,0)}function f(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return k(f(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=h(Math.pow(_,8)),A=p,x=0;x<S.length;x+=8){var V=Math.min(8,S.length-x),C=parseInt(S.substring(x,x+V),_);8>V?(V=h(Math.pow(_,V)),A=A.j(V).add(h(C))):(A=A.j(I),A=A.add(h(C)))}return A}var p=u(0),g=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-k(this).m();for(var S=0,_=1,I=0;I<this.g.length;I++){var A=this.i(I);S+=(0<=A?A:4294967296+A)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P(this))return"0";if(R(this))return"-"+k(this).toString(S);for(var _=h(Math.pow(S,6)),I=this,A="";;){var x=N(I,_).g;I=w(I,x.j(_));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=x,P(I))return V+A;for(;6>V.length;)V="0"+V;A=V+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function P(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function R(S){return S.h==-1}t.l=function(S){return S=w(this,S),R(S)?-1:P(S)?0:1};function k(S){for(var _=S.g.length,I=[],A=0;A<_;A++)I[A]=~S.g[A];return new o(I,~S.h).add(g)}t.abs=function(){return R(this)?k(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),I=[],A=0,x=0;x<=_;x++){var V=A+(this.i(x)&65535)+(S.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);A=C>>>16,V&=65535,C&=65535,I[x]=C<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(S,_){return S.add(k(_))}t.j=function(S){if(P(this)||P(S))return p;if(R(this))return R(S)?k(this).j(k(S)):k(k(this).j(S));if(R(S))return k(this.j(k(S)));if(0>this.l(T)&&0>S.l(T))return h(this.m()*S.m());for(var _=this.g.length+S.g.length,I=[],A=0;A<2*_;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var x=0;x<S.g.length;x++){var V=this.i(A)>>>16,C=this.i(A)&65535,Tt=S.i(x)>>>16,sr=S.i(x)&65535;I[2*A+2*x]+=C*sr,v(I,2*A+2*x),I[2*A+2*x+1]+=V*sr,v(I,2*A+2*x+1),I[2*A+2*x+1]+=C*Tt,v(I,2*A+2*x+1),I[2*A+2*x+2]+=V*Tt,v(I,2*A+2*x+2)}for(A=0;A<_;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=_;A<2*_;A++)I[A]=0;return new o(I,0)};function v(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function E(S,_){this.g=S,this.h=_}function N(S,_){if(P(_))throw Error("division by zero");if(P(S))return new E(p,p);if(R(S))return _=N(k(S),_),new E(k(_.g),k(_.h));if(R(_))return _=N(S,k(_)),new E(k(_.g),_.h);if(30<S.g.length){if(R(S)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,A=_;0>=A.l(S);)I=O(I),A=O(A);var x=F(I,1),V=F(A,1);for(A=F(A,2),I=F(I,2);!P(A);){var C=V.add(A);0>=C.l(S)&&(x=x.add(I),V=C),A=F(A,1),I=F(I,1)}return _=w(S,x.j(_)),new E(x,_)}for(x=p;0<=S.l(_);){for(I=Math.max(1,Math.floor(S.m()/_.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),V=h(I),C=V.j(_);R(C)||0<C.l(S);)I-=A,V=h(I),C=V.j(_);P(V)&&(V=g),x=x.add(V),S=w(S,C)}return new E(x,S)}t.A=function(S){return N(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)&S.i(A);return new o(I,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)|S.i(A);return new o(I,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),I=[],A=0;A<_;A++)I[A]=this.i(A)^S.i(A);return new o(I,this.h^S.h)};function O(S){for(var _=S.g.length+1,I=[],A=0;A<_;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(I,S.h)}function F(S,_){var I=_>>5;_%=32;for(var A=S.g.length-I,x=[],V=0;V<A;V++)x[V]=0<_?S.i(V+I)>>>_|S.i(V+I+1)<<32-_:S.i(V+I);return new o(x,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Bn=o}).apply(typeof cm<"u"?cm:typeof self<"u"?self:typeof window<"u"?window:{});var qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qv,as,Qv,ca,Bc,Gv,Kv,Xv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qo=="object"&&qo];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var D=a[y];if(!(D in d))break e;d=d[D]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,y=!1,D={next:function(){if(!y&&d<a.length){var j=d++;return{value:c(j,a[j]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),a.apply(c,D)}}return function(){return a.apply(c,arguments)}}function g(a,c,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(y,D,j){for(var B=Array(arguments.length-2),le=2;le<arguments.length;le++)B[le-2]=arguments[le];return c.prototype[D].apply(y,B)}}function R(a){const c=a.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function k(a,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const D=a.length||0,j=y.length||0;a.length=D+j;for(let B=0;B<j;B++)a[D+B]=y[B]}else a.push(y)}}class w{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(a){return/^[\s\xa0]*$/.test(a)}function E(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function S(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function _(a){const c={};for(const d in a)c[d]=a[d];return c}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,c){let d,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(d in y)a[d]=y[d];for(let j=0;j<I.length;j++)d=I[j],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function x(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function V(a){l.setTimeout(()=>{throw a},0)}function C(){var a=G;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Tt{constructor(){this.h=this.g=null}add(c,d){const y=sr.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var sr=new w(()=>new ji,a=>a.reset());class ji{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Yt,z=!1,G=new Tt,Y=()=>{const a=l.Promise.resolve(void 0);Yt=()=>{a.then(ge)}};var ge=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(d){V(d)}var c=sr;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}z=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Jt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function Zt(a,c){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(O){e:{try{N(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:en[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Zt.aa.h.call(this)}}P(Zt,Ie);var en={2:"touch",3:"pen",4:"mouse"};Zt.prototype.h=function(){Zt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),CE=0;function PE(a,c,d,y,D){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=D,this.key=++CE,this.da=this.fa=!1}function co(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ho(a){this.src=a,this.g={},this.h=0}ho.prototype.add=function(a,c,d,y,D){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var B=Fl(a,c,y,D);return-1<B?(c=a[B],d||(c.fa=!1)):(c=new PE(c,this.src,j,!!y,D),c.fa=d,a.push(c)),c};function Ml(a,c){var d=c.type;if(d in a.g){var y=a.g[d],D=Array.prototype.indexOf.call(y,c,void 0),j;(j=0<=D)&&Array.prototype.splice.call(y,D,1),j&&(co(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Fl(a,c,d,y){for(var D=0;D<a.length;++D){var j=a[D];if(!j.da&&j.listener==c&&j.capture==!!d&&j.ha==y)return D}return-1}var bl="closure_lm_"+(1e6*Math.random()|0),Ul={};function Md(a,c,d,y,D){if(Array.isArray(c)){for(var j=0;j<c.length;j++)Md(a,c[j],d,y,D);return null}return d=Ud(d),a&&a[tn]?a.K(c,d,h(y)?!!y.capture:!1,D):RE(a,c,d,!1,y,D)}function RE(a,c,d,y,D,j){if(!c)throw Error("Invalid event type");var B=h(D)?!!D.capture:!!D,le=zl(a);if(le||(a[bl]=le=new ho(a)),d=le.add(c,d,y,B,j),d.proxy)return d;if(y=xE(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)Jt||(D=B),D===void 0&&(D=!1),a.addEventListener(c.toString(),y,D);else if(a.attachEvent)a.attachEvent(bd(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function xE(){function a(d){return c.call(a.src,a.listener,d)}const c=kE;return a}function Fd(a,c,d,y,D){if(Array.isArray(c))for(var j=0;j<c.length;j++)Fd(a,c[j],d,y,D);else y=h(y)?!!y.capture:!!y,d=Ud(d),a&&a[tn]?(a=a.i,c=String(c).toString(),c in a.g&&(j=a.g[c],d=Fl(j,d,y,D),-1<d&&(co(j[d]),Array.prototype.splice.call(j,d,1),j.length==0&&(delete a.g[c],a.h--)))):a&&(a=zl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Fl(c,d,y,D)),(d=-1<a?c[a]:null)&&Bl(d))}function Bl(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[tn])Ml(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent(bd(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=zl(c))?(Ml(d,a),d.h==0&&(d.src=null,c[bl]=null)):co(a)}}}function bd(a){return a in Ul?Ul[a]:Ul[a]="on"+a}function kE(a,c){if(a.da)a=!0;else{c=new Zt(c,this);var d=a.listener,y=a.ha||a.src;a.fa&&Bl(a),a=d.call(y,c)}return a}function zl(a){return a=a[bl],a instanceof ho?a:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ud(a){return typeof a=="function"?a:(a[$l]||(a[$l]=function(c){return a.handleEvent(c)}),a[$l])}function We(){ae.call(this),this.i=new ho(this),this.M=this,this.F=null}P(We,ae),We.prototype[tn]=!0,We.prototype.removeEventListener=function(a,c,d,y){Fd(this,a,c,d,y)};function et(a,c){var d,y=a.F;if(y)for(d=[];y;y=y.F)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new Ie(c,a);else if(c instanceof Ie)c.target=c.target||a;else{var D=c;c=new Ie(y,a),A(c,D)}if(D=!0,d)for(var j=d.length-1;0<=j;j--){var B=c.g=d[j];D=fo(B,y,!0,c)&&D}if(B=c.g=a,D=fo(B,y,!0,c)&&D,D=fo(B,y,!1,c)&&D,d)for(j=0;j<d.length;j++)B=c.g=d[j],D=fo(B,y,!1,c)&&D}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],y=0;y<d.length;y++)co(d[y]);delete a.g[c],a.h--}}this.F=null},We.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},We.prototype.L=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function fo(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,j=0;j<c.length;++j){var B=c[j];if(B&&!B.da&&B.capture==d){var le=B.listener,Fe=B.ha||B.src;B.fa&&Ml(a.i,B),D=le.call(Fe,y)!==!1&&D}}return D&&!y.defaultPrevented}function Bd(a,c,d){if(typeof a=="function")d&&(a=g(a,d));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function zd(a){a.g=Bd(()=>{a.g=null,a.i&&(a.i=!1,zd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class NE extends ae{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:zd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Li(a){ae.call(this),this.h=a,this.g={}}P(Li,ae);var $d=[];function Hd(a){F(a.g,function(c,d){this.g.hasOwnProperty(d)&&Bl(c)},a),a.g={}}Li.prototype.N=function(){Li.aa.N.call(this),Hd(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hl=l.JSON.stringify,DE=l.JSON.parse,VE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Wl(){}Wl.prototype.h=null;function Wd(a){return a.h||(a.h=a.i())}function qd(){}var Oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ql(){Ie.call(this,"d")}P(ql,Ie);function Ql(){Ie.call(this,"c")}P(Ql,Ie);var or={},Qd=null;function po(){return Qd=Qd||new We}or.La="serverreachability";function Gd(a){Ie.call(this,or.La,a)}P(Gd,Ie);function Mi(a){const c=po();et(c,new Gd(c))}or.STAT_EVENT="statevent";function Kd(a,c){Ie.call(this,or.STAT_EVENT,a),this.stat=c}P(Kd,Ie);function tt(a){const c=po();et(c,new Kd(c,a))}or.Ma="timingevent";function Xd(a,c){Ie.call(this,or.Ma,a),this.size=c}P(Xd,Ie);function Fi(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function bi(){this.g=!0}bi.prototype.xa=function(){this.g=!1};function jE(a,c,d,y,D,j){a.info(function(){if(a.g)if(j)for(var B="",le=j.split("&"),Fe=0;Fe<le.length;Fe++){var ie=le[Fe].split("=");if(1<ie.length){var qe=ie[0];ie=ie[1];var Qe=qe.split("_");B=2<=Qe.length&&Qe[1]=="type"?B+(qe+"="+ie+"&"):B+(qe+"=redacted&")}}else B=null;else B=j;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+c+`
`+d+`
`+B})}function LE(a,c,d,y,D,j,B){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+c+`
`+d+`
`+j+" "+B})}function Dr(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+ME(a,d)+(y?" "+y:"")})}function OE(a,c){a.info(function(){return"TIMEOUT: "+c})}bi.prototype.info=function(){};function ME(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var y=d[a];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return Hl(d)}catch{return c}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gl;function go(){}P(go,Wl),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},Gl=new go;function _n(a,c,d,y){this.j=a,this.i=c,this.l=d,this.R=y||1,this.U=new Li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jd}function Jd(){this.i=null,this.g="",this.h=!1}var Zd={},Kl={};function Xl(a,c,d){a.L=1,a.v=Eo(nn(c)),a.m=d,a.P=!0,ef(a,null)}function ef(a,c){a.F=Date.now(),yo(a),a.A=nn(a.v);var d=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),mf(d.i,"t",y),a.C=0,d=a.j.J,a.h=new Jd,a.g=Vf(a.j,d?c:null,!a.m),0<a.O&&(a.M=new NE(g(a.Y,a,a.g),a.O)),c=a.U,d=a.g,y=a.ca;var D="readystatechange";Array.isArray(D)||(D&&($d[0]=D.toString()),D=$d);for(var j=0;j<D.length;j++){var B=Md(d,D[j],y||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Mi(),jE(a.i,a.u,a.A,a.l,a.R,a.m)}_n.prototype.ca=function(a){a=a.target;const c=this.M;c&&rn(a)==3?c.j():this.Y(a)},_n.prototype.Y=function(a){try{if(a==this.g)e:{const Qe=rn(this.g);var c=this.g.Ba();const Lr=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||Tf(this.g)))){this.J||Qe!=4||c==7||(c==8||0>=Lr?Mi(3):Mi(2)),Yl(this);var d=this.g.Z();this.X=d;t:if(tf(this)){var y=Tf(this.g);a="";var D=y.length,j=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),Ui(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(j&&c==D-1)});y.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,LE(this.i,this.u,this.A,this.l,this.R,Qe,d),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Fe=this.g;if((le=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(le)){var ie=le;break t}}ie=null}if(d=ie)Dr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jl(this,d);else{this.o=!1,this.s=3,tt(12),ar(this),Ui(this);break e}}if(this.P){d=!0;let kt;for(;!this.J&&this.C<B.length;)if(kt=FE(this,B),kt==Kl){Qe==4&&(this.s=4,tt(14),d=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Zd){this.s=4,tt(15),Dr(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else Dr(this.i,this.l,kt,null),Jl(this,kt);if(tf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||B.length!=0||this.h.h||(this.s=1,tt(16),d=!1),this.o=this.o&&d,!d)Dr(this.i,this.l,B,"[Invalid Chunked Response]"),ar(this),Ui(this);else if(0<B.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),iu(qe),qe.M=!0,tt(11))}}else Dr(this.i,this.l,B,null),Jl(this,B);Qe==4&&ar(this),this.o&&!this.J&&(Qe==4?xf(this.j,this):(this.o=!1,yo(this)))}else t0(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),ar(this),Ui(this)}}}catch{}finally{}};function tf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function FE(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?Kl:(d=Number(c.substring(d,y)),isNaN(d)?Zd:(y+=1,y+d>c.length?Kl:(c=c.slice(y,y+d),a.C=y+d,c)))}_n.prototype.cancel=function(){this.J=!0,ar(this)};function yo(a){a.S=Date.now()+a.I,nf(a,a.I)}function nf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Fi(g(a.ba,a),c)}function Yl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}_n.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(OE(this.i,this.A),this.L!=2&&(Mi(),tt(17)),ar(this),this.s=2,Ui(this)):nf(this,this.S-a)};function Ui(a){a.j.G==0||a.J||xf(a.j,a)}function ar(a){Yl(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Hd(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Jl(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Zl(d.h,a))){if(!a.K&&Zl(d.h,a)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Co(d),Io(d);else break e;ru(d),tt(18)}}else d.za=D[1],0<d.za-d.T&&37500>D[2]&&d.F&&d.v==0&&!d.C&&(d.C=Fi(g(d.Za,d),6e3));if(1>=of(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ur(d,11)}else if((a.K||d.g==a)&&Co(d),!v(c))for(D=d.Da.g.parse(c),c=0;c<D.length;c++){let ie=D[c];if(d.T=ie[0],ie=ie[1],d.G==2)if(ie[0]=="c"){d.K=ie[1],d.ia=ie[2];const qe=ie[3];qe!=null&&(d.la=qe,d.j.info("VER="+d.la));const Qe=ie[4];Qe!=null&&(d.Aa=Qe,d.j.info("SVER="+d.Aa));const Lr=ie[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(y=1.5*Lr,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const kt=a.g;if(kt){const Ro=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var j=y.h;j.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(eu(j,j.h),j.h=null))}if(y.D){const su=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(y.ya=su,ce(y.I,y.D,su))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var B=a;if(y.qa=Df(y,y.J?y.ia:null,y.W),B.K){af(y.h,B);var le=B,Fe=y.L;Fe&&(le.I=Fe),le.B&&(Yl(le),yo(le)),y.g=B}else Pf(y);0<d.i.length&&Ao(d)}else ie[0]!="stop"&&ie[0]!="close"||ur(d,7);else d.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?ur(d,7):nu(d):ie[0]!="noop"&&d.l&&d.l.ta(ie),d.v=0)}}Mi(4)}catch{}}var bE=class{constructor(a,c){this.g=a,this.map=c}};function rf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function of(a){return a.h?1:a.g?a.g.size:0}function Zl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function eu(a,c){a.g?a.g.add(c):a.h=c}function af(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}rf.prototype.cancel=function(){if(this.i=lf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function lf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return R(a.i)}function UE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,y=0;y<d;y++)c.push(a[y]);return c}c=[],d=0;for(y in a)c[d++]=a[y];return c}function BE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const y in a)c[d++]=y;return c}}}function uf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=BE(a),y=UE(a),D=y.length,j=0;j<D;j++)c.call(void 0,y[j],d&&d[j],a)}var cf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var y=a[d].indexOf("="),D=null;if(0<=y){var j=a[d].substring(0,y);D=a[d].substring(y+1)}else j=a[d];c(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function lr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof lr){this.h=a.h,vo(this,a.j),this.o=a.o,this.g=a.g,_o(this,a.s),this.l=a.l;var c=a.i,d=new $i;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),hf(this,d),this.m=a.m}else a&&(c=String(a).match(cf))?(this.h=!1,vo(this,c[1]||"",!0),this.o=Bi(c[2]||""),this.g=Bi(c[3]||"",!0),_o(this,c[4]),this.l=Bi(c[5]||"",!0),hf(this,c[6]||"",!0),this.m=Bi(c[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}lr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(zi(c,df,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(zi(c,df,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(zi(d,d.charAt(0)=="/"?WE:HE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",zi(d,QE)),a.join("")};function nn(a){return new lr(a)}function vo(a,c,d){a.j=d?Bi(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function _o(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function hf(a,c,d){c instanceof $i?(a.i=c,GE(a.i,a.h)):(d||(c=zi(c,qE)),a.i=new $i(c,a.h))}function ce(a,c,d){a.i.set(c,d)}function Eo(a){return ce(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Bi(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function zi(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,$E),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function $E(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var df=/[#\/\?@]/g,HE=/[#\?:]/g,WE=/[#\?]/g,qE=/[#\?@]/g,QE=/#/g;function $i(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&zE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=$i.prototype,t.add=function(a,c){En(this),this.i=null,a=Vr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function ff(a,c){En(a),c=Vr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function pf(a,c){return En(a),c=Vr(a,c),a.g.has(c)}t.forEach=function(a,c){En(this),this.g.forEach(function(d,y){d.forEach(function(D){a.call(c,D,y,this)},this)},this)},t.na=function(){En(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const D=a[y];for(let j=0;j<D.length;j++)d.push(c[y])}return d},t.V=function(a){En(this);let c=[];if(typeof a=="string")pf(this,a)&&(c=c.concat(this.g.get(Vr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return En(this),this.i=null,a=Vr(this,a),pf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function mf(a,c,d){ff(a,c),0<d.length&&(a.i=null,a.g.set(Vr(a,c),R(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const j=encodeURIComponent(String(y)),B=this.V(y);for(y=0;y<B.length;y++){var D=j;B[y]!==""&&(D+="="+encodeURIComponent(String(B[y]))),a.push(D)}}return this.i=a.join("&")};function Vr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function GE(a,c){c&&!a.j&&(En(a),a.i=null,a.g.forEach(function(d,y){var D=y.toLowerCase();y!=D&&(ff(this,y),mf(this,D,d))},a)),a.j=c}function KE(a,c){const d=new bi;if(l.Image){const y=new Image;y.onload=T(wn,d,"TestLoadImage: loaded",!0,c,y),y.onerror=T(wn,d,"TestLoadImage: error",!1,c,y),y.onabort=T(wn,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=T(wn,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function XE(a,c){const d=new bi,y=new AbortController,D=setTimeout(()=>{y.abort(),wn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(j=>{clearTimeout(D),j.ok?wn(d,"TestPingServer: ok",!0,c):wn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),wn(d,"TestPingServer: error",!1,c)})}function wn(a,c,d,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(d)}catch{}}function YE(){this.g=new VE}function JE(a,c,d){const y=d||"";try{uf(a,function(D,j){let B=D;h(D)&&(B=Hl(D)),c.push(y+j+"="+encodeURIComponent(B))})}catch(D){throw c.push(y+"type="+encodeURIComponent("_badmap")),D}}function wo(a){this.l=a.Ub||null,this.j=a.eb||!1}P(wo,Wl),wo.prototype.g=function(){return new To(this.l,this.j)},wo.prototype.i=function(a){return function(){return a}}({});function To(a,c){We.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(To,We),t=To.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Wi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Hi(this):Wi(this),this.readyState==3&&gf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Hi(this))},t.Qa=function(a){this.g&&(this.response=a,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Wi(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function Wi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yf(a){let c="";return F(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function tu(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=yf(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):ce(a,c,d))}function we(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(we,We);var ZE=/^https?$/i,e0=["POST","PUT"];t=we.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gl.g(),this.v=this.o?Wd(this.o):Wd(Gl),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(j){vf(this,j);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)d.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const j of y.keys())d.set(j,y.get(j));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(j=>j.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(e0,c,void 0))||y||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,B]of d)this.g.setRequestHeader(j,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wf(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){vf(this,j)}};function vf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,_f(a),So(a)}function _f(a){a.A||(a.A=!0,et(a,"complete"),et(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,et(this,"complete"),et(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),we.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ef(this):this.bb())},t.bb=function(){Ef(this)};function Ef(a){if(a.h&&typeof o<"u"&&(!a.v[1]||rn(a)!=4||a.Z()!=2)){if(a.u&&rn(a)==4)Bd(a.Ea,0,a);else if(et(a,"readystatechange"),rn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=B===0){var D=String(a.D).match(cf)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),y=!ZE.test(D?D.toLowerCase():"")}d=y}if(d)et(a,"complete"),et(a,"success");else{a.m=6;try{var j=2<rn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",_f(a)}}finally{So(a)}}}}function So(a,c){if(a.g){wf(a);const d=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||et(a,"ready");try{d.onreadystatechange=y}catch{}}}function wf(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),DE(c)}};function Tf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function t0(a){const c={};a=(a.g&&2<=rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(v(a[y]))continue;var d=x(a[y]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const j=c[D]||[];c[D]=j,j.push(d)}S(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function Sf(a){this.Aa=0,this.i=[],this.j=new bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qi("baseRetryDelayMs",5e3,a),this.cb=qi("retryDelaySeedMs",1e4,a),this.Wa=qi("forwardChannelMaxRetries",2,a),this.wa=qi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new rf(a&&a.concurrentRequestLimit),this.Da=new YE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sf.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,y){tt(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=Df(this,null,this.W),Ao(this)};function nu(a){if(If(a),a.G==3){var c=a.U++,d=nn(a.I);if(ce(d,"SID",a.K),ce(d,"RID",c),ce(d,"TYPE","terminate"),Qi(a,d),c=new _n(a,a.j,c),c.L=2,c.v=Eo(nn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Vf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),yo(c)}Nf(a)}function Io(a){a.g&&(iu(a),a.g.cancel(),a.g=null)}function If(a){Io(a),a.u&&(l.clearTimeout(a.u),a.u=null),Co(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ao(a){if(!sf(a.h)&&!a.s){a.s=!0;var c=a.Ga;Yt||Y(),z||(Yt(),z=!0),G.add(c,a),a.B=0}}function n0(a,c){return of(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Fi(g(a.Ga,a,c),kf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new _n(this,this.j,a);let j=this.o;if(this.S&&(j?(j=_(j),A(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Cf(this,D,c),d=nn(this.I),ce(d,"RID",a),ce(d,"CVER",22),this.D&&ce(d,"X-HTTP-Session-Id",this.D),Qi(this,d),j&&(this.O?c="headers="+encodeURIComponent(String(yf(j)))+"&"+c:this.m&&tu(d,this.m,j)),eu(this.h,D),this.Ua&&ce(d,"TYPE","init"),this.P?(ce(d,"$req",c),ce(d,"SID","null"),D.T=!0,Xl(D,d,null)):Xl(D,d,c),this.G=2}}else this.G==3&&(a?Af(this,a):this.i.length==0||sf(this.h)||Af(this))};function Af(a,c){var d;c?d=c.l:d=a.U++;const y=nn(a.I);ce(y,"SID",a.K),ce(y,"RID",d),ce(y,"AID",a.T),Qi(a,y),a.m&&a.o&&tu(y,a.m,a.o),d=new _n(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Cf(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),eu(a.h,d),Xl(d,y,c)}function Qi(a,c){a.H&&F(a.H,function(d,y){ce(c,y,d)}),a.l&&uf({},function(d,y){ce(c,y,d)})}function Cf(a,c,d){d=Math.min(a.i.length,d);var y=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let j=-1;for(;;){const B=["count="+d];j==-1?0<d?(j=D[0].g,B.push("ofs="+j)):j=0:B.push("ofs="+j);let le=!0;for(let Fe=0;Fe<d;Fe++){let ie=D[Fe].g;const qe=D[Fe].map;if(ie-=j,0>ie)j=Math.max(0,D[Fe].g-100),le=!1;else try{JE(qe,B,"req"+ie+"_")}catch{y&&y(qe)}}if(le){y=B.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,y}function Pf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Yt||Y(),z||(Yt(),z=!0),G.add(c,a),a.v=0}}function ru(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Fi(g(a.Fa,a),kf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Fi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),Io(this),Rf(this))};function iu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Rf(a){a.g=new _n(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=nn(a.qa);ce(c,"RID","rpc"),ce(c,"SID",a.K),ce(c,"AID",a.T),ce(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&ce(c,"TO",a.ja),ce(c,"TYPE","xmlhttp"),Qi(a,c),a.m&&a.o&&tu(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Eo(nn(c)),d.m=null,d.P=!0,ef(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Io(this),ru(this),tt(19))};function Co(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function xf(a,c){var d=null;if(a.g==c){Co(a),iu(a),a.g=null;var y=2}else if(Zl(a.h,c))d=c.D,af(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var D=a.B;y=po(),et(y,new Xd(y,d)),Ao(a)}else Pf(a);else if(D=c.s,D==3||D==0&&0<c.X||!(y==1&&n0(a,c)||y==2&&ru(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),D){case 1:ur(a,5);break;case 4:ur(a,10);break;case 3:ur(a,6);break;default:ur(a,2)}}}function kf(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function ur(a,c){if(a.j.info("Error code "+c),c==2){var d=g(a.fb,a),y=a.Xa;const D=!y;y=new lr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vo(y,"https"),Eo(y),D?KE(y.toString(),d):XE(y.toString(),d)}else tt(2);a.G=0,a.l&&a.l.sa(c),Nf(a),If(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Nf(a){if(a.G=0,a.ka=[],a.l){const c=lf(a.h);(c.length!=0||a.i.length!=0)&&(k(a.ka,c),k(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Df(a,c,d){var y=d instanceof lr?nn(d):new lr(d);if(y.g!="")c&&(y.g=c+"."+y.g),_o(y,y.s);else{var D=l.location;y=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var j=new lr(null);y&&vo(j,y),c&&(j.g=c),D&&_o(j,D),d&&(j.l=d),y=j}return d=a.D,c=a.ya,d&&c&&ce(y,d,c),ce(y,"VER",a.la),Qi(a,y),y}function Vf(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new we(new wo({eb:d})):new we(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jf(){}t=jf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Po(){}Po.prototype.g=function(a,c){return new pt(a,c)};function pt(a,c){We.call(this),this.g=new Sf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!v(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new jr(this)}P(pt,We),pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pt.prototype.close=function(){nu(this.g)},pt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Hl(a),a=d);c.i.push(new bE(c.Ya++,a)),c.G==3&&Ao(c)},pt.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,pt.aa.N.call(this)};function Lf(a){ql.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(Lf,ql);function Of(){Ql.call(this),this.status=1}P(Of,Ql);function jr(a){this.g=a}P(jr,jf),jr.prototype.ua=function(){et(this.g,"a")},jr.prototype.ta=function(a){et(this.g,new Lf(a))},jr.prototype.sa=function(a){et(this.g,new Of)},jr.prototype.ra=function(){et(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,pt.prototype.send=pt.prototype.o,pt.prototype.open=pt.prototype.m,pt.prototype.close=pt.prototype.close,Xv=function(){return new Po},Kv=function(){return po()},Gv=or,Bc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,ca=mo,Yd.COMPLETE="complete",Qv=Yd,qd.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",We.prototype.listen=We.prototype.K,as=qd,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,qv=we}).apply(typeof qo<"u"?qo:typeof self<"u"?self:typeof window<"u"?window:{});const hm="@firebase/firestore",dm="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Uv("@firebase/firestore");function br(){return Sr.logLevel}function $(t,...e){if(Sr.logLevel<=ne.DEBUG){const n=e.map(rd);Sr.debug(`Firestore (${ki}): ${t}`,...n)}}function mn(t,...e){if(Sr.logLevel<=ne.ERROR){const n=e.map(rd);Sr.error(`Firestore (${ki}): ${t}`,...n)}}function Ir(t,...e){if(Sr.logLevel<=ne.WARN){const n=e.map(rd);Sr.warn(`Firestore (${ki}): ${t}`,...n)}}function rd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Yv(t,r,n)}function Yv(t,e,n){let r=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function se(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Yv(e,i,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class h1{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string",31837,{l:r}),new u1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string",2055,{h:e}),new ot(e)}}class d1{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class f1{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new d1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,XI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){se(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=m1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function zc(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return J(r,i);{const s=Jv(),o=g1(s.encode(pm(t,n)),s.encode(pm(e,n)));return o!==0?o:J(r,i)}}n+=r>65535?2:1}return J(t.length,e.length)}function pm(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function g1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return J(t[n],e[n]);return J(t.length,e.length)}function vi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="__name__";class Bt{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Bt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return J(e.length,n.length)}static compareSegments(e,n){const r=Bt.isNumericId(e),i=Bt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Bt.extractNumericId(e).compare(Bt.extractNumericId(n)):zc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bn.fromString(e.substring(4,e.length-2))}}class de extends Bt{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new de(n)}static emptyPath(){return new de([])}}const y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends Bt{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return y1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mm}static keyField(){return new Be([mm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new W(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new W(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(de.fromString(e))}static fromName(e){return new q(de.fromString(e).popFirst(5))}static empty(){return new q(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new de(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,n){if(!n)throw new W(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v1(t,e,n,r){if(e===!0&&r===!0)throw new W(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gm(t){if(!q.isDocumentKey(t))throw new W(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ym(t){if(q.isDocumentKey(t))throw new W(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function e_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function _i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sd(t);throw new W(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function ro(t,e){if(!e_(t))throw new W(b.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(b.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=-62135596800,_m=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_m);return new fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vm)throw new W(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_m}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ro(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:xe("string",fe._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(e){return new K(e)}static min(){return new K(new fe(0,0))}static max(){return new K(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=-1;function _1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new Qn(i,q.empty(),e)}function E1(t){return new Qn(t.readTime,t.key,Hs)}class Qn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qn(K.min(),q.empty(),Hs)}static max(){return new Qn(K.max(),q.empty(),Hs)}}function w1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==T1)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function I1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Di(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}El.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=-1;function wl(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function A1(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="";function C1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Em(e)),e=P1(t.get(n),e);return Em(e)}function P1(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case t_:n+="";break;default:n+=s}}return n}function Em(t){return t+t_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function n_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||Ue.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ue.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ue.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ue{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ue.RED,this.left=i??Ue.EMPTY,this.right=s??Ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ue(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ue.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ue.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Ue.EMPTY=null,Ue.RED=!0,Ue.BLACK=!1;Ue.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ue(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tm(this.data.getIterator())}getIteratorFrom(e){return new Tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ve(this.comparator);return n.data=e,n}}class Tm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new yt([])}unionWith(e){let n=new Ve(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new r_("Invalid base64 string: "+s):s}}(e);return new He(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const R1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gn(t){if(se(!!t,39018),typeof t=="string"){let e=0;const n=R1.exec(t);if(se(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kn(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="server_timestamp",s_="__type__",o_="__previous_value__",a_="__local_write_time__";function ad(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[s_])===null||n===void 0?void 0:n.stringValue)===i_}function Tl(t){const e=t.mapValue.fields[o_];return ad(e)?Tl(e):e}function Ws(t){const e=Gn(t.mapValue.fields[a_].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,r,i,s,o,l,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const $c="(default)";class qs{constructor(e,n){this.projectId=e,this.database=n||$c}static empty(){return new qs("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof qs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="__type__",k1="__max__",Go={mapValue:{}},u_="__vector__",Wa="value";function Xn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ad(t)?4:D1(t)?9007199254740991:N1(t)?10:11:Q(28295,{value:t})}function Kt(t,e){if(t===e)return!0;const n=Xn(t);if(n!==Xn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ws(t).isEqual(Ws(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Gn(i.timestampValue),l=Gn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Kn(i.bytesValue).isEqual(Kn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ae(i.doubleValue),l=Ae(s.doubleValue);return o===l?Ha(o)===Ha(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return vi(t.arrayValue.values||[],e.arrayValue.values||[],Kt);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(wm(o)!==wm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Kt(o[u],l[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function Qs(t,e){return(t.values||[]).find(n=>Kt(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Xn(t),r=Xn(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ae(s.integerValue||s.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sm(t.timestampValue,e.timestampValue);case 4:return Sm(Ws(t),Ws(e));case 5:return zc(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Kn(s),u=Kn(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=J(l[h],u[h]);if(f!==0)return f}return J(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=J(Ae(s.latitude),Ae(o.latitude));return l!==0?l:J(Ae(s.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Im(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},g=o.fields||{},T=(l=p[Wa])===null||l===void 0?void 0:l.arrayValue,P=(u=g[Wa])===null||u===void 0?void 0:u.arrayValue,R=J(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Im(T,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Go.mapValue&&o===Go.mapValue)return 0;if(s===Go.mapValue)return 1;if(o===Go.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=zc(u[p],f[p]);if(g!==0)return g;const T=Ei(l[u[p]],h[f[p]]);if(T!==0)return T}return J(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{le:n})}}function Sm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Gn(t),r=Gn(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function Im(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ei(n[i],r[i]);if(s)return s}return J(n.length,r.length)}function wi(t){return Hc(t)}function Hc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Hc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Hc(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function ha(t){switch(Xn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+ha(e):16;case 5:return 2*t.stringValue.length;case 6:return Kn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ha(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return rr(r.fields,(s,o)=>{i+=s.length+ha(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function Wc(t){return!!t&&"integerValue"in t}function ld(t){return!!t&&"arrayValue"in t}function Am(t){return!!t&&"nullValue"in t}function Cm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function da(t){return!!t&&"mapValue"in t}function N1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[l_])===null||n===void 0?void 0:n.stringValue)===u_}function Es(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Es(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Es(t.arrayValue.values[n]);return e}return Object.assign({},t)}function D1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===k1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.value=e}static empty(){return new ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!da(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Es(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Es(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());da(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];da(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ut(Es(this.value))}}function c_(t){const e=[];return rr(t.fields,(n,r)=>{const i=new Be([n]);if(da(r)){const s=c_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Je(e,0,K.min(),K.min(),K.min(),ut.empty(),0)}static newFoundDocument(e,n,r,i){return new Je(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new Je(e,2,n,K.min(),K.min(),ut.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,K.min(),K.min(),ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.position=e,this.inclusive=n}}function Pm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Ei(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function V1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{}class Ne extends h_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new L1(e,n,r):n==="array-contains"?new F1(e,r):n==="in"?new b1(e,r):n==="not-in"?new U1(e,r):n==="array-contains-any"?new B1(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O1(e,r):new M1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ei(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends h_{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Xt(e,n)}matches(e){return d_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function d_(t){return t.op==="and"}function f_(t){return j1(t)&&d_(t)}function j1(t){for(const e of t.filters)if(e instanceof Xt)return!1;return!0}function qc(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+wi(t.value);if(f_(t))return t.filters.map(e=>qc(e)).join(",");{const e=t.filters.map(n=>qc(n)).join(",");return`${t.op}(${e})`}}function p_(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&Kt(r.value,i.value)}(t,e):t instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&p_(o,i.filters[l]),!0):!1}(t,e):void Q(19439)}function m_(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${wi(n.value)}`}(t):t instanceof Xt?function(n){return n.op.toString()+" {"+n.getFilters().map(m_).join(" ,")+"}"}(t):"Filter"}class L1 extends Ne{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class O1 extends Ne{constructor(e,n){super(e,"in",n),this.keys=g_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class M1 extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=g_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function g_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class F1 extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ld(n)&&Qs(n.arrayValue,this.value)}}class b1 extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qs(this.value.arrayValue,n)}}class U1 extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qs(this.value.arrayValue,n)}}class B1 extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ld(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Pe=null}}function xm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new z1(t,e,n,r,i,s,o)}function ud(t){const e=X(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wi(r)).join(",")),e.Pe=n}return e.Pe}function cd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!V1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!p_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rm(t.startAt,e.startAt)&&Rm(t.endAt,e.endAt)}function Qc(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $1(t,e,n,r,i,s,o,l){return new Sl(t,e,n,r,i,s,o,l)}function y_(t){return new Sl(t)}function km(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H1(t){return t.collectionGroup!==null}function ws(t){const e=X(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ve(Be.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Qa(s,r))}),n.has(Be.keyField().canonicalString())||e.Te.push(new Qa(Be.keyField(),r))}return e.Te}function Wt(t){const e=X(t);return e.Ie||(e.Ie=W1(e,ws(t))),e.Ie}function W1(t,e){if(t.limitType==="F")return xm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qa(i.field,s)});const n=t.endAt?new qa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qa(t.startAt.position,t.startAt.inclusive):null;return xm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gc(t,e,n){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Il(t,e){return cd(Wt(t),Wt(e))&&t.limitType===e.limitType}function v_(t){return`${ud(Wt(t))}|lt:${t.limitType}`}function Ur(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>m_(i)).join(", ")}]`),wl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wi(i)).join(",")),`Target(${r})`}(Wt(t))}; limitType=${t.limitType})`}function Al(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ws(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Pm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,ws(r),i)||r.endAt&&!function(o,l,u){const h=Pm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,ws(r),i))}(t,e)}function q1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __(t){return(e,n)=>{let r=!1;for(const i of ws(t)){const s=Q1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Q1(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ei(u,h):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return n_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new Ee(q.comparator);function gn(){return G1}const E_=new Ee(q.comparator);function ls(...t){let e=E_;for(const n of t)e=e.insert(n.key,n);return e}function w_(t){let e=E_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mr(){return Ts()}function T_(){return Ts()}function Ts(){return new xr(t=>t.toString(),(t,e)=>t.isEqual(e))}const K1=new Ee(q.comparator),X1=new Ve(q.comparator);function ee(...t){let e=X1;for(const n of t)e=e.add(n);return e}const Y1=new Ve(J);function J1(){return Y1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function S_(t){return{integerValue:""+t}}function Z1(t,e){return A1(e)?S_(e):hd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this._=void 0}}function eA(t,e,n){return t instanceof Ga?function(i,s){const o={fields:{[s_]:{stringValue:i_},[a_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ad(s)&&(s=Tl(s)),s&&(o.fields[o_]=s),{mapValue:o}}(n,e):t instanceof Gs?A_(t,e):t instanceof Ks?C_(t,e):function(i,s){const o=I_(i,s),l=Nm(o)+Nm(i.Ee);return Wc(o)&&Wc(i.Ee)?S_(l):hd(i.serializer,l)}(t,e)}function tA(t,e,n){return t instanceof Gs?A_(t,e):t instanceof Ks?C_(t,e):n}function I_(t,e){return t instanceof Ka?function(r){return Wc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ga extends Cl{}class Gs extends Cl{constructor(e){super(),this.elements=e}}function A_(t,e){const n=P_(e);for(const r of t.elements)n.some(i=>Kt(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ks extends Cl{constructor(e){super(),this.elements=e}}function C_(t,e){let n=P_(e);for(const r of t.elements)n=n.filter(i=>!Kt(i,r));return{arrayValue:{values:n}}}class Ka extends Cl{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Nm(t){return Ae(t.integerValue||t.doubleValue)}function P_(t){return ld(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gs&&i instanceof Gs||r instanceof Ks&&i instanceof Ks?vi(r.elements,i.elements,Kt):r instanceof Ka&&i instanceof Ka?Kt(r.Ee,i.Ee):r instanceof Ga&&i instanceof Ga}(t.transform,e.transform)}class rA{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pl{}function R_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dd(t.key,Mt.none()):new io(t.key,t.data,Mt.none());{const n=t.data,r=ut.empty();let i=new Ve(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ir(t.key,r,new yt(i.toArray()),Mt.none())}}function iA(t,e,n){t instanceof io?function(i,s,o){const l=i.value.clone(),u=Vm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ir?function(i,s,o){if(!fa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Vm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(x_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ss(t,e,n,r){return t instanceof io?function(s,o,l,u){if(!fa(s.precondition,o))return l;const h=s.value.clone(),f=jm(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ir?function(s,o,l,u){if(!fa(s.precondition,o))return l;const h=jm(s.fieldTransforms,u,o),f=o.data;return f.setAll(x_(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return fa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=I_(r.transform,i||null);s!=null&&(n===null&&(n=ut.empty()),n.set(r.field,s))}return n||null}function Dm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vi(r,i,(s,o)=>nA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class io extends Pl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ir extends Pl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Vm(t,e,n){const r=new Map;se(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,tA(o,l,n[i]))}return r}function jm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,eA(s,o,e))}return r}class dd extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oA extends Pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ss(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ss(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=R_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&vi(this.mutations,e.mutations,(n,r)=>Dm(n,r))&&vi(this.baseMutations,e.baseMutations,(n,r)=>Dm(n,r))}}class fd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return K1}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,te;function cA(t){switch(t){case b.OK:return Q(64938);case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function k_(t){if(t===void 0)return mn("GRPC error has no .code"),b.UNKNOWN;switch(t){case Pe.OK:return b.OK;case Pe.CANCELLED:return b.CANCELLED;case Pe.UNKNOWN:return b.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return b.INTERNAL;case Pe.UNAVAILABLE:return b.UNAVAILABLE;case Pe.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Pe.NOT_FOUND:return b.NOT_FOUND;case Pe.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Pe.ABORTED:return b.ABORTED;case Pe.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Pe.DATA_LOSS:return b.DATA_LOSS;default:return Q(39323,{code:t})}}(te=Pe||(Pe={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Bn([4294967295,4294967295],0);function Lm(t){const e=Jv().encode(t),n=new Wv;return n.update(e),new Uint8Array(n.digest())}function Om(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([i,s],0)]}class pd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Bn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Bn.fromNumber(r)));return i.compare(hA)===1&&(i=new Bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Lm(e),[r,i]=Om(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new pd(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;const n=Lm(e),[r,i]=Om(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,so.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rl(K.min(),i,new Ee(J),gn(),ee())}}class so{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new so(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class N_{constructor(e,n){this.targetId=e,this.De=n}}class D_{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mm{constructor(){this.ve=0,this.Ce=Fm(),this.Fe=He.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ee(),n=ee(),r=ee();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new so(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Fm()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,se(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class dA{constructor(e){this.We=e,this.Ge=new Map,this.ze=gn(),this.je=Ko(),this.Je=Ko(),this.He=new Ee(J)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Qc(s))if(r===0){const o=new q(s.path);this.Xe(n,o,Je.newNoDocument(o,K.min()))}else se(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const l=this._t(e),u=l?this.ut(l,e,o):1;if(u!==0){this.rt(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Kn(r).toUint8Array()}catch(u){if(u instanceof r_)return Ir("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pd(o,i,s)}catch(u){return Ir(u instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const l=this.st(o);if(l){if(s.current&&Qc(l.target)){const u=new q(l.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,Je.newNoDocument(u,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=ee();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.st(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Rl(e,n,this.He,this.ze,r);return this.ze=gn(),this.je=Ko(),this.Je=Ko(),this.He=new Ee(J),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Mm,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ve(J),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ve(J),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mm),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Ko(){return new Ee(q.comparator)}function Fm(){return new Ee(q.comparator)}const fA={asc:"ASCENDING",desc:"DESCENDING"},pA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mA={and:"AND",or:"OR"};class gA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kc(t,e){return t.useProto3Json||wl(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yA(t,e){return Xa(t,e.toTimestamp())}function qt(t){return se(!!t,49232),K.fromTimestamp(function(n){const r=Gn(n);return new fe(r.seconds,r.nanos)}(t))}function md(t,e){return Xc(t,e).canonicalString()}function Xc(t,e){const n=function(i){return new de(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function j_(t){const e=de.fromString(t);return se(b_(e),10190,{key:e.toString()}),e}function Yc(t,e){return md(t.databaseId,e.path)}function Mu(t,e){const n=j_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(O_(n))}function L_(t,e){return md(t.databaseId,e)}function vA(t){const e=j_(t);return e.length===4?de.emptyPath():O_(e)}function Jc(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bm(t,e,n){return{name:Yc(t,e),fields:n.value.mapValue.fields}}function _A(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(se(f===void 0||typeof f=="string",58123),He.fromBase64String(f||"")):(se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),He.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?b.UNKNOWN:k_(h.code);return new W(f,h.message||"")}(o);n=new D_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mu(t,r.document.name),s=qt(r.document.updateTime),o=r.document.createTime?qt(r.document.createTime):K.min(),l=new ut({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new pa(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Mu(t,r.document),s=r.readTime?qt(r.readTime):K.min(),o=Je.newNoDocument(i,s),l=r.removedTargetIds||[];n=new pa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Mu(t,r.document),s=r.removedTargetIds||[];n=new pa([],s,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uA(i,s),l=r.targetId;n=new N_(l,o)}}return n}function EA(t,e){let n;if(e instanceof io)n={update:bm(t,e.key,e.value)};else if(e instanceof dd)n={delete:Yc(t,e.key)};else if(e instanceof ir)n={update:bm(t,e.key,e.data),updateMask:xA(e.fieldMask)};else{if(!(e instanceof oA))return Q(16599,{Rt:e.type});n={verify:Yc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Ga)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ks)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ka)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function wA(t,e){return t&&t.length>0?(se(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?qt(i.updateTime):qt(s);return o.isEqual(K.min())&&(o=qt(s)),new rA(o,i.transformResults||[])}(n,e))):[]}function TA(t,e){return{documents:[L_(t,e.path)]}}function SA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=L_(t,i);const s=function(h){if(h.length!==0)return F_(Xt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:Br(g.field),direction:CA(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Kc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function IA(t){let e=vA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=M_(p);return g instanceof Xt&&f_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(P){return new Qa(zr(P.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,wl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,T=p.values||[];return new qa(T,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,T=p.values||[];return new qa(T,g)}(n.endAt)),$1(e,i,o,s,l,"F",u,h)}function AA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zr(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zr(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zr(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zr(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(zr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xt.create(n.compositeFilter.filters.map(r=>M_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function CA(t){return fA[t]}function PA(t){return pA[t]}function RA(t){return mA[t]}function Br(t){return{fieldPath:t.canonicalString()}}function zr(t){return Be.fromServerFormat(t.fieldPath)}function F_(t){return t instanceof Ne?function(n){if(n.op==="=="){if(Cm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NAN"}};if(Am(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cm(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NAN"}};if(Am(n.value))return{unaryFilter:{field:Br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Br(n.field),op:PA(n.op),value:n.value}}}(t):t instanceof Xt?function(n){const r=n.getFilters().map(i=>F_(i));return r.length===1?r[0]:{compositeFilter:{op:RA(n.op),filters:r}}}(t):Q(54877,{filter:t})}function xA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function b_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r,i,s=K.min(),o=K.min(),l=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.gt=e}}function NA(t){const e=IA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Dn=new VA}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Qn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class VA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ve(de.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U_=41943040;class at{static withCacheSize(e){return new at(e,at.DEFAULT_COLLECTION_PERCENTILE,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */at.DEFAULT_COLLECTION_PERCENTILE=10,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,at.DEFAULT=new at(U_,at.DEFAULT_COLLECTION_PERCENTILE,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),at.DISABLED=new at(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ti(0)}static ur(){return new Ti(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LruGarbageCollector",jA=1048576;function zm([t,e],[n,r]){const i=J(t,n);return i===0?J(e,r):i}class LA{constructor(e){this.Tr=e,this.buffer=new Ve(zm),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){$(Bm,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Di(n)?$(Bm,"Ignoring IndexedDB error during garbage collection: ",n):await Ni(n)}await this.Rr(3e5)})}}class MA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(El.ue);const r=new LA(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Um)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Um):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),br()<=ne.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function FA(t,e){return new MA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.changes=new xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ss(r.mutation,i,yt.empty(),fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const i=mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ls();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=gn();const o=Ts(),l=function(){return Ts()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof ir)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Ss(f.mutation,h,f.mutation.getFieldMask(),fe.now())):o.set(h.key,yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new UA(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ts();let i=new Ee((o,l)=>o-l),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||yt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||ee()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=T_();f.forEach(g=>{if(!s.has(g)){const T=R_(n.get(g),r.get(g));T!==null&&p.set(g,T),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(mr());let l=Hs,u=s;return o.next(h=>M.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ee())).next(f=>({batchId:l,changes:w_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=ls();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ls();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const h=function(p,g){return new Sl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Je.newInvalidDocument(f)))});let l=ls();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Ss(f.mutation,h,yt.empty(),fe.now()),Al(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:NA(i.bundledQuery),readTime:qt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.overlays=new Ee(q.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=mr(),s=n.length+1,o=new q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=mr(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return M.resolve(l)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lA(n,r));let s=this.kr.get(n);s===void 0&&(s=ee(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this.qr=new Ve(je.Qr),this.$r=new Ve(je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new je(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new je(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new q(new de([])),r=new je(n,e),i=new je(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new q(new de([])),r=new je(n,e),i=new je(n,e+1);let s=ee();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new je(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class je{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||J(e.Hr,n.Hr)}static Ur(e,n){return J(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ve(je.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aA(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Yr=this.Yr.add(new je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?od:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const l=this.Zr(o.Hr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ve(J);return n.forEach(i=>{const s=new je(i,0),o=new je(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],l=>{r=r.add(l.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new je(new q(s),0);let l=new Ve(J);return this.Yr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Hr)),!0)},o),M.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){se(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{const s=new je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new je(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.ni=e,this.docs=function(){return new Ee(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=gn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gn();const o=n.path,l=new q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||w1(E1(f),r)<=0||(i.has(f.key)||Al(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QA(this)}getSize(e){return M.resolve(this.size)}}class QA extends bA{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.persistence=e,this.ii=new xr(n=>ud(n),cd),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.si=0,this.oi=new gd,this.targetCount=0,this._i=Ti.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ti(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.ai={},this.overlays={},this.ui=new El(0),this.ci=!1,this.ci=!0,this.li=new HA,this.referenceDelegate=e(this),this.hi=new GA(this),this.indexManager=new DA,this.remoteDocumentCache=function(i){return new qA(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new kA(n),this.Ti=new zA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $A,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new WA(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new KA(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class KA extends S1{constructor(e){super(),this.currentSequenceNumber=e}}class yd{constructor(e){this.persistence=e,this.Ai=new gd,this.Ri=null}static Vi(e){return new yd(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{const i=q.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,K.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ya{constructor(e,n){this.persistence=e,this.gi=new xr(r=>C1(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FA(this,n)}static Vi(e,n){return new Ya(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(l=>{l||(r++,s.removeEntry(o,K.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ha(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ee(),i=ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return YS()?8:I1(KS())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XA;return this.ws(e,n,o).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,n,o,l.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(br()<=ne.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(br()<=ne.DEBUG&&$("QueryEngine","Query:",Ur(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(br()<=ne.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):M.resolve())}ps(e,n){if(km(n))return M.resolve(null);let r=Wt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gc(n,null,"F"),r=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ee(...s);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ds(n,h,o,u.readTime)?this.ps(e,Gc(n,null,"F")):this.vs(e,h,n,u)}))})))}ys(e,n,r,i){return km(n)||i.isEqual(K.min())?M.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?M.resolve(null):(br()<=ne.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ur(n)),this.vs(e,o,n,_1(i,Hs)).next(l=>l))})}bs(e,n){let r=new Ve(__(e));return n.forEach((i,s)=>{Al(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return br()<=ne.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ur(n)),this.gs.getDocumentsMatchingQuery(e,n,Qn.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="LocalStore",JA=3e8;class ZA{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ee(J),this.Ms=new xr(s=>ud(s),cd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function eC(t,e,n,r){return new ZA(t,e,n,r)}async function z_(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ee();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:l}))})})}function tC(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,g=p.keys();let T=M.resolve();return g.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(R=>{const k=h.docVersions.get(P);se(k!==null,48541),R.version.compareTo(k)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $_(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function nC(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.hi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(s,f.addedDocuments,p)));let T=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(He.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(R,k,w){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=JA?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,T,f)&&l.push(n.hi.updateTargetData(s,T))});let u=gn(),h=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(rC(s,o,e.documentUpdates).next(f=>{u=f.Ls,h=f.ks})),!r.isEqual(K.min())){const f=n.hi.getLastRemoteSnapshotVersion(s).next(p=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Fs=i,s))}function rC(t,e,n){let r=ee(),i=ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$(_d,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function iC(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=od),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sC(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new kn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Zc(t,e,n){const r=X(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Di(o))throw o;$(_d,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function $m(t,e,n){const r=X(t);let i=K.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=X(u),g=p.Ms.get(f);return g!==void 0?M.resolve(p.Fs.get(g)):p.hi.getTargetData(h,f)}(r,o,Wt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:K.min(),n?s:ee())).next(l=>(oC(r,q1(e),l),{documents:l,qs:s})))}function oC(t,e,n){let r=t.xs.get(e)||K.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class Hm{constructor(){this.activeTargetIds=J1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aC{constructor(){this.Fo=new Hm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="ConnectivityMonitor";class qm{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){$(Wm,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){$(Wm,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo=null;function eh(){return Xo===null?Xo=function(){return 268435456+Math.round(2147483648*Math.random())}():Xo++,"0x"+Xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="RestConnection",uC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===$c?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=eh(),l=this.Go(e,n.toUriEncodedString());$(Fu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);const{host:h}=new URL(l),f=GS(h);return this.jo(e,l,u,r,f).then(p=>($(Fu,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ir(Fu,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ki}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=uC[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class dC extends cC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=eh();return new Promise((l,u)=>{const h=new qv;h.setWithCredentials(!0),h.listenOnce(Qv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ca.NO_ERROR:const p=h.getResponseJson();$(Xe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ca.TIMEOUT:$(Xe,`RPC '${e}' ${o} timed out`),u(new W(b.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const g=h.getStatus();if($(Xe,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const P=T==null?void 0:T.error;if(P&&P.status&&P.message){const R=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(v)>=0?v:b.UNKNOWN}(P.status);u(new W(R,P.message))}else u(new W(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new W(b.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{$(Xe,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);$(Xe,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",f,r,15)})}P_(e,n,r){const i=eh(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xv(),l=Kv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");$(Xe,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);this.T_(p);let g=!1,T=!1;const P=new hC({Ho:k=>{T?$(Xe,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||($(Xe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),$(Xe,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Yo:()=>p.close()}),R=(k,w,v)=>{k.listen(w,E=>{try{v(E)}catch(N){setTimeout(()=>{throw N},0)}})};return R(p,as.EventType.OPEN,()=>{T||($(Xe,`RPC '${e}' stream ${i} transport opened.`),P.s_())}),R(p,as.EventType.CLOSE,()=>{T||(T=!0,$(Xe,`RPC '${e}' stream ${i} transport closed`),P.__(),this.I_(p))}),R(p,as.EventType.ERROR,k=>{T||(T=!0,Ir(Xe,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),P.__(new W(b.UNAVAILABLE,"The operation could not be completed")))}),R(p,as.EventType.MESSAGE,k=>{var w;if(!T){const v=k.data[0];se(!!v,16349);const E=v,N=(E==null?void 0:E.error)||((w=E[0])===null||w===void 0?void 0:w.error);if(N){$(Xe,`RPC '${e}' stream ${i} received error:`,N);const O=N.status;let F=function(I){const A=Pe[I];if(A!==void 0)return k_(A)}(O),S=N.message;F===void 0&&(F=b.INTERNAL,S="Unknown error status: "+O+" with message "+N.message),T=!0,P.__(new W(F,S)),p.close()}else $(Xe,`RPC '${e}' stream ${i} received:`,v),P.a_(v)}}),R(l,Gv.STAT_EVENT,k=>{k.stat===Bc.PROXY?$(Xe,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Bc.NOPROXY&&$(Xe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){return new gA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="PersistentStream";class W_{constructor(e,n,r,i,s,o,l,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new H_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new W(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return $(Qm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():($(Qm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fC extends W_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=_A(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?qt(o.readTime):K.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Jc(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Qc(u)?{documents:TA(s,u)}:{query:SA(s,u).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=V_(s,o.resumeToken);const h=Kc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(K.min())>0){l.readTime=Xa(s,o.snapshotVersion.toTimestamp());const h=Kc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=AA(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Jc(this.serializer),n.removeTarget=e,this.k_(n)}}class pC extends W_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=wA(e.writeResults,e.commitTime),r=qt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Jc(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>EA(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{}class gC extends mC{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new W(b.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Xc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(b.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,Xc(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(b.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class yC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mn(n),this._a=!1):$("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="RemoteStore";class vC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{kr(this)&&($(Ar,"Restarting streams for network reachability change."),await async function(u){const h=X(u);h.Ia.add(4),await oo(h),h.Aa.set("Unknown"),h.Ia.delete(4),await kl(h)}(this))})}),this.Aa=new yC(r,i)}}async function kl(t){if(kr(t))for(const e of t.da)await e(!0)}async function oo(t){for(const e of t.da)await e(!1)}function q_(t,e){const n=X(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Sd(n)?Td(n):Vi(n).x_()&&wd(n,e))}function Ed(t,e){const n=X(t),r=Vi(n);n.Ta.delete(e),r.x_()&&Q_(n,e),n.Ta.size===0&&(r.x_()?r.B_():kr(n)&&n.Aa.set("Unknown"))}function wd(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vi(t).H_(e)}function Q_(t,e){t.Ra.$e(e),Vi(t).Y_(e)}function Td(t){t.Ra=new dA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Vi(t).start(),t.Aa.aa()}function Sd(t){return kr(t)&&!Vi(t).M_()&&t.Ta.size>0}function kr(t){return X(t).Ia.size===0}function G_(t){t.Ra=void 0}async function _C(t){t.Aa.set("Online")}async function EC(t){t.Ta.forEach((e,n)=>{wd(t,e)})}async function wC(t,e){G_(t),Sd(t)?(t.Aa.la(e),Td(t)):t.Aa.set("Unknown")}async function TC(t,e,n){if(t.Aa.set("Online"),e instanceof D_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ta.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ta.delete(l),i.Ra.removeTarget(l))}(t,e)}catch(r){$(Ar,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ja(t,r)}else if(e instanceof pa?t.Ra.Ye(e):e instanceof N_?t.Ra.it(e):t.Ra.et(e),!n.isEqual(K.min()))try{const r=await $_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Ra.Pt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Ta.get(h);f&&s.Ta.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.Ta.get(u);if(!f)return;s.Ta.set(u,f.withResumeToken(He.EMPTY_BYTE_STRING,f.snapshotVersion)),Q_(s,u);const p=new kn(f.target,u,h,f.sequenceNumber);wd(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(Ar,"Failed to raise snapshot:",r),await Ja(t,r)}}async function Ja(t,e,n){if(!Di(e))throw e;t.Ia.add(1),await oo(t),t.Aa.set("Offline"),n||(n=()=>$_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Ar,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await kl(t)})}function K_(t,e){return e().catch(n=>Ja(t,n,e))}async function Nl(t){const e=X(t),n=Yn(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:od;for(;SC(e);)try{const i=await iC(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,IC(e,i)}catch(i){await Ja(e,i)}X_(e)&&Y_(e)}function SC(t){return kr(t)&&t.Pa.length<10}function IC(t,e){t.Pa.push(e);const n=Yn(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function X_(t){return kr(t)&&!Yn(t).M_()&&t.Pa.length>0}function Y_(t){Yn(t).start()}async function AC(t){Yn(t).na()}async function CC(t){const e=Yn(t);for(const n of t.Pa)e.X_(n.mutations)}async function PC(t,e,n){const r=t.Pa.shift(),i=fd.from(r,e,n);await K_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Nl(t)}async function RC(t,e){e&&Yn(t).Z_&&await async function(r,i){if(function(o){return cA(o)&&o!==b.ABORTED}(i.code)){const s=r.Pa.shift();Yn(r).N_(),await K_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Nl(r)}}(t,e),X_(t)&&Y_(t)}async function Gm(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),$(Ar,"RemoteStore received new credentials");const r=kr(n);n.Ia.add(3),await oo(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await kl(n)}async function xC(t,e){const n=X(t);e?(n.Ia.delete(2),await kl(n)):e||(n.Ia.add(2),await oo(n),n.Aa.set("Unknown"))}function Vi(t){return t.Va||(t.Va=function(n,r,i){const s=X(n);return s.ia(),new fC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:_C.bind(null,t),e_:EC.bind(null,t),n_:wC.bind(null,t),J_:TC.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Sd(t)?Td(t):t.Aa.set("Unknown")):(await t.Va.stop(),G_(t))})),t.Va}function Yn(t){return t.ma||(t.ma=function(n,r,i){const s=X(n);return s.ia(),new pC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:AC.bind(null,t),n_:RC.bind(null,t),ea:CC.bind(null,t),ta:PC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Nl(t)):(await t.ma.stop(),t.Pa.length>0&&($(Ar,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Id(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ad(t,e){if(mn("AsyncQueue",`${e}: ${t}`),Di(t))return new W(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{static emptySet(e){return new ai(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=ls(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ai;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.fa=new Ee(q.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Si{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Si(e,n,ai.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class NC{constructor(){this.queries=Xm(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=Xm(),s.forEach((o,l)=>{for(const u of l.wa)u.onError(r)})})(this,new W(b.ABORTED,"Firestore shutting down"))}}function Xm(){return new xr(t=>v_(t),Il)}async function DC(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new kC,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Ad(o,`Initialization of query '${Ur(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Cd(n)}async function VC(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jC(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.wa)l.Ca(i)&&(r=!0);o.ya=i}}r&&Cd(n)}function LC(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Cd(t){t.Da.forEach(e=>{e.next()})}var th,Ym;(Ym=th||(th={})).Fa="default",Ym.Cache="cache";class OC{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Si(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.key=e}}class Z_{constructor(e){this.key=e}}class MC{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ee(),this.mutatedKeys=ee(),this.Xa=__(e),this.eu=new ai(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Km,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),T=Al(this.query,p)?p:null,P=!!g&&this.mutatedKeys.has(g.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;g&&T?g.data.isEqual(T.data)?P!==R&&(r.track({type:3,doc:T}),k=!0):this.iu(g,T)||(r.track({type:2,doc:T}),k=!0,(u&&this.Xa(T,u)>0||h&&this.Xa(T,h)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),k=!0):g&&!T&&(r.track({type:1,doc:g}),k=!0,(u||h)&&(l=!0)),k&&(T?(o=o.add(T),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{eu:o,ru:r,Ds:l,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((f,p)=>function(T,P){const R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:k})}};return R(T)-R(P)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;const l=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,h=u!==this.Ya;return this.Ya=u,o.length!==0||h?{snapshot:new Si(this.query,e.eu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Km,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Z_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new J_(r))}),n}uu(e){this.Ha=e.qs,this.Za=ee();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Si.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pd="SyncEngine";class FC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bC{constructor(e){this.key=e,this.lu=!1}}class UC{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new xr(l=>v_(l),Il),this.Tu=new Map,this.Iu=new Set,this.du=new Ee(q.comparator),this.Eu=new Map,this.Au=new gd,this.Ru={},this.Vu=new Map,this.mu=Ti.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BC(t,e,n=!0){const r=sE(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await eE(r,e,n,!0),i}async function zC(t,e){const n=sE(t);await eE(n,e,!0,!1)}async function eE(t,e,n,r){const i=await sC(t.localStore,Wt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await $C(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&q_(t.remoteStore,i),l}async function $C(t,e,n,r,i){t.gu=(p,g,T)=>async function(R,k,w,v){let E=k.view.nu(w);E.Ds&&(E=await $m(R.localStore,k.query,!1).then(({documents:S})=>k.view.nu(S,E)));const N=v&&v.targetChanges.get(k.targetId),O=v&&v.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(E,R.isPrimaryClient,N,O);return Zm(R,k.targetId,F._u),F.snapshot}(t,p,g,T);const s=await $m(t.localStore,e,!0),o=new MC(e,s.qs),l=o.nu(s.documents),u=so.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Zm(t,n,h._u);const f=new FC(e,n,o);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function HC(t,e,n){const r=X(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Il(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ed(r.remoteStore,i.targetId),nh(r,i.targetId)}).catch(Ni)):(nh(r,i.targetId),await Zc(r.localStore,i.targetId,!0))}async function WC(t,e){const n=X(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ed(n.remoteStore,r.targetId))}async function qC(t,e,n){const r=ZC(t);try{const i=await function(o,l){const u=X(o),h=fe.now(),f=l.reduce((T,P)=>T.add(P.key),ee());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=gn(),R=ee();return u.Os.getEntries(T,f).next(k=>{P=k,P.forEach((w,v)=>{v.isValidDocument()||(R=R.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(k=>{p=k;const w=[];for(const v of l){const E=sA(v,p.get(v.key).overlayedDocument);E!=null&&w.push(new ir(v.key,E,c_(E.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,w,l)}).next(k=>{g=k;const w=k.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(T,k.batchId,w)})}).then(()=>({batchId:g.batchId,changes:w_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ru[o.currentUser.toKey()];h||(h=new Ee(J)),h=h.insert(l,u),o.Ru[o.currentUser.toKey()]=h}(r,i.batchId,n),await ao(r,i.changes),await Nl(r.remoteStore)}catch(i){const s=Ad(i,"Failed to persist write");n.reject(s)}}async function tE(t,e){const n=X(t);try{const r=await nC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?se(o.lu,14607):i.removedDocuments.size>0&&(se(o.lu,42227),o.lu=!1))}),await ao(n,r,e)}catch(r){await Ni(r)}}function Jm(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const g of p.wa)g.va(l)&&(h=!0)}),h&&Cd(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QC(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ee(q.comparator);o=o.insert(s,Je.newNoDocument(s,K.min()));const l=ee().add(s),u=new Rl(K.min(),new Map,new Ee(J),o,l);await tE(r,u),r.du=r.du.remove(s),r.Eu.delete(e),Rd(r)}else await Zc(r.localStore,e,!1).then(()=>nh(r,e,n)).catch(Ni)}async function GC(t,e){const n=X(t),r=e.batch.batchId;try{const i=await tC(n.localStore,e);rE(n,r,null),nE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ao(n,i)}catch(i){await Ni(i)}}async function KC(t,e,n){const r=X(t);try{const i=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(se(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);rE(r,e,n),nE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ao(r,i)}catch(i){await Ni(i)}}function nE(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function rE(t,e,n){const r=X(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||iE(t,r)})}function iE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ed(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Rd(t))}function Zm(t,e,n){for(const r of n)r instanceof J_?(t.Au.addReference(r.key,e),XC(t,r)):r instanceof Z_?($(Pd,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||iE(t,r.key)):Q(19791,{yu:r})}function XC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||($(Pd,"New document in limbo: "+n),t.Iu.add(r),Rd(t))}function Rd(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new q(de.fromString(e)),r=t.mu.next();t.Eu.set(r,new bC(n)),t.du=t.du.insert(n,r),q_(t.remoteStore,new kn(Wt(y_(n.path)),r,"TargetPurposeLimboResolution",El.ue))}}async function ao(t,e,n){const r=X(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((l,u)=>{o.push(r.gu(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=vd.Es(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await async function(u,h){const f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(h,g=>M.forEach(g.Is,T=>f.persistence.referenceDelegate.addReference(p,g.targetId,T)).next(()=>M.forEach(g.ds,T=>f.persistence.referenceDelegate.removeReference(p,g.targetId,T)))))}catch(p){if(!Di(p))throw p;$(_d,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const T=f.Fs.get(g),P=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(P);f.Fs=f.Fs.insert(g,R)}}}(r.localStore,s))}async function YC(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){$(Pd,"User change. New user:",e.toKey());const r=await z_(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(l=>{l.forEach(u=>{u.reject(new W(b.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ao(n,r.Bs)}}function JC(t,e){const n=X(t),r=n.Eu.get(e);if(r&&r.lu)return ee().add(r.key);{let i=ee();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const l=n.Pu.get(o);i=i.unionWith(l.view.tu)}return i}}function sE(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QC.bind(null,e),e.hu.J_=jC.bind(null,e.eventManager),e.hu.pu=LC.bind(null,e.eventManager),e}function ZC(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KC.bind(null,e),e}class Za{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return eC(this.persistence,new YA,e.initialUser,this.serializer)}Du(e){return new B_(yd.Vi,this.serializer)}bu(e){return new aC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Za.provider={build:()=>new Za};class eP extends Za{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){se(this.persistence.referenceDelegate instanceof Ya,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new OA(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?at.withCacheSize(this.cacheSizeBytes):at.DEFAULT;return new B_(r=>Ya.Vi(r,n),this.serializer)}}class rh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YC.bind(null,this.syncEngine),await xC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NC}()}createDatastore(e){const n=xl(e.databaseInfo.databaseId),r=function(s){return new dC(s)}(e.databaseInfo);return function(s,o,l,u){return new gC(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new vC(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Jm(this.syncEngine,n,0),function(){return qm.C()?new qm:new lC}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new UC(i,s,o,l,u,h);return f&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);$(Ar,"RemoteStore shutting down."),s.Ia.add(5),await oo(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rh.provider={build:()=>new rh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="FirestoreClient";class nP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(Jn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Jn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ad(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),$(Jn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await z_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ir("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{$("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ir("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function eg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rP(t);$(Jn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Gm(e.remoteStore,i)),t._onlineComponents=e}async function rP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Jn,"Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===b.FAILED_PRECONDITION||i.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new Za)}}else $(Jn,"Using default OfflineComponentProvider"),await Uu(t,new eP(void 0));return t._offlineComponents}async function oE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Jn,"Using user provided OnlineComponentProvider"),await eg(t,t._uninitializedComponentsProvider._online)):($(Jn,"Using default OnlineComponentProvider"),await eg(t,new rh))),t._onlineComponents}function iP(t){return oE(t).then(e=>e.syncEngine)}async function sP(t){const e=await oE(t),n=e.eventManager;return n.onListen=BC.bind(null,e.syncEngine),n.onUnlisten=HC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WC.bind(null,e.syncEngine),n}function oP(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const f=new tP({next:g=>{f.Ou(),o.enqueueAndForget(()=>VC(s,p)),g.fromCache&&u.source==="server"?h.reject(new W(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new OC(l,f,{includeMetadataChanges:!0,ka:!0});return DC(s,p)}(await sP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="firestore.googleapis.com",ng=!0;class rg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aP,this.ssl=ng}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ng;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jA)throw new W(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c1;switch(r.type){case"firstParty":return new f1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tg.get(n);r&&($("ComponentProvider","Removing Datastore"),tg.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dl(this.firestore,e,this._query)}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ro(n,Oe._jsonSchema))return new Oe(e,r||null,new q(de.fromString(n.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:xe("string",Oe._jsonSchemaVersion),referencePath:xe("string")};class $n extends Dl{constructor(e,n,r){super(e,n,y_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new q(e))}withConverter(e){return new $n(this.firestore,e,this._path)}}function Vl(t,e,...n){if(t=qn(t),Zv("collection","path",e),t instanceof xd){const r=de.fromString(e,...n);return ym(r),new $n(t,null,r)}{if(!(t instanceof Oe||t instanceof $n))throw new W(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return ym(r),new $n(t.firestore,null,r)}}function lo(t,e,...n){if(t=qn(t),arguments.length===1&&(e=id.newId()),Zv("doc","path",e),t instanceof xd){const r=de.fromString(e,...n);return gm(r),new Oe(t,null,new q(r))}{if(!(t instanceof Oe||t instanceof $n))throw new W(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return gm(r),new Oe(t.firestore,t instanceof $n?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="AsyncQueue";class sg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new H_(this,"async_queue_retry"),this.oc=()=>{const r=bu();r&&$(ig,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new zn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Di(e))throw e;$(ig,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,mn("INTERNAL UNHANDLED ERROR: ",og(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Id.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:og(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function og(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class uo extends xd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sg(e),this._firestoreClient=void 0,await e}}}function lE(t){if(t._terminated)throw new W(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lP(t),t._firestoreClient}function lP(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new x1(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,aE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this._byteString=e}static fromBase64String(e){try{return new At(He.fromBase64String(e))}catch(n){throw new W(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new At(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:At._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ro(e,At._jsonSchema))return At.fromBase64String(e.bytes)}}At._jsonSchemaVersion="firestore/bytes/1.0",At._jsonSchema={type:xe("string",At._jsonSchemaVersion),bytes:xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qt._jsonSchemaVersion}}static fromJSON(e){if(ro(e,Qt._jsonSchema))return new Qt(e.latitude,e.longitude)}}Qt._jsonSchemaVersion="firestore/geoPoint/1.0",Qt._jsonSchema={type:xe("string",Qt._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ro(e,Gt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gt(e.vectorValues);throw new W(b.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gt._jsonSchemaVersion="firestore/vectorValue/1.0",Gt._jsonSchema={type:xe("string",Gt._jsonSchemaVersion),vectorValues:xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=/^__.*__$/;class cP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new io(e,this.data,n,this.fieldTransforms)}}class uE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:t})}}class Nd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Nd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return el(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(cE(this.Ec)&&uP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class hP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xl(e)}Dc(e,n,r,i=!1){return new Nd({Ec:e,methodName:n,bc:r,path:Be.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hE(t){const e=t._freezeSettings(),n=xl(t._databaseId);return new hP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dP(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Dd("Data must be an object, but it was:",o,r);const l=dE(r,o);let u,h;if(s.merge)u=new yt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=ih(e,p,n);if(!o.contains(g))throw new W(b.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pE(f,g)||f.push(g)}u=new yt(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new cP(new ut(l),u,h)}class Ll extends kd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ll}}function fP(t,e,n,r){const i=t.Dc(1,e,n);Dd("Data must be an object, but it was:",i,r);const s=[],o=ut.empty();rr(r,(u,h)=>{const f=Vd(e,u,n);h=qn(h);const p=i.gc(f);if(h instanceof Ll)s.push(f);else{const g=Ol(h,p);g!=null&&(s.push(f),o.set(f,g))}});const l=new yt(s);return new uE(o,l,i.fieldTransforms)}function pP(t,e,n,r,i,s){const o=t.Dc(1,e,n),l=[ih(e,r,n)],u=[i];if(s.length%2!=0)throw new W(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(ih(e,s[g])),u.push(s[g+1]);const h=[],f=ut.empty();for(let g=l.length-1;g>=0;--g)if(!pE(h,l[g])){const T=l[g];let P=u[g];P=qn(P);const R=o.gc(T);if(P instanceof Ll)h.push(T);else{const k=Ol(P,R);k!=null&&(h.push(T),f.set(T,k))}}const p=new yt(h);return new uE(f,p,o.fieldTransforms)}function Ol(t,e){if(fE(t=qn(t)))return Dd("Unsupported field value:",e,t),dE(t,e);if(t instanceof kd)return function(r,i){if(!cE(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Ol(l,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=fe.fromDate(r);return{timestampValue:Xa(i.serializer,s)}}if(r instanceof fe){const s=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xa(i.serializer,s)}}if(r instanceof Qt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof At)return{bytesValue:V_(i.serializer,r._byteString)};if(r instanceof Oe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:md(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gt)return function(o,l){return{mapValue:{fields:{[l_]:{stringValue:u_},[Wa]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.wc("VectorValues must only contain numeric values.");return hd(l.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${sd(r)}`)}(t,e)}function dE(t,e){const n={};return n_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(t,(r,i)=>{const s=Ol(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof Qt||t instanceof At||t instanceof Oe||t instanceof kd||t instanceof Gt)}function Dd(t,e,n){if(!fE(n)||!e_(n)){const r=sd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function ih(t,e,n){if((e=qn(e))instanceof jl)return e._internalPath;if(typeof e=="string")return Vd(t,e);throw el("Field path arguments must be of type string or ",t,!1,void 0,n)}const mP=new RegExp("[~\\*/\\[\\]]");function Vd(t,e,n){if(e.search(mP)>=0)throw el(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jl(...e.split("."))._internalPath}catch{throw el(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function el(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(b.INVALID_ARGUMENT,l+t+u)}function pE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gP extends mE{data(){return super.data()}}function gE(t,e){return typeof e=="string"?Vd(t,e):e instanceof jl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vP{convertValue(e,n="none"){switch(Xn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Wa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ae(o.doubleValue));return new Gt(s)}convertGeoPoint(e){return new Qt(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ws(e));default:return null}}convertTimestamp(e){const n=Gn(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);se(b_(r),9688,{name:e});const i=new qs(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends mE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(b.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:xe("string",li._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class ma extends li{data(e={}){return super.data(e)}}class ui{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ma(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ma(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Yo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ma(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Yo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:EP(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(b.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=id.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:xe("string",ui._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class wP extends vP{constructor(e){super(),this.firestore=e}convertBytes(e){return new At(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function yE(t){t=_i(t,Dl);const e=_i(t.firestore,uo),n=lE(e),r=new wP(e);return yP(t._query),oP(n,t._query).then(i=>new ui(e,r,t,i))}function vE(t,e,n,...r){t=_i(t,Oe);const i=_i(t.firestore,uo),s=hE(i);let o;return o=typeof(e=qn(e))=="string"||e instanceof jl?pP(s,"updateDoc",t._key,e,n,r):fP(s,"updateDoc",t._key,e),jd(i,[o.toMutation(t._key,Mt.exists(!0))])}function _E(t){return jd(_i(t.firestore,uo),[new dd(t._key,Mt.none())])}function EE(t,e){const n=_i(t.firestore,uo),r=lo(t),i=_P(t.converter,e);return jd(n,[dP(hE(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function jd(t,e){return function(r,i){const s=new zn;return r.asyncQueue.enqueueAndForget(async()=>qC(await iP(r),i,s)),s.promise}(lE(t),e)}(function(e,n=!0){(function(i){ki=i})(JI),$a(new za("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new uo(new h1(r.getProvider("auth-internal")),new p1(o,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qs(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),_s(hm,dm,e),_s(hm,dm,"esm2017")})();let vn=null;function TP(){if(typeof window>"u")return!1;const t=window.__RELEVO_FIREBASE__,e=window.__RELEVO_AUTH__,n=window.__RELEVO_DB__;return!t||!e||!n?(console.warn(" Firebase do Portal ainda no est pronto no Cronograma."),!1):(vn=n,console.log(" Firebase integrado via Portal Relevo (Cronograma)."),!0)}TP();async function wE(){try{const t=Vl(vn,"projetos");return(await yE(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Erro ao listar projetos:",t),[]}}async function SP(t){try{const e=Vl(vn,"projetos");return(await EE(e,t)).id}catch(e){console.error("Erro ao criar projeto:",e)}}async function IP(t,e){try{await vE(lo(vn,"projetos",t),e)}catch(n){console.error("Erro ao editar projeto:",n)}}async function AP(t){try{await _E(lo(vn,"projetos",t))}catch(e){console.error("Erro ao remover projeto:",e)}}async function CP(){try{const t=Vl(vn,"tarefas");return(await yE(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Erro ao listar tarefas:",t),[]}}async function TE(t){try{const e=Vl(vn,"tarefas");return(await EE(e,t)).id}catch(e){console.error("Erro ao criar tarefa:",e)}}async function PP(t,e){try{await vE(lo(vn,"tarefas",t),e)}catch(n){console.error("Erro ao editar tarefa:",n)}}async function RP(t){try{await _E(lo(vn,"tarefas",t))}catch(e){console.error("Erro ao remover tarefa:",e)}}function xP(){return new Promise(t=>{if(window.__RELEVO_DB__&&window.__RELEVO_AUTH__)return t();const e=setInterval(()=>{window.__RELEVO_DB__&&window.__RELEVO_AUTH__&&(clearInterval(e),t())},50)})}const SE=L.createContext();function Nr(){return L.useContext(SE)}function kP({children:t}){const[e,n]=L.useState(!1),[r,i]=L.useState(null),[s,o]=L.useState(null),[l,u]=L.useState([]),[h,f]=L.useState([]),[p,g]=L.useState(!0);L.useEffect(()=>{let O=!0;async function F(){if(console.log(" Aguardando Firebase do Portal..."),await xP(),!O)return;const S=window.__RELEVO_AUTH__,_=window.__RELEVO_DB__;if(!S||!_){console.error(" Erro crtico: Firebase deveria estar pronto aqui.");return}i(S),o(_),n(!0),console.log(" Cronograma inicializado aps Firebase do Portal."),await T()}return F(),()=>{O=!1}},[]);async function T(){try{g(!0);const O=await wE(),F=await CP();u(O),f(F)}catch(O){console.error("Erro carregando dados do Cronograma:",O)}finally{g(!1)}}async function P(O){await SP(O),await T()}async function R(O,F){await IP(O,F),await T()}async function k(O){await AP(O),await T()}async function w(O){await TE(O),await T()}async function v(O,F){await PP(O,F),await T()}async function E(O){await RP(O),await T()}const N={firebasePronto:e,auth:r,db:s,projetos:l,tarefas:h,carregando:p,adicionarProjeto:P,atualizarProjeto:R,deletarProjeto:k,adicionarTarefa:w,atualizarTarefa:v,deletarTarefa:E};return m.jsx(SE.Provider,{value:N,children:t})}function ag(t){if(!t)return null;const e=new Date(t);return isNaN(e.getTime())?null:e}function Ld(t,e){if(!t||!e)return 0;const n=e.getTime()-t.getTime();return Math.round(n/(1e3*60*60*24))}function Xs(t){return t?t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function Od(t){const e=new Date(t),n=e.getDay(),r=(n===0?-6:1)-n;return e.setDate(e.getDate()+r),e.setHours(0,0,0,0),e}function IE(t){const e=Od(t),n=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0");return`${n}/${r}`}function NP(t,e){const n=new Date(e);return n.setHours(0,0,0,0),(t||[]).map(r=>{const i=ag(r.inicio),s=ag(r.fim);let o=r.status||"pendente";s&&s<n&&o!=="concluida"&&(o="atrasada");const l=i&&s?Ld(i,s)+1:null;return{...r,inicioDate:i,fimDate:s,statusEfetivo:o,duracaoDias:l}})}function DP(t,e){const n=(e||[]).length,r=t.length,i=t.filter(f=>f.statusEfetivo==="concluida").length,s=t.filter(f=>f.statusEfetivo==="atrasada").length,o=t.filter(f=>f.statusEfetivo==="andamento").length,l=t.filter(f=>f.statusEfetivo==="pendente").length,u=r>0?Math.round(i/r*100):0,h=r>0?Math.round(s/r*100):0;return{totalProjetos:n,totalTarefas:r,concluidas:i,atrasadas:s,andamento:o,pendentes:l,percConcluidas:u,percAtrasadas:h}}function VP(t){return t.totalTarefas===0?"Nenhuma tarefa cadastrada por enquanto. tima janela para planejar com calma o prximo projeto.":t.atrasadas===0&&t.percConcluidas>=60?`Cronograma saudvel: ${t.percConcluidas}% das tarefas concludas e nenhuma em atraso.`:t.atrasadas>0&&t.percAtrasadas<=20?`Algumas tarefas em atraso (${t.atrasadas}), mas o cenrio ainda  recupervel com ajustes pontuais.`:t.percAtrasadas>20?`Cronograma em risco: ${t.percAtrasadas}% das tarefas esto em atraso. Hora de replanejar a linha de base.`:`Execuo em andamento: ${t.concluidas} concludas, ${t.andamento} em andamento e ${t.atrasadas} em atraso.`}function jP(t,e){const n=Object.fromEntries((e||[]).map(r=>[r.id,r.nome||r.titulo||r.id]));return t.filter(r=>r.statusEfetivo==="atrasada").sort((r,i)=>(r.fimDate||0)-(i.fimDate||0)).slice(0,5).map(r=>({nome:r.nome,projeto:n[r.projetoId]||"",fimOriginal:Xs(r.fimDate),diasAtraso:Ld(r.fimDate,new Date)}))}function LP(t,e){const n=Object.fromEntries((e||[]).map(r=>[r.id,r.nome||r.titulo||r.id]));return t.filter(r=>r.statusEfetivo==="andamento").sort((r,i)=>(r.fimDate||0)-(i.fimDate||0)).slice(0,6).map(r=>({nome:r.nome,projeto:n[r.projetoId]||"",fimPrevisto:Xs(r.fimDate)}))}function OP(t,e){const n=Object.fromEntries((e||[]).map(o=>[o.id,o.nome||o.titulo||o.id])),r=new Date,i=new Date;return i.setDate(r.getDate()+10),t.filter(o=>{if(!o.fimDate||o.statusEfetivo==="concluida")return!1;const l=(o.nome||"").toLowerCase(),u=l.includes("relatrio")||l.includes("relatorio")||l.includes("entrega")||l.includes("produto")||l.includes("pagamento"),h=o.fimDate<=i,f=typeof o.duracaoDias=="number"?o.duracaoDias>=7:!1;return u||h||f}).sort((o,l)=>(o.fimDate||0)-(l.fimDate||0)).slice(0,5).map(o=>({nome:o.nome,projeto:n[o.projetoId]||"",fimPrevisto:Xs(o.fimDate)}))}function MP(t){if(!t.length)return{dataProvavel:null,diasPotencialAtraso:0,texto:"Sem tarefas cadastradas, ainda no h projeo de concluso."};const e=t.filter(l=>l.fimDate).map(l=>l.fimDate).sort((l,u)=>l-u)[t.length-1],n=t.filter(l=>l.statusEfetivo==="atrasada"),r=new Date;let i=0;if(n.length>0){const l=Math.max(...n.map(u=>Ld(u.fimDate,r)));i=Math.max(l,0)}const s=new Date(e);s.setDate(s.getDate()+i);let o;return i===0?o=`Mantida a linha de base, a concluso geral  esperada em ${Xs(s)}.`:o=`Se as pendncias atuais no forem replanejadas, a concluso geral pode escorregar cerca de ${i} dia(s), para ${Xs(s)}.`,{dataProvavel:s,diasPotencialAtraso:i,texto:o}}function FP(t){const e=new Date,n=[];for(let i=7;i>=0;i--){const s=new Date(e);s.setDate(s.getDate()-i*7);const o=Od(s),l=new Date(o);l.setDate(o.getDate()+6);const u=t.filter(h=>!h.statusEfetivo==="concluida"||!h.fimDate?!1:h.fimDate>=o&&h.fimDate<=l).length;n.push({label:IE(o),valor:u})}const r=Math.max(...n.map(i=>i.valor),1);return n.map(i=>({...i,percent:Math.round(i.valor/r*100)}))}function bP(t){const e=new Date,n=[];for(let r=0;r<8;r++){const i=Od(new Date(e));i.setDate(i.getDate()+r*7);const s=new Date(i);s.setDate(i.getDate()+6);const o=t.filter(u=>u.fimDate?u.fimDate>=i&&u.fimDate<=s:!1).length;let l=1;o>=8?l=3:o>=4&&(l=2),n.push({label:IE(i),carga:o,nivel:l})}return n}function UP(t){const e=t.map(u=>u.nome+" "+(u.descricao||"")).join(" ").toLowerCase(),n=e.includes("campo")||e.includes("monitoramento")||e.includes("levantamento"),r=e.includes("anlise")||e.includes("analise")||e.includes("tratamento dos dados")||e.includes("processamento"),i=e.includes("licena")||e.includes("licenca")||e.includes("ibama")||e.includes("dnit")||e.includes("parecer")||e.includes("cliente"),s=t.some(u=>{const h=(u.nome||"").toLowerCase();return(h.includes("entrega")||h.includes("parcial")||h.includes("produto"))&&u.statusEfetivo==="atrasada"}),o=t.filter(u=>{const h=(u.nome||"").toLowerCase();return h.includes("relatrio final")||h.includes("relatorio final")||h.includes("rima")||h.includes("relatrio tcnico")}).length;return[{id:"campo",titulo:"Atraso por tempo de campo",nivel:n?"alto":"mdio",descricao:"Atividades de campo sensveis a clima e logstica. Manter plano B para janelas de chuva e imprevistos de acesso."},{id:"analise",titulo:"Sobrecarga de anlise",nivel:r?"alto":"mdio",descricao:"Etapas de tratamento e anlise de dados concentradas em poucos profissionais podem criar gargalos."},{id:"externo",titulo:"Dependncia externa",nivel:i?"alto":"mdio",descricao:"Dependncia de aprovaes de rgos, clientes ou terceiros. Acompanhar de perto prazos de resposta."},{id:"entregas",titulo:"Atraso nas entregas intermedirias",nivel:s?"alto":"mdio",descricao:"Produtos parciais em atraso tendem a empurrar o trabalho para o final do cronograma."},{id:"relatorio",titulo:"Acmulo de tarefas no relatrio final",nivel:o>=3?"alto":"mdio",descricao:"Muitas atividades convergindo para o relatrio final aumentam o risco de correria na reta final."}]}function BP(t,e,n,r){const i=[];t.atrasadas>0&&i.push({tipo:"risco",mensagem:`Voc tem ${t.atrasadas} tarefa(s) em atraso. Vale uma reunio rpida de replanejamento antes que isso escale.`});const s=r.find(o=>o.nivel===3);if(s&&i.push({tipo:"risco",mensagem:`Semana iniciando em ${s.label} est com carga crtica (${s.carga} entregas). Recomenda-se redistribuir atividades.`}),n.length>0){const o=n.slice(0,3).map(l=>l.nome).join(", ");i.push({tipo:"acao",mensagem:`Olho no caminho crtico: ${o}. Um pequeno atraso aqui derruba a data de concluso.`})}return!i.length&&t.totalTarefas>0&&i.push({tipo:"info",mensagem:"Nenhum risco gritante no radar imediato. Boa hora para consolidar documentao e atualizar status no sistema."}),i}function zP(t,e,n,r){if(t.totalTarefas===0)return"Ainda no h tarefas cadastradas no cronograma. Assim que o primeiro plano de trabalho for modelado aqui, este painel passa a funcionar como cockpit de execuo da Relevo.";const i=[];if(i.push(`Atualmente o portflio conta com ${t.totalProjetos} projeto(s) e ${t.totalTarefas} tarefa(s) cadastradas, com ${t.percConcluidas}% j concludas.`),t.atrasadas>0){const s=e.slice(0,3).map(o=>o.nome).join(", ");i.push(`Existem ${t.atrasadas} tarefa(s) em atraso, com destaque para: ${s}.`)}else i.push("No h tarefas em atraso neste momento, o que indica boa aderncia  linha de base planejada.");if(n.length>0){const s=n.slice(0,3).map(o=>o.nome).join(", ");i.push(`As frentes em execuo concentram-se em: ${s}, mantendo o cronograma em movimento.`)}return i.push(r.texto),i.join(" ")}function $P(t,e){const n=new Date,r=NP(t||[],n),i=DP(r,e||[]),s=jP(r,e||[]),o=LP(r,e||[]),l=OP(r,e||[]),u=MP(r),h=FP(r),f=bP(r),p=UP(r),g=BP(i,s,l,f),T=VP(i),P=zP(i,s,o,u);return{hoje:n,kpis:i,atrasadas:s,andamento:o,criticas:l,previsao:u,sparkline:h,heatmap:f,riscos:p,alertas:g,headline:T,textoGeral:P}}function HP(){const{tarefas:t,projetos:e,loading:n}=Nr(),r=L.useMemo(()=>$P(t||[],e||[]),[t,e]);if(n)return m.jsx("div",{className:"dashboard-container",children:m.jsx("div",{className:"dashboard-hero",children:m.jsxs("div",{children:[m.jsx("h1",{children:"Cockpit de Projetos"}),m.jsx("p",{children:"Carregando dados do cronograma..."})]})})});const{kpis:i,atrasadas:s,andamento:o,criticas:l,sparkline:u,heatmap:h,riscos:f,alertas:p}=r;return m.jsxs("div",{className:"dashboard-container",children:[m.jsxs("section",{className:"dashboard-hero",children:[m.jsxs("div",{className:"dashboard-hero-left",children:[m.jsx("h1",{children:"Cockpit de Projetos"}),m.jsx("p",{children:"Viso executiva dos projetos, tarefas e riscos."})]}),m.jsx("div",{className:"dashboard-hero-right",children:m.jsx("span",{children:r.headline})})]}),m.jsxs("section",{className:"dashboard-kpi-grid",children:[m.jsxs("div",{className:"kpi-card",children:[m.jsx("span",{className:"kpi-label",children:"Projetos ativos"}),m.jsx("span",{className:"kpi-value",children:i.totalProjetos})]}),m.jsxs("div",{className:"kpi-card",children:[m.jsx("span",{className:"kpi-label",children:"Tarefas cadastradas"}),m.jsx("span",{className:"kpi-value",children:i.totalTarefas})]}),m.jsxs("div",{className:"kpi-card kpi-ok",children:[m.jsx("span",{className:"kpi-label",children:"Concludas"}),m.jsxs("span",{className:"kpi-value",children:[i.concluidas," (",i.percConcluidas,"%)"]})]}),m.jsxs("div",{className:"kpi-card kpi-risk",children:[m.jsx("span",{className:"kpi-label",children:"Em atraso"}),m.jsxs("span",{className:"kpi-value",children:[i.atrasadas," (",i.percAtrasadas,"%)"]})]})]}),m.jsxs("section",{className:"dashboard-row",children:[m.jsxs("div",{className:"dashboard-card dashboard-card-large",children:[m.jsx("h2",{children:"Resumo Executivo"}),m.jsx("p",{className:"dashboard-resumo-text",children:r.textoGeral}),l.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("h3",{className:"dashboard-subtitle",children:"Tarefas crticas no caminho"}),m.jsx("ul",{className:"dashboard-list",children:l.map(g=>m.jsxs("li",{children:[m.jsx("strong",{children:g.nome}),"  ",g.projeto," (fim previsto"," ",g.fimPrevisto,")"]},g.nome+g.projeto))})]})]}),m.jsxs("div",{className:"dashboard-card dashboard-card-medium",children:[m.jsx("h2",{children:"Alertas inteligentes"}),m.jsx("ul",{className:"alert-list",children:p.map((g,T)=>m.jsxs("li",{className:`alert-item alert-${g.tipo}`,children:[m.jsxs("span",{className:"alert-pill",children:[g.tipo==="risco"&&" Risco",g.tipo==="acao"&&" Ao sugerida",g.tipo==="info"&&" Info"]}),m.jsx("p",{children:g.mensagem})]},T))})]}),m.jsxs("div",{className:"dashboard-card dashboard-card-small",children:[m.jsx("h2",{children:"Progresso semanal"}),m.jsx("div",{className:"sparkline",children:u.map((g,T)=>m.jsxs("div",{className:"sparkline-col",children:[m.jsx("div",{className:"sparkline-bar",style:{height:`${Math.max(g.percent,5)}%`},title:`${g.label}: ${g.valor} tarefa(s) concluda(s)`}),m.jsx("span",{className:"sparkline-label",children:g.label})]},T))}),m.jsx("p",{className:"sparkline-legend",children:"Cada barra representa o nmero de tarefas concludas por semana."})]})]}),m.jsxs("section",{className:"dashboard-row",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("h2",{children:"Tarefas em atraso"}),s.length===0?m.jsx("p",{className:"dashboard-muted",children:"Nenhuma tarefa em atraso no momento. Aproveite para antecipar entregas futuras."}):m.jsx("ul",{className:"dashboard-list",children:s.map(g=>m.jsxs("li",{children:[m.jsx("strong",{children:g.nome}),"  ",g.projeto," (previsto para"," ",g.fimOriginal,", atraso estimado de ",g.diasAtraso," dia(s))"]},g.nome+g.projeto))})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("h2",{children:"Heatmap de entregas (prximas semanas)"}),m.jsx("div",{className:"heatmap-grid",children:h.map((g,T)=>m.jsxs("div",{className:"heatmap-col",children:[m.jsx("div",{className:`heatmap-cell nivel-${g.nivel}`,title:`${g.label}: ${g.carga} entrega(s)`}),m.jsx("span",{className:"heatmap-label",children:g.label})]},T))}),m.jsxs("div",{className:"heatmap-legend",children:[m.jsxs("span",{className:"legend-item",children:[m.jsx("span",{className:"legend-dot nivel-1"})," OK"]}),m.jsxs("span",{className:"legend-item",children:[m.jsx("span",{className:"legend-dot nivel-2"})," Ateno"]}),m.jsxs("span",{className:"legend-item",children:[m.jsx("span",{className:"legend-dot nivel-3"})," Crtico"]})]})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("h2",{children:"Top 5 riscos provveis"}),m.jsx("ul",{className:"dashboard-list",children:f.map(g=>m.jsxs("li",{children:[m.jsxs("div",{className:`risco-pill risco-${g.nivel}`,children:[g.titulo,"  ",g.nivel==="alto"?"Alto":"Mdio"," risco"]}),m.jsx("p",{className:"dashboard-muted",children:g.descricao})]},g.id))})]})]})]})}const WP={ativo:"Ativo",concluido:"Concludo",arquivado:"Arquivado"};function qP({projetos:t,onEditar:e}){const{removerProjeto:n}=Nr();async function r(i){confirm("Tem certeza que deseja excluir este projeto?")&&await n(i)}return!t||!t.length?m.jsx("p",{children:"Nenhum projeto cadastrado."}):m.jsx("div",{className:"projetos-lista",children:t.map(i=>m.jsxs("div",{className:"projeto-card",children:[m.jsxs("div",{className:"projeto-topo",children:[m.jsx("span",{className:"projeto-cor-bolinha",style:{backgroundColor:i.cor||"#0a4723"}}),m.jsxs("div",{className:"projeto-titulo-bloco",children:[m.jsxs("div",{className:"projeto-titulo-linha",children:[m.jsx("h3",{children:i.nome}),m.jsx("span",{className:`projeto-status-chip status-${i.status||"ativo"}`,children:WP[i.status||"ativo"]})]}),i.cliente&&m.jsxs("p",{className:"projeto-cliente",children:["Cliente: ",m.jsx("strong",{children:i.cliente})]})]})]}),m.jsxs("div",{className:"projeto-meta",children:[i.dataInicio&&m.jsxs("span",{children:["Incio:"," ",new Date(i.dataInicio).toLocaleDateString("pt-BR")]}),i.descricao&&m.jsx("p",{className:"projeto-descricao",children:i.descricao.length>140?i.descricao.slice(0,140)+"...":i.descricao})]}),m.jsxs("div",{className:"projeto-acoes",children:[m.jsx("button",{className:"btn-projeto-editar",onClick:()=>e(i),children:"Editar"}),m.jsx("button",{className:"btn-projeto-excluir",onClick:()=>r(i.id),children:"Excluir"})]})]},i.id))})}const QP=["#0a4723","#0b6e3f","#0aa3e8","#c9c900","#e59313","#6b3fa0","#b83280"];function lg({projetoInicial:t,fechar:e}){const{criarProjeto:n,editarProjeto:r}=Nr(),[i,s]=L.useState(""),[o,l]=L.useState(""),[u,h]=L.useState(""),[f,p]=L.useState("ativo"),[g,T]=L.useState("#0a4723"),[P,R]=L.useState(""),[k,w]=L.useState(!1);L.useEffect(()=>{t?(s(t.nome||""),l(t.cliente||""),h(t.dataInicio?String(t.dataInicio).slice(0,10):""),p(t.status||"ativo"),T(t.cor||"#0a4723"),R(t.descricao||"")):(s(""),l(""),h(""),p("ativo"),T("#0a4723"),R(""))},[t]);async function v(E){E.preventDefault(),w(!0);const N={nome:i,cliente:o,dataInicio:u,status:f,cor:g,descricao:P};t?await r(t.id,N):await n(N),w(!1),e()}return m.jsxs("form",{className:"relevo-form projeto-form",onSubmit:v,children:[m.jsxs("div",{className:"relevo-grid",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Nome do Projeto"}),m.jsx("input",{type:"text",value:i,onChange:E=>s(E.target.value),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Cliente"}),m.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Data de Incio"}),m.jsx("input",{type:"date",value:u,onChange:E=>h(E.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Status"}),m.jsxs("select",{value:f,onChange:E=>p(E.target.value),children:[m.jsx("option",{value:"ativo",children:"Ativo"}),m.jsx("option",{value:"concluido",children:"Concludo"}),m.jsx("option",{value:"arquivado",children:"Arquivado"})]})]}),m.jsxs("div",{className:"full",children:[m.jsx("label",{children:"Cor do Projeto"}),m.jsxs("div",{className:"projeto-cor-linha",children:[m.jsx("div",{className:"projeto-cor-opcoes",children:QP.map(E=>m.jsx("button",{type:"button",className:"projeto-cor-opcao"+(E===g?" ativa":""),style:{backgroundColor:E},onClick:()=>T(E)},E))}),m.jsxs("div",{className:"projeto-cor-input-wrapper",children:[m.jsx("input",{type:"color",value:g,onChange:E=>T(E.target.value)}),m.jsx("span",{className:"projeto-cor-hex",children:g})]})]})]}),m.jsxs("div",{className:"full",children:[m.jsx("label",{children:"Descrio"}),m.jsx("textarea",{rows:3,value:P,onChange:E=>R(E.target.value),placeholder:"Descrio resumida do escopo, rea, cliente, etc."})]})]}),m.jsxs("div",{className:"relevo-actions",children:[m.jsx("button",{type:"submit",className:"save",disabled:k,children:k?"Salvando...":"Salvar"}),m.jsx("button",{type:"button",className:"cancel",onClick:e,children:"Cancelar"})]})]})}function sh({open:t,onClose:e,children:n,title:r}){return t?m.jsx("div",{className:"relevo-modal-overlay",onClick:e,children:m.jsxs("div",{className:"relevo-modal-content",onClick:i=>i.stopPropagation(),children:[m.jsxs("div",{className:"relevo-modal-header",children:[m.jsx("h2",{children:r}),m.jsx("button",{className:"relevo-modal-close",onClick:e,children:""})]}),m.jsx("div",{className:"relevo-modal-body",children:n})]})}):null}function GP(){const{projetos:t,loading:e}=Nr(),[n,r]=L.useState(""),[i,s]=L.useState("todos"),[o,l]=L.useState(!1),[u,h]=L.useState(!1),[f,p]=L.useState(null);function g(){p(null),l(!0)}function T(){l(!1)}function P(w){p(w),h(!0)}function R(){h(!1),p(null)}const k=L.useMemo(()=>(t||[]).filter(w=>{var E,N;if(!n)return!0;const v=n.toLowerCase();return((E=w.nome)==null?void 0:E.toLowerCase().includes(v))||((N=w.cliente)==null?void 0:N.toLowerCase().includes(v))}).filter(w=>i==="todos"?!0:(w.status||"ativo")===i),[t,n,i]);return m.jsxs("div",{className:"projetos-container",children:[m.jsxs("div",{className:"projetos-header",children:[m.jsx("h1",{children:"Projetos"}),m.jsx("button",{className:"btn-novo-projeto",onClick:g,children:"+ Novo Projeto"})]}),m.jsxs("div",{className:"projetos-filtros",children:[m.jsx("input",{type:"text",placeholder:"Buscar por nome ou cliente...",value:n,onChange:w=>r(w.target.value)}),m.jsxs("select",{value:i,onChange:w=>s(w.target.value),children:[m.jsx("option",{value:"todos",children:"Todos os status"}),m.jsx("option",{value:"ativo",children:"Ativo"}),m.jsx("option",{value:"concluido",children:"Concludo"}),m.jsx("option",{value:"arquivado",children:"Arquivado"})]})]}),e?m.jsx("p",{children:"Carregando projetos..."}):m.jsx(qP,{projetos:k,onEditar:P}),m.jsx("button",{className:"btn-flutuante-projetos",onClick:g,children:"+"}),m.jsx(sh,{open:o,onClose:T,title:"Novo Projeto",children:m.jsx(lg,{projetoInicial:null,fechar:T})}),m.jsx(sh,{open:u,onClose:R,title:"Editar Projeto",children:f&&m.jsx(lg,{projetoInicial:f,fechar:R})})]})}function KP({tarefas:t,projetos:e,onEditar:n,onExcluir:r}){function i(o){var l;return((l=e.find(u=>u.id===o))==null?void 0:l.cor)||"#0a4723"}function s(o){var l;return((l=e.find(u=>u.id===o))==null?void 0:l.nome)||""}return t.length?m.jsx("div",{className:"tarefas-lista-container",children:m.jsxs("table",{className:"tarefas-tabela",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Tarefa"}),m.jsx("th",{children:"Perodo"}),m.jsx("th",{children:"Projeto"}),m.jsx("th",{children:"Status"}),m.jsx("th",{children:"Aes"})]})}),m.jsx("tbody",{children:t.map(o=>{const l=new Date(o.inicio),u=new Date(o.fim),h=`${l.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}  ${u.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}`;return m.jsxs("tr",{className:"tarefa-row",children:[m.jsxs("td",{className:"tarefa-col-nome",children:[m.jsx("span",{className:"tarefa-bolinha",style:{backgroundColor:i(o.projetoId)}}),o.nome]}),m.jsx("td",{className:"tarefa-col-periodo",children:h}),m.jsx("td",{className:"tarefa-col-projeto",children:s(o.projetoId)}),m.jsx("td",{className:"tarefa-col-status",children:o.status}),m.jsxs("td",{className:"tarefa-col-acoes",children:[m.jsx("button",{className:"btn-editar",onClick:()=>n(o),children:"Editar"}),m.jsx("button",{className:"btn-excluir",onClick:()=>r(o.id),children:"Excluir"})]})]},o.id)})})]})}):m.jsx("p",{children:"Nenhuma tarefa encontrada."})}function XP({tarefaInicial:t,fechar:e}){const{criarTarefa:n,editarTarefa:r,projetos:i}=Nr(),[s,o]=L.useState(""),[l,u]=L.useState(""),[h,f]=L.useState(""),[p,g]=L.useState(""),[T,P]=L.useState("pendente"),[R,k]=L.useState(!1);L.useEffect(()=>{var v,E;t?(o(t.nome||""),u(t.projetoId||""),f(((v=t.inicio)==null?void 0:v.slice(0,10))||""),g(((E=t.fim)==null?void 0:E.slice(0,10))||""),P(t.status||"pendente")):(o(""),u(""),f(""),g(""),P("pendente"))},[t]);async function w(v){v.preventDefault(),k(!0);const E={nome:s,projetoId:l,inicio:h,fim:p,status:T};t?await r(t.id,E):await n(E),k(!1),e()}return m.jsxs("form",{className:"relevo-form",onSubmit:w,children:[m.jsxs("div",{className:"relevo-grid",children:[m.jsxs("div",{children:[m.jsx("label",{children:"Nome da Tarefa"}),m.jsx("input",{type:"text",value:s,onChange:v=>o(v.target.value),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Projeto Vinculado"}),m.jsxs("select",{value:l,onChange:v=>u(v.target.value),required:!0,children:[m.jsx("option",{value:"",children:"Selecione..."}),i.map(v=>m.jsx("option",{value:v.id,children:v.nome},v.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Incio"}),m.jsx("input",{type:"date",value:h,onChange:v=>f(v.target.value),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{children:"Fim"}),m.jsx("input",{type:"date",value:p,onChange:v=>g(v.target.value),required:!0})]}),m.jsxs("div",{className:"full",children:[m.jsx("label",{children:"Status"}),m.jsxs("select",{value:T,onChange:v=>P(v.target.value),children:[m.jsx("option",{value:"pendente",children:"Pendente"}),m.jsx("option",{value:"andamento",children:"Em andamento"}),m.jsx("option",{value:"concluida",children:"Concluda"}),m.jsx("option",{value:"atrasada",children:"Atrasada"})]})]})]}),m.jsxs("div",{className:"relevo-actions",children:[m.jsx("button",{type:"submit",className:"save",disabled:R,children:R?"Salvando...":"Salvar"}),m.jsx("button",{type:"button",className:"cancel",onClick:e,children:"Cancelar"})]})]})}function YP({tarefas:t,projetos:e}){if(!(t!=null&&t.length))return m.jsx("p",{children:"Nenhuma tarefa encontrada."});const n=[...t].sort((s,o)=>new Date(s.inicio)-new Date(o.inicio)),r={pendente:"#c9c900",andamento:"#0aa3e8",concluida:"#0a8f3a"};function i(s){var o;return((o=e.find(l=>l.id===s))==null?void 0:o.cor)||"#0a4723"}return m.jsx("div",{className:"timeline-container",children:n.map(s=>m.jsxs("div",{className:"timeline-item",children:[m.jsx("div",{className:"timeline-dot",style:{background:i(s.projetoId)}}),m.jsxs("div",{className:"timeline-content",children:[m.jsx("h3",{children:s.nome}),m.jsxs("p",{children:[m.jsx("strong",{children:"Incio:"})," ",new Date(s.inicio).toLocaleDateString()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Fim:"})," ",new Date(s.fim).toLocaleDateString()]}),m.jsx("span",{className:"tag",style:{background:r[s.status]},children:s.status})]})]},s.id))})}function JP({tarefas:t}){if(!(t!=null&&t.length))return m.jsx("p",{children:"Nenhuma tarefa encontrada."});const e=[...t].sort((o,l)=>new Date(o.inicio)-new Date(l.inicio)),n={pendente:"#c9c900",andamento:"#0aa3e8",concluida:"#0a8f3a",atrasada:"#d62839"},r=new Date(Math.min(...e.map(o=>new Date(o.inicio))));new Date(Math.max(...e.map(o=>new Date(o.fim))));function i(o){return Math.floor((new Date(o)-r)/(1e3*60*60*24))}function s(o,l){return Math.ceil((new Date(l)-new Date(o))/(1e3*60*60*24))+1}return m.jsx("div",{className:"gantt-container",children:e.map(o=>m.jsxs("div",{className:"gantt-row",children:[m.jsx("div",{className:"gantt-label",children:o.nome}),m.jsx("div",{className:"gantt-track",children:m.jsx("div",{className:"gantt-bar",style:{marginLeft:i(o.inicio)*15+"px",width:s(o.inicio,o.fim)*15+"px",background:n[o.status]||"#555"}})})]},o.id))})}function ZP(){const{tarefas:t,projetos:e,loading:n,removerTarefa:r}=Nr(),[i,s]=L.useState(!1),[o,l]=L.useState(null),[u,h]=L.useState(""),[f,p]=L.useState("todos"),[g,T]=L.useState("todos");function P(){l(null),s(!0)}function R(){s(!1)}function k(N){l(N),s(!0)}async function w(N){confirm("Tem certeza que deseja excluir esta tarefa?")&&await r(N)}const v=L.useMemo(()=>t?[...t].sort((N,O)=>{const F=new Date(N.inicio),S=new Date(O.inicio);if(F-S!==0)return F-S;const _=(N.nome||"").toLowerCase(),I=(O.nome||"").toLowerCase();return _<I?-1:_>I?1:(N.id||"").localeCompare(O.id||"")}):[],[t]),E=L.useMemo(()=>v.filter(N=>u?N.nome.toLowerCase().includes(u.toLowerCase()):!0).filter(N=>f==="todos"?!0:N.status===f).filter(N=>g==="todos"?!0:N.projetoId===g),[v,u,f,g]);return m.jsxs("div",{className:"tarefas-container",children:[m.jsxs("div",{className:"tarefas-header",children:[m.jsx("h1",{children:"Cronograma de Tarefas"}),m.jsx("button",{className:"btn-nova-tarefa",onClick:P,children:"+ Nova Tarefa"})]}),m.jsxs("div",{className:"filtros-container",children:[m.jsx("input",{type:"text",placeholder:"Buscar tarefa...",value:u,onChange:N=>h(N.target.value)}),m.jsxs("select",{value:f,onChange:N=>p(N.target.value),children:[m.jsx("option",{value:"todos",children:"Todos os status"}),m.jsx("option",{value:"pendente",children:"Pendente"}),m.jsx("option",{value:"andamento",children:"Em andamento"}),m.jsx("option",{value:"concluida",children:"Concluda"}),m.jsx("option",{value:"atrasada",children:"Atrasada"})]}),m.jsxs("select",{value:g,onChange:N=>T(N.target.value),children:[m.jsx("option",{value:"todos",children:"Todos os projetos"}),e.map(N=>m.jsx("option",{value:N.id,children:N.nome},N.id))]})]}),n?m.jsx("p",{children:"Carregando tarefas..."}):m.jsx(KP,{tarefas:E,projetos:e,onEditar:k,onExcluir:w}),m.jsx("button",{className:"btn-flutuante",onClick:P,children:"+"}),!n&&E.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("hr",{style:{margin:"40px 0",opacity:.3}}),m.jsx("h2",{style:{marginBottom:"10px"},children:"Gantt Simplificado"}),m.jsx(JP,{tarefas:E,projetos:e})]}),!n&&E.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("hr",{style:{margin:"40px 0",opacity:.3}}),m.jsx("h2",{style:{marginBottom:"10px"},children:"Linha do Tempo"}),m.jsx(YP,{tarefas:E,projetos:e})]}),m.jsx(sh,{open:i,onClose:R,title:o?"Editar Tarefa":"Nova Tarefa",children:m.jsx(XP,{tarefaInicial:o,fechar:R})})]})}function eR({dataBase:t,tarefasExpandida:e,onDiaClick:n,onTarefaClick:r,getCorProjeto:i}){const s=t.getFullYear(),o=t.getMonth(),l=new Date(s,o,1),h=new Date(s,o+1,0).getDate(),f=l.getDay(),p=[];for(let T=0;T<f;T++)p.push({data:null,tarefas:[]});for(let T=1;T<=h;T++){const P=new Date(s,o,T),R=P.toISOString().substring(0,10);p.push({data:P,tarefas:e[R]||[]})}const g=new Date;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"semana-header",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(T=>m.jsx("div",{className:"semana-header-item",children:T},T))}),m.jsx("div",{className:"mes-grid",children:p.map((T,P)=>{if(!T.data)return m.jsx("div",{className:"mes-celula"},P);const k=`mes-celula ${T.data.toDateString()===g.toDateString()?"hoje":""}`;return m.jsxs("div",{className:k,onClick:()=>n&&n(T.data),children:[m.jsx("div",{className:"mes-celula-header",children:m.jsx("span",{children:T.data.getDate()})}),m.jsx("div",{className:"mes-celula-tarefas",children:T.tarefas.map(w=>{const v=w.status||"";let E="";return v==="concluida"&&(E="concluida"),v==="atrasada"&&(E="atrasada"),m.jsx("div",{className:`tag-tarefa ${E}`,style:{borderLeftColor:i?i(w.projetoId):"#0a4723"},onClick:N=>{N.stopPropagation(),r&&r(w)},title:w.nome,children:w.nome},w.id)})})]},P)})})]})}function tR({dataBase:t,tarefasExpandida:e,onDiaClick:n,onTarefaClick:r,getCorProjeto:i}){const s=[],o=new Date(t);o.setDate(o.getDate()-o.getDay());const l=new Date;for(let u=0;u<7;u++){const h=new Date(o);h.setDate(o.getDate()+u);const f=h.toISOString().substring(0,10);s.push({data:h,tarefas:e[f]||[]})}return m.jsx("div",{className:"semana-grid",children:s.map((u,h)=>{const p=`semana-celula ${u.data.toDateString()===l.toDateString()?"hoje":""}`;return m.jsxs("div",{className:p,onClick:()=>n&&n(u.data),children:[m.jsxs("strong",{children:[u.data.toLocaleDateString("pt-BR",{weekday:"short"})," ",u.data.getDate()]}),u.tarefas.map(g=>{const T=g.status||"";let P="";return T==="concluida"&&(P="concluida"),T==="atrasada"&&(P="atrasada"),m.jsx("div",{className:`tag-tarefa ${P}`,style:{borderLeftColor:i?i(g.projetoId):"#0a4723"},onClick:R=>{R.stopPropagation(),r&&r(g)},title:g.nome,children:g.nome},g.id)})]},h)})})}function nR({dataBase:t,tarefasExpandida:e,onTarefaClick:n,getCorProjeto:r}){const i=t.toISOString().substring(0,10),s=e[i]||[],o=new Date,l=t.toDateString()===o.toDateString();return m.jsxs("div",{className:"dia-container",children:[m.jsx("h3",{style:{color:l?"#0a4723":"#222"},children:t.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})}),s.length===0&&m.jsx("p",{children:"Nenhuma tarefa neste dia."}),s.map(u=>{const h=u.status||"";let f="";return h==="concluida"&&(f="concluida"),h==="atrasada"&&(f="atrasada"),m.jsxs("div",{className:`tag-tarefa grande ${f}`,style:{borderLeftColor:r?r(u.projetoId):"#0a4723"},onClick:()=>n&&n(u),children:[m.jsx("strong",{children:u.nome}),u.descricao&&m.jsx("p",{children:u.descricao}),m.jsxs("p",{children:[u.inicio," at ",u.fim]})]},u.id)})]})}function rR(t){const e={};return t.forEach(n=>{if(!n.inicio||!n.fim)return;const r=new Date(n.inicio),i=new Date(n.fim),s=new Date(r);for(;s<=i;){const o=s.toISOString().substring(0,10);e[o]||(e[o]=[]),e[o].push(n),s.setDate(s.getDate()+1)}}),e}function iR(){var N;const{tarefas:t,projetos:e}=Nr(),n=Nv(),[r,i]=L.useState("mes"),[s,o]=L.useState(new Date),[l,u]=L.useState({}),[h,f]=L.useState(null);L.useEffect(()=>{const O=rR(t);u(O)},[t]);const p=L.useMemo(()=>{const O=["#2E7D32","#1565C0","#AD1457","#6A1B9A","#EF6C00","#00897B","#455A64"],F={};return e.forEach((S,_)=>{F[S.id]=O[_%O.length]}),F},[e]),g=L.useMemo(()=>{const O={};return e.forEach(F=>{O[F.id]=F}),O},[e]);function T(O){if(!O)return"#0a4723";const F=g[O];return F&&F.cor?F.cor:p[O]||"#0a4723"}function P(O){const F=new Date(s);F.setMonth(F.getMonth()+O),o(F)}function R(){o(new Date)}function k(O){O&&(o(O),i("dia"))}function w(O){f(O)}function v(){f(null)}function E(){n("/tarefas")}return m.jsxs("div",{className:"calendar-container",children:[m.jsxs("div",{className:"calendar-toolbar",children:[m.jsx("button",{className:"calendar-btn",onClick:()=>P(-1),children:""}),m.jsx("button",{className:"calendar-btn",onClick:R,children:"Hoje"}),m.jsx("button",{className:"calendar-btn",onClick:()=>P(1),children:""}),m.jsxs("div",{className:"calendar-view-switch",children:[m.jsx("button",{className:`calendar-btn ${r==="mes"?"active":""}`,onClick:()=>i("mes"),children:"Ms"}),m.jsx("button",{className:`calendar-btn ${r==="semana"?"active":""}`,onClick:()=>i("semana"),children:"Semana"}),m.jsx("button",{className:`calendar-btn ${r==="dia"?"active":""}`,onClick:()=>i("dia"),children:"Dia"})]}),m.jsx("span",{className:"calendar-data",children:s.toLocaleDateString("pt-BR",{year:"numeric",month:"long"})})]}),r==="mes"&&m.jsx(eR,{dataBase:s,tarefasExpandida:l,onDiaClick:k,onTarefaClick:w,getCorProjeto:T}),r==="semana"&&m.jsx(tR,{dataBase:s,tarefasExpandida:l,onDiaClick:k,onTarefaClick:w,getCorProjeto:T}),r==="dia"&&m.jsx(nR,{dataBase:s,tarefasExpandida:l,onTarefaClick:w,getCorProjeto:T}),h&&m.jsx("div",{className:"tarefa-modal-overlay",onClick:v,children:m.jsxs("div",{className:"tarefa-modal",onClick:O=>O.stopPropagation(),style:{borderTopColor:T(h.projetoId)},children:[m.jsx("h3",{children:h.nome}),h.projetoId&&m.jsxs("p",{children:[m.jsx("strong",{children:"Projeto:"})," ",((N=g[h.projetoId])==null?void 0:N.nome)||""]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Perodo:"})," ",h.inicio," at"," ",h.fim]}),h.status&&m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"})," ",h.status]}),h.descricao&&m.jsx("p",{style:{marginTop:"0.5rem"},children:h.descricao}),m.jsxs("div",{className:"modal-btns",children:[m.jsx("button",{type:"button",className:"modal-btn",onClick:E,children:"Abrir na tela de Tarefas"}),m.jsx("button",{type:"button",className:"modal-btn",onClick:v,style:{background:"#777"},children:"Fechar"})]})]})})]})}function ug(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n.toISOString().slice(0,10)}function sR(){const[t,e]=L.useState(null),[n,r]=L.useState(""),[i,s]=L.useState([]),[o,l]=L.useState([]),[u,h]=L.useState(""),[f,p]=L.useState(!1);L.useEffect(()=>{async function R(){const k=await wE();l(k)}R()},[]);function g(R){e(R.target.files[0])}async function T(){if(!t){alert("Envie um arquivo primeiro.");return}if(!u){alert("Selecione um projeto antes de gerar as tarefas.");return}p(!0);const R=new FormData;R.append("file",t);try{const w=await(await fetch("https://us-central1-relevo-cronograma.cloudfunctions.net/interpretarArquivo",{method:"POST",body:R})).json();if(!Array.isArray(w)){alert("A IA retornou um formato inesperado."),console.error(w),p(!1);return}s(w),r("Tarefas extradas com sucesso."),p(!1)}catch(k){console.error("Erro ao enviar para IA:",k),alert("Erro ao gerar tarefas com IA."),p(!1)}}async function P(){if(i.length===0){alert("Nenhuma tarefa para salvar.");return}const R=new Date().toISOString().slice(0,10);for(const k of i){const w=ug(R,k.inicioRelativoDias||0),v=ug(w,k.duracaoDias||1);await TE({nome:k.nome,descricao:k.descricao||"",produto:k.produto||"",categoria:k.categoria||"",responsavel:k.responsavel||"",status:"pendente",inicio:w,fim:v,projetoId:u})}alert("Tarefas salvas com sucesso!")}return m.jsxs("div",{className:"importar-container",children:[m.jsx("h2",{children:"Importar Cronograma via IA"}),m.jsx("label",{children:"Selecionar Projeto:"}),m.jsxs("select",{value:u,onChange:R=>h(R.target.value),children:[m.jsx("option",{value:"",children:"-- Selecione --"}),o.map(R=>m.jsx("option",{value:R.id,children:R.nome},R.id))]}),m.jsx("label",{children:"Arquivo (PDF, DOCX ou TXT):"}),m.jsx("input",{type:"file",accept:".pdf,.txt,.docx",onChange:g}),m.jsx("button",{onClick:T,disabled:f,children:f?"Processando...":"Gerar Tarefas com IA"}),m.jsx("hr",{}),m.jsx("h3",{children:"Tarefas extradas:"}),i.length===0&&m.jsx("p",{children:"Nenhuma tarefa extrada ainda."}),m.jsx("ul",{children:i.map((R,k)=>m.jsxs("li",{children:[m.jsx("strong",{children:R.nome}),"  ",R.descricao,m.jsx("br",{}),m.jsxs("em",{children:["(Relativo: incio +",R.inicioRelativoDias," dias, durao"," ",R.duracaoDias," dias)"]})]},k))}),i.length>0&&m.jsx("button",{onClick:P,children:"Salvar no Firestore"})]})}const AE=L.createContext();function oR({children:t}){const[e,n]=L.useState(null),[r,i]=L.useState(!0);function s(){return new Promise(o=>{if(window.__RELEVO_AUTH__)return o(window.__RELEVO_AUTH__);const l=setInterval(()=>{window.__RELEVO_AUTH__&&(clearInterval(l),o(window.__RELEVO_AUTH__))},50)})}return L.useEffect(()=>{let o=!0;async function l(){const u=await s();if(!o)return;if(!u){console.error(" Erro crtico: Auth do Portal no carregou."),i(!1);return}const h=u.onAuthStateChanged(f=>{o&&(n(f||null),i(!1))});return()=>h()}return l(),()=>{o=!1}},[]),m.jsx(AE.Provider,{value:{user:e,loading:r},children:t})}const aR=()=>L.useContext(AE);function lR(){const{user:t,loading:e}=aR();return e?m.jsx("p",{style:{padding:"20px"},children:"Carregando sesso"}):t?m.jsxs(m.Fragment,{children:[m.jsx(LS,{}),m.jsx(MS,{}),m.jsx("main",{className:"content",style:{padding:"20px"},children:m.jsxs(wS,{children:[m.jsx(Mr,{path:"/",element:m.jsx(HP,{})}),m.jsx(Mr,{path:"/projetos",element:m.jsx(GP,{})}),m.jsx(Mr,{path:"/tarefas",element:m.jsx(ZP,{})}),m.jsx(Mr,{path:"/calendario",element:m.jsx(iR,{})}),m.jsx(Mr,{path:"/importar",element:m.jsx(sR,{})})]})}),m.jsx(OS,{})]}):m.jsx("p",{style:{padding:"20px"},children:"Acesso negado. Faa login pelo Portal Relevo."})}function uR(){return m.jsx(xS,{basename:"/cronograma",children:m.jsx(lR,{})})}Bu.createRoot(document.getElementById("root")).render(m.jsx(Eg.StrictMode,{children:m.jsx(oR,{children:m.jsx(kP,{children:m.jsx(uR,{})})})}));
