function vS(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in r)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Bw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ep={exports:{}},Bl={},tp={exports:{}},Ne={};var D_;function wS(){if(D_)return Ne;D_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,F={};function O(j,Q,Ee){this.props=j,this.context=Q,this.refs=F,this.updater=Ee||C}O.prototype.isReactComponent={},O.prototype.setState=function(j,Q){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Q,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function te(){}te.prototype=O.prototype;function ee(j,Q,Ee){this.props=j,this.context=Q,this.refs=F,this.updater=Ee||C}var G=ee.prototype=new te;G.constructor=ee,U(G,O.prototype),G.isPureReactComponent=!0;var ne=Array.isArray,_e=Object.prototype.hasOwnProperty,pe={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function x(j,Q,Ee){var Ve,De={},je=null,$e=null;if(Q!=null)for(Ve in Q.ref!==void 0&&($e=Q.ref),Q.key!==void 0&&(je=""+Q.key),Q)_e.call(Q,Ve)&&!D.hasOwnProperty(Ve)&&(De[Ve]=Q[Ve]);var Ke=arguments.length-2;if(Ke===1)De.children=Ee;else if(1<Ke){for(var Xe=Array(Ke),Vt=0;Vt<Ke;Vt++)Xe[Vt]=arguments[Vt+2];De.children=Xe}if(j&&j.defaultProps)for(Ve in Ke=j.defaultProps,Ke)De[Ve]===void 0&&(De[Ve]=Ke[Ve]);return{$$typeof:r,type:j,key:je,ref:$e,props:De,_owner:pe.current}}function A(j,Q){return{$$typeof:r,type:j.type,key:Q,ref:j.ref,props:j.props,_owner:j._owner}}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function N(j){var Q={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ee){return Q[Ee]})}var L=/\/+/g;function R(j,Q){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):Q.toString(36)}function le(j,Q,Ee,Ve,De){var je=typeof j;(je==="undefined"||je==="boolean")&&(j=null);var $e=!1;if(j===null)$e=!0;else switch(je){case"string":case"number":$e=!0;break;case"object":switch(j.$$typeof){case r:case e:$e=!0}}if($e)return $e=j,De=De($e),j=Ve===""?"."+R($e,0):Ve,ne(De)?(Ee="",j!=null&&(Ee=j.replace(L,"$&/")+"/"),le(De,Q,Ee,"",function(Vt){return Vt})):De!=null&&(k(De)&&(De=A(De,Ee+(!De.key||$e&&$e.key===De.key?"":(""+De.key).replace(L,"$&/")+"/")+j)),Q.push(De)),1;if($e=0,Ve=Ve===""?".":Ve+":",ne(j))for(var Ke=0;Ke<j.length;Ke++){je=j[Ke];var Xe=Ve+R(je,Ke);$e+=le(je,Q,Ee,Xe,De)}else if(Xe=T(j),typeof Xe=="function")for(j=Xe.call(j),Ke=0;!(je=j.next()).done;)je=je.value,Xe=Ve+R(je,Ke++),$e+=le(je,Q,Ee,Xe,De);else if(je==="object")throw Q=String(j),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return $e}function Te(j,Q,Ee){if(j==null)return j;var Ve=[],De=0;return le(j,Ve,"","",function(je){return Q.call(Ee,je,De++)}),Ve}function xe(j){if(j._status===-1){var Q=j._result;Q=Q(),Q.then(function(Ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ee)},function(Ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ee)}),j._status===-1&&(j._status=0,j._result=Q)}if(j._status===1)return j._result.default;throw j._result}var Ce={current:null},ie={transition:null},Ie={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ie,ReactCurrentOwner:pe};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:Te,forEach:function(j,Q,Ee){Te(j,function(){Q.apply(this,arguments)},Ee)},count:function(j){var Q=0;return Te(j,function(){Q++}),Q},toArray:function(j){return Te(j,function(Q){return Q})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ne.Component=O,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=n,Ne.Suspense=f,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,Ne.act=ce,Ne.cloneElement=function(j,Q,Ee){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ve=U({},j.props),De=j.key,je=j.ref,$e=j._owner;if(Q!=null){if(Q.ref!==void 0&&(je=Q.ref,$e=pe.current),Q.key!==void 0&&(De=""+Q.key),j.type&&j.type.defaultProps)var Ke=j.type.defaultProps;for(Xe in Q)_e.call(Q,Xe)&&!D.hasOwnProperty(Xe)&&(Ve[Xe]=Q[Xe]===void 0&&Ke!==void 0?Ke[Xe]:Q[Xe])}var Xe=arguments.length-2;if(Xe===1)Ve.children=Ee;else if(1<Xe){Ke=Array(Xe);for(var Vt=0;Vt<Xe;Vt++)Ke[Vt]=arguments[Vt+2];Ve.children=Ke}return{$$typeof:r,type:j.type,key:De,ref:je,props:Ve,_owner:$e}},Ne.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},Ne.createElement=x,Ne.createFactory=function(j){var Q=x.bind(null,j);return Q.type=j,Q},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(j){return{$$typeof:d,render:j}},Ne.isValidElement=k,Ne.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:xe}},Ne.memo=function(j,Q){return{$$typeof:m,type:j,compare:Q===void 0?null:Q}},Ne.startTransition=function(j){var Q=ie.transition;ie.transition={};try{j()}finally{ie.transition=Q}},Ne.unstable_act=ce,Ne.useCallback=function(j,Q){return Ce.current.useCallback(j,Q)},Ne.useContext=function(j){return Ce.current.useContext(j)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(j){return Ce.current.useDeferredValue(j)},Ne.useEffect=function(j,Q){return Ce.current.useEffect(j,Q)},Ne.useId=function(){return Ce.current.useId()},Ne.useImperativeHandle=function(j,Q,Ee){return Ce.current.useImperativeHandle(j,Q,Ee)},Ne.useInsertionEffect=function(j,Q){return Ce.current.useInsertionEffect(j,Q)},Ne.useLayoutEffect=function(j,Q){return Ce.current.useLayoutEffect(j,Q)},Ne.useMemo=function(j,Q){return Ce.current.useMemo(j,Q)},Ne.useReducer=function(j,Q,Ee){return Ce.current.useReducer(j,Q,Ee)},Ne.useRef=function(j){return Ce.current.useRef(j)},Ne.useState=function(j){return Ce.current.useState(j)},Ne.useSyncExternalStore=function(j,Q,Ee){return Ce.current.useSyncExternalStore(j,Q,Ee)},Ne.useTransition=function(){return Ce.current.useTransition()},Ne.version="18.3.1",Ne}var N_;function rm(){return N_||(N_=1,tp.exports=wS()),tp.exports}var b_;function ES(){if(b_)return Bl;b_=1;var r=rm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},T=null,C=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(C=f.ref);for(v in f)n.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:T,ref:C,props:w,_owner:o.current}}return Bl.Fragment=t,Bl.jsx=u,Bl.jsxs=u,Bl}var O_;function IS(){return O_||(O_=1,ep.exports=ES()),ep.exports}var I=IS(),H=rm();const Uw=Bw(H),TS=vS({__proto__:null,default:Uw},[H]);var oh={},np={exports:{}},gn={},rp={exports:{}},ip={};var F_;function SS(){return F_||(F_=1,(function(r){function e(ie,Ie){var ce=ie.length;ie.push(Ie);e:for(;0<ce;){var j=ce-1>>>1,Q=ie[j];if(0<o(Q,Ie))ie[j]=Ie,ie[ce]=Q,ce=j;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var Ie=ie[0],ce=ie.pop();if(ce!==Ie){ie[0]=ce;e:for(var j=0,Q=ie.length,Ee=Q>>>1;j<Ee;){var Ve=2*(j+1)-1,De=ie[Ve],je=Ve+1,$e=ie[je];if(0>o(De,ce))je<Q&&0>o($e,De)?(ie[j]=$e,ie[je]=ce,j=je):(ie[j]=De,ie[Ve]=ce,j=Ve);else if(je<Q&&0>o($e,ce))ie[j]=$e,ie[je]=ce,j=je;else break e}}return Ie}function o(ie,Ie){var ce=ie.sortIndex-Ie.sortIndex;return ce!==0?ce:ie.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,T=3,C=!1,U=!1,F=!1,O=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ie){for(var Ie=t(m);Ie!==null;){if(Ie.callback===null)n(m);else if(Ie.startTime<=ie)n(m),Ie.sortIndex=Ie.expirationTime,e(f,Ie);else break;Ie=t(m)}}function ne(ie){if(F=!1,G(ie),!U)if(t(f)!==null)U=!0,xe(_e);else{var Ie=t(m);Ie!==null&&Ce(ne,Ie.startTime-ie)}}function _e(ie,Ie){U=!1,F&&(F=!1,te(x),x=-1),C=!0;var ce=T;try{for(G(Ie),w=t(f);w!==null&&(!(w.expirationTime>Ie)||ie&&!N());){var j=w.callback;if(typeof j=="function"){w.callback=null,T=w.priorityLevel;var Q=j(w.expirationTime<=Ie);Ie=r.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&n(f),G(Ie)}else n(f);w=t(f)}if(w!==null)var Ee=!0;else{var Ve=t(m);Ve!==null&&Ce(ne,Ve.startTime-Ie),Ee=!1}return Ee}finally{w=null,T=ce,C=!1}}var pe=!1,D=null,x=-1,A=5,k=-1;function N(){return!(r.unstable_now()-k<A)}function L(){if(D!==null){var ie=r.unstable_now();k=ie;var Ie=!0;try{Ie=D(!0,ie)}finally{Ie?R():(pe=!1,D=null)}}else pe=!1}var R;if(typeof ee=="function")R=function(){ee(L)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Te=le.port2;le.port1.onmessage=L,R=function(){Te.postMessage(null)}}else R=function(){O(L,0)};function xe(ie){D=ie,pe||(pe=!0,R())}function Ce(ie,Ie){x=O(function(){ie(r.unstable_now())},Ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){U||C||(U=!0,xe(_e))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var Ie=3;break;default:Ie=T}var ce=T;T=Ie;try{return ie()}finally{T=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,Ie){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ce=T;T=ie;try{return Ie()}finally{T=ce}},r.unstable_scheduleCallback=function(ie,Ie,ce){var j=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?j+ce:j):ce=j,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ce+Q,ie={id:v++,callback:Ie,priorityLevel:ie,startTime:ce,expirationTime:Q,sortIndex:-1},ce>j?(ie.sortIndex=ce,e(m,ie),t(f)===null&&ie===t(m)&&(F?(te(x),x=-1):F=!0,Ce(ne,ce-j))):(ie.sortIndex=Q,e(f,ie),U||C||(U=!0,xe(_e))),ie},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(ie){var Ie=T;return function(){var ce=T;T=Ie;try{return ie.apply(this,arguments)}finally{T=ce}}}})(ip)),ip}var L_;function AS(){return L_||(L_=1,rp.exports=SS()),rp.exports}var j_;function xS(){if(j_)return gn;j_=1;var r=rm(),e=AS();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)n.add(s[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function C(i,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function U(i,s,l,h){if(s===null||typeof s>"u"||C(i,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(i,s,l,h,p,y,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=y,this.removeEmptyString=E}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new F(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];O[s]=new F(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new F(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new F(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new F(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new F(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new F(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new F(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new F(i,5,!1,i.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function ee(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(te,ee);O[s]=new F(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(te,ee);O[s]=new F(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(te,ee);O[s]=new F(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new F(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new F(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,s,l,h){var p=O.hasOwnProperty(s)?O[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,l,p,h)&&(l=null),h||p===null?T(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,s,l):i.setAttribute(s,l))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),pe=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),ie=Symbol.iterator;function Ie(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,j;function Q(i){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+i}var Ee=!1;function Ve(i,s){if(!i||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(i,[],s)}else{try{s.call()}catch($){h=$}i.call(s.prototype)}else{try{throw Error()}catch($){h=$}i()}}catch($){if($&&h&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),y=h.stack.split(`
`),E=p.length-1,P=y.length-1;1<=E&&0<=P&&p[E]!==y[P];)P--;for(;1<=E&&0<=P;E--,P--)if(p[E]!==y[P]){if(E!==1||P!==1)do if(E--,P--,0>P||p[E]!==y[P]){var V=`
`+p[E].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=E&&0<=P);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?Q(i):""}function De(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=Ve(i.type,!1),i;case 11:return i=Ve(i.type.render,!1),i;case 1:return i=Ve(i.type,!0),i;default:return""}}function je(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case pe:return"Portal";case A:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case le:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case N:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case L:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Te:return s=i.displayName||null,s!==null?s:je(i.type)||"Memo";case xe:s=i._payload,i=i._init;try{return je(i(s))}catch{}}return null}function $e(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Vt(i){var s=Xe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function xr(i){i._valueTracker||(i._valueTracker=Vt(i))}function so(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=Xe(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function ei(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ts(i,s){var l=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function oo(i,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ke(s.value!=null?s.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Wa(i,s){s=s.checked,s!=null&&G(i,"checked",s,!1)}function Ga(i,s){Wa(i,s);var l=Ke(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?ao(i,s.type,l):s.hasOwnProperty("defaultValue")&&ao(i,s.type,Ke(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function Ku(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function ao(i,s,l){(s!=="number"||ei(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Pr=Array.isArray;function Rr(i,s,l,h){if(i=i.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=s.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Ke(l),s=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function Qa(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function lo(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Pr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Ke(l)}}function uo(i,s){var l=Ke(s.value),h=Ke(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function Ha(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function At(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?At(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Cr,Ya=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(s,l,h,p)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(Cr=Cr||document.createElement("div"),Cr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Cr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ti(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rs=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(i){rs.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),ns[s]=ns[i]})});function Xa(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ns.hasOwnProperty(i)&&ns[i]?(""+s).trim():s+"px"}function Ja(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Xa(l,s[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Za=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function el(i,s){if(s){if(Za[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function tl(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var is=null;function co(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ho=null,kn=null,ar=null;function fo(i){if(i=Al(i)){if(typeof ho!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Ec(s),ho(i.stateNode,i.type,s))}}function lr(i){kn?ar?ar.push(i):ar=[i]:kn=i}function nl(){if(kn){var i=kn,s=ar;if(ar=kn=null,fo(i),s)for(i=0;i<s.length;i++)fo(s[i])}}function ss(i,s){return i(s)}function rl(){}var kr=!1;function il(i,s,l){if(kr)return i(s,l);kr=!0;try{return ss(i,s,l)}finally{kr=!1,(kn!==null||ar!==null)&&(rl(),nl())}}function mt(i,s){var l=i.stateNode;if(l===null)return null;var h=Ec(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var po=!1;if(d)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){po=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{po=!1}function os(i,s,l,h,p,y,E,P,V){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(Z){this.onError(Z)}}var as=!1,mo=null,$n=!1,sl=null,Pd={onError:function(i){as=!0,mo=i}};function go(i,s,l,h,p,y,E,P,V){as=!1,mo=null,os.apply(Pd,arguments)}function Wu(i,s,l,h,p,y,E,P,V){if(go.apply(this,arguments),as){if(as){var $=mo;as=!1,mo=null}else throw Error(t(198));$n||($n=!0,sl=$)}}function Kn(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function ls(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Wn(i){if(Kn(i)!==i)throw Error(t(188))}function Gu(i){var s=i.alternate;if(!s){if(s=Kn(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,h=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Wn(p),i;if(y===h)return Wn(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var E=!1,P=p.child;P;){if(P===l){E=!0,l=p,h=y;break}if(P===h){E=!0,h=p,l=y;break}P=P.sibling}if(!E){for(P=y.child;P;){if(P===l){E=!0,l=y,h=p;break}if(P===h){E=!0,h=y,l=p;break}P=P.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function ol(i){return i=Gu(i),i!==null?yo(i):null}function yo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=yo(i);if(s!==null)return s;i=i.sibling}return null}var _o=e.unstable_scheduleCallback,al=e.unstable_cancelCallback,Qu=e.unstable_shouldYield,Rd=e.unstable_requestPaint,Je=e.unstable_now,Hu=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,ni=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,ll=e.unstable_LowPriority,Yu=e.unstable_IdlePriority,cs=null,wn=null;function Xu(i){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(cs,i,void 0,(i.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Zu,ul=Math.log,Ju=Math.LN2;function Zu(i){return i>>>=0,i===0?32:31-(ul(i)/Ju|0)|0}var vo=64,wo=4194304;function ri(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function hs(i,s){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var P=E&~p;P!==0?h=ri(P):(y&=E,y!==0&&(h=ri(y)))}else E=l&~p,E!==0?h=ri(E):y!==0&&(h=ri(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&p)===0&&(p=h&-h,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=h;0<s;)l=31-en(s),p=1<<l,h|=i[l],s&=~p;return h}function Cd(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-en(y),P=1<<E,V=p[E];V===-1?((P&l)===0||(P&h)!==0)&&(p[E]=Cd(P,s)):V<=s&&(i.expiredLanes|=P),y&=~P}}function En(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ds(){var i=vo;return vo<<=1,(vo&4194240)===0&&(vo=64),i}function ii(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function si(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-en(s),i[s]=l}function Ye(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-en(l),y=1<<p;s[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function oi(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-en(l),p=1<<h;p&s|i[h]&s&&(i[h]|=s),l&=~p}}var Fe=0;function ai(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ec,Eo,tc,nc,rc,cl=!1,ur=[],jt=null,Gn=null,Qn=null,li=new Map,Dn=new Map,cr=[],kd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(i,s){switch(i){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":li.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(s.pointerId)}}function un(i,s,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Al(s),s!==null&&Eo(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function Vd(i,s,l,h,p){switch(s){case"focusin":return jt=un(jt,i,s,l,h,p),!0;case"dragenter":return Gn=un(Gn,i,s,l,h,p),!0;case"mouseover":return Qn=un(Qn,i,s,l,h,p),!0;case"pointerover":var y=p.pointerId;return li.set(y,un(li.get(y)||null,i,s,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Dn.set(y,un(Dn.get(y)||null,i,s,l,h,p)),!0}return!1}function sc(i){var s=ys(i.target);if(s!==null){var l=Kn(s);if(l!==null){if(s=l.tag,s===13){if(s=ls(l),s!==null){i.blockedOn=s,rc(i.priority,function(){tc(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Dr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Io(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);is=h,l.target.dispatchEvent(h),is=null}else return s=Al(l),s!==null&&Eo(s),i.blockedOn=l,!1;s.shift()}return!0}function fs(i,s,l){Dr(i)&&l.delete(s)}function oc(){cl=!1,jt!==null&&Dr(jt)&&(jt=null),Gn!==null&&Dr(Gn)&&(Gn=null),Qn!==null&&Dr(Qn)&&(Qn=null),li.forEach(fs),Dn.forEach(fs)}function Hn(i,s){i.blockedOn===s&&(i.blockedOn=null,cl||(cl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oc)))}function Yn(i){function s(p){return Hn(p,i)}if(0<ur.length){Hn(ur[0],i);for(var l=1;l<ur.length;l++){var h=ur[l];h.blockedOn===i&&(h.blockedOn=null)}}for(jt!==null&&Hn(jt,i),Gn!==null&&Hn(Gn,i),Qn!==null&&Hn(Qn,i),li.forEach(s),Dn.forEach(s),l=0;l<cr.length;l++)h=cr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<cr.length&&(l=cr[0],l.blockedOn===null);)sc(l),l.blockedOn===null&&cr.shift()}var Nr=ne.ReactCurrentBatchConfig,ui=!0;function st(i,s,l,h){var p=Fe,y=Nr.transition;Nr.transition=null;try{Fe=1,hl(i,s,l,h)}finally{Fe=p,Nr.transition=y}}function Dd(i,s,l,h){var p=Fe,y=Nr.transition;Nr.transition=null;try{Fe=4,hl(i,s,l,h)}finally{Fe=p,Nr.transition=y}}function hl(i,s,l,h){if(ui){var p=Io(i,s,l,h);if(p===null)qd(i,s,h,ps,l),ic(i,h);else if(Vd(p,i,s,l,h))h.stopPropagation();else if(ic(i,h),s&4&&-1<kd.indexOf(i)){for(;p!==null;){var y=Al(p);if(y!==null&&ec(y),y=Io(i,s,l,h),y===null&&qd(i,s,h,ps,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else qd(i,s,h,null,l)}}var ps=null;function Io(i,s,l,h){if(ps=null,i=co(h),i=ys(i),i!==null)if(s=Kn(i),s===null)i=null;else if(l=s.tag,l===13){if(i=ls(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return ps=i,null}function dl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hu()){case us:return 1;case ni:return 4;case Vn:case ll:return 16;case Yu:return 536870912;default:return 16}default:return 16}}var In=null,To=null,cn=null;function fl(){if(cn)return cn;var i,s=To,l=s.length,h,p="value"in In?In.value:In.textContent,y=p.length;for(i=0;i<l&&s[i]===p[i];i++);var E=l-i;for(h=1;h<=E&&s[l-h]===p[y-h];h++);return cn=p.slice(i,1<h?1-h:void 0)}function So(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function hr(){return!0}function pl(){return!1}function Mt(i){function s(l,h,p,y,E){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(l=i[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?hr:pl,this.isPropagationStopped=pl,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),s}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=Mt(Xn),dr=ce({},Xn,{view:0,detail:0}),Nd=Mt(dr),xo,br,ci,ms=ce({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ci&&(ci&&i.type==="mousemove"?(xo=i.screenX-ci.screenX,br=i.screenY-ci.screenY):br=xo=0,ci=i),xo)},movementY:function(i){return"movementY"in i?i.movementY:br}}),Po=Mt(ms),ml=ce({},ms,{dataTransfer:0}),ac=Mt(ml),Ro=ce({},dr,{relatedTarget:0}),Co=Mt(Ro),lc=ce({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Or=Mt(lc),uc=ce({},Xn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),cc=Mt(uc),hc=ce({},Xn,{data:0}),gl=Mt(hc),ko={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=dc[i])?!!s[i]:!1}function fr(){return fc}var c=ce({},dr,{key:function(i){if(i.key){var s=ko[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=So(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(i){return i.type==="keypress"?So(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?So(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Mt(c),_=ce({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Mt(_),B=ce({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr}),W=Mt(B),oe=ce({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Mt(oe),Pt=ce({},ms,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Mt(Pt),Dt=[9,13,27,32],wt=d&&"CompositionEvent"in window,Nn=null;d&&"documentMode"in document&&(Nn=document.documentMode);var Tn=d&&"TextEvent"in window&&!Nn,gs=d&&(!wt||Nn&&8<Nn&&11>=Nn),Vo=" ",xg=!1;function Pg(i,s){switch(i){case"keyup":return Dt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Do=!1;function g0(i,s){switch(i){case"compositionend":return Rg(s);case"keypress":return s.which!==32?null:(xg=!0,Vo);case"textInput":return i=s.data,i===Vo&&xg?null:i;default:return null}}function y0(i,s){if(Do)return i==="compositionend"||!wt&&Pg(i,s)?(i=fl(),cn=To=In=null,Do=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gs&&s.locale!=="ko"?null:s.data;default:return null}}var _0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_0[i.type]:s==="textarea"}function kg(i,s,l,h){lr(h),s=_c(s,"onChange"),0<s.length&&(l=new Ao("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var yl=null,_l=null;function v0(i){Qg(i,0)}function pc(i){var s=Lo(i);if(so(s))return i}function w0(i,s){if(i==="change")return s}var Vg=!1;if(d){var bd;if(d){var Od="oninput"in document;if(!Od){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Od=typeof Dg.oninput=="function"}bd=Od}else bd=!1;Vg=bd&&(!document.documentMode||9<document.documentMode)}function Ng(){yl&&(yl.detachEvent("onpropertychange",bg),_l=yl=null)}function bg(i){if(i.propertyName==="value"&&pc(_l)){var s=[];kg(s,_l,i,co(i)),il(v0,s)}}function E0(i,s,l){i==="focusin"?(Ng(),yl=s,_l=l,yl.attachEvent("onpropertychange",bg)):i==="focusout"&&Ng()}function I0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pc(_l)}function T0(i,s){if(i==="click")return pc(s)}function S0(i,s){if(i==="input"||i==="change")return pc(s)}function A0(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Jn=typeof Object.is=="function"?Object.is:A0;function vl(i,s){if(Jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!Jn(i[p],s[p]))return!1}return!0}function Og(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Fg(i,s){var l=Og(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Og(l)}}function Lg(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Lg(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function jg(){for(var i=window,s=ei();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=ei(i.document)}return s}function Fd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function x0(i){var s=jg(),l=i.focusedElem,h=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Lg(l.ownerDocument.documentElement,l)){if(h!==null&&Fd(l)){if(s=h.start,i=h.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=Fg(l,y);var E=Fg(l,h);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(s),i.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var P0=d&&"documentMode"in document&&11>=document.documentMode,No=null,Ld=null,wl=null,jd=!1;function Mg(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jd||No==null||No!==ei(h)||(h=No,"selectionStart"in h&&Fd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),wl&&vl(wl,h)||(wl=h,h=_c(Ld,"onSelect"),0<h.length&&(s=new Ao("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=No)))}function mc(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var bo={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Md={},Bg={};d&&(Bg=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function gc(i){if(Md[i])return Md[i];if(!bo[i])return i;var s=bo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bg)return Md[i]=s[l];return i}var Ug=gc("animationend"),zg=gc("animationiteration"),qg=gc("animationstart"),$g=gc("transitionend"),Kg=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(i,s){Kg.set(i,s),a(s,[i])}for(var Bd=0;Bd<Wg.length;Bd++){var Ud=Wg[Bd],R0=Ud.toLowerCase(),C0=Ud[0].toUpperCase()+Ud.slice(1);hi(R0,"on"+C0)}hi(Ug,"onAnimationEnd"),hi(zg,"onAnimationIteration"),hi(qg,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi($g,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function Gg(i,s,l){var h=i.type||"unknown-event";i.currentTarget=l,Wu(h,s,void 0,i),i.currentTarget=null}function Qg(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var E=h.length-1;0<=E;E--){var P=h[E],V=P.instance,$=P.currentTarget;if(P=P.listener,V!==y&&p.isPropagationStopped())break e;Gg(p,P,$),y=V}else for(E=0;E<h.length;E++){if(P=h[E],V=P.instance,$=P.currentTarget,P=P.listener,V!==y&&p.isPropagationStopped())break e;Gg(p,P,$),y=V}}}if($n)throw i=sl,$n=!1,sl=null,i}function nt(i,s){var l=s[Hd];l===void 0&&(l=s[Hd]=new Set);var h=i+"__bubble";l.has(h)||(Hg(s,i,2,!1),l.add(h))}function zd(i,s,l){var h=0;s&&(h|=4),Hg(l,i,h,s)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Il(i){if(!i[yc]){i[yc]=!0,n.forEach(function(l){l!=="selectionchange"&&(k0.has(l)||zd(l,!1,i),zd(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[yc]||(s[yc]=!0,zd("selectionchange",!1,s))}}function Hg(i,s,l,h){switch(dl(s)){case 1:var p=st;break;case 4:p=Dd;break;default:p=hl}l=p.bind(null,s,l,i),p=void 0,!po||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(s,l,{capture:!0,passive:p}):i.addEventListener(s,l,!0):p!==void 0?i.addEventListener(s,l,{passive:p}):i.addEventListener(s,l,!1)}function qd(i,s,l,h,p){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var P=h.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var V=E.tag;if((V===3||V===4)&&(V=E.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;E=E.return}for(;P!==null;){if(E=ys(P),E===null)return;if(V=E.tag,V===5||V===6){h=y=E;continue e}P=P.parentNode}}h=h.return}il(function(){var $=y,Z=co(l),re=[];e:{var J=Kg.get(i);if(J!==void 0){var de=Ao,me=i;switch(i){case"keypress":if(So(l)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":me="focus",de=Co;break;case"focusout":me="blur",de=Co;break;case"beforeblur":case"afterblur":de=Co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=W;break;case Ug:case zg:case qg:de=Or;break;case $g:de=Ge;break;case"scroll":de=Nd;break;case"wheel":de=Me;break;case"copy":case"cut":case"paste":de=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=S}var ye=(s&4)!==0,gt=!ye&&i==="scroll",z=ye?J!==null?J+"Capture":null:J;ye=[];for(var b=$,q;b!==null;){q=b;var se=q.stateNode;if(q.tag===5&&se!==null&&(q=se,z!==null&&(se=mt(b,z),se!=null&&ye.push(Tl(b,se,q)))),gt)break;b=b.return}0<ye.length&&(J=new de(J,me,null,l,Z),re.push({event:J,listeners:ye}))}}if((s&7)===0){e:{if(J=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",J&&l!==is&&(me=l.relatedTarget||l.fromElement)&&(ys(me)||me[Fr]))break e;if((de||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,de?(me=l.relatedTarget||l.toElement,de=$,me=me?ys(me):null,me!==null&&(gt=Kn(me),me!==gt||me.tag!==5&&me.tag!==6)&&(me=null)):(de=null,me=$),de!==me)){if(ye=Po,se="onMouseLeave",z="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(ye=S,se="onPointerLeave",z="onPointerEnter",b="pointer"),gt=de==null?J:Lo(de),q=me==null?J:Lo(me),J=new ye(se,b+"leave",de,l,Z),J.target=gt,J.relatedTarget=q,se=null,ys(Z)===$&&(ye=new ye(z,b+"enter",me,l,Z),ye.target=q,ye.relatedTarget=gt,se=ye),gt=se,de&&me)t:{for(ye=de,z=me,b=0,q=ye;q;q=Oo(q))b++;for(q=0,se=z;se;se=Oo(se))q++;for(;0<b-q;)ye=Oo(ye),b--;for(;0<q-b;)z=Oo(z),q--;for(;b--;){if(ye===z||z!==null&&ye===z.alternate)break t;ye=Oo(ye),z=Oo(z)}ye=null}else ye=null;de!==null&&Yg(re,J,de,ye,!1),me!==null&&gt!==null&&Yg(re,gt,me,ye,!0)}}e:{if(J=$?Lo($):window,de=J.nodeName&&J.nodeName.toLowerCase(),de==="select"||de==="input"&&J.type==="file")var ve=w0;else if(Cg(J))if(Vg)ve=S0;else{ve=I0;var Se=E0}else(de=J.nodeName)&&de.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ve=T0);if(ve&&(ve=ve(i,$))){kg(re,ve,l,Z);break e}Se&&Se(i,J,$),i==="focusout"&&(Se=J._wrapperState)&&Se.controlled&&J.type==="number"&&ao(J,"number",J.value)}switch(Se=$?Lo($):window,i){case"focusin":(Cg(Se)||Se.contentEditable==="true")&&(No=Se,Ld=$,wl=null);break;case"focusout":wl=Ld=No=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Mg(re,l,Z);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":Mg(re,l,Z)}var Ae;if(wt)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Do?Pg(i,l)&&(Re="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(gs&&l.locale!=="ko"&&(Do||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Do&&(Ae=fl()):(In=Z,To="value"in In?In.value:In.textContent,Do=!0)),Se=_c($,Re),0<Se.length&&(Re=new gl(Re,i,null,l,Z),re.push({event:Re,listeners:Se}),Ae?Re.data=Ae:(Ae=Rg(l),Ae!==null&&(Re.data=Ae)))),(Ae=Tn?g0(i,l):y0(i,l))&&($=_c($,"onBeforeInput"),0<$.length&&(Z=new gl("onBeforeInput","beforeinput",null,l,Z),re.push({event:Z,listeners:$}),Z.data=Ae))}Qg(re,s)})}function Tl(i,s,l){return{instance:i,listener:s,currentTarget:l}}function _c(i,s){for(var l=s+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=mt(i,l),y!=null&&h.unshift(Tl(i,y,p)),y=mt(i,s),y!=null&&h.push(Tl(i,y,p))),i=i.return}return h}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Yg(i,s,l,h,p){for(var y=s._reactName,E=[];l!==null&&l!==h;){var P=l,V=P.alternate,$=P.stateNode;if(V!==null&&V===h)break;P.tag===5&&$!==null&&(P=$,p?(V=mt(l,y),V!=null&&E.unshift(Tl(l,V,P))):p||(V=mt(l,y),V!=null&&E.push(Tl(l,V,P)))),l=l.return}E.length!==0&&i.push({event:s,listeners:E})}var V0=/\r\n?/g,D0=/\u0000|\uFFFD/g;function Xg(i){return(typeof i=="string"?i:""+i).replace(V0,`
`).replace(D0,"")}function vc(i,s,l){if(s=Xg(s),Xg(i)!==s&&l)throw Error(t(425))}function wc(){}var $d=null,Kd=null;function Wd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gd=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,b0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(i){return Jg.resolve(null).then(i).catch(O0)}:Gd;function O0(i){setTimeout(function(){throw i})}function Qd(i,s){var l=s,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Yn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Yn(s)}function di(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Zg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var Fo=Math.random().toString(36).slice(2),pr="__reactFiber$"+Fo,Sl="__reactProps$"+Fo,Fr="__reactContainer$"+Fo,Hd="__reactEvents$"+Fo,F0="__reactListeners$"+Fo,L0="__reactHandles$"+Fo;function ys(i){var s=i[pr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Fr]||l[pr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Zg(i);i!==null;){if(l=i[pr])return l;i=Zg(i)}return s}i=l,l=i.parentNode}return null}function Al(i){return i=i[pr]||i[Fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Lo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ec(i){return i[Sl]||null}var Yd=[],jo=-1;function fi(i){return{current:i}}function rt(i){0>jo||(i.current=Yd[jo],Yd[jo]=null,jo--)}function Ze(i,s){jo++,Yd[jo]=i.current,i.current=s}var pi={},Kt=fi(pi),hn=fi(!1),_s=pi;function Mo(i,s){var l=i.type.contextTypes;if(!l)return pi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=p),p}function dn(i){return i=i.childContextTypes,i!=null}function Ic(){rt(hn),rt(Kt)}function ey(i,s,l){if(Kt.current!==pi)throw Error(t(168));Ze(Kt,s),Ze(hn,l)}function ty(i,s,l){var h=i.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,$e(i)||"Unknown",p));return ce({},l,h)}function Tc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||pi,_s=Kt.current,Ze(Kt,i),Ze(hn,hn.current),!0}function ny(i,s,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=ty(i,s,_s),h.__reactInternalMemoizedMergedChildContext=i,rt(hn),rt(Kt),Ze(Kt,i)):rt(hn),Ze(hn,l)}var Lr=null,Sc=!1,Xd=!1;function ry(i){Lr===null?Lr=[i]:Lr.push(i)}function j0(i){Sc=!0,ry(i)}function mi(){if(!Xd&&Lr!==null){Xd=!0;var i=0,s=Fe;try{var l=Lr;for(Fe=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Lr=null,Sc=!1}catch(p){throw Lr!==null&&(Lr=Lr.slice(i+1)),_o(us,mi),p}finally{Fe=s,Xd=!1}}return null}var Bo=[],Uo=0,Ac=null,xc=0,bn=[],On=0,vs=null,jr=1,Mr="";function ws(i,s){Bo[Uo++]=xc,Bo[Uo++]=Ac,Ac=i,xc=s}function iy(i,s,l){bn[On++]=jr,bn[On++]=Mr,bn[On++]=vs,vs=i;var h=jr;i=Mr;var p=32-en(h)-1;h&=~(1<<p),l+=1;var y=32-en(s)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,jr=1<<32-en(s)+p|l<<p|h,Mr=y+i}else jr=1<<y|l<<p|h,Mr=i}function Jd(i){i.return!==null&&(ws(i,1),iy(i,1,0))}function Zd(i){for(;i===Ac;)Ac=Bo[--Uo],Bo[Uo]=null,xc=Bo[--Uo],Bo[Uo]=null;for(;i===vs;)vs=bn[--On],bn[On]=null,Mr=bn[--On],bn[On]=null,jr=bn[--On],bn[On]=null}var Sn=null,An=null,ot=!1,Zn=null;function sy(i,s){var l=Mn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function oy(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Sn=i,An=di(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Sn=i,An=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=vs!==null?{id:jr,overflow:Mr}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Mn(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,Sn=i,An=null,!0):!1;default:return!1}}function ef(i){return(i.mode&1)!==0&&(i.flags&128)===0}function tf(i){if(ot){var s=An;if(s){var l=s;if(!oy(i,s)){if(ef(i))throw Error(t(418));s=di(l.nextSibling);var h=Sn;s&&oy(i,s)?sy(h,l):(i.flags=i.flags&-4097|2,ot=!1,Sn=i)}}else{if(ef(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,Sn=i}}}function ay(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Sn=i}function Pc(i){if(i!==Sn)return!1;if(!ot)return ay(i),ot=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Wd(i.type,i.memoizedProps)),s&&(s=An)){if(ef(i))throw ly(),Error(t(418));for(;s;)sy(i,s),s=di(s.nextSibling)}if(ay(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){An=di(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}An=null}}else An=Sn?di(i.stateNode.nextSibling):null;return!0}function ly(){for(var i=An;i;)i=di(i.nextSibling)}function zo(){An=Sn=null,ot=!1}function nf(i){Zn===null?Zn=[i]:Zn.push(i)}var M0=ne.ReactCurrentBatchConfig;function xl(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(E){var P=p.refs;E===null?delete P[y]:P[y]=E},s._stringRef=y,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Rc(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function uy(i){var s=i._init;return s(i._payload)}function cy(i){function s(z,b){if(i){var q=z.deletions;q===null?(z.deletions=[b],z.flags|=16):q.push(b)}}function l(z,b){if(!i)return null;for(;b!==null;)s(z,b),b=b.sibling;return null}function h(z,b){for(z=new Map;b!==null;)b.key!==null?z.set(b.key,b):z.set(b.index,b),b=b.sibling;return z}function p(z,b){return z=Ti(z,b),z.index=0,z.sibling=null,z}function y(z,b,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<b?(z.flags|=2,b):q):(z.flags|=2,b)):(z.flags|=1048576,b)}function E(z){return i&&z.alternate===null&&(z.flags|=2),z}function P(z,b,q,se){return b===null||b.tag!==6?(b=Qf(q,z.mode,se),b.return=z,b):(b=p(b,q),b.return=z,b)}function V(z,b,q,se){var ve=q.type;return ve===D?Z(z,b,q.props.children,se,q.key):b!==null&&(b.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&uy(ve)===b.type)?(se=p(b,q.props),se.ref=xl(z,b,q),se.return=z,se):(se=Jc(q.type,q.key,q.props,null,z.mode,se),se.ref=xl(z,b,q),se.return=z,se)}function $(z,b,q,se){return b===null||b.tag!==4||b.stateNode.containerInfo!==q.containerInfo||b.stateNode.implementation!==q.implementation?(b=Hf(q,z.mode,se),b.return=z,b):(b=p(b,q.children||[]),b.return=z,b)}function Z(z,b,q,se,ve){return b===null||b.tag!==7?(b=Rs(q,z.mode,se,ve),b.return=z,b):(b=p(b,q),b.return=z,b)}function re(z,b,q){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Qf(""+b,z.mode,q),b.return=z,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _e:return q=Jc(b.type,b.key,b.props,null,z.mode,q),q.ref=xl(z,null,b),q.return=z,q;case pe:return b=Hf(b,z.mode,q),b.return=z,b;case xe:var se=b._init;return re(z,se(b._payload),q)}if(Pr(b)||Ie(b))return b=Rs(b,z.mode,q,null),b.return=z,b;Rc(z,b)}return null}function J(z,b,q,se){var ve=b!==null?b.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ve!==null?null:P(z,b,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _e:return q.key===ve?V(z,b,q,se):null;case pe:return q.key===ve?$(z,b,q,se):null;case xe:return ve=q._init,J(z,b,ve(q._payload),se)}if(Pr(q)||Ie(q))return ve!==null?null:Z(z,b,q,se,null);Rc(z,q)}return null}function de(z,b,q,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get(q)||null,P(b,z,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case _e:return z=z.get(se.key===null?q:se.key)||null,V(b,z,se,ve);case pe:return z=z.get(se.key===null?q:se.key)||null,$(b,z,se,ve);case xe:var Se=se._init;return de(z,b,q,Se(se._payload),ve)}if(Pr(se)||Ie(se))return z=z.get(q)||null,Z(b,z,se,ve,null);Rc(b,se)}return null}function me(z,b,q,se){for(var ve=null,Se=null,Ae=b,Re=b=0,Ot=null;Ae!==null&&Re<q.length;Re++){Ae.index>Re?(Ot=Ae,Ae=null):Ot=Ae.sibling;var ze=J(z,Ae,q[Re],se);if(ze===null){Ae===null&&(Ae=Ot);break}i&&Ae&&ze.alternate===null&&s(z,Ae),b=y(ze,b,Re),Se===null?ve=ze:Se.sibling=ze,Se=ze,Ae=Ot}if(Re===q.length)return l(z,Ae),ot&&ws(z,Re),ve;if(Ae===null){for(;Re<q.length;Re++)Ae=re(z,q[Re],se),Ae!==null&&(b=y(Ae,b,Re),Se===null?ve=Ae:Se.sibling=Ae,Se=Ae);return ot&&ws(z,Re),ve}for(Ae=h(z,Ae);Re<q.length;Re++)Ot=de(Ae,z,Re,q[Re],se),Ot!==null&&(i&&Ot.alternate!==null&&Ae.delete(Ot.key===null?Re:Ot.key),b=y(Ot,b,Re),Se===null?ve=Ot:Se.sibling=Ot,Se=Ot);return i&&Ae.forEach(function(Si){return s(z,Si)}),ot&&ws(z,Re),ve}function ye(z,b,q,se){var ve=Ie(q);if(typeof ve!="function")throw Error(t(150));if(q=ve.call(q),q==null)throw Error(t(151));for(var Se=ve=null,Ae=b,Re=b=0,Ot=null,ze=q.next();Ae!==null&&!ze.done;Re++,ze=q.next()){Ae.index>Re?(Ot=Ae,Ae=null):Ot=Ae.sibling;var Si=J(z,Ae,ze.value,se);if(Si===null){Ae===null&&(Ae=Ot);break}i&&Ae&&Si.alternate===null&&s(z,Ae),b=y(Si,b,Re),Se===null?ve=Si:Se.sibling=Si,Se=Si,Ae=Ot}if(ze.done)return l(z,Ae),ot&&ws(z,Re),ve;if(Ae===null){for(;!ze.done;Re++,ze=q.next())ze=re(z,ze.value,se),ze!==null&&(b=y(ze,b,Re),Se===null?ve=ze:Se.sibling=ze,Se=ze);return ot&&ws(z,Re),ve}for(Ae=h(z,Ae);!ze.done;Re++,ze=q.next())ze=de(Ae,z,Re,ze.value,se),ze!==null&&(i&&ze.alternate!==null&&Ae.delete(ze.key===null?Re:ze.key),b=y(ze,b,Re),Se===null?ve=ze:Se.sibling=ze,Se=ze);return i&&Ae.forEach(function(_S){return s(z,_S)}),ot&&ws(z,Re),ve}function gt(z,b,q,se){if(typeof q=="object"&&q!==null&&q.type===D&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case _e:e:{for(var ve=q.key,Se=b;Se!==null;){if(Se.key===ve){if(ve=q.type,ve===D){if(Se.tag===7){l(z,Se.sibling),b=p(Se,q.props.children),b.return=z,z=b;break e}}else if(Se.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&uy(ve)===Se.type){l(z,Se.sibling),b=p(Se,q.props),b.ref=xl(z,Se,q),b.return=z,z=b;break e}l(z,Se);break}else s(z,Se);Se=Se.sibling}q.type===D?(b=Rs(q.props.children,z.mode,se,q.key),b.return=z,z=b):(se=Jc(q.type,q.key,q.props,null,z.mode,se),se.ref=xl(z,b,q),se.return=z,z=se)}return E(z);case pe:e:{for(Se=q.key;b!==null;){if(b.key===Se)if(b.tag===4&&b.stateNode.containerInfo===q.containerInfo&&b.stateNode.implementation===q.implementation){l(z,b.sibling),b=p(b,q.children||[]),b.return=z,z=b;break e}else{l(z,b);break}else s(z,b);b=b.sibling}b=Hf(q,z.mode,se),b.return=z,z=b}return E(z);case xe:return Se=q._init,gt(z,b,Se(q._payload),se)}if(Pr(q))return me(z,b,q,se);if(Ie(q))return ye(z,b,q,se);Rc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,b!==null&&b.tag===6?(l(z,b.sibling),b=p(b,q),b.return=z,z=b):(l(z,b),b=Qf(q,z.mode,se),b.return=z,z=b),E(z)):l(z,b)}return gt}var qo=cy(!0),hy=cy(!1),Cc=fi(null),kc=null,$o=null,rf=null;function sf(){rf=$o=kc=null}function of(i){var s=Cc.current;rt(Cc),i._currentValue=s}function af(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function Ko(i,s){kc=i,rf=$o=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(fn=!0),i.firstContext=null)}function Fn(i){var s=i._currentValue;if(rf!==i)if(i={context:i,memoizedValue:s,next:null},$o===null){if(kc===null)throw Error(t(308));$o=i,kc.dependencies={lanes:0,firstContext:i}}else $o=$o.next=i;return s}var Es=null;function lf(i){Es===null?Es=[i]:Es.push(i)}function dy(i,s,l,h){var p=s.interleaved;return p===null?(l.next=l,lf(s)):(l.next=p.next,p.next=l),s.interleaved=l,Br(i,h)}function Br(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var gi=!1;function uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fy(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ur(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function yi(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Ue&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,Br(i,l)}return p=h.interleaved,p===null?(s.next=s,lf(h)):(s.next=p.next,p.next=s),h.interleaved=s,Br(i,l)}function Vc(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,oi(i,l)}}function py(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function Dc(i,s,l,h){var p=i.updateQueue;gi=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var V=P,$=V.next;V.next=null,E===null?y=$:E.next=$,E=V;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,P=Z.lastBaseUpdate,P!==E&&(P===null?Z.firstBaseUpdate=$:P.next=$,Z.lastBaseUpdate=V))}if(y!==null){var re=p.baseState;E=0,Z=$=V=null,P=y;do{var J=P.lane,de=P.eventTime;if((h&J)===J){Z!==null&&(Z=Z.next={eventTime:de,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var me=i,ye=P;switch(J=s,de=l,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){re=me.call(de,re,J);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,J=typeof me=="function"?me.call(de,re,J):me,J==null)break e;re=ce({},re,J);break e;case 2:gi=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,J=p.effects,J===null?p.effects=[P]:J.push(P))}else de={eventTime:de,lane:J,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Z===null?($=Z=de,V=re):Z=Z.next=de,E|=J;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;J=P,P=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);if(Z===null&&(V=re),p.baseState=V,p.firstBaseUpdate=$,p.lastBaseUpdate=Z,s=p.shared.interleaved,s!==null){p=s;do E|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);Ss|=E,i.lanes=E,i.memoizedState=re}}function my(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var h=i[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Pl={},mr=fi(Pl),Rl=fi(Pl),Cl=fi(Pl);function Is(i){if(i===Pl)throw Error(t(174));return i}function cf(i,s){switch(Ze(Cl,s),Ze(Rl,i),Ze(mr,Pl),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xt(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=xt(s,i)}rt(mr),Ze(mr,s)}function Wo(){rt(mr),rt(Rl),rt(Cl)}function gy(i){Is(Cl.current);var s=Is(mr.current),l=xt(s,i.type);s!==l&&(Ze(Rl,i),Ze(mr,l))}function hf(i){Rl.current===i&&(rt(mr),rt(Rl))}var ct=fi(0);function Nc(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var df=[];function ff(){for(var i=0;i<df.length;i++)df[i]._workInProgressVersionPrimary=null;df.length=0}var bc=ne.ReactCurrentDispatcher,pf=ne.ReactCurrentBatchConfig,Ts=0,ht=null,Rt=null,Nt=null,Oc=!1,kl=!1,Vl=0,B0=0;function Wt(){throw Error(t(321))}function mf(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Jn(i[l],s[l]))return!1;return!0}function gf(i,s,l,h,p,y){if(Ts=y,ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,bc.current=i===null||i.memoizedState===null?$0:K0,i=l(h,p),kl){y=0;do{if(kl=!1,Vl=0,25<=y)throw Error(t(301));y+=1,Nt=Rt=null,s.updateQueue=null,bc.current=W0,i=l(h,p)}while(kl)}if(bc.current=jc,s=Rt!==null&&Rt.next!==null,Ts=0,Nt=Rt=ht=null,Oc=!1,s)throw Error(t(300));return i}function yf(){var i=Vl!==0;return Vl=0,i}function gr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ht.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Ln(){if(Rt===null){var i=ht.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var s=Nt===null?ht.memoizedState:Nt.next;if(s!==null)Nt=s,Rt=i;else{if(i===null)throw Error(t(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Nt===null?ht.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Dl(i,s){return typeof s=="function"?s(i):s}function _f(i){var s=Ln(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Rt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var P=E=null,V=null,$=y;do{var Z=$.lane;if((Ts&Z)===Z)V!==null&&(V=V.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:i(h,$.action);else{var re={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};V===null?(P=V=re,E=h):V=V.next=re,ht.lanes|=Z,Ss|=Z}$=$.next}while($!==null&&$!==y);V===null?E=h:V.next=P,Jn(h,s.memoizedState)||(fn=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=V,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,ht.lanes|=y,Ss|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function vf(i){var s=Ln(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Jn(y,s.memoizedState)||(fn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function yy(){}function _y(i,s){var l=ht,h=Ln(),p=s(),y=!Jn(h.memoizedState,p);if(y&&(h.memoizedState=p,fn=!0),h=h.queue,wf(Ey.bind(null,l,h,i),[i]),h.getSnapshot!==s||y||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Nl(9,wy.bind(null,l,h,p,s),void 0,null),bt===null)throw Error(t(349));(Ts&30)!==0||vy(l,s,p)}return p}function vy(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=ht.updateQueue,s===null?(s={lastEffect:null,stores:null},ht.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function wy(i,s,l,h){s.value=l,s.getSnapshot=h,Iy(s)&&Ty(i)}function Ey(i,s,l){return l(function(){Iy(s)&&Ty(i)})}function Iy(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Jn(i,l)}catch{return!0}}function Ty(i){var s=Br(i,1);s!==null&&rr(s,i,1,-1)}function Sy(i){var s=gr();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:i},s.queue=i,i=i.dispatch=q0.bind(null,ht,i),[s.memoizedState,i]}function Nl(i,s,l,h){return i={tag:i,create:s,destroy:l,deps:h,next:null},s=ht.updateQueue,s===null?(s={lastEffect:null,stores:null},ht.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i)),i}function Ay(){return Ln().memoizedState}function Fc(i,s,l,h){var p=gr();ht.flags|=i,p.memoizedState=Nl(1|s,l,void 0,h===void 0?null:h)}function Lc(i,s,l,h){var p=Ln();h=h===void 0?null:h;var y=void 0;if(Rt!==null){var E=Rt.memoizedState;if(y=E.destroy,h!==null&&mf(h,E.deps)){p.memoizedState=Nl(s,l,y,h);return}}ht.flags|=i,p.memoizedState=Nl(1|s,l,y,h)}function xy(i,s){return Fc(8390656,8,i,s)}function wf(i,s){return Lc(2048,8,i,s)}function Py(i,s){return Lc(4,2,i,s)}function Ry(i,s){return Lc(4,4,i,s)}function Cy(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ky(i,s,l){return l=l!=null?l.concat([i]):null,Lc(4,4,Cy.bind(null,s,i),l)}function Ef(){}function Vy(i,s){var l=Ln();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&mf(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function Dy(i,s){var l=Ln();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&mf(s,h[1])?h[0]:(i=i(),l.memoizedState=[i,s],i)}function Ny(i,s,l){return(Ts&21)===0?(i.baseState&&(i.baseState=!1,fn=!0),i.memoizedState=l):(Jn(l,s)||(l=ds(),ht.lanes|=l,Ss|=l,i.baseState=!0),s)}function U0(i,s){var l=Fe;Fe=l!==0&&4>l?l:4,i(!0);var h=pf.transition;pf.transition={};try{i(!1),s()}finally{Fe=l,pf.transition=h}}function by(){return Ln().memoizedState}function z0(i,s,l){var h=Ei(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Oy(i))Fy(s,l);else if(l=dy(i,s,l,h),l!==null){var p=rn();rr(l,i,h,p),Ly(l,s,h)}}function q0(i,s,l){var h=Ei(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Oy(i))Fy(s,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,P=y(E,l);if(p.hasEagerState=!0,p.eagerState=P,Jn(P,E)){var V=s.interleaved;V===null?(p.next=p,lf(s)):(p.next=V.next,V.next=p),s.interleaved=p;return}}catch{}finally{}l=dy(i,s,p,h),l!==null&&(p=rn(),rr(l,i,h,p),Ly(l,s,h))}}function Oy(i){var s=i.alternate;return i===ht||s!==null&&s===ht}function Fy(i,s){kl=Oc=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function Ly(i,s,l){if((l&4194240)!==0){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,oi(i,l)}}var jc={readContext:Fn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},$0={readContext:Fn,useCallback:function(i,s){return gr().memoizedState=[i,s===void 0?null:s],i},useContext:Fn,useEffect:xy,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,Fc(4194308,4,Cy.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Fc(4194308,4,i,s)},useInsertionEffect:function(i,s){return Fc(4,2,i,s)},useMemo:function(i,s){var l=gr();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var h=gr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},h.queue=i,i=i.dispatch=z0.bind(null,ht,i),[h.memoizedState,i]},useRef:function(i){var s=gr();return i={current:i},s.memoizedState=i},useState:Sy,useDebugValue:Ef,useDeferredValue:function(i){return gr().memoizedState=i},useTransition:function(){var i=Sy(!1),s=i[0];return i=U0.bind(null,i[1]),gr().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var h=ht,p=gr();if(ot){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),bt===null)throw Error(t(349));(Ts&30)!==0||vy(h,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,xy(Ey.bind(null,h,y,i),[i]),h.flags|=2048,Nl(9,wy.bind(null,h,y,l,s),void 0,null),l},useId:function(){var i=gr(),s=bt.identifierPrefix;if(ot){var l=Mr,h=jr;l=(h&~(1<<32-en(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Vl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=B0++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},K0={readContext:Fn,useCallback:Vy,useContext:Fn,useEffect:wf,useImperativeHandle:ky,useInsertionEffect:Py,useLayoutEffect:Ry,useMemo:Dy,useReducer:_f,useRef:Ay,useState:function(){return _f(Dl)},useDebugValue:Ef,useDeferredValue:function(i){var s=Ln();return Ny(s,Rt.memoizedState,i)},useTransition:function(){var i=_f(Dl)[0],s=Ln().memoizedState;return[i,s]},useMutableSource:yy,useSyncExternalStore:_y,useId:by,unstable_isNewReconciler:!1},W0={readContext:Fn,useCallback:Vy,useContext:Fn,useEffect:wf,useImperativeHandle:ky,useInsertionEffect:Py,useLayoutEffect:Ry,useMemo:Dy,useReducer:vf,useRef:Ay,useState:function(){return vf(Dl)},useDebugValue:Ef,useDeferredValue:function(i){var s=Ln();return Rt===null?s.memoizedState=i:Ny(s,Rt.memoizedState,i)},useTransition:function(){var i=vf(Dl)[0],s=Ln().memoizedState;return[i,s]},useMutableSource:yy,useSyncExternalStore:_y,useId:by,unstable_isNewReconciler:!1};function er(i,s){if(i&&i.defaultProps){s=ce({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function If(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:ce({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Mc={isMounted:function(i){return(i=i._reactInternals)?Kn(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var h=rn(),p=Ei(i),y=Ur(h,p);y.payload=s,l!=null&&(y.callback=l),s=yi(i,y,p),s!==null&&(rr(s,i,p,h),Vc(s,i,p))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=rn(),p=Ei(i),y=Ur(h,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=yi(i,y,p),s!==null&&(rr(s,i,p,h),Vc(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=rn(),h=Ei(i),p=Ur(l,h);p.tag=2,s!=null&&(p.callback=s),s=yi(i,p,h),s!==null&&(rr(s,i,h,l),Vc(s,i,h))}};function jy(i,s,l,h,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):s.prototype&&s.prototype.isPureReactComponent?!vl(l,h)||!vl(p,y):!0}function My(i,s,l){var h=!1,p=pi,y=s.contextType;return typeof y=="object"&&y!==null?y=Fn(y):(p=dn(s)?_s:Kt.current,h=s.contextTypes,y=(h=h!=null)?Mo(i,p):pi),s=new s(l,y),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Mc,i.stateNode=s,s._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),s}function By(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&Mc.enqueueReplaceState(s,s.state,null)}function Tf(i,s,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},uf(i);var y=s.contextType;typeof y=="object"&&y!==null?p.context=Fn(y):(y=dn(s)?_s:Kt.current,p.context=Mo(i,y)),p.state=i.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(If(i,s,y,l),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Mc.enqueueReplaceState(p,p.state,null),Dc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Go(i,s){try{var l="",h=s;do l+=De(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:s,stack:p,digest:null}}function Sf(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function Af(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function Uy(i,s,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Wc||(Wc=!0,Bf=h),Af(i,s)},l}function zy(i,s,l){l=Ur(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){Af(i,s)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Af(i,s),typeof h!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),l}function qy(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new G0;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),i=aS.bind(null,i,s,l),s.then(i,i))}function $y(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function Ky(i,s,l,h,p){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ur(-1,1),s.tag=2,yi(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var Q0=ne.ReactCurrentOwner,fn=!1;function nn(i,s,l,h){s.child=i===null?hy(s,null,l,h):qo(s,i.child,l,h)}function Wy(i,s,l,h,p){l=l.render;var y=s.ref;return Ko(s,p),h=gf(i,s,l,h,y,p),l=yf(),i!==null&&!fn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,zr(i,s,p)):(ot&&l&&Jd(s),s.flags|=1,nn(i,s,h,p),s.child)}function Gy(i,s,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Gf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Qy(i,s,y,h,p)):(i=Jc(l.type,null,h,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,(i.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:vl,l(E,h)&&i.ref===s.ref)return zr(i,s,p)}return s.flags|=1,i=Ti(y,h),i.ref=s.ref,i.return=s,s.child=i}function Qy(i,s,l,h,p){if(i!==null){var y=i.memoizedProps;if(vl(y,h)&&i.ref===s.ref)if(fn=!1,s.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(fn=!0);else return s.lanes=i.lanes,zr(i,s,p)}return xf(i,s,l,h,p)}function Hy(i,s,l){var h=s.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Ho,xn),xn|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Ze(Ho,xn),xn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Ze(Ho,xn),xn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Ze(Ho,xn),xn|=h;return nn(i,s,p,l),s.child}function Yy(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function xf(i,s,l,h,p){var y=dn(l)?_s:Kt.current;return y=Mo(s,y),Ko(s,p),l=gf(i,s,l,h,y,p),h=yf(),i!==null&&!fn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,zr(i,s,p)):(ot&&h&&Jd(s),s.flags|=1,nn(i,s,l,p),s.child)}function Xy(i,s,l,h,p){if(dn(l)){var y=!0;Tc(s)}else y=!1;if(Ko(s,p),s.stateNode===null)Uc(i,s),My(s,l,h),Tf(s,l,h,p),h=!0;else if(i===null){var E=s.stateNode,P=s.memoizedProps;E.props=P;var V=E.context,$=l.contextType;typeof $=="object"&&$!==null?$=Fn($):($=dn(l)?_s:Kt.current,$=Mo(s,$));var Z=l.getDerivedStateFromProps,re=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";re||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==h||V!==$)&&By(s,E,h,$),gi=!1;var J=s.memoizedState;E.state=J,Dc(s,h,E,p),V=s.memoizedState,P!==h||J!==V||hn.current||gi?(typeof Z=="function"&&(If(s,l,Z,h),V=s.memoizedState),(P=gi||jy(s,l,P,h,J,V,$))?(re||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=V),E.props=h,E.state=V,E.context=$,h=P):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,fy(i,s),P=s.memoizedProps,$=s.type===s.elementType?P:er(s.type,P),E.props=$,re=s.pendingProps,J=E.context,V=l.contextType,typeof V=="object"&&V!==null?V=Fn(V):(V=dn(l)?_s:Kt.current,V=Mo(s,V));var de=l.getDerivedStateFromProps;(Z=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==re||J!==V)&&By(s,E,h,V),gi=!1,J=s.memoizedState,E.state=J,Dc(s,h,E,p);var me=s.memoizedState;P!==re||J!==me||hn.current||gi?(typeof de=="function"&&(If(s,l,de,h),me=s.memoizedState),($=gi||jy(s,l,$,h,J,me,V)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,me,V),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,me,V)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=me),E.props=h,E.state=me,E.context=V,h=$):(typeof E.componentDidUpdate!="function"||P===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),h=!1)}return Pf(i,s,l,h,y,p)}function Pf(i,s,l,h,p,y){Yy(i,s);var E=(s.flags&128)!==0;if(!h&&!E)return p&&ny(s,l,!1),zr(i,s,y);h=s.stateNode,Q0.current=s;var P=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,i!==null&&E?(s.child=qo(s,i.child,null,y),s.child=qo(s,null,P,y)):nn(i,s,P,y),s.memoizedState=h.state,p&&ny(s,l,!0),s.child}function Jy(i){var s=i.stateNode;s.pendingContext?ey(i,s.pendingContext,s.pendingContext!==s.context):s.context&&ey(i,s.context,!1),cf(i,s.containerInfo)}function Zy(i,s,l,h,p){return zo(),nf(p),s.flags|=256,nn(i,s,l,h),s.child}var Rf={dehydrated:null,treeContext:null,retryLane:0};function Cf(i){return{baseLanes:i,cachePool:null,transitions:null}}function e_(i,s,l){var h=s.pendingProps,p=ct.current,y=!1,E=(s.flags&128)!==0,P;if((P=E)||(P=i!==null&&i.memoizedState===null?!1:(p&2)!==0),P?(y=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Ze(ct,p&1),i===null)return tf(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=h.children,i=h.fallback,y?(h=s.mode,y=s.child,E={mode:"hidden",children:E},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Zc(E,h,0,null),i=Rs(i,h,l,null),y.return=s,i.return=s,y.sibling=i,s.child=y,s.child.memoizedState=Cf(l),s.memoizedState=Rf,i):kf(s,E));if(p=i.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return H0(i,s,E,h,P,p,l);if(y){y=h.fallback,E=s.mode,p=i.child,P=p.sibling;var V={mode:"hidden",children:h.children};return(E&1)===0&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=V,s.deletions=null):(h=Ti(p,V),h.subtreeFlags=p.subtreeFlags&14680064),P!==null?y=Ti(P,y):(y=Rs(y,E,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,E=i.child.memoizedState,E=E===null?Cf(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,s.memoizedState=Rf,h}return y=i.child,i=y.sibling,h=Ti(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=h,s.memoizedState=null,h}function kf(i,s){return s=Zc({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Bc(i,s,l,h){return h!==null&&nf(h),qo(s,i.child,null,l),i=kf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function H0(i,s,l,h,p,y,E){if(l)return s.flags&256?(s.flags&=-257,h=Sf(Error(t(422))),Bc(i,s,E,h)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(y=h.fallback,p=s.mode,h=Zc({mode:"visible",children:h.children},p,0,null),y=Rs(y,p,E,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&qo(s,i.child,null,E),s.child.memoizedState=Cf(E),s.memoizedState=Rf,y);if((s.mode&1)===0)return Bc(i,s,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var P=h.dgst;return h=P,y=Error(t(419)),h=Sf(y,h,void 0),Bc(i,s,E,h)}if(P=(E&i.childLanes)!==0,fn||P){if(h=bt,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Br(i,p),rr(h,i,p,-1))}return Wf(),h=Sf(Error(t(421))),Bc(i,s,E,h)}return p.data==="$?"?(s.flags|=128,s.child=i.child,s=lS.bind(null,i),p._reactRetry=s,null):(i=y.treeContext,An=di(p.nextSibling),Sn=s,ot=!0,Zn=null,i!==null&&(bn[On++]=jr,bn[On++]=Mr,bn[On++]=vs,jr=i.id,Mr=i.overflow,vs=s),s=kf(s,h.children),s.flags|=4096,s)}function t_(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),af(i.return,s,l)}function Vf(i,s,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function n_(i,s,l){var h=s.pendingProps,p=h.revealOrder,y=h.tail;if(nn(i,s,h.children,l),h=ct.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&t_(i,l,s);else if(i.tag===19)t_(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Ze(ct,h),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)i=l.alternate,i!==null&&Nc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Vf(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Nc(i)===null){s.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Vf(s,!0,l,null,y);break;case"together":Vf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Uc(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function zr(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),Ss|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=Ti(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Ti(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function Y0(i,s,l){switch(s.tag){case 3:Jy(s),zo();break;case 5:gy(s);break;case 1:dn(s.type)&&Tc(s);break;case 4:cf(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;Ze(Cc,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ze(ct,ct.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?e_(i,s,l):(Ze(ct,ct.current&1),i=zr(i,s,l),i!==null?i.sibling:null);Ze(ct,ct.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(i.flags&128)!==0){if(h)return n_(i,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ze(ct,ct.current),h)break;return null;case 22:case 23:return s.lanes=0,Hy(i,s,l)}return zr(i,s,l)}var r_,Df,i_,s_;r_=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Df=function(){},i_=function(i,s,l,h){var p=i.memoizedProps;if(p!==h){i=s.stateNode,Is(mr.current);var y=null;switch(l){case"input":p=ts(i,p),h=ts(i,h),y=[];break;case"select":p=ce({},p,{value:void 0}),h=ce({},h,{value:void 0}),y=[];break;case"textarea":p=Qa(i,p),h=Qa(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=wc)}el(l,h);var E;l=null;for($ in p)if(!h.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var P=p[$];for(E in P)P.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var V=h[$];if(P=p?.[$],h.hasOwnProperty($)&&V!==P&&(V!=null||P!=null))if($==="style")if(P){for(E in P)!P.hasOwnProperty(E)||V&&V.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in V)V.hasOwnProperty(E)&&P[E]!==V[E]&&(l||(l={}),l[E]=V[E])}else l||(y||(y=[]),y.push($,l)),l=V;else $==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,P=P?P.__html:void 0,V!=null&&P!==V&&(y=y||[]).push($,V)):$==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push($,""+V):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(V!=null&&$==="onScroll"&&nt("scroll",i),y||P===V||(y=[])):(y=y||[]).push($,V))}l&&(y=y||[]).push("style",l);var $=y;(s.updateQueue=$)&&(s.flags|=4)}},s_=function(i,s,l,h){l!==h&&(s.flags|=4)};function bl(i,s){if(!ot)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Gt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function X0(i,s,l){var h=s.pendingProps;switch(Zd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return dn(s.type)&&Ic(),Gt(s),null;case 3:return h=s.stateNode,Wo(),rt(hn),rt(Kt),ff(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Pc(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zn!==null&&(qf(Zn),Zn=null))),Df(i,s),Gt(s),null;case 5:hf(s);var p=Is(Cl.current);if(l=s.type,i!==null&&s.stateNode!=null)i_(i,s,l,h,p),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Gt(s),null}if(i=Is(mr.current),Pc(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[pr]=s,h[Sl]=y,i=(s.mode&1)!==0,l){case"dialog":nt("cancel",h),nt("close",h);break;case"iframe":case"object":case"embed":nt("load",h);break;case"video":case"audio":for(p=0;p<El.length;p++)nt(El[p],h);break;case"source":nt("error",h);break;case"img":case"image":case"link":nt("error",h),nt("load",h);break;case"details":nt("toggle",h);break;case"input":oo(h,y),nt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},nt("invalid",h);break;case"textarea":lo(h,y),nt("invalid",h)}el(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var P=y[E];E==="children"?typeof P=="string"?h.textContent!==P&&(y.suppressHydrationWarning!==!0&&vc(h.textContent,P,i),p=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&vc(h.textContent,P,i),p=["children",""+P]):o.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&nt("scroll",h)}switch(l){case"input":xr(h),Ku(h,y,!0);break;case"textarea":xr(h),Ha(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=wc)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=At(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=E.createElement(l,{is:h.is}):(i=E.createElement(l),l==="select"&&(E=i,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):i=E.createElementNS(i,l),i[pr]=s,i[Sl]=h,r_(i,s,!1,!1),s.stateNode=i;e:{switch(E=tl(l,h),l){case"dialog":nt("cancel",i),nt("close",i),p=h;break;case"iframe":case"object":case"embed":nt("load",i),p=h;break;case"video":case"audio":for(p=0;p<El.length;p++)nt(El[p],i);p=h;break;case"source":nt("error",i),p=h;break;case"img":case"image":case"link":nt("error",i),nt("load",i),p=h;break;case"details":nt("toggle",i),p=h;break;case"input":oo(i,h),p=ts(i,h),nt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=ce({},h,{value:void 0}),nt("invalid",i);break;case"textarea":lo(i,h),p=Qa(i,h),nt("invalid",i);break;default:p=h}el(l,p),P=p;for(y in P)if(P.hasOwnProperty(y)){var V=P[y];y==="style"?Ja(i,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ya(i,V)):y==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&ti(i,V):typeof V=="number"&&ti(i,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?V!=null&&y==="onScroll"&&nt("scroll",i):V!=null&&G(i,y,V,E))}switch(l){case"input":xr(i),Ku(i,h,!1);break;case"textarea":xr(i),Ha(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Ke(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Rr(i,!!h.multiple,y,!1):h.defaultValue!=null&&Rr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=wc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gt(s),null;case 6:if(i&&s.stateNode!=null)s_(i,s,i.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Is(Cl.current),Is(mr.current),Pc(s)){if(h=s.stateNode,l=s.memoizedProps,h[pr]=s,(y=h.nodeValue!==l)&&(i=Sn,i!==null))switch(i.tag){case 3:vc(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&vc(h.nodeValue,l,(i.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[pr]=s,s.stateNode=h}return Gt(s),null;case 13:if(rt(ct),h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&An!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ly(),zo(),s.flags|=98560,y=!1;else if(y=Pc(s),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[pr]=s}else zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),y=!1}else Zn!==null&&(qf(Zn),Zn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(ct.current&1)!==0?Ct===0&&(Ct=3):Wf())),s.updateQueue!==null&&(s.flags|=4),Gt(s),null);case 4:return Wo(),Df(i,s),i===null&&Il(s.stateNode.containerInfo),Gt(s),null;case 10:return of(s.type._context),Gt(s),null;case 17:return dn(s.type)&&Ic(),Gt(s),null;case 19:if(rt(ct),y=s.memoizedState,y===null)return Gt(s),null;if(h=(s.flags&128)!==0,E=y.rendering,E===null)if(h)bl(y,!1);else{if(Ct!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(E=Nc(i),E!==null){for(s.flags|=128,bl(y,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,i=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ze(ct,ct.current&1|2),s.child}i=i.sibling}y.tail!==null&&Je()>Yo&&(s.flags|=128,h=!0,bl(y,!1),s.lanes=4194304)}else{if(!h)if(i=Nc(E),i!==null){if(s.flags|=128,h=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),bl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!ot)return Gt(s),null}else 2*Je()-y.renderingStartTime>Yo&&l!==1073741824&&(s.flags|=128,h=!0,bl(y,!1),s.lanes=4194304);y.isBackwards?(E.sibling=s.child,s.child=E):(l=y.last,l!==null?l.sibling=E:s.child=E,y.last=E)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Je(),s.sibling=null,l=ct.current,Ze(ct,h?l&1|2:l&1),s):(Gt(s),null);case 22:case 23:return Kf(),h=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(xn&1073741824)!==0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function J0(i,s){switch(Zd(s),s.tag){case 1:return dn(s.type)&&Ic(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Wo(),rt(hn),rt(Kt),ff(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return hf(s),null;case 13:if(rt(ct),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));zo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return rt(ct),null;case 4:return Wo(),null;case 10:return of(s.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var zc=!1,Qt=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Qo(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ft(i,s,h)}else l.current=null}function Nf(i,s,l){try{l()}catch(h){ft(i,s,h)}}var o_=!1;function eS(i,s){if($d=ui,i=jg(),Fd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,P=-1,V=-1,$=0,Z=0,re=i,J=null;t:for(;;){for(var de;re!==l||p!==0&&re.nodeType!==3||(P=E+p),re!==y||h!==0&&re.nodeType!==3||(V=E+h),re.nodeType===3&&(E+=re.nodeValue.length),(de=re.firstChild)!==null;)J=re,re=de;for(;;){if(re===i)break t;if(J===l&&++$===p&&(P=E),J===y&&++Z===h&&(V=E),(de=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=de}l=P===-1||V===-1?null:{start:P,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kd={focusedElem:i,selectionRange:l},ui=!1,fe=s;fe!==null;)if(s=fe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,fe=i;else for(;fe!==null;){s=fe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,gt=me.memoizedState,z=s.stateNode,b=z.getSnapshotBeforeUpdate(s.elementType===s.type?ye:er(s.type,ye),gt);z.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(s,s.return,se)}if(i=s.sibling,i!==null){i.return=s.return,fe=i;break}fe=s.return}return me=o_,o_=!1,me}function Ol(i,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Nf(s,l,y)}p=p.next}while(p!==h)}}function qc(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function bf(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function a_(i){var s=i.alternate;s!==null&&(i.alternate=null,a_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[pr],delete s[Sl],delete s[Hd],delete s[F0],delete s[L0])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function l_(i){return i.tag===5||i.tag===3||i.tag===4}function u_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||l_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Of(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=wc));else if(h!==4&&(i=i.child,i!==null))for(Of(i,s,l),i=i.sibling;i!==null;)Of(i,s,l),i=i.sibling}function Ff(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Ff(i,s,l),i=i.sibling;i!==null;)Ff(i,s,l),i=i.sibling}var Bt=null,tr=!1;function _i(i,s,l){for(l=l.child;l!==null;)c_(i,s,l),l=l.sibling}function c_(i,s,l){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(cs,l)}catch{}switch(l.tag){case 5:Qt||Qo(l,s);case 6:var h=Bt,p=tr;Bt=null,_i(i,s,l),Bt=h,tr=p,Bt!==null&&(tr?(i=Bt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Bt.removeChild(l.stateNode));break;case 18:Bt!==null&&(tr?(i=Bt,l=l.stateNode,i.nodeType===8?Qd(i.parentNode,l):i.nodeType===1&&Qd(i,l),Yn(i)):Qd(Bt,l.stateNode));break;case 4:h=Bt,p=tr,Bt=l.stateNode.containerInfo,tr=!0,_i(i,s,l),Bt=h,tr=p;break;case 0:case 11:case 14:case 15:if(!Qt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Nf(l,s,E),p=p.next}while(p!==h)}_i(i,s,l);break;case 1:if(!Qt&&(Qo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){ft(l,s,P)}_i(i,s,l);break;case 21:_i(i,s,l);break;case 22:l.mode&1?(Qt=(h=Qt)||l.memoizedState!==null,_i(i,s,l),Qt=h):_i(i,s,l);break;default:_i(i,s,l)}}function h_(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Z0),s.forEach(function(h){var p=uS.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function nr(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,E=s,P=E;e:for(;P!==null;){switch(P.tag){case 5:Bt=P.stateNode,tr=!1;break e;case 3:Bt=P.stateNode.containerInfo,tr=!0;break e;case 4:Bt=P.stateNode.containerInfo,tr=!0;break e}P=P.return}if(Bt===null)throw Error(t(160));c_(y,E,p),Bt=null,tr=!1;var V=p.alternate;V!==null&&(V.return=null),p.return=null}catch($){ft(p,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)d_(s,i),s=s.sibling}function d_(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(nr(s,i),yr(i),h&4){try{Ol(3,i,i.return),qc(3,i)}catch(ye){ft(i,i.return,ye)}try{Ol(5,i,i.return)}catch(ye){ft(i,i.return,ye)}}break;case 1:nr(s,i),yr(i),h&512&&l!==null&&Qo(l,l.return);break;case 5:if(nr(s,i),yr(i),h&512&&l!==null&&Qo(l,l.return),i.flags&32){var p=i.stateNode;try{ti(p,"")}catch(ye){ft(i,i.return,ye)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,P=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Wa(p,y),tl(P,E);var $=tl(P,y);for(E=0;E<V.length;E+=2){var Z=V[E],re=V[E+1];Z==="style"?Ja(p,re):Z==="dangerouslySetInnerHTML"?Ya(p,re):Z==="children"?ti(p,re):G(p,Z,re,$)}switch(P){case"input":Ga(p,y);break;case"textarea":uo(p,y);break;case"select":var J=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?Rr(p,!!y.multiple,de,!1):J!==!!y.multiple&&(y.defaultValue!=null?Rr(p,!!y.multiple,y.defaultValue,!0):Rr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Sl]=y}catch(ye){ft(i,i.return,ye)}}break;case 6:if(nr(s,i),yr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(ye){ft(i,i.return,ye)}}break;case 3:if(nr(s,i),yr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Yn(s.containerInfo)}catch(ye){ft(i,i.return,ye)}break;case 4:nr(s,i),yr(i);break;case 13:nr(s,i),yr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Mf=Je())),h&4&&h_(i);break;case 22:if(Z=l!==null&&l.memoizedState!==null,i.mode&1?(Qt=($=Qt)||Z,nr(s,i),Qt=$):nr(s,i),yr(i),h&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!Z&&(i.mode&1)!==0)for(fe=i,Z=i.child;Z!==null;){for(re=fe=Z;fe!==null;){switch(J=fe,de=J.child,J.tag){case 0:case 11:case 14:case 15:Ol(4,J,J.return);break;case 1:Qo(J,J.return);var me=J.stateNode;if(typeof me.componentWillUnmount=="function"){h=J,l=J.return;try{s=h,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ye){ft(h,l,ye)}}break;case 5:Qo(J,J.return);break;case 22:if(J.memoizedState!==null){m_(re);continue}}de!==null?(de.return=J,fe=de):m_(re)}Z=Z.sibling}e:for(Z=null,re=i;;){if(re.tag===5){if(Z===null){Z=re;try{p=re.stateNode,$?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=re.stateNode,V=re.memoizedProps.style,E=V!=null&&V.hasOwnProperty("display")?V.display:null,P.style.display=Xa("display",E))}catch(ye){ft(i,i.return,ye)}}}else if(re.tag===6){if(Z===null)try{re.stateNode.nodeValue=$?"":re.memoizedProps}catch(ye){ft(i,i.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;Z===re&&(Z=null),re=re.return}Z===re&&(Z=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:nr(s,i),yr(i),h&4&&h_(i);break;case 21:break;default:nr(s,i),yr(i)}}function yr(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(l_(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ti(p,""),h.flags&=-33);var y=u_(i);Ff(i,y,p);break;case 3:case 4:var E=h.stateNode.containerInfo,P=u_(i);Of(i,P,E);break;default:throw Error(t(161))}}catch(V){ft(i,i.return,V)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function tS(i,s,l){fe=i,f_(i)}function f_(i,s,l){for(var h=(i.mode&1)!==0;fe!==null;){var p=fe,y=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||zc;if(!E){var P=p.alternate,V=P!==null&&P.memoizedState!==null||Qt;P=zc;var $=Qt;if(zc=E,(Qt=V)&&!$)for(fe=p;fe!==null;)E=fe,V=E.child,E.tag===22&&E.memoizedState!==null?g_(p):V!==null?(V.return=E,fe=V):g_(p);for(;y!==null;)fe=y,f_(y),y=y.sibling;fe=p,zc=P,Qt=$}p_(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,fe=y):p_(i)}}function p_(i){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Qt||qc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Qt)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:er(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&my(s,y,h);break;case 3:var E=s.updateQueue;if(E!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}my(s,E,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var re=Z.dehydrated;re!==null&&Yn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&bf(s)}catch(J){ft(s,s.return,J)}}if(s===i){fe=null;break}if(l=s.sibling,l!==null){l.return=s.return,fe=l;break}fe=s.return}}function m_(i){for(;fe!==null;){var s=fe;if(s===i){fe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,fe=l;break}fe=s.return}}function g_(i){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{qc(4,s)}catch(V){ft(s,l,V)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(V){ft(s,p,V)}}var y=s.return;try{bf(s)}catch(V){ft(s,y,V)}break;case 5:var E=s.return;try{bf(s)}catch(V){ft(s,E,V)}}}catch(V){ft(s,s.return,V)}if(s===i){fe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,fe=P;break}fe=s.return}}var nS=Math.ceil,$c=ne.ReactCurrentDispatcher,Lf=ne.ReactCurrentOwner,jn=ne.ReactCurrentBatchConfig,Ue=0,bt=null,Et=null,Ut=0,xn=0,Ho=fi(0),Ct=0,Fl=null,Ss=0,Kc=0,jf=0,Ll=null,pn=null,Mf=0,Yo=1/0,qr=null,Wc=!1,Bf=null,vi=null,Gc=!1,wi=null,Qc=0,jl=0,Uf=null,Hc=-1,Yc=0;function rn(){return(Ue&6)!==0?Je():Hc!==-1?Hc:Hc=Je()}function Ei(i){return(i.mode&1)===0?1:(Ue&2)!==0&&Ut!==0?Ut&-Ut:M0.transition!==null?(Yc===0&&(Yc=ds()),Yc):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:dl(i.type)),i)}function rr(i,s,l,h){if(50<jl)throw jl=0,Uf=null,Error(t(185));si(i,l,h),((Ue&2)===0||i!==bt)&&(i===bt&&((Ue&2)===0&&(Kc|=l),Ct===4&&Ii(i,Ut)),mn(i,h),l===1&&Ue===0&&(s.mode&1)===0&&(Yo=Je()+500,Sc&&mi()))}function mn(i,s){var l=i.callbackNode;Vr(i,s);var h=hs(i,i===bt?Ut:0);if(h===0)l!==null&&al(l),i.callbackNode=null,i.callbackPriority=0;else if(s=h&-h,i.callbackPriority!==s){if(l!=null&&al(l),s===1)i.tag===0?j0(__.bind(null,i)):ry(__.bind(null,i)),b0(function(){(Ue&6)===0&&mi()}),l=null;else{switch(ai(h)){case 1:l=us;break;case 4:l=ni;break;case 16:l=Vn;break;case 536870912:l=Yu;break;default:l=Vn}l=x_(l,y_.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function y_(i,s){if(Hc=-1,Yc=0,(Ue&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Xo()&&i.callbackNode!==l)return null;var h=hs(i,i===bt?Ut:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||s)s=Xc(i,h);else{s=h;var p=Ue;Ue|=2;var y=w_();(bt!==i||Ut!==s)&&(qr=null,Yo=Je()+500,xs(i,s));do try{sS();break}catch(P){v_(i,P)}while(!0);sf(),$c.current=y,Ue=p,Et!==null?s=0:(bt=null,Ut=0,s=Ct)}if(s!==0){if(s===2&&(p=En(i),p!==0&&(h=p,s=zf(i,p))),s===1)throw l=Fl,xs(i,0),Ii(i,h),mn(i,Je()),l;if(s===6)Ii(i,h);else{if(p=i.current.alternate,(h&30)===0&&!rS(p)&&(s=Xc(i,h),s===2&&(y=En(i),y!==0&&(h=y,s=zf(i,y))),s===1))throw l=Fl,xs(i,0),Ii(i,h),mn(i,Je()),l;switch(i.finishedWork=p,i.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ps(i,pn,qr);break;case 3:if(Ii(i,h),(h&130023424)===h&&(s=Mf+500-Je(),10<s)){if(hs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){rn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Gd(Ps.bind(null,i,pn,qr),s);break}Ps(i,pn,qr);break;case 4:if(Ii(i,h),(h&4194240)===h)break;for(s=i.eventTimes,p=-1;0<h;){var E=31-en(h);y=1<<E,E=s[E],E>p&&(p=E),h&=~y}if(h=p,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*nS(h/1960))-h,10<h){i.timeoutHandle=Gd(Ps.bind(null,i,pn,qr),h);break}Ps(i,pn,qr);break;case 5:Ps(i,pn,qr);break;default:throw Error(t(329))}}}return mn(i,Je()),i.callbackNode===l?y_.bind(null,i):null}function zf(i,s){var l=Ll;return i.current.memoizedState.isDehydrated&&(xs(i,s).flags|=256),i=Xc(i,s),i!==2&&(s=pn,pn=l,s!==null&&qf(s)),i}function qf(i){pn===null?pn=i:pn.push.apply(pn,i)}function rS(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Jn(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ii(i,s){for(s&=~jf,s&=~Kc,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-en(s),h=1<<l;i[l]=-1,s&=~h}}function __(i){if((Ue&6)!==0)throw Error(t(327));Xo();var s=hs(i,0);if((s&1)===0)return mn(i,Je()),null;var l=Xc(i,s);if(i.tag!==0&&l===2){var h=En(i);h!==0&&(s=h,l=zf(i,h))}if(l===1)throw l=Fl,xs(i,0),Ii(i,s),mn(i,Je()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Ps(i,pn,qr),mn(i,Je()),null}function $f(i,s){var l=Ue;Ue|=1;try{return i(s)}finally{Ue=l,Ue===0&&(Yo=Je()+500,Sc&&mi())}}function As(i){wi!==null&&wi.tag===0&&(Ue&6)===0&&Xo();var s=Ue;Ue|=1;var l=jn.transition,h=Fe;try{if(jn.transition=null,Fe=1,i)return i()}finally{Fe=h,jn.transition=l,Ue=s,(Ue&6)===0&&mi()}}function Kf(){xn=Ho.current,rt(Ho)}function xs(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,N0(l)),Et!==null)for(l=Et.return;l!==null;){var h=l;switch(Zd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ic();break;case 3:Wo(),rt(hn),rt(Kt),ff();break;case 5:hf(h);break;case 4:Wo();break;case 13:rt(ct);break;case 19:rt(ct);break;case 10:of(h.type._context);break;case 22:case 23:Kf()}l=l.return}if(bt=i,Et=i=Ti(i.current,null),Ut=xn=s,Ct=0,Fl=null,jf=Kc=Ss=0,pn=Ll=null,Es!==null){for(s=0;s<Es.length;s++)if(l=Es[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,h.next=E}l.pending=h}Es=null}return i}function v_(i,s){do{var l=Et;try{if(sf(),bc.current=jc,Oc){for(var h=ht.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Oc=!1}if(Ts=0,Nt=Rt=ht=null,kl=!1,Vl=0,Lf.current=null,l===null||l.return===null){Ct=1,Fl=s,Et=null;break}e:{var y=i,E=l.return,P=l,V=s;if(s=Ut,P.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var $=V,Z=P,re=Z.tag;if((Z.mode&1)===0&&(re===0||re===11||re===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var de=$y(E);if(de!==null){de.flags&=-257,Ky(de,E,P,y,s),de.mode&1&&qy(y,$,s),s=de,V=$;var me=s.updateQueue;if(me===null){var ye=new Set;ye.add(V),s.updateQueue=ye}else me.add(V);break e}else{if((s&1)===0){qy(y,$,s),Wf();break e}V=Error(t(426))}}else if(ot&&P.mode&1){var gt=$y(E);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),Ky(gt,E,P,y,s),nf(Go(V,P));break e}}y=V=Go(V,P),Ct!==4&&(Ct=2),Ll===null?Ll=[y]:Ll.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var z=Uy(y,V,s);py(y,z);break e;case 1:P=V;var b=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(vi===null||!vi.has(q)))){y.flags|=65536,s&=-s,y.lanes|=s;var se=zy(y,P,s);py(y,se);break e}}y=y.return}while(y!==null)}I_(l)}catch(ve){s=ve,Et===l&&l!==null&&(Et=l=l.return);continue}break}while(!0)}function w_(){var i=$c.current;return $c.current=jc,i===null?jc:i}function Wf(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),bt===null||(Ss&268435455)===0&&(Kc&268435455)===0||Ii(bt,Ut)}function Xc(i,s){var l=Ue;Ue|=2;var h=w_();(bt!==i||Ut!==s)&&(qr=null,xs(i,s));do try{iS();break}catch(p){v_(i,p)}while(!0);if(sf(),Ue=l,$c.current=h,Et!==null)throw Error(t(261));return bt=null,Ut=0,Ct}function iS(){for(;Et!==null;)E_(Et)}function sS(){for(;Et!==null&&!Qu();)E_(Et)}function E_(i){var s=A_(i.alternate,i,xn);i.memoizedProps=i.pendingProps,s===null?I_(i):Et=s,Lf.current=null}function I_(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=X0(l,s,xn),l!==null){Et=l;return}}else{if(l=J0(l,s),l!==null){l.flags&=32767,Et=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ct=6,Et=null;return}}if(s=s.sibling,s!==null){Et=s;return}Et=s=i}while(s!==null);Ct===0&&(Ct=5)}function Ps(i,s,l){var h=Fe,p=jn.transition;try{jn.transition=null,Fe=1,oS(i,s,l,h)}finally{jn.transition=p,Fe=h}return null}function oS(i,s,l,h){do Xo();while(wi!==null);if((Ue&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ye(i,y),i===bt&&(Et=bt=null,Ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Gc||(Gc=!0,x_(Vn,function(){return Xo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=jn.transition,jn.transition=null;var E=Fe;Fe=1;var P=Ue;Ue|=4,Lf.current=null,eS(i,l),d_(l,i),x0(Kd),ui=!!$d,Kd=$d=null,i.current=l,tS(l),Rd(),Ue=P,Fe=E,jn.transition=y}else i.current=l;if(Gc&&(Gc=!1,wi=i,Qc=p),y=i.pendingLanes,y===0&&(vi=null),Xu(l.stateNode),mn(i,Je()),s!==null)for(h=i.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Wc)throw Wc=!1,i=Bf,Bf=null,i;return(Qc&1)!==0&&i.tag!==0&&Xo(),y=i.pendingLanes,(y&1)!==0?i===Uf?jl++:(jl=0,Uf=i):jl=0,mi(),null}function Xo(){if(wi!==null){var i=ai(Qc),s=jn.transition,l=Fe;try{if(jn.transition=null,Fe=16>i?16:i,wi===null)var h=!1;else{if(i=wi,wi=null,Qc=0,(Ue&6)!==0)throw Error(t(331));var p=Ue;for(Ue|=4,fe=i.current;fe!==null;){var y=fe,E=y.child;if((fe.flags&16)!==0){var P=y.deletions;if(P!==null){for(var V=0;V<P.length;V++){var $=P[V];for(fe=$;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:Ol(8,Z,y)}var re=Z.child;if(re!==null)re.return=Z,fe=re;else for(;fe!==null;){Z=fe;var J=Z.sibling,de=Z.return;if(a_(Z),Z===$){fe=null;break}if(J!==null){J.return=de,fe=J;break}fe=de}}}var me=y.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var gt=ye.sibling;ye.sibling=null,ye=gt}while(ye!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,fe=E;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ol(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,fe=z;break e}fe=y.return}}var b=i.current;for(fe=b;fe!==null;){E=fe;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,fe=q;else e:for(E=b;fe!==null;){if(P=fe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:qc(9,P)}}catch(ve){ft(P,P.return,ve)}if(P===E){fe=null;break e}var se=P.sibling;if(se!==null){se.return=P.return,fe=se;break e}fe=P.return}}if(Ue=p,mi(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(cs,i)}catch{}h=!0}return h}finally{Fe=l,jn.transition=s}}return!1}function T_(i,s,l){s=Go(l,s),s=Uy(i,s,1),i=yi(i,s,1),s=rn(),i!==null&&(si(i,1,s),mn(i,s))}function ft(i,s,l){if(i.tag===3)T_(i,i,l);else for(;s!==null;){if(s.tag===3){T_(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vi===null||!vi.has(h))){i=Go(l,i),i=zy(s,i,1),s=yi(s,i,1),i=rn(),s!==null&&(si(s,1,i),mn(s,i));break}}s=s.return}}function aS(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),s=rn(),i.pingedLanes|=i.suspendedLanes&l,bt===i&&(Ut&l)===l&&(Ct===4||Ct===3&&(Ut&130023424)===Ut&&500>Je()-Mf?xs(i,0):jf|=l),mn(i,s)}function S_(i,s){s===0&&((i.mode&1)===0?s=1:(s=wo,wo<<=1,(wo&130023424)===0&&(wo=4194304)));var l=rn();i=Br(i,s),i!==null&&(si(i,s,l),mn(i,l))}function lS(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),S_(i,l)}function uS(i,s){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),S_(i,l)}var A_;A_=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||hn.current)fn=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return fn=!1,Y0(i,s,l);fn=(i.flags&131072)!==0}else fn=!1,ot&&(s.flags&1048576)!==0&&iy(s,xc,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Uc(i,s),i=s.pendingProps;var p=Mo(s,Kt.current);Ko(s,l),p=gf(null,s,h,i,p,l);var y=yf();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dn(h)?(y=!0,Tc(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,uf(s),p.updater=Mc,s.stateNode=p,p._reactInternals=s,Tf(s,h,i,l),s=Pf(null,s,h,!0,y,l)):(s.tag=0,ot&&y&&Jd(s),nn(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Uc(i,s),i=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=hS(h),i=er(h,i),p){case 0:s=xf(null,s,h,i,l);break e;case 1:s=Xy(null,s,h,i,l);break e;case 11:s=Wy(null,s,h,i,l);break e;case 14:s=Gy(null,s,h,er(h.type,i),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:er(h,p),xf(i,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:er(h,p),Xy(i,s,h,p,l);case 3:e:{if(Jy(s),i===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,p=y.element,fy(i,s),Dc(s,h,null,l);var E=s.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Go(Error(t(423)),s),s=Zy(i,s,h,l,p);break e}else if(h!==p){p=Go(Error(t(424)),s),s=Zy(i,s,h,l,p);break e}else for(An=di(s.stateNode.containerInfo.firstChild),Sn=s,ot=!0,Zn=null,l=hy(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zo(),h===p){s=zr(i,s,l);break e}nn(i,s,h,l)}s=s.child}return s;case 5:return gy(s),i===null&&tf(s),h=s.type,p=s.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,Wd(h,p)?E=null:y!==null&&Wd(h,y)&&(s.flags|=32),Yy(i,s),nn(i,s,E,l),s.child;case 6:return i===null&&tf(s),null;case 13:return e_(i,s,l);case 4:return cf(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=qo(s,null,h,l):nn(i,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:er(h,p),Wy(i,s,h,p,l);case 7:return nn(i,s,s.pendingProps,l),s.child;case 8:return nn(i,s,s.pendingProps.children,l),s.child;case 12:return nn(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,y=s.memoizedProps,E=p.value,Ze(Cc,h._currentValue),h._currentValue=E,y!==null)if(Jn(y.value,E)){if(y.children===p.children&&!hn.current){s=zr(i,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){E=y.child;for(var V=P.firstContext;V!==null;){if(V.context===h){if(y.tag===1){V=Ur(-1,l&-l),V.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?V.next=V:(V.next=Z.next,Z.next=V),$.pending=V}}y.lanes|=l,V=y.alternate,V!==null&&(V.lanes|=l),af(y.return,l,s),P.lanes|=l;break}V=V.next}}else if(y.tag===10)E=y.type===s.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,P=E.alternate,P!==null&&(P.lanes|=l),af(E,l,s),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===s){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}nn(i,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Ko(s,l),p=Fn(p),h=h(p),s.flags|=1,nn(i,s,h,l),s.child;case 14:return h=s.type,p=er(h,s.pendingProps),p=er(h.type,p),Gy(i,s,h,p,l);case 15:return Qy(i,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:er(h,p),Uc(i,s),s.tag=1,dn(h)?(i=!0,Tc(s)):i=!1,Ko(s,l),My(s,h,p),Tf(s,h,p,l),Pf(null,s,h,!0,i,l);case 19:return n_(i,s,l);case 22:return Hy(i,s,l)}throw Error(t(156,s.tag))};function x_(i,s){return _o(i,s)}function cS(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(i,s,l,h){return new cS(i,s,l,h)}function Gf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hS(i){if(typeof i=="function")return Gf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===L)return 11;if(i===Te)return 14}return 2}function Ti(i,s){var l=i.alternate;return l===null?(l=Mn(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Jc(i,s,l,h,p,y){var E=2;if(h=i,typeof i=="function")Gf(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case D:return Rs(l.children,p,y,s);case x:E=8,p|=8;break;case A:return i=Mn(12,l,s,p|2),i.elementType=A,i.lanes=y,i;case R:return i=Mn(13,l,s,p),i.elementType=R,i.lanes=y,i;case le:return i=Mn(19,l,s,p),i.elementType=le,i.lanes=y,i;case Ce:return Zc(l,p,y,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:E=10;break e;case N:E=9;break e;case L:E=11;break e;case Te:E=14;break e;case xe:E=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Mn(E,l,s,p),s.elementType=i,s.type=h,s.lanes=y,s}function Rs(i,s,l,h){return i=Mn(7,i,h,s),i.lanes=l,i}function Zc(i,s,l,h){return i=Mn(22,i,h,s),i.elementType=Ce,i.lanes=l,i.stateNode={isHidden:!1},i}function Qf(i,s,l){return i=Mn(6,i,null,s),i.lanes=l,i}function Hf(i,s,l){return s=Mn(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function dS(i,s,l,h,p){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ii(0),this.expirationTimes=ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Yf(i,s,l,h,p,y,E,P,V){return i=new dS(i,s,l,P,V),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Mn(3,null,null,s),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},uf(y),i}function fS(i,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:h==null?null:""+h,children:i,containerInfo:s,implementation:l}}function P_(i){if(!i)return pi;i=i._reactInternals;e:{if(Kn(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(dn(l))return ty(i,l,s)}return s}function R_(i,s,l,h,p,y,E,P,V){return i=Yf(l,h,!0,i,p,y,E,P,V),i.context=P_(null),l=i.current,h=rn(),p=Ei(l),y=Ur(h,p),y.callback=s??null,yi(l,y,p),i.current.lanes=p,si(i,p,h),mn(i,h),i}function eh(i,s,l,h){var p=s.current,y=rn(),E=Ei(p);return l=P_(l),s.context===null?s.context=l:s.pendingContext=l,s=Ur(y,E),s.payload={element:i},h=h===void 0?null:h,h!==null&&(s.callback=h),i=yi(p,s,E),i!==null&&(rr(i,p,E,y),Vc(i,p,E)),E}function th(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function C_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Xf(i,s){C_(i,s),(i=i.alternate)&&C_(i,s)}function pS(){return null}var k_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Jf(i){this._internalRoot=i}nh.prototype.render=Jf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));eh(i,s,null,null)},nh.prototype.unmount=Jf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;As(function(){eh(null,i,null,null)}),s[Fr]=null}};function nh(i){this._internalRoot=i}nh.prototype.unstable_scheduleHydration=function(i){if(i){var s=nc();i={blockedOn:null,target:i,priority:s};for(var l=0;l<cr.length&&s!==0&&s<cr[l].priority;l++);cr.splice(l,0,i),l===0&&sc(i)}};function Zf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function rh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function V_(){}function mS(i,s,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var $=th(E);y.call($)}}var E=R_(s,h,i,0,null,!1,!1,"",V_);return i._reactRootContainer=E,i[Fr]=E.current,Il(i.nodeType===8?i.parentNode:i),As(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var P=h;h=function(){var $=th(V);P.call($)}}var V=Yf(i,0,!1,null,null,!1,!1,"",V_);return i._reactRootContainer=V,i[Fr]=V.current,Il(i.nodeType===8?i.parentNode:i),As(function(){eh(s,V,l,h)}),V}function ih(i,s,l,h,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var P=p;p=function(){var V=th(E);P.call(V)}}eh(s,E,i,p)}else E=mS(l,s,i,p,h);return th(E)}ec=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=ri(s.pendingLanes);l!==0&&(oi(s,l|1),mn(s,Je()),(Ue&6)===0&&(Yo=Je()+500,mi()))}break;case 13:As(function(){var h=Br(i,1);if(h!==null){var p=rn();rr(h,i,1,p)}}),Xf(i,1)}},Eo=function(i){if(i.tag===13){var s=Br(i,134217728);if(s!==null){var l=rn();rr(s,i,134217728,l)}Xf(i,134217728)}},tc=function(i){if(i.tag===13){var s=Ei(i),l=Br(i,s);if(l!==null){var h=rn();rr(l,i,s,h)}Xf(i,s)}},nc=function(){return Fe},rc=function(i,s){var l=Fe;try{return Fe=i,s()}finally{Fe=l}},ho=function(i,s,l){switch(s){case"input":if(Ga(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var p=Ec(h);if(!p)throw Error(t(90));so(h),Ga(h,p)}}}break;case"textarea":uo(i,l);break;case"select":s=l.value,s!=null&&Rr(i,!!l.multiple,s,!1)}},ss=$f,rl=As;var gS={usingClientEntryPoint:!1,Events:[Al,Lo,Ec,lr,nl,$f]},Ml={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yS={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ol(i),i===null?null:i.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||pS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{cs=sh.inject(yS),wn=sh}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gS,gn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(s))throw Error(t(200));return fS(i,s,null,l)},gn.createRoot=function(i,s){if(!Zf(i))throw Error(t(299));var l=!1,h="",p=k_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=Yf(i,1,!1,null,null,l,!1,h,p),i[Fr]=s.current,Il(i.nodeType===8?i.parentNode:i),new Jf(s)},gn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ol(s),i=i===null?null:i.stateNode,i},gn.flushSync=function(i){return As(i)},gn.hydrate=function(i,s,l){if(!rh(s))throw Error(t(200));return ih(null,i,s,!0,l)},gn.hydrateRoot=function(i,s,l){if(!Zf(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",E=k_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),s=R_(s,null,i,1,l??null,p,!1,y,E),i[Fr]=s.current,Il(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new nh(s)},gn.render=function(i,s,l){if(!rh(s))throw Error(t(200));return ih(null,i,s,!1,l)},gn.unmountComponentAtNode=function(i){if(!rh(i))throw Error(t(40));return i._reactRootContainer?(As(function(){ih(null,null,i,!1,function(){i._reactRootContainer=null,i[Fr]=null})}),!0):!1},gn.unstable_batchedUpdates=$f,gn.unstable_renderSubtreeIntoContainer=function(i,s,l,h){if(!rh(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ih(i,s,l,!1,h)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var M_;function zw(){if(M_)return np.exports;M_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),np.exports=xS(),np.exports}var B_;function PS(){if(B_)return oh;B_=1;var r=zw();return oh.createRoot=r.createRoot,oh.hydrateRoot=r.hydrateRoot,oh}var RS=PS();const CS=Bw(RS);zw();function uu(){return uu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},uu.apply(this,arguments)}var ki;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ki||(ki={}));const U_="popstate";function kS(r){r===void 0&&(r={});function e(n,o){let{pathname:a,search:u,hash:d}=n.location;return vp("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(n,o){return typeof o=="string"?o:xh(o)}return DS(e,t,null,r)}function dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function im(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VS(){return Math.random().toString(36).substr(2,8)}function z_(r,e){return{usr:r.state,key:r.key,idx:e}}function vp(r,e,t,n){return t===void 0&&(t=null),uu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Fa(e):e,{state:t,key:e&&e.key||n||VS()})}function xh(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function DS(r,e,t,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,u=o.history,d=ki.Pop,f=null,m=v();m==null&&(m=0,u.replaceState(uu({},u.state,{idx:m}),""));function v(){return(u.state||{idx:null}).idx}function w(){d=ki.Pop;let O=v(),te=O==null?null:O-m;m=O,f&&f({action:d,location:F.location,delta:te})}function T(O,te){d=ki.Push;let ee=vp(F.location,O,te);m=v()+1;let G=z_(ee,m),ne=F.createHref(ee);try{u.pushState(G,"",ne)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(ne)}a&&f&&f({action:d,location:F.location,delta:1})}function C(O,te){d=ki.Replace;let ee=vp(F.location,O,te);m=v();let G=z_(ee,m),ne=F.createHref(ee);u.replaceState(G,"",ne),a&&f&&f({action:d,location:F.location,delta:0})}function U(O){let te=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof O=="string"?O:xh(O);return ee=ee.replace(/ $/,"%20"),dt(te,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,te)}let F={get action(){return d},get location(){return r(o,u)},listen(O){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(U_,w),f=O,()=>{o.removeEventListener(U_,w),f=null}},createHref(O){return e(o,O)},createURL:U,encodeLocation(O){let te=U(O);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:T,replace:C,go(O){return u.go(O)}};return F}var q_;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(q_||(q_={}));function NS(r,e,t){return t===void 0&&(t="/"),bS(r,e,t)}function bS(r,e,t,n){let o=typeof e=="string"?Fa(e):e,a=da(o.pathname||"/",t);if(a==null)return null;let u=qw(r);OS(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=WS(a);d=$S(u[f],m)}return d}function qw(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(dt(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let m=Ni([n,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(dt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),qw(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:zS(m,a.index),routesMeta:v})};return r.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of $w(a.path))o(a,u,f)}),e}function $w(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return o?[a,""]:[a];let u=$w(n.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>r.startsWith("/")&&f===""?"/":f)}function OS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qS(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const FS=/^:[\w-]+$/,LS=3,jS=2,MS=1,BS=10,US=-2,$_=r=>r==="*";function zS(r,e){let t=r.split("/"),n=t.length;return t.some($_)&&(n+=US),e&&(n+=jS),t.filter(o=>!$_(o)).reduce((o,a)=>o+(FS.test(a)?LS:a===""?MS:BS),n)}function qS(r,e){return r.length===e.length&&r.slice(0,-1).every((n,o)=>n===e[o])?r[r.length-1]-e[e.length-1]:0}function $S(r,e,t){let{routesMeta:n}=r,o={},a="/",u=[];for(let d=0;d<n.length;++d){let f=n[d],m=d===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=wp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Ni([a,w.pathname]),pathnameBase:XS(Ni([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=Ni([a,w.pathnameBase]))}return u}function wp(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=KS(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:n.reduce((m,v,w)=>{let{paramName:T,isOptional:C}=v;if(T==="*"){let F=d[w]||"";u=a.slice(0,a.length-F.length).replace(/(.)\/+$/,"$1")}const U=d[w];return C&&!U?m[T]=void 0:m[T]=(U||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:r}}function KS(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),im(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),n]}function WS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return im(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function da(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const GS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QS=r=>GS.test(r);function HS(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:o=""}=typeof r=="string"?Fa(r):r,a;if(t)if(QS(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),im(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=K_(t.substring(1),"/"):a=K_(t,e)}else a=e;return{pathname:a,search:JS(n),hash:ZS(o)}}function K_(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function sp(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YS(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sm(r,e){let t=YS(r);return e?t.map((n,o)=>o===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function om(r,e,t,n){n===void 0&&(n=!1);let o;typeof r=="string"?o=Fa(r):(o=uu({},r),dt(!o.pathname||!o.pathname.includes("?"),sp("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),sp("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),sp("#","search","hash",o)));let a=r===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!n&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=HS(o,d),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}const Ni=r=>r.join("/").replace(/\/\/+/g,"/"),XS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),JS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ZS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function eA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Kw=["post","put","patch","delete"];new Set(Kw);const tA=["get",...Kw];new Set(tA);function cu(){return cu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},cu.apply(this,arguments)}const Xh=H.createContext(null),Ww=H.createContext(null),Hr=H.createContext(null),Jh=H.createContext(null),Qi=H.createContext({outlet:null,matches:[],isDataRoute:!1}),Gw=H.createContext(null);function nA(r,e){let{relative:t}=e===void 0?{}:e;La()||dt(!1);let{basename:n,navigator:o}=H.useContext(Hr),{hash:a,pathname:u,search:d}=Zh(r,{relative:t}),f=u;return n!=="/"&&(f=u==="/"?n:Ni([n,u])),o.createHref({pathname:f,search:d,hash:a})}function La(){return H.useContext(Jh)!=null}function Zs(){return La()||dt(!1),H.useContext(Jh).location}function Qw(r){H.useContext(Hr).static||H.useLayoutEffect(r)}function Hw(){let{isDataRoute:r}=H.useContext(Qi);return r?mA():rA()}function rA(){La()||dt(!1);let r=H.useContext(Xh),{basename:e,future:t,navigator:n}=H.useContext(Hr),{matches:o}=H.useContext(Qi),{pathname:a}=Zs(),u=JSON.stringify(sm(o,t.v7_relativeSplatPath)),d=H.useRef(!1);return Qw(()=>{d.current=!0}),H.useCallback(function(m,v){if(v===void 0&&(v={}),!d.current)return;if(typeof m=="number"){n.go(m);return}let w=om(m,JSON.parse(u),a,v.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ni([e,w.pathname])),(v.replace?n.replace:n.push)(w,v.state,v)},[e,n,u,a,r])}function Zh(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=H.useContext(Hr),{matches:o}=H.useContext(Qi),{pathname:a}=Zs(),u=JSON.stringify(sm(o,n.v7_relativeSplatPath));return H.useMemo(()=>om(r,JSON.parse(u),a,t==="path"),[r,u,a,t])}function iA(r,e){return sA(r,e)}function sA(r,e,t,n){La()||dt(!1);let{navigator:o}=H.useContext(Hr),{matches:a}=H.useContext(Qi),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Zs(),v;if(e){var w;let O=typeof e=="string"?Fa(e):e;f==="/"||(w=O.pathname)!=null&&w.startsWith(f)||dt(!1),v=O}else v=m;let T=v.pathname||"/",C=T;if(f!=="/"){let O=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(O.length).join("/")}let U=NS(r,{pathname:C}),F=cA(U&&U.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:Ni([f,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?f:Ni([f,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),a,t,n);return e&&F?H.createElement(Jh.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ki.Pop}},F):F}function oA(){let r=pA(),e=eA(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,null)}const aA=H.createElement(oA,null);class lA extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Qi.Provider,{value:this.props.routeContext},H.createElement(Gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uA(r){let{routeContext:e,match:t,children:n}=r,o=H.useContext(Xh);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Qi.Provider,{value:e},n)}function cA(r,e,t,n){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var a;if(!t)return null;if(t.errors)r=t.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let u=r,d=(o=t)==null?void 0:o.errors;if(d!=null){let v=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);v>=0||dt(!1),u=u.slice(0,Math.min(u.length,v+1))}let f=!1,m=-1;if(t&&n&&n.v7_partialHydration)for(let v=0;v<u.length;v++){let w=u[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=v),w.route.id){let{loaderData:T,errors:C}=t,U=w.route.loader&&T[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||U){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((v,w,T)=>{let C,U=!1,F=null,O=null;t&&(C=d&&w.route.id?d[w.route.id]:void 0,F=w.route.errorElement||aA,f&&(m<0&&T===0?(gA("route-fallback"),U=!0,O=null):m===T&&(U=!0,O=w.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,T+1)),ee=()=>{let G;return C?G=F:U?G=O:w.route.Component?G=H.createElement(w.route.Component,null):w.route.element?G=w.route.element:G=v,H.createElement(uA,{match:w,routeContext:{outlet:v,matches:te,isDataRoute:t!=null},children:G})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?H.createElement(lA,{location:t.location,revalidation:t.revalidation,component:F,error:C,children:ee(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):ee()},null)}var Yw=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Yw||{}),Xw=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Xw||{});function hA(r){let e=H.useContext(Xh);return e||dt(!1),e}function dA(r){let e=H.useContext(Ww);return e||dt(!1),e}function fA(r){let e=H.useContext(Qi);return e||dt(!1),e}function Jw(r){let e=fA(),t=e.matches[e.matches.length-1];return t.route.id||dt(!1),t.route.id}function pA(){var r;let e=H.useContext(Gw),t=dA(),n=Jw();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function mA(){let{router:r}=hA(Yw.UseNavigateStable),e=Jw(Xw.UseNavigateStable),t=H.useRef(!1);return Qw(()=>{t.current=!0}),H.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,cu({fromRouteId:e},a)))},[r,e])}const W_={};function gA(r,e,t){W_[r]||(W_[r]=!0)}function yA(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function _A(r){let{to:e,replace:t,state:n,relative:o}=r;La()||dt(!1);let{future:a,static:u}=H.useContext(Hr),{matches:d}=H.useContext(Qi),{pathname:f}=Zs(),m=Hw(),v=om(e,sm(d,a.v7_relativeSplatPath),f,o==="path"),w=JSON.stringify(v);return H.useEffect(()=>m(JSON.parse(w),{replace:t,state:n,relative:o}),[m,w,o,t,n]),null}function ks(r){dt(!1)}function vA(r){let{basename:e="/",children:t=null,location:n,navigationType:o=ki.Pop,navigator:a,static:u=!1,future:d}=r;La()&&dt(!1);let f=e.replace(/^\/*/,"/"),m=H.useMemo(()=>({basename:f,navigator:a,static:u,future:cu({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof n=="string"&&(n=Fa(n));let{pathname:v="/",search:w="",hash:T="",state:C=null,key:U="default"}=n,F=H.useMemo(()=>{let O=da(v,f);return O==null?null:{location:{pathname:O,search:w,hash:T,state:C,key:U},navigationType:o}},[f,v,w,T,C,U,o]);return F==null?null:H.createElement(Hr.Provider,{value:m},H.createElement(Jh.Provider,{children:t,value:F}))}function wA(r){let{children:e,location:t}=r;return iA(Ep(e),t)}new Promise(()=>{});function Ep(r,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(r,(n,o)=>{if(!H.isValidElement(n))return;let a=[...e,o];if(n.type===H.Fragment){t.push.apply(t,Ep(n.props.children,a));return}n.type!==ks&&dt(!1),!n.props.index||!n.props.children||dt(!1);let u={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=Ep(n.props.children,a)),t.push(u)}),t}function Ph(){return Ph=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ph.apply(this,arguments)}function Zw(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function EA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function IA(r,e){return r.button===0&&(!e||e==="_self")&&!EA(r)}const TA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],AA="6";try{window.__reactRouterVersion=AA}catch{}const xA=H.createContext({isTransitioning:!1}),PA="startTransition",G_=TS[PA];function RA(r){let{basename:e,children:t,future:n,window:o}=r,a=H.useRef();a.current==null&&(a.current=kS({window:o,v5Compat:!0}));let u=a.current,[d,f]=H.useState({action:u.action,location:u.location}),{v7_startTransition:m}=n||{},v=H.useCallback(w=>{m&&G_?G_(()=>f(w)):f(w)},[f,m]);return H.useLayoutEffect(()=>u.listen(v),[u,v]),H.useEffect(()=>yA(n),[n]),H.createElement(vA,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:n})}const CA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rh=H.forwardRef(function(e,t){let{onClick:n,relative:o,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w}=e,T=Zw(e,TA),{basename:C}=H.useContext(Hr),U,F=!1;if(typeof m=="string"&&kA.test(m)&&(U=m,CA))try{let G=new URL(window.location.href),ne=m.startsWith("//")?new URL(G.protocol+m):new URL(m),_e=da(ne.pathname,C);ne.origin===G.origin&&_e!=null?m=_e+ne.search+ne.hash:F=!0}catch{}let O=nA(m,{relative:o}),te=NA(m,{replace:u,state:d,target:f,preventScrollReset:v,relative:o,viewTransition:w});function ee(G){n&&n(G),G.defaultPrevented||te(G)}return H.createElement("a",Ph({},T,{href:U||O,onClick:F||a?n:ee,ref:t,target:f}))}),VA=H.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:o=!1,className:a="",end:u=!1,style:d,to:f,viewTransition:m,children:v}=e,w=Zw(e,SA),T=Zh(f,{relative:w.relative}),C=Zs(),U=H.useContext(Ww),{navigator:F,basename:O}=H.useContext(Hr),te=U!=null&&bA(T)&&m===!0,ee=F.encodeLocation?F.encodeLocation(T).pathname:T.pathname,G=C.pathname,ne=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;o||(G=G.toLowerCase(),ne=ne?ne.toLowerCase():null,ee=ee.toLowerCase()),ne&&O&&(ne=da(ne,O)||ne);const _e=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let pe=G===ee||!u&&G.startsWith(ee)&&G.charAt(_e)==="/",D=ne!=null&&(ne===ee||!u&&ne.startsWith(ee)&&ne.charAt(ee.length)==="/"),x={isActive:pe,isPending:D,isTransitioning:te},A=pe?n:void 0,k;typeof a=="function"?k=a(x):k=[a,pe?"active":null,D?"pending":null,te?"transitioning":null].filter(Boolean).join(" ");let N=typeof d=="function"?d(x):d;return H.createElement(Rh,Ph({},w,{"aria-current":A,className:k,ref:t,style:N,to:f,viewTransition:m}),typeof v=="function"?v(x):v)});var Ip;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Ip||(Ip={}));var Q_;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Q_||(Q_={}));function DA(r){let e=H.useContext(Xh);return e||dt(!1),e}function NA(r,e){let{target:t,replace:n,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=Hw(),m=Zs(),v=Zh(r,{relative:u});return H.useCallback(w=>{if(IA(w,t)){w.preventDefault();let T=n!==void 0?n:xh(m)===xh(v);f(r,{replace:T,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[m,f,v,n,o,t,r,a,u,d])}function bA(r,e){e===void 0&&(e={});let t=H.useContext(xA);t==null&&dt(!1);let{basename:n}=DA(Ip.useViewTransitionState),o=Zh(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=da(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=da(t.nextLocation.pathname,n)||t.nextLocation.pathname;return wp(o.pathname,u)!=null||wp(o.pathname,a)!=null}const OA=()=>{};var H_={};const eE=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FA=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[t++],u=r[t++],d=r[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],u=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const a=r[o],u=o+1<r.length,d=u?r[o+1]:0,f=o+2<r.length,m=f?r[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,C=m&63;f||(C=64,u||(T=64)),n.push(t[v],t[w],t[T],t[C])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):FA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const a=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const m=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new LA;const T=a<<2|d>>4;if(n.push(T),m!==64){const C=d<<4&240|m>>2;if(n.push(C),w!==64){const U=m<<6&192|w;n.push(U)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class LA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(r){const e=eE(r);return tE.encodeByteArray(e,!0)},Ch=function(r){return jA(r).replace(/\./g,"")},nE=function(r){try{return tE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kh(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!MA(t)||(r[t]=kh(r[t],e[t]));return r}function MA(r){return r!=="__proto__"}function am(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const BA=()=>am().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof H_>"u")return;const r=H_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nE(r[1]);return e&&JSON.parse(e)},rE=()=>{try{return OA()||BA()||UA()||zA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iE=()=>{var r;return(r=rE())===null||r===void 0?void 0:r.config};class qA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function lm(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $A(r){return(await fetch(r,{credentials:"include"})).ok}function KA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ch(JSON.stringify(t)),Ch(JSON.stringify(u)),""].join(".")}const Zl={};function WA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Zl))Zl[e]?r.emulator.push(e):r.prod.push(e);return r}function GA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Y_=!1;function QA(r,e){if(typeof window>"u"||typeof document>"u"||!lm(window.location.host)||Zl[r]===e||Zl[r]||Y_)return;Zl[r]=e;function t(T){return`__firebase__banner__${T}`}const n="__firebase__banner",a=WA().prod.length>0;function u(){const T=document.getElementById(n);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Y_=!0,u()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=GA(n),C=t("text"),U=document.getElementById(C)||document.createElement("span"),F=t("learnmore"),O=document.getElementById(F)||document.createElement("a"),te=t("preprendIcon"),ee=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;d(G),v(O,F);const ne=m();f(ee,te),G.append(ee,U,O,ne),document.body.appendChild(G)}a?(U.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Vh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sE(){var r;const e=(r=rE())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){return typeof window<"u"||oE()}function oE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function aE(){return!sE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lE(){return!sE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uE(){try{return typeof indexedDB=="object"}catch{return!1}}function YA(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}const XA="FirebaseError";class eo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=XA,Object.setPrototypeOf(this,eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ed.prototype.create)}}class ed{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?JA(a,n):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new eo(o,d,n)}}function JA(r,e){return r.replace(ZA,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const ZA=/\{\$([^}]+)}/g;function X_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function fa(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const a=r[o],u=e[o];if(J_(a)&&J_(u)){if(!fa(a,u))return!1}else if(a!==u)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function J_(r){return r!==null&&typeof r=="object"}function e1(r,e){const t=new t1(r,e);return t.subscribe.bind(t)}class t1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");n1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=op),o.error===void 0&&(o.error=op),o.complete===void 0&&(o.complete=op);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function op(){}function St(r){return r&&r._delegate?r._delegate:r}class qs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Vs="[DEFAULT]";class r1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new qA;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});n.resolve(a)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);n===d&&u.resolve(o)}return o}onInit(e,t){var n;const o=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(o))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(r){return r===Vs?void 0:r}function s1(r){return r.instantiationMode==="EAGER"}class cE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new r1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const um=[];var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const hE={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},o1=Le.INFO,a1={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},l1=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=a1[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=o1,this._logHandler=l1,this._userLogHandler=null,um.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}function u1(r){um.forEach(e=>{e.setLogLevel(r)})}function c1(r,e){for(const t of um){let n=null;e&&e.level&&(n=hE[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(o,a,...u)=>{const d=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(n??o.logLevel)&&r({level:Le[a].toLowerCase(),message:d,args:u,type:o.name})}}}const h1=(r,e)=>e.some(t=>r instanceof t);let Z_,ev;function d1(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f1(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Tp=new WeakMap,fE=new WeakMap,ap=new WeakMap,hm=new WeakMap;function p1(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(bi(r.result)),o()},u=()=>{n(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,r)}).catch(()=>{}),hm.set(e,r),e}function m1(r){if(Tp.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});Tp.set(r,e)}let Sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Tp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||fE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function g1(r){Sp=r(Sp)}function y1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(lp(this),e,...t);return fE.set(n,e.sort?e.sort():[e]),bi(n)}:f1().includes(r)?function(...e){return r.apply(lp(this),e),bi(dE.get(this))}:function(...e){return bi(r.apply(lp(this),e))}}function _1(r){return typeof r=="function"?y1(r):(r instanceof IDBTransaction&&m1(r),h1(r,d1())?new Proxy(r,Sp):r)}function bi(r){if(r instanceof IDBRequest)return p1(r);if(ap.has(r))return ap.get(r);const e=_1(r);return e!==r&&(ap.set(r,e),hm.set(e,r)),e}const lp=r=>hm.get(r);function v1(r,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){const u=indexedDB.open(r,e),d=bi(u);return n&&u.addEventListener("upgradeneeded",f=>{n(bi(u.result),f.oldVersion,f.newVersion,bi(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const w1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],up=new Map;function tv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=E1.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||w1.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return n&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return up.set(e,a),a}g1(r=>({...r,get:(e,t,n)=>tv(e,t)||r.get(e,t,n),has:(e,t)=>!!tv(e,t)||r.has(e,t)}));class I1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T1(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function T1(r){const e=r.getComponent();return e?.type==="VERSION"}const Dh="@firebase/app",Ap="0.13.2";const Wr=new cm("@firebase/app"),S1="@firebase/app-compat",A1="@firebase/analytics-compat",x1="@firebase/analytics",P1="@firebase/app-check-compat",R1="@firebase/app-check",C1="@firebase/auth",k1="@firebase/auth-compat",V1="@firebase/database",D1="@firebase/data-connect",N1="@firebase/database-compat",b1="@firebase/functions",O1="@firebase/functions-compat",F1="@firebase/installations",L1="@firebase/installations-compat",j1="@firebase/messaging",M1="@firebase/messaging-compat",B1="@firebase/performance",U1="@firebase/performance-compat",z1="@firebase/remote-config",q1="@firebase/remote-config-compat",$1="@firebase/storage",K1="@firebase/storage-compat",W1="@firebase/firestore",G1="@firebase/ai",Q1="@firebase/firestore-compat",H1="firebase",Y1="11.10.0";const ji="[DEFAULT]",X1={[Dh]:"fire-core",[S1]:"fire-core-compat",[x1]:"fire-analytics",[A1]:"fire-analytics-compat",[R1]:"fire-app-check",[P1]:"fire-app-check-compat",[C1]:"fire-auth",[k1]:"fire-auth-compat",[V1]:"fire-rtdb",[D1]:"fire-data-connect",[N1]:"fire-rtdb-compat",[b1]:"fire-fn",[O1]:"fire-fn-compat",[F1]:"fire-iid",[L1]:"fire-iid-compat",[j1]:"fire-fcm",[M1]:"fire-fcm-compat",[B1]:"fire-perf",[U1]:"fire-perf-compat",[z1]:"fire-rc",[q1]:"fire-rc-compat",[$1]:"fire-gcs",[K1]:"fire-gcs-compat",[W1]:"fire-fst",[Q1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[H1]:"fire-js-all"};const Mi=new Map,pa=new Map,ma=new Map;function hu(r,e){try{r.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function pE(r,e){r.container.addOrOverwriteComponent(e)}function ga(r){const e=r.name;if(ma.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;ma.set(e,r);for(const t of Mi.values())hu(t,r);for(const t of pa.values())hu(t,r);return!0}function mE(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function J1(r,e,t=ji){mE(r,e).clearInstance(t)}function gE(r){return r.options!==void 0}function yE(r){return r==null?!1:r.settings!==void 0}function Z1(){ma.clear()}const ex={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new ed("app","Firebase",ex);let _E=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}};function nv(r,e){const t=nE(r.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(t).exp*1e3,a=new Date().getTime();o-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class tx extends _E{constructor(e,t,n,o){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:n,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,u,o);else{const d=e;super(d.options,u,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._serverConfig.authIdToken&&nv(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&nv(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Kr(Dh,Ap,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){pm(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Un.create("server-app-deleted")}}const dm=Y1;function fm(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ji,automaticDataCollectionEnabled:!0},e),o=n.name;if(typeof o!="string"||!o)throw Un.create("bad-app-name",{appName:String(o)});if(t||(t=iE()),!t)throw Un.create("no-options");const a=Mi.get(o);if(a){if(fa(t,a.options)&&fa(n,a.config))return a;throw Un.create("duplicate-app",{appName:o})}const u=new cE(o);for(const f of ma.values())u.addComponent(f);const d=new _E(t,n,u);return Mi.set(o,d),d}function nx(r,e){if(HA()&&!oE())throw Un.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let t;gE(r)?t=r.options:t=r;const n=Object.assign(Object.assign({},e),t);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;const o=m=>[...m].reduce((v,w)=>Math.imul(31,v)+w.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Un.create("finalization-registry-not-supported",{});const a=""+o(JSON.stringify(n)),u=pa.get(a);if(u)return u.incRefCount(e.releaseOnDeref),u;const d=new cE(a);for(const m of ma.values())d.addComponent(m);const f=new tx(t,e,a,d);return pa.set(a,f),f}function rx(r=ji){const e=Mi.get(r);if(!e&&r===ji&&iE())return fm();if(!e)throw Un.create("no-app",{appName:r});return e}function ix(){return Array.from(Mi.values())}async function pm(r){let e=!1;const t=r.name;Mi.has(t)?(e=!0,Mi.delete(t)):pa.has(t)&&r.decRefCount()<=0&&(pa.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)}function Kr(r,e,t){var n;let o=(n=X1[r])!==null&&n!==void 0?n:r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(d.join(" "));return}ga(new qs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}function vE(r,e){if(r!==null&&typeof r!="function")throw Un.create("invalid-log-argument");c1(r,e)}function wE(r){u1(r)}const sx="firebase-heartbeat-database",ox=1,du="firebase-heartbeat-store";let cp=null;function EE(){return cp||(cp=v1(sx,ox,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(du)}catch(t){console.warn(t)}}}}).catch(r=>{throw Un.create("idb-open",{originalErrorMessage:r.message})})),cp}async function ax(r){try{const t=(await EE()).transaction(du),n=await t.objectStore(du).get(IE(r));return await t.done,n}catch(e){if(e instanceof eo)Wr.warn(e.message);else{const t=Un.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(t.message)}}}async function rv(r,e){try{const n=(await EE()).transaction(du,"readwrite");await n.objectStore(du).put(e,IE(r)),await n.done}catch(t){if(t instanceof eo)Wr.warn(t.message);else{const n=Un.create("idb-set",{originalErrorMessage:t?.message});Wr.warn(n.message)}}}function IE(r){return`${r.name}!${r.options.appId}`}const lx=1024,ux=30;class cx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dx(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=iv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>ux){const u=fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Wr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iv(),{heartbeatsToSend:n,unsentEntries:o}=hx(this._heartbeatsCache.heartbeats),a=Ch(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Wr.warn(t),""}}}function iv(){return new Date().toISOString().substring(0,10)}function hx(r,e=lx){const t=[];let n=r.slice();for(const o of r){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),sv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sv(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class dx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uE()?YA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ax(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return rv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return rv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function sv(r){return Ch(JSON.stringify({version:2,heartbeats:r})).length}function fx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function px(r){ga(new qs("platform-logger",e=>new I1(e),"PRIVATE")),ga(new qs("heartbeat",e=>new cx(e),"PRIVATE")),Kr(Dh,Ap,r),Kr(Dh,Ap,"esm2017"),Kr("fire-js","")}px("");const mx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:eo,SDK_VERSION:dm,_DEFAULT_ENTRY_NAME:ji,_addComponent:hu,_addOrOverwriteComponent:pE,_apps:Mi,_clearComponents:Z1,_components:ma,_getProvider:mE,_isFirebaseApp:gE,_isFirebaseServerApp:yE,_registerComponent:ga,_removeServiceInstance:J1,_serverApps:pa,deleteApp:pm,getApp:rx,getApps:ix,initializeApp:fm,initializeServerApp:nx,onLog:vE,registerVersion:Kr,setLogLevel:wE},Symbol.toStringTag,{value:"Module"}));class gx{constructor(e,t){this._delegate=e,this.firebase=t,hu(e,new qs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),pm(this._delegate)))}_getService(e,t=ji){var n;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(e);return!o.isInitialized()&&((n=o.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:t})}_removeServiceInstance(e,t=ji){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){hu(this._delegate,e)}_addOrOverwriteComponent(e){pE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const yx={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ov=new ed("app-compat","Firebase",yx);function _x(r){const e={},t={__esModule:!0,initializeApp:a,app:o,registerVersion:Kr,setLogLevel:wE,onLog:vE,apps:null,SDK_VERSION:dm,INTERNAL:{registerComponent:d,removeApp:n,useAsService:f,modularAPIs:mx}};t.default=t,Object.defineProperty(t,"apps",{get:u});function n(m){delete e[m]}function o(m){if(m=m||ji,!X_(e,m))throw ov.create("no-app",{appName:m});return e[m]}o.App=r;function a(m,v={}){const w=fm(m,v);if(X_(e,w.name))return e[w.name];const T=new r(w,t);return e[w.name]=T,T}function u(){return Object.keys(e).map(m=>e[m])}function d(m){const v=m.name,w=v.replace("-compat","");if(ga(m)&&m.type==="PUBLIC"){const T=(C=o())=>{if(typeof C[w]!="function")throw ov.create("invalid-app-argument",{appName:v});return C[w]()};m.serviceProps!==void 0&&kh(T,m.serviceProps),t[w]=T,r.prototype[w]=function(...C){return this._getService.bind(this,v).apply(this,m.multipleInstances?C:[])}}return m.type==="PUBLIC"?t[w]:null}function f(m,v){return v==="serverAuth"?null:v}return t}function TE(){const r=_x(gx);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:TE,extendNamespace:e,createSubscribe:e1,ErrorFactory:ed,deepExtend:kh});function e(t){kh(r,t)}return r}const vx=TE();const av=new cm("@firebase/app-compat"),wx="@firebase/app-compat",Ex="0.4.2";function Ix(r){Kr(wx,Ex,r)}try{const r=am();if(r.firebase!==void 0){av.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&av.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Nh=vx;Ix();var Tx="firebase",Sx="11.10.0";Nh.registerVersion(Tx,Sx,"app-compat");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Oi,SE;(function(){var r;function e(D,x){function A(){}A.prototype=x.prototype,D.D=x.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(k,N,L){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return x.prototype[N].apply(k,R)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,x,A){A||(A=0);var k=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)k[N]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=D.g[0],A=D.g[1],N=D.g[2];var L=D.g[3],R=x+(L^A&(N^L))+k[0]+3614090360&4294967295;x=A+(R<<7&4294967295|R>>>25),R=L+(N^x&(A^N))+k[1]+3905402710&4294967295,L=x+(R<<12&4294967295|R>>>20),R=N+(A^L&(x^A))+k[2]+606105819&4294967295,N=L+(R<<17&4294967295|R>>>15),R=A+(x^N&(L^x))+k[3]+3250441966&4294967295,A=N+(R<<22&4294967295|R>>>10),R=x+(L^A&(N^L))+k[4]+4118548399&4294967295,x=A+(R<<7&4294967295|R>>>25),R=L+(N^x&(A^N))+k[5]+1200080426&4294967295,L=x+(R<<12&4294967295|R>>>20),R=N+(A^L&(x^A))+k[6]+2821735955&4294967295,N=L+(R<<17&4294967295|R>>>15),R=A+(x^N&(L^x))+k[7]+4249261313&4294967295,A=N+(R<<22&4294967295|R>>>10),R=x+(L^A&(N^L))+k[8]+1770035416&4294967295,x=A+(R<<7&4294967295|R>>>25),R=L+(N^x&(A^N))+k[9]+2336552879&4294967295,L=x+(R<<12&4294967295|R>>>20),R=N+(A^L&(x^A))+k[10]+4294925233&4294967295,N=L+(R<<17&4294967295|R>>>15),R=A+(x^N&(L^x))+k[11]+2304563134&4294967295,A=N+(R<<22&4294967295|R>>>10),R=x+(L^A&(N^L))+k[12]+1804603682&4294967295,x=A+(R<<7&4294967295|R>>>25),R=L+(N^x&(A^N))+k[13]+4254626195&4294967295,L=x+(R<<12&4294967295|R>>>20),R=N+(A^L&(x^A))+k[14]+2792965006&4294967295,N=L+(R<<17&4294967295|R>>>15),R=A+(x^N&(L^x))+k[15]+1236535329&4294967295,A=N+(R<<22&4294967295|R>>>10),R=x+(N^L&(A^N))+k[1]+4129170786&4294967295,x=A+(R<<5&4294967295|R>>>27),R=L+(A^N&(x^A))+k[6]+3225465664&4294967295,L=x+(R<<9&4294967295|R>>>23),R=N+(x^A&(L^x))+k[11]+643717713&4294967295,N=L+(R<<14&4294967295|R>>>18),R=A+(L^x&(N^L))+k[0]+3921069994&4294967295,A=N+(R<<20&4294967295|R>>>12),R=x+(N^L&(A^N))+k[5]+3593408605&4294967295,x=A+(R<<5&4294967295|R>>>27),R=L+(A^N&(x^A))+k[10]+38016083&4294967295,L=x+(R<<9&4294967295|R>>>23),R=N+(x^A&(L^x))+k[15]+3634488961&4294967295,N=L+(R<<14&4294967295|R>>>18),R=A+(L^x&(N^L))+k[4]+3889429448&4294967295,A=N+(R<<20&4294967295|R>>>12),R=x+(N^L&(A^N))+k[9]+568446438&4294967295,x=A+(R<<5&4294967295|R>>>27),R=L+(A^N&(x^A))+k[14]+3275163606&4294967295,L=x+(R<<9&4294967295|R>>>23),R=N+(x^A&(L^x))+k[3]+4107603335&4294967295,N=L+(R<<14&4294967295|R>>>18),R=A+(L^x&(N^L))+k[8]+1163531501&4294967295,A=N+(R<<20&4294967295|R>>>12),R=x+(N^L&(A^N))+k[13]+2850285829&4294967295,x=A+(R<<5&4294967295|R>>>27),R=L+(A^N&(x^A))+k[2]+4243563512&4294967295,L=x+(R<<9&4294967295|R>>>23),R=N+(x^A&(L^x))+k[7]+1735328473&4294967295,N=L+(R<<14&4294967295|R>>>18),R=A+(L^x&(N^L))+k[12]+2368359562&4294967295,A=N+(R<<20&4294967295|R>>>12),R=x+(A^N^L)+k[5]+4294588738&4294967295,x=A+(R<<4&4294967295|R>>>28),R=L+(x^A^N)+k[8]+2272392833&4294967295,L=x+(R<<11&4294967295|R>>>21),R=N+(L^x^A)+k[11]+1839030562&4294967295,N=L+(R<<16&4294967295|R>>>16),R=A+(N^L^x)+k[14]+4259657740&4294967295,A=N+(R<<23&4294967295|R>>>9),R=x+(A^N^L)+k[1]+2763975236&4294967295,x=A+(R<<4&4294967295|R>>>28),R=L+(x^A^N)+k[4]+1272893353&4294967295,L=x+(R<<11&4294967295|R>>>21),R=N+(L^x^A)+k[7]+4139469664&4294967295,N=L+(R<<16&4294967295|R>>>16),R=A+(N^L^x)+k[10]+3200236656&4294967295,A=N+(R<<23&4294967295|R>>>9),R=x+(A^N^L)+k[13]+681279174&4294967295,x=A+(R<<4&4294967295|R>>>28),R=L+(x^A^N)+k[0]+3936430074&4294967295,L=x+(R<<11&4294967295|R>>>21),R=N+(L^x^A)+k[3]+3572445317&4294967295,N=L+(R<<16&4294967295|R>>>16),R=A+(N^L^x)+k[6]+76029189&4294967295,A=N+(R<<23&4294967295|R>>>9),R=x+(A^N^L)+k[9]+3654602809&4294967295,x=A+(R<<4&4294967295|R>>>28),R=L+(x^A^N)+k[12]+3873151461&4294967295,L=x+(R<<11&4294967295|R>>>21),R=N+(L^x^A)+k[15]+530742520&4294967295,N=L+(R<<16&4294967295|R>>>16),R=A+(N^L^x)+k[2]+3299628645&4294967295,A=N+(R<<23&4294967295|R>>>9),R=x+(N^(A|~L))+k[0]+4096336452&4294967295,x=A+(R<<6&4294967295|R>>>26),R=L+(A^(x|~N))+k[7]+1126891415&4294967295,L=x+(R<<10&4294967295|R>>>22),R=N+(x^(L|~A))+k[14]+2878612391&4294967295,N=L+(R<<15&4294967295|R>>>17),R=A+(L^(N|~x))+k[5]+4237533241&4294967295,A=N+(R<<21&4294967295|R>>>11),R=x+(N^(A|~L))+k[12]+1700485571&4294967295,x=A+(R<<6&4294967295|R>>>26),R=L+(A^(x|~N))+k[3]+2399980690&4294967295,L=x+(R<<10&4294967295|R>>>22),R=N+(x^(L|~A))+k[10]+4293915773&4294967295,N=L+(R<<15&4294967295|R>>>17),R=A+(L^(N|~x))+k[1]+2240044497&4294967295,A=N+(R<<21&4294967295|R>>>11),R=x+(N^(A|~L))+k[8]+1873313359&4294967295,x=A+(R<<6&4294967295|R>>>26),R=L+(A^(x|~N))+k[15]+4264355552&4294967295,L=x+(R<<10&4294967295|R>>>22),R=N+(x^(L|~A))+k[6]+2734768916&4294967295,N=L+(R<<15&4294967295|R>>>17),R=A+(L^(N|~x))+k[13]+1309151649&4294967295,A=N+(R<<21&4294967295|R>>>11),R=x+(N^(A|~L))+k[4]+4149444226&4294967295,x=A+(R<<6&4294967295|R>>>26),R=L+(A^(x|~N))+k[11]+3174756917&4294967295,L=x+(R<<10&4294967295|R>>>22),R=N+(x^(L|~A))+k[2]+718787259&4294967295,N=L+(R<<15&4294967295|R>>>17),R=A+(L^(N|~x))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+L&4294967295}n.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var A=x-this.blockSize,k=this.B,N=this.h,L=0;L<x;){if(N==0)for(;L<=A;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<x;)if(k[N++]=D.charCodeAt(L++),N==this.blockSize){o(this,k),N=0;break}}else for(;L<x;)if(k[N++]=D[L++],N==this.blockSize){o(this,k),N=0;break}}this.h=N,this.o+=x},n.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var A=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=A&255,A/=256;for(this.u(D),D=Array(16),x=A=0;4>x;++x)for(var k=0;32>k;k+=8)D[A++]=this.g[x]>>>k&255;return D};function a(D,x){var A=d;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=x(D)}function u(D,x){this.h=x;for(var A=[],k=!0,N=D.length-1;0<=N;N--){var L=D[N]|0;k&&L==x||(A[N]=L,k=!1)}this.g=A}var d={};function f(D){return-128<=D&&128>D?a(D,function(x){return new u([x|0],0>x?-1:0)}):new u([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return O(m(-D));for(var x=[],A=1,k=0;D>=A;k++)x[k]=D/A|0,A*=4294967296;return new u(x,0)}function v(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return O(v(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=m(Math.pow(x,8)),k=w,N=0;N<D.length;N+=8){var L=Math.min(8,D.length-N),R=parseInt(D.substring(N,N+L),x);8>L?(L=m(Math.pow(x,L)),k=k.j(L).add(m(R))):(k=k.j(A),k=k.add(m(R)))}return k}var w=f(0),T=f(1),C=f(16777216);r=u.prototype,r.m=function(){if(F(this))return-O(this).m();for(var D=0,x=1,A=0;A<this.g.length;A++){var k=this.i(A);D+=(0<=k?k:4294967296+k)*x,x*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(F(this))return"-"+O(this).toString(D);for(var x=m(Math.pow(D,6)),A=this,k="";;){var N=ne(A,x).g;A=te(A,N.j(x));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=N,U(A))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function F(D){return D.h==-1}r.l=function(D){return D=te(this,D),F(D)?-1:U(D)?0:1};function O(D){for(var x=D.g.length,A=[],k=0;k<x;k++)A[k]=~D.g[k];return new u(A,~D.h).add(T)}r.abs=function(){return F(this)?O(this):this},r.add=function(D){for(var x=Math.max(this.g.length,D.g.length),A=[],k=0,N=0;N<=x;N++){var L=k+(this.i(N)&65535)+(D.i(N)&65535),R=(L>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);k=R>>>16,L&=65535,R&=65535,A[N]=R<<16|L}return new u(A,A[A.length-1]&-2147483648?-1:0)};function te(D,x){return D.add(O(x))}r.j=function(D){if(U(this)||U(D))return w;if(F(this))return F(D)?O(this).j(O(D)):O(O(this).j(D));if(F(D))return O(this.j(O(D)));if(0>this.l(C)&&0>D.l(C))return m(this.m()*D.m());for(var x=this.g.length+D.g.length,A=[],k=0;k<2*x;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<D.g.length;N++){var L=this.i(k)>>>16,R=this.i(k)&65535,le=D.i(N)>>>16,Te=D.i(N)&65535;A[2*k+2*N]+=R*Te,ee(A,2*k+2*N),A[2*k+2*N+1]+=L*Te,ee(A,2*k+2*N+1),A[2*k+2*N+1]+=R*le,ee(A,2*k+2*N+1),A[2*k+2*N+2]+=L*le,ee(A,2*k+2*N+2)}for(k=0;k<x;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=x;k<2*x;k++)A[k]=0;return new u(A,0)};function ee(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function G(D,x){this.g=D,this.h=x}function ne(D,x){if(U(x))throw Error("division by zero");if(U(D))return new G(w,w);if(F(D))return x=ne(O(D),x),new G(O(x.g),O(x.h));if(F(x))return x=ne(D,O(x)),new G(O(x.g),x.h);if(30<D.g.length){if(F(D)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var A=T,k=x;0>=k.l(D);)A=_e(A),k=_e(k);var N=pe(A,1),L=pe(k,1);for(k=pe(k,2),A=pe(A,2);!U(k);){var R=L.add(k);0>=R.l(D)&&(N=N.add(A),L=R),k=pe(k,1),A=pe(A,1)}return x=te(D,N.j(x)),new G(N,x)}for(N=w;0<=D.l(x);){for(A=Math.max(1,Math.floor(D.m()/x.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=m(A),R=L.j(x);F(R)||0<R.l(D);)A-=k,L=m(A),R=L.j(x);U(L)&&(L=T),N=N.add(L),D=te(D,R)}return new G(N,D)}r.A=function(D){return ne(this,D).h},r.and=function(D){for(var x=Math.max(this.g.length,D.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)&D.i(k);return new u(A,this.h&D.h)},r.or=function(D){for(var x=Math.max(this.g.length,D.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)|D.i(k);return new u(A,this.h|D.h)},r.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),A=[],k=0;k<x;k++)A[k]=this.i(k)^D.i(k);return new u(A,this.h^D.h)};function _e(D){for(var x=D.g.length+1,A=[],k=0;k<x;k++)A[k]=D.i(k)<<1|D.i(k-1)>>>31;return new u(A,D.h)}function pe(D,x){var A=x>>5;x%=32;for(var k=D.g.length-A,N=[],L=0;L<k;L++)N[L]=0<x?D.i(L+A)>>>x|D.i(L+A+1)<<32-x:D.i(L+A);return new u(N,D.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,SE=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Oi=u}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AE,Ql,xE,mh,xp,PE,RE,CE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=t(this);function o(c,g){if(g)e:{var _=n;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in _))break e;_=_[B]}c=c[c.length-1],S=_[c],g=g(S),g!=S&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,S=!1,B={next:function(){if(!S&&_<c.length){var W=_++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function C(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function U(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,B,W){for(var oe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)oe[Ge-2]=arguments[Ge];return g.prototype[B].apply(S,oe)}}function F(c){const g=c.length;if(0<g){const _=Array(g);for(let S=0;S<g;S++)_[S]=c[S];return _}return[]}function O(c,g){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(f(S)){const B=c.length||0,W=S.length||0;c.length=B+W;for(let oe=0;oe<W;oe++)c[B+oe]=S[oe]}else c.push(S)}}class te{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ee(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var _e=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function pe(c,g,_){for(const S in c)g.call(_,c[S],S,c)}function D(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function x(c){const g={};for(const _ in c)g[_]=c[_];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,g){let _,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(_ in S)c[_]=S[_];for(let W=0;W<A.length;W++)_=A[W],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function N(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function L(c){d.setTimeout(()=>{throw c},0)}function R(){var c=Ie;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class le{constructor(){this.h=this.g=null}add(g,_){const S=Te.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Te=new te(()=>new xe,c=>c.reset());class xe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ie=!1,Ie=new le,ce=()=>{const c=d.Promise.resolve(void 0);Ce=()=>{c.then(j)}};var j=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(_){L(_)}var g=Te;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ie=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Ve=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c})();function De(c,g){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(_e){e:{try{ne(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:je[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}U(De,Ee);var je={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Xe(c,g,_,S,B){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=B,this.key=++Ke,this.da=this.fa=!1}function Vt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xr(c){this.src=c,this.g={},this.h=0}xr.prototype.add=function(c,g,_,S,B){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var oe=ei(c,g,S,B);return-1<oe?(g=c[oe],_||(g.fa=!1)):(g=new Xe(g,this.src,W,!!S,B),g.fa=_,c.push(g)),g};function so(c,g){var _=g.type;if(_ in c.g){var S=c.g[_],B=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=B)&&Array.prototype.splice.call(S,B,1),W&&(Vt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ei(c,g,_,S){for(var B=0;B<c.length;++B){var W=c[B];if(!W.da&&W.listener==g&&W.capture==!!_&&W.ha==S)return B}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),oo={};function Wa(c,g,_,S,B){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Wa(c,g[W],_,S,B);return null}return _=Ha(_),c&&c[$e]?c.K(g,_,m(S)?!!S.capture:!1,B):Ga(c,g,_,!1,S,B)}function Ga(c,g,_,S,B,W){if(!g)throw Error("Invalid event type");var oe=m(B)?!!B.capture:!!B,Ge=lo(c);if(Ge||(c[ts]=Ge=new xr(c)),_=Ge.add(g,_,S,oe,W),_.proxy)return _;if(S=Ku(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)Ve||(B=oe),B===void 0&&(B=!1),c.addEventListener(g.toString(),S,B);else if(c.attachEvent)c.attachEvent(Rr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ku(){function c(_){return g.call(c.src,c.listener,_)}const g=Qa;return c}function ao(c,g,_,S,B){if(Array.isArray(g))for(var W=0;W<g.length;W++)ao(c,g[W],_,S,B);else S=m(S)?!!S.capture:!!S,_=Ha(_),c&&c[$e]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],_=ei(W,_,S,B),-1<_&&(Vt(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=lo(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ei(g,_,S,B)),(_=-1<c?g[c]:null)&&Pr(_))}function Pr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[$e])so(g.i,c);else{var _=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(_,S,c.capture):g.detachEvent?g.detachEvent(Rr(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=lo(g))?(so(_,c),_.h==0&&(_.src=null,g[ts]=null)):Vt(c)}}}function Rr(c){return c in oo?oo[c]:oo[c]="on"+c}function Qa(c,g){if(c.da)c=!0;else{g=new De(g,this);var _=c.listener,S=c.ha||c.src;c.fa&&Pr(c),c=_.call(S,g)}return c}function lo(c){return c=c[ts],c instanceof xr?c:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ha(c){return typeof c=="function"?c:(c[uo]||(c[uo]=function(g){return c.handleEvent(g)}),c[uo])}function At(){Q.call(this),this.i=new xr(this),this.M=this,this.F=null}U(At,Q),At.prototype[$e]=!0,At.prototype.removeEventListener=function(c,g,_,S){ao(this,c,g,_,S)};function xt(c,g){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new Ee(g,c);else if(g instanceof Ee)g.target=g.target||c;else{var B=g;g=new Ee(S,c),k(g,B)}if(B=!0,_)for(var W=_.length-1;0<=W;W--){var oe=g.g=_[W];B=Cr(oe,S,!0,g)&&B}if(oe=g.g=c,B=Cr(oe,S,!0,g)&&B,B=Cr(oe,S,!1,g)&&B,_)for(W=0;W<_.length;W++)oe=g.g=_[W],B=Cr(oe,S,!1,g)&&B}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],S=0;S<_.length;S++)Vt(_[S]);delete c.g[g],c.h--}}this.F=null},At.prototype.K=function(c,g,_,S){return this.i.add(String(c),g,!1,_,S)},At.prototype.L=function(c,g,_,S){return this.i.add(String(c),g,!0,_,S)};function Cr(c,g,_,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,W=0;W<g.length;++W){var oe=g[W];if(oe&&!oe.da&&oe.capture==_){var Ge=oe.listener,Pt=oe.ha||oe.src;oe.fa&&so(c.i,oe),B=Ge.call(Pt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Ya(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function ti(c){c.g=Ya(()=>{c.g=null,c.i&&(c.i=!1,ti(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ns extends Q{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ti(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(c){Q.call(this),this.h=c,this.g={}}U(rs,Q);var Xa=[];function Ja(c){pe(c.g,function(g,_){this.g.hasOwnProperty(_)&&Pr(g)},c),c.g={}}rs.prototype.N=function(){rs.aa.N.call(this),Ja(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Za=d.JSON.stringify,el=d.JSON.parse,tl=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function is(){}is.prototype.h=null;function co(c){return c.h||(c.h=c.i())}function ho(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){Ee.call(this,"d")}U(ar,Ee);function fo(){Ee.call(this,"c")}U(fo,Ee);var lr={},nl=null;function ss(){return nl=nl||new At}lr.La="serverreachability";function rl(c){Ee.call(this,lr.La,c)}U(rl,Ee);function kr(c){const g=ss();xt(g,new rl(g))}lr.STAT_EVENT="statevent";function il(c,g){Ee.call(this,lr.STAT_EVENT,c),this.stat=g}U(il,Ee);function mt(c){const g=ss();xt(g,new il(g,c))}lr.Ma="timingevent";function po(c,g){Ee.call(this,lr.Ma,c),this.size=g}U(po,Ee);function qn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function os(){this.g=!0}os.prototype.xa=function(){this.g=!1};function as(c,g,_,S,B,W){c.info(function(){if(c.g)if(W)for(var oe="",Ge=W.split("&"),Pt=0;Pt<Ge.length;Pt++){var Me=Ge[Pt].split("=");if(1<Me.length){var Dt=Me[0];Me=Me[1];var wt=Dt.split("_");oe=2<=wt.length&&wt[1]=="type"?oe+(Dt+"="+Me+"&"):oe+(Dt+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+_+`
`+oe})}function mo(c,g,_,S,B,W,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+_+`
`+W+" "+oe})}function $n(c,g,_,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Pd(c,_)+(S?" "+S:"")})}function sl(c,g){c.info(function(){return"TIMEOUT: "+g})}os.prototype.info=function(){};function Pd(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return Za(_)}catch{return g}}var go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function ls(){}U(ls,is),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Kn=new ls;function Wn(c,g,_,S){this.j=c,this.i=g,this.l=_,this.R=S||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gu}function Gu(){this.i=null,this.g="",this.h=!1}var ol={},yo={};function _o(c,g,_){c.L=1,c.v=oi(En(g)),c.m=_,c.P=!0,al(c,null)}function al(c,g){c.F=Date.now(),Je(c),c.A=En(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),li(_.i,"t",S),c.C=0,_=c.j.J,c.h=new Gu,c.g=hc(c.j,_?g:null,!c.m),0<c.O&&(c.M=new ns(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Xa[0]=B.toString()),B=Xa);for(var W=0;W<B.length;W++){var oe=Wa(_,B[W],S||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),kr(),as(c.i,c.u,c.A,c.l,c.R,c.m)}Wn.prototype.ca=function(c){c=c.target;const g=this.M;g&&cn(c)==3?g.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{const wt=cn(this.g);var g=this.g.Ba();const Nn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||fl(this.g)))){this.J||wt!=4||g==7||(g==8||0>=Nn?kr(3):kr(2)),us(this);var _=this.g.Z();this.X=_;t:if(Qu(this)){var S=fl(this.g);c="";var B=S.length,W=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),ni(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==B-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,mo(this.i,this.u,this.A,this.l,this.R,wt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Pt=this.g;if((Ge=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Ge)){var Me=Ge;break t}}Me=null}if(_=Me)$n(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,_);else{this.o=!1,this.s=3,mt(12),Vn(this),ni(this);break e}}if(this.P){_=!0;let Tn;for(;!this.J&&this.C<oe.length;)if(Tn=Rd(this,oe),Tn==yo){wt==4&&(this.s=4,mt(14),_=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==ol){this.s=4,mt(15),$n(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else $n(this.i,this.l,Tn,null),ll(this,Tn);if(Qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||oe.length!=0||this.h.h||(this.s=1,mt(16),_=!1),this.o=this.o&&_,!_)$n(this.i,this.l,oe,"[Invalid Chunked Response]"),Vn(this),ni(this);else if(0<oe.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ml(Dt),Dt.M=!0,mt(11))}}else $n(this.i,this.l,oe,null),ll(this,oe);wt==4&&Vn(this),this.o&&!this.J&&(wt==4?Co(this.j,this):(this.o=!1,Je(this)))}else So(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Vn(this),ni(this)}}}catch{}finally{}};function Qu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Rd(c,g){var _=c.C,S=g.indexOf(`
`,_);return S==-1?yo:(_=Number(g.substring(_,S)),isNaN(_)?ol:(S+=1,S+_>g.length?yo:(g=g.slice(S,S+_),c.C=S+_,g)))}Wn.prototype.cancel=function(){this.J=!0,Vn(this)};function Je(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qn(T(c.ba,c),g)}function us(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Wn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(sl(this.i,this.A),this.L!=2&&(kr(),mt(17)),Vn(this),this.s=2,ni(this)):Hu(this,this.S-c)};function ni(c){c.j.G==0||c.J||Co(c.j,c)}function Vn(c){us(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ja(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ll(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||en(_.h,c))){if(!c.K&&en(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ro(_),Xn(_);else break e;Po(_),mt(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=qn(T(_.Za,_),6e3));if(1>=Xu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Or(_,11)}else if((c.K||_.g==c)&&Ro(_),!ee(g))for(B=_.Da.g.parse(g),g=0;g<B.length;g++){let Me=B[g];if(_.T=Me[0],Me=Me[1],_.G==2)if(Me[0]=="c"){_.K=Me[1],_.ia=Me[2];const Dt=Me[3];Dt!=null&&(_.la=Dt,_.j.info("VER="+_.la));const wt=Me[4];wt!=null&&(_.Aa=wt,_.j.info("SVER="+_.Aa));const Nn=Me[5];Nn!=null&&typeof Nn=="number"&&0<Nn&&(S=1.5*Nn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Tn=c.g;if(Tn){const gs=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var W=S.h;W.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ul(W,W.h),W.h=null))}if(S.D){const Vo=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(S.ya=Vo,Ye(S.I,S.D,Vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var oe=c;if(S.qa=cc(S,S.J?S.ia:null,S.W),oe.K){Ju(S.h,oe);var Ge=oe,Pt=S.L;Pt&&(Ge.I=Pt),Ge.B&&(us(Ge),Je(Ge)),S.g=oe}else ms(S);0<_.i.length&&dr(_)}else Me[0]!="stop"&&Me[0]!="close"||Or(_,7);else _.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Or(_,7):Mt(_):Me[0]!="noop"&&_.l&&_.l.ta(Me),_.v=0)}}kr(4)}catch{}}var Yu=class{constructor(c,g){this.g=c,this.map=g}};function cs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xu(c){return c.h?1:c.g?c.g.size:0}function en(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ul(c,g){c.g?c.g.add(g):c.h=g}function Ju(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}cs.prototype.cancel=function(){if(this.i=Zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return F(c.i)}function vo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,S=0;S<_;S++)g.push(c[S]);return g}g=[],_=0;for(S in c)g[_++]=c[S];return g}function wo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const S in c)g[_++]=S;return g}}}function ri(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=wo(c),S=vo(c),B=S.length,W=0;W<B;W++)g.call(void 0,S[W],_&&_[W],c)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),B=null;if(0<=S){var W=c[_].substring(0,S);B=c[_].substring(S+1)}else W=c[_];g(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Vr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vr){this.h=c.h,ds(this,c.j),this.o=c.o,this.g=c.g,ii(this,c.s),this.l=c.l;var g=c.i,_=new ur;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),si(this,_),this.m=c.m}else c&&(g=String(c).match(hs))?(this.h=!1,ds(this,g[1]||"",!0),this.o=Fe(g[2]||""),this.g=Fe(g[3]||"",!0),ii(this,g[4]),this.l=Fe(g[5]||"",!0),si(this,g[6]||"",!0),this.m=Fe(g[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}Vr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ai(g,Eo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ai(g,Eo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ai(_,_.charAt(0)=="/"?nc:tc,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ai(_,cl)),c.join("")};function En(c){return new Vr(c)}function ds(c,g,_){c.j=_?Fe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ii(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function si(c,g,_){g instanceof ur?(c.i=g,cr(c.i,c.h)):(_||(g=ai(g,rc)),c.i=new ur(g,c.h))}function Ye(c,g,_){c.i.set(g,_)}function oi(c){return Ye(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ai(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,ec),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ec(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Eo=/[#\/\?@]/g,tc=/[#\?:]/g,nc=/[#\?]/g,rc=/[#\?@]/g,cl=/#/g;function ur(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function jt(c){c.g||(c.g=new Map,c.h=0,c.i&&Cd(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=ur.prototype,r.add=function(c,g){jt(this),this.i=null,c=Dn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Gn(c,g){jt(c),g=Dn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qn(c,g){return jt(c),g=Dn(c,g),c.g.has(g)}r.forEach=function(c,g){jt(this),this.g.forEach(function(_,S){_.forEach(function(B){c.call(g,B,S,this)},this)},this)},r.na=function(){jt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){const B=c[S];for(let W=0;W<B.length;W++)_.push(g[S])}return _},r.V=function(c){jt(this);let g=[];if(typeof c=="string")Qn(this,c)&&(g=g.concat(this.g.get(Dn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return jt(this),this.i=null,c=Dn(this,c),Qn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function li(c,g,_){Gn(c,g),0<_.length&&(c.i=null,c.g.set(Dn(c,g),F(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];const W=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var B=W;oe[S]!==""&&(B+="="+encodeURIComponent(String(oe[S]))),c.push(B)}}return this.i=c.join("&")};function Dn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function cr(c,g){g&&!c.j&&(jt(c),c.i=null,c.g.forEach(function(_,S){var B=S.toLowerCase();S!=B&&(Gn(this,S),li(this,B,_))},c)),c.j=g}function kd(c,g){const _=new os;if(d.Image){const S=new Image;S.onload=C(un,_,"TestLoadImage: loaded",!0,g,S),S.onerror=C(un,_,"TestLoadImage: error",!1,g,S),S.onabort=C(un,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=C(un,_,"TestLoadImage: timeout",!1,g,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function ic(c,g){const _=new os,S=new AbortController,B=setTimeout(()=>{S.abort(),un(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(B),W.ok?un(_,"TestPingServer: ok",!0,g):un(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),un(_,"TestPingServer: error",!1,g)})}function un(c,g,_,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(_)}catch{}}function Vd(){this.g=new tl}function sc(c,g,_){const S=_||"";try{ri(c,function(B,W){let oe=B;m(B)&&(oe=Za(B)),g.push(S+W+"="+encodeURIComponent(oe))})}catch(B){throw g.push(S+"type="+encodeURIComponent("_badmap")),B}}function Dr(c){this.l=c.Ub||null,this.j=c.eb||!1}U(Dr,is),Dr.prototype.g=function(){return new fs(this.l,this.j)},Dr.prototype.i=(function(c){return function(){return c}})({});function fs(c,g){At.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(fs,At),r=fs.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Yn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Hn(this):Yn(this),this.readyState==3&&oc(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Hn(this))},r.Qa=function(c){this.g&&(this.response=c,Hn(this))},r.ga=function(){this.g&&Hn(this)};function Hn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Yn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Yn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nr(c){let g="";return pe(c,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function ui(c,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Nr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ye(c,g,_))}function st(c){At.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(st,At);var Dd=/^https?$/i,hl=["POST","PUT"];r=st.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?co(this.o):co(Kn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){ps(this,W);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)_.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())_.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),B=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(hl,g,void 0))||S||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of _)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ps(this,W)}};function ps(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Io(c),In(c)}function Io(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),In(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),In(this,!0)),st.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?dl(this):this.bb())},r.bb=function(){dl(this)};function dl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)Ya(c.Ea,0,c);else if(xt(c,"readystatechange"),cn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=oe===0){var B=String(c.D).match(hs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),S=!Dd.test(B?B.toLowerCase():"")}_=S}if(_)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var W=2<cn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Io(c)}}finally{In(c)}}}}function In(c,g){if(c.g){To(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||xt(c,"ready");try{_.onreadystatechange=S}catch{}}}function To(c){c.I&&(d.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),el(g)}};function fl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function So(c){const g={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(ee(c[S]))continue;var _=N(c[S]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=g[B]||[];g[B]=W,W.push(_)}D(g,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function pl(c){this.Aa=0,this.i=[],this.j=new os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hr("baseRetryDelayMs",5e3,c),this.cb=hr("retryDelaySeedMs",1e4,c),this.Wa=hr("forwardChannelMaxRetries",2,c),this.wa=hr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(c&&c.concurrentRequestLimit),this.Da=new Vd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pl.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,S){mt(0),this.W=c,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=cc(this,null,this.W),dr(this)};function Mt(c){if(Ao(c),c.G==3){var g=c.U++,_=En(c.I);if(Ye(_,"SID",c.K),Ye(_,"RID",g),Ye(_,"TYPE","terminate"),br(c,_),g=new Wn(c,c.j,g),g.L=2,g.v=oi(En(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=hc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Je(g)}uc(c)}function Xn(c){c.g&&(ml(c),c.g.cancel(),c.g=null)}function Ao(c){Xn(c),c.u&&(d.clearTimeout(c.u),c.u=null),Ro(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function dr(c){if(!wn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Ce||ce(),ie||(Ce(),ie=!0),Ie.add(g,c),c.B=0}}function Nd(c,g){return Xu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qn(T(c.Ga,c,g),lc(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Wn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=x(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ci(this,B,g),_=En(this.I),Ye(_,"RID",c),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),br(this,_),W&&(this.O?g="headers="+encodeURIComponent(String(Nr(W)))+"&"+g:this.m&&ui(_,this.m,W)),ul(this.h,B),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",g),Ye(_,"SID","null"),B.T=!0,_o(B,_,null)):_o(B,_,g),this.G=2}}else this.G==3&&(c?xo(this,c):this.i.length==0||wn(this.h)||xo(this))};function xo(c,g){var _;g?_=g.l:_=c.U++;const S=En(c.I);Ye(S,"SID",c.K),Ye(S,"RID",_),Ye(S,"AID",c.T),br(c,S),c.m&&c.o&&ui(S,c.m,c.o),_=new Wn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ci(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ul(c.h,_),_o(_,S,g)}function br(c,g){c.H&&pe(c.H,function(_,S){Ye(g,S,_)}),c.l&&ri({},function(_,S){Ye(g,S,_)})}function ci(c,g,_){_=Math.min(c.i.length,_);var S=c.l?T(c.l.Na,c.l,c):null;e:{var B=c.i;let W=-1;for(;;){const oe=["count="+_];W==-1?0<_?(W=B[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let Ge=!0;for(let Pt=0;Pt<_;Pt++){let Me=B[Pt].g;const Dt=B[Pt].map;if(Me-=W,0>Me)W=Math.max(0,B[Pt].g-100),Ge=!1;else try{sc(Dt,oe,"req"+Me+"_")}catch{S&&S(Dt)}}if(Ge){S=oe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,S}function ms(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Ce||ce(),ie||(Ce(),ie=!0),Ie.add(g,c),c.v=0}}function Po(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qn(T(c.Fa,c),lc(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qn(T(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Xn(this),ac(this))};function ml(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function ac(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=En(c.qa);Ye(g,"RID","rpc"),Ye(g,"SID",c.K),Ye(g,"AID",c.T),Ye(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ye(g,"TO",c.ja),Ye(g,"TYPE","xmlhttp"),br(c,g),c.m&&c.o&&ui(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=oi(En(g)),_.m=null,_.P=!0,al(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Xn(this),Po(this),mt(19))};function Ro(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Co(c,g){var _=null;if(c.g==g){Ro(c),ml(c),c.g=null;var S=2}else if(en(c.h,g))_=g.D,Ju(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;S=ss(),xt(S,new po(S,_)),dr(c)}else ms(c);else if(B=g.s,B==3||B==0&&0<g.X||!(S==1&&Nd(c,g)||S==2&&Po(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),B){case 1:Or(c,5);break;case 4:Or(c,10);break;case 3:Or(c,6);break;default:Or(c,2)}}}function lc(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Or(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),S=c.Xa;const B=!S;S=new Vr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ds(S,"https"),oi(S),B?kd(S.toString(),_):ic(S.toString(),_)}else mt(2);c.G=0,c.l&&c.l.sa(g),uc(c),Ao(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function uc(c){if(c.G=0,c.ka=[],c.l){const g=Zu(c.h);(g.length!=0||c.i.length!=0)&&(O(c.ka,g),O(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function cc(c,g,_){var S=_ instanceof Vr?En(_):new Vr(_);if(S.g!="")g&&(S.g=g+"."+S.g),ii(S,S.s);else{var B=d.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var W=new Vr(null);S&&ds(W,S),g&&(W.g=g),B&&ii(W,B),_&&(W.l=_),S=W}return _=c.D,g=c.ya,_&&g&&Ye(S,_,g),Ye(S,"VER",c.la),br(c,S),S}function hc(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new st(new Dr({eb:_})):new st(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gl(){}r=gl.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ko(){}ko.prototype.g=function(c,g){return new tn(c,g)};function tn(c,g){At.call(this),this.g=new pl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ee(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ee(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new fr(this)}U(tn,At),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Mt(this.g)},tn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Za(c),c=_);g.i.push(new Yu(g.Ya++,c)),g.G==3&&dr(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,tn.aa.N.call(this)};function dc(c){ar.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}U(dc,ar);function fc(){fo.call(this),this.status=1}U(fc,fo);function fr(c){this.g=c}U(fr,gl),fr.prototype.ua=function(){xt(this.g,"a")},fr.prototype.ta=function(c){xt(this.g,new dc(c))},fr.prototype.sa=function(c){xt(this.g,new fc)},fr.prototype.ra=function(){xt(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,CE=function(){return new ko},RE=function(){return ss()},PE=lr,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,mh=go,Wu.COMPLETE="complete",xE=Wu,ho.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",At.prototype.listen=At.prototype.K,Ql=ho,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,AE=st}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore",cv="4.8.0";class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");let ja="11.10.0";const Bi=new cm("@firebase/firestore");function sa(){return Bi.logLevel}function Ax(r){Bi.setLogLevel(r)}function X(r,...e){if(Bi.logLevel<=Le.DEBUG){const t=e.map(mm);Bi.debug(`Firestore (${ja}): ${r}`,...t)}}function yt(r,...e){if(Bi.logLevel<=Le.ERROR){const t=e.map(mm);Bi.error(`Firestore (${ja}): ${r}`,...t)}}function Rn(r,...e){if(Bi.logLevel<=Le.WARN){const t=e.map(mm);Bi.warn(`Firestore (${ja}): ${r}`,...t)}}function mm(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function he(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,kE(r,n,t)}function kE(r,e,t){let n=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw yt(n),new Error(n)}function ge(r,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,r||kE(e,o,n)}function xx(r,e){r||he(57014,e)}function ue(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $t{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class VE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Px{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Lt.UNAUTHENTICATED)))}shutdown(){}}class Rx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Cx{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let n=this.i;const o=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $t,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $t)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ge(typeof n.accessToken=="string",31837,{l:n}),new VE(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class kx{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vx{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new kx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const n=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,X("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const o=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}function gm(){return new TextEncoder}class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=Nx(40);for(let a=0;a<o.length;++a)n.length<20&&o[a]<t&&(n+=e.charAt(o[a]%62))}return n}}function Pe(r,e){return r<e?-1:r>e?1:0}function Pp(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),o=e.codePointAt(t);if(n!==o){if(n<128&&o<128)return Pe(n,o);{const a=gm(),u=bx(a.encode(dv(r,t)),a.encode(dv(e,t)));return u!==0?u:Pe(n,o)}}t+=n>65535?2:1}return Pe(r.length,e.length)}function dv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function bx(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Pe(r[t],e[t]);return Pe(r.length,e.length)}function ya(r,e,t){return r.length===e.length&&r.every(((n,o)=>t(n,e[o])))}function DE(r){return r+"\0"}const fv="__name__";class _r{constructor(e,t,n){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&he(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const a=_r.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Pe(e.length,t.length)}static compareSegments(e,t){const n=_r.isNumericId(e),o=_r.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?_r.extractNumericId(e).compare(_r.extractNumericId(t)):Pp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oi.fromString(e.substring(4,e.length-2))}}class be extends _r{construct(e,t,n){return new be(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Y(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new be(t)}static emptyPath(){return new be([])}}const Ox=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends _r{construct(e,t,n){return new lt(e,t,n)}static isValidIdentifier(e){return Ox.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fv}static keyField(){return new lt([fv])}static fromServerFormat(e){const t=[];let n="",o=0;const a=()=>{if(n.length===0)throw new Y(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new Y(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Y(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(n+=d,o++):(a(),o++)}if(a(),u)throw new Y(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(t)}static emptyPath(){return new lt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(be.fromString(e))}static fromName(e){return new ae(be.fromString(e).popFirst(5))}static empty(){return new ae(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new be(e.slice()))}}function _m(r,e,t){if(!t)throw new Y(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function NE(r,e,t,n){if(e===!0&&n===!0)throw new Y(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function pv(r){if(!ae.isDocumentKey(r))throw new Y(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function mv(r){if(ae.isDocumentKey(r))throw new Y(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function td(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":he(12329,{type:typeof r})}function qe(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Y(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=td(r);throw new Y(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function OE(r,e){if(e<=0)throw new Y(K.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Tt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Cu(r,e){if(!bE(r))throw new Y(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const u=r[n];if(o&&typeof u!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new Y(K.INVALID_ARGUMENT,t);return!0}const gv=-62135596800,yv=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*yv);return new We(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gv)throw new Y(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Tt("string",We._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new We(0,0))}static max(){return new we(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const _a=-1;class bh{constructor(e,t,n,o){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=o}}function Rp(r){return r.fields.find((e=>e.kind===2))}function Ds(r){return r.fields.filter((e=>e.kind!==2))}bh.UNKNOWN_ID=-1;class gh{constructor(e,t){this.fieldPath=e,this.kind=t}}class fu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fu(0,Cn.min())}}function FE(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,o=we.fromTimestamp(n===1e9?new We(t+1,0):new We(t,n));return new Cn(o,ae.empty(),e)}function LE(r){return new Cn(r.readTime,r.key,_a)}class Cn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cn(we.min(),ae.empty(),_a)}static max(){return new Cn(we.max(),ae.empty(),_a)}}function vm(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(r.documentKey,e.documentKey),t!==0?t:Pe(r.largestBatchId,e.largestBatchId))}const jE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ME{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hi(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==jE)throw r;X("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M(((n,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):M.reject(t)}static resolve(e){return new M(((t,n)=>{t(e)}))}static reject(e){return new M(((t,n)=>{n(e)}))}static waitFor(e){return new M(((t,n)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(f=>n(f)))})),u=!0,a===o&&t()}))}static or(e){let t=M.resolve(!1);for(const n of e)t=t.next((o=>o?M.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,a)=>{n.push(t.call(this,o,a))})),this.waitFor(n)}static mapArray(e,t){return new M(((n,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((v=>{u[m]=v,++d,d===a&&n(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new M(((n,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):n()};a()}))}}const Pn="SimpleDb";class nd{static open(e,t,n,o){try{return new nd(t,e.transaction(o,n))}catch(a){throw new eu(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new $t,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new eu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const o=wm(n.target.error);this.S.reject(new eu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(X(Pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lx(t)}}class Ir{static delete(e){return X(Pn,"Removing database:",e),bs(am().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!uE())return!1;if(Ir.F())return!0;const e=Vh(),t=Ir.M(e),n=0<t&&t<10,o=BE(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,Ir.M(Vh())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(X(Pn,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const u=a.target.result;t(u)},o.onblocked=()=>{n(new eu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new Y(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new Y(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new eu(e,u))},o.onupgradeneeded=a=>{X(Pn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${u.version}`);this.B.q(u,o.transaction,a.oldVersion,this.version).next((()=>{X(Pn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const n=t.target;this.L=n.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var n;t.newVersion===null&&(Rn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(n=this.databaseDeletedListener)===null||n===void 0||n.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,n,o){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const d=nd.open(this.db,e,a?"readonly":"readwrite",n),f=o(d).next((m=>(d.v(),m))).catch((m=>(d.abort(m),M.reject(m)))).toPromise();return f.catch((()=>{})),await d.D,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&u<3;if(X(Pn,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Fx{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return bs(this.$.delete())}}class eu extends Y{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yi(r){return r.name==="IndexedDbTransactionError"}class Lx{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(X(Pn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(X(Pn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),bs(n)}add(e){return X(Pn,"ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next((t=>(t===void 0&&(t=null),X(Pn,"GET",this.store.name,e,t),t)))}delete(e){return X(Pn,"DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return X(Pn,"COUNT",this.store.name),bs(this.store.count())}j(e,t){const n=this.options(e,t),o=n.index?this.store.index(n.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(n.range);return new M(((u,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(n),u=[];return this.J(a,((d,f)=>{u.push(f)})).next((()=>u))}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new M(((o,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{o(u.target.result)}}))}Y(e,t){X(Pn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Z=!1;const o=this.cursor(n);return this.J(o,((a,u,d)=>d.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const o=this.cursor(n);return this.J(o,t)}ee(e){const t=this.cursor({});return new M(((n,o)=>{t.onerror=a=>{const u=wm(a.target.error);o(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((d=>{d?u.continue():n()})):n()}}))}J(e,t){const n=[];return new M(((o,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void o();const f=new Fx(d),m=t(d.primaryKey,d.value,f);if(m instanceof M){const v=m.catch((w=>(f.done(),M.reject(w))));n.push(v)}f.isDone?o():f.W===null?d.continue():d.continue(f.W)}})).next((()=>M.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bs(r){return new M(((e,t)=>{r.onsuccess=n=>{const o=n.target.result;e(o)},r.onerror=n=>{const o=wm(n.target.error);t(o)}}))}let _v=!1;function wm(r){const e=Ir.M(Vh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _v||(_v=!0,setTimeout((()=>{throw n}),0)),n}}return r}const tu="IndexBackfiller";class jx{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){X(tu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();X(tu,`Documents written: ${t}`)}catch(t){Yi(t)?X(tu,"Ignoring IndexedDB error during index backfill: ",t):await Hi(t)}await this.ne(6e4)}))}}class Mx{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const n=new Set;let o=t,a=!0;return M.doWhile((()=>a===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!n.has(u))return X(tu,`Processing collection: ${u}`),this.se(e,u,o).next((d=>{o-=d,n.add(u)}));a=!1})))).next((()=>t-o))}se(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,n).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.oe(o,a))).next((d=>(X(tu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>u.size))}))))}oe(e,t){let n=e;return t.changes.forEach(((o,a)=>{const u=LE(a);vm(u,n)>0&&(n=u)})),new Cn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class yn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this._e(n),this.ae=n=>t.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yn.ue=-1;const Fi=-1;function ku(r){return r==null}function pu(r){return r===0&&1/r==-1/0}function UE(r){return typeof r=="number"&&Number.isInteger(r)&&!pu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Oh="";function Jt(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=vv(e)),e=Bx(r.get(t),e);return vv(e)}function Bx(r,e){let t=e;const n=r.length;for(let o=0;o<n;o++){const a=r.charAt(o);switch(a){case"\0":t+="";break;case Oh:t+="";break;default:t+=a}}return t}function vv(r){return r+Oh+""}function wr(r){const e=r.length;if(ge(e>=2,64408,{path:r}),e===2)return ge(r.charAt(0)===Oh&&r.charAt(1)==="",56145,{path:r}),be.emptyPath();const t=e-2,n=[];let o="";for(let a=0;a<e;){const u=r.indexOf(Oh,a);switch((u<0||u>t)&&he(50515,{path:r}),r.charAt(u+1)){case"":const d=r.substring(a,u);let f;o.length===0?f=d:(o+=d,f=o,o=""),n.push(f);break;case"":o+=r.substring(a,u),o+="\0";break;case"":o+=r.substring(a,u+1);break;default:he(61167,{path:r})}a=u+2}return new be(n)}const Ns="remoteDocuments",Vu="owner",Jo="owner",mu="mutationQueues",Ux="userId",ir="mutations",wv="batchId",Ms="userMutationsIndex",Ev=["userId","batchId"];function yh(r,e){return[r,Jt(e)]}function zE(r,e,t){return[r,Jt(e),t]}const zx={},va="documentMutations",Fh="remoteDocumentsV14",qx=["prefixPath","collectionGroup","readTime","documentId"],_h="documentKeyIndex",$x=["prefixPath","collectionGroup","documentId"],qE="collectionGroupIndex",Kx=["collectionGroup","readTime","prefixPath","documentId"],gu="remoteDocumentGlobal",Cp="remoteDocumentGlobalKey",wa="targets",$E="queryTargetsIndex",Wx=["canonicalId","targetId"],Ea="targetDocuments",Gx=["targetId","path"],Em="documentTargetsIndex",Qx=["path","targetId"],Lh="targetGlobalKey",zs="targetGlobal",yu="collectionParents",Hx=["collectionId","parent"],Ia="clientMetadata",Yx="clientId",rd="bundles",Xx="bundleId",id="namedQueries",Jx="name",Im="indexConfiguration",Zx="indexId",kp="collectionGroupIndex",eP="collectionGroup",nu="indexState",tP=["indexId","uid"],KE="sequenceNumberIndex",nP=["uid","sequenceNumber"],ru="indexEntries",rP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WE="documentKeyIndex",iP=["indexId","uid","orderedDocumentKey"],sd="documentOverlays",sP=["userId","collectionPath","documentId"],Vp="collectionPathOverlayIndex",oP=["userId","collectionPath","largestBatchId"],GE="collectionGroupOverlayIndex",aP=["userId","collectionGroup","largestBatchId"],Tm="globals",lP="name",QE=[mu,ir,va,Ns,wa,Vu,zs,Ea,Ia,gu,yu,rd,id],uP=[...QE,sd],HE=[mu,ir,va,Fh,wa,Vu,zs,Ea,Ia,gu,yu,rd,id,sd],YE=HE,Sm=[...YE,Im,nu,ru],cP=Sm,XE=[...Sm,Tm],hP=XE;class Dp extends ME{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function kt(r,e){const t=ue(r);return Ir.N(t.ce,e)}function Iv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function JE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class tt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??zt.RED,this.left=o??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new zt(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,n,o,a){return this}insert(e,t,n){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class He{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new He(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(r){return r.hasNext()?r.getNext():void 0}class _n{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new _n([])}unionWith(e){let t=new He(lt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function dP(){return typeof atob<"u"}class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZE("Invalid base64 string: "+a):a}})(e);return new pt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const fP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(r){if(ge(!!r,39018),typeof r=="string"){let e=0;const t=fP.exec(r);if(ge(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:at(r.seconds),nanos:at(r.nanos)}}function at(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?pt.fromBase64String(r):pt.fromUint8Array(r)}const eI="server_timestamp",tI="__type__",nI="__previous_value__",rI="__local_write_time__";function od(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tI])===null||t===void 0?void 0:t.stringValue)===eI}function ad(r){const e=r.mapValue.fields[nI];return od(e)?ad(e):e}function _u(r){const e=Gr(r.mapValue.fields[rI].timestampValue);return new We(e.seconds,e.nanos)}class pP{constructor(e,t,n,o,a,u,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Np="(default)";class Ui{constructor(e,t){this.projectId=e,this.database=t||Np}static empty(){return new Ui("","")}get isDefaultDatabase(){return this.database===Np}isEqual(e){return e instanceof Ui&&e.projectId===this.projectId&&e.database===this.database}}const Am="__type__",iI="__max__",Vi={mapValue:{fields:{__type__:{stringValue:iI}}}},xm="__vector__",Ta="value",vh={nullValue:"NULL_VALUE"};function zi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?od(r)?4:sI(r)?9007199254740991:ld(r)?10:11:he(28295,{value:r})}function Ar(r,e){if(r===e)return!0;const t=zi(r);if(t!==zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return _u(r).isEqual(_u(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Gr(o.timestampValue),d=Gr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,a){return Qr(o.bytesValue).isEqual(Qr(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,a){return at(o.geoPointValue.latitude)===at(a.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(a.geoPointValue.longitude)})(r,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return at(o.integerValue)===at(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=at(o.doubleValue),d=at(a.doubleValue);return u===d?pu(u)===pu(d):isNaN(u)&&isNaN(d)}return!1})(r,e);case 9:return ya(r.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Iv(u)!==Iv(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Ar(u[f],d[f])))return!1;return!0})(r,e);default:return he(52216,{left:r})}}function vu(r,e){return(r.values||[]).find((t=>Ar(t,e)))!==void 0}function qi(r,e){if(r===e)return 0;const t=zi(r),n=zi(e);if(t!==n)return Pe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=at(a.integerValue||a.doubleValue),f=at(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(r,e);case 3:return Sv(r.timestampValue,e.timestampValue);case 4:return Sv(_u(r),_u(e));case 5:return Pp(r.stringValue,e.stringValue);case 6:return(function(a,u){const d=Qr(a),f=Qr(u);return d.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Pe(d[m],f[m]);if(v!==0)return v}return Pe(d.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Pe(at(a.latitude),at(u.latitude));return d!==0?d:Pe(at(a.longitude),at(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Av(r.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,v;const w=a.fields||{},T=u.fields||{},C=(d=w[Ta])===null||d===void 0?void 0:d.arrayValue,U=(f=T[Ta])===null||f===void 0?void 0:f.arrayValue,F=Pe(((m=C?.values)===null||m===void 0?void 0:m.length)||0,((v=U?.values)===null||v===void 0?void 0:v.length)||0);return F!==0?F:Av(C,U)})(r.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Vi.mapValue&&u===Vi.mapValue)return 0;if(a===Vi.mapValue)return 1;if(u===Vi.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=Pp(f[w],v[w]);if(T!==0)return T;const C=qi(d[f[w]],m[v[w]]);if(C!==0)return C}return Pe(f.length,v.length)})(r.mapValue,e.mapValue);default:throw he(23264,{le:t})}}function Sv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pe(r,e);const t=Gr(r),n=Gr(e),o=Pe(t.seconds,n.seconds);return o!==0?o:Pe(t.nanos,n.nanos)}function Av(r,e){const t=r.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const a=qi(t[o],n[o]);if(a)return a}return Pe(t.length,n.length)}function Sa(r){return bp(r)}function bp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Gr(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Qr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ae.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",o=!0;for(const a of t.values||[])o?o=!1:n+=",",n+=bp(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of n)a?a=!1:o+=",",o+=`${u}:${bp(t.fields[u])}`;return o+"}"})(r.mapValue):he(61005,{value:r})}function wh(r){switch(zi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(r);return e?16+wh(e):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,a)=>o+wh(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let o=0;return Xi(n.fields,((a,u)=>{o+=a.length+wh(u)})),o})(r.mapValue);default:throw he(13486,{value:r})}}function $s(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Op(r){return!!r&&"integerValue"in r}function wu(r){return!!r&&"arrayValue"in r}function xv(r){return!!r&&"nullValue"in r}function Pv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Eh(r){return!!r&&"mapValue"in r}function ld(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Am])===null||t===void 0?void 0:t.stringValue)===xm}function iu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xi(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=iu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function sI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iI}const oI={mapValue:{fields:{[Am]:{stringValue:xm},[Ta]:{arrayValue:{}}}}};function mP(r){return"nullValue"in r?vh:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?$s(Ui.empty(),ae.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?ld(r)?oI:{mapValue:{}}:he(35942,{value:r})}function gP(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?$s(Ui.empty(),ae.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?oI:"mapValue"in r?ld(r)?{mapValue:{}}:Vi:he(61959,{value:r})}function Rv(r,e){const t=qi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Cv(r,e){const t=qi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=lt.emptyPath(),n={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,n,o),n={},o=[],t=d.popLast()}u?n[d.lastSegment()]=iu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,o)}delete(e){const t=this.field(e.popLast());Eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];Eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){Xi(t,((o,a)=>e[o]=a));for(const o of n)delete e[o]}clone(){return new qt(iu(this.value))}}function aI(r){const e=[];return Xi(r.fields,((t,n)=>{const o=new lt([t]);if(Eh(n)){const a=aI(n.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new _n(e)}class it{constructor(e,t,n,o,a,u,d){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new it(e,0,we.min(),we.min(),we.min(),qt.empty(),0)}static newFoundDocument(e,t,n,o){return new it(e,1,t,we.min(),n,o,0)}static newNoDocument(e,t){return new it(e,2,t,we.min(),we.min(),qt.empty(),0)}static newUnknownDocument(e,t){return new it(e,3,t,we.min(),we.min(),qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $i{constructor(e,t){this.position=e,this.inclusive=t}}function kv(r,e,t){let n=0;for(let o=0;o<r.position.length;o++){const a=e[o],u=r.position[o];if(a.field.isKeyField()?n=ae.comparator(ae.fromName(u.referenceValue),t.key):n=qi(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Vv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ar(r.position[t],e.position[t]))return!1;return!0}class Eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function yP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class lI{}class Oe extends lI{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _P(e,t,n):t==="array-contains"?new EP(e,n):t==="in"?new pI(e,n):t==="not-in"?new IP(e,n):t==="array-contains-any"?new TP(e,n):new Oe(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new vP(e,n):new wP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qi(t,this.value)):t!==null&&zi(this.value)===zi(t)&&this.matchesComparison(qi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qe extends lI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Qe(e,t)}matches(e){return Aa(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Aa(r){return r.op==="and"}function Fp(r){return r.op==="or"}function Pm(r){return uI(r)&&Aa(r)}function uI(r){for(const e of r.filters)if(e instanceof Qe)return!1;return!0}function Lp(r){if(r instanceof Oe)return r.field.canonicalString()+r.op.toString()+Sa(r.value);if(Pm(r))return r.filters.map((e=>Lp(e))).join(",");{const e=r.filters.map((t=>Lp(t))).join(",");return`${r.op}(${e})`}}function cI(r,e){return r instanceof Oe?(function(n,o){return o instanceof Oe&&n.op===o.op&&n.field.isEqual(o.field)&&Ar(n.value,o.value)})(r,e):r instanceof Qe?(function(n,o){return o instanceof Qe&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((a,u,d)=>a&&cI(u,o.filters[d])),!0):!1})(r,e):void he(19439)}function hI(r,e){const t=r.filters.concat(e);return Qe.create(t,r.op)}function dI(r){return r instanceof Oe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(r):r instanceof Qe?(function(t){return t.op.toString()+" {"+t.getFilters().map(dI).join(" ,")+"}"})(r):"Filter"}class _P extends Oe{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class vP extends Oe{constructor(e,t){super(e,"in",t),this.keys=fI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wP extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=fI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fI(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>ae.fromName(n.referenceValue)))}class EP extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wu(t)&&vu(t.arrayValue,this.value)}}class pI extends Oe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}}class IP extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vu(this.value.arrayValue,t)}}class TP extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>vu(this.value.arrayValue,n)))}}class SP{constructor(e,t=null,n=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function jp(r,e=null,t=[],n=[],o=null,a=null,u=null){return new SP(r,e,t,n,o,a,u)}function Ks(r){const e=ue(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Lp(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Sa(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Sa(n))).join(",")),e.Pe=t}return e.Pe}function Du(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!yP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!cI(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Vv(r.startAt,e.startAt)&&Vv(r.endAt,e.endAt)}function jh(r){return ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Mh(r,e){return r.filters.filter((t=>t instanceof Oe&&t.field.isEqual(e)))}function Dv(r,e,t){let n=vh,o=!0;for(const a of Mh(r,e)){let u=vh,d=!0;switch(a.op){case"<":case"<=":u=mP(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=vh}Rv({value:n,inclusive:o},{value:u,inclusive:d})<0&&(n=u,o=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Rv({value:n,inclusive:o},{value:u,inclusive:t.inclusive})<0&&(n=u,o=t.inclusive);break}}return{value:n,inclusive:o}}function Nv(r,e,t){let n=Vi,o=!0;for(const a of Mh(r,e)){let u=Vi,d=!0;switch(a.op){case">=":case">":u=gP(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=Vi}Cv({value:n,inclusive:o},{value:u,inclusive:d})>0&&(n=u,o=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Cv({value:n,inclusive:o},{value:u,inclusive:t.inclusive})>0&&(n=u,o=t.inclusive);break}}return{value:n,inclusive:o}}class Yr{constructor(e,t=null,n=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mI(r,e,t,n,o,a,u,d){return new Yr(r,e,t,n,o,a,u,d)}function Ma(r){return new Yr(r)}function bv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Rm(r){return r.collectionGroup!==null}function ca(r){const e=ue(r);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new He(lt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Eu(a,n))})),t.has(lt.keyField().canonicalString())||e.Te.push(new Eu(lt.keyField(),n))}return e.Te}function an(r){const e=ue(r);return e.Ie||(e.Ie=AP(e,ca(r))),e.Ie}function AP(r,e){if(r.limitType==="F")return jp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Eu(o.field,a)}));const t=r.endAt?new $i(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new $i(r.startAt.position,r.startAt.inclusive):null;return jp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Mp(r,e){const t=r.filters.concat([e]);return new Yr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bh(r,e,t){return new Yr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Nu(r,e){return Du(an(r),an(e))&&r.limitType===e.limitType}function gI(r){return`${Ks(an(r))}|lt:${r.limitType}`}function oa(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>dI(o))).join(", ")}]`),ku(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>Sa(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>Sa(o))).join(",")),`Target(${n})`})(an(r))}; limitType=${r.limitType})`}function bu(r,e){return e.isFoundDocument()&&(function(n,o){const a=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ae.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,o){for(const a of ca(n))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,o){for(const a of n.filters)if(!a.matches(o))return!1;return!0})(r,e)&&(function(n,o){return!(n.startAt&&!(function(u,d,f){const m=kv(u,d,f);return u.inclusive?m<=0:m<0})(n.startAt,ca(n),o)||n.endAt&&!(function(u,d,f){const m=kv(u,d,f);return u.inclusive?m>=0:m>0})(n.endAt,ca(n),o))})(r,e)}function yI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _I(r){return(e,t)=>{let n=!1;for(const o of ca(r)){const a=xP(o,e,t);if(a!==0)return a;n=n||o.field.isKeyField()}return 0}}function xP(r,e,t){const n=r.field.isKeyField()?ae.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?qi(f,m):he(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return he(19790,{direction:r.dir})}}class Xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,a]of n)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,((t,n)=>{for(const[o,a]of n)e(o,a)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}const PP=new tt(ae.comparator);function vn(){return PP}const vI=new tt(ae.comparator);function Hl(...r){let e=vI;for(const t of r)e=e.insert(t.key,t);return e}function wI(r){let e=vI;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Er(){return su()}function EI(){return su()}function su(){return new Xr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const RP=new tt(ae.comparator),CP=new He(ae.comparator);function ke(...r){let e=CP;for(const t of r)e=e.add(t);return e}const kP=new He(Pe);function Cm(){return kP}function km(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function II(r){return{integerValue:""+r}}function TI(r,e){return UE(e)?II(e):km(r,e)}class ud{constructor(){this._=void 0}}function VP(r,e,t){return r instanceof xa?(function(o,a){const u={fields:{[tI]:{stringValue:eI},[rI]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&od(a)&&(a=ad(a)),a&&(u.fields[nI]=a),{mapValue:u}})(t,e):r instanceof Ws?AI(r,e):r instanceof Gs?xI(r,e):(function(o,a){const u=SI(o,a),d=Ov(u)+Ov(o.Ee);return Op(u)&&Op(o.Ee)?II(d):km(o.serializer,d)})(r,e)}function DP(r,e,t){return r instanceof Ws?AI(r,e):r instanceof Gs?xI(r,e):t}function SI(r,e){return r instanceof Pa?(function(n){return Op(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class xa extends ud{}class Ws extends ud{constructor(e){super(),this.elements=e}}function AI(r,e){const t=PI(e);for(const n of r.elements)t.some((o=>Ar(o,n)))||t.push(n);return{arrayValue:{values:t}}}class Gs extends ud{constructor(e){super(),this.elements=e}}function xI(r,e){let t=PI(e);for(const n of r.elements)t=t.filter((o=>!Ar(o,n)));return{arrayValue:{values:t}}}class Pa extends ud{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ov(r){return at(r.integerValue||r.doubleValue)}function PI(r){return wu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Ou{constructor(e,t){this.field=e,this.transform=t}}function NP(r,e){return r.field.isEqual(e.field)&&(function(n,o){return n instanceof Ws&&o instanceof Ws||n instanceof Gs&&o instanceof Gs?ya(n.elements,o.elements,Ar):n instanceof Pa&&o instanceof Pa?Ar(n.Ee,o.Ee):n instanceof xa&&o instanceof xa})(r.transform,e.transform)}class bP{constructor(e,t){this.version=e,this.transformResults=t}}class ut{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ut}static exists(e){return new ut(void 0,e)}static updateTime(e){return new ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class cd{}function RI(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ua(r.key,ut.none()):new Ba(r.key,r.data,ut.none());{const t=r.data,n=qt.empty();let o=new He(lt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),o=o.add(a)}return new Jr(r.key,n,new _n(o.toArray()),ut.none())}}function OP(r,e,t){r instanceof Ba?(function(o,a,u){const d=o.value.clone(),f=Lv(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Jr?(function(o,a,u){if(!Ih(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Lv(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(CI(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(r,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ou(r,e,t,n){return r instanceof Ba?(function(a,u,d,f){if(!Ih(a.precondition,u))return d;const m=a.value.clone(),v=jv(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(r,e,t,n):r instanceof Jr?(function(a,u,d,f){if(!Ih(a.precondition,u))return d;const m=jv(a.fieldTransforms,f,u),v=u.data;return v.setAll(CI(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(r,e,t,n):(function(a,u,d){return Ih(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(r,e,t)}function FP(r,e){let t=null;for(const n of r.fieldTransforms){const o=e.data.field(n.field),a=SI(n.transform,o||null);a!=null&&(t===null&&(t=qt.empty()),t.set(n.field,a))}return t||null}function Fv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&ya(n,o,((a,u)=>NP(a,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ba extends cd{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Jr extends cd{constructor(e,t,n,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CI(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Lv(r,e,t){const n=new Map;ge(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const a=r[o],u=a.transform,d=e.data.field(a.field);n.set(a.field,DP(u,d,t[o]))}return n}function jv(r,e,t){const n=new Map;for(const o of r){const a=o.transform,u=t.data.field(o.field);n.set(o.field,VP(a,u,e))}return n}class Ua extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vm extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dm{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&OP(a,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ou(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ou(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=EI();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=RI(u,d);f!==null&&n.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(we.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,((t,n)=>Fv(t,n)))&&ya(this.baseMutations,e.baseMutations,((t,n)=>Fv(t,n)))}}class Nm{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){ge(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let o=(function(){return RP})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,n[u].version);return new Nm(e,t,n,o)}}class bm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class LP{constructor(e,t){this.count=e,this.unchangedNames=t}}var It,Be;function kI(r){switch(r){case K.OK:return he(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return he(15467,{code:r})}}function VI(r){if(r===void 0)return yt("GRPC error has no .code"),K.UNKNOWN;switch(r){case It.OK:return K.OK;case It.CANCELLED:return K.CANCELLED;case It.UNKNOWN:return K.UNKNOWN;case It.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case It.INTERNAL:return K.INTERNAL;case It.UNAVAILABLE:return K.UNAVAILABLE;case It.UNAUTHENTICATED:return K.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case It.NOT_FOUND:return K.NOT_FOUND;case It.ALREADY_EXISTS:return K.ALREADY_EXISTS;case It.PERMISSION_DENIED:return K.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case It.ABORTED:return K.ABORTED;case It.OUT_OF_RANGE:return K.OUT_OF_RANGE;case It.UNIMPLEMENTED:return K.UNIMPLEMENTED;case It.DATA_LOSS:return K.DATA_LOSS;default:return he(39323,{code:r})}}(Be=It||(It={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";const jP=new Oi([4294967295,4294967295],0);function Mv(r){const e=gm().encode(r),t=new SE;return t.update(e),new Uint8Array(t.digest())}function Bv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Oi([t,n],0),new Oi([o,a],0)]}class Om{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yl(`Invalid padding: ${t}`);if(n<0)throw new Yl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Oi.fromNumber(this.fe)}pe(e,t,n){let o=e.add(t.multiply(Oi.fromNumber(n)));return o.compare(jP)===1&&(o=new Oi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Mv(e),[n,o]=Bv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(n,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Om(a,o,t);return n.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=Mv(e),[n,o]=Bv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(n,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fu{constructor(e,t,n,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fu(we.min(),o,new tt(Pe),vn(),ke())}}class Lu{constructor(e,t,n,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lu(n,t,ke(),ke(),ke())}}class Th{constructor(e,t,n,o){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=o}}class DI{constructor(e,t){this.targetId=e,this.De=t}}class NI{constructor(e,t,n=pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class Uv{constructor(){this.ve=0,this.Ce=zv(),this.Fe=pt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),t=ke(),n=ke();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:he(38017,{changeType:a})}})),new Lu(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=zv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class MP{constructor(e){this.We=e,this.Ge=new Map,this.ze=vn(),this.je=uh(),this.Je=uh(),this.He=new tt(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((n,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,n=e.De.count,o=this.st(t);if(o){const a=o.target;if(jh(a))if(n===0){const u=new ae(a.path);this.Xe(t,u,it.newNoDocument(u,we.min()))}else ge(n===1,20013,{expectedCount:n});else{const u=this.ot(t);if(u!==n){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Qr(n).toUint8Array()}catch(f){if(f instanceof ZE)return Rn("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Om(u,o,a)}catch(f){return Rn(f instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let o=0;return n.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&jh(d.target)){const f=new ae(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,it.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let n=ke();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new Fu(e,t,this.He,this.ze,n);return this.ze=vn(),this.je=uh(),this.Je=uh(),this.He=new tt(Pe),o}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Uv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new He(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new He(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Uv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function uh(){return new tt(ae.comparator)}function zv(){return new tt(ae.comparator)}const BP={asc:"ASCENDING",desc:"DESCENDING"},UP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zP={and:"AND",or:"OR"};class qP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bp(r,e){return r.useProto3Json||ku(e)?e:{value:e}}function Ra(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bI(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $P(r,e){return Ra(r,e.toTimestamp())}function _t(r){return ge(!!r,49232),we.fromTimestamp((function(t){const n=Gr(t);return new We(n.seconds,n.nanos)})(r))}function Fm(r,e){return Up(r,e).canonicalString()}function Up(r,e){const t=(function(o){return new be(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function OI(r){const e=be.fromString(r);return ge(KI(e),10190,{key:e.toString()}),e}function Iu(r,e){return Fm(r.databaseId,e.path)}function Tr(r,e){const t=OI(e);if(t.get(1)!==r.databaseId.projectId)throw new Y(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Y(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ae(jI(t))}function FI(r,e){return Fm(r.databaseId,e)}function LI(r){const e=OI(r);return e.length===4?be.emptyPath():jI(e)}function zp(r){return new be(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jI(r){return ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qv(r,e,t){return{name:Iu(r,e),fields:t.value.mapValue.fields}}function MI(r,e,t){const n=Tr(r,e.name),o=_t(e.updateTime),a=e.createTime?_t(e.createTime):we.min(),u=new qt({mapValue:{fields:e.fields}}),d=it.newFoundDocument(n,o,a,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function KP(r,e){return"found"in e?(function(n,o){ge(!!o.found,43571),o.found.name,o.found.updateTime;const a=Tr(n,o.found.name),u=_t(o.found.updateTime),d=o.found.createTime?_t(o.found.createTime):we.min(),f=new qt({mapValue:{fields:o.found.fields}});return it.newFoundDocument(a,u,d,f)})(r,e):"missing"in e?(function(n,o){ge(!!o.missing,3894),ge(!!o.readTime,22933);const a=Tr(n,o.missing),u=_t(o.readTime);return it.newNoDocument(a,u)})(r,e):he(7234,{result:e})}function WP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:he(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(ge(v===void 0||typeof v=="string",58123),pt.fromBase64String(v||"")):(ge(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),pt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?K.UNKNOWN:VI(m.code);return new Y(v,m.message||"")})(u);t=new NI(n,o,a,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=Tr(r,n.document.name),a=_t(n.document.updateTime),u=n.document.createTime?_t(n.document.createTime):we.min(),d=new qt({mapValue:{fields:n.document.fields}}),f=it.newFoundDocument(o,a,u,d),m=n.targetIds||[],v=n.removedTargetIds||[];t=new Th(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=Tr(r,n.document),a=n.readTime?_t(n.readTime):we.min(),u=it.newNoDocument(o,a),d=n.removedTargetIds||[];t=new Th([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=Tr(r,n.document),a=n.removedTargetIds||[];t=new Th([],a,o,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:a}=n,u=new LP(o,a),d=n.targetId;t=new DI(d,u)}}return t}function Tu(r,e){let t;if(e instanceof Ba)t={update:qv(r,e.key,e.value)};else if(e instanceof Ua)t={delete:Iu(r,e.key)};else if(e instanceof Jr)t={update:qv(r,e.key,e.data),updateMask:JP(e.fieldMask)};else{if(!(e instanceof Vm))return he(16599,{Rt:e.type});t={verify:Iu(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,u){const d=u.transform;if(d instanceof xa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ws)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Gs)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pa)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw he(20930,{transform:u.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:$P(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:he(27497)})(r,e.precondition)),t}function qp(r,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?ut.updateTime(_t(a.updateTime)):a.exists!==void 0?ut.exists(a.exists):ut.none()})(e.currentDocument):ut.none(),n=e.updateTransforms?e.updateTransforms.map((o=>(function(u,d){let f=null;if("setToServerValue"in d)ge(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),f=new xa;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];f=new Ws(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];f=new Gs(v)}else"increment"in d?f=new Pa(u,d.increment):he(16584,{proto:d});const m=lt.fromServerFormat(d.fieldPath);return new Ou(m,f)})(r,o))):[];if(e.update){e.update.name;const o=Tr(r,e.update.name),a=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new _n(m.map((v=>lt.fromServerFormat(v))))})(e.updateMask);return new Jr(o,a,u,t,n)}return new Ba(o,a,t,n)}if(e.delete){const o=Tr(r,e.delete);return new Ua(o,t)}if(e.verify){const o=Tr(r,e.verify);return new Vm(o,t)}return he(1463,{proto:e})}function GP(r,e){return r&&r.length>0?(ge(e!==void 0,14353),r.map((t=>(function(o,a){let u=o.updateTime?_t(o.updateTime):_t(a);return u.isEqual(we.min())&&(u=_t(a)),new bP(u,o.transformResults||[])})(t,e)))):[]}function BI(r,e){return{documents:[FI(r,e.path)]}}function UI(r,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=FI(r,o);const a=(function(m){if(m.length!==0)return $I(Qe.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:aa(T.field),direction:HP(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Bp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function zI(r){let e=LI(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){ge(n===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(w){const T=qI(w);return T instanceof Qe&&Pm(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(U){return new Eu(la(U.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let T;return T=typeof w=="object"?w.value:w,ku(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(w){const T=!!w.before,C=w.values||[];return new $i(C,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const T=!w.before,C=w.values||[];return new $i(C,T)})(t.endAt)),mI(e,o,u,a,d,"F",f,m)}function QP(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qI(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=la(t.unaryFilter.field);return Oe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=la(t.unaryFilter.field);return Oe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=la(t.unaryFilter.field);return Oe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=la(t.unaryFilter.field);return Oe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Oe.create(la(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Qe.create(t.compositeFilter.filters.map((n=>qI(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(r):he(30097,{filter:r})}function HP(r){return BP[r]}function YP(r){return UP[r]}function XP(r){return zP[r]}function aa(r){return{fieldPath:r.canonicalString()}}function la(r){return lt.fromServerFormat(r.fieldPath)}function $I(r){return r instanceof Oe?(function(t){if(t.op==="=="){if(Pv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(xv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(xv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:YP(t.op),value:t.value}}})(r):r instanceof Qe?(function(t){const n=t.getFilters().map((o=>$I(o)));return n.length===1?n[0]:{compositeFilter:{op:XP(t.op),filters:n}}})(r):he(54877,{filter:r})}function JP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KI(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class $r{constructor(e,t,n,o,a=we.min(),u=we.min(),d=pt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WI{constructor(e){this.gt=e}}function ZP(r,e){let t;if(e.document)t=MI(r.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ae.fromSegments(e.noDocument.path),o=Hs(e.noDocument.readTime);t=it.newNoDocument(n,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const n=ae.fromSegments(e.unknownDocument.path),o=Hs(e.unknownDocument.version);t=it.newUnknownDocument(n,o)}}return e.readTime&&t.setReadTime((function(o){const a=new We(o[0],o[1]);return we.fromTimestamp(a)})(e.readTime)),t}function $v(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,u){return{name:Iu(a,u.key),fields:u.data.value.mapValue.fields,updateTime:Ra(a,u.version.toTimestamp()),createTime:Ra(a,u.createTime.toTimestamp())}})(r.gt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Qs(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Qs(e.version)}}return n}function Uh(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Qs(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hs(r){const e=new We(r.seconds,r.nanoseconds);return we.fromTimestamp(e)}function Os(r,e){const t=(e.baseMutations||[]).map((a=>qp(r.gt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>qp(r.gt,a))),o=We.fromMillis(e.localWriteTimeMs);return new Dm(e.batchId,o,t,n)}function Xl(r){const e=Hs(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Hs(r.lastLimboFreeSnapshotVersion):we.min();let n;return n=(function(a){return a.documents!==void 0})(r.query)?(function(a){const u=a.documents.length;return ge(u===1,1966,{count:u}),an(Ma(LI(a.documents[0])))})(r.query):(function(a){return an(zI(a))})(r.query),new $r(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,pt.fromBase64String(r.resumeToken))}function GI(r,e){const t=Qs(e.snapshotVersion),n=Qs(e.lastLimboFreeSnapshotVersion);let o;o=jh(e.target)?BI(r.gt,e.target):UI(r.gt,e.target).Vt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ks(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:o}}function Lm(r){const e=zI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bh(e,e.limit,"L"):e}function hp(r,e){return new bm(e.largestBatchId,qp(r.gt,e.overlayMutation))}function Kv(r,e){const t=e.path.lastSegment();return[r,Jt(e.path.popLast()),t]}function Wv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Qs(n.readTime),documentKey:Jt(n.documentKey.path),largestBatchId:n.largestBatchId}}class eR{getBundleMetadata(e,t){return Gv(e).get(t).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:Hs(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,t){return Gv(e).put((function(o){return{bundleId:o.id,createTime:Qs(_t(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return Qv(e).get(t).next((n=>{if(n)return(function(a){return{name:a.name,query:Lm(a.bundledQuery),readTime:Hs(a.readTime)}})(n)}))}saveNamedQuery(e,t){return Qv(e).put((function(o){return{name:o.name,readTime:Qs(_t(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function Gv(r){return kt(r,rd)}function Qv(r){return kt(r,id)}class hd{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const n=t.uid||"";return new hd(e,n)}getOverlay(e,t){return Ul(e).get(Kv(this.userId,t)).next((n=>n?hp(this.serializer,n):null))}getOverlays(e,t){const n=Er();return M.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){const o=[];return n.forEach(((a,u)=>{const d=new bm(t,u);o.push(this.wt(e,d))})),M.waitFor(o)}removeOverlaysForBatchId(e,t,n){const o=new Set;t.forEach((u=>o.add(Jt(u.getCollectionPath()))));const a=[];return o.forEach((u=>{const d=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(Ul(e).Y(Vp,d))})),M.waitFor(a)}getOverlaysForCollection(e,t,n){const o=Er(),a=Jt(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ul(e).j(Vp,u).next((d=>{for(const f of d){const m=hp(this.serializer,f);o.set(m.getKey(),m)}return o}))}getOverlaysForCollectionGroup(e,t,n,o){const a=Er();let u;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ul(e).X({index:GE,range:d},((f,m,v)=>{const w=hp(this.serializer,m);a.size()<o||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):v.done()})).next((()=>a))}wt(e,t){return Ul(e).put((function(o,a,u){const[d,f,m]=Kv(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Tu(o.gt,u.mutation)}})(this.serializer,this.userId,t))}}function Ul(r){return kt(r,sd)}class tR{St(e){return kt(e,Tm)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const n=t?.value;return n?pt.fromUint8Array(n):pt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Fs{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(at(e.integerValue));else if("doubleValue"in e){const n=at(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),pu(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),typeof n=="string"&&(n=Gr(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Qr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?sI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):ld(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):he(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const o of Object.keys(n))this.xt(o,t),this.Dt(n[o],t)}Lt(e,t){var n,o;const a=e.fields||{};this.Ct(t,53);const u=Ta,d=((o=(n=a[u].arrayValue)===null||n===void 0?void 0:n.values)===null||o===void 0?void 0:o.length)||0;this.Ct(t,15),t.Ft(at(d)),this.xt(u,t),this.Dt(a[u],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const o of n)this.Dt(o,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach((n=>{this.Ct(t,60),this.$t(n,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Fs.Ut=new Fs;const ea=255;function nR(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function Hv(r){const e=64-(function(n){let o=0;for(let a=0;a<8;++a){const u=nR(255&n[a]);if(o+=u,u!==8)break}return o})(r);return Math.ceil(e/8)}class rR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Wt(n.value),n=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.jt(n.value),n=t.next();this.Jt()}Ht(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Wt(n);else if(n<2048)this.Wt(960|n>>>6),this.Wt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|n>>>12),this.Wt(128|63&n>>>6),this.Wt(128|63&n);else{const o=t.codePointAt(0);this.Wt(240|o>>>18),this.Wt(128|63&o>>>12),this.Wt(128|63&o>>>6),this.Wt(128|63&o)}}this.Gt()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.jt(n);else if(n<2048)this.jt(960|n>>>6),this.jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|n>>>12),this.jt(128|63&n>>>6),this.jt(128|63&n);else{const o=t.codePointAt(0);this.jt(240|o>>>18),this.jt(128|63&o>>>12),this.jt(128|63&o>>>6),this.jt(128|63&o)}}this.Jt()}Zt(e){const t=this.Xt(e),n=Hv(t);this.en(1+n),this.buffer[this.position++]=255&n;for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=255&t[o]}tn(e){const t=this.Xt(e),n=Hv(t);this.en(1+n),this.buffer[this.position++]=~(255&n);for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}nn(){this.rn(ea),this.rn(255)}sn(){this._n(ea),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let o=1;o<t.length;++o)t[o]^=n?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===ea?(this.rn(ea),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===ea?(this._n(ea),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const o=new Uint8Array(n);o.set(this.buffer),this.buffer=o}}class iR{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class sR{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class zl{constructor(){this.un=new rR,this.cn=new iR(this.un),this.ln=new sR(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}class Ls{constructor(e,t,n,o){this.Pn=e,this.Tn=t,this.In=n,this.dn=o}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Ls(this.Pn,this.Tn,this.In,n)}An(e,t,n){return{indexId:this.Pn,uid:e,arrayValue:Sh(this.In),directionalValue:Sh(this.dn),orderedDocumentKey:Sh(t),documentKey:n.path.toArray()}}Rn(e,t,n){const o=this.An(e,t,n);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Ai(r,e){let t=r.Pn-e.Pn;return t!==0?t:(t=Yv(r.In,e.In),t!==0?t:(t=Yv(r.dn,e.dn),t!==0?t:ae.comparator(r.Tn,e.Tn)))}function Yv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Sh(r){return lE()?(function(t){let n="";for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return n})(r):r}function Xv(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(r)}class Jv{constructor(e){this.Vn=new He(((t,n)=>lt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Vn=this.Vn.add(n):this.fn.push(n)}}get gn(){return this.Vn.size>1}pn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Rp(e);if(t!==void 0&&!this.yn(t))return!1;const n=Ds(e);let o=new Set,a=0,u=0;for(;a<n.length&&this.yn(n[a]);++a)o=o.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const f=n[a];if(!this.wn(d,f)||!this.Sn(this.mn[u++],f))return!1}++a}for(;a<n.length;++a){const d=n[a];if(u>=this.mn.length||!this.Sn(this.mn[u++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new He(lt.comparator);const t=[];for(const n of this.fn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new gh(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new gh(n.field,0))}for(const n of this.mn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new gh(n.field,n.dir==="asc"?0:1)));return new bh(bh.UNKNOWN_ID,this.collectionId,t,fu.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function QI(r){var e,t;if(ge(r instanceof Oe||r instanceof Qe,20012),r instanceof Oe){if(r instanceof pI){const o=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>Oe.create(r.field,"==",a))))||[];return Qe.create(o,"or")}return r}const n=r.filters.map((o=>QI(o)));return Qe.create(n,r.op)}function oR(r){if(r.getFilters().length===0)return[];const e=Wp(QI(r));return ge(HI(e),7391),$p(e)||Kp(e)?[e]:e.getFilters()}function $p(r){return r instanceof Oe}function Kp(r){return r instanceof Qe&&Pm(r)}function HI(r){return $p(r)||Kp(r)||(function(t){if(t instanceof Qe&&Fp(t)){for(const n of t.getFilters())if(!$p(n)&&!Kp(n))return!1;return!0}return!1})(r)}function Wp(r){if(ge(r instanceof Oe||r instanceof Qe,34018),r instanceof Oe)return r;if(r.filters.length===1)return Wp(r.filters[0]);const e=r.filters.map((n=>Wp(n)));let t=Qe.create(e,r.op);return t=zh(t),HI(t)?t:(ge(t instanceof Qe,64498),ge(Aa(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((n,o)=>jm(n,o))))}function jm(r,e){let t;return ge(r instanceof Oe||r instanceof Qe,38388),ge(e instanceof Oe||e instanceof Qe,25473),t=r instanceof Oe?e instanceof Oe?(function(o,a){return Qe.create([o,a],"and")})(r,e):Zv(r,e):e instanceof Oe?Zv(e,r):(function(o,a){if(ge(o.filters.length>0&&a.filters.length>0,48005),Aa(o)&&Aa(a))return hI(o,a.getFilters());const u=Fp(o)?o:a,d=Fp(o)?a:o,f=u.filters.map((m=>jm(m,d)));return Qe.create(f,"or")})(r,e),zh(t)}function Zv(r,e){if(Aa(e))return hI(e,r.getFilters());{const t=e.filters.map((n=>jm(r,n)));return Qe.create(t,"or")}}function zh(r){if(ge(r instanceof Oe||r instanceof Qe,11850),r instanceof Oe)return r;const e=r.getFilters();if(e.length===1)return zh(e[0]);if(uI(r))return r;const t=e.map((o=>zh(o))),n=[];return t.forEach((o=>{o instanceof Oe?n.push(o):o instanceof Qe&&(o.op===r.op?n.push(...o.filters):n.push(o))})),n.length===1?n[0]:Qe.create(n,r.op)}class aR{constructor(){this.Dn=new Mm}addToCollectionParentIndex(e,t){return this.Dn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Cn.min())}updateCollectionGroup(e,t,n){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class Mm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new He(be.comparator),a=!o.has(n);return this.index[t]=o.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new He(be.comparator)).toArray()}}const ew="IndexedDbIndexManager",ch=new Uint8Array(0);class lR{constructor(e,t){this.databaseId=t,this.vn=new Mm,this.Cn=new Xr((n=>Ks(n)),((n,o)=>Du(n,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:n,parent:Jt(o)};return tw(e).put(a)}return M.resolve()}getCollectionParents(e,t){const n=[],o=IDBKeyRange.bound([t,""],[DE(t),""],!1,!0);return tw(e).j(o).next((a=>{for(const u of a){if(u.collectionId!==t)break;n.push(wr(u.parent))}return n}))}addFieldIndex(e,t){const n=ql(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete o.indexId;const a=n.add(o);if(t.indexState){const u=na(e);return a.next((d=>{u.put(Wv(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const n=ql(e),o=na(e),a=ta(e);return n.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ql(e),n=ta(e),o=na(e);return t.Y().next((()=>n.Y())).next((()=>o.Y()))}createTargetIndexes(e,t){return M.forEach(this.Fn(t),(n=>this.getIndexType(e,n).next((o=>{if(o===0||o===1){const a=new Jv(n).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const n=ta(e);let o=!0;const a=new Map;return M.forEach(this.Fn(t),(u=>this.Mn(e,u).next((d=>{o&&(o=!!d),a.set(u,d)})))).next((()=>{if(o){let u=ke();const d=[];return M.forEach(a,((f,m)=>{X(ew,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map((ne=>`${ne.fieldPath}:${ne.kind}`)).join(",")}`})(f)} to execute ${Ks(t)}`);const v=(function(G,ne){const _e=Rp(ne);if(_e===void 0)return null;for(const pe of Mh(G,_e.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(m,f),w=(function(G,ne){const _e=new Map;for(const pe of Ds(ne))for(const D of Mh(G,pe.fieldPath))switch(D.op){case"==":case"in":_e.set(pe.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return _e.set(pe.fieldPath.canonicalString(),D.value),Array.from(_e.values())}return null})(m,f),T=(function(G,ne){const _e=[];let pe=!0;for(const D of Ds(ne)){const x=D.kind===0?Dv(G,D.fieldPath,G.startAt):Nv(G,D.fieldPath,G.startAt);_e.push(x.value),pe&&(pe=x.inclusive)}return new $i(_e,pe)})(m,f),C=(function(G,ne){const _e=[];let pe=!0;for(const D of Ds(ne)){const x=D.kind===0?Nv(G,D.fieldPath,G.endAt):Dv(G,D.fieldPath,G.endAt);_e.push(x.value),pe&&(pe=x.inclusive)}return new $i(_e,pe)})(m,f),U=this.xn(f,m,T),F=this.xn(f,m,C),O=this.On(f,m,w),te=this.Nn(f.indexId,v,U,T.inclusive,F,C.inclusive,O);return M.forEach(te,(ee=>n.H(ee,t.limit).next((G=>{G.forEach((ne=>{const _e=ae.fromSegments(ne.documentKey);u.has(_e)||(u=u.add(_e),d.push(_e))}))}))))})).next((()=>d))}return M.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=oR(Qe.create(e.filters,"and")).map((n=>jp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,n,o,a,u,d){const f=(t!=null?t.length:1)*Math.max(n.length,a.length),m=f/(t!=null?t.length:1),v=[];for(let w=0;w<f;++w){const T=t?this.Bn(t[w/m]):ch,C=this.Ln(e,T,n[w%m],o),U=this.kn(e,T,a[w%m],u),F=d.map((O=>this.Ln(e,T,O,!0)));v.push(...this.createRange(C,U,F))}return v}Ln(e,t,n,o){const a=new Ls(e,ae.empty(),t,n);return o?a:a.En()}kn(e,t,n,o){const a=new Ls(e,ae.empty(),t,n);return o?a.En():a}Mn(e,t){const n=new Jv(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((a=>{let u=null;for(const d of a)n.pn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u}))}getIndexType(e,t){let n=2;const o=this.Fn(t);return M.forEach(o,(a=>this.Mn(e,a).next((u=>{u?n!==0&&u.fields.length<(function(f){let m=new He(lt.comparator),v=!1;for(const w of f.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:m=m.add(T.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(v?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(u){return u.limit!==null})(t)&&o.length>1&&n===2?1:n))}qn(e,t){const n=new zl;for(const o of Ds(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const u=n.hn(o.kind);Fs.Ut.bt(a,u)}return n.an()}Bn(e){const t=new zl;return Fs.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const n=new zl;return Fs.Ut.bt($s(this.databaseId,t),n.hn((function(a){const u=Ds(a);return u.length===0?0:u[u.length-1].kind})(e))),n.an()}On(e,t,n){if(n===null)return[];let o=[];o.push(new zl);let a=0;for(const u of Ds(e)){const d=n[a++];for(const f of o)if(this.$n(t,u.fieldPath)&&wu(d))o=this.Un(o,u,d);else{const m=f.hn(u.kind);Fs.Ut.bt(d,m)}}return this.Kn(o)}xn(e,t,n){return this.On(e,t,n.position)}Kn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].an();return t}Un(e,t,n){const o=[...e],a=[];for(const u of n.arrayValue.values||[])for(const d of o){const f=new zl;f.seed(d.an()),Fs.Ut.bt(u,f.hn(t.kind)),a.push(f)}return a}$n(e,t){return!!e.filters.find((n=>n instanceof Oe&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=ql(e),o=na(e);return(t?n.j(kp,IDBKeyRange.bound(t,t)):n.j()).next((a=>{const u=[];return M.forEach(a,(d=>o.get([d.indexId,this.uid]).next((f=>{u.push((function(v,w){const T=w?new fu(w.sequenceNumber,new Cn(Hs(w.readTime),new ae(wr(w.documentKey)),w.largestBatchId)):fu.empty(),C=v.fields.map((([U,F])=>new gh(lt.fromServerFormat(U),F)));return new bh(v.indexId,v.collectionGroup,C,T)})(d,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,o)=>{const a=n.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:Pe(n.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const o=ql(e),a=na(e);return this.Wn(e).next((u=>o.j(kp,IDBKeyRange.bound(t,t)).next((d=>M.forEach(d,(f=>a.put(Wv(f.indexId,this.uid,u,n))))))))}updateIndexEntries(e,t){const n=new Map;return M.forEach(t,((o,a)=>{const u=n.get(o.collectionGroup);return(u?M.resolve(u):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(n.set(o.collectionGroup,d),M.forEach(d,(f=>this.Gn(e,o,f).next((m=>{const v=this.zn(a,f);return m.isEqual(v)?M.resolve():this.jn(e,a,f,m,v)})))))))}))}Jn(e,t,n,o){return ta(e).put(o.An(this.uid,this.Qn(n,t.key),t.key))}Hn(e,t,n,o){return ta(e).delete(o.Rn(this.uid,this.Qn(n,t.key),t.key))}Gn(e,t,n){const o=ta(e);let a=new He(Ai);return o.X({index:WE,range:IDBKeyRange.only([n.indexId,this.uid,Sh(this.Qn(n,t))])},((u,d)=>{a=a.add(new Ls(n.indexId,t,Xv(d.arrayValue),Xv(d.directionalValue)))})).next((()=>a))}zn(e,t){let n=new He(Ai);const o=this.qn(t,e);if(o==null)return n;const a=Rp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(wu(u))for(const d of u.arrayValue.values||[])n=n.add(new Ls(t.indexId,e.key,this.Bn(d),o))}else n=n.add(new Ls(t.indexId,e.key,ch,o));return n}jn(e,t,n,o,a){X(ew,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,v,w,T){const C=f.getIterator(),U=m.getIterator();let F=Zo(C),O=Zo(U);for(;F||O;){let te=!1,ee=!1;if(F&&O){const G=v(F,O);G<0?ee=!0:G>0&&(te=!0)}else F!=null?ee=!0:te=!0;te?(w(O),O=Zo(U)):ee?(T(F),F=Zo(C)):(F=Zo(C),O=Zo(U))}})(o,a,Ai,(d=>{u.push(this.Jn(e,t,n,d))}),(d=>{u.push(this.Hn(e,t,n,d))})),M.waitFor(u)}Wn(e){let t=1;return na(e).X({index:KE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,o,a)=>{a.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((u,d)=>Ai(u,d))).filter(((u,d,f)=>!d||Ai(u,f[d-1])!==0));const o=[];o.push(e);for(const u of n){const d=Ai(u,e),f=Ai(u,t);if(d===0)o[0]=e.En();else if(d>0&&f<0)o.push(u),o.push(u.En());else if(f>0)break}o.push(t);const a=[];for(let u=0;u<o.length;u+=2){if(this.Yn(o[u],o[u+1]))return[];const d=o[u].Rn(this.uid,ch,ae.empty()),f=o[u+1].Rn(this.uid,ch,ae.empty());a.push(IDBKeyRange.bound(d,f))}return a}Yn(e,t){return Ai(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nw)}getMinOffset(e,t){return M.mapArray(this.Fn(t),(n=>this.Mn(e,n).next((o=>o||he(44426))))).next(nw)}}function tw(r){return kt(r,yu)}function ta(r){return kt(r,ru)}function ql(r){return kt(r,Im)}function na(r){return kt(r,nu)}function nw(r){ge(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const o=r[n].indexState.offset;vm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}const rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YI=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function XI(r,e,t){const n=r.store(ir),o=r.store(va),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const f=n.X({range:u},((v,w,T)=>(d++,T.delete())));a.push(f.next((()=>{ge(d===1,47070,{batchId:t.batchId})})));const m=[];for(const v of t.mutations){const w=zE(e,v.key.path,t.batchId);a.push(o.delete(w)),m.push(v.key)}return M.waitFor(a).next((()=>m))}function qh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw he(14731);e=r.noDocument}return JSON.stringify(e).length}Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(YI,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);class dd{constructor(e,t,n,o){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=o,this.Zn={}}static yt(e,t,n,o){ge(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new dd(a,t,n,o)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xi(e).X({index:Ms,range:n},((o,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,n,o){const a=ua(e),u=xi(e);return u.add({}).next((d=>{ge(typeof d=="number",49019);const f=new Dm(d,t,n,o),m=(function(C,U,F){const O=F.baseMutations.map((ee=>Tu(C.gt,ee))),te=F.mutations.map((ee=>Tu(C.gt,ee)));return{userId:U,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:O,mutations:te}})(this.serializer,this.userId,f),v=[];let w=new He(((T,C)=>Pe(T.canonicalString(),C.canonicalString())));for(const T of o){const C=zE(this.userId,T.key.path,d);w=w.add(T.key.path.popLast()),v.push(u.put(m)),v.push(a.put(C,zx))}return w.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[d]=f.keys()})),M.waitFor(v).next((()=>f))}))}lookupMutationBatch(e,t){return xi(e).get(t).next((n=>n?(ge(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),Os(this.serializer,n)):null))}Xn(e,t){return this.Zn[t]?M.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const o=n.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return xi(e).X({index:Ms,range:o},((u,d,f)=>{d.userId===this.userId&&(ge(d.batchId>=n,47524,{er:n}),a=Os(this.serializer,d)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Fi;return xi(e).X({index:Ms,range:t,reverse:!0},((o,a,u)=>{n=a.batchId,u.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Fi],[this.userId,Number.POSITIVE_INFINITY]);return xi(e).j(Ms,t).next((n=>n.map((o=>Os(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=yh(this.userId,t.path),o=IDBKeyRange.lowerBound(n),a=[];return ua(e).X({range:o},((u,d,f)=>{const[m,v,w]=u,T=wr(v);if(m===this.userId&&t.path.isEqual(T))return xi(e).get(w).next((C=>{if(!C)throw he(61480,{tr:u,batchId:w});ge(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:w}),a.push(Os(this.serializer,C))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new He(Pe);const o=[];return t.forEach((a=>{const u=yh(this.userId,a.path),d=IDBKeyRange.lowerBound(u),f=ua(e).X({range:d},((m,v,w)=>{const[T,C,U]=m,F=wr(C);T===this.userId&&a.path.isEqual(F)?n=n.add(U):w.done()}));o.push(f)})),M.waitFor(o).next((()=>this.nr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1,a=yh(this.userId,n),u=IDBKeyRange.lowerBound(a);let d=new He(Pe);return ua(e).X({range:u},((f,m,v)=>{const[w,T,C]=f,U=wr(T);w===this.userId&&n.isPrefixOf(U)?U.length===o&&(d=d.add(C)):v.done()})).next((()=>this.nr(e,d)))}nr(e,t){const n=[],o=[];return t.forEach((a=>{o.push(xi(e).get(a).next((u=>{if(u===null)throw he(35274,{batchId:a});ge(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),n.push(Os(this.serializer,u))})))})),M.waitFor(o).next((()=>n))}removeMutationBatch(e,t){return XI(e.ce,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),M.forEach(n,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return M.resolve();const n=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),o=[];return ua(e).X({range:n},((a,u,d)=>{if(a[0]===this.userId){const f=wr(a[1]);o.push(f)}else d.done()})).next((()=>{ge(o.length===0,56720,{ir:o.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return JI(e,this.userId,t)}sr(e){return ZI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Fi,lastStreamToken:""}))}}function JI(r,e,t){const n=yh(e,t.path),o=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return ua(r).X({range:a,Z:!0},((d,f,m)=>{const[v,w,T]=d;v===e&&w===o&&(u=!0),m.done()})).next((()=>u))}function xi(r){return kt(r,ir)}function ua(r){return kt(r,va)}function ZI(r){return kt(r,mu)}class Ys{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ys(0)}static ur(){return new Ys(-1)}}class uR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const n=new Ys(t.highestTargetId);return t.highestTargetId=n.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>we.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.cr(e).next((o=>(o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.lr(e,o))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((n=>(n.targetCount+=1,this.Pr(t,n),this.lr(e,n))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ra(e).delete(t.targetId))).next((()=>this.cr(e))).next((n=>(ge(n.targetCount>0,8065),n.targetCount-=1,this.lr(e,n))))}removeTargets(e,t,n){let o=0;const a=[];return ra(e).X(((u,d)=>{const f=Xl(d);f.sequenceNumber<=t&&n.get(f.targetId)===null&&(o++,a.push(this.removeTargetData(e,f)))})).next((()=>M.waitFor(a))).next((()=>o))}forEachTarget(e,t){return ra(e).X(((n,o)=>{const a=Xl(o);t(a)}))}cr(e){return iw(e).get(Lh).next((t=>(ge(t!==null,2888),t)))}lr(e,t){return iw(e).put(Lh,t)}hr(e,t){return ra(e).put(GI(this.serializer,t))}Pr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Ks(t),o=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return ra(e).X({range:o,index:$E},((u,d,f)=>{const m=Xl(d);Du(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,n){const o=[],a=Ci(e);return t.forEach((u=>{const d=Jt(u.path);o.push(a.put({targetId:n,path:d})),o.push(this.referenceDelegate.addReference(e,n,u))})),M.waitFor(o)}removeMatchingKeys(e,t,n){const o=Ci(e);return M.forEach(t,(a=>{const u=Jt(a.path);return M.waitFor([o.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,t){const n=Ci(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(o)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ci(e);let a=ke();return o.X({range:n,Z:!0},((u,d,f)=>{const m=wr(u[1]),v=new ae(m);a=a.add(v)})).next((()=>a))}containsKey(e,t){const n=Jt(t.path),o=IDBKeyRange.bound([n],[DE(n)],!1,!0);let a=0;return Ci(e).X({index:Em,Z:!0,range:o},(([u,d],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}Et(e,t){return ra(e).get(t).next((n=>n?Xl(n):null))}}function ra(r){return kt(r,wa)}function iw(r){return kt(r,zs)}function Ci(r){return kt(r,Ea)}const sw="LruGarbageCollector",cR=1048576;function ow([r,e],[t,n]){const o=Pe(r,t);return o===0?Pe(e,n):o}class hR{constructor(e){this.Tr=e,this.buffer=new He(ow),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();ow(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eT{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(sw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yi(t)?X(sw,"Ignoring IndexedDB error during garbage collection: ",t):await Hi(t)}await this.Rr(3e5)}))}}class dR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return M.resolve(yn.ue);const n=new hR(t);return this.Vr.forEachTarget(e,(o=>n.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>n.Er(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(rw)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,o,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(n=w,d=Date.now(),this.removeTargets(e,n,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(m=Date.now(),sa()<=Le.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function tT(r,e){return new dR(r,e)}class fR{constructor(e,t){this.db=e,this.garbageCollector=tT(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}yr(e){let t=0;return this.gr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((n,o)=>t(o)))}addReference(e,t,n){return hh(e,n)}removeReference(e,t,n){return hh(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return hh(e,t)}Sr(e,t){return(function(o,a){let u=!1;return ZI(o).ee((d=>JI(o,d,a).next((f=>(f&&(u=!0),M.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.wr(e,((u,d)=>{if(d<=t){const f=this.Sr(e,u).next((m=>{if(!m)return a++,n.getEntry(e,u).next((()=>(n.removeEntry(u,we.min()),Ci(e).delete((function(w){return[0,Jt(w.path)]})(u)))))}));o.push(f)}})).next((()=>M.waitFor(o))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return hh(e,t)}wr(e,t){const n=Ci(e);let o,a=yn.ue;return n.X({index:Em},(([u,d],{path:f,sequenceNumber:m})=>{u===0?(a!==yn.ue&&t(new ae(wr(o)),a),a=m,o=f):a=yn.ue})).next((()=>{a!==yn.ue&&t(new ae(wr(o)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hh(r,e){return Ci(r).put((function(n,o){return{targetId:0,path:Jt(n.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}class nT{constructor(){this.changes=new Xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?M.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Cs(e).put(n)}removeEntry(e,t,n){return Cs(e).delete((function(a,u){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Uh(u),d[d.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.br(e,n))))}getEntry(e,t){let n=it.newInvalidDocument(t);return Cs(e).X({index:_h,range:IDBKeyRange.only($l(t))},((o,a)=>{n=this.Dr(t,a)})).next((()=>n))}vr(e,t){let n={size:0,document:it.newInvalidDocument(t)};return Cs(e).X({index:_h,range:IDBKeyRange.only($l(t))},((o,a)=>{n={document:this.Dr(t,a),size:qh(a)}})).next((()=>n))}getEntries(e,t){let n=vn();return this.Cr(e,t,((o,a)=>{const u=this.Dr(o,a);n=n.insert(o,u)})).next((()=>n))}Fr(e,t){let n=vn(),o=new tt(ae.comparator);return this.Cr(e,t,((a,u)=>{const d=this.Dr(a,u);n=n.insert(a,d),o=o.insert(a,qh(u))})).next((()=>({documents:n,Mr:o})))}Cr(e,t,n){if(t.isEmpty())return M.resolve();let o=new He(uw);t.forEach((f=>o=o.add(f)));const a=IDBKeyRange.bound($l(o.first()),$l(o.last())),u=o.getIterator();let d=u.getNext();return Cs(e).X({index:_h,range:a},((f,m,v)=>{const w=ae.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&uw(d,w)<0;)n(d,null),d=u.getNext();d&&d.isEqual(w)&&(n(d,m),d=u.hasNext()?u.getNext():null),d?v.G($l(d)):v.done()})).next((()=>{for(;d;)n(d,null),d=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,n,o,a){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Uh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cs(e).j(IDBKeyRange.bound(d,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let v=vn();for(const w of m){const T=this.Dr(ae.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(bu(t,T)||o.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,n,o){let a=vn();const u=lw(t,n),d=lw(t,Cn.max());return Cs(e).X({index:qE,range:IDBKeyRange.bound(u,d,!0)},((f,m,v)=>{const w=this.Dr(ae.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===o&&v.done()})).next((()=>a))}newChangeBuffer(e){return new mR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return aw(e).get(Cp).next((t=>(ge(!!t,20021),t)))}br(e,t){return aw(e).put(Cp,t)}Dr(e,t){if(t){const n=ZP(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(we.min())))return n}return it.newInvalidDocument(e)}}function rT(r){return new pR(r)}class mR extends nT{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Xr((n=>n.toString()),((n,o)=>n.isEqual(o)))}applyChanges(e){const t=[];let n=0,o=new He(((a,u)=>Pe(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const d=this.Nr.get(a);if(t.push(this.Or.removeEntry(e,a,d.readTime)),u.isValidDocument()){const f=$v(this.Or.serializer,u);o=o.add(a.path.popLast());const m=qh(f);n+=m-d.size,t.push(this.Or.addEntry(e,a,f))}else if(n-=d.size,this.trackRemovals){const f=$v(this.Or.serializer,u.convertToNoDocument(we.min()));t.push(this.Or.addEntry(e,a,f))}})),o.forEach((a=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Or.updateMetadata(e,n)),M.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((n=>(this.Nr.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:n,Mr:o})=>(o.forEach(((a,u)=>{this.Nr.set(a,{size:u,readTime:n.get(a).readTime})})),n)))}}function aw(r){return kt(r,gu)}function Cs(r){return kt(r,Fh)}function $l(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lw(r,e){const t=e.documentKey.path.toArray();return[r,Uh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uw(r,e){const t=r.path.toArray(),n=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(o=Pe(t[a],n[a]),o)return o;return o=Pe(t.length,n.length),o||(o=Pe(t[t.length-2],n[n.length-2]),o||Pe(t[t.length-1],n[n.length-1]))}class gR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iT{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&ou(n.mutation,o,_n.empty(),We.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ke()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ke()){const o=Er();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((a=>{let u=Hl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const n=Er();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ke())))}populateOverlays(e,t,n){const o=[];return n.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,n,o){let a=vn();const u=su(),d=(function(){return su()})();return t.forEach(((f,m)=>{const v=n.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Jr)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),ou(v.mutation,m,v.mutation.getFieldMask(),We.now())):u.set(m.key,_n.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var w;return d.set(m,new gR(v,(w=u.get(m))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const n=su();let o=new tt(((u,d)=>u-d)),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=n.get(f)||_n.empty();v=d.applyToLocalView(m,v),n.set(f,v);const w=(o.get(d.batchId)||ke()).add(f);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=EI();v.forEach((T=>{if(!a.has(T)){const C=RI(t.get(T),n.get(T));C!==null&&w.set(T,C),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return M.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(u){return ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-a.size):M.resolve(Er());let d=_a,f=a;return u.next((m=>M.forEach(m,((v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?M.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{f=f.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,ke()))).next((v=>({batchId:d,changes:wI(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((n=>{let o=Hl();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const a=t.collectionGroup;let u=Hl();return this.indexManager.getCollectionParents(e,a).next((d=>M.forEach(d,(f=>{const m=(function(w,T){return new Yr(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,n,o).next((v=>{v.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,o)))).next((u=>{a.forEach(((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,it.newInvalidDocument(v)))}));let d=Hl();return u.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&ou(v.mutation,m,_n.empty(),We.now()),bu(t,m)&&(d=d.insert(f,m))})),d}))}}class yR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return M.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_t(o.createTime)}})(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:Lm(o.bundledQuery),readTime:_t(o.readTime)}})(t)),M.resolve()}}class _R{constructor(){this.overlays=new tt(ae.comparator),this.kr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Er();return M.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,a)=>{this.wt(e,t,a)})),M.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.kr.get(n);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(n)),M.resolve()}getOverlaysForCollection(e,t,n){const o=Er(),a=t.length+1,u=new ae(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>n&&o.set(f.getKey(),f)}return M.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let a=new tt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>n){let v=a.get(m.largestBatchId);v===null&&(v=Er(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Er(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return M.resolve(d)}wt(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(n.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new bm(t,n));let a=this.kr.get(t);a===void 0&&(a=ke(),this.kr.set(t,a)),this.kr.set(t,a.add(n.key))}}class vR{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}class Bm{constructor(){this.qr=new He(Ft.Qr),this.$r=new He(Ft.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Ft(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Gr(e,t){e.forEach((n=>this.removeReference(n,t)))}zr(e){const t=new ae(new be([])),n=new Ft(t,e),o=new Ft(t,e+1),a=[];return this.$r.forEachInRange([n,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ae(new be([])),n=new Ft(t,e),o=new Ft(t,e+1);let a=ke();return this.$r.forEachInRange([n,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Ft(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}}class wR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new He(Ft.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Dm(a,t,n,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Ft(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return M.resolve(u)}lookupMutationBatch(e,t){return M.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.Xr(n),a=o<0?0:o;return M.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Fi:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([n,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),M.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new He(Pe);return t.forEach((o=>{const a=new Ft(o,0),u=new Ft(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{n=n.add(d.Hr)}))})),M.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let a=n;ae.isDocumentKey(a)||(a=a.child(""));const u=new Ft(new ae(a),0);let d=new He(Pe);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!n.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Hr)),!0)}),u),M.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((n=>{const o=this.Zr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ge(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return M.forEach(t.mutations,(o=>{const a=new Ft(o.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=n}))}rr(e){}containsKey(e,t){const n=new Ft(t,0),o=this.Yr.firstAfterOrEqual(n);return M.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ER{constructor(e){this.ni=e,this.docs=(function(){return new tt(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return M.resolve(n?n.document.mutableCopy():it.newInvalidDocument(t))}getEntries(e,t){let n=vn();return t.forEach((o=>{const a=this.docs.get(o);n=n.insert(o,a?a.document.mutableCopy():it.newInvalidDocument(o))})),M.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let a=vn();const u=t.path,d=new ae(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||vm(LE(v),n)<=0||(o.has(v.key)||bu(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return M.resolve(a)}getAllFromCollectionGroup(e,t,n,o){he(9500)}ri(e,t){return M.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new IR(this)}getSize(e){return M.resolve(this.size)}}class IR extends nT{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(n)})),M.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class TR{constructor(e){this.persistence=e,this.ii=new Xr((t=>Ks(t)),Du),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new Bm,this.targetCount=0,this._i=Ys.ar()}forEachTarget(e,t){return this.ii.forEach(((n,o)=>t(o))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),M.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Ys(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.hr(t),M.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,n){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),M.waitFor(a).next((()=>o))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return M.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),M.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),M.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return M.resolve(n)}containsKey(e,t){return M.resolve(this.oi.containsKey(t))}}class Um{constructor(e,t){this.ai={},this.overlays={},this.ui=new yn(0),this.ci=!1,this.ci=!0,this.li=new vR,this.referenceDelegate=e(this),this.hi=new TR(this),this.indexManager=new aR,this.remoteDocumentCache=(function(o){return new ER(o)})((n=>this.referenceDelegate.Pi(n))),this.serializer=new WI(t),this.Ti=new yR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _R,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new wR(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){X("MemoryPersistence","Starting transaction:",e);const o=new SR(this.ui.next());return this.referenceDelegate.Ii(),n(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return M.or(Object.values(this.ai).map((n=>()=>n.containsKey(e,t))))}}class SR extends ME{constructor(e){super(),this.currentSequenceNumber=e}}class fd{constructor(e){this.persistence=e,this.Ai=new Bm,this.Ri=null}static Vi(e){return new fd(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),M.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,(n=>{const o=ae.fromPath(n);return this.fi(e,o).next((a=>{a||t.removeEntry(o,we.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((n=>{n?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return M.or([()=>M.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.gi=new Xr((n=>Jt(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=tT(this,t)}static Vi(e,t){return new $h(e,t)}Ii(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}yr(e){let t=0;return this.gr(e,(n=>{t++})).next((()=>t))}gr(e,t){return M.forEach(this.gi,((n,o)=>this.Sr(e,n,o).next((a=>a?M.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(n++,a.removeEntry(u,we.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wh(e.data.value)),t}Sr(e,t,n){return M.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return M.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class AR{constructor(e){this.serializer=e}q(e,t,n,o){const a=new nd("createOrUpgrade",t);n<1&&o>=1&&((function(f){f.createObjectStore(Vu)})(e),(function(f){f.createObjectStore(mu,{keyPath:Ux}),f.createObjectStore(ir,{keyPath:wv,autoIncrement:!0}).createIndex(Ms,Ev,{unique:!0}),f.createObjectStore(va)})(e),cw(e),(function(f){f.createObjectStore(Ns)})(e));let u=M.resolve();return n<3&&o>=3&&(n!==0&&((function(f){f.deleteObjectStore(Ea),f.deleteObjectStore(wa),f.deleteObjectStore(zs)})(e),cw(e)),u=u.next((()=>(function(f){const m=f.store(zs),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return m.put(Lh,v)})(a)))),n<4&&o>=4&&(n!==0&&(u=u.next((()=>(function(f,m){return m.store(ir).j().next((w=>{f.deleteObjectStore(ir),f.createObjectStore(ir,{keyPath:wv,autoIncrement:!0}).createIndex(Ms,Ev,{unique:!0});const T=m.store(ir),C=w.map((U=>T.put(U)));return M.waitFor(C)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore(Ia,{keyPath:Yx})})(e)}))),n<5&&o>=5&&(u=u.next((()=>this.pi(a)))),n<6&&o>=6&&(u=u.next((()=>((function(f){f.createObjectStore(gu)})(e),this.yi(a))))),n<7&&o>=7&&(u=u.next((()=>this.wi(a)))),n<8&&o>=8&&(u=u.next((()=>this.Si(e,a)))),n<9&&o>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&o>=10&&(u=u.next((()=>this.bi(a)))),n<11&&o>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(rd,{keyPath:Xx})})(e),(function(f){f.createObjectStore(id,{keyPath:Jx})})(e)}))),n<12&&o>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore(sd,{keyPath:sP});m.createIndex(Vp,oP,{unique:!1}),m.createIndex(GE,aP,{unique:!1})})(e)}))),n<13&&o>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore(Fh,{keyPath:qx});m.createIndex(_h,$x),m.createIndex(qE,Kx)})(e))).next((()=>this.Di(e,a))).next((()=>e.deleteObjectStore(Ns)))),n<14&&o>=14&&(u=u.next((()=>this.Ci(e,a)))),n<15&&o>=15&&(u=u.next((()=>(function(f){f.createObjectStore(Im,{keyPath:Zx,autoIncrement:!0}).createIndex(kp,eP,{unique:!1}),f.createObjectStore(nu,{keyPath:tP}).createIndex(KE,nP,{unique:!1}),f.createObjectStore(ru,{keyPath:rP}).createIndex(WE,iP,{unique:!1})})(e)))),n<16&&o>=16&&(u=u.next((()=>{t.objectStore(nu).clear()})).next((()=>{t.objectStore(ru).clear()}))),n<17&&o>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(Tm,{keyPath:lP})})(e)}))),n<18&&o>=18&&lE()&&(u=u.next((()=>{t.objectStore(nu).clear()})).next((()=>{t.objectStore(ru).clear()}))),u}yi(e){let t=0;return e.store(Ns).X(((n,o)=>{t+=qh(o)})).next((()=>{const n={byteSize:t};return e.store(gu).put(Cp,n)}))}pi(e){const t=e.store(mu),n=e.store(ir);return t.j().next((o=>M.forEach(o,(a=>{const u=IDBKeyRange.bound([a.userId,Fi],[a.userId,a.lastAcknowledgedBatchId]);return n.j(Ms,u).next((d=>M.forEach(d,(f=>{ge(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=Os(this.serializer,f);return XI(e,a.userId,m).next((()=>{}))}))))}))))}wi(e){const t=e.store(Ea),n=e.store(Ns);return e.store(zs).get(Lh).next((o=>{const a=[];return n.X(((u,d)=>{const f=new be(u),m=(function(w){return[0,Jt(w)]})(f);a.push(t.get(m).next((v=>v?M.resolve():(w=>t.put({targetId:0,path:Jt(w),sequenceNumber:o.highestListenSequenceNumber}))(f))))})).next((()=>M.waitFor(a)))}))}Si(e,t){e.createObjectStore(yu,{keyPath:Hx});const n=t.store(yu),o=new Mm,a=u=>{if(o.add(u)){const d=u.lastSegment(),f=u.popLast();return n.put({collectionId:d,parent:Jt(f)})}};return t.store(Ns).X({Z:!0},((u,d)=>{const f=new be(u);return a(f.popLast())})).next((()=>t.store(va).X({Z:!0},(([u,d,f],m)=>{const v=wr(d);return a(v.popLast())}))))}bi(e){const t=e.store(wa);return t.X(((n,o)=>{const a=Xl(o),u=GI(this.serializer,a);return t.put(u)}))}Di(e,t){const n=t.store(Ns),o=[];return n.X(((a,u)=>{const d=t.store(Fh),f=(function(w){return w.document?new ae(be.fromString(w.document.name).popFirst(5)):w.noDocument?ae.fromSegments(w.noDocument.path):w.unknownDocument?ae.fromSegments(w.unknownDocument.path):he(36783)})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};o.push(d.put(m))})).next((()=>M.waitFor(o)))}Ci(e,t){const n=t.store(ir),o=rT(this.serializer),a=new Um(fd.Vi,this.serializer.gt);return n.j().next((u=>{const d=new Map;return u.forEach((f=>{var m;let v=(m=d.get(f.userId))!==null&&m!==void 0?m:ke();Os(this.serializer,f).keys().forEach((w=>v=v.add(w))),d.set(f.userId,v)})),M.forEach(d,((f,m)=>{const v=new Lt(m),w=hd.yt(this.serializer,v),T=a.getIndexManager(v),C=dd.yt(v,this.serializer,T,a.referenceDelegate);return new iT(o,C,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Dp(t,yn.ue),f).next()}))}))}}function cw(r){r.createObjectStore(Ea,{keyPath:Gx}).createIndex(Em,Qx,{unique:!0}),r.createObjectStore(wa,{keyPath:"targetId"}).createIndex($E,Wx,{unique:!0}),r.createObjectStore(zs)}const Pi="IndexedDbPersistence",dp=18e5,fp=5e3,pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sT="main";class zm{constructor(e,t,n,o,a,u,d,f,m,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fi=a,this.window=u,this.document=d,this.Mi=m,this.xi=v,this.Oi=w,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=T=>Promise.resolve(),!zm.C())throw new Y(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fR(this,o),this.Qi=t+sT,this.serializer=new WI(f),this.$i=new Ir(this.Qi,this.Oi,new AR(this.serializer)),this.li=new tR,this.hi=new uR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rT(this.serializer),this.Ti=new eR,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&yt(Pi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(K.FAILED_PRECONDITION,pp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new yn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>dh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Yi(e))return X(Pi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X(Pi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return Kl(e).get(Jo).next((t=>M.resolve(this.Xi(t))))}es(e){return dh(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,dp)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=kt(t,Ia);return n.j().next((o=>{const a=this.rs(o,dp),u=o.filter((d=>a.indexOf(d)===-1));return M.forEach(u,(d=>n.delete(d.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?M.resolve(!0):Kl(e).get(Jo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,fp)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new Y(K.FAILED_PRECONDITION,pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||dh(e).j().next((n=>this.rs(n,fp).find((o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,u=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||u&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&X(Pi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Vu,Ia],(e=>{const t=new Dp(e,yn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((n=>this.ns(n.updateTimeMs,t)&&!this._s(n.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>dh(e).j().next((t=>this.rs(t,dp).map((n=>n.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return dd.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lR(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return hd.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,n){X(Pi,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?hP:f===17?XE:f===16?cP:f===15?Sm:f===14?YE:f===13?HE:f===12?uP:f===11?QE:void he(60245)})(this.Oi);let u;return this.$i.runTransaction(e,o,a,(d=>(u=new Dp(d,this.ui?this.ui.next():yn.ue),t==="readwrite-primary"?this.Ji(u).next((f=>!!f||this.Hi(u))).next((f=>{if(!f)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new Y(K.FAILED_PRECONDITION,jE);return n(u)})).next((f=>this.Zi(u).next((()=>f)))):this.Ts(u).next((()=>n(u)))))).then((d=>(u.raiseOnCommittedEvent(),d)))}Ts(e){return Kl(e).get(Jo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,fp)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Y(K.FAILED_PRECONDITION,pp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kl(e).put(Jo,t)}static C(){return Ir.C()}Yi(e){const t=Kl(e);return t.get(Jo).next((n=>this.Xi(n)?(X(Pi,"Releasing primary lease."),t.delete(Jo)):M.resolve()))}ns(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(yt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;aE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const n=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return X(Pi,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return yt(Pi,"Failed to get zombied client id.",n),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kl(r){return kt(r,Vu)}function dh(r){return kt(r,Ia)}function qm(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class $m{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=o}static Es(e,t){let n=ke(),o=ke();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new $m(e,t.fromCache,n,o)}}class xR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return aE()?8:BE(Vh())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,n).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new xR;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,n,o){return n.documentReadCount<this.Vs?(sa()<=Le.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(sa()<=Le.DEBUG&&X("QueryEngine","Query:",oa(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.fs*o?(sa()<=Le.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(t))):M.resolve())}ps(e,t){if(bv(t))return M.resolve(null);let n=an(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bh(t,null,"F"),n=an(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const u=ke(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,n).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Bh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,n,o){return bv(t)||o.isEqual(we.min())?M.resolve(null):this.gs.getDocuments(e,n).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,n,o)?M.resolve(null):(sa()<=Le.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oa(t)),this.vs(e,u,t,FE(o,_a)).next((d=>d)))}))}bs(e,t){let n=new He(_I(e));return t.forEach(((o,a)=>{bu(e,a)&&(n=n.add(a))})),n}Ds(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,n){return sa()<=Le.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",oa(t)),this.gs.getDocumentsMatchingQuery(e,t,Cn.min(),n)}vs(e,t,n,o){return this.gs.getDocumentsMatchingQuery(e,n,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const Km="LocalStore",PR=3e8;class RR{constructor(e,t,n,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new tt(Pe),this.Ms=new Xr((a=>Ks(a)),Du),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function aT(r,e,t,n){return new RR(r,e,t,n)}async function lT(r,e){const t=ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const u=[],d=[];let f=ke();for(const m of o){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(n,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function CR(r,e){const t=ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,v){const w=m.batch,T=w.keys();let C=M.resolve();return T.forEach((U=>{C=C.next((()=>v.getEntry(f,U))).next((F=>{const O=m.docVersions.get(U);ge(O!==null,48541),F.version.compareTo(O)<0&&(w.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),v.addEntry(F)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(f,w)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let f=ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function uT(r){const e=ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function kR(r,e){const t=ue(r),n=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,w)=>{const T=o.get(w);if(!T)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,w))));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(pt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,n)),o=o.insert(w,C),(function(F,O,te){return F.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=PR?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(T,C,v)&&d.push(t.hi.updateTargetData(a,C))}));let f=vn(),m=ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(cT(a,u,e.documentUpdates).next((v=>{f=v.Ls,m=v.ks}))),!n.isEqual(we.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,n)));d.push(v)}return M.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=o,a)))}function cT(r,e,t){let n=ke(),o=ke();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let u=vn();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(we.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):X(Km,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:o}}))}function VR(r,e){const t=ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Fi),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Ca(r,e){const t=ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.hi.getTargetData(n,e).next((a=>a?(o=a,M.resolve(o)):t.hi.allocateTargetId(n).next((u=>(o=new $r(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.hi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Fs.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(n.targetId,n),t.Ms.set(e,n.targetId)),n}))}async function ka(r,e,t){const n=ue(r),o=n.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(u=>n.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Yi(u))throw u;X(Km,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(o.target)}function Kh(r,e,t){const n=ue(r);let o=we.min(),a=ke();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,v){const w=ue(f),T=w.Ms.get(v);return T!==void 0?M.resolve(w.Fs.get(T)):w.hi.getTargetData(m,v)})(n,u,an(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>n.Cs.getDocumentsMatchingQuery(u,e,t?o:we.min(),t?a:ke()))).next((d=>(fT(n,yI(e),d),{documents:d,qs:a})))))}function hT(r,e){const t=ue(r),n=ue(t.hi),o=t.Fs.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",(a=>n.Et(a,e).next((u=>u?u.target:null))))}function dT(r,e){const t=ue(r),n=t.xs.get(e)||we.min();return t.persistence.runTransaction("Get new document changes","readonly",(o=>t.Os.getAllFromCollectionGroup(o,e,FE(n,_a),Number.MAX_SAFE_INTEGER))).then((o=>(fT(t,e,o),o)))}function fT(r,e,t){let n=r.xs.get(e)||we.min();t.forEach(((o,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.xs.set(e,n)}async function DR(r,e,t,n){const o=ue(r);let a=ke(),u=vn();for(const m of t){const v=e.Qs(m.metadata.name);m.document&&(a=a.add(v));const w=e.$s(m);w.setReadTime(e.Us(m.metadata.readTime)),u=u.insert(v,w)}const d=o.Os.newChangeBuffer({trackRemovals:!0}),f=await Ca(o,(function(v){return an(Ma(be.fromString(`__bundle__/docs/${v}`)))})(n));return o.persistence.runTransaction("Apply bundle documents","readwrite",(m=>cT(m,d,u).next((v=>(d.apply(m),v))).next((v=>o.hi.removeMatchingKeysForTargetId(m,f.targetId).next((()=>o.hi.addMatchingKeys(m,a,f.targetId))).next((()=>o.localDocuments.getLocalViewOfDocuments(m,v.Ls,v.ks))).next((()=>v.Ls))))))}async function NR(r,e,t=ke()){const n=await Ca(r,an(Lm(e.bundledQuery))),o=ue(r);return o.persistence.runTransaction("Save named query","readwrite",(a=>{const u=_t(e.readTime);if(n.snapshotVersion.compareTo(u)>=0)return o.Ti.saveNamedQuery(a,e);const d=n.withResumeToken(pt.EMPTY_BYTE_STRING,u);return o.Fs=o.Fs.insert(d.targetId,d),o.hi.updateTargetData(a,d).next((()=>o.hi.removeMatchingKeysForTargetId(a,n.targetId))).next((()=>o.hi.addMatchingKeys(a,t,n.targetId))).next((()=>o.Ti.saveNamedQuery(a,e)))}))}const pT="firestore_clients";function hw(r,e){return`${pT}_${r}_${e}`}const mT="firestore_mutations";function dw(r,e,t){let n=`${mT}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const gT="firestore_targets";function mp(r,e){return`${gT}_${r}_${e}`}const vr="SharedClientState";class Wh{constructor(e,t,n,o){this.user=e,this.batchId=t,this.state=n,this.error=o}static Ks(e,t,n){const o=JSON.parse(n);let a,u=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return u&&o.error&&(u=typeof o.error.message=="string"&&typeof o.error.code=="string",u&&(a=new Y(o.error.code,o.error.message))),u?new Wh(e,t,o.state,a):(yt(vr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class au{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ks(e,t){const n=JSON.parse(t);let o,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(o=new Y(n.error.code,n.error.message))),a?new au(e,n.state,o):(yt(vr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const n=JSON.parse(t);let o=typeof n=="object"&&n.activeTargetIds instanceof Array,a=Cm();for(let u=0;o&&u<n.activeTargetIds.length;++u)o=UE(n.activeTargetIds[u]),a=a.add(n.activeTargetIds[u]);return o?new Gh(e,a):(yt(vr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Wm(t.clientId,t.onlineState):(yt(vr,`Failed to parse online state: ${e}`),null)}}class Gp{constructor(){this.activeTargetIds=Cm()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gp{constructor(e,t,n,o,a){this.window=e,this.Fi=t,this.persistenceKey=n,this.js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new tt(Pe),this.started=!1,this.Zs=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=hw(this.persistenceKey,this.js),this.eo=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Gp),this.no=new RegExp(`^${pT}_${u}_([^_]*)$`),this.ro=new RegExp(`^${mT}_${u}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${gT}_${u}_(\\d+)$`),this.so=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.oo=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const n of e){if(n===this.js)continue;const o=this.getItem(hw(this.persistenceKey,n));if(o){const a=Gh.Ks(n,o);a&&(this.Ys=this.Ys.insert(a.clientId,a))}}this._o();const t=this.storage.getItem(this.so);if(t){const n=this.ao(t);n&&this.uo(n)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach(((n,o)=>{o.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,n){this.lo(e,t,n),this.ho(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(mp(this.persistenceKey,e));if(o){const a=au.Ks(e,o);a&&(n=a.state)}}return t&&this.Po.Gs(e),this._o(),n}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mp(this.persistenceKey,e))}updateQueryState(e,t,n){this.To(e,t,n)}handleUserChange(e,t,n){t.forEach((o=>{this.ho(o)})),this.currentUser=e,n.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return X(vr,"READ",e,t),t}setItem(e,t){X(vr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){X(vr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(X(vr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const n=this.Ao(t.key);return this.Ro(n,null)}{const n=this.Vo(t.key,t.newValue);if(n)return this.Ro(n.clientId,n)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const n=this.mo(t.key,t.newValue);if(n)return this.fo(n)}}else if(this.io.test(t.key)){if(t.newValue!==null){const n=this.po(t.key,t.newValue);if(n)return this.yo(n)}}else if(t.key===this.so){if(t.newValue!==null){const n=this.ao(t.newValue);if(n)return this.uo(n)}}else if(t.key===this.eo){const n=(function(a){let u=yn.ue;if(a!=null)try{const d=JSON.parse(a);ge(typeof d=="number",30636,{wo:a}),u=d}catch(d){yt(vr,"Failed to read sequence number from WebStorage",d)}return u})(t.newValue);n!==yn.ue&&this.sequenceNumberHandler(n)}else if(t.key===this.oo){const n=this.So(t.newValue);await Promise.all(n.map((o=>this.syncEngine.bo(o))))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,n){const o=new Wh(this.currentUser,e,t,n),a=dw(this.persistenceKey,this.currentUser,e);this.setItem(a,o.Ws())}ho(e){const t=dw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,n){const o=mp(this.persistenceKey,e),a=new au(e,t,n);this.setItem(o,a.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const n=this.Ao(e);return Gh.Ks(n,t)}mo(e,t){const n=this.ro.exec(e),o=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Wh.Ks(new Lt(a),o,t)}po(e,t){const n=this.io.exec(e),o=Number(n[1]);return au.Ks(o,t)}ao(e){return Wm.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);X(vr,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const n=t?this.Ys.insert(e,t):this.Ys.remove(e),o=this.co(this.Ys),a=this.co(n),u=[],d=[];return a.forEach((f=>{o.has(f)||u.push(f)})),o.forEach((f=>{a.has(f)||d.push(f)})),this.syncEngine.Co(u,d).then((()=>{this.Ys=n}))}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=Cm();return e.forEach(((n,o)=>{t=t.unionWith(o.activeTargetIds)})),t}}class yT{constructor(){this.Fo=new Gp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Gp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bR{xo(e){}shutdown(){}}const fw="ConnectivityMonitor";class pw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(fw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){X(fw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function Qp(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const yp="RestConnection",OR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${o}`,this.Ko=this.databaseId.database===Np?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Wo(e,t,n,o,a){const u=Qp(),d=this.Go(e,t.toUriEncodedString());X(yp,`Sending RPC '${e}' ${u}:`,d,n);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,o,a);const{host:m}=new URL(d),v=lm(m);return this.jo(e,d,f,n,v).then((w=>(X(yp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Rn(yp,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",n),w}))}Jo(e,t,n,o,a,u){return this.Wo(e,t,n,o,a)}zo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),n&&n.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const n=OR[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class LR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Ht="WebChannelConnection";class jR extends FR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,o,a){const u=Qp();return new Promise(((d,f)=>{const m=new AE;m.setWithCredentials(!0),m.listenOnce(xE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case mh.NO_ERROR:const w=m.getResponseJson();X(Ht,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case mh.TIMEOUT:X(Ht,`RPC '${e}' ${u} timed out`),f(new Y(K.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=m.getStatus();if(X(Ht,`RPC '${e}' ${u} failed with status:`,T,"response text:",m.getResponseText()),T>0){let C=m.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C?.error;if(U&&U.status&&U.message){const F=(function(te){const ee=te.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ee)>=0?ee:K.UNKNOWN})(U.status);f(new Y(F,U.message))}else f(new Y(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Y(K.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{X(Ht,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);X(Ht,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,n,15)}))}P_(e,t,n){const o=Qp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=CE(),d=RE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const v=a.join("");X(Ht,`Creating RPC '${e}' stream ${o}: ${v}`,f);const w=u.createWebChannel(v,f);this.T_(w);let T=!1,C=!1;const U=new LR({Ho:O=>{C?X(Ht,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(T||(X(Ht,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),X(Ht,`RPC '${e}' stream ${o} sending:`,O),w.send(O))},Yo:()=>w.close()}),F=(O,te,ee)=>{O.listen(te,(G=>{try{ee(G)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return F(w,Ql.EventType.OPEN,(()=>{C||(X(Ht,`RPC '${e}' stream ${o} transport opened.`),U.s_())})),F(w,Ql.EventType.CLOSE,(()=>{C||(C=!0,X(Ht,`RPC '${e}' stream ${o} transport closed`),U.__(),this.I_(w))})),F(w,Ql.EventType.ERROR,(O=>{C||(C=!0,Rn(Ht,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),U.__(new Y(K.UNAVAILABLE,"The operation could not be completed")))})),F(w,Ql.EventType.MESSAGE,(O=>{var te;if(!C){const ee=O.data[0];ge(!!ee,16349);const G=ee,ne=G?.error||((te=G[0])===null||te===void 0?void 0:te.error);if(ne){X(Ht,`RPC '${e}' stream ${o} received error:`,ne);const _e=ne.status;let pe=(function(A){const k=It[A];if(k!==void 0)return VI(k)})(_e),D=ne.message;pe===void 0&&(pe=K.INTERNAL,D="Unknown error status: "+_e+" with message "+ne.message),C=!0,U.__(new Y(pe,D)),w.close()}else X(Ht,`RPC '${e}' stream ${o} received:`,ee),U.a_(ee)}})),F(d,PE.STAT_EVENT,(O=>{O.stat===xp.PROXY?X(Ht,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===xp.NOPROXY&&X(Ht,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.o_()}),0),U}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function _T(){return typeof window<"u"?window:null}function Ah(){return typeof document<"u"?document:null}function ju(r){return new qP(r,!0)}class Gm{constructor(e,t,n=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-n);o>0&&X("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const mw="PersistentStream";class vT{constructor(e,t,n,o,a,u,d,f){this.Fi=e,this.w_=n,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Gm(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(yt(t.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.b_===t&&this.W_(n,o)}),(n=>{e((()=>{const o=new Y(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(o)}))}))}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.e_((()=>{n((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{n((()=>this.G_(o)))})),this.stream.onMessage((o=>{n((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return X(mw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(X(mw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MR extends vT{constructor(e,t,n,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=WP(this.serializer,e),n=(function(a){if(!("targetChange"in a))return we.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?we.min():u.readTime?_t(u.readTime):we.min()})(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=zp(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=jh(f)?{documents:BI(a,f)}:{query:UI(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=bI(a,u.resumeToken);const m=Bp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(we.min())>0){d.readTime=Ra(a,u.snapshotVersion.toTimestamp());const m=Bp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const n=QP(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=zp(this.serializer),t.removeTarget=e,this.k_(t)}}class BR extends vT{constructor(e,t,n,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=GP(e.writeResults,e.commitTime),n=_t(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=zp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Tu(this.serializer,n)))};this.k_(t)}}class UR{}class zR extends UR{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Y(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Up(t,n),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(K.UNKNOWN,a.toString())}))}Jo(e,t,n,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Up(t,n),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Y(K.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class qR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yt(t),this._a=!1):X("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Xs="RemoteStore";class $R{constructor(e,t,n,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{n.enqueueAndForget((async()=>{Ji(this)&&(X(Xs,"Restarting streams for network reachability change."),await(async function(f){const m=ue(f);m.Ia.add(4),await za(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Mu(m)})(this))}))})),this.Aa=new qR(n,o)}}async function Mu(r){if(Ji(r))for(const e of r.da)await e(!0)}async function za(r){for(const e of r.da)await e(!1)}function pd(r,e){const t=ue(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ym(t)?Hm(t):$a(t).x_()&&Qm(t,e))}function Va(r,e){const t=ue(r),n=$a(t);t.Ta.delete(e),n.x_()&&wT(t,e),t.Ta.size===0&&(n.x_()?n.B_():Ji(t)&&t.Aa.set("Unknown"))}function Qm(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$a(r).H_(e)}function wT(r,e){r.Ra.$e(e),$a(r).Y_(e)}function Hm(r){r.Ra=new MP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),$a(r).start(),r.Aa.aa()}function Ym(r){return Ji(r)&&!$a(r).M_()&&r.Ta.size>0}function Ji(r){return ue(r).Ia.size===0}function ET(r){r.Ra=void 0}async function KR(r){r.Aa.set("Online")}async function WR(r){r.Ta.forEach(((e,t)=>{Qm(r,e)}))}async function GR(r,e){ET(r),Ym(r)?(r.Aa.la(e),Hm(r)):r.Aa.set("Unknown")}async function QR(r,e,t){if(r.Aa.set("Online"),e instanceof NI&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(r,e)}catch(n){X(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Qh(r,n)}else if(e instanceof Th?r.Ra.Ye(e):e instanceof DI?r.Ra.it(e):r.Ra.et(e),!t.isEqual(we.min()))try{const n=await uT(r.localStore);t.compareTo(n)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const v=a.Ta.get(f);if(!v)return;a.Ta.set(f,v.withResumeToken(pt.EMPTY_BYTE_STRING,v.snapshotVersion)),wT(a,f);const w=new $r(v.target,f,m,v.sequenceNumber);Qm(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(n){X(Xs,"Failed to raise snapshot:",n),await Qh(r,n)}}async function Qh(r,e,t){if(!Yi(e))throw e;r.Ia.add(1),await za(r),r.Aa.set("Offline"),t||(t=()=>uT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{X(Xs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Mu(r)}))}function IT(r,e){return e().catch((t=>Qh(r,t,e)))}async function qa(r){const e=ue(r),t=Ki(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Fi;for(;HR(e);)try{const o=await VR(e.localStore,n);if(o===null){e.Pa.length===0&&t.B_();break}n=o.batchId,YR(e,o)}catch(o){await Qh(e,o)}TT(e)&&ST(e)}function HR(r){return Ji(r)&&r.Pa.length<10}function YR(r,e){r.Pa.push(e);const t=Ki(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function TT(r){return Ji(r)&&!Ki(r).M_()&&r.Pa.length>0}function ST(r){Ki(r).start()}async function XR(r){Ki(r).na()}async function JR(r){const e=Ki(r);for(const t of r.Pa)e.X_(t.mutations)}async function ZR(r,e,t){const n=r.Pa.shift(),o=Nm.from(n,e,t);await IT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await qa(r)}async function eC(r,e){e&&Ki(r).Z_&&await(async function(n,o){if((function(u){return kI(u)&&u!==K.ABORTED})(o.code)){const a=n.Pa.shift();Ki(n).N_(),await IT(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,o))),await qa(n)}})(r,e),TT(r)&&ST(r)}async function gw(r,e){const t=ue(r);t.asyncQueue.verifyOperationInProgress(),X(Xs,"RemoteStore received new credentials");const n=Ji(t);t.Ia.add(3),await za(t),n&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Mu(t)}async function Hp(r,e){const t=ue(r);e?(t.Ia.delete(2),await Mu(t)):e||(t.Ia.add(2),await za(t),t.Aa.set("Unknown"))}function $a(r){return r.Va||(r.Va=(function(t,n,o){const a=ue(t);return a.ia(),new MR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Zo:KR.bind(null,r),e_:WR.bind(null,r),n_:GR.bind(null,r),J_:QR.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),Ym(r)?Hm(r):r.Aa.set("Unknown")):(await r.Va.stop(),ET(r))}))),r.Va}function Ki(r){return r.ma||(r.ma=(function(t,n,o){const a=ue(t);return a.ia(),new BR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:XR.bind(null,r),n_:eC.bind(null,r),ea:JR.bind(null,r),ta:ZR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await qa(r)):(await r.ma.stop(),r.Pa.length>0&&(X(Xs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}class Xm{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){const u=Date.now()+n,d=new Xm(e,t,u,o,a);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ka(r,e){if(yt("AsyncQueue",`${e}: ${r}`),Yi(r))return new Y(K.UNAVAILABLE,`${e}: ${r}`);throw r}class ha{static emptySet(e){return new ha(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(t,n)=>ae.comparator(t.key,n.key),this.keyedMap=Hl(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ha;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class yw{constructor(){this.fa=new tt(ae.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):he(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Da{constructor(e,t,n,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,n,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Da(e,t,ha.emptySet(t),u,n,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}class tC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class nC{constructor(){this.queries=_w(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,n){const o=ue(t),a=o.queries;o.queries=_w(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(n)}))})(this,new Y(K.ABORTED,"Firestore shutting down"))}}function _w(){return new Xr((r=>gI(r)),Nu)}async function Jm(r,e){const t=ue(r);let n=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(n=2):(a=new tC,n=e.ba()?0:1);try{switch(n){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Ka(u,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&eg(t)}async function Zm(r,e){const t=ue(r),n=e.query;let o=3;const a=t.queries.get(n);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function rC(r,e){const t=ue(r);let n=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(n=!0);u.ya=o}}n&&eg(t)}function iC(r,e,t){const n=ue(r),o=n.queries.get(e);if(o)for(const a of o.wa)a.onError(t);n.queries.delete(e)}function eg(r){r.Da.forEach((e=>{e.next()}))}var Yp,vw;(vw=Yp||(Yp={})).Fa="default",vw.Cache="cache";class tg{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new Da(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const n=t!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yp.Cache}}class sC{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}class ww{constructor(e){this.serializer=e}Qs(e){return Tr(this.serializer,e)}$s(e){return e.metadata.exists?MI(this.serializer,e.document,!1):it.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return _t(e)}}class oC{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=AT(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const n=be.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,n=new ww(this.serializer);for(const o of e)if(o.metadata.queries){const a=n.Qs(o.metadata.name);for(const u of o.metadata.queries){const d=(t.get(u)||ke()).add(a);t.set(u,d)}}return t}async za(e){const t=await DR(e,new ww(this.serializer),this.Ka,this.$a.id),n=this.Ga(this.documents);for(const o of this.Ua)await NR(e,o,n.get(o.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function AT(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class xT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class RT{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=_I(e),this.eu=new ha(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new yw,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const T=o.get(v),C=bu(this.query,w)?w:null,U=!!T&&this.mutatedKeys.has(T.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let O=!1;T&&C?T.data.isEqual(C.data)?U!==F&&(n.track({type:3,doc:C}),O=!0):this.iu(T,C)||(n.track({type:2,doc:C}),O=!0,(f&&this.Xa(C,f)>0||m&&this.Xa(C,m)<0)&&(d=!0)):!T&&C?(n.track({type:0,doc:C}),O=!0):T&&!C&&(n.track({type:1,doc:T}),O=!0,(f||m)&&(d=!0)),O&&(C?(u=u.add(C),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{eu:u,ru:n,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,w)=>(function(C,U){const F=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:O})}};return F(C)-F(U)})(v.type,w.type)||this.Xa(v.doc,w.doc))),this.su(n),o=o!=null&&o;const d=t&&!o?this.ou():[],f=this.Za.size===0&&this.current&&!o?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new Da(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach((n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))}));const t=[];return e.forEach((n=>{this.Za.has(n)||t.push(new PT(n))})),this.Za.forEach((n=>{e.has(n)||t.push(new xT(n))})),t}uu(e){this.Ha=e.qs,this.Za=ke();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Da.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zi="SyncEngine";class aC{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lC{constructor(e){this.key=e,this.lu=!1}}class uC{constructor(e,t,n,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Xr((d=>gI(d)),Nu),this.Tu=new Map,this.Iu=new Set,this.du=new tt(ae.comparator),this.Eu=new Map,this.Au=new Bm,this.Ru={},this.Vu=new Map,this.mu=Ys.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function cC(r,e,t=!0){const n=md(r);let o;const a=n.Pu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await CT(n,e,t,!0),o}async function hC(r,e){const t=md(r);await CT(t,e,!0,!1)}async function CT(r,e,t,n){const o=await Ca(r.localStore,an(e)),a=o.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let d;return n&&(d=await ng(r,e,a,u==="current",o.resumeToken)),r.isPrimaryClient&&t&&pd(r.remoteStore,o),d}async function ng(r,e,t,n,o){r.gu=(w,T,C)=>(async function(F,O,te,ee){let G=O.view.nu(te);G.Ds&&(G=await Kh(F.localStore,O.query,!1).then((({documents:D})=>O.view.nu(D,G))));const ne=ee&&ee.targetChanges.get(O.targetId),_e=ee&&ee.targetMismatches.get(O.targetId)!=null,pe=O.view.applyChanges(G,F.isPrimaryClient,ne,_e);return Xp(F,O.targetId,pe._u),pe.snapshot})(r,w,T,C);const a=await Kh(r.localStore,e,!0),u=new RT(e,a.qs),d=u.nu(a.documents),f=Lu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",o),m=u.applyChanges(d,r.isPrimaryClient,f);Xp(r,t,m._u);const v=new aC(e,t,u);return r.Pu.set(e,v),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),m.snapshot}async function dC(r,e,t){const n=ue(r),o=n.Pu.get(e),a=n.Tu.get(o.targetId);if(a.length>1)return n.Tu.set(o.targetId,a.filter((u=>!Nu(u,e)))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await ka(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&Va(n.remoteStore,o.targetId),Na(n,o.targetId)})).catch(Hi)):(Na(n,o.targetId),await ka(n.localStore,o.targetId,!0))}async function fC(r,e){const t=ue(r),n=t.Pu.get(e),o=t.Tu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Va(t.remoteStore,n.targetId))}async function pC(r,e,t){const n=og(r);try{const o=await(function(u,d){const f=ue(u),m=We.now(),v=d.reduce(((C,U)=>C.add(U.key)),ke());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=vn(),F=ke();return f.Os.getEntries(C,v).next((O=>{U=O,U.forEach(((te,ee)=>{ee.isValidDocument()||(F=F.add(te))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,U))).next((O=>{w=O;const te=[];for(const ee of d){const G=FP(ee,w.get(ee.key).overlayedDocument);G!=null&&te.push(new Jr(ee.key,G,aI(G.value.mapValue),ut.exists(!0)))}return f.mutationQueue.addMutationBatch(C,m,te,d)})).next((O=>{T=O;const te=O.applyToLocalDocumentSet(w,F);return f.documentOverlayCache.saveOverlays(C,O.batchId,te)}))})).then((()=>({batchId:T.batchId,changes:wI(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new tt(Pe)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(n,o.batchId,t),await Zr(n,o.changes),await qa(n.remoteStore)}catch(o){const a=Ka(o,"Failed to persist write");t.reject(a)}}async function kT(r,e){const t=ue(r);try{const n=await kR(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?ge(u.lu,14607):o.removedDocuments.size>0&&(ge(u.lu,42227),u.lu=!1))})),await Zr(t,n,e)}catch(n){await Hi(n)}}function Ew(r,e,t){const n=ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=ue(u);f.onlineState=d;let m=!1;f.queries.forEach(((v,w)=>{for(const T of w.wa)T.va(d)&&(m=!0)})),m&&eg(f)})(n.eventManager,e),o.length&&n.hu.J_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function mC(r,e,t){const n=ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Eu.get(e),a=o&&o.key;if(a){let u=new tt(ae.comparator);u=u.insert(a,it.newNoDocument(a,we.min()));const d=ke().add(a),f=new Fu(we.min(),new Map,new tt(Pe),u,d);await kT(n,f),n.du=n.du.remove(a),n.Eu.delete(e),sg(n)}else await ka(n.localStore,e,!1).then((()=>Na(n,e,t))).catch(Hi)}async function gC(r,e){const t=ue(r),n=e.batch.batchId;try{const o=await CR(t.localStore,e);ig(t,n,null),rg(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Zr(t,o)}catch(o){await Hi(o)}}async function yC(r,e,t){const n=ue(r);try{const o=await(function(u,d){const f=ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next((w=>(ge(w!==null,37113),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(n.localStore,e);ig(n,e,t),rg(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Zr(n,o)}catch(o){await Hi(o)}}async function _C(r,e){const t=ue(r);Ji(t.remoteStore)||X(Zi,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(u){const d=ue(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>d.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(n===Fi)return void e.resolve();const o=t.Vu.get(n)||[];o.push(e),t.Vu.set(n,o)}catch(n){const o=Ka(n,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}function rg(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function ig(r,e,t){const n=ue(r);let o=n.Ru[n.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),n.Ru[n.currentUser.toKey()]=o}}function Na(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Tu.get(e))r.Pu.delete(n),t&&r.hu.pu(n,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((n=>{r.Au.containsKey(n)||VT(r,n)}))}function VT(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Va(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),sg(r))}function Xp(r,e,t){for(const n of t)n instanceof xT?(r.Au.addReference(n.key,e),vC(r,n)):n instanceof PT?(X(Zi,"Document no longer in limbo: "+n.key),r.Au.removeReference(n.key,e),r.Au.containsKey(n.key)||VT(r,n.key)):he(19791,{yu:n})}function vC(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Iu.has(n)||(X(Zi,"New document in limbo: "+t),r.Iu.add(n),sg(r))}function sg(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new ae(be.fromString(e)),n=r.mu.next();r.Eu.set(n,new lC(t)),r.du=r.du.insert(t,n),pd(r.remoteStore,new $r(an(Ma(t.path)),n,"TargetPurposeLimboResolution",yn.ue))}}async function Zr(r,e,t){const n=ue(r),o=[],a=[],u=[];n.Pu.isEmpty()||(n.Pu.forEach(((d,f)=>{u.push(n.gu(f,e,t).then((m=>{var v;if((m||t)&&n.isPrimaryClient){const w=m?!m.fromCache:(v=t?.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=$m.Es(f.targetId,m);a.push(w)}})))})),await Promise.all(u),n.hu.J_(o),await(async function(f,m){const v=ue(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>M.forEach(m,(T=>M.forEach(T.Is,(C=>v.persistence.referenceDelegate.addReference(w,T.targetId,C))).next((()=>M.forEach(T.ds,(C=>v.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))))))}catch(w){if(!Yi(w))throw w;X(Km,"Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const C=v.Fs.get(T),U=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(U);v.Fs=v.Fs.insert(T,F)}}})(n.localStore,a))}async function wC(r,e){const t=ue(r);if(!t.currentUser.isEqual(e)){X(Zi,"User change. New user:",e.toKey());const n=await lT(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new Y(K.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Zr(t,n.Bs)}}function EC(r,e){const t=ue(r),n=t.Eu.get(e);if(n&&n.lu)return ke().add(n.key);{let o=ke();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}async function IC(r,e){const t=ue(r),n=await Kh(t.localStore,e.query,!0),o=e.view.uu(n);return t.isPrimaryClient&&Xp(t,e.targetId,o._u),o}async function TC(r,e){const t=ue(r);return dT(t.localStore,e).then((n=>Zr(t,n)))}async function SC(r,e,t,n){const o=ue(r),a=await(function(d,f){const m=ue(d),v=ue(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>v.Xn(w,f).next((T=>T?m.localDocuments.getDocuments(w,T):M.resolve(null)))))})(o.localStore,e);a!==null?(t==="pending"?await qa(o.remoteStore):t==="acknowledged"||t==="rejected"?(ig(o,e,n||null),rg(o,e),(function(d,f){ue(ue(d).mutationQueue).rr(f)})(o.localStore,e)):he(6720,"Unknown batchState",{wu:t}),await Zr(o,a)):X(Zi,"Cannot apply mutation batch with id: "+e)}async function AC(r,e){const t=ue(r);if(md(t),og(t),e===!0&&t.fu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),o=await Iw(t,n.toArray());t.fu=!0,await Hp(t.remoteStore,!0);for(const a of o)pd(t.remoteStore,a)}else if(e===!1&&t.fu!==!1){const n=[];let o=Promise.resolve();t.Tu.forEach(((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):o=o.then((()=>(Na(t,u),ka(t.localStore,u,!0)))),Va(t.remoteStore,u)})),await o,await Iw(t,n),(function(u){const d=ue(u);d.Eu.forEach(((f,m)=>{Va(d.remoteStore,m)})),d.Au.jr(),d.Eu=new Map,d.du=new tt(ae.comparator)})(t),t.fu=!1,await Hp(t.remoteStore,!1)}}async function Iw(r,e,t){const n=ue(r),o=[],a=[];for(const u of e){let d;const f=n.Tu.get(u);if(f&&f.length!==0){d=await Ca(n.localStore,an(f[0]));for(const m of f){const v=n.Pu.get(m),w=await IC(n,v);w.snapshot&&a.push(w.snapshot)}}else{const m=await hT(n.localStore,u);d=await Ca(n.localStore,m),await ng(n,DT(m),u,!1,d.resumeToken)}o.push(d)}return n.hu.J_(a),o}function DT(r){return mI(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function xC(r){return(function(t){return ue(ue(t).persistence).Ps()})(ue(r).localStore)}async function PC(r,e,t,n){const o=ue(r);if(o.fu)return void X(Zi,"Ignoring unexpected query state notification.");const a=o.Tu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await dT(o.localStore,yI(a[0])),d=Fu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",pt.EMPTY_BYTE_STRING);await Zr(o,u,d);break}case"rejected":await ka(o.localStore,e,!0),Na(o,e,n);break;default:he(64155,t)}}async function RC(r,e,t){const n=md(r);if(n.fu){for(const o of e){if(n.Tu.has(o)&&n.sharedClientState.isActiveQueryTarget(o)){X(Zi,"Adding an already active target "+o);continue}const a=await hT(n.localStore,o),u=await Ca(n.localStore,a);await ng(n,DT(a),u.targetId,!1,u.resumeToken),pd(n.remoteStore,u)}for(const o of t)n.Tu.has(o)&&await ka(n.localStore,o,!1).then((()=>{Va(n.remoteStore,o),Na(n,o)})).catch(Hi)}}function md(r){const e=ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mC.bind(null,e),e.hu.J_=rC.bind(null,e.eventManager),e.hu.pu=iC.bind(null,e.eventManager),e}function og(r){const e=ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yC.bind(null,e),e}function CC(r,e,t){const n=ue(r);(async function(a,u,d){try{const f=await u.getMetadata();if(await(function(C,U){const F=ue(C),O=_t(U.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",(te=>F.Ti.getBundleMetadata(te,U.id))).then((te=>!!te&&te.createTime.compareTo(O)>=0))})(a.localStore,f))return await u.close(),d._completeWith((function(C){return{taskState:"Success",documentsLoaded:C.totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}})(f)),Promise.resolve(new Set);d._updateProgress(AT(f));const m=new oC(f,u.serializer);let v=await u.Su();for(;v;){const T=await m.Wa(v);T&&d._updateProgress(T),v=await u.Su()}const w=await m.za(a.localStore);return await Zr(a,w.Ja,void 0),await(function(C,U){const F=ue(C);return F.persistence.runTransaction("Save bundle","readwrite",(O=>F.Ti.saveBundleMetadata(O,U)))})(a.localStore,f),d._completeWith(w.progress),Promise.resolve(w.ja)}catch(f){return Rn(Zi,`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}})(n,e,t).then((o=>{n.sharedClientState.notifyBundleLoaded(o)}))}class Su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ju(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return aT(this.persistence,new oT,e.initialUser,this.serializer)}Du(e){return new Um(fd.Vi,this.serializer)}bu(e){return new yT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Su.provider={build:()=>new Su};class kC extends Su{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ge(this.persistence.referenceDelegate instanceof $h,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new eT(n,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Um((n=>$h.Vi(n,t)),this.serializer)}}class NT extends Su{constructor(e,t,n){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await og(this.Mu.syncEngine),await qa(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return aT(this.persistence,new oT,e.initialUser,this.serializer)}Cu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new eT(n,e.asyncQueue,t)}Fu(e,t){const n=new Mx(t,this.persistence);return new jx(e.asyncQueue,n)}Du(e){const t=qm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new zm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_T(),Ah(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new yT}}class VC extends NT{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof gp&&(this.sharedClientState.syncEngine={Do:SC.bind(null,t),vo:PC.bind(null,t),Co:RC.bind(null,t),Ps:xC.bind(null,t),bo:TC.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji((async n=>{await AC(this.Mu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}bu(e){const t=_T();if(!gp.C(t))throw new Y(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Au{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Ew(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wC.bind(null,this.syncEngine),await Hp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nC})()}createDatastore(e){const t=ju(e.databaseInfo.databaseId),n=(function(a){return new jR(a)})(e.databaseInfo);return(function(a,u,d,f){return new zR(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,a,u,d){return new $R(n,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ew(this.syncEngine,t,0)),(function(){return pw.C()?new pw:new bR})())}createSyncEngine(e,t){return(function(o,a,u,d,f,m,v){const w=new uC(o,a,u,d,f,m);return v&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=ue(o);X(Xs,"RemoteStore shutting down."),a.Ia.add(5),await za(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Au.provider={build:()=>new Au};function Tw(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class gd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class DC{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new $t,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then((n=>{n&&n.Qa()?this.metadata.resolve(n.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.qa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const t=this.Bu.decode(e),n=Number(t);isNaN(n)&&this.qu(`length string (${t}) is not valid number`);const o=await this.Qu(n);return new sC(JSON.parse(o),e.length+n)}$u(){return this.buffer.findIndex((e=>e===123))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class NC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,a){const u=ue(o),d={documents:a.map((w=>Iu(u.serializer,w)))},f=await u.Jo("BatchGetDocuments",u.serializer.databaseId,be.emptyPath(),d,a.length),m=new Map;f.forEach((w=>{const T=KP(u.serializer,w);m.set(T.key.toString(),T)}));const v=[];return a.forEach((w=>{const T=m.get(w.toString());ge(!!T,55234,{key:w}),v.push(T)})),v})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ua(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const o=ae.fromPath(n);this.mutations.push(new Vm(o,this.precondition(o)))})),await(async function(n,o){const a=ue(n),u={writes:o.map((d=>Tu(a.serializer,d)))};await a.Wo("Commit",a.serializer.databaseId,be.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Wu:e.constructor.name});t=we.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Y(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(we.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(we.min()))throw new Y(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bC{constructor(e,t,n,o,a){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=o,this.deferred=a,this.Gu=n.maxAttempts,this.F_=new Gm(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new NC(this.datastore),t=this.Ju(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((o=>{this.Hu(o)}))))})).catch((n=>{this.Hu(n)}))}))}Ju(e){try{const t=this.updateFunction(e);return!ku(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kI(t)}return!1}}const Wi="FirestoreClient";class OC{constructor(e,t,n,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=Lt.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async u=>{X(Wi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(X(Wi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ka(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _p(r,e){r.asyncQueue.verifyOperationInProgress(),X(Wi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async o=>{n.isEqual(o)||(await lT(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>{Rn("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Rn("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function Sw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ag(r);X(Wi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>gw(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,o)=>gw(e.remoteStore,o))),r._onlineComponents=e}async function ag(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){X(Wi,"Using user provided OfflineComponentProvider");try{await _p(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Rn("Error using user provided cache. Falling back to memory cache: "+t),await _p(r,new Su)}}else X(Wi,"Using default OfflineComponentProvider"),await _p(r,new kC(void 0));return r._offlineComponents}async function yd(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(X(Wi,"Using user provided OnlineComponentProvider"),await Sw(r,r._uninitializedComponentsProvider._online)):(X(Wi,"Using default OnlineComponentProvider"),await Sw(r,new Au))),r._onlineComponents}function bT(r){return ag(r).then((e=>e.persistence))}function lg(r){return ag(r).then((e=>e.localStore))}function OT(r){return yd(r).then((e=>e.remoteStore))}function ug(r){return yd(r).then((e=>e.syncEngine))}function FC(r){return yd(r).then((e=>e.datastore))}async function ba(r){const e=await yd(r),t=e.eventManager;return t.onListen=cC.bind(null,e.syncEngine),t.onUnlisten=dC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fC.bind(null,e.syncEngine),t}function LC(r){return r.asyncQueue.enqueue((async()=>{const e=await bT(r),t=await OT(r);return e.setNetworkEnabled(!0),(function(o){const a=ue(o);return a.Ia.delete(0),Mu(a)})(t)}))}function jC(r){return r.asyncQueue.enqueue((async()=>{const e=await bT(r),t=await OT(r);return e.setNetworkEnabled(!1),(async function(o){const a=ue(o);a.Ia.add(0),await za(a),a.Aa.set("Offline")})(t)}))}function MC(r,e){const t=new $t;return r.asyncQueue.enqueueAndForget((async()=>(async function(o,a,u){try{const d=await(function(m,v){const w=ue(m);return w.persistence.runTransaction("read document","readonly",(T=>w.localDocuments.getDocument(T,v)))})(o,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Y(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Ka(d,`Failed to get document '${a} from cache`);u.reject(f)}})(await lg(r),e,t))),t.promise}function FT(r,e,t={}){const n=new $t;return r.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const v=new gd({next:T=>{v.Ou(),u.enqueueAndForget((()=>Zm(a,w)));const C=T.docs.has(d);!C&&T.fromCache?m.reject(new Y(K.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&f&&f.source==="server"?m.reject(new Y(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new tg(Ma(d.path),v,{includeMetadataChanges:!0,ka:!0});return Jm(a,w)})(await ba(r),r.asyncQueue,e,t,n))),n.promise}function BC(r,e){const t=new $t;return r.asyncQueue.enqueueAndForget((async()=>(async function(o,a,u){try{const d=await Kh(o,a,!0),f=new RT(a,d.qs),m=f.nu(d.documents),v=f.applyChanges(m,!1);u.resolve(v.snapshot)}catch(d){const f=Ka(d,`Failed to execute query '${a} against cache`);u.reject(f)}})(await lg(r),e,t))),t.promise}function LT(r,e,t={}){const n=new $t;return r.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const v=new gd({next:T=>{v.Ou(),u.enqueueAndForget((()=>Zm(a,w))),T.fromCache&&f.source==="server"?m.reject(new Y(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new tg(d,v,{includeMetadataChanges:!0,ka:!0});return Jm(a,w)})(await ba(r),r.asyncQueue,e,t,n))),n.promise}function UC(r,e){const t=new gd(e);return r.asyncQueue.enqueueAndForget((async()=>(function(o,a){ue(o).Da.add(a),a.next()})(await ba(r),t))),()=>{t.Ou(),r.asyncQueue.enqueueAndForget((async()=>(function(o,a){ue(o).Da.delete(a)})(await ba(r),t)))}}function zC(r,e,t,n){const o=(function(u,d){let f;return f=typeof u=="string"?gm().encode(u):u,(function(v,w){return new DC(v,w)})((function(v,w){if(v instanceof Uint8Array)return Tw(v,w);if(v instanceof ArrayBuffer)return Tw(new Uint8Array(v),w);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),d)})(t,ju(e));r.asyncQueue.enqueueAndForget((async()=>{CC(await ug(r),o,n)}))}function qC(r,e){return r.asyncQueue.enqueue((async()=>(function(n,o){const a=ue(n);return a.persistence.runTransaction("Get named query","readonly",(u=>a.Ti.getNamedQuery(u,o)))})(await lg(r),e)))}function jT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Aw=new Map;const MT="firestore.googleapis.com",xw=!0;class Pw{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MT,this.ssl=xw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:xw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cR)throw new Y(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Y(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Y(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Y(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Px;switch(n.type){case"firstParty":return new Vx(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Y(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Aw.get(t);n&&(X("ComponentProvider","Removing Datastore"),Aw.delete(t),n.terminate())})(this),Promise.resolve()}}function $C(r,e,t,n={}){var o;r=qe(r,Bu);const a=lm(e),u=r._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:r._getEmulatorOptions()}),f=`${e}:${t}`;a&&($A(`https://${f}`),QA("Firestore",!0)),u.host!==MT&&u.host!==f&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:n});if(!fa(m,d)&&(r._setSettings(m),n.mockUserToken)){let v,w;if(typeof n.mockUserToken=="string")v=n.mockUserToken,w=Lt.MOCK_USER;else{v=KA(n.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const T=n.mockUserToken.sub||n.mockUserToken.user_id;if(!T)throw new Y(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Lt(T)}r._authCredentials=new Rx(new VE(v,w))}}let ln=class BT{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new BT(this.firestore,e,this._query)}},et=class Jl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jl(this.firestore,e,this._key)}toJSON(){return{type:Jl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Cu(t,Jl._jsonSchema))return new Jl(e,n||null,new ae(be.fromString(t.referencePath)))}};et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Tt("string",et._jsonSchemaVersion),referencePath:Tt("string")};let Li=class UT extends ln{constructor(e,t,n){super(e,t,Ma(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ae(e))}withConverter(e){return new UT(this.firestore,e,this._path)}};function zT(r,e,...t){if(r=St(r),_m("collection","path",e),r instanceof Bu){const n=be.fromString(e,...t);return mv(n),new Li(r,null,n)}{if(!(r instanceof et||r instanceof Li))throw new Y(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(be.fromString(e,...t));return mv(n),new Li(r.firestore,null,n)}}function KC(r,e){if(r=qe(r,Bu),_m("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ln(r,null,(function(n){return new Yr(be.emptyPath(),n)})(e))}function Hh(r,e,...t){if(r=St(r),arguments.length===1&&(e=ym.newId()),_m("doc","path",e),r instanceof Bu){const n=be.fromString(e,...t);return pv(n),new et(r,null,new ae(n))}{if(!(r instanceof et||r instanceof Li))throw new Y(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(be.fromString(e,...t));return pv(n),new et(r.firestore,r instanceof Li?r.converter:null,new ae(n))}}function qT(r,e){return r=St(r),e=St(e),(r instanceof et||r instanceof Li)&&(e instanceof et||e instanceof Li)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function $T(r,e){return r=St(r),e=St(e),r instanceof ln&&e instanceof ln&&r.firestore===e.firestore&&Nu(r._query,e._query)&&r.converter===e.converter}const Rw="AsyncQueue";class Cw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Gm(this,"async_queue_retry"),this.oc=()=>{const n=Ah();n&&X(Rw,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const t=Ah();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ah();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new $t;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Yi(e))throw e;X(Rw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((n=>{throw this.tc=n,this.nc=!1,yt("INTERNAL UNHANDLED ERROR: ",kw(n)),n})).then((n=>(this.nc=!1,n))))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Xm.createAndSchedule(this,e,t,n,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&he(47125,{hc:kw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function kw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Jp(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of n)if(a in o&&typeof o[a]=="function")return!0;return!1})(r,["next","error","complete"])}class WC{constructor(){this._progressObserver={},this._taskCompletionResolver=new $t,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const GC=-1;let vt=class extends Bu{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new Cw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cw(e),this._firestoreClient=void 0,await e}}};function Zt(r){if(r._terminated)throw new Y(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||KT(r),r._firestoreClient}function KT(r){var e,t,n;const o=r._freezeSettings(),a=(function(d,f,m,v){return new pP(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=o.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new OC(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(r._componentsProvider))}function QC(r,e){Rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return WT(r,Au.provider,{build:n=>new NT(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function HC(r){Rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();WT(r,Au.provider,{build:t=>new VC(t,e.cacheSizeBytes)})}function WT(r,e,t){if((r=qe(r,vt))._firestoreClient||r._terminated)throw new Y(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new Y(K.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},KT(r)}function YC(r){if(r._initialized&&!r._terminated)throw new Y(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $t;return r._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Ir.C())return Promise.resolve();const o=n+sT;await Ir.delete(o)})(qm(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function XC(r){return(function(t){const n=new $t;return t.asyncQueue.enqueueAndForget((async()=>_C(await ug(t),n))),n.promise})(Zt(r=qe(r,vt)))}function JC(r){return LC(Zt(r=qe(r,vt)))}function ZC(r){return jC(Zt(r=qe(r,vt)))}function ek(r,e){const t=Zt(r=qe(r,vt)),n=new WC;return zC(t,r._databaseId,e,n),n}function tk(r,e){return qC(Zt(r=qe(r,vt)),e).then((t=>t?new ln(r,null,t.query):null))}class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(pt.fromBase64String(e))}catch(t){throw new Y(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xt(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:Tt("string",Xt._jsonSchemaVersion),bytes:Tt("string")};let Gi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let to=class{constructor(e){this._methodName=e}};class sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sr._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,sr._jsonSchema))return new sr(e.latitude,e.longitude)}}sr._jsonSchemaVersion="firestore/geoPoint/1.0",sr._jsonSchema={type:Tt("string",sr._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};class Sr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sr(e.vectorValues);throw new Y(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:Tt("string",Sr._jsonSchemaVersion),vectorValues:Tt("object")};const nk=/^__.*__$/;class rk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class GT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:r})}}class _d{constructor(e,t,n,o,a,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new _d(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:n,mc:!1});return o.fc(e),o}gc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:n,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Yh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(QT(this.Ec)&&nk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ik{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ju(e)}Dc(e,t,n,o=!1){return new _d({Ec:e,methodName:t,bc:n,path:lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(r){const e=r._freezeSettings(),t=ju(r._databaseId);return new ik(r._databaseId,!!e.ignoreUndefinedProperties,t)}function vd(r,e,t,n,o,a={}){const u=r.Dc(a.merge||a.mergeFields?2:0,e,t,o);gg("Data must be an object, but it was:",u,n);const d=XT(n,u);let f,m;if(a.merge)f=new _n(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=Zp(e,w,t);if(!u.contains(T))throw new Y(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);ZT(v,T)||v.push(T)}f=new _n(v),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new rk(new qt(d),f,m)}class Uu extends to{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uu}}function HT(r,e,t){return new _d({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cg extends to{_toFieldTransform(e){return new Ou(e.path,new xa)}isEqual(e){return e instanceof cg}}class hg extends to{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=HT(this,e,!0),n=this.vc.map((a=>ro(a,t))),o=new Ws(n);return new Ou(e.path,o)}isEqual(e){return e instanceof hg&&fa(this.vc,e.vc)}}class dg extends to{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=HT(this,e,!0),n=this.vc.map((a=>ro(a,t))),o=new Gs(n);return new Ou(e.path,o)}isEqual(e){return e instanceof dg&&fa(this.vc,e.vc)}}class fg extends to{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Pa(e.serializer,TI(e.serializer,this.Cc));return new Ou(e.path,t)}isEqual(e){return e instanceof fg&&this.Cc===e.Cc}}function pg(r,e,t,n){const o=r.Dc(1,e,t);gg("Data must be an object, but it was:",o,n);const a=[],u=qt.empty();Xi(n,((f,m)=>{const v=yg(e,f,t);m=St(m);const w=o.gc(v);if(m instanceof Uu)a.push(v);else{const T=ro(m,w);T!=null&&(a.push(v),u.set(v,T))}}));const d=new _n(a);return new GT(u,d,o.fieldTransforms)}function mg(r,e,t,n,o,a){const u=r.Dc(1,e,t),d=[Zp(e,n,t)],f=[o];if(a.length%2!=0)throw new Y(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Zp(e,a[T])),f.push(a[T+1]);const m=[],v=qt.empty();for(let T=d.length-1;T>=0;--T)if(!ZT(m,d[T])){const C=d[T];let U=f[T];U=St(U);const F=u.gc(C);if(U instanceof Uu)m.push(C);else{const O=ro(U,F);O!=null&&(m.push(C),v.set(C,O))}}const w=new _n(m);return new GT(v,w,u.fieldTransforms)}function YT(r,e,t,n=!1){return ro(t,r.Dc(n?4:3,e))}function ro(r,e){if(JT(r=St(r)))return gg("Unsupported field value:",e,r),XT(r,e);if(r instanceof to)return(function(n,o){if(!QT(o.Ec))throw o.wc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(n,o){const a=[];let u=0;for(const d of n){let f=ro(d,o.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(r,e)}return(function(n,o){if((n=St(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return TI(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=We.fromDate(n);return{timestampValue:Ra(o.serializer,a)}}if(n instanceof We){const a=new We(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ra(o.serializer,a)}}if(n instanceof sr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xt)return{bytesValue:bI(o.serializer,n._byteString)};if(n instanceof et){const a=o.databaseId,u=n.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fm(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof Sr)return(function(u,d){return{mapValue:{fields:{[Am]:{stringValue:xm},[Ta]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return km(d.serializer,m)}))}}}}}})(n,o);throw o.wc(`Unsupported field value: ${td(n)}`)})(r,e)}function XT(r,e){const t={};return JE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(r,((n,o)=>{const a=ro(o,e.Vc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function JT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof We||r instanceof sr||r instanceof Xt||r instanceof et||r instanceof to||r instanceof Sr)}function gg(r,e,t){if(!JT(t)||!bE(t)){const n=td(t);throw n==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+n)}}function Zp(r,e,t){if((e=St(e))instanceof Gi)return e._internalPath;if(typeof e=="string")return yg(r,e);throw Yh("Field path arguments must be of type string or ",r,!1,void 0,t)}const sk=new RegExp("[~\\*/\\[\\]]");function yg(r,e,t){if(e.search(sk)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Gi(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Yh(r,e,t,n,o){const a=n&&!n.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${n}`),u&&(f+=` in document ${o}`),f+=")"),new Y(K.INVALID_ARGUMENT,d+r+f)}function ZT(r,e){return r.some((t=>t.isEqual(e)))}class xu{constructor(e,t,n,o,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ok extends xu{data(){return super.data()}}function wd(r,e){return typeof e=="string"?yg(r,e):e instanceof Gi?e._internalPath:e._delegate._internalPath}function e0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Y(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class zu extends _g{}function Ri(r,e,...t){let n=[];e instanceof _g&&n.push(e),n=n.concat(t),(function(a){const u=a.filter((f=>f instanceof vg)).length,d=a.filter((f=>f instanceof Ed)).length;if(u>1||u>0&&d>0)throw new Y(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const o of n)r=o._apply(r);return r}class Ed extends zu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ed(e,t,n)}_apply(e){const t=this._parse(e);return n0(e._query,t),new ln(e.firestore,e.converter,Mp(e._query,t))}_parse(e){const t=no(e.firestore);return(function(a,u,d,f,m,v,w){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Y(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Dw(w,v);const U=[];for(const F of w)U.push(Vw(f,a,F));T={arrayValue:{values:U}}}else T=Vw(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Dw(w,v),T=YT(d,u,w,v==="in"||v==="not-in");return Oe.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ak(r,e,t){const n=e,o=wd("where",r);return Ed._create(o,n,t)}class vg extends _g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vg(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Qe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)n0(u,f),u=Mp(u,f)})(e._query,t),new ln(e.firestore,e.converter,Mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends zu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wg(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new Y(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Y(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(a,u)})(e._query,this._field,this._direction);return new ln(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Yr(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function lk(r,e="asc"){const t=e,n=wd("orderBy",r);return wg._create(n,t)}class Id extends zu{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Id(e,t,n)}_apply(e){return new ln(e.firestore,e.converter,Bh(e._query,this._limit,this._limitType))}}function uk(r){return OE("limit",r),Id._create("limit",r,"F")}function ck(r){return OE("limitToLast",r),Id._create("limitToLast",r,"L")}class Td extends zu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Td(e,t,n)}_apply(e){const t=t0(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,(function(o,a){return new Yr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,a,o.endAt)})(e._query,t))}}function hk(...r){return Td._create("startAt",r,!0)}function dk(...r){return Td._create("startAfter",r,!1)}class Sd extends zu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sd(e,t,n)}_apply(e){const t=t0(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,(function(o,a){return new Yr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,a)})(e._query,t))}}function fk(...r){return Sd._create("endBefore",r,!1)}function pk(...r){return Sd._create("endAt",r,!0)}function t0(r,e,t,n){if(t[0]=St(t[0]),t[0]instanceof xu)return(function(a,u,d,f,m){if(!f)throw new Y(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const w of ca(a))if(w.field.isKeyField())v.push($s(u,f.key));else{const T=f.data.field(w.field);if(od(T))throw new Y(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const C=w.field.canonicalString();throw new Y(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(T)}return new $i(v,m)})(r._query,r.firestore._databaseId,e,t[0]._document,n);{const o=no(r.firestore);return(function(u,d,f,m,v,w){const T=u.explicitOrderBy;if(v.length>T.length)throw new Y(K.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let U=0;U<v.length;U++){const F=v[U];if(T[U].field.isKeyField()){if(typeof F!="string")throw new Y(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof F}`);if(!Rm(u)&&F.indexOf("/")!==-1)throw new Y(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${F}' contains a slash.`);const O=u.path.child(be.fromString(F));if(!ae.isDocumentKey(O))throw new Y(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const te=new ae(O);C.push($s(d,te))}else{const O=YT(f,m,F);C.push(O)}}return new $i(C,w)})(r._query,r.firestore._databaseId,o,e,t,n)}}function Vw(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Y(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rm(e)&&t.indexOf("/")!==-1)throw new Y(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(be.fromString(t));if(!ae.isDocumentKey(n))throw new Y(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return $s(r,new ae(n))}if(t instanceof et)return $s(r,t._key);throw new Y(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(t)}.`)}function Dw(r,e){if(!Array.isArray(r)||r.length===0)throw new Y(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n0(r,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Y(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Eg{convertValue(e,t="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Xi(e,((o,a)=>{n[o]=this.convertValue(a,t)})),n}convertVectorValue(e){var t,n,o;const a=(o=(n=(t=e.fields)===null||t===void 0?void 0:t[Ta].arrayValue)===null||n===void 0?void 0:n.values)===null||o===void 0?void 0:o.map((u=>at(u.doubleValue)));return new Sr(a)}convertGeoPoint(e){return new sr(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ad(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=Gr(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=be.fromString(e);ge(KI(n),9688,{name:e});const o=new Ui(n.get(1),n.get(3)),a=new ae(n.popFirst(5));return o.isEqual(t)||yt(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Ad(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class mk extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}class Bs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let zn=class r0 extends xu{constructor(e,t,n,o,a,u){super(e,t,n,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(wd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=r0._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};zn._jsonSchemaVersion="firestore/documentSnapshot/1.0",zn._jsonSchema={type:Tt("string",zn._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};let lu=class extends zn{data(e={}){return super.data(e)}},or=class i0{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bs(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new lu(this._firestore,this._userDataWriter,n.key,n,new Bs(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Bs(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new lu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Bs(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:gk(d.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=i0._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function gk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:r})}}function s0(r,e){return r instanceof zn&&e instanceof zn?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof or&&e instanceof or&&r._firestore===e._firestore&&$T(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function yk(r){r=qe(r,et);const e=qe(r.firestore,vt);return FT(Zt(e),r._key).then((t=>Ig(e,r,t)))}or._jsonSchemaVersion="firestore/querySnapshot/1.0",or._jsonSchema={type:Tt("string",or._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class io extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function _k(r){r=qe(r,et);const e=qe(r.firestore,vt),t=Zt(e),n=new io(e);return MC(t,r._key).then((o=>new zn(e,n,r._key,o,new Bs(o!==null&&o.hasLocalMutations,!0),r.converter)))}function vk(r){r=qe(r,et);const e=qe(r.firestore,vt);return FT(Zt(e),r._key,{source:"server"}).then((t=>Ig(e,r,t)))}function wk(r){r=qe(r,ln);const e=qe(r.firestore,vt),t=Zt(e),n=new io(e);return e0(r._query),LT(t,r._query).then((o=>new or(e,n,r,o)))}function Ek(r){r=qe(r,ln);const e=qe(r.firestore,vt),t=Zt(e),n=new io(e);return BC(t,r._query).then((o=>new or(e,n,r,o)))}function Ik(r){r=qe(r,ln);const e=qe(r.firestore,vt),t=Zt(e),n=new io(e);return LT(t,r._query,{source:"server"}).then((o=>new or(e,n,r,o)))}function Nw(r,e,t){r=qe(r,et);const n=qe(r.firestore,vt),o=Ad(r.converter,e,t);return qu(n,[vd(no(n),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,ut.none())])}function bw(r,e,t,...n){r=qe(r,et);const o=qe(r.firestore,vt),a=no(o);let u;return u=typeof(e=St(e))=="string"||e instanceof Gi?mg(a,"updateDoc",r._key,e,t,n):pg(a,"updateDoc",r._key,e),qu(o,[u.toMutation(r._key,ut.exists(!0))])}function Tk(r){return qu(qe(r.firestore,vt),[new Ua(r._key,ut.none())])}function Sk(r,e){const t=qe(r.firestore,vt),n=Hh(r),o=Ad(r.converter,e);return qu(t,[vd(no(r.firestore),"addDoc",n._key,o,r.converter!==null,{}).toMutation(n._key,ut.exists(!1))]).then((()=>n))}function o0(r,...e){var t,n,o;r=St(r);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Jp(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Jp(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(n=w.error)===null||n===void 0?void 0:n.bind(w),e[u+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let f,m,v;if(r instanceof et)m=qe(r.firestore,vt),v=Ma(r._key.path),f={next:w=>{e[u]&&e[u](Ig(m,r,w))},error:e[u+1],complete:e[u+2]};else{const w=qe(r,ln);m=qe(w.firestore,vt),v=w._query;const T=new io(m);f={next:C=>{e[u]&&e[u](new or(m,T,w,C))},error:e[u+1],complete:e[u+2]},e0(r._query)}return(function(T,C,U,F){const O=new gd(F),te=new tg(C,O,U);return T.asyncQueue.enqueueAndForget((async()=>Jm(await ba(T),te))),()=>{O.Ou(),T.asyncQueue.enqueueAndForget((async()=>Zm(await ba(T),te)))}})(Zt(m),v,d,f)}function Ak(r,e){return UC(Zt(r=qe(r,vt)),Jp(e)?e:{next:e})}function qu(r,e){return(function(n,o){const a=new $t;return n.asyncQueue.enqueueAndForget((async()=>pC(await ug(n),o,a))),a.promise})(Zt(r),e)}function Ig(r,e,t){const n=t.docs.get(e._key),o=new io(r);return new zn(r,o,e._key,n,new Bs(t.hasPendingWrites,t.fromCache),e.converter)}const xk={maxAttempts:5};let Pk=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,t,n){this._verifyNotCommitted();const o=Di(e,this._firestore),a=Ad(o.converter,t,n),u=vd(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,n);return this._mutations.push(u.toMutation(o._key,ut.none())),this}update(e,t,n,...o){this._verifyNotCommitted();const a=Di(e,this._firestore);let u;return u=typeof(t=St(t))=="string"||t instanceof Gi?mg(this._dataReader,"WriteBatch.update",a._key,t,n,o):pg(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Di(e,this._firestore);return this._mutations=this._mutations.concat(new Ua(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Di(r,e){if((r=St(r)).firestore!==e)throw new Y(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class Rk{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=no(e)}get(e){const t=Di(e,this._firestore),n=new mk(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return he(24041);const a=o[0];if(a.isFoundDocument())return new xu(this._firestore,n,a.key,a,t.converter);if(a.isNoDocument())return new xu(this._firestore,n,t._key,null,t.converter);throw he(18433,{doc:a})}))}set(e,t,n){const o=Di(e,this._firestore),a=Ad(o.converter,t,n),u=vd(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,n);return this._transaction.set(o._key,u),this}update(e,t,n,...o){const a=Di(e,this._firestore);let u;return u=typeof(t=St(t))=="string"||t instanceof Gi?mg(this._dataReader,"Transaction.update",a._key,t,n,o):pg(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Di(e,this._firestore);return this._transaction.delete(t._key),this}}let Ck=class extends Rk{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Di(e,this._firestore),n=new io(this._firestore);return super.get(e).then((o=>new zn(this._firestore,n,t._key,o._document,new Bs(!1,!1),t.converter)))}};function kk(r,e,t){r=qe(r,vt);const n=Object.assign(Object.assign({},xk),t);return(function(a){if(a.maxAttempts<1)throw new Y(K.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,u,d){const f=new $t;return a.asyncQueue.enqueueAndForget((async()=>{const m=await FC(a);new bC(a.asyncQueue,m,d,u,f).zu()})),f.promise})(Zt(r),(o=>e(new Ck(r,o))),n)}function Vk(){return new Uu("deleteField")}function Dk(){return new cg("serverTimestamp")}function Nk(...r){return new hg("arrayUnion",r)}function bk(...r){return new dg("arrayRemove",r)}function Ok(r){return new fg("increment",r)}(function(e,t=!0){(function(o){ja=o})(dm),ga(new qs("firestore",((n,{instanceIdentifier:o,options:a})=>{const u=n.getProvider("app").getImmediate(),d=new vt(new Cx(n.getProvider("auth-internal")),new Dx(u,n.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Y(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Kr(uv,cv,e),Kr(uv,cv,"esm2017")})();const Fk="@firebase/firestore-compat",Lk="0.3.53";function Tg(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Y("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ow(){if(typeof Uint8Array>"u")throw new Y("unimplemented","Uint8Arrays are not available in this environment.")}function Fw(){if(!dP())throw new Y("unimplemented","Blobs are unavailable in Firestore in this environment.")}let a0=class em{constructor(e){this._delegate=e}static fromBase64String(e){return Fw(),new em(Xt.fromBase64String(e))}static fromUint8Array(e){return Ow(),new em(Xt.fromUint8Array(e))}toBase64(){return Fw(),this._delegate.toBase64()}toUint8Array(){return Ow(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function tm(r){return jk(r,["next","error","complete"])}function jk(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}class Mk{enableIndexedDbPersistence(e,t){return QC(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return HC(e._delegate)}clearIndexedDbPersistence(e){return YC(e._delegate)}}class l0{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ui||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){$C(this._delegate,e,t,n)}enableNetwork(){return JC(this._delegate)}disableNetwork(){return ZC(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,NE("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XC(this._delegate)}onSnapshotsInSync(e){return Ak(this._delegate,e)}get app(){if(!this._appCompat)throw new Y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oa(this,zT(this._delegate,e))}catch(t){throw on(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Hh(this._delegate,e))}catch(t){throw on(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sn(this,KC(this._delegate,e))}catch(t){throw on(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kk(this._delegate,t=>e(new u0(this,t)))}batch(){return Zt(this._delegate),new c0(new Pk(this._delegate,e=>qu(this._delegate,e)))}loadBundle(e){return ek(this._delegate,e)}namedQuery(e){return tk(this._delegate,e).then(t=>t?new sn(this,t):null)}}class xd extends Eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(new Xt(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}}function Bk(r){Ax(r)}class u0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xd(e)}get(e){const t=Us(e);return this._delegate.get(t).then(n=>new Pu(this._firestore,new zn(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const o=Us(e);return n?(Tg("Transaction.set",n),this._delegate.set(o,t,n)):this._delegate.set(o,t),this}update(e,t,n,...o){const a=Us(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,n,...o),this}delete(e){const t=Us(e);return this._delegate.delete(t),this}}class c0{constructor(e){this._delegate=e}set(e,t,n){const o=Us(e);return n?(Tg("WriteBatch.set",n),this._delegate.set(o,t,n)):this._delegate.set(o,t),this}update(e,t,n,...o){const a=Us(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,n,...o),this}delete(e){const t=Us(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Js{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new lu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ru(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Js.INSTANCES;let o=n.get(e);o||(o=new WeakMap,n.set(e,o));let a=o.get(t);return a||(a=new Js(e,new xd(e),t),o.set(t,a)),a}}Js.INSTANCES=new WeakMap;class Bn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xd(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bn(t,new et(t._delegate,n,new ae(e)))}static forKey(e,t,n){return new Bn(t,new et(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Oa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oa(this.firestore,zT(this._delegate,e))}catch(t){throw on(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof et?qT(this._delegate,e):!1}set(e,t){t=Tg("DocumentReference.set",t);try{return t?Nw(this._delegate,e,t):Nw(this._delegate,e)}catch(n){throw on(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?bw(this._delegate,e):bw(this._delegate,e,t,...n)}catch(o){throw on(o,"updateDoc()","DocumentReference.update()")}}delete(){return Tk(this._delegate)}onSnapshot(...e){const t=h0(e),n=d0(e,o=>new Pu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return o0(this._delegate,t,n)}get(e){let t;return e?.source==="cache"?t=_k(this._delegate):e?.source==="server"?t=vk(this._delegate):t=yk(this._delegate),t.then(n=>new Pu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Bn(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function on(r,e,t){return r.message=r.message.replace(e,t),r}function h0(r){for(const e of r)if(typeof e=="object"&&!tm(e))return e;return{}}function d0(r,e){var t,n;let o;return tm(r[0])?o=r[0]:tm(r[1])?o=r[1]:typeof r[0]=="function"?o={next:r[0],error:r[1],complete:r[2]}:o={next:r[1],error:r[2],complete:r[3]},{next:a=>{o.next&&o.next(e(a))},error:(t=o.error)===null||t===void 0?void 0:t.bind(o),complete:(n=o.complete)===null||n===void 0?void 0:n.bind(o)}}class Pu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return s0(this._delegate,e._delegate)}}class Ru extends Pu{data(e){const t=this._delegate.data(e);return this._delegate._converter||xx(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class sn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xd(e)}where(e,t,n){try{return new sn(this.firestore,Ri(this._delegate,ak(e,t,n)))}catch(o){throw on(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sn(this.firestore,Ri(this._delegate,lk(e,t)))}catch(n){throw on(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sn(this.firestore,Ri(this._delegate,uk(e)))}catch(t){throw on(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sn(this.firestore,Ri(this._delegate,ck(e)))}catch(t){throw on(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sn(this.firestore,Ri(this._delegate,hk(...e)))}catch(t){throw on(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sn(this.firestore,Ri(this._delegate,dk(...e)))}catch(t){throw on(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sn(this.firestore,Ri(this._delegate,fk(...e)))}catch(t){throw on(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sn(this.firestore,Ri(this._delegate,pk(...e)))}catch(t){throw on(t,"endAt()","Query.endAt()")}}isEqual(e){return $T(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Ek(this._delegate):e?.source==="server"?t=Ik(this._delegate):t=wk(this._delegate),t.then(n=>new nm(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=h0(e),n=d0(e,o=>new nm(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return o0(this._delegate,t,n)}withConverter(e){return new sn(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Uk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ru(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ru(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Uk(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Ru(this._firestore,n))})}isEqual(e){return s0(this._delegate,e._delegate)}}class Oa extends sn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Hh(this._delegate)):new Bn(this.firestore,Hh(this._delegate,e))}catch(t){throw on(t,"doc()","CollectionReference.doc()")}}add(e){return Sk(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return qT(this._delegate,e._delegate)}withConverter(e){return new Oa(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Us(r){return qe(r,et)}class Sg{constructor(...e){this._delegate=new Gi(...e)}static documentId(){return new Sg(lt.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof Gi?this._delegate._internalPath.isEqual(e._internalPath):!1}}class js{static serverTimestamp(){const e=Dk();return e._methodName="FieldValue.serverTimestamp",new js(e)}static delete(){const e=Vk();return e._methodName="FieldValue.delete",new js(e)}static arrayUnion(...e){const t=Nk(...e);return t._methodName="FieldValue.arrayUnion",new js(t)}static arrayRemove(...e){const t=bk(...e);return t._methodName="FieldValue.arrayRemove",new js(t)}static increment(e){const t=Ok(e);return t._methodName="FieldValue.increment",new js(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zk={Firestore:l0,GeoPoint:sr,Timestamp:We,Blob:a0,Transaction:u0,WriteBatch:c0,DocumentReference:Bn,DocumentSnapshot:Pu,Query:sn,QueryDocumentSnapshot:Ru,QuerySnapshot:nm,CollectionReference:Oa,FieldPath:Sg,FieldValue:js,setLogLevel:Bk,CACHE_SIZE_UNLIMITED:GC};function qk(r,e){r.INTERNAL.registerComponent(new qs("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(n,o)},"PUBLIC").setServiceProps(Object.assign({},zk)))}function $k(r){qk(r,(e,t)=>new l0(e,t,new Mk)),r.registerVersion(Fk,Lk)}$k(Nh);function Kk(r){if(!r)return null;if(typeof r.collection=="function")return console.log(" Firestore j est em modo compat (Portal)."),r;if(r._delegate){console.log(" Convertendo Firestore modular  compat (Cronograma)");const e=window.__RELEVO_FIREBASE__?._options;if(!e)return console.error(" No foi possvel obter opes do Firebase para adaptao compat."),null;let t;try{t=Nh.initializeApp(e,"cronograma-compat")}catch{t=Nh.app("cronograma-compat")}return t.firestore()}return console.warn(" Tipo de DB no reconhecido:",r),null}function f0(r=15e3){return new Promise((e,t)=>{const n=Date.now();function o(){const a=window.__RELEVO_DB__,u=window.__RELEVO_AUTH__,d=window.__RELEVO_USER__;if(a&&u&&d){console.log(" [relevo-bootstrap] Firebase + USER prontos via Portal.");const m=Kk(a);return m?e({db:m,auth:u,user:d}):t(new Error("[relevo-bootstrap] Falha ao converter Firestore para compat."))}if(Date.now()-n>r)return t(new Error("[relevo-bootstrap] Timeout aguardando DB/AUTH/USER do Portal"));requestAnimationFrame(o)}o()})}const p0=H.createContext();function Wk({children:r,initialUser:e}){console.log("[UserProvider] MONTANDO UserProvider  initialUser:",e);const[t,n]=H.useState(e||null),[o,a]=H.useState(!e);return H.useEffect(()=>{if(e){console.log("[UserProvider] Usurio j fornecido pelo Portal:",e),n(e),a(!1);return}console.log("[UserProvider] Aguardando usurio via bootstrapCronograma()"),f0().then(u=>{console.log("[UserProvider] Bootstrap OK  usurio recebido (BRUTO):",u.user);const d=u.user,f=d?{uid:d.uid||null,email:d.email||null}:null;console.log("[UserProvider] Usurio NORMALIZADO:",f),n(f),a(!1)}).catch(u=>{console.error("[UserProvider] Erro no bootstrapCronograma:",u),a(!1)})},[]),I.jsx(p0.Provider,{value:{user:t,loading:o},children:r})}const Ag=()=>H.useContext(p0);function Lw(...r){return r.filter(Boolean).join(" ")}const jw=[{to:"/",label:"Dashboard",icon:""},{to:"/projetos",label:"Projetos",icon:""},{to:"/tarefas",label:"Tarefas",icon:""},{to:"/calendario",label:"Calendrio",icon:""},{to:"/importar",label:"Importar (IA)",icon:""}];function Gk({children:r}){const{user:e}=Ag(),[t,n]=H.useState(!1),o=Zs(),a=H.useMemo(()=>jw.find(d=>d.to===o.pathname)?.label||"Cronograma",[o.pathname]);return I.jsxs("div",{className:"crono-scope",children:[I.jsx("div",{className:"crono-bg","aria-hidden":"true"}),I.jsxs("header",{className:"crono-topbar",children:[I.jsxs("div",{className:"crono-topbar-left",children:[I.jsx("button",{className:"crono-iconbtn crono-only-mobile",onClick:()=>n(u=>!u),"aria-label":t?"Fechar menu":"Abrir menu",children:""}),I.jsxs(Rh,{to:"/",className:"crono-brand",children:[I.jsx("span",{className:"crono-brand-badge",children:"R"}),I.jsx("span",{className:"crono-brand-text",children:"Cronogramas"})]}),I.jsx("span",{className:"crono-page-title",children:a})]}),I.jsx("div",{className:"crono-topbar-right",children:I.jsxs("div",{className:"crono-user",children:[I.jsx("div",{className:"crono-user-name",children:e?.displayName||e?.email||"Usurio"}),I.jsx("div",{className:"crono-user-sub",children:"Portal Relevo"})]})})]}),I.jsxs("div",{className:"crono-layout",children:[I.jsx("aside",{className:Lw("crono-sidenav",t&&"open"),onClick:()=>n(!1),children:I.jsxs("nav",{className:"crono-nav",onClick:u=>u.stopPropagation(),children:[jw.map(u=>I.jsxs(VA,{to:u.to,className:({isActive:d})=>Lw("crono-navitem",d&&"active"),children:[I.jsx("span",{className:"crono-navicon","aria-hidden":"true",children:u.icon}),I.jsx("span",{children:u.label})]},u.to)),I.jsx("div",{className:"crono-navhint",children:"Dica: se alguma tela ficar clara em claro ou escura em escuro, a culpa  do CSS  e a gente demite o CSS."})]})}),I.jsx("main",{className:"crono-main",children:r})]}),I.jsxs("footer",{className:"crono-footer",children:[I.jsx("span",{children:"Relevo Consultoria Ambiental  Cronograma"}),I.jsx("span",{className:"crono-footer-dot",children:""}),I.jsx("span",{children:new Date().getFullYear()})]})]})}function es(){const r=window.__RELEVO_DB__;if(!r)throw new Error("Firestore ainda no disponvel em window.__RELEVO_DB__ (cronogramaService).");return r}async function Qk(r=null){const e=es();console.log("[cronogramaService] listarProjetos()  uid =",r);let t=e.collection("projetos");if(typeof r=="string"&&r.trim()!=="")t=t.where("uid","==",r.trim());else return console.warn("[cronogramaService] UID invlido  retorno vazio:",r),[];const n=await t.get();return console.log("[cronogramaService] listarProjetos()  docs encontrados:",n.docs.length),n.docs.map(o=>({id:o.id,...o.data()}))}async function Hk(r){const e=es(),t={...r,criadoEm:r.criadoEm||new Date};return console.log("[cronogramaService] criarProjeto()  payload:",t),{id:(await e.collection("projetos").add(t)).id,...t}}async function Yk(r,e){await es().collection("projetos").doc(r).update(e)}async function Xk(r){await es().collection("projetos").doc(r).delete()}async function Jk(r=null){let t=es().collection("tarefas");typeof r=="string"&&r.trim()!==""&&(t=t.where("projetoId","==",r.trim()));const n=await t.get();return console.log("[cronogramaService] listarTarefas()  docs encontrados:",n.docs.length,"filtro projetoId =",r),n.docs.map(o=>({id:o.id,...o.data()}))}async function Zk(r){const e=es(),t={...r,criadoEm:r.criadoEm||new Date};return console.log("[cronogramaService] criarTarefa()  payload:",t),{id:(await e.collection("tarefas").add(t)).id,...t}}async function eV(r,e){await es().collection("tarefas").doc(r).update(e)}async function tV(r){await es().collection("tarefas").doc(r).delete()}const m0=H.createContext();function nV({children:r}){console.log("[CronogramaProvider] MONTANDO");const{user:e}=Ag(),[t,n]=H.useState(!0),[o,a]=H.useState([]),[u,d]=H.useState([]),f=H.useCallback(async()=>{if(console.log("[CronogramaProvider] carregarDados() CHAMADO",{temUser:!!e,uid:e?.uid}),!e||!e.uid){console.warn("[CronogramaProvider] carregarDados abortado  user/uid indisponvel:",e);return}try{n(!0);const[F,O]=await Promise.all([Qk(e.uid),Jk()]);console.log("[CronogramaProvider] Dados recebidos:",F.length,"projetos e",O.length,"tarefas"),a(F),d(O)}catch(F){console.error("[CronogramaProvider] Erro ao carregar dados:",F)}finally{n(!1)}},[e]);H.useEffect(()=>{f()},[f]);const m=async F=>{if(!e||!e.uid){console.warn("[CronogramaProvider] criarProjeto abortado  sem user.uid");return}await Hk({...F,uid:e.uid}),await f()},v=async(F,O)=>{await Yk(F,O),await f()},w=async F=>{await Xk(F),await f()},T=async F=>{await Zk(F),await f()},C=async(F,O)=>{await eV(F,O),await f()},U=async F=>{await tV(F),await f()};return I.jsx(m0.Provider,{value:{carregando:t,projetos:o,tarefas:u,criarProjeto:m,editarProjeto:v,removerProjeto:w,criarTarefa:T,editarTarefa:C,removerTarefa:U,atualizar:f},children:r})}function $u(){return H.useContext(m0)}function ph(r){if(!r)return"";if(typeof r=="string")return r.slice(0,10);if(r?.toDate)return r.toDate().toISOString().slice(0,10);try{return new Date(r).toISOString().slice(0,10)}catch{return""}}function rV(){const{carregando:r,projetos:e,tarefas:t}=$u(),n=H.useMemo(()=>{const o=e.length,a=t.length,u=t.filter(v=>(v.status||"").toLowerCase()!=="concluida").length,d=a-u,f=new Date().toISOString().slice(0,10),m=t.filter(v=>{const w=ph(v.fim),T=(v.status||"").toLowerCase();return w&&w<f&&T!=="concluida"}).length;return{totalProjetos:o,totalTarefas:a,pendentes:u,concluidas:d,atrasadas:m}},[e,t]);return I.jsxs("div",{className:"crono-page",children:[I.jsxs("div",{className:"crono-pagehead",children:[I.jsxs("div",{children:[I.jsx("h1",{children:"Viso geral"}),I.jsx("p",{children:"KPIs rpidos pra voc saber se o cronograma est na linha ou pedindo replanejamento."})]}),I.jsxs("div",{className:"crono-actions",children:[I.jsx(Rh,{className:"crono-btn",to:"/importar",children:" Importar tarefas"}),I.jsx(Rh,{className:"crono-btn secondary",to:"/projetos",children:" Ver projetos"})]})]}),I.jsxs("div",{className:"crono-grid kpi",children:[I.jsxs("div",{className:"crono-card",children:[I.jsx("div",{className:"crono-kpi-label",children:"Projetos"}),I.jsx("div",{className:"crono-kpi-value",children:r?"":n.totalProjetos})]}),I.jsxs("div",{className:"crono-card",children:[I.jsx("div",{className:"crono-kpi-label",children:"Tarefas"}),I.jsx("div",{className:"crono-kpi-value",children:r?"":n.totalTarefas})]}),I.jsxs("div",{className:"crono-card",children:[I.jsx("div",{className:"crono-kpi-label",children:"Pendentes"}),I.jsx("div",{className:"crono-kpi-value",children:r?"":n.pendentes})]}),I.jsxs("div",{className:"crono-card",children:[I.jsx("div",{className:"crono-kpi-label",children:"Atrasadas"}),I.jsx("div",{className:"crono-kpi-value",children:r?"":n.atrasadas})]})]}),I.jsxs("div",{className:"crono-grid two",children:[I.jsxs("div",{className:"crono-card",children:[I.jsx("h2",{children:"Prximas entregas"}),I.jsx("p",{className:"crono-muted",children:"Top 8 por data de incio (sem drama: s prioridade)."}),I.jsx("div",{className:"crono-tablewrap",children:I.jsxs("table",{className:"crono-table",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Incio"}),I.jsx("th",{children:"Tarefa"}),I.jsx("th",{children:"Projeto"}),I.jsx("th",{children:"Status"})]})}),I.jsx("tbody",{children:r?I.jsx("tr",{children:I.jsx("td",{colSpan:4,className:"crono-td-muted",children:"Carregando"})}):t.slice().sort((o,a)=>(ph(o.inicio)||"9999").localeCompare(ph(a.inicio)||"9999")).slice(0,8).map(o=>I.jsxs("tr",{children:[I.jsx("td",{children:ph(o.inicio)||""}),I.jsx("td",{className:"crono-td-strong",children:o.nome||"(sem nome)"}),I.jsx("td",{children:e.find(a=>a.id===o.projetoId)?.nome||""}),I.jsx("td",{children:I.jsx("span",{className:"crono-pill "+(o.status||"pendente").toLowerCase(),children:o.status||"pendente"})})]},o.id))})]})})]}),I.jsxs("div",{className:"crono-card",children:[I.jsx("h2",{children:"Checklist de sade"}),I.jsxs("ul",{className:"crono-list",children:[I.jsxs("li",{children:[I.jsx("span",{className:"crono-bullet",children:""})," Contraste corrigido: textos sempre em carto claro, nunca em camuflagem."]}),I.jsxs("li",{children:[I.jsx("span",{className:"crono-bullet",children:""})," Importador com fallback: se a IA falhar, d pra colar texto e tentar de novo."]}),I.jsxs("li",{children:[I.jsx("span",{className:"crono-bullet",children:""})," CRUD direto no Firestore compat do portal (sem gambiarras extras)."]}),I.jsxs("li",{children:[I.jsx("span",{className:"crono-bullet",children:""})," Prximo passo: Gantt visual (se quiser, a gente sobe o nvel)."]})]})]})]})]})}function iV(){const{carregando:r,projetos:e,tarefas:t,criarProjeto:n,editarProjeto:o,removerProjeto:a}=$u(),[u,d]=H.useState(""),[f,m]=H.useState(""),[v,w]=H.useState(!1),[T,C]=H.useState(""),U=H.useMemo(()=>{const G=new Map;for(const ne of t){const _e=ne.projetoId||"";G.set(_e,(G.get(_e)||0)+1)}return G},[t]);async function F(){if(C(""),!u.trim()){C("D um nome pro projeto (prometo que no vira burocracia).");return}w(!0);try{await n({nome:u.trim(),cliente:f.trim(),status:"ativo",criadoEm:new Date}),d(""),m("")}catch(G){console.error(G),C("Falha ao criar projeto.")}finally{w(!1)}}async function O(G,ne){const _e=window.prompt("Novo nome do projeto:",ne||"");if(_e===null)return;const pe=_e.trim();pe&&await o(G,{nome:pe})}async function te(G,ne){await o(G,{status:ne==="ativo"?"encerrado":"ativo"})}async function ee(G,ne){window.confirm(`Remover o projeto ${ne||"(sem nome)"}?

As tarefas continuam no banco; este boto s remove o projeto.`)&&await a(G)}return I.jsxs("div",{className:"crono-page",children:[I.jsx("div",{className:"crono-pagehead",children:I.jsxs("div",{children:[I.jsx("h1",{children:"Projetos"}),I.jsx("p",{children:"Estruture o portflio e mantenha o fluxo de entregveis em dia."})]})}),I.jsxs("div",{className:"crono-grid two",children:[I.jsxs("div",{className:"crono-card",children:[I.jsx("h2",{children:"Novo projeto"}),I.jsx("p",{className:"crono-muted",children:"Cria o continer. As tarefas vm depois (ou via IA)."}),I.jsxs("div",{className:"crono-form",children:[I.jsxs("label",{children:[I.jsx("span",{children:"Nome"}),I.jsx("input",{value:u,onChange:G=>d(G.target.value),placeholder:"Ex.: Monitoramento espeleolgico  Parauapebas"})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Cliente"}),I.jsx("input",{value:f,onChange:G=>m(G.target.value),placeholder:"Ex.: Contratante X"})]}),T&&I.jsx("div",{className:"crono-alert error",children:T}),I.jsx("button",{className:"crono-btn",onClick:F,disabled:v||r,children:v?"Salvando":"Criar projeto"})]})]}),I.jsxs("div",{className:"crono-card",children:[I.jsx("h2",{children:"Lista"}),I.jsxs("p",{className:"crono-muted",children:["Voc tem ",r?"":e.length," projetos cadastrados."]}),I.jsx("div",{className:"crono-tablewrap",children:I.jsxs("table",{className:"crono-table",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Projeto"}),I.jsx("th",{children:"Cliente"}),I.jsx("th",{children:"Tarefas"}),I.jsx("th",{children:"Status"}),I.jsx("th",{style:{width:220},children:"Aes"})]})}),I.jsx("tbody",{children:r?I.jsx("tr",{children:I.jsx("td",{colSpan:5,className:"crono-td-muted",children:"Carregando"})}):e.length===0?I.jsx("tr",{children:I.jsx("td",{colSpan:5,className:"crono-td-muted",children:"Nenhum projeto ainda."})}):e.slice().sort((G,ne)=>(G.nome||"").localeCompare(ne.nome||"")).map(G=>I.jsxs("tr",{children:[I.jsx("td",{className:"crono-td-strong",children:G.nome||"(sem nome)"}),I.jsx("td",{children:G.cliente||""}),I.jsx("td",{children:U.get(G.id)||0}),I.jsx("td",{children:I.jsx("span",{className:"crono-pill "+(G.status||"ativo"),children:G.status||"ativo"})}),I.jsx("td",{children:I.jsxs("div",{className:"crono-row-actions",children:[I.jsx("button",{className:"crono-btn tiny secondary",onClick:()=>O(G.id,G.nome),children:"Renomear"}),I.jsx("button",{className:"crono-btn tiny secondary",onClick:()=>te(G.id,G.status||"ativo"),children:"Ativar/Encerrar"}),I.jsx("button",{className:"crono-btn tiny danger",onClick:()=>ee(G.id,G.nome),children:"Remover"})]})})]},G.id))})]})})]})]})]})}function ia(r){if(!r)return"";if(typeof r=="string")return r.slice(0,10);if(r?.toDate)return r.toDate().toISOString().slice(0,10);try{return new Date(r).toISOString().slice(0,10)}catch{return""}}function sV(){const{carregando:r,projetos:e,tarefas:t,criarTarefa:n,editarTarefa:o,removerTarefa:a}=$u(),[u,d]=H.useState(""),[f,m]=H.useState(""),[v,w]=H.useState(""),[T,C]=H.useState(""),[U,F]=H.useState("pendente"),[O,te]=H.useState(""),[ee,G]=H.useState(!1),ne=H.useMemo(()=>(u?t.filter(k=>k.projetoId===u):t).slice().sort((k,N)=>(ia(k.inicio)||"9999").localeCompare(ia(N.inicio)||"9999")),[t,u]);async function _e(){if(te(""),!u){te("Selecione um projeto antes de criar tarefas.");return}if(!f.trim()){te("Nome da tarefa  obrigatrio.");return}G(!0);try{await n({projetoId:u,nome:f.trim(),inicio:v||"",fim:T||v||"",status:U,descricao:"",responsavel:"",categoria:"",produto:"",criadoEm:new Date}),m(""),w(""),C(""),F("pendente")}catch(A){console.error(A),te("Falha ao criar tarefa.")}finally{G(!1)}}async function pe(A){const k=window.prompt("Nome da tarefa:",A.nome||"");if(k===null)return;const N=window.prompt("Incio (YYYY-MM-DD):",ia(A.inicio)||"");if(N===null)return;const L=window.prompt("Fim (YYYY-MM-DD):",ia(A.fim)||N||"");L!==null&&await o(A.id,{nome:k.trim()||A.nome,inicio:(N||"").slice(0,10),fim:(L||"").slice(0,10)})}async function D(A){const N=(A.status||"pendente").toLowerCase()==="concluida"?"pendente":"concluida";await o(A.id,{status:N})}async function x(A){window.confirm(`Remover tarefa ${A.nome||"(sem nome)"}?`)&&await a(A.id)}return I.jsxs("div",{className:"crono-page",children:[I.jsx("div",{className:"crono-pagehead",children:I.jsxs("div",{children:[I.jsx("h1",{children:"Tarefas"}),I.jsx("p",{children:"Operao: simples, limpa e sem texto invisvel. (A gente gosta de ler o que escreve.)"})]})}),I.jsxs("div",{className:"crono-card",children:[I.jsxs("div",{className:"crono-toolbar",children:[I.jsxs("div",{className:"crono-field",children:[I.jsx("label",{children:"Projeto"}),I.jsxs("select",{value:u,onChange:A=>d(A.target.value),disabled:r,children:[I.jsx("option",{value:"",children:" Todos "}),e.map(A=>I.jsx("option",{value:A.id,children:A.nome},A.id))]})]}),I.jsx("div",{className:"crono-toolbar-spacer"}),I.jsx("button",{className:"crono-btn secondary",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:" topo"})]}),I.jsx("div",{className:"crono-divider"}),I.jsx("h2",{children:"Nova tarefa"}),I.jsxs("div",{className:"crono-form inline",children:[I.jsxs("label",{children:[I.jsx("span",{children:"Nome"}),I.jsx("input",{value:f,onChange:A=>m(A.target.value),placeholder:"Ex.: Reviso de dados (gabinete)"})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Incio"}),I.jsx("input",{type:"date",value:v,onChange:A=>w(A.target.value)})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Fim"}),I.jsx("input",{type:"date",value:T,onChange:A=>C(A.target.value)})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Status"}),I.jsxs("select",{value:U,onChange:A=>F(A.target.value),children:[I.jsx("option",{value:"pendente",children:"pendente"}),I.jsx("option",{value:"em_andamento",children:"em_andamento"}),I.jsx("option",{value:"concluida",children:"concluida"})]})]}),I.jsxs("button",{className:"crono-btn",onClick:_e,disabled:ee||r,children:[" ",ee?"Salvando":"Adicionar"]})]}),O&&I.jsx("div",{className:"crono-alert error",style:{marginTop:12},children:O}),I.jsx("div",{className:"crono-divider"}),I.jsx("h2",{children:"Lista"}),I.jsxs("p",{className:"crono-muted",children:["Total visvel: ",r?"":ne.length,"."]}),I.jsx("div",{className:"crono-tablewrap",children:I.jsxs("table",{className:"crono-table",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Incio"}),I.jsx("th",{children:"Fim"}),I.jsx("th",{children:"Tarefa"}),I.jsx("th",{children:"Projeto"}),I.jsx("th",{children:"Status"}),I.jsx("th",{style:{width:220},children:"Aes"})]})}),I.jsx("tbody",{children:r?I.jsx("tr",{children:I.jsx("td",{colSpan:6,className:"crono-td-muted",children:"Carregando"})}):ne.length===0?I.jsx("tr",{children:I.jsx("td",{colSpan:6,className:"crono-td-muted",children:"Nada por aqui ainda."})}):ne.map(A=>I.jsxs("tr",{children:[I.jsx("td",{children:ia(A.inicio)||""}),I.jsx("td",{children:ia(A.fim)||""}),I.jsx("td",{className:"crono-td-strong",children:A.nome||"(sem nome)"}),I.jsx("td",{children:e.find(k=>k.id===A.projetoId)?.nome||""}),I.jsx("td",{children:I.jsx("span",{className:"crono-pill "+(A.status||"pendente").toLowerCase(),children:A.status||"pendente"})}),I.jsx("td",{children:I.jsxs("div",{className:"crono-row-actions",children:[I.jsx("button",{className:"crono-btn tiny secondary",onClick:()=>pe(A),children:"Editar"}),I.jsx("button",{className:"crono-btn tiny",onClick:()=>D(A),children:(A.status||"pendente").toLowerCase()==="concluida"?"Reabrir":"Concluir"}),I.jsx("button",{className:"crono-btn tiny danger",onClick:()=>x(A),children:"Remover"})]})})]},A.id))})]})})]})]})}function Wl(r){if(!r)return"";if(typeof r=="string")return r.slice(0,10);if(r?.toDate)return r.toDate().toISOString().slice(0,10);try{return new Date(r).toISOString().slice(0,10)}catch{return""}}function oV(r){return r?r.slice(0,7):"Sem data"}function aV(){const{carregando:r,projetos:e,tarefas:t}=$u(),[n,o]=H.useState(""),a=H.useMemo(()=>{const u=n?t.filter(m=>m.projetoId===n):t,d=new Map;for(const m of u){const v=Wl(m.inicio)||"",w=oV(v);d.has(w)||d.set(w,[]),d.get(w).push(m)}const f=Array.from(d.entries()).sort((m,v)=>m[0].localeCompare(v[0]));for(const[,m]of f)m.sort((v,w)=>(Wl(v.inicio)||"9999").localeCompare(Wl(w.inicio)||"9999"));return f},[t,n]);return I.jsxs("div",{className:"crono-page",children:[I.jsx("div",{className:"crono-pagehead",children:I.jsxs("div",{children:[I.jsx("h1",{children:"Calendrio"}),I.jsx("p",{children:"Uma viso por ms para enxergar gargalos sem precisar de lupa."})]})}),I.jsxs("div",{className:"crono-card",children:[I.jsx("div",{className:"crono-toolbar",children:I.jsxs("div",{className:"crono-field",children:[I.jsx("label",{children:"Projeto"}),I.jsxs("select",{value:n,onChange:u=>o(u.target.value),disabled:r,children:[I.jsx("option",{value:"",children:" Todos "}),e.map(u=>I.jsx("option",{value:u.id,children:u.nome},u.id))]})]})}),I.jsx("div",{className:"crono-divider"}),r?I.jsx("div",{className:"crono-td-muted",children:"Carregando"}):a.length===0?I.jsx("div",{className:"crono-td-muted",children:"Nenhuma tarefa encontrada."}):a.map(([u,d])=>I.jsxs("div",{className:"crono-month",children:[I.jsx("h2",{children:u==="Sem data"?"Sem data":u.replace("-","/")}),I.jsx("div",{className:"crono-tablewrap",children:I.jsxs("table",{className:"crono-table",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Incio"}),I.jsx("th",{children:"Fim"}),I.jsx("th",{children:"Tarefa"}),I.jsx("th",{children:"Projeto"}),I.jsx("th",{children:"Status"})]})}),I.jsx("tbody",{children:d.map(f=>I.jsxs("tr",{children:[I.jsx("td",{children:Wl(f.inicio)||""}),I.jsx("td",{children:Wl(f.fim)||""}),I.jsx("td",{className:"crono-td-strong",children:f.nome||"(sem nome)"}),I.jsx("td",{children:e.find(m=>m.id===f.projetoId)?.nome||""}),I.jsx("td",{children:I.jsx("span",{className:"crono-pill "+(f.status||"pendente").toLowerCase(),children:f.status||"pendente"})})]},f.id))})]})})]},u))]})]})}const lV="https://us-central1-portal-relevo.cloudfunctions.net/interpretarArquivo";function Mw(r){if(!r)return"";if(typeof r=="string")return r.slice(0,10);if(r?.toDate)return r.toDate().toISOString().slice(0,10);try{return new Date(r).toISOString().slice(0,10)}catch{return""}}function Gl(r,e){const t=new Date(r+"T00:00:00");return t.setDate(t.getDate()+(Number(e)||0)),t.toISOString().slice(0,10)}function uV(r,e){const t=(r?.nome||r?.title||r?.tarefa||"").toString(),n=(r?.descricao||r?.description||"").toString(),o=(r?.categoria||"").toString(),a=(r?.produto||"").toString(),u=(r?.responsavel||r?.owner||"").toString(),d=Mw(r?.inicio||r?.start||r?.dataInicio),f=Mw(r?.fim||r?.end||r?.dataFim),m=Number(r?.inicioRelativoDias??r?.inicio_relativo_dias??0)||0,v=Math.max(1,Number(r?.duracaoDias??r?.duracao_dias??1)||1);return{idLocal:`${Date.now()}-${e}`,nome:t,descricao:n,categoria:o,produto:a,responsavel:u,inicioAbs:d,fimAbs:f,inicioRel:m,dur:v,collapsed:!1}}function cV(){const{carregando:r,projetos:e,criarTarefa:t}=$u(),[n,o]=H.useState(""),[a,u]=H.useState(()=>new Date().toISOString().slice(0,10)),[d,f]=H.useState(null),[m,v]=H.useState(""),[w,T]=H.useState(""),[C,U]=H.useState([]),[F,O]=H.useState(!1),[te,ee]=H.useState(!1),[G,ne]=H.useState(""),[_e,pe]=H.useState(""),D=H.useMemo(()=>!!n&&(!!d||m.trim().length>20),[n,d,m]);function x(){f(null),v(""),T(""),U([]),ne(""),pe("");const le=document.getElementById("crono-file");le&&(le.value="")}function A(le){const Te=le.target.files?.[0]||null;f(Te),ne(""),pe("")}async function k(){if(ne(""),pe(""),!n){ne("Selecione um projeto.");return}let le=d;if(!le){const Te=new Blob([m],{type:"text/plain"});le=new File([Te],"texto-colado.txt",{type:"text/plain"})}O(!0);try{const Te=new FormData;Te.append("file",le);const xe=await fetch(lV,{method:"POST",body:Te});let Ce="",ie=null;try{Ce=await xe.text(),ie=Ce?JSON.parse(Ce):null}catch{ie=null}if(!xe.ok){const Q=ie?.error||Ce||`Erro HTTP ${xe.status}`;throw new Error(Q)}const Ie=Array.isArray(ie)?ie:ie?.tarefas;if(!Array.isArray(Ie))throw new Error("Resposta inesperada da IA (sem lista de tarefas).");const ce=ie?.texto||ie?.textoOriginal||Ce;T(typeof ce=="string"?ce:JSON.stringify(ie,null,2));const j=Ie.map((Q,Ee)=>uV(Q,Ee));U(j),pe("Tarefas geradas. Agora  s revisar e salvar.")}catch(Te){console.error(Te),ne("Falha ao processar com IA. "+(Te?.message||"Erro desconhecido")+`

Dica rpida: se for PDF escaneado, cole o texto aqui (ou exporte para texto) e tente novamente.`)}finally{O(!1)}}function N(le,Te){U(xe=>xe.map((Ce,ie)=>ie===le?{...Ce,...Te}:Ce))}function L(le,Te){le!==Te&&U(xe=>{const Ce=xe.slice(),[ie]=Ce.splice(le,1);return Ce.splice(Te,0,ie),Ce})}async function R(){if(ne(""),pe(""),!n){ne("Selecione um projeto.");return}if(C.length===0){ne("Nenhuma tarefa para salvar.");return}ee(!0);try{for(const le of C){const Te=le.inicioAbs||Gl(a,le.inicioRel),xe=le.fimAbs||Gl(Te,Math.max(0,(le.dur||1)-1));await t({projetoId:n,nome:le.nome||"Tarefa sem nome",descricao:le.descricao||"",categoria:le.categoria||"",produto:le.produto||"",responsavel:le.responsavel||"",status:"pendente",inicio:Te,fim:xe,criadoEm:new Date})}pe("Tarefas salvas no projeto. Bora tocar o cronograma.")}catch(le){console.error(le),ne("Falha ao salvar tarefas no Firestore.")}finally{ee(!1)}}return I.jsxs("div",{className:"crono-page",children:[I.jsx("div",{className:"crono-pagehead",children:I.jsxs("div",{children:[I.jsx("h1",{children:"Importar cronograma (IA)"}),I.jsx("p",{children:"Envie um PDF/DOCX/TXT (ou cole o texto), deixe a IA sugerir tarefas e revise antes de gravar."})]})}),I.jsxs("div",{className:"crono-card",children:[I.jsxs("div",{className:"crono-grid two",style:{alignItems:"end"},children:[I.jsxs("div",{className:"crono-form",children:[I.jsxs("label",{children:[I.jsx("span",{children:"Projeto"}),I.jsxs("select",{value:n,onChange:le=>o(le.target.value),disabled:r||F||te,children:[I.jsx("option",{value:"",children:" Selecione "}),e.map(le=>I.jsx("option",{value:le.id,children:le.nome},le.id))]})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Data base (para tarefas relativas)"}),I.jsx("input",{type:"date",value:a,onChange:le=>u(le.target.value),disabled:F||te})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Arquivo"}),I.jsx("input",{id:"crono-file",type:"file",accept:".pdf,.doc,.docx,.txt",onChange:A,disabled:F||te})]})]}),I.jsxs("div",{className:"crono-form",children:[I.jsxs("label",{children:[I.jsx("span",{children:"Ou cole o texto (fallback)"}),I.jsx("textarea",{rows:7,value:m,onChange:le=>v(le.target.value),placeholder:"Cole aqui o contedo da proposta/relatrio. (Se tiver menos de ~20 caracteres, eu suspeito que foi Ctrl+C sem querer.)",disabled:F||te})]}),I.jsxs("div",{className:"crono-row-actions",style:{justifyContent:"flex-end"},children:[I.jsx("button",{className:"crono-btn secondary",onClick:x,disabled:F||te,children:"Limpar"}),I.jsx("button",{className:"crono-btn",onClick:k,disabled:!D||F||te||r,children:F?"Processando":"Extrair tarefas com IA"})]})]})]}),(G||_e)&&I.jsxs("div",{style:{marginTop:12},children:[G&&I.jsx("div",{className:"crono-alert error",style:{whiteSpace:"pre-wrap"},children:G}),_e&&I.jsx("div",{className:"crono-alert ok",children:_e})]}),I.jsx("div",{className:"crono-divider"}),I.jsxs("div",{className:"crono-grid two",children:[I.jsxs("div",{className:"crono-card inner",children:[I.jsx("h2",{children:"Texto/retorno"}),I.jsx("p",{className:"crono-muted",children:"til para depurar quando a IA resolve ser criativa."}),I.jsx("pre",{className:"crono-pre",children:w||"Nada ainda."})]}),I.jsxs("div",{className:"crono-card inner",children:[I.jsxs("div",{className:"crono-row",style:{justifyContent:"space-between",alignItems:"baseline"},children:[I.jsxs("div",{children:[I.jsx("h2",{children:"Tarefas extradas"}),I.jsx("p",{className:"crono-muted",children:"Arraste (/) para reordenar. Clique para expandir."})]}),I.jsx("button",{className:"crono-btn",onClick:R,disabled:te||F||r||C.length===0||!n,children:te?"Salvando":"Salvar no projeto"})]}),C.length===0?I.jsx("div",{className:"crono-td-muted",children:"Nenhuma tarefa ainda."}):I.jsx("div",{className:"crono-tasklist",children:C.map((le,Te)=>I.jsxs("div",{className:"crono-taskcard "+(le.collapsed?"collapsed":""),onClick:()=>N(Te,{collapsed:!le.collapsed}),children:[I.jsxs("div",{className:"crono-taskhead",children:[I.jsxs("div",{className:"crono-tasktitle",children:[I.jsxs("span",{className:"crono-tasknum",children:["#",Te+1]}),I.jsx("strong",{children:le.nome||"(sem nome)"})]}),I.jsxs("div",{className:"crono-row-actions",onClick:xe=>xe.stopPropagation(),children:[I.jsx("button",{className:"crono-btn tiny secondary",onClick:()=>L(Te,Math.max(0,Te-1)),disabled:Te===0,children:""}),I.jsx("button",{className:"crono-btn tiny secondary",onClick:()=>L(Te,Math.min(C.length-1,Te+1)),disabled:Te===C.length-1,children:""}),I.jsx("button",{className:"crono-btn tiny danger",onClick:()=>U(xe=>xe.filter((Ce,ie)=>ie!==Te)),children:"Remover"})]})]}),I.jsxs("div",{className:"crono-taskbody",onClick:xe=>xe.stopPropagation(),children:[I.jsxs("div",{className:"crono-form inline twoCols",children:[I.jsxs("label",{children:[I.jsx("span",{children:"Nome"}),I.jsx("input",{value:le.nome,onChange:xe=>N(Te,{nome:xe.target.value})})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Responsvel"}),I.jsx("input",{value:le.responsavel,onChange:xe=>N(Te,{responsavel:xe.target.value})})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Categoria"}),I.jsx("input",{value:le.categoria,onChange:xe=>N(Te,{categoria:xe.target.value})})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Produto"}),I.jsx("input",{value:le.produto,onChange:xe=>N(Te,{produto:xe.target.value})})]}),I.jsxs("label",{className:"span2",children:[I.jsx("span",{children:"Descrio"}),I.jsx("textarea",{rows:2,value:le.descricao,onChange:xe=>N(Te,{descricao:xe.target.value})})]})]}),I.jsx("div",{className:"crono-divider slim"}),I.jsxs("div",{className:"crono-grid three",children:[I.jsxs("div",{className:"crono-mini",children:[I.jsx("div",{className:"crono-mini-label",children:"Modo"}),I.jsx("div",{className:"crono-mini-value",children:le.inicioAbs?"Datas absolutas":"Relativo  data base"})]}),I.jsxs("div",{className:"crono-mini",children:[I.jsx("div",{className:"crono-mini-label",children:"Incio"}),I.jsx("div",{className:"crono-mini-value",children:le.inicioAbs||Gl(a,le.inicioRel)})]}),I.jsxs("div",{className:"crono-mini",children:[I.jsx("div",{className:"crono-mini-label",children:"Fim"}),I.jsx("div",{className:"crono-mini-value",children:le.fimAbs||Gl(le.inicioAbs||Gl(a,le.inicioRel),Math.max(0,(le.dur||1)-1))})]})]}),!le.inicioAbs&&I.jsxs("div",{className:"crono-form inline",style:{marginTop:10},children:[I.jsxs("label",{children:[I.jsx("span",{children:"Incio relativo (dias)"}),I.jsx("input",{type:"number",value:le.inicioRel,onChange:xe=>N(Te,{inicioRel:Number(xe.target.value||0)})})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Durao (dias)"}),I.jsx("input",{type:"number",value:le.dur,onChange:xe=>N(Te,{dur:Math.max(1,Number(xe.target.value||1))})})]})]}),le.inicioAbs&&I.jsxs("div",{className:"crono-form inline",style:{marginTop:10},children:[I.jsxs("label",{children:[I.jsx("span",{children:"Incio (YYYY-MM-DD)"}),I.jsx("input",{type:"date",value:le.inicioAbs,onChange:xe=>N(Te,{inicioAbs:xe.target.value})})]}),I.jsxs("label",{children:[I.jsx("span",{children:"Fim (YYYY-MM-DD)"}),I.jsx("input",{type:"date",value:le.fimAbs,onChange:xe=>N(Te,{fimAbs:xe.target.value})})]})]})]})]},le.idLocal))})]})]})]})]})}function hV(){const{user:r,loading:e}=Ag();return e?I.jsx("div",{style:{padding:24},children:I.jsx("p",{children:"Carregando sesso"})}):r?I.jsx(Gk,{children:I.jsxs(wA,{children:[I.jsx(ks,{path:"/",element:I.jsx(rV,{})}),I.jsx(ks,{path:"/projetos",element:I.jsx(iV,{})}),I.jsx(ks,{path:"/tarefas",element:I.jsx(sV,{})}),I.jsx(ks,{path:"/calendario",element:I.jsx(aV,{})}),I.jsx(ks,{path:"/importar",element:I.jsx(cV,{})}),I.jsx(ks,{path:"*",element:I.jsx(_A,{to:"/",replace:!0})})]})}):I.jsx("div",{style:{padding:24},children:I.jsx("p",{children:"Acesso negado. Faa login pelo Portal Relevo e depois volte para o Cronograma."})})}function dV(){return I.jsx(RA,{basename:"/cronograma",children:I.jsx(hV,{})})}f0().then(({db:r,auth:e,user:t})=>{console.log(" [main.jsx] Bootstrap concludo via Portal Relevo:",{db:r,auth:e,user:t});const n=document.getElementById("root");if(!n){console.error(" [main.jsx] ERRO FATAL: #root no encontrado no DOM.");return}CS.createRoot(n).render(I.jsx(Uw.StrictMode,{children:I.jsx(Wk,{initialUser:t,children:I.jsx(nV,{children:I.jsx(dV,{})})})}))}).catch(r=>{console.error(" [main.jsx] Erro no bootstrap do Cronograma:",r)});
