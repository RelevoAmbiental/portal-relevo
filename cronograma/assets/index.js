function wS(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Fw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Zf={exports:{}},Bl={},ep={exports:{}},ke={};var D_;function ES(){if(D_)return ke;D_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,j={};function N(F,J,Se){this.props=F,this.context=J,this.refs=j,this.updater=Se||P}N.prototype.isReactComponent={},N.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},N.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Y(){}Y.prototype=N.prototype;function Q(F,J,Se){this.props=F,this.context=J,this.refs=j,this.updater=Se||P}var G=Q.prototype=new Y;G.constructor=Q,L(G,N.prototype),G.isPureReactComponent=!0;var X=Array.isArray,pe=Object.prototype.hasOwnProperty,Ee={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(F,J,Se){var De,Ne={},Le=null,$e=null;if(J!=null)for(De in J.ref!==void 0&&($e=J.ref),J.key!==void 0&&(Le=""+J.key),J)pe.call(J,De)&&!k.hasOwnProperty(De)&&(Ne[De]=J[De]);var qe=arguments.length-2;if(qe===1)Ne.children=Se;else if(1<qe){for(var Xe=Array(qe),Nt=0;Nt<qe;Nt++)Xe[Nt]=arguments[Nt+2];Ne.children=Xe}if(F&&F.defaultProps)for(De in qe=F.defaultProps,qe)Ne[De]===void 0&&(Ne[De]=qe[De]);return{$$typeof:r,type:F,key:Le,ref:$e,props:Ne,_owner:Ee.current}}function R(F,J){return{$$typeof:r,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function O(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Se){return J[Se]})}var M=/\/+/g;function C(F,J){return typeof F=="object"&&F!==null&&F.key!=null?O(""+F.key):J.toString(36)}function ut(F,J,Se,De,Ne){var Le=typeof F;(Le==="undefined"||Le==="boolean")&&(F=null);var $e=!1;if(F===null)$e=!0;else switch(Le){case"string":case"number":$e=!0;break;case"object":switch(F.$$typeof){case r:case e:$e=!0}}if($e)return $e=F,Ne=Ne($e),F=De===""?"."+C($e,0):De,X(Ne)?(Se="",F!=null&&(Se=F.replace(M,"$&/")+"/"),ut(Ne,J,Se,"",function(Nt){return Nt})):Ne!=null&&(V(Ne)&&(Ne=R(Ne,Se+(!Ne.key||$e&&$e.key===Ne.key?"":(""+Ne.key).replace(M,"$&/")+"/")+F)),J.push(Ne)),1;if($e=0,De=De===""?".":De+":",X(F))for(var qe=0;qe<F.length;qe++){Le=F[qe];var Xe=De+C(Le,qe);$e+=ut(Le,J,Se,Xe,Ne)}else if(Xe=T(F),typeof Xe=="function")for(F=Xe.call(F),qe=0;!(Le=F.next()).done;)Le=Le.value,Xe=De+C(Le,qe++),$e+=ut(Le,J,Se,Xe,Ne);else if(Le==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return $e}function ye(F,J,Se){if(F==null)return F;var De=[],Ne=0;return ut(F,De,"","",function(Le){return J.call(Se,Le,Ne++)}),De}function fe(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(Se){(F._status===0||F._status===-1)&&(F._status=1,F._result=Se)},function(Se){(F._status===0||F._status===-1)&&(F._status=2,F._result=Se)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var le={current:null},ie={transition:null},_e={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:Ee};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:ye,forEach:function(F,J,Se){ye(F,function(){J.apply(this,arguments)},Se)},count:function(F){var J=0;return ye(F,function(){J++}),J},toArray:function(F){return ye(F,function(J){return J})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ke.Component=N,ke.Fragment=t,ke.Profiler=s,ke.PureComponent=Q,ke.StrictMode=n,ke.Suspense=f,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,ke.act=ce,ke.cloneElement=function(F,J,Se){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var De=L({},F.props),Ne=F.key,Le=F.ref,$e=F._owner;if(J!=null){if(J.ref!==void 0&&(Le=J.ref,$e=Ee.current),J.key!==void 0&&(Ne=""+J.key),F.type&&F.type.defaultProps)var qe=F.type.defaultProps;for(Xe in J)pe.call(J,Xe)&&!k.hasOwnProperty(Xe)&&(De[Xe]=J[Xe]===void 0&&qe!==void 0?qe[Xe]:J[Xe])}var Xe=arguments.length-2;if(Xe===1)De.children=Se;else if(1<Xe){qe=Array(Xe);for(var Nt=0;Nt<Xe;Nt++)qe[Nt]=arguments[Nt+2];De.children=qe}return{$$typeof:r,type:F.type,key:Ne,ref:Le,props:De,_owner:$e}},ke.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},ke.createElement=A,ke.createFactory=function(F){var J=A.bind(null,F);return J.type=F,J},ke.createRef=function(){return{current:null}},ke.forwardRef=function(F){return{$$typeof:d,render:F}},ke.isValidElement=V,ke.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:fe}},ke.memo=function(F,J){return{$$typeof:m,type:F,compare:J===void 0?null:J}},ke.startTransition=function(F){var J=ie.transition;ie.transition={};try{F()}finally{ie.transition=J}},ke.unstable_act=ce,ke.useCallback=function(F,J){return le.current.useCallback(F,J)},ke.useContext=function(F){return le.current.useContext(F)},ke.useDebugValue=function(){},ke.useDeferredValue=function(F){return le.current.useDeferredValue(F)},ke.useEffect=function(F,J){return le.current.useEffect(F,J)},ke.useId=function(){return le.current.useId()},ke.useImperativeHandle=function(F,J,Se){return le.current.useImperativeHandle(F,J,Se)},ke.useInsertionEffect=function(F,J){return le.current.useInsertionEffect(F,J)},ke.useLayoutEffect=function(F,J){return le.current.useLayoutEffect(F,J)},ke.useMemo=function(F,J){return le.current.useMemo(F,J)},ke.useReducer=function(F,J,Se){return le.current.useReducer(F,J,Se)},ke.useRef=function(F){return le.current.useRef(F)},ke.useState=function(F){return le.current.useState(F)},ke.useSyncExternalStore=function(F,J,Se){return le.current.useSyncExternalStore(F,J,Se)},ke.useTransition=function(){return le.current.useTransition()},ke.version="18.3.1",ke}var N_;function nm(){return N_||(N_=1,ep.exports=ES()),ep.exports}var k_;function TS(){if(k_)return Bl;k_=1;var r=nm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,w={},T=null,P=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)n.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:d,key:T,ref:P,props:w,_owner:s.current}}return Bl.Fragment=t,Bl.jsx=u,Bl.jsxs=u,Bl}var V_;function IS(){return V_||(V_=1,Zf.exports=TS()),Zf.exports}var E=IS(),H=nm();const Mw=Fw(H),SS=wS({__proto__:null,default:Mw},[H]);var ah={},tp={exports:{}},gn={},np={exports:{}},rp={};var b_;function AS(){return b_||(b_=1,(function(r){function e(ie,_e){var ce=ie.length;ie.push(_e);e:for(;0<ce;){var F=ce-1>>>1,J=ie[F];if(0<s(J,_e))ie[F]=_e,ie[ce]=J,ce=F;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var _e=ie[0],ce=ie.pop();if(ce!==_e){ie[0]=ce;e:for(var F=0,J=ie.length,Se=J>>>1;F<Se;){var De=2*(F+1)-1,Ne=ie[De],Le=De+1,$e=ie[Le];if(0>s(Ne,ce))Le<J&&0>s($e,Ne)?(ie[F]=$e,ie[Le]=ce,F=Le):(ie[F]=Ne,ie[De]=ce,F=De);else if(Le<J&&0>s($e,ce))ie[F]=$e,ie[Le]=ce,F=Le;else break e}}return _e}function s(ie,_e){var ce=ie.sortIndex-_e.sortIndex;return ce!==0?ce:ie.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,w=null,T=3,P=!1,L=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ie){for(var _e=t(m);_e!==null;){if(_e.callback===null)n(m);else if(_e.startTime<=ie)n(m),_e.sortIndex=_e.expirationTime,e(f,_e);else break;_e=t(m)}}function X(ie){if(j=!1,G(ie),!L)if(t(f)!==null)L=!0,fe(pe);else{var _e=t(m);_e!==null&&le(X,_e.startTime-ie)}}function pe(ie,_e){L=!1,j&&(j=!1,Y(A),A=-1),P=!0;var ce=T;try{for(G(_e),w=t(f);w!==null&&(!(w.expirationTime>_e)||ie&&!O());){var F=w.callback;if(typeof F=="function"){w.callback=null,T=w.priorityLevel;var J=F(w.expirationTime<=_e);_e=r.unstable_now(),typeof J=="function"?w.callback=J:w===t(f)&&n(f),G(_e)}else n(f);w=t(f)}if(w!==null)var Se=!0;else{var De=t(m);De!==null&&le(X,De.startTime-_e),Se=!1}return Se}finally{w=null,T=ce,P=!1}}var Ee=!1,k=null,A=-1,R=5,V=-1;function O(){return!(r.unstable_now()-V<R)}function M(){if(k!==null){var ie=r.unstable_now();V=ie;var _e=!0;try{_e=k(!0,ie)}finally{_e?C():(Ee=!1,k=null)}}else Ee=!1}var C;if(typeof Q=="function")C=function(){Q(M)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,ye=ut.port2;ut.port1.onmessage=M,C=function(){ye.postMessage(null)}}else C=function(){N(M,0)};function fe(ie){k=ie,Ee||(Ee=!0,C())}function le(ie,_e){A=N(function(){ie(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){L||P||(L=!0,fe(pe))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var ce=T;T=_e;try{return ie()}finally{T=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,_e){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ce=T;T=ie;try{return _e()}finally{T=ce}},r.unstable_scheduleCallback=function(ie,_e,ce){var F=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?F+ce:F):ce=F,ie){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,ie={id:_++,callback:_e,priorityLevel:ie,startTime:ce,expirationTime:J,sortIndex:-1},ce>F?(ie.sortIndex=ce,e(m,ie),t(f)===null&&ie===t(m)&&(j?(Y(A),A=-1):j=!0,le(X,ce-F))):(ie.sortIndex=J,e(f,ie),L||P||(L=!0,fe(pe))),ie},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(ie){var _e=T;return function(){var ce=T;T=_e;try{return ie.apply(this,arguments)}finally{T=ce}}}})(rp)),rp}var j_;function xS(){return j_||(j_=1,np.exports=AS()),np.exports}var O_;function PS(){if(O_)return gn;O_=1;var r=nm(),e=xS();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function T(i){return f.call(w,i)?!0:f.call(_,i)?!1:m.test(i)?w[i]=!0:(_[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function L(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(i,o,l,h,p,y,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=I}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){N[i]=new j(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];N[o]=new j(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){N[i]=new j(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){N[i]=new j(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){N[i]=new j(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){N[i]=new j(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){N[i]=new j(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){N[i]=new j(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){N[i]=new j(i,5,!1,i.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Y,Q);N[o]=new j(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Y,Q);N[o]=new j(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Y,Q);N[o]=new j(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){N[i]=new j(i,1,!1,i.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){N[i]=new j(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,l,h){var p=N.hasOwnProperty(o)?N[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(L(o,l,p,h)&&(l=null),h||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Object.assign,F;function J(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var Se=!1;function De(i,o){if(!i||Se)return"";Se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var h=q}Reflect.construct(i,[],o)}else{try{o.call()}catch(q){h=q}i.call(o.prototype)}else{try{throw Error()}catch(q){h=q}i()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var p=q.stack.split(`
`),y=h.stack.split(`
`),I=p.length-1,x=y.length-1;1<=I&&0<=x&&p[I]!==y[x];)x--;for(;1<=I&&0<=x;I--,x--)if(p[I]!==y[x]){if(I!==1||x!==1)do if(I--,x--,0>x||p[I]!==y[x]){var D=`
`+p[I].replace(" at new "," at ");return i.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",i.displayName)),D}while(1<=I&&0<=x);break}}}finally{Se=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?J(i):""}function Ne(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=De(i.type,!1),i;case 11:return i=De(i.type.render,!1),i;case 1:return i=De(i.type,!0),i;default:return""}}function Le(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case Ee:return"Portal";case R:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case ut:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ye:return o=i.displayName||null,o!==null?o:Le(i.type)||"Memo";case fe:o=i._payload,i=i._init;try{return Le(i(o))}catch{}}return null}function $e(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function qe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nt(i){var o=Xe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(I){h=""+I,y.call(this,I)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function xr(i){i._valueTracker||(i._valueTracker=Nt(i))}function io(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Xe(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function Zr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ts(i,o){var l=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function so(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=qe(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Wa(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function Ga(i,o){Wa(i,o);var l=qe(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?oo(i,o.type,l):o.hasOwnProperty("defaultValue")&&oo(i,o.type,qe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Wu(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function oo(i,o,l){(o!=="number"||Zr(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Pr=Array.isArray;function Cr(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+qe(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Qa(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ao(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(Pr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:qe(l)}}function lo(i,o){var l=qe(o.value),h=qe(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function Ha(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function At(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?At(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Rr,Xa=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Rr=Rr||document.createElement("div"),Rr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Rr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ei(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rs=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(i){rs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ns[o]=ns[i]})});function Ya(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||ns.hasOwnProperty(i)&&ns[i]?(""+o).trim():o+"px"}function Ja(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Ya(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Za=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function el(i,o){if(o){if(Za[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function tl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var is=null;function uo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var co=null,Dn=null,ar=null;function ho(i){if(i=Al(i)){if(typeof co!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Tc(o),co(i.stateNode,i.type,o))}}function lr(i){Dn?ar?ar.push(i):ar=[i]:Dn=i}function nl(){if(Dn){var i=Dn,o=ar;if(ar=Dn=null,ho(i),o)for(i=0;i<o.length;i++)ho(o[i])}}function ss(i,o){return i(o)}function rl(){}var Dr=!1;function il(i,o,l){if(Dr)return i(o,l);Dr=!0;try{return ss(i,o,l)}finally{Dr=!1,(Dn!==null||ar!==null)&&(rl(),nl())}}function mt(i,o){var l=i.stateNode;if(l===null)return null;var h=Tc(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var fo=!1;if(d)try{var $n={};Object.defineProperty($n,"passive",{get:function(){fo=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{fo=!1}function os(i,o,l,h,p,y,I,x,D){var q=Array.prototype.slice.call(arguments,3);try{o.apply(l,q)}catch(ne){this.onError(ne)}}var as=!1,po=null,qn=!1,sl=null,xd={onError:function(i){as=!0,po=i}};function mo(i,o,l,h,p,y,I,x,D){as=!1,po=null,os.apply(xd,arguments)}function Gu(i,o,l,h,p,y,I,x,D){if(mo.apply(this,arguments),as){if(as){var q=po;as=!1,po=null}else throw Error(t(198));qn||(qn=!0,sl=q)}}function Kn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function ls(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Wn(i){if(Kn(i)!==i)throw Error(t(188))}function Qu(i){var o=i.alternate;if(!o){if(o=Kn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Wn(p),i;if(y===h)return Wn(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var I=!1,x=p.child;x;){if(x===l){I=!0,l=p,h=y;break}if(x===h){I=!0,h=p,l=y;break}x=x.sibling}if(!I){for(x=y.child;x;){if(x===l){I=!0,l=y,h=p;break}if(x===h){I=!0,h=y,l=p;break}x=x.sibling}if(!I)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function ol(i){return i=Qu(i),i!==null?go(i):null}function go(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=go(i);if(o!==null)return o;i=i.sibling}return null}var yo=e.unstable_scheduleCallback,al=e.unstable_cancelCallback,Hu=e.unstable_shouldYield,Pd=e.unstable_requestPaint,Ye=e.unstable_now,Xu=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,ti=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,ll=e.unstable_LowPriority,Yu=e.unstable_IdlePriority,cs=null,wn=null;function Ju(i){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(cs,i,void 0,(i.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:ec,ul=Math.log,Zu=Math.LN2;function ec(i){return i>>>=0,i===0?32:31-(ul(i)/Zu|0)|0}var _o=64,vo=4194304;function ni(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function hs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,I=l&268435455;if(I!==0){var x=I&~p;x!==0?h=ni(x):(y&=I,y!==0&&(h=ni(y)))}else I=l&~p,I!==0?h=ni(I):y!==0&&(h=ni(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-en(o),p=1<<l,h|=i[l],o&=~p;return h}function Cd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nr(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var I=31-en(y),x=1<<I,D=p[I];D===-1?((x&l)===0||(x&h)!==0)&&(p[I]=Cd(x,o)):D<=o&&(i.expiredLanes|=x),y&=~x}}function En(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ds(){var i=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),i}function ri(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function ii(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-en(o),i[o]=l}function He(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-en(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function si(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-en(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var je=0;function oi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var tc,wo,nc,rc,ic,cl=!1,ur=[],Ft=null,Gn=null,Qn=null,ai=new Map,kn=new Map,cr=[],Rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(i,o){switch(i){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ai.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(o.pointerId)}}function un(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Al(o),o!==null&&wo(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Dd(i,o,l,h,p){switch(o){case"focusin":return Ft=un(Ft,i,o,l,h,p),!0;case"dragenter":return Gn=un(Gn,i,o,l,h,p),!0;case"mouseover":return Qn=un(Qn,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return ai.set(y,un(ai.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,kn.set(y,un(kn.get(y)||null,i,o,l,h,p)),!0}return!1}function oc(i){var o=ys(i.target);if(o!==null){var l=Kn(o);if(l!==null){if(o=l.tag,o===13){if(o=ls(l),o!==null){i.blockedOn=o,ic(i.priority,function(){nc(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Eo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);is=h,l.target.dispatchEvent(h),is=null}else return o=Al(l),o!==null&&wo(o),i.blockedOn=l,!1;o.shift()}return!0}function fs(i,o,l){kr(i)&&l.delete(o)}function ac(){cl=!1,Ft!==null&&kr(Ft)&&(Ft=null),Gn!==null&&kr(Gn)&&(Gn=null),Qn!==null&&kr(Qn)&&(Qn=null),ai.forEach(fs),kn.forEach(fs)}function Hn(i,o){i.blockedOn===o&&(i.blockedOn=null,cl||(cl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ac)))}function Xn(i){function o(p){return Hn(p,i)}if(0<ur.length){Hn(ur[0],i);for(var l=1;l<ur.length;l++){var h=ur[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Ft!==null&&Hn(Ft,i),Gn!==null&&Hn(Gn,i),Qn!==null&&Hn(Qn,i),ai.forEach(o),kn.forEach(o),l=0;l<cr.length;l++)h=cr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<cr.length&&(l=cr[0],l.blockedOn===null);)oc(l),l.blockedOn===null&&cr.shift()}var Vr=X.ReactCurrentBatchConfig,li=!0;function it(i,o,l,h){var p=je,y=Vr.transition;Vr.transition=null;try{je=1,hl(i,o,l,h)}finally{je=p,Vr.transition=y}}function Nd(i,o,l,h){var p=je,y=Vr.transition;Vr.transition=null;try{je=4,hl(i,o,l,h)}finally{je=p,Vr.transition=y}}function hl(i,o,l,h){if(li){var p=Eo(i,o,l,h);if(p===null)zd(i,o,h,ps,l),sc(i,h);else if(Dd(p,i,o,l,h))h.stopPropagation();else if(sc(i,h),o&4&&-1<Rd.indexOf(i)){for(;p!==null;){var y=Al(p);if(y!==null&&tc(y),y=Eo(i,o,l,h),y===null&&zd(i,o,h,ps,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else zd(i,o,h,null,l)}}var ps=null;function Eo(i,o,l,h){if(ps=null,i=uo(h),i=ys(i),i!==null)if(o=Kn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=ls(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ps=i,null}function dl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xu()){case us:return 1;case ti:return 4;case Nn:case ll:return 16;case Yu:return 536870912;default:return 16}default:return 16}}var Tn=null,To=null,cn=null;function fl(){if(cn)return cn;var i,o=To,l=o.length,h,p="value"in Tn?Tn.value:Tn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var I=l-i;for(h=1;h<=I&&o[l-h]===p[y-h];h++);return cn=p.slice(i,1<h?1-h:void 0)}function Io(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function hr(){return!0}function pl(){return!1}function Mt(i){function o(l,h,p,y,I){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=I,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?hr:pl,this.isPropagationStopped=pl,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),o}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=Mt(Yn),dr=ce({},Yn,{view:0,detail:0}),kd=Mt(dr),Ao,br,ui,ms=ce({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ui&&(ui&&i.type==="mousemove"?(Ao=i.screenX-ui.screenX,br=i.screenY-ui.screenY):br=Ao=0,ui=i),Ao)},movementY:function(i){return"movementY"in i?i.movementY:br}}),xo=Mt(ms),ml=ce({},ms,{dataTransfer:0}),lc=Mt(ml),Po=ce({},dr,{relatedTarget:0}),Co=Mt(Po),uc=ce({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),jr=Mt(uc),cc=ce({},Yn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hc=Mt(cc),dc=ce({},Yn,{data:0}),gl=Mt(dc),Ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=fc[i])?!!o[i]:!1}function fr(){return pc}var c=ce({},dr,{key:function(i){if(i.key){var o=Ro[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(i){return i.type==="keypress"?Io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Mt(c),v=ce({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Mt(v),U=ce({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr}),W=Mt(U),oe=ce({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Mt(oe),Pt=ce({},ms,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Mt(Pt),kt=[9,13,27,32],wt=d&&"CompositionEvent"in window,Vn=null;d&&"documentMode"in document&&(Vn=document.documentMode);var In=d&&"TextEvent"in window&&!Vn,gs=d&&(!wt||Vn&&8<Vn&&11>=Vn),Do=" ",Sg=!1;function Ag(i,o){switch(i){case"keyup":return kt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var No=!1;function yI(i,o){switch(i){case"compositionend":return xg(o);case"keypress":return o.which!==32?null:(Sg=!0,Do);case"textInput":return i=o.data,i===Do&&Sg?null:i;default:return null}}function _I(i,o){if(No)return i==="compositionend"||!wt&&Ag(i,o)?(i=fl(),cn=To=Tn=null,No=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gs&&o.locale!=="ko"?null:o.data;default:return null}}var vI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!vI[i.type]:o==="textarea"}function Cg(i,o,l,h){lr(h),o=vc(o,"onChange"),0<o.length&&(l=new So("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var yl=null,_l=null;function wI(i){Wg(i,0)}function mc(i){var o=Oo(i);if(io(o))return i}function EI(i,o){if(i==="change")return o}var Rg=!1;if(d){var Vd;if(d){var bd="oninput"in document;if(!bd){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),bd=typeof Dg.oninput=="function"}Vd=bd}else Vd=!1;Rg=Vd&&(!document.documentMode||9<document.documentMode)}function Ng(){yl&&(yl.detachEvent("onpropertychange",kg),_l=yl=null)}function kg(i){if(i.propertyName==="value"&&mc(_l)){var o=[];Cg(o,_l,i,uo(i)),il(wI,o)}}function TI(i,o,l){i==="focusin"?(Ng(),yl=o,_l=l,yl.attachEvent("onpropertychange",kg)):i==="focusout"&&Ng()}function II(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mc(_l)}function SI(i,o){if(i==="click")return mc(o)}function AI(i,o){if(i==="input"||i==="change")return mc(o)}function xI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Jn=typeof Object.is=="function"?Object.is:xI;function vl(i,o){if(Jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!Jn(i[p],o[p]))return!1}return!0}function Vg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bg(i,o){var l=Vg(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vg(l)}}function jg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?jg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Og(){for(var i=window,o=Zr();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Zr(i.document)}return o}function jd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function PI(i){var o=Og(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&jg(l.ownerDocument.documentElement,l)){if(h!==null&&jd(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=bg(l,y);var I=bg(l,h);p&&I&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var CI=d&&"documentMode"in document&&11>=document.documentMode,ko=null,Od=null,wl=null,Ld=!1;function Lg(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ld||ko==null||ko!==Zr(h)||(h=ko,"selectionStart"in h&&jd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),wl&&vl(wl,h)||(wl=h,h=vc(Od,"onSelect"),0<h.length&&(o=new So("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=ko)))}function gc(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Vo={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Fd={},Fg={};d&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function yc(i){if(Fd[i])return Fd[i];if(!Vo[i])return i;var o=Vo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Fg)return Fd[i]=o[l];return i}var Mg=yc("animationend"),Bg=yc("animationiteration"),Ug=yc("animationstart"),zg=yc("transitionend"),$g=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(i,o){$g.set(i,o),a(o,[i])}for(var Md=0;Md<qg.length;Md++){var Bd=qg[Md],RI=Bd.toLowerCase(),DI=Bd[0].toUpperCase()+Bd.slice(1);ci(RI,"on"+DI)}ci(Mg,"onAnimationEnd"),ci(Bg,"onAnimationIteration"),ci(Ug,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(zg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function Kg(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,Gu(h,o,void 0,i),i.currentTarget=null}function Wg(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var I=h.length-1;0<=I;I--){var x=h[I],D=x.instance,q=x.currentTarget;if(x=x.listener,D!==y&&p.isPropagationStopped())break e;Kg(p,x,q),y=D}else for(I=0;I<h.length;I++){if(x=h[I],D=x.instance,q=x.currentTarget,x=x.listener,D!==y&&p.isPropagationStopped())break e;Kg(p,x,q),y=D}}}if(qn)throw i=sl,qn=!1,sl=null,i}function tt(i,o){var l=o[Qd];l===void 0&&(l=o[Qd]=new Set);var h=i+"__bubble";l.has(h)||(Gg(o,i,2,!1),l.add(h))}function Ud(i,o,l){var h=0;o&&(h|=4),Gg(l,i,h,o)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Tl(i){if(!i[_c]){i[_c]=!0,n.forEach(function(l){l!=="selectionchange"&&(NI.has(l)||Ud(l,!1,i),Ud(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[_c]||(o[_c]=!0,Ud("selectionchange",!1,o))}}function Gg(i,o,l,h){switch(dl(o)){case 1:var p=it;break;case 4:p=Nd;break;default:p=hl}l=p.bind(null,o,l,i),p=void 0,!fo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function zd(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var x=h.stateNode.containerInfo;if(x===p||x.nodeType===8&&x.parentNode===p)break;if(I===4)for(I=h.return;I!==null;){var D=I.tag;if((D===3||D===4)&&(D=I.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;I=I.return}for(;x!==null;){if(I=ys(x),I===null)return;if(D=I.tag,D===5||D===6){h=y=I;continue e}x=x.parentNode}}h=h.return}il(function(){var q=y,ne=uo(l),re=[];e:{var te=$g.get(i);if(te!==void 0){var de=So,ge=i;switch(i){case"keypress":if(Io(l)===0)break e;case"keydown":case"keyup":de=g;break;case"focusin":ge="focus",de=Co;break;case"focusout":ge="blur",de=Co;break;case"beforeblur":case"afterblur":de=Co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=W;break;case Mg:case Bg:case Ug:de=jr;break;case zg:de=We;break;case"scroll":de=kd;break;case"wheel":de=Fe;break;case"copy":case"cut":case"paste":de=hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=S}var we=(o&4)!==0,gt=!we&&i==="scroll",z=we?te!==null?te+"Capture":null:te;we=[];for(var b=q,$;b!==null;){$=b;var se=$.stateNode;if($.tag===5&&se!==null&&($=se,z!==null&&(se=mt(b,z),se!=null&&we.push(Il(b,se,$)))),gt)break;b=b.return}0<we.length&&(te=new de(te,ge,null,l,ne),re.push({event:te,listeners:we}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&l!==is&&(ge=l.relatedTarget||l.fromElement)&&(ys(ge)||ge[Or]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=l.relatedTarget||l.toElement,de=q,ge=ge?ys(ge):null,ge!==null&&(gt=Kn(ge),ge!==gt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=q),de!==ge)){if(we=xo,se="onMouseLeave",z="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(we=S,se="onPointerLeave",z="onPointerEnter",b="pointer"),gt=de==null?te:Oo(de),$=ge==null?te:Oo(ge),te=new we(se,b+"leave",de,l,ne),te.target=gt,te.relatedTarget=$,se=null,ys(ne)===q&&(we=new we(z,b+"enter",ge,l,ne),we.target=$,we.relatedTarget=gt,se=we),gt=se,de&&ge)t:{for(we=de,z=ge,b=0,$=we;$;$=bo($))b++;for($=0,se=z;se;se=bo(se))$++;for(;0<b-$;)we=bo(we),b--;for(;0<$-b;)z=bo(z),$--;for(;b--;){if(we===z||z!==null&&we===z.alternate)break t;we=bo(we),z=bo(z)}we=null}else we=null;de!==null&&Qg(re,te,de,we,!1),ge!==null&&gt!==null&&Qg(re,gt,ge,we,!0)}}e:{if(te=q?Oo(q):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var Te=EI;else if(Pg(te))if(Rg)Te=AI;else{Te=II;var Ae=TI}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Te=SI);if(Te&&(Te=Te(i,q))){Cg(re,Te,l,ne);break e}Ae&&Ae(i,te,q),i==="focusout"&&(Ae=te._wrapperState)&&Ae.controlled&&te.type==="number"&&oo(te,"number",te.value)}switch(Ae=q?Oo(q):window,i){case"focusin":(Pg(Ae)||Ae.contentEditable==="true")&&(ko=Ae,Od=q,wl=null);break;case"focusout":wl=Od=ko=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,Lg(re,l,ne);break;case"selectionchange":if(CI)break;case"keydown":case"keyup":Lg(re,l,ne)}var xe;if(wt)e:{switch(i){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else No?Ag(i,l)&&(Ce="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(gs&&l.locale!=="ko"&&(No||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&No&&(xe=fl()):(Tn=ne,To="value"in Tn?Tn.value:Tn.textContent,No=!0)),Ae=vc(q,Ce),0<Ae.length&&(Ce=new gl(Ce,i,null,l,ne),re.push({event:Ce,listeners:Ae}),xe?Ce.data=xe:(xe=xg(l),xe!==null&&(Ce.data=xe)))),(xe=In?yI(i,l):_I(i,l))&&(q=vc(q,"onBeforeInput"),0<q.length&&(ne=new gl("onBeforeInput","beforeinput",null,l,ne),re.push({event:ne,listeners:q}),ne.data=xe))}Wg(re,o)})}function Il(i,o,l){return{instance:i,listener:o,currentTarget:l}}function vc(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=mt(i,l),y!=null&&h.unshift(Il(i,y,p)),y=mt(i,o),y!=null&&h.push(Il(i,y,p))),i=i.return}return h}function bo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Qg(i,o,l,h,p){for(var y=o._reactName,I=[];l!==null&&l!==h;){var x=l,D=x.alternate,q=x.stateNode;if(D!==null&&D===h)break;x.tag===5&&q!==null&&(x=q,p?(D=mt(l,y),D!=null&&I.unshift(Il(l,D,x))):p||(D=mt(l,y),D!=null&&I.push(Il(l,D,x)))),l=l.return}I.length!==0&&i.push({event:o,listeners:I})}var kI=/\r\n?/g,VI=/\u0000|\uFFFD/g;function Hg(i){return(typeof i=="string"?i:""+i).replace(kI,`
`).replace(VI,"")}function wc(i,o,l){if(o=Hg(o),Hg(i)!==o&&l)throw Error(t(425))}function Ec(){}var $d=null,qd=null;function Kd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Wd=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(i){return Xg.resolve(null).then(i).catch(OI)}:Wd;function OI(i){setTimeout(function(){throw i})}function Gd(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Xn(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Xn(o)}function hi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Yg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var jo=Math.random().toString(36).slice(2),pr="__reactFiber$"+jo,Sl="__reactProps$"+jo,Or="__reactContainer$"+jo,Qd="__reactEvents$"+jo,LI="__reactListeners$"+jo,FI="__reactHandles$"+jo;function ys(i){var o=i[pr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[Or]||l[pr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Yg(i);i!==null;){if(l=i[pr])return l;i=Yg(i)}return o}i=l,l=i.parentNode}return null}function Al(i){return i=i[pr]||i[Or],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Oo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Tc(i){return i[Sl]||null}var Hd=[],Lo=-1;function di(i){return{current:i}}function nt(i){0>Lo||(i.current=Hd[Lo],Hd[Lo]=null,Lo--)}function Je(i,o){Lo++,Hd[Lo]=i.current,i.current=o}var fi={},Kt=di(fi),hn=di(!1),_s=fi;function Fo(i,o){var l=i.type.contextTypes;if(!l)return fi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function dn(i){return i=i.childContextTypes,i!=null}function Ic(){nt(hn),nt(Kt)}function Jg(i,o,l){if(Kt.current!==fi)throw Error(t(168));Je(Kt,o),Je(hn,l)}function Zg(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,$e(i)||"Unknown",p));return ce({},l,h)}function Sc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||fi,_s=Kt.current,Je(Kt,i),Je(hn,hn.current),!0}function ey(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=Zg(i,o,_s),h.__reactInternalMemoizedMergedChildContext=i,nt(hn),nt(Kt),Je(Kt,i)):nt(hn),Je(hn,l)}var Lr=null,Ac=!1,Xd=!1;function ty(i){Lr===null?Lr=[i]:Lr.push(i)}function MI(i){Ac=!0,ty(i)}function pi(){if(!Xd&&Lr!==null){Xd=!0;var i=0,o=je;try{var l=Lr;for(je=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Lr=null,Ac=!1}catch(p){throw Lr!==null&&(Lr=Lr.slice(i+1)),yo(us,pi),p}finally{je=o,Xd=!1}}return null}var Mo=[],Bo=0,xc=null,Pc=0,bn=[],jn=0,vs=null,Fr=1,Mr="";function ws(i,o){Mo[Bo++]=Pc,Mo[Bo++]=xc,xc=i,Pc=o}function ny(i,o,l){bn[jn++]=Fr,bn[jn++]=Mr,bn[jn++]=vs,vs=i;var h=Fr;i=Mr;var p=32-en(h)-1;h&=~(1<<p),l+=1;var y=32-en(o)+p;if(30<y){var I=p-p%5;y=(h&(1<<I)-1).toString(32),h>>=I,p-=I,Fr=1<<32-en(o)+p|l<<p|h,Mr=y+i}else Fr=1<<y|l<<p|h,Mr=i}function Yd(i){i.return!==null&&(ws(i,1),ny(i,1,0))}function Jd(i){for(;i===xc;)xc=Mo[--Bo],Mo[Bo]=null,Pc=Mo[--Bo],Mo[Bo]=null;for(;i===vs;)vs=bn[--jn],bn[jn]=null,Mr=bn[--jn],bn[jn]=null,Fr=bn[--jn],bn[jn]=null}var Sn=null,An=null,st=!1,Zn=null;function ry(i,o){var l=Mn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function iy(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Sn=i,An=hi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Sn=i,An=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=vs!==null?{id:Fr,overflow:Mr}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Mn(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Sn=i,An=null,!0):!1;default:return!1}}function Zd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ef(i){if(st){var o=An;if(o){var l=o;if(!iy(i,o)){if(Zd(i))throw Error(t(418));o=hi(l.nextSibling);var h=Sn;o&&iy(i,o)?ry(h,l):(i.flags=i.flags&-4097|2,st=!1,Sn=i)}}else{if(Zd(i))throw Error(t(418));i.flags=i.flags&-4097|2,st=!1,Sn=i}}}function sy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Sn=i}function Cc(i){if(i!==Sn)return!1;if(!st)return sy(i),st=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Kd(i.type,i.memoizedProps)),o&&(o=An)){if(Zd(i))throw oy(),Error(t(418));for(;o;)ry(i,o),o=hi(o.nextSibling)}if(sy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){An=hi(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}An=null}}else An=Sn?hi(i.stateNode.nextSibling):null;return!0}function oy(){for(var i=An;i;)i=hi(i.nextSibling)}function Uo(){An=Sn=null,st=!1}function tf(i){Zn===null?Zn=[i]:Zn.push(i)}var BI=X.ReactCurrentBatchConfig;function xl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(I){var x=p.refs;I===null?delete x[y]:x[y]=I},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Rc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function ay(i){var o=i._init;return o(i._payload)}function ly(i){function o(z,b){if(i){var $=z.deletions;$===null?(z.deletions=[b],z.flags|=16):$.push(b)}}function l(z,b){if(!i)return null;for(;b!==null;)o(z,b),b=b.sibling;return null}function h(z,b){for(z=new Map;b!==null;)b.key!==null?z.set(b.key,b):z.set(b.index,b),b=b.sibling;return z}function p(z,b){return z=Ti(z,b),z.index=0,z.sibling=null,z}function y(z,b,$){return z.index=$,i?($=z.alternate,$!==null?($=$.index,$<b?(z.flags|=2,b):$):(z.flags|=2,b)):(z.flags|=1048576,b)}function I(z){return i&&z.alternate===null&&(z.flags|=2),z}function x(z,b,$,se){return b===null||b.tag!==6?(b=Gf($,z.mode,se),b.return=z,b):(b=p(b,$),b.return=z,b)}function D(z,b,$,se){var Te=$.type;return Te===k?ne(z,b,$.props.children,se,$.key):b!==null&&(b.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===fe&&ay(Te)===b.type)?(se=p(b,$.props),se.ref=xl(z,b,$),se.return=z,se):(se=Zc($.type,$.key,$.props,null,z.mode,se),se.ref=xl(z,b,$),se.return=z,se)}function q(z,b,$,se){return b===null||b.tag!==4||b.stateNode.containerInfo!==$.containerInfo||b.stateNode.implementation!==$.implementation?(b=Qf($,z.mode,se),b.return=z,b):(b=p(b,$.children||[]),b.return=z,b)}function ne(z,b,$,se,Te){return b===null||b.tag!==7?(b=Cs($,z.mode,se,Te),b.return=z,b):(b=p(b,$),b.return=z,b)}function re(z,b,$){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Gf(""+b,z.mode,$),b.return=z,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pe:return $=Zc(b.type,b.key,b.props,null,z.mode,$),$.ref=xl(z,null,b),$.return=z,$;case Ee:return b=Qf(b,z.mode,$),b.return=z,b;case fe:var se=b._init;return re(z,se(b._payload),$)}if(Pr(b)||_e(b))return b=Cs(b,z.mode,$,null),b.return=z,b;Rc(z,b)}return null}function te(z,b,$,se){var Te=b!==null?b.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Te!==null?null:x(z,b,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case pe:return $.key===Te?D(z,b,$,se):null;case Ee:return $.key===Te?q(z,b,$,se):null;case fe:return Te=$._init,te(z,b,Te($._payload),se)}if(Pr($)||_e($))return Te!==null?null:ne(z,b,$,se,null);Rc(z,$)}return null}function de(z,b,$,se,Te){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get($)||null,x(b,z,""+se,Te);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case pe:return z=z.get(se.key===null?$:se.key)||null,D(b,z,se,Te);case Ee:return z=z.get(se.key===null?$:se.key)||null,q(b,z,se,Te);case fe:var Ae=se._init;return de(z,b,$,Ae(se._payload),Te)}if(Pr(se)||_e(se))return z=z.get($)||null,ne(b,z,se,Te,null);Rc(b,se)}return null}function ge(z,b,$,se){for(var Te=null,Ae=null,xe=b,Ce=b=0,jt=null;xe!==null&&Ce<$.length;Ce++){xe.index>Ce?(jt=xe,xe=null):jt=xe.sibling;var Ue=te(z,xe,$[Ce],se);if(Ue===null){xe===null&&(xe=jt);break}i&&xe&&Ue.alternate===null&&o(z,xe),b=y(Ue,b,Ce),Ae===null?Te=Ue:Ae.sibling=Ue,Ae=Ue,xe=jt}if(Ce===$.length)return l(z,xe),st&&ws(z,Ce),Te;if(xe===null){for(;Ce<$.length;Ce++)xe=re(z,$[Ce],se),xe!==null&&(b=y(xe,b,Ce),Ae===null?Te=xe:Ae.sibling=xe,Ae=xe);return st&&ws(z,Ce),Te}for(xe=h(z,xe);Ce<$.length;Ce++)jt=de(xe,z,Ce,$[Ce],se),jt!==null&&(i&&jt.alternate!==null&&xe.delete(jt.key===null?Ce:jt.key),b=y(jt,b,Ce),Ae===null?Te=jt:Ae.sibling=jt,Ae=jt);return i&&xe.forEach(function(Ii){return o(z,Ii)}),st&&ws(z,Ce),Te}function we(z,b,$,se){var Te=_e($);if(typeof Te!="function")throw Error(t(150));if($=Te.call($),$==null)throw Error(t(151));for(var Ae=Te=null,xe=b,Ce=b=0,jt=null,Ue=$.next();xe!==null&&!Ue.done;Ce++,Ue=$.next()){xe.index>Ce?(jt=xe,xe=null):jt=xe.sibling;var Ii=te(z,xe,Ue.value,se);if(Ii===null){xe===null&&(xe=jt);break}i&&xe&&Ii.alternate===null&&o(z,xe),b=y(Ii,b,Ce),Ae===null?Te=Ii:Ae.sibling=Ii,Ae=Ii,xe=jt}if(Ue.done)return l(z,xe),st&&ws(z,Ce),Te;if(xe===null){for(;!Ue.done;Ce++,Ue=$.next())Ue=re(z,Ue.value,se),Ue!==null&&(b=y(Ue,b,Ce),Ae===null?Te=Ue:Ae.sibling=Ue,Ae=Ue);return st&&ws(z,Ce),Te}for(xe=h(z,xe);!Ue.done;Ce++,Ue=$.next())Ue=de(xe,z,Ce,Ue.value,se),Ue!==null&&(i&&Ue.alternate!==null&&xe.delete(Ue.key===null?Ce:Ue.key),b=y(Ue,b,Ce),Ae===null?Te=Ue:Ae.sibling=Ue,Ae=Ue);return i&&xe.forEach(function(vS){return o(z,vS)}),st&&ws(z,Ce),Te}function gt(z,b,$,se){if(typeof $=="object"&&$!==null&&$.type===k&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case pe:e:{for(var Te=$.key,Ae=b;Ae!==null;){if(Ae.key===Te){if(Te=$.type,Te===k){if(Ae.tag===7){l(z,Ae.sibling),b=p(Ae,$.props.children),b.return=z,z=b;break e}}else if(Ae.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===fe&&ay(Te)===Ae.type){l(z,Ae.sibling),b=p(Ae,$.props),b.ref=xl(z,Ae,$),b.return=z,z=b;break e}l(z,Ae);break}else o(z,Ae);Ae=Ae.sibling}$.type===k?(b=Cs($.props.children,z.mode,se,$.key),b.return=z,z=b):(se=Zc($.type,$.key,$.props,null,z.mode,se),se.ref=xl(z,b,$),se.return=z,z=se)}return I(z);case Ee:e:{for(Ae=$.key;b!==null;){if(b.key===Ae)if(b.tag===4&&b.stateNode.containerInfo===$.containerInfo&&b.stateNode.implementation===$.implementation){l(z,b.sibling),b=p(b,$.children||[]),b.return=z,z=b;break e}else{l(z,b);break}else o(z,b);b=b.sibling}b=Qf($,z.mode,se),b.return=z,z=b}return I(z);case fe:return Ae=$._init,gt(z,b,Ae($._payload),se)}if(Pr($))return ge(z,b,$,se);if(_e($))return we(z,b,$,se);Rc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,b!==null&&b.tag===6?(l(z,b.sibling),b=p(b,$),b.return=z,z=b):(l(z,b),b=Gf($,z.mode,se),b.return=z,z=b),I(z)):l(z,b)}return gt}var zo=ly(!0),uy=ly(!1),Dc=di(null),Nc=null,$o=null,nf=null;function rf(){nf=$o=Nc=null}function sf(i){var o=Dc.current;nt(Dc),i._currentValue=o}function of(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function qo(i,o){Nc=i,nf=$o=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(fn=!0),i.firstContext=null)}function On(i){var o=i._currentValue;if(nf!==i)if(i={context:i,memoizedValue:o,next:null},$o===null){if(Nc===null)throw Error(t(308));$o=i,Nc.dependencies={lanes:0,firstContext:i}}else $o=$o.next=i;return o}var Es=null;function af(i){Es===null?Es=[i]:Es.push(i)}function cy(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,af(o)):(l.next=p.next,p.next=l),o.interleaved=l,Br(i,h)}function Br(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var mi=!1;function lf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ur(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function gi(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Be&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,Br(i,l)}return p=h.interleaved,p===null?(o.next=o,af(h)):(o.next=p.next,p.next=o),h.interleaved=o,Br(i,l)}function kc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,si(i,l)}}function dy(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=I:y=y.next=I,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Vc(i,o,l,h){var p=i.updateQueue;mi=!1;var y=p.firstBaseUpdate,I=p.lastBaseUpdate,x=p.shared.pending;if(x!==null){p.shared.pending=null;var D=x,q=D.next;D.next=null,I===null?y=q:I.next=q,I=D;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,x=ne.lastBaseUpdate,x!==I&&(x===null?ne.firstBaseUpdate=q:x.next=q,ne.lastBaseUpdate=D))}if(y!==null){var re=p.baseState;I=0,ne=q=D=null,x=y;do{var te=x.lane,de=x.eventTime;if((h&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ge=i,we=x;switch(te=o,de=l,we.tag){case 1:if(ge=we.payload,typeof ge=="function"){re=ge.call(de,re,te);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,te=typeof ge=="function"?ge.call(de,re,te):ge,te==null)break e;re=ce({},re,te);break e;case 2:mi=!0}}x.callback!==null&&x.lane!==0&&(i.flags|=64,te=p.effects,te===null?p.effects=[x]:te.push(x))}else de={eventTime:de,lane:te,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ne===null?(q=ne=de,D=re):ne=ne.next=de,I|=te;if(x=x.next,x===null){if(x=p.shared.pending,x===null)break;te=x,x=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);if(ne===null&&(D=re),p.baseState=D,p.firstBaseUpdate=q,p.lastBaseUpdate=ne,o=p.shared.interleaved,o!==null){p=o;do I|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Ss|=I,i.lanes=I,i.memoizedState=re}}function fy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Pl={},mr=di(Pl),Cl=di(Pl),Rl=di(Pl);function Ts(i){if(i===Pl)throw Error(t(174));return i}function uf(i,o){switch(Je(Rl,o),Je(Cl,i),Je(mr,Pl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:xt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=xt(o,i)}nt(mr),Je(mr,o)}function Ko(){nt(mr),nt(Cl),nt(Rl)}function py(i){Ts(Rl.current);var o=Ts(mr.current),l=xt(o,i.type);o!==l&&(Je(Cl,i),Je(mr,l))}function cf(i){Cl.current===i&&(nt(mr),nt(Cl))}var ct=di(0);function bc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var hf=[];function df(){for(var i=0;i<hf.length;i++)hf[i]._workInProgressVersionPrimary=null;hf.length=0}var jc=X.ReactCurrentDispatcher,ff=X.ReactCurrentBatchConfig,Is=0,ht=null,Ct=null,Vt=null,Oc=!1,Dl=!1,Nl=0,UI=0;function Wt(){throw Error(t(321))}function pf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Jn(i[l],o[l]))return!1;return!0}function mf(i,o,l,h,p,y){if(Is=y,ht=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,jc.current=i===null||i.memoizedState===null?KI:WI,i=l(h,p),Dl){y=0;do{if(Dl=!1,Nl=0,25<=y)throw Error(t(301));y+=1,Vt=Ct=null,o.updateQueue=null,jc.current=GI,i=l(h,p)}while(Dl)}if(jc.current=Mc,o=Ct!==null&&Ct.next!==null,Is=0,Vt=Ct=ht=null,Oc=!1,o)throw Error(t(300));return i}function gf(){var i=Nl!==0;return Nl=0,i}function gr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function Ln(){if(Ct===null){var i=ht.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var o=Vt===null?ht.memoizedState:Vt.next;if(o!==null)Vt=o,Ct=i;else{if(i===null)throw Error(t(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Vt===null?ht.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function kl(i,o){return typeof o=="function"?o(i):o}function yf(i){var o=Ln(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Ct,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var I=p.next;p.next=y.next,y.next=I}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var x=I=null,D=null,q=y;do{var ne=q.lane;if((Is&ne)===ne)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:i(h,q.action);else{var re={lane:ne,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(x=D=re,I=h):D=D.next=re,ht.lanes|=ne,Ss|=ne}q=q.next}while(q!==null&&q!==y);D===null?I=h:D.next=x,Jn(h,o.memoizedState)||(fn=!0),o.memoizedState=h,o.baseState=I,o.baseQueue=D,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,ht.lanes|=y,Ss|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function _f(i){var o=Ln(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var I=p=p.next;do y=i(y,I.action),I=I.next;while(I!==p);Jn(y,o.memoizedState)||(fn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function my(){}function gy(i,o){var l=ht,h=Ln(),p=o(),y=!Jn(h.memoizedState,p);if(y&&(h.memoizedState=p,fn=!0),h=h.queue,vf(vy.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,Vl(9,_y.bind(null,l,h,p,o),void 0,null),bt===null)throw Error(t(349));(Is&30)!==0||yy(l,o,p)}return p}function yy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=ht.updateQueue,o===null?(o={lastEffect:null,stores:null},ht.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function _y(i,o,l,h){o.value=l,o.getSnapshot=h,wy(o)&&Ey(i)}function vy(i,o,l){return l(function(){wy(o)&&Ey(i)})}function wy(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Jn(i,l)}catch{return!0}}function Ey(i){var o=Br(i,1);o!==null&&rr(o,i,1,-1)}function Ty(i){var o=gr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:i},o.queue=i,i=i.dispatch=qI.bind(null,ht,i),[o.memoizedState,i]}function Vl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=ht.updateQueue,o===null?(o={lastEffect:null,stores:null},ht.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Iy(){return Ln().memoizedState}function Lc(i,o,l,h){var p=gr();ht.flags|=i,p.memoizedState=Vl(1|o,l,void 0,h===void 0?null:h)}function Fc(i,o,l,h){var p=Ln();h=h===void 0?null:h;var y=void 0;if(Ct!==null){var I=Ct.memoizedState;if(y=I.destroy,h!==null&&pf(h,I.deps)){p.memoizedState=Vl(o,l,y,h);return}}ht.flags|=i,p.memoizedState=Vl(1|o,l,y,h)}function Sy(i,o){return Lc(8390656,8,i,o)}function vf(i,o){return Fc(2048,8,i,o)}function Ay(i,o){return Fc(4,2,i,o)}function xy(i,o){return Fc(4,4,i,o)}function Py(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Cy(i,o,l){return l=l!=null?l.concat([i]):null,Fc(4,4,Py.bind(null,o,i),l)}function wf(){}function Ry(i,o){var l=Ln();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&pf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Dy(i,o){var l=Ln();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&pf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Ny(i,o,l){return(Is&21)===0?(i.baseState&&(i.baseState=!1,fn=!0),i.memoizedState=l):(Jn(l,o)||(l=ds(),ht.lanes|=l,Ss|=l,i.baseState=!0),o)}function zI(i,o){var l=je;je=l!==0&&4>l?l:4,i(!0);var h=ff.transition;ff.transition={};try{i(!1),o()}finally{je=l,ff.transition=h}}function ky(){return Ln().memoizedState}function $I(i,o,l){var h=wi(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Vy(i))by(o,l);else if(l=cy(i,o,l,h),l!==null){var p=rn();rr(l,i,h,p),jy(l,o,h)}}function qI(i,o,l){var h=wi(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vy(i))by(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var I=o.lastRenderedState,x=y(I,l);if(p.hasEagerState=!0,p.eagerState=x,Jn(x,I)){var D=o.interleaved;D===null?(p.next=p,af(o)):(p.next=D.next,D.next=p),o.interleaved=p;return}}catch{}finally{}l=cy(i,o,p,h),l!==null&&(p=rn(),rr(l,i,h,p),jy(l,o,h))}}function Vy(i){var o=i.alternate;return i===ht||o!==null&&o===ht}function by(i,o){Dl=Oc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function jy(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,si(i,l)}}var Mc={readContext:On,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},KI={readContext:On,useCallback:function(i,o){return gr().memoizedState=[i,o===void 0?null:o],i},useContext:On,useEffect:Sy,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Lc(4194308,4,Py.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Lc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Lc(4,2,i,o)},useMemo:function(i,o){var l=gr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=gr();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=$I.bind(null,ht,i),[h.memoizedState,i]},useRef:function(i){var o=gr();return i={current:i},o.memoizedState=i},useState:Ty,useDebugValue:wf,useDeferredValue:function(i){return gr().memoizedState=i},useTransition:function(){var i=Ty(!1),o=i[0];return i=zI.bind(null,i[1]),gr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=ht,p=gr();if(st){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),bt===null)throw Error(t(349));(Is&30)!==0||yy(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Sy(vy.bind(null,h,y,i),[i]),h.flags|=2048,Vl(9,_y.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=gr(),o=bt.identifierPrefix;if(st){var l=Mr,h=Fr;l=(h&~(1<<32-en(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Nl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=UI++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},WI={readContext:On,useCallback:Ry,useContext:On,useEffect:vf,useImperativeHandle:Cy,useInsertionEffect:Ay,useLayoutEffect:xy,useMemo:Dy,useReducer:yf,useRef:Iy,useState:function(){return yf(kl)},useDebugValue:wf,useDeferredValue:function(i){var o=Ln();return Ny(o,Ct.memoizedState,i)},useTransition:function(){var i=yf(kl)[0],o=Ln().memoizedState;return[i,o]},useMutableSource:my,useSyncExternalStore:gy,useId:ky,unstable_isNewReconciler:!1},GI={readContext:On,useCallback:Ry,useContext:On,useEffect:vf,useImperativeHandle:Cy,useInsertionEffect:Ay,useLayoutEffect:xy,useMemo:Dy,useReducer:_f,useRef:Iy,useState:function(){return _f(kl)},useDebugValue:wf,useDeferredValue:function(i){var o=Ln();return Ct===null?o.memoizedState=i:Ny(o,Ct.memoizedState,i)},useTransition:function(){var i=_f(kl)[0],o=Ln().memoizedState;return[i,o]},useMutableSource:my,useSyncExternalStore:gy,useId:ky,unstable_isNewReconciler:!1};function er(i,o){if(i&&i.defaultProps){o=ce({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function Ef(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:ce({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Bc={isMounted:function(i){return(i=i._reactInternals)?Kn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=rn(),p=wi(i),y=Ur(h,p);y.payload=o,l!=null&&(y.callback=l),o=gi(i,y,p),o!==null&&(rr(o,i,p,h),kc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=rn(),p=wi(i),y=Ur(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=gi(i,y,p),o!==null&&(rr(o,i,p,h),kc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=rn(),h=wi(i),p=Ur(l,h);p.tag=2,o!=null&&(p.callback=o),o=gi(i,p,h),o!==null&&(rr(o,i,h,l),kc(o,i,h))}};function Oy(i,o,l,h,p,y,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,I):o.prototype&&o.prototype.isPureReactComponent?!vl(l,h)||!vl(p,y):!0}function Ly(i,o,l){var h=!1,p=fi,y=o.contextType;return typeof y=="object"&&y!==null?y=On(y):(p=dn(o)?_s:Kt.current,h=o.contextTypes,y=(h=h!=null)?Fo(i,p):fi),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Bc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Fy(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Bc.enqueueReplaceState(o,o.state,null)}function Tf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},lf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=On(y):(y=dn(o)?_s:Kt.current,p.context=Fo(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Ef(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Bc.enqueueReplaceState(p,p.state,null),Vc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Wo(i,o){try{var l="",h=o;do l+=Ne(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function If(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Sf(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var QI=typeof WeakMap=="function"?WeakMap:Map;function My(i,o,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Gc||(Gc=!0,Mf=h),Sf(i,o)},l}function By(i,o,l){l=Ur(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Sf(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Sf(i,o),typeof h!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),l}function Uy(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new QI;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=lS.bind(null,i,o,l),o.then(i,i))}function zy(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function $y(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Ur(-1,1),o.tag=2,gi(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var HI=X.ReactCurrentOwner,fn=!1;function nn(i,o,l,h){o.child=i===null?uy(o,null,l,h):zo(o,i.child,l,h)}function qy(i,o,l,h,p){l=l.render;var y=o.ref;return qo(o,p),h=mf(i,o,l,h,y,p),l=gf(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,zr(i,o,p)):(st&&l&&Yd(o),o.flags|=1,nn(i,o,h,p),o.child)}function Ky(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Wf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Wy(i,o,y,h,p)):(i=Zc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var I=y.memoizedProps;if(l=l.compare,l=l!==null?l:vl,l(I,h)&&i.ref===o.ref)return zr(i,o,p)}return o.flags|=1,i=Ti(y,h),i.ref=o.ref,i.return=o,o.child=i}function Wy(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(vl(y,h)&&i.ref===o.ref)if(fn=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(fn=!0);else return o.lanes=i.lanes,zr(i,o,p)}return Af(i,o,l,h,p)}function Gy(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Qo,xn),xn|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Je(Qo,xn),xn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Je(Qo,xn),xn|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,Je(Qo,xn),xn|=h;return nn(i,o,p,l),o.child}function Qy(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Af(i,o,l,h,p){var y=dn(l)?_s:Kt.current;return y=Fo(o,y),qo(o,p),l=mf(i,o,l,h,y,p),h=gf(),i!==null&&!fn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,zr(i,o,p)):(st&&h&&Yd(o),o.flags|=1,nn(i,o,l,p),o.child)}function Hy(i,o,l,h,p){if(dn(l)){var y=!0;Sc(o)}else y=!1;if(qo(o,p),o.stateNode===null)zc(i,o),Ly(o,l,h),Tf(o,l,h,p),h=!0;else if(i===null){var I=o.stateNode,x=o.memoizedProps;I.props=x;var D=I.context,q=l.contextType;typeof q=="object"&&q!==null?q=On(q):(q=dn(l)?_s:Kt.current,q=Fo(o,q));var ne=l.getDerivedStateFromProps,re=typeof ne=="function"||typeof I.getSnapshotBeforeUpdate=="function";re||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(x!==h||D!==q)&&Fy(o,I,h,q),mi=!1;var te=o.memoizedState;I.state=te,Vc(o,h,I,p),D=o.memoizedState,x!==h||te!==D||hn.current||mi?(typeof ne=="function"&&(Ef(o,l,ne,h),D=o.memoizedState),(x=mi||Oy(o,l,x,h,te,D,q))?(re||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=D),I.props=h,I.state=D,I.context=q,h=x):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{I=o.stateNode,hy(i,o),x=o.memoizedProps,q=o.type===o.elementType?x:er(o.type,x),I.props=q,re=o.pendingProps,te=I.context,D=l.contextType,typeof D=="object"&&D!==null?D=On(D):(D=dn(l)?_s:Kt.current,D=Fo(o,D));var de=l.getDerivedStateFromProps;(ne=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(x!==re||te!==D)&&Fy(o,I,h,D),mi=!1,te=o.memoizedState,I.state=te,Vc(o,h,I,p);var ge=o.memoizedState;x!==re||te!==ge||hn.current||mi?(typeof de=="function"&&(Ef(o,l,de,h),ge=o.memoizedState),(q=mi||Oy(o,l,q,h,te,ge,D)||!1)?(ne||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,ge,D),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,ge,D)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||x===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ge),I.props=h,I.state=ge,I.context=D,h=q):(typeof I.componentDidUpdate!="function"||x===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),h=!1)}return xf(i,o,l,h,y,p)}function xf(i,o,l,h,p,y){Qy(i,o);var I=(o.flags&128)!==0;if(!h&&!I)return p&&ey(o,l,!1),zr(i,o,y);h=o.stateNode,HI.current=o;var x=I&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&I?(o.child=zo(o,i.child,null,y),o.child=zo(o,null,x,y)):nn(i,o,x,y),o.memoizedState=h.state,p&&ey(o,l,!0),o.child}function Xy(i){var o=i.stateNode;o.pendingContext?Jg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Jg(i,o.context,!1),uf(i,o.containerInfo)}function Yy(i,o,l,h,p){return Uo(),tf(p),o.flags|=256,nn(i,o,l,h),o.child}var Pf={dehydrated:null,treeContext:null,retryLane:0};function Cf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Jy(i,o,l){var h=o.pendingProps,p=ct.current,y=!1,I=(o.flags&128)!==0,x;if((x=I)||(x=i!==null&&i.memoizedState===null?!1:(p&2)!==0),x?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),Je(ct,p&1),i===null)return ef(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=h.children,i=h.fallback,y?(h=o.mode,y=o.child,I={mode:"hidden",children:I},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=I):y=eh(I,h,0,null),i=Cs(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Cf(l),o.memoizedState=Pf,i):Rf(o,I));if(p=i.memoizedState,p!==null&&(x=p.dehydrated,x!==null))return XI(i,o,I,h,x,p,l);if(y){y=h.fallback,I=o.mode,p=i.child,x=p.sibling;var D={mode:"hidden",children:h.children};return(I&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=D,o.deletions=null):(h=Ti(p,D),h.subtreeFlags=p.subtreeFlags&14680064),x!==null?y=Ti(x,y):(y=Cs(y,I,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,I=i.child.memoizedState,I=I===null?Cf(l):{baseLanes:I.baseLanes|l,cachePool:null,transitions:I.transitions},y.memoizedState=I,y.childLanes=i.childLanes&~l,o.memoizedState=Pf,h}return y=i.child,i=y.sibling,h=Ti(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function Rf(i,o){return o=eh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Uc(i,o,l,h){return h!==null&&tf(h),zo(o,i.child,null,l),i=Rf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function XI(i,o,l,h,p,y,I){if(l)return o.flags&256?(o.flags&=-257,h=If(Error(t(422))),Uc(i,o,I,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=eh({mode:"visible",children:h.children},p,0,null),y=Cs(y,p,I,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&zo(o,i.child,null,I),o.child.memoizedState=Cf(I),o.memoizedState=Pf,y);if((o.mode&1)===0)return Uc(i,o,I,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var x=h.dgst;return h=x,y=Error(t(419)),h=If(y,h,void 0),Uc(i,o,I,h)}if(x=(I&i.childLanes)!==0,fn||x){if(h=bt,h!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|I))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Br(i,p),rr(h,i,p,-1))}return Kf(),h=If(Error(t(421))),Uc(i,o,I,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=uS.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,An=hi(p.nextSibling),Sn=o,st=!0,Zn=null,i!==null&&(bn[jn++]=Fr,bn[jn++]=Mr,bn[jn++]=vs,Fr=i.id,Mr=i.overflow,vs=o),o=Rf(o,h.children),o.flags|=4096,o)}function Zy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),of(i.return,o,l)}function Df(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function e_(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(nn(i,o,h.children,l),h=ct.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zy(i,l,o);else if(i.tag===19)Zy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Je(ct,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&bc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Df(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&bc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Df(o,!0,l,null,y);break;case"together":Df(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function zc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function zr(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Ss|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=Ti(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Ti(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function YI(i,o,l){switch(o.tag){case 3:Xy(o),Uo();break;case 5:py(o);break;case 1:dn(o.type)&&Sc(o);break;case 4:uf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;Je(Dc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(Je(ct,ct.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Jy(i,o,l):(Je(ct,ct.current&1),i=zr(i,o,l),i!==null?i.sibling:null);Je(ct,ct.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return e_(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Je(ct,ct.current),h)break;return null;case 22:case 23:return o.lanes=0,Gy(i,o,l)}return zr(i,o,l)}var t_,Nf,n_,r_;t_=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Nf=function(){},n_=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Ts(mr.current);var y=null;switch(l){case"input":p=ts(i,p),h=ts(i,h),y=[];break;case"select":p=ce({},p,{value:void 0}),h=ce({},h,{value:void 0}),y=[];break;case"textarea":p=Qa(i,p),h=Qa(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Ec)}el(l,h);var I;l=null;for(q in p)if(!h.hasOwnProperty(q)&&p.hasOwnProperty(q)&&p[q]!=null)if(q==="style"){var x=p[q];for(I in x)x.hasOwnProperty(I)&&(l||(l={}),l[I]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(s.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in h){var D=h[q];if(x=p?.[q],h.hasOwnProperty(q)&&D!==x&&(D!=null||x!=null))if(q==="style")if(x){for(I in x)!x.hasOwnProperty(I)||D&&D.hasOwnProperty(I)||(l||(l={}),l[I]="");for(I in D)D.hasOwnProperty(I)&&x[I]!==D[I]&&(l||(l={}),l[I]=D[I])}else l||(y||(y=[]),y.push(q,l)),l=D;else q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,x=x?x.__html:void 0,D!=null&&x!==D&&(y=y||[]).push(q,D)):q==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(q,""+D):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(s.hasOwnProperty(q)?(D!=null&&q==="onScroll"&&tt("scroll",i),y||x===D||(y=[])):(y=y||[]).push(q,D))}l&&(y=y||[]).push("style",l);var q=y;(o.updateQueue=q)&&(o.flags|=4)}},r_=function(i,o,l,h){l!==h&&(o.flags|=4)};function bl(i,o){if(!st)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Gt(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function JI(i,o,l){var h=o.pendingProps;switch(Jd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return dn(o.type)&&Ic(),Gt(o),null;case 3:return h=o.stateNode,Ko(),nt(hn),nt(Kt),df(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Cc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Zn!==null&&(zf(Zn),Zn=null))),Nf(i,o),Gt(o),null;case 5:cf(o);var p=Ts(Rl.current);if(l=o.type,i!==null&&o.stateNode!=null)n_(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return Gt(o),null}if(i=Ts(mr.current),Cc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[pr]=o,h[Sl]=y,i=(o.mode&1)!==0,l){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(p=0;p<El.length;p++)tt(El[p],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":so(h,y),tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},tt("invalid",h);break;case"textarea":ao(h,y),tt("invalid",h)}el(l,y),p=null;for(var I in y)if(y.hasOwnProperty(I)){var x=y[I];I==="children"?typeof x=="string"?h.textContent!==x&&(y.suppressHydrationWarning!==!0&&wc(h.textContent,x,i),p=["children",x]):typeof x=="number"&&h.textContent!==""+x&&(y.suppressHydrationWarning!==!0&&wc(h.textContent,x,i),p=["children",""+x]):s.hasOwnProperty(I)&&x!=null&&I==="onScroll"&&tt("scroll",h)}switch(l){case"input":xr(h),Wu(h,y,!0);break;case"textarea":xr(h),Ha(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Ec)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=At(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=I.createElement(l,{is:h.is}):(i=I.createElement(l),l==="select"&&(I=i,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):i=I.createElementNS(i,l),i[pr]=o,i[Sl]=h,t_(i,o,!1,!1),o.stateNode=i;e:{switch(I=tl(l,h),l){case"dialog":tt("cancel",i),tt("close",i),p=h;break;case"iframe":case"object":case"embed":tt("load",i),p=h;break;case"video":case"audio":for(p=0;p<El.length;p++)tt(El[p],i);p=h;break;case"source":tt("error",i),p=h;break;case"img":case"image":case"link":tt("error",i),tt("load",i),p=h;break;case"details":tt("toggle",i),p=h;break;case"input":so(i,h),p=ts(i,h),tt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=ce({},h,{value:void 0}),tt("invalid",i);break;case"textarea":ao(i,h),p=Qa(i,h),tt("invalid",i);break;default:p=h}el(l,p),x=p;for(y in x)if(x.hasOwnProperty(y)){var D=x[y];y==="style"?Ja(i,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Xa(i,D)):y==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&ei(i,D):typeof D=="number"&&ei(i,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?D!=null&&y==="onScroll"&&tt("scroll",i):D!=null&&G(i,y,D,I))}switch(l){case"input":xr(i),Wu(i,h,!1);break;case"textarea":xr(i),Ha(i);break;case"option":h.value!=null&&i.setAttribute("value",""+qe(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Cr(i,!!h.multiple,y,!1):h.defaultValue!=null&&Cr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=Ec)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gt(o),null;case 6:if(i&&o.stateNode!=null)r_(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=Ts(Rl.current),Ts(mr.current),Cc(o)){if(h=o.stateNode,l=o.memoizedProps,h[pr]=o,(y=h.nodeValue!==l)&&(i=Sn,i!==null))switch(i.tag){case 3:wc(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&wc(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[pr]=o,o.stateNode=h}return Gt(o),null;case 13:if(nt(ct),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(st&&An!==null&&(o.mode&1)!==0&&(o.flags&128)===0)oy(),Uo(),o.flags|=98560,y=!1;else if(y=Cc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[pr]=o}else Uo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),y=!1}else Zn!==null&&(zf(Zn),Zn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(ct.current&1)!==0?Rt===0&&(Rt=3):Kf())),o.updateQueue!==null&&(o.flags|=4),Gt(o),null);case 4:return Ko(),Nf(i,o),i===null&&Tl(o.stateNode.containerInfo),Gt(o),null;case 10:return sf(o.type._context),Gt(o),null;case 17:return dn(o.type)&&Ic(),Gt(o),null;case 19:if(nt(ct),y=o.memoizedState,y===null)return Gt(o),null;if(h=(o.flags&128)!==0,I=y.rendering,I===null)if(h)bl(y,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=bc(i),I!==null){for(o.flags|=128,bl(y,!1),h=I.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,i=I.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Je(ct,ct.current&1|2),o.child}i=i.sibling}y.tail!==null&&Ye()>Ho&&(o.flags|=128,h=!0,bl(y,!1),o.lanes=4194304)}else{if(!h)if(i=bc(I),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),bl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!I.alternate&&!st)return Gt(o),null}else 2*Ye()-y.renderingStartTime>Ho&&l!==1073741824&&(o.flags|=128,h=!0,bl(y,!1),o.lanes=4194304);y.isBackwards?(I.sibling=o.child,o.child=I):(l=y.last,l!==null?l.sibling=I:o.child=I,y.last=I)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Ye(),o.sibling=null,l=ct.current,Je(ct,h?l&1|2:l&1),o):(Gt(o),null);case 22:case 23:return qf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(xn&1073741824)!==0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function ZI(i,o){switch(Jd(o),o.tag){case 1:return dn(o.type)&&Ic(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ko(),nt(hn),nt(Kt),df(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return cf(o),null;case 13:if(nt(ct),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Uo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return nt(ct),null;case 4:return Ko(),null;case 10:return sf(o.type._context),null;case 22:case 23:return qf(),null;case 24:return null;default:return null}}var $c=!1,Qt=!1,eS=typeof WeakSet=="function"?WeakSet:Set,me=null;function Go(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){dt(i,o,h)}else l.current=null}function kf(i,o,l){try{l()}catch(h){dt(i,o,h)}}var i_=!1;function tS(i,o){if($d=li,i=Og(),jd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var I=0,x=-1,D=-1,q=0,ne=0,re=i,te=null;t:for(;;){for(var de;re!==l||p!==0&&re.nodeType!==3||(x=I+p),re!==y||h!==0&&re.nodeType!==3||(D=I+h),re.nodeType===3&&(I+=re.nodeValue.length),(de=re.firstChild)!==null;)te=re,re=de;for(;;){if(re===i)break t;if(te===l&&++q===p&&(x=I),te===y&&++ne===h&&(D=I),(de=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=de}l=x===-1||D===-1?null:{start:x,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(qd={focusedElem:i,selectionRange:l},li=!1,me=o;me!==null;)if(o=me,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,me=i;else for(;me!==null;){o=me;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var we=ge.memoizedProps,gt=ge.memoizedState,z=o.stateNode,b=z.getSnapshotBeforeUpdate(o.elementType===o.type?we:er(o.type,we),gt);z.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var $=o.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){dt(o,o.return,se)}if(i=o.sibling,i!==null){i.return=o.return,me=i;break}me=o.return}return ge=i_,i_=!1,ge}function jl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&kf(o,l,y)}p=p.next}while(p!==h)}}function qc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Vf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function s_(i){var o=i.alternate;o!==null&&(i.alternate=null,s_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[pr],delete o[Sl],delete o[Qd],delete o[LI],delete o[FI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function o_(i){return i.tag===5||i.tag===3||i.tag===4}function a_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||o_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ec));else if(h!==4&&(i=i.child,i!==null))for(bf(i,o,l),i=i.sibling;i!==null;)bf(i,o,l),i=i.sibling}function jf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(jf(i,o,l),i=i.sibling;i!==null;)jf(i,o,l),i=i.sibling}var Bt=null,tr=!1;function yi(i,o,l){for(l=l.child;l!==null;)l_(i,o,l),l=l.sibling}function l_(i,o,l){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(cs,l)}catch{}switch(l.tag){case 5:Qt||Go(l,o);case 6:var h=Bt,p=tr;Bt=null,yi(i,o,l),Bt=h,tr=p,Bt!==null&&(tr?(i=Bt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Bt.removeChild(l.stateNode));break;case 18:Bt!==null&&(tr?(i=Bt,l=l.stateNode,i.nodeType===8?Gd(i.parentNode,l):i.nodeType===1&&Gd(i,l),Xn(i)):Gd(Bt,l.stateNode));break;case 4:h=Bt,p=tr,Bt=l.stateNode.containerInfo,tr=!0,yi(i,o,l),Bt=h,tr=p;break;case 0:case 11:case 14:case 15:if(!Qt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,I=y.destroy;y=y.tag,I!==void 0&&((y&2)!==0||(y&4)!==0)&&kf(l,o,I),p=p.next}while(p!==h)}yi(i,o,l);break;case 1:if(!Qt&&(Go(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(x){dt(l,o,x)}yi(i,o,l);break;case 21:yi(i,o,l);break;case 22:l.mode&1?(Qt=(h=Qt)||l.memoizedState!==null,yi(i,o,l),Qt=h):yi(i,o,l);break;default:yi(i,o,l)}}function u_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new eS),o.forEach(function(h){var p=cS.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function nr(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,I=o,x=I;e:for(;x!==null;){switch(x.tag){case 5:Bt=x.stateNode,tr=!1;break e;case 3:Bt=x.stateNode.containerInfo,tr=!0;break e;case 4:Bt=x.stateNode.containerInfo,tr=!0;break e}x=x.return}if(Bt===null)throw Error(t(160));l_(y,I,p),Bt=null,tr=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(q){dt(p,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)c_(o,i),o=o.sibling}function c_(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(nr(o,i),yr(i),h&4){try{jl(3,i,i.return),qc(3,i)}catch(we){dt(i,i.return,we)}try{jl(5,i,i.return)}catch(we){dt(i,i.return,we)}}break;case 1:nr(o,i),yr(i),h&512&&l!==null&&Go(l,l.return);break;case 5:if(nr(o,i),yr(i),h&512&&l!==null&&Go(l,l.return),i.flags&32){var p=i.stateNode;try{ei(p,"")}catch(we){dt(i,i.return,we)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,I=l!==null?l.memoizedProps:y,x=i.type,D=i.updateQueue;if(i.updateQueue=null,D!==null)try{x==="input"&&y.type==="radio"&&y.name!=null&&Wa(p,y),tl(x,I);var q=tl(x,y);for(I=0;I<D.length;I+=2){var ne=D[I],re=D[I+1];ne==="style"?Ja(p,re):ne==="dangerouslySetInnerHTML"?Xa(p,re):ne==="children"?ei(p,re):G(p,ne,re,q)}switch(x){case"input":Ga(p,y);break;case"textarea":lo(p,y);break;case"select":var te=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?Cr(p,!!y.multiple,de,!1):te!==!!y.multiple&&(y.defaultValue!=null?Cr(p,!!y.multiple,y.defaultValue,!0):Cr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Sl]=y}catch(we){dt(i,i.return,we)}}break;case 6:if(nr(o,i),yr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(we){dt(i,i.return,we)}}break;case 3:if(nr(o,i),yr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Xn(o.containerInfo)}catch(we){dt(i,i.return,we)}break;case 4:nr(o,i),yr(i);break;case 13:nr(o,i),yr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Ff=Ye())),h&4&&u_(i);break;case 22:if(ne=l!==null&&l.memoizedState!==null,i.mode&1?(Qt=(q=Qt)||ne,nr(o,i),Qt=q):nr(o,i),yr(i),h&8192){if(q=i.memoizedState!==null,(i.stateNode.isHidden=q)&&!ne&&(i.mode&1)!==0)for(me=i,ne=i.child;ne!==null;){for(re=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:jl(4,te,te.return);break;case 1:Go(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){h=te,l=te.return;try{o=h,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(we){dt(h,l,we)}}break;case 5:Go(te,te.return);break;case 22:if(te.memoizedState!==null){f_(re);continue}}de!==null?(de.return=te,me=de):f_(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{p=re.stateNode,q?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(x=re.stateNode,D=re.memoizedProps.style,I=D!=null&&D.hasOwnProperty("display")?D.display:null,x.style.display=Ya("display",I))}catch(we){dt(i,i.return,we)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=q?"":re.memoizedProps}catch(we){dt(i,i.return,we)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:nr(o,i),yr(i),h&4&&u_(i);break;case 21:break;default:nr(o,i),yr(i)}}function yr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(o_(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ei(p,""),h.flags&=-33);var y=a_(i);jf(i,y,p);break;case 3:case 4:var I=h.stateNode.containerInfo,x=a_(i);bf(i,x,I);break;default:throw Error(t(161))}}catch(D){dt(i,i.return,D)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function nS(i,o,l){me=i,h_(i)}function h_(i,o,l){for(var h=(i.mode&1)!==0;me!==null;){var p=me,y=p.child;if(p.tag===22&&h){var I=p.memoizedState!==null||$c;if(!I){var x=p.alternate,D=x!==null&&x.memoizedState!==null||Qt;x=$c;var q=Qt;if($c=I,(Qt=D)&&!q)for(me=p;me!==null;)I=me,D=I.child,I.tag===22&&I.memoizedState!==null?p_(p):D!==null?(D.return=I,me=D):p_(p);for(;y!==null;)me=y,h_(y),y=y.sibling;me=p,$c=x,Qt=q}d_(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,me=y):d_(i)}}function d_(i){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Qt||qc(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!Qt)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:er(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&fy(o,y,h);break;case 3:var I=o.updateQueue;if(I!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}fy(o,I,l)}break;case 5:var x=o.stateNode;if(l===null&&o.flags&4){l=x;var D=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var ne=q.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Xn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||o.flags&512&&Vf(o)}catch(te){dt(o,o.return,te)}}if(o===i){me=null;break}if(l=o.sibling,l!==null){l.return=o.return,me=l;break}me=o.return}}function f_(i){for(;me!==null;){var o=me;if(o===i){me=null;break}var l=o.sibling;if(l!==null){l.return=o.return,me=l;break}me=o.return}}function p_(i){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{qc(4,o)}catch(D){dt(o,l,D)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(D){dt(o,p,D)}}var y=o.return;try{Vf(o)}catch(D){dt(o,y,D)}break;case 5:var I=o.return;try{Vf(o)}catch(D){dt(o,I,D)}}}catch(D){dt(o,o.return,D)}if(o===i){me=null;break}var x=o.sibling;if(x!==null){x.return=o.return,me=x;break}me=o.return}}var rS=Math.ceil,Kc=X.ReactCurrentDispatcher,Of=X.ReactCurrentOwner,Fn=X.ReactCurrentBatchConfig,Be=0,bt=null,Et=null,Ut=0,xn=0,Qo=di(0),Rt=0,Ol=null,Ss=0,Wc=0,Lf=0,Ll=null,pn=null,Ff=0,Ho=1/0,$r=null,Gc=!1,Mf=null,_i=null,Qc=!1,vi=null,Hc=0,Fl=0,Bf=null,Xc=-1,Yc=0;function rn(){return(Be&6)!==0?Ye():Xc!==-1?Xc:Xc=Ye()}function wi(i){return(i.mode&1)===0?1:(Be&2)!==0&&Ut!==0?Ut&-Ut:BI.transition!==null?(Yc===0&&(Yc=ds()),Yc):(i=je,i!==0||(i=window.event,i=i===void 0?16:dl(i.type)),i)}function rr(i,o,l,h){if(50<Fl)throw Fl=0,Bf=null,Error(t(185));ii(i,l,h),((Be&2)===0||i!==bt)&&(i===bt&&((Be&2)===0&&(Wc|=l),Rt===4&&Ei(i,Ut)),mn(i,h),l===1&&Be===0&&(o.mode&1)===0&&(Ho=Ye()+500,Ac&&pi()))}function mn(i,o){var l=i.callbackNode;Nr(i,o);var h=hs(i,i===bt?Ut:0);if(h===0)l!==null&&al(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&al(l),o===1)i.tag===0?MI(g_.bind(null,i)):ty(g_.bind(null,i)),jI(function(){(Be&6)===0&&pi()}),l=null;else{switch(oi(h)){case 1:l=us;break;case 4:l=ti;break;case 16:l=Nn;break;case 536870912:l=Yu;break;default:l=Nn}l=S_(l,m_.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function m_(i,o){if(Xc=-1,Yc=0,(Be&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Xo()&&i.callbackNode!==l)return null;var h=hs(i,i===bt?Ut:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Jc(i,h);else{o=h;var p=Be;Be|=2;var y=__();(bt!==i||Ut!==o)&&($r=null,Ho=Ye()+500,xs(i,o));do try{oS();break}catch(x){y_(i,x)}while(!0);rf(),Kc.current=y,Be=p,Et!==null?o=0:(bt=null,Ut=0,o=Rt)}if(o!==0){if(o===2&&(p=En(i),p!==0&&(h=p,o=Uf(i,p))),o===1)throw l=Ol,xs(i,0),Ei(i,h),mn(i,Ye()),l;if(o===6)Ei(i,h);else{if(p=i.current.alternate,(h&30)===0&&!iS(p)&&(o=Jc(i,h),o===2&&(y=En(i),y!==0&&(h=y,o=Uf(i,y))),o===1))throw l=Ol,xs(i,0),Ei(i,h),mn(i,Ye()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:Ps(i,pn,$r);break;case 3:if(Ei(i,h),(h&130023424)===h&&(o=Ff+500-Ye(),10<o)){if(hs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){rn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Wd(Ps.bind(null,i,pn,$r),o);break}Ps(i,pn,$r);break;case 4:if(Ei(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var I=31-en(h);y=1<<I,I=o[I],I>p&&(p=I),h&=~y}if(h=p,h=Ye()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*rS(h/1960))-h,10<h){i.timeoutHandle=Wd(Ps.bind(null,i,pn,$r),h);break}Ps(i,pn,$r);break;case 5:Ps(i,pn,$r);break;default:throw Error(t(329))}}}return mn(i,Ye()),i.callbackNode===l?m_.bind(null,i):null}function Uf(i,o){var l=Ll;return i.current.memoizedState.isDehydrated&&(xs(i,o).flags|=256),i=Jc(i,o),i!==2&&(o=pn,pn=l,o!==null&&zf(o)),i}function zf(i){pn===null?pn=i:pn.push.apply(pn,i)}function iS(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Jn(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ei(i,o){for(o&=~Lf,o&=~Wc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-en(o),h=1<<l;i[l]=-1,o&=~h}}function g_(i){if((Be&6)!==0)throw Error(t(327));Xo();var o=hs(i,0);if((o&1)===0)return mn(i,Ye()),null;var l=Jc(i,o);if(i.tag!==0&&l===2){var h=En(i);h!==0&&(o=h,l=Uf(i,h))}if(l===1)throw l=Ol,xs(i,0),Ei(i,o),mn(i,Ye()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ps(i,pn,$r),mn(i,Ye()),null}function $f(i,o){var l=Be;Be|=1;try{return i(o)}finally{Be=l,Be===0&&(Ho=Ye()+500,Ac&&pi())}}function As(i){vi!==null&&vi.tag===0&&(Be&6)===0&&Xo();var o=Be;Be|=1;var l=Fn.transition,h=je;try{if(Fn.transition=null,je=1,i)return i()}finally{je=h,Fn.transition=l,Be=o,(Be&6)===0&&pi()}}function qf(){xn=Qo.current,nt(Qo)}function xs(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,bI(l)),Et!==null)for(l=Et.return;l!==null;){var h=l;switch(Jd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ic();break;case 3:Ko(),nt(hn),nt(Kt),df();break;case 5:cf(h);break;case 4:Ko();break;case 13:nt(ct);break;case 19:nt(ct);break;case 10:sf(h.type._context);break;case 22:case 23:qf()}l=l.return}if(bt=i,Et=i=Ti(i.current,null),Ut=xn=o,Rt=0,Ol=null,Lf=Wc=Ss=0,pn=Ll=null,Es!==null){for(o=0;o<Es.length;o++)if(l=Es[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var I=y.next;y.next=p,h.next=I}l.pending=h}Es=null}return i}function y_(i,o){do{var l=Et;try{if(rf(),jc.current=Mc,Oc){for(var h=ht.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Oc=!1}if(Is=0,Vt=Ct=ht=null,Dl=!1,Nl=0,Of.current=null,l===null||l.return===null){Rt=1,Ol=o,Et=null;break}e:{var y=i,I=l.return,x=l,D=o;if(o=Ut,x.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,ne=x,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=zy(I);if(de!==null){de.flags&=-257,$y(de,I,x,y,o),de.mode&1&&Uy(y,q,o),o=de,D=q;var ge=o.updateQueue;if(ge===null){var we=new Set;we.add(D),o.updateQueue=we}else ge.add(D);break e}else{if((o&1)===0){Uy(y,q,o),Kf();break e}D=Error(t(426))}}else if(st&&x.mode&1){var gt=zy(I);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),$y(gt,I,x,y,o),tf(Wo(D,x));break e}}y=D=Wo(D,x),Rt!==4&&(Rt=2),Ll===null?Ll=[y]:Ll.push(y),y=I;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=My(y,D,o);dy(y,z);break e;case 1:x=D;var b=y.type,$=y.stateNode;if((y.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(_i===null||!_i.has($)))){y.flags|=65536,o&=-o,y.lanes|=o;var se=By(y,x,o);dy(y,se);break e}}y=y.return}while(y!==null)}w_(l)}catch(Te){o=Te,Et===l&&l!==null&&(Et=l=l.return);continue}break}while(!0)}function __(){var i=Kc.current;return Kc.current=Mc,i===null?Mc:i}function Kf(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),bt===null||(Ss&268435455)===0&&(Wc&268435455)===0||Ei(bt,Ut)}function Jc(i,o){var l=Be;Be|=2;var h=__();(bt!==i||Ut!==o)&&($r=null,xs(i,o));do try{sS();break}catch(p){y_(i,p)}while(!0);if(rf(),Be=l,Kc.current=h,Et!==null)throw Error(t(261));return bt=null,Ut=0,Rt}function sS(){for(;Et!==null;)v_(Et)}function oS(){for(;Et!==null&&!Hu();)v_(Et)}function v_(i){var o=I_(i.alternate,i,xn);i.memoizedProps=i.pendingProps,o===null?w_(i):Et=o,Of.current=null}function w_(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=JI(l,o,xn),l!==null){Et=l;return}}else{if(l=ZI(l,o),l!==null){l.flags&=32767,Et=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Rt=6,Et=null;return}}if(o=o.sibling,o!==null){Et=o;return}Et=o=i}while(o!==null);Rt===0&&(Rt=5)}function Ps(i,o,l){var h=je,p=Fn.transition;try{Fn.transition=null,je=1,aS(i,o,l,h)}finally{Fn.transition=p,je=h}return null}function aS(i,o,l,h){do Xo();while(vi!==null);if((Be&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(He(i,y),i===bt&&(Et=bt=null,Ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Qc||(Qc=!0,S_(Nn,function(){return Xo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Fn.transition,Fn.transition=null;var I=je;je=1;var x=Be;Be|=4,Of.current=null,tS(i,l),c_(l,i),PI(qd),li=!!$d,qd=$d=null,i.current=l,nS(l),Pd(),Be=x,je=I,Fn.transition=y}else i.current=l;if(Qc&&(Qc=!1,vi=i,Hc=p),y=i.pendingLanes,y===0&&(_i=null),Ju(l.stateNode),mn(i,Ye()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Gc)throw Gc=!1,i=Mf,Mf=null,i;return(Hc&1)!==0&&i.tag!==0&&Xo(),y=i.pendingLanes,(y&1)!==0?i===Bf?Fl++:(Fl=0,Bf=i):Fl=0,pi(),null}function Xo(){if(vi!==null){var i=oi(Hc),o=Fn.transition,l=je;try{if(Fn.transition=null,je=16>i?16:i,vi===null)var h=!1;else{if(i=vi,vi=null,Hc=0,(Be&6)!==0)throw Error(t(331));var p=Be;for(Be|=4,me=i.current;me!==null;){var y=me,I=y.child;if((me.flags&16)!==0){var x=y.deletions;if(x!==null){for(var D=0;D<x.length;D++){var q=x[D];for(me=q;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:jl(8,ne,y)}var re=ne.child;if(re!==null)re.return=ne,me=re;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(s_(ne),ne===q){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var ge=y.alternate;if(ge!==null){var we=ge.child;if(we!==null){ge.child=null;do{var gt=we.sibling;we.sibling=null,we=gt}while(we!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,me=I;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:jl(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,me=z;break e}me=y.return}}var b=i.current;for(me=b;me!==null;){I=me;var $=I.child;if((I.subtreeFlags&2064)!==0&&$!==null)$.return=I,me=$;else e:for(I=b;me!==null;){if(x=me,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:qc(9,x)}}catch(Te){dt(x,x.return,Te)}if(x===I){me=null;break e}var se=x.sibling;if(se!==null){se.return=x.return,me=se;break e}me=x.return}}if(Be=p,pi(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(cs,i)}catch{}h=!0}return h}finally{je=l,Fn.transition=o}}return!1}function E_(i,o,l){o=Wo(l,o),o=My(i,o,1),i=gi(i,o,1),o=rn(),i!==null&&(ii(i,1,o),mn(i,o))}function dt(i,o,l){if(i.tag===3)E_(i,i,l);else for(;o!==null;){if(o.tag===3){E_(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_i===null||!_i.has(h))){i=Wo(l,i),i=By(o,i,1),o=gi(o,i,1),i=rn(),o!==null&&(ii(o,1,i),mn(o,i));break}}o=o.return}}function lS(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=rn(),i.pingedLanes|=i.suspendedLanes&l,bt===i&&(Ut&l)===l&&(Rt===4||Rt===3&&(Ut&130023424)===Ut&&500>Ye()-Ff?xs(i,0):Lf|=l),mn(i,o)}function T_(i,o){o===0&&((i.mode&1)===0?o=1:(o=vo,vo<<=1,(vo&130023424)===0&&(vo=4194304)));var l=rn();i=Br(i,o),i!==null&&(ii(i,o,l),mn(i,l))}function uS(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),T_(i,l)}function cS(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),T_(i,l)}var I_;I_=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||hn.current)fn=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return fn=!1,YI(i,o,l);fn=(i.flags&131072)!==0}else fn=!1,st&&(o.flags&1048576)!==0&&ny(o,Pc,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;zc(i,o),i=o.pendingProps;var p=Fo(o,Kt.current);qo(o,l),p=mf(null,o,h,i,p,l);var y=gf();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dn(h)?(y=!0,Sc(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,lf(o),p.updater=Bc,o.stateNode=p,p._reactInternals=o,Tf(o,h,i,l),o=xf(null,o,h,!0,y,l)):(o.tag=0,st&&y&&Yd(o),nn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(zc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=dS(h),i=er(h,i),p){case 0:o=Af(null,o,h,i,l);break e;case 1:o=Hy(null,o,h,i,l);break e;case 11:o=qy(null,o,h,i,l);break e;case 14:o=Ky(null,o,h,er(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:er(h,p),Af(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:er(h,p),Hy(i,o,h,p,l);case 3:e:{if(Xy(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,hy(i,o),Vc(o,h,null,l);var I=o.memoizedState;if(h=I.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Wo(Error(t(423)),o),o=Yy(i,o,h,l,p);break e}else if(h!==p){p=Wo(Error(t(424)),o),o=Yy(i,o,h,l,p);break e}else for(An=hi(o.stateNode.containerInfo.firstChild),Sn=o,st=!0,Zn=null,l=uy(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Uo(),h===p){o=zr(i,o,l);break e}nn(i,o,h,l)}o=o.child}return o;case 5:return py(o),i===null&&ef(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,I=p.children,Kd(h,p)?I=null:y!==null&&Kd(h,y)&&(o.flags|=32),Qy(i,o),nn(i,o,I,l),o.child;case 6:return i===null&&ef(o),null;case 13:return Jy(i,o,l);case 4:return uf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=zo(o,null,h,l):nn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:er(h,p),qy(i,o,h,p,l);case 7:return nn(i,o,o.pendingProps,l),o.child;case 8:return nn(i,o,o.pendingProps.children,l),o.child;case 12:return nn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,I=p.value,Je(Dc,h._currentValue),h._currentValue=I,y!==null)if(Jn(y.value,I)){if(y.children===p.children&&!hn.current){o=zr(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var x=y.dependencies;if(x!==null){I=y.child;for(var D=x.firstContext;D!==null;){if(D.context===h){if(y.tag===1){D=Ur(-1,l&-l),D.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ne=q.pending;ne===null?D.next=D:(D.next=ne.next,ne.next=D),q.pending=D}}y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),of(y.return,l,o),x.lanes|=l;break}D=D.next}}else if(y.tag===10)I=y.type===o.type?null:y.child;else if(y.tag===18){if(I=y.return,I===null)throw Error(t(341));I.lanes|=l,x=I.alternate,x!==null&&(x.lanes|=l),of(I,l,o),I=y.sibling}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===o){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}nn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,qo(o,l),p=On(p),h=h(p),o.flags|=1,nn(i,o,h,l),o.child;case 14:return h=o.type,p=er(h,o.pendingProps),p=er(h.type,p),Ky(i,o,h,p,l);case 15:return Wy(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:er(h,p),zc(i,o),o.tag=1,dn(h)?(i=!0,Sc(o)):i=!1,qo(o,l),Ly(o,h,p),Tf(o,h,p,l),xf(null,o,h,!0,i,l);case 19:return e_(i,o,l);case 22:return Gy(i,o,l)}throw Error(t(156,o.tag))};function S_(i,o){return yo(i,o)}function hS(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(i,o,l,h){return new hS(i,o,l,h)}function Wf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function dS(i){if(typeof i=="function")return Wf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===ye)return 14}return 2}function Ti(i,o){var l=i.alternate;return l===null?(l=Mn(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Zc(i,o,l,h,p,y){var I=2;if(h=i,typeof i=="function")Wf(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case k:return Cs(l.children,p,y,o);case A:I=8,p|=8;break;case R:return i=Mn(12,l,o,p|2),i.elementType=R,i.lanes=y,i;case C:return i=Mn(13,l,o,p),i.elementType=C,i.lanes=y,i;case ut:return i=Mn(19,l,o,p),i.elementType=ut,i.lanes=y,i;case le:return eh(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:I=10;break e;case O:I=9;break e;case M:I=11;break e;case ye:I=14;break e;case fe:I=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Mn(I,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function Cs(i,o,l,h){return i=Mn(7,i,h,o),i.lanes=l,i}function eh(i,o,l,h){return i=Mn(22,i,h,o),i.elementType=le,i.lanes=l,i.stateNode={isHidden:!1},i}function Gf(i,o,l){return i=Mn(6,i,null,o),i.lanes=l,i}function Qf(i,o,l){return o=Mn(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function fS(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ri(0),this.expirationTimes=ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Hf(i,o,l,h,p,y,I,x,D){return i=new fS(i,o,l,x,D),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Mn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},lf(y),i}function pS(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function A_(i){if(!i)return fi;i=i._reactInternals;e:{if(Kn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(dn(l))return Zg(i,l,o)}return o}function x_(i,o,l,h,p,y,I,x,D){return i=Hf(l,h,!0,i,p,y,I,x,D),i.context=A_(null),l=i.current,h=rn(),p=wi(l),y=Ur(h,p),y.callback=o??null,gi(l,y,p),i.current.lanes=p,ii(i,p,h),mn(i,h),i}function th(i,o,l,h){var p=o.current,y=rn(),I=wi(p);return l=A_(l),o.context===null?o.context=l:o.pendingContext=l,o=Ur(y,I),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=gi(p,o,I),i!==null&&(rr(i,p,I,y),kc(i,p,I)),I}function nh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function P_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Xf(i,o){P_(i,o),(i=i.alternate)&&P_(i,o)}function mS(){return null}var C_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Yf(i){this._internalRoot=i}rh.prototype.render=Yf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));th(i,o,null,null)},rh.prototype.unmount=Yf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;As(function(){th(null,i,null,null)}),o[Or]=null}};function rh(i){this._internalRoot=i}rh.prototype.unstable_scheduleHydration=function(i){if(i){var o=rc();i={blockedOn:null,target:i,priority:o};for(var l=0;l<cr.length&&o!==0&&o<cr[l].priority;l++);cr.splice(l,0,i),l===0&&oc(i)}};function Jf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ih(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function R_(){}function gS(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var q=nh(I);y.call(q)}}var I=x_(o,h,i,0,null,!1,!1,"",R_);return i._reactRootContainer=I,i[Or]=I.current,Tl(i.nodeType===8?i.parentNode:i),As(),I}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var x=h;h=function(){var q=nh(D);x.call(q)}}var D=Hf(i,0,!1,null,null,!1,!1,"",R_);return i._reactRootContainer=D,i[Or]=D.current,Tl(i.nodeType===8?i.parentNode:i),As(function(){th(o,D,l,h)}),D}function sh(i,o,l,h,p){var y=l._reactRootContainer;if(y){var I=y;if(typeof p=="function"){var x=p;p=function(){var D=nh(I);x.call(D)}}th(o,I,i,p)}else I=gS(l,o,i,p,h);return nh(I)}tc=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ni(o.pendingLanes);l!==0&&(si(o,l|1),mn(o,Ye()),(Be&6)===0&&(Ho=Ye()+500,pi()))}break;case 13:As(function(){var h=Br(i,1);if(h!==null){var p=rn();rr(h,i,1,p)}}),Xf(i,1)}},wo=function(i){if(i.tag===13){var o=Br(i,134217728);if(o!==null){var l=rn();rr(o,i,134217728,l)}Xf(i,134217728)}},nc=function(i){if(i.tag===13){var o=wi(i),l=Br(i,o);if(l!==null){var h=rn();rr(l,i,o,h)}Xf(i,o)}},rc=function(){return je},ic=function(i,o){var l=je;try{return je=i,o()}finally{je=l}},co=function(i,o,l){switch(o){case"input":if(Ga(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=Tc(h);if(!p)throw Error(t(90));io(h),Ga(h,p)}}}break;case"textarea":lo(i,l);break;case"select":o=l.value,o!=null&&Cr(i,!!l.multiple,o,!1)}},ss=$f,rl=As;var yS={usingClientEntryPoint:!1,Events:[Al,Oo,Tc,lr,nl,$f]},Ml={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_S={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ol(i),i===null?null:i.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||mS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{cs=oh.inject(_S),wn=oh}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS,gn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jf(o))throw Error(t(200));return pS(i,o,null,l)},gn.createRoot=function(i,o){if(!Jf(i))throw Error(t(299));var l=!1,h="",p=C_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=Hf(i,1,!1,null,null,l,!1,h,p),i[Or]=o.current,Tl(i.nodeType===8?i.parentNode:i),new Yf(o)},gn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ol(o),i=i===null?null:i.stateNode,i},gn.flushSync=function(i){return As(i)},gn.hydrate=function(i,o,l){if(!ih(o))throw Error(t(200));return sh(null,i,o,!0,l)},gn.hydrateRoot=function(i,o,l){if(!Jf(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",I=C_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),o=x_(o,null,i,1,l??null,p,!1,y,I),i[Or]=o.current,Tl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new rh(o)},gn.render=function(i,o,l){if(!ih(o))throw Error(t(200));return sh(null,i,o,!1,l)},gn.unmountComponentAtNode=function(i){if(!ih(i))throw Error(t(40));return i._reactRootContainer?(As(function(){sh(null,null,i,!1,function(){i._reactRootContainer=null,i[Or]=null})}),!0):!1},gn.unstable_batchedUpdates=$f,gn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!ih(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return sh(i,o,l,!1,h)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var L_;function Bw(){if(L_)return tp.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tp.exports=PS(),tp.exports}var F_;function CS(){if(F_)return ah;F_=1;var r=Bw();return ah.createRoot=r.createRoot,ah.hydrateRoot=r.hydrateRoot,ah}var RS=CS();const DS=Fw(RS);Bw();function lu(){return lu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lu.apply(this,arguments)}var Ri;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ri||(Ri={}));const M_="popstate";function NS(r){r===void 0&&(r={});function e(n,s){let{pathname:a,search:u,hash:d}=n.location;return _p("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:xh(s)}return VS(e,t,null,r)}function ft(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function rm(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kS(){return Math.random().toString(36).substr(2,8)}function B_(r,e){return{usr:r.state,key:r.key,idx:e}}function _p(r,e,t,n){return t===void 0&&(t=null),lu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Oa(e):e,{state:t,key:e&&e.key||n||kS()})}function xh(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Oa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function VS(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,u=s.history,d=Ri.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(lu({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function w(){d=Ri.Pop;let N=_(),Y=N==null?null:N-m;m=N,f&&f({action:d,location:j.location,delta:Y})}function T(N,Y){d=Ri.Push;let Q=_p(j.location,N,Y);m=_()+1;let G=B_(Q,m),X=j.createHref(Q);try{u.pushState(G,"",X)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;s.location.assign(X)}a&&f&&f({action:d,location:j.location,delta:1})}function P(N,Y){d=Ri.Replace;let Q=_p(j.location,N,Y);m=_();let G=B_(Q,m),X=j.createHref(Q);u.replaceState(G,"",X),a&&f&&f({action:d,location:j.location,delta:0})}function L(N){let Y=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof N=="string"?N:xh(N);return Q=Q.replace(/ $/,"%20"),ft(Y,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,Y)}let j={get action(){return d},get location(){return r(s,u)},listen(N){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(M_,w),f=N,()=>{s.removeEventListener(M_,w),f=null}},createHref(N){return e(s,N)},createURL:L,encodeLocation(N){let Y=L(N);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:T,replace:P,go(N){return u.go(N)}};return j}var U_;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(U_||(U_={}));function bS(r,e,t){return t===void 0&&(t="/"),jS(r,e,t)}function jS(r,e,t,n){let s=typeof e=="string"?Oa(e):e,a=da(s.pathname||"/",t);if(a==null)return null;let u=Uw(r);OS(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=GS(a);d=KS(u[f],m)}return d}function Uw(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(ft(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let m=ki([n,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(ft(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Uw(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:$S(m,a.index),routesMeta:_})};return r.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of zw(a.path))s(a,u,f)}),e}function zw(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let u=zw(n.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>r.startsWith("/")&&f===""?"/":f)}function OS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qS(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const LS=/^:[\w-]+$/,FS=3,MS=2,BS=1,US=10,zS=-2,z_=r=>r==="*";function $S(r,e){let t=r.split("/"),n=t.length;return t.some(z_)&&(n+=zS),e&&(n+=MS),t.filter(s=>!z_(s)).reduce((s,a)=>s+(LS.test(a)?FS:a===""?BS:US),n)}function qS(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function KS(r,e,t){let{routesMeta:n}=r,s={},a="/",u=[];for(let d=0;d<n.length;++d){let f=n[d],m=d===n.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=vp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),T=f.route;if(!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:ki([a,w.pathname]),pathnameBase:JS(ki([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=ki([a,w.pathnameBase]))}return u}function vp(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=WS(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((m,_,w)=>{let{paramName:T,isOptional:P}=_;if(T==="*"){let j=d[w]||"";u=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const L=d[w];return P&&!L?m[T]=void 0:m[T]=(L||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:r}}function WS(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),rm(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function GS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rm(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function da(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const QS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HS=r=>QS.test(r);function XS(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Oa(r):r,a;if(t)if(HS(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),rm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=$_(t.substring(1),"/"):a=$_(t,e)}else a=e;return{pathname:a,search:ZS(n),hash:eA(s)}}function $_(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ip(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YS(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $w(r,e){let t=YS(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function qw(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=Oa(r):(s=lu({},r),ft(!s.pathname||!s.pathname.includes("?"),ip("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),ip("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),ip("#","search","hash",s)));let a=r===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!n&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=XS(s,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const ki=r=>r.join("/").replace(/\/\/+/g,"/"),JS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ZS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,eA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function tA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Kw=["post","put","patch","delete"];new Set(Kw);const nA=["get",...Kw];new Set(nA);function uu(){return uu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},uu.apply(this,arguments)}const Xh=H.createContext(null),Ww=H.createContext(null),Gi=H.createContext(null),Yh=H.createContext(null),Js=H.createContext({outlet:null,matches:[],isDataRoute:!1}),Gw=H.createContext(null);function rA(r,e){let{relative:t}=e===void 0?{}:e;Du()||ft(!1);let{basename:n,navigator:s}=H.useContext(Gi),{hash:a,pathname:u,search:d}=Jh(r,{relative:t}),f=u;return n!=="/"&&(f=u==="/"?n:ki([n,u])),s.createHref({pathname:f,search:d,hash:a})}function Du(){return H.useContext(Yh)!=null}function La(){return Du()||ft(!1),H.useContext(Yh).location}function Qw(r){H.useContext(Gi).static||H.useLayoutEffect(r)}function Hw(){let{isDataRoute:r}=H.useContext(Js);return r?gA():iA()}function iA(){Du()||ft(!1);let r=H.useContext(Xh),{basename:e,future:t,navigator:n}=H.useContext(Gi),{matches:s}=H.useContext(Js),{pathname:a}=La(),u=JSON.stringify($w(s,t.v7_relativeSplatPath)),d=H.useRef(!1);return Qw(()=>{d.current=!0}),H.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){n.go(m);return}let w=qw(m,JSON.parse(u),a,_.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ki([e,w.pathname])),(_.replace?n.replace:n.push)(w,_.state,_)},[e,n,u,a,r])}function Jh(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=H.useContext(Gi),{matches:s}=H.useContext(Js),{pathname:a}=La(),u=JSON.stringify($w(s,n.v7_relativeSplatPath));return H.useMemo(()=>qw(r,JSON.parse(u),a,t==="path"),[r,u,a,t])}function sA(r,e){return oA(r,e)}function oA(r,e,t,n){Du()||ft(!1);let{navigator:s}=H.useContext(Gi),{matches:a}=H.useContext(Js),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=La(),_;if(e){var w;let N=typeof e=="string"?Oa(e):e;f==="/"||(w=N.pathname)!=null&&w.startsWith(f)||ft(!1),_=N}else _=m;let T=_.pathname||"/",P=T;if(f!=="/"){let N=f.replace(/^\//,"").split("/");P="/"+T.replace(/^\//,"").split("/").slice(N.length).join("/")}let L=bS(r,{pathname:P}),j=hA(L&&L.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:ki([f,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:ki([f,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,t,n);return e&&j?H.createElement(Yh.Provider,{value:{location:uu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ri.Pop}},j):j}function aA(){let r=mA(),e=tA(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:s},t):null,null)}const lA=H.createElement(aA,null);class uA extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Js.Provider,{value:this.props.routeContext},H.createElement(Gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cA(r){let{routeContext:e,match:t,children:n}=r,s=H.useContext(Xh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Js.Provider,{value:e},n)}function hA(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var a;if(!t)return null;if(t.errors)r=t.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let u=r,d=(s=t)==null?void 0:s.errors;if(d!=null){let _=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);_>=0||ft(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&n&&n.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=_),w.route.id){let{loaderData:T,errors:P}=t,L=w.route.loader&&T[w.route.id]===void 0&&(!P||P[w.route.id]===void 0);if(w.route.lazy||L){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,w,T)=>{let P,L=!1,j=null,N=null;t&&(P=d&&w.route.id?d[w.route.id]:void 0,j=w.route.errorElement||lA,f&&(m<0&&T===0?(yA("route-fallback"),L=!0,N=null):m===T&&(L=!0,N=w.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,T+1)),Q=()=>{let G;return P?G=j:L?G=N:w.route.Component?G=H.createElement(w.route.Component,null):w.route.element?G=w.route.element:G=_,H.createElement(cA,{match:w,routeContext:{outlet:_,matches:Y,isDataRoute:t!=null},children:G})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?H.createElement(uA,{location:t.location,revalidation:t.revalidation,component:j,error:P,children:Q(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):Q()},null)}var Xw=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Xw||{}),Yw=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Yw||{});function dA(r){let e=H.useContext(Xh);return e||ft(!1),e}function fA(r){let e=H.useContext(Ww);return e||ft(!1),e}function pA(r){let e=H.useContext(Js);return e||ft(!1),e}function Jw(r){let e=pA(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function mA(){var r;let e=H.useContext(Gw),t=fA(),n=Jw();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function gA(){let{router:r}=dA(Xw.UseNavigateStable),e=Jw(Yw.UseNavigateStable),t=H.useRef(!1);return Qw(()=>{t.current=!0}),H.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,uu({fromRouteId:e},a)))},[r,e])}const q_={};function yA(r,e,t){q_[r]||(q_[r]=!0)}function _A(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function ra(r){ft(!1)}function vA(r){let{basename:e="/",children:t=null,location:n,navigationType:s=Ri.Pop,navigator:a,static:u=!1,future:d}=r;Du()&&ft(!1);let f=e.replace(/^\/*/,"/"),m=H.useMemo(()=>({basename:f,navigator:a,static:u,future:uu({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof n=="string"&&(n=Oa(n));let{pathname:_="/",search:w="",hash:T="",state:P=null,key:L="default"}=n,j=H.useMemo(()=>{let N=da(_,f);return N==null?null:{location:{pathname:N,search:w,hash:T,state:P,key:L},navigationType:s}},[f,_,w,T,P,L,s]);return j==null?null:H.createElement(Gi.Provider,{value:m},H.createElement(Yh.Provider,{children:t,value:j}))}function wA(r){let{children:e,location:t}=r;return sA(wp(e),t)}new Promise(()=>{});function wp(r,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(r,(n,s)=>{if(!H.isValidElement(n))return;let a=[...e,s];if(n.type===H.Fragment){t.push.apply(t,wp(n.props.children,a));return}n.type!==ra&&ft(!1),!n.props.index||!n.props.children||ft(!1);let u={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=wp(n.props.children,a)),t.push(u)}),t}function Ph(){return Ph=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ph.apply(this,arguments)}function Zw(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function EA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function TA(r,e){return r.button===0&&(!e||e==="_self")&&!EA(r)}const IA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],AA="6";try{window.__reactRouterVersion=AA}catch{}const xA=H.createContext({isTransitioning:!1}),PA="startTransition",K_=SS[PA];function CA(r){let{basename:e,children:t,future:n,window:s}=r,a=H.useRef();a.current==null&&(a.current=NS({window:s,v5Compat:!0}));let u=a.current,[d,f]=H.useState({action:u.action,location:u.location}),{v7_startTransition:m}=n||{},_=H.useCallback(w=>{m&&K_?K_(()=>f(w)):f(w)},[f,m]);return H.useLayoutEffect(()=>u.listen(_),[u,_]),H.useEffect(()=>_A(n),[n]),H.createElement(vA,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:n})}const RA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ia=H.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:_,viewTransition:w}=e,T=Zw(e,IA),{basename:P}=H.useContext(Gi),L,j=!1;if(typeof m=="string"&&DA.test(m)&&(L=m,RA))try{let G=new URL(window.location.href),X=m.startsWith("//")?new URL(G.protocol+m):new URL(m),pe=da(X.pathname,P);X.origin===G.origin&&pe!=null?m=pe+X.search+X.hash:j=!0}catch{}let N=rA(m,{relative:s}),Y=kA(m,{replace:u,state:d,target:f,preventScrollReset:_,relative:s,viewTransition:w});function Q(G){n&&n(G),G.defaultPrevented||Y(G)}return H.createElement("a",Ph({},T,{href:L||N,onClick:j||a?n:Q,ref:t,target:f}))}),Ul=H.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:u=!1,style:d,to:f,viewTransition:m,children:_}=e,w=Zw(e,SA),T=Jh(f,{relative:w.relative}),P=La(),L=H.useContext(Ww),{navigator:j,basename:N}=H.useContext(Gi),Y=L!=null&&VA(T)&&m===!0,Q=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,G=P.pathname,X=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;s||(G=G.toLowerCase(),X=X?X.toLowerCase():null,Q=Q.toLowerCase()),X&&N&&(X=da(X,N)||X);const pe=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Ee=G===Q||!u&&G.startsWith(Q)&&G.charAt(pe)==="/",k=X!=null&&(X===Q||!u&&X.startsWith(Q)&&X.charAt(Q.length)==="/"),A={isActive:Ee,isPending:k,isTransitioning:Y},R=Ee?n:void 0,V;typeof a=="function"?V=a(A):V=[a,Ee?"active":null,k?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let O=typeof d=="function"?d(A):d;return H.createElement(ia,Ph({},w,{"aria-current":R,className:V,ref:t,style:O,to:f,viewTransition:m}),typeof _=="function"?_(A):_)});var Ep;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Ep||(Ep={}));var W_;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(W_||(W_={}));function NA(r){let e=H.useContext(Xh);return e||ft(!1),e}function kA(r,e){let{target:t,replace:n,state:s,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=Hw(),m=La(),_=Jh(r,{relative:u});return H.useCallback(w=>{if(TA(w,t)){w.preventDefault();let T=n!==void 0?n:xh(m)===xh(_);f(r,{replace:T,state:s,preventScrollReset:a,relative:u,viewTransition:d})}},[m,f,_,n,s,t,r,a,u,d])}function VA(r,e){e===void 0&&(e={});let t=H.useContext(xA);t==null&&ft(!1);let{basename:n}=NA(Ep.useViewTransitionState),s=Jh(r,{relative:e.relative});if(!t.isTransitioning)return!1;let a=da(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=da(t.nextLocation.pathname,n)||t.nextLocation.pathname;return vp(s.pathname,u)!=null||vp(s.pathname,a)!=null}function bA(){const r=La(),e=t=>t==="/"?r.pathname==="/"?"nav-btn active":"nav-btn":r.pathname.startsWith(t)?"nav-btn active":"nav-btn";return E.jsxs("header",{className:"topbar",children:[E.jsxs("div",{className:"topbar-left",children:[E.jsx("img",{src:"https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_horizontal.png",alt:"Relevo Consultoria Ambiental",className:"topbar-logo"}),E.jsx("span",{className:"topbar-title",children:"Cronograma"})]}),E.jsxs("nav",{className:"topbar-nav",children:[E.jsx(ia,{to:"/",className:e("/"),children:"Dashboard"}),E.jsx(ia,{to:"/projetos",className:e("/projetos"),children:"Projetos"}),E.jsx(ia,{to:"/tarefas",className:e("/tarefas"),children:"Tarefas"}),E.jsx(ia,{to:"/calendario",className:e("/calendario"),children:"Calendrio"}),E.jsx(ia,{to:"/importar",className:e("/importar"),children:"Importar (IA)"})]})]})}function jA(){return E.jsxs("footer",{children:[" ",new Date().getFullYear()," Relevo Consultoria Ambiental"]})}function OA(){return E.jsxs("nav",{className:"nav-cronograma",children:[E.jsx(Ul,{to:"/",end:!0,children:" Dashboard"}),E.jsx(Ul,{to:"/projetos",children:" Projetos"}),E.jsx(Ul,{to:"/tarefas",children:" Tarefas"}),E.jsx(Ul,{to:"/calendario",children:" Calendrio"}),E.jsx(Ul,{to:"/importar",children:" Importar (IA)"})]})}const LA=()=>{};var G_={};const eE=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},FA=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=r[t++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=r[t++],u=r[t++],d=r[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],u=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const a=r[s],u=s+1<r.length,d=u?r[s+1]:0,f=s+2<r.length,m=f?r[s+2]:0,_=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(T=64)),n.push(t[_],t[w],t[T],t[P])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):FA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const a=t[r.charAt(s++)],d=s<r.length?t[r.charAt(s)]:0;++s;const m=s<r.length?t[r.charAt(s)]:64;++s;const w=s<r.length?t[r.charAt(s)]:64;if(++s,a==null||d==null||m==null||w==null)throw new MA;const T=a<<2|d>>4;if(n.push(T),m!==64){const P=d<<4&240|m>>2;if(n.push(P),w!==64){const L=m<<6&192|w;n.push(L)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class MA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(r){const e=eE(r);return tE.encodeByteArray(e,!0)},Ch=function(r){return BA(r).replace(/\./g,"")},nE=function(r){try{return tE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rh(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!UA(t)||(r[t]=Rh(r[t],e[t]));return r}function UA(r){return r!=="__proto__"}function im(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zA=()=>im().__FIREBASE_DEFAULTS__,$A=()=>{if(typeof process>"u"||typeof G_>"u")return;const r=G_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nE(r[1]);return e&&JSON.parse(e)},rE=()=>{try{return LA()||zA()||$A()||qA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iE=()=>{var r;return(r=rE())===null||r===void 0?void 0:r.config};class KA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function sm(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WA(r){return(await fetch(r,{credentials:"include"})).ok}function GA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ch(JSON.stringify(t)),Ch(JSON.stringify(u)),""].join(".")}const Jl={};function QA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?r.emulator.push(e):r.prod.push(e);return r}function HA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Q_=!1;function XA(r,e){if(typeof window>"u"||typeof document>"u"||!sm(window.location.host)||Jl[r]===e||Jl[r]||Q_)return;Jl[r]=e;function t(T){return`__firebase__banner__${T}`}const n="__firebase__banner",a=QA().prod.length>0;function u(){const T=document.getElementById(n);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Q_=!0,u()},T}function _(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=HA(n),P=t("text"),L=document.getElementById(P)||document.createElement("span"),j=t("learnmore"),N=document.getElementById(j)||document.createElement("a"),Y=t("preprendIcon"),Q=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;d(G),_(N,j);const X=m();f(Q,Y),G.append(Q,L,N,X),document.body.appendChild(G)}a?(L.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Dh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sE(){var r;const e=(r=rE())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof window<"u"||oE()}function oE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function aE(){return!sE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lE(){return!sE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uE(){try{return typeof indexedDB=="object"}catch{return!1}}function JA(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}const ZA="FirebaseError";class Zs extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=ZA,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zh.prototype.create)}}class Zh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?e1(a,n):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Zs(s,d,n)}}function e1(r,e){return r.replace(t1,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const t1=/\{\$([^}]+)}/g;function H_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function fa(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const a=r[s],u=e[s];if(X_(a)&&X_(u)){if(!fa(a,u))return!1}else if(a!==u)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function X_(r){return r!==null&&typeof r=="object"}function n1(r,e){const t=new r1(r,e);return t.subscribe.bind(t)}class r1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");i1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=sp),s.error===void 0&&(s.error=sp),s.complete===void 0&&(s.complete=sp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function sp(){}function St(r){return r&&r._delegate?r._delegate:r}class zs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ds="[DEFAULT]";class s1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new KA;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a1(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);n===d&&u.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:o1(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o1(r){return r===Ds?void 0:r}function a1(r){return r.instantiationMode==="EAGER"}class cE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const om=[];var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const hE={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},l1=Oe.INFO,u1={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},c1=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=u1[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=l1,this._logHandler=c1,this._userLogHandler=null,om.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}function h1(r){om.forEach(e=>{e.setLogLevel(r)})}function d1(r,e){for(const t of om){let n=null;e&&e.level&&(n=hE[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(s,a,...u)=>{const d=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(n??s.logLevel)&&r({level:Oe[a].toLowerCase(),message:d,args:u,type:s.name})}}}const f1=(r,e)=>e.some(t=>r instanceof t);let Y_,J_;function p1(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m1(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Tp=new WeakMap,fE=new WeakMap,op=new WeakMap,lm=new WeakMap;function g1(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",a),r.removeEventListener("error",u)},a=()=>{t(Vi(r.result)),s()},u=()=>{n(r.error),s()};r.addEventListener("success",a),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dE.set(t,r)}).catch(()=>{}),lm.set(e,r),e}function y1(r){if(Tp.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",u),r.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",a),r.addEventListener("error",u),r.addEventListener("abort",u)});Tp.set(r,e)}let Ip={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Tp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||fE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function _1(r){Ip=r(Ip)}function v1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(ap(this),e,...t);return fE.set(n,e.sort?e.sort():[e]),Vi(n)}:m1().includes(r)?function(...e){return r.apply(ap(this),e),Vi(dE.get(this))}:function(...e){return Vi(r.apply(ap(this),e))}}function w1(r){return typeof r=="function"?v1(r):(r instanceof IDBTransaction&&y1(r),f1(r,p1())?new Proxy(r,Ip):r)}function Vi(r){if(r instanceof IDBRequest)return g1(r);if(op.has(r))return op.get(r);const e=w1(r);return e!==r&&(op.set(r,e),lm.set(e,r)),e}const ap=r=>lm.get(r);function E1(r,e,{blocked:t,upgrade:n,blocking:s,terminated:a}={}){const u=indexedDB.open(r,e),d=Vi(u);return n&&u.addEventListener("upgradeneeded",f=>{n(Vi(u.result),f.oldVersion,f.newVersion,Vi(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const T1=["get","getKey","getAll","getAllKeys","count"],I1=["put","add","delete","clear"],lp=new Map;function Z_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(lp.get(e))return lp.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=I1.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||T1.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return n&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return lp.set(e,a),a}_1(r=>({...r,get:(e,t,n)=>Z_(e,t)||r.get(e,t,n),has:(e,t)=>!!Z_(e,t)||r.has(e,t)}));class S1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A1(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function A1(r){const e=r.getComponent();return e?.type==="VERSION"}const Nh="@firebase/app",Sp="0.13.2";const Wr=new am("@firebase/app"),x1="@firebase/app-compat",P1="@firebase/analytics-compat",C1="@firebase/analytics",R1="@firebase/app-check-compat",D1="@firebase/app-check",N1="@firebase/auth",k1="@firebase/auth-compat",V1="@firebase/database",b1="@firebase/data-connect",j1="@firebase/database-compat",O1="@firebase/functions",L1="@firebase/functions-compat",F1="@firebase/installations",M1="@firebase/installations-compat",B1="@firebase/messaging",U1="@firebase/messaging-compat",z1="@firebase/performance",$1="@firebase/performance-compat",q1="@firebase/remote-config",K1="@firebase/remote-config-compat",W1="@firebase/storage",G1="@firebase/storage-compat",Q1="@firebase/firestore",H1="@firebase/ai",X1="@firebase/firestore-compat",Y1="firebase",J1="11.10.0";const Li="[DEFAULT]",Z1={[Nh]:"fire-core",[x1]:"fire-core-compat",[C1]:"fire-analytics",[P1]:"fire-analytics-compat",[D1]:"fire-app-check",[R1]:"fire-app-check-compat",[N1]:"fire-auth",[k1]:"fire-auth-compat",[V1]:"fire-rtdb",[b1]:"fire-data-connect",[j1]:"fire-rtdb-compat",[O1]:"fire-fn",[L1]:"fire-fn-compat",[F1]:"fire-iid",[M1]:"fire-iid-compat",[B1]:"fire-fcm",[U1]:"fire-fcm-compat",[z1]:"fire-perf",[$1]:"fire-perf-compat",[q1]:"fire-rc",[K1]:"fire-rc-compat",[W1]:"fire-gcs",[G1]:"fire-gcs-compat",[Q1]:"fire-fst",[X1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[Y1]:"fire-js-all"};const Fi=new Map,pa=new Map,ma=new Map;function cu(r,e){try{r.container.addComponent(e)}catch(t){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function pE(r,e){r.container.addOrOverwriteComponent(e)}function ga(r){const e=r.name;if(ma.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;ma.set(e,r);for(const t of Fi.values())cu(t,r);for(const t of pa.values())cu(t,r);return!0}function mE(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ex(r,e,t=Li){mE(r,e).clearInstance(t)}function gE(r){return r.options!==void 0}function yE(r){return r==null?!1:r.settings!==void 0}function tx(){ma.clear()}const nx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new Zh("app","Firebase",nx);let _E=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}};function ev(r,e){const t=nE(r.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,a=new Date().getTime();s-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class rx extends _E{constructor(e,t,n,s){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:n,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,u,s);else{const d=e;super(d.options,u,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._serverConfig.authIdToken&&ev(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ev(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Kr(Nh,Sp,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){hm(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Un.create("server-app-deleted")}}const um=J1;function cm(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Li,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Un.create("bad-app-name",{appName:String(s)});if(t||(t=iE()),!t)throw Un.create("no-options");const a=Fi.get(s);if(a){if(fa(t,a.options)&&fa(n,a.config))return a;throw Un.create("duplicate-app",{appName:s})}const u=new cE(s);for(const f of ma.values())u.addComponent(f);const d=new _E(t,n,u);return Fi.set(s,d),d}function ix(r,e){if(YA()&&!oE())throw Un.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let t;gE(r)?t=r.options:t=r;const n=Object.assign(Object.assign({},e),t);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;const s=m=>[...m].reduce((_,w)=>Math.imul(31,_)+w.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Un.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(n)),u=pa.get(a);if(u)return u.incRefCount(e.releaseOnDeref),u;const d=new cE(a);for(const m of ma.values())d.addComponent(m);const f=new rx(t,e,a,d);return pa.set(a,f),f}function sx(r=Li){const e=Fi.get(r);if(!e&&r===Li&&iE())return cm();if(!e)throw Un.create("no-app",{appName:r});return e}function ox(){return Array.from(Fi.values())}async function hm(r){let e=!1;const t=r.name;Fi.has(t)?(e=!0,Fi.delete(t)):pa.has(t)&&r.decRefCount()<=0&&(pa.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)}function Kr(r,e,t){var n;let s=(n=Z1[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(d.join(" "));return}ga(new zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function vE(r,e){if(r!==null&&typeof r!="function")throw Un.create("invalid-log-argument");d1(r,e)}function wE(r){h1(r)}const ax="firebase-heartbeat-database",lx=1,hu="firebase-heartbeat-store";let up=null;function EE(){return up||(up=E1(ax,lx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(hu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Un.create("idb-open",{originalErrorMessage:r.message})})),up}async function ux(r){try{const t=(await EE()).transaction(hu),n=await t.objectStore(hu).get(TE(r));return await t.done,n}catch(e){if(e instanceof Zs)Wr.warn(e.message);else{const t=Un.create("idb-get",{originalErrorMessage:e?.message});Wr.warn(t.message)}}}async function tv(r,e){try{const n=(await EE()).transaction(hu,"readwrite");await n.objectStore(hu).put(e,TE(r)),await n.done}catch(t){if(t instanceof Zs)Wr.warn(t.message);else{const n=Un.create("idb-set",{originalErrorMessage:t?.message});Wr.warn(n.message)}}}function TE(r){return`${r.name}!${r.options.appId}`}const cx=1024,hx=30;class dx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new px(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>hx){const u=mx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Wr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nv(),{heartbeatsToSend:n,unsentEntries:s}=fx(this._heartbeatsCache.heartbeats),a=Ch(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Wr.warn(t),""}}}function nv(){return new Date().toISOString().substring(0,10)}function fx(r,e=cx){const t=[];let n=r.slice();for(const s of r){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),rv(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rv(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class px{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uE()?JA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ux(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rv(r){return Ch(JSON.stringify({version:2,heartbeats:r})).length}function mx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function gx(r){ga(new zs("platform-logger",e=>new S1(e),"PRIVATE")),ga(new zs("heartbeat",e=>new dx(e),"PRIVATE")),Kr(Nh,Sp,r),Kr(Nh,Sp,"esm2017"),Kr("fire-js","")}gx("");const yx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Zs,SDK_VERSION:um,_DEFAULT_ENTRY_NAME:Li,_addComponent:cu,_addOrOverwriteComponent:pE,_apps:Fi,_clearComponents:tx,_components:ma,_getProvider:mE,_isFirebaseApp:gE,_isFirebaseServerApp:yE,_registerComponent:ga,_removeServiceInstance:ex,_serverApps:pa,deleteApp:hm,getApp:sx,getApps:ox,initializeApp:cm,initializeServerApp:ix,onLog:vE,registerVersion:Kr,setLogLevel:wE},Symbol.toStringTag,{value:"Module"}));class _x{constructor(e,t){this._delegate=e,this.firebase=t,cu(e,new zs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),hm(this._delegate)))}_getService(e,t=Li){var n;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((n=s.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Li){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){cu(this._delegate,e)}_addOrOverwriteComponent(e){pE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const vx={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},iv=new Zh("app-compat","Firebase",vx);function wx(r){const e={},t={__esModule:!0,initializeApp:a,app:s,registerVersion:Kr,setLogLevel:wE,onLog:vE,apps:null,SDK_VERSION:um,INTERNAL:{registerComponent:d,removeApp:n,useAsService:f,modularAPIs:yx}};t.default=t,Object.defineProperty(t,"apps",{get:u});function n(m){delete e[m]}function s(m){if(m=m||Li,!H_(e,m))throw iv.create("no-app",{appName:m});return e[m]}s.App=r;function a(m,_={}){const w=cm(m,_);if(H_(e,w.name))return e[w.name];const T=new r(w,t);return e[w.name]=T,T}function u(){return Object.keys(e).map(m=>e[m])}function d(m){const _=m.name,w=_.replace("-compat","");if(ga(m)&&m.type==="PUBLIC"){const T=(P=s())=>{if(typeof P[w]!="function")throw iv.create("invalid-app-argument",{appName:_});return P[w]()};m.serviceProps!==void 0&&Rh(T,m.serviceProps),t[w]=T,r.prototype[w]=function(...P){return this._getService.bind(this,_).apply(this,m.multipleInstances?P:[])}}return m.type==="PUBLIC"?t[w]:null}function f(m,_){return _==="serverAuth"?null:_}return t}function IE(){const r=wx(_x);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:IE,extendNamespace:e,createSubscribe:n1,ErrorFactory:Zh,deepExtend:Rh});function e(t){Rh(r,t)}return r}const Ex=IE();const sv=new am("@firebase/app-compat"),Tx="@firebase/app-compat",Ix="0.4.2";function Sx(r){Kr(Tx,Ix,r)}try{const r=im();if(r.firebase!==void 0){sv.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&sv.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const kh=Ex;Sx();var Ax="firebase",xx="11.10.0";kh.registerVersion(Ax,xx,"app-compat");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bi,SE;(function(){var r;function e(k,A){function R(){}R.prototype=A.prototype,k.D=A.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(V,O,M){for(var C=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)C[ut-2]=arguments[ut];return A.prototype[O].apply(V,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,A,R){R||(R=0);var V=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)V[O]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(O=0;16>O;++O)V[O]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=k.g[0],R=k.g[1],O=k.g[2];var M=k.g[3],C=A+(M^R&(O^M))+V[0]+3614090360&4294967295;A=R+(C<<7&4294967295|C>>>25),C=M+(O^A&(R^O))+V[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=O+(R^M&(A^R))+V[2]+606105819&4294967295,O=M+(C<<17&4294967295|C>>>15),C=R+(A^O&(M^A))+V[3]+3250441966&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(M^R&(O^M))+V[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(O^A&(R^O))+V[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=O+(R^M&(A^R))+V[6]+2821735955&4294967295,O=M+(C<<17&4294967295|C>>>15),C=R+(A^O&(M^A))+V[7]+4249261313&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(M^R&(O^M))+V[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(O^A&(R^O))+V[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=O+(R^M&(A^R))+V[10]+4294925233&4294967295,O=M+(C<<17&4294967295|C>>>15),C=R+(A^O&(M^A))+V[11]+2304563134&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(M^R&(O^M))+V[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(O^A&(R^O))+V[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=O+(R^M&(A^R))+V[14]+2792965006&4294967295,O=M+(C<<17&4294967295|C>>>15),C=R+(A^O&(M^A))+V[15]+1236535329&4294967295,R=O+(C<<22&4294967295|C>>>10),C=A+(O^M&(R^O))+V[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^O&(A^R))+V[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(M^A))+V[11]+643717713&4294967295,O=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(O^M))+V[0]+3921069994&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^M&(R^O))+V[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^O&(A^R))+V[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(M^A))+V[15]+3634488961&4294967295,O=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(O^M))+V[4]+3889429448&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^M&(R^O))+V[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^O&(A^R))+V[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(M^A))+V[3]+4107603335&4294967295,O=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(O^M))+V[8]+1163531501&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(O^M&(R^O))+V[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^O&(A^R))+V[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=O+(A^R&(M^A))+V[7]+1735328473&4294967295,O=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(O^M))+V[12]+2368359562&4294967295,R=O+(C<<20&4294967295|C>>>12),C=A+(R^O^M)+V[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^O)+V[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=O+(M^A^R)+V[11]+1839030562&4294967295,O=M+(C<<16&4294967295|C>>>16),C=R+(O^M^A)+V[14]+4259657740&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^M)+V[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^O)+V[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=O+(M^A^R)+V[7]+4139469664&4294967295,O=M+(C<<16&4294967295|C>>>16),C=R+(O^M^A)+V[10]+3200236656&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^M)+V[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^O)+V[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=O+(M^A^R)+V[3]+3572445317&4294967295,O=M+(C<<16&4294967295|C>>>16),C=R+(O^M^A)+V[6]+76029189&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(R^O^M)+V[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^O)+V[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=O+(M^A^R)+V[15]+530742520&4294967295,O=M+(C<<16&4294967295|C>>>16),C=R+(O^M^A)+V[2]+3299628645&4294967295,R=O+(C<<23&4294967295|C>>>9),C=A+(O^(R|~M))+V[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~O))+V[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=O+(A^(M|~R))+V[14]+2878612391&4294967295,O=M+(C<<15&4294967295|C>>>17),C=R+(M^(O|~A))+V[5]+4237533241&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~M))+V[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~O))+V[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=O+(A^(M|~R))+V[10]+4293915773&4294967295,O=M+(C<<15&4294967295|C>>>17),C=R+(M^(O|~A))+V[1]+2240044497&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~M))+V[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~O))+V[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=O+(A^(M|~R))+V[6]+2734768916&4294967295,O=M+(C<<15&4294967295|C>>>17),C=R+(M^(O|~A))+V[13]+1309151649&4294967295,R=O+(C<<21&4294967295|C>>>11),C=A+(O^(R|~M))+V[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~O))+V[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=O+(A^(M|~R))+V[2]+718787259&4294967295,O=M+(C<<15&4294967295|C>>>17),C=R+(M^(O|~A))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+M&4294967295}n.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var R=A-this.blockSize,V=this.B,O=this.h,M=0;M<A;){if(O==0)for(;M<=R;)s(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<A;)if(V[O++]=k.charCodeAt(M++),O==this.blockSize){s(this,V),O=0;break}}else for(;M<A;)if(V[O++]=k[M++],O==this.blockSize){s(this,V),O=0;break}}this.h=O,this.o+=A},n.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var R=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=R&255,R/=256;for(this.u(k),k=Array(16),A=R=0;4>A;++A)for(var V=0;32>V;V+=8)k[R++]=this.g[A]>>>V&255;return k};function a(k,A){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=A(k)}function u(k,A){this.h=A;for(var R=[],V=!0,O=k.length-1;0<=O;O--){var M=k[O]|0;V&&M==A||(R[O]=M,V=!1)}this.g=R}var d={};function f(k){return-128<=k&&128>k?a(k,function(A){return new u([A|0],0>A?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return N(m(-k));for(var A=[],R=1,V=0;k>=R;V++)A[V]=k/R|0,R*=4294967296;return new u(A,0)}function _(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return N(_(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(A,8)),V=w,O=0;O<k.length;O+=8){var M=Math.min(8,k.length-O),C=parseInt(k.substring(O,O+M),A);8>M?(M=m(Math.pow(A,M)),V=V.j(M).add(m(C))):(V=V.j(R),V=V.add(m(C)))}return V}var w=f(0),T=f(1),P=f(16777216);r=u.prototype,r.m=function(){if(j(this))return-N(this).m();for(var k=0,A=1,R=0;R<this.g.length;R++){var V=this.i(R);k+=(0<=V?V:4294967296+V)*A,A*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(L(this))return"0";if(j(this))return"-"+N(this).toString(k);for(var A=m(Math.pow(k,6)),R=this,V="";;){var O=X(R,A).g;R=Y(R,O.j(A));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=O,L(R))return M+V;for(;6>M.length;)M="0"+M;V=M+V}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function L(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function j(k){return k.h==-1}r.l=function(k){return k=Y(this,k),j(k)?-1:L(k)?0:1};function N(k){for(var A=k.g.length,R=[],V=0;V<A;V++)R[V]=~k.g[V];return new u(R,~k.h).add(T)}r.abs=function(){return j(this)?N(this):this},r.add=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],V=0,O=0;O<=A;O++){var M=V+(this.i(O)&65535)+(k.i(O)&65535),C=(M>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);V=C>>>16,M&=65535,C&=65535,R[O]=C<<16|M}return new u(R,R[R.length-1]&-2147483648?-1:0)};function Y(k,A){return k.add(N(A))}r.j=function(k){if(L(this)||L(k))return w;if(j(this))return j(k)?N(this).j(N(k)):N(N(this).j(k));if(j(k))return N(this.j(N(k)));if(0>this.l(P)&&0>k.l(P))return m(this.m()*k.m());for(var A=this.g.length+k.g.length,R=[],V=0;V<2*A;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var O=0;O<k.g.length;O++){var M=this.i(V)>>>16,C=this.i(V)&65535,ut=k.i(O)>>>16,ye=k.i(O)&65535;R[2*V+2*O]+=C*ye,Q(R,2*V+2*O),R[2*V+2*O+1]+=M*ye,Q(R,2*V+2*O+1),R[2*V+2*O+1]+=C*ut,Q(R,2*V+2*O+1),R[2*V+2*O+2]+=M*ut,Q(R,2*V+2*O+2)}for(V=0;V<A;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=A;V<2*A;V++)R[V]=0;return new u(R,0)};function Q(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function G(k,A){this.g=k,this.h=A}function X(k,A){if(L(A))throw Error("division by zero");if(L(k))return new G(w,w);if(j(k))return A=X(N(k),A),new G(N(A.g),N(A.h));if(j(A))return A=X(k,N(A)),new G(N(A.g),A.h);if(30<k.g.length){if(j(k)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=A;0>=V.l(k);)R=pe(R),V=pe(V);var O=Ee(R,1),M=Ee(V,1);for(V=Ee(V,2),R=Ee(R,2);!L(V);){var C=M.add(V);0>=C.l(k)&&(O=O.add(R),M=C),V=Ee(V,1),R=Ee(R,1)}return A=Y(k,O.j(A)),new G(O,A)}for(O=w;0<=k.l(A);){for(R=Math.max(1,Math.floor(k.m()/A.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),M=m(R),C=M.j(A);j(C)||0<C.l(k);)R-=V,M=m(R),C=M.j(A);L(M)&&(M=T),O=O.add(M),k=Y(k,C)}return new G(O,k)}r.A=function(k){return X(this,k).h},r.and=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)&k.i(V);return new u(R,this.h&k.h)},r.or=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)|k.i(V);return new u(R,this.h|k.h)},r.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),R=[],V=0;V<A;V++)R[V]=this.i(V)^k.i(V);return new u(R,this.h^k.h)};function pe(k){for(var A=k.g.length+1,R=[],V=0;V<A;V++)R[V]=k.i(V)<<1|k.i(V-1)>>>31;return new u(R,k.h)}function Ee(k,A){var R=A>>5;A%=32;for(var V=k.g.length-R,O=[],M=0;M<V;M++)O[M]=0<A?k.i(M+R)>>>A|k.i(M+R+1)<<32-A:k.i(M+R);return new u(O,k.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,SE=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,bi=u}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AE,Gl,xE,mh,Ap,PE,CE,RE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var n=t(this);function s(c,g){if(g)e:{var v=n;c=c.split(".");for(var S=0;S<c.length-1;S++){var U=c[S];if(!(U in v))break e;v=v[U]}c=c[c.length-1],S=v[c],g=g(S),g!=S&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,S=!1,U={next:function(){if(!S&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function T(c,g,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function P(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function L(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,U,W){for(var oe=Array(arguments.length-2),We=2;We<arguments.length;We++)oe[We-2]=arguments[We];return g.prototype[U].apply(S,oe)}}function j(c){const g=c.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=c[S];return v}return[]}function N(c,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(f(S)){const U=c.length||0,W=S.length||0;c.length=U+W;for(let oe=0;oe<W;oe++)c[U+oe]=S[oe]}else c.push(S)}}class Y{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var pe=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Ee(c,g,v){for(const S in c)g.call(v,c[S],S,c)}function k(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function A(c){const g={};for(const v in c)g[v]=c[v];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,g){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)c[v]=S[v];for(let W=0;W<R.length;W++)v=R[W],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function O(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function M(c){d.setTimeout(()=>{throw c},0)}function C(){var c=_e;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ut{constructor(){this.h=this.g=null}add(g,v){const S=ye.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ye=new Y(()=>new fe,c=>c.reset());class fe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ie=!1,_e=new ut,ce=()=>{const c=d.Promise.resolve(void 0);le=()=>{c.then(F)}};var F=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){M(v)}var g=ye;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var De=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,g),d.removeEventListener("test",v,g)}catch{}return c})();function Ne(c,g){if(Se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(pe){e:{try{X(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}L(Ne,Se);var Le={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Xe(c,g,v,S,U){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=U,this.key=++qe,this.da=this.fa=!1}function Nt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xr(c){this.src=c,this.g={},this.h=0}xr.prototype.add=function(c,g,v,S,U){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var oe=Zr(c,g,S,U);return-1<oe?(g=c[oe],v||(g.fa=!1)):(g=new Xe(g,this.src,W,!!S,U),g.fa=v,c.push(g)),g};function io(c,g){var v=g.type;if(v in c.g){var S=c.g[v],U=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=U)&&Array.prototype.splice.call(S,U,1),W&&(Nt(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Zr(c,g,v,S){for(var U=0;U<c.length;++U){var W=c[U];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return U}return-1}var ts="closure_lm_"+(1e6*Math.random()|0),so={};function Wa(c,g,v,S,U){if(Array.isArray(g)){for(var W=0;W<g.length;W++)Wa(c,g[W],v,S,U);return null}return v=Ha(v),c&&c[$e]?c.K(g,v,m(S)?!!S.capture:!1,U):Ga(c,g,v,!1,S,U)}function Ga(c,g,v,S,U,W){if(!g)throw Error("Invalid event type");var oe=m(U)?!!U.capture:!!U,We=ao(c);if(We||(c[ts]=We=new xr(c)),v=We.add(g,v,S,oe,W),v.proxy)return v;if(S=Wu(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)De||(U=oe),U===void 0&&(U=!1),c.addEventListener(g.toString(),S,U);else if(c.attachEvent)c.attachEvent(Cr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wu(){function c(v){return g.call(c.src,c.listener,v)}const g=Qa;return c}function oo(c,g,v,S,U){if(Array.isArray(g))for(var W=0;W<g.length;W++)oo(c,g[W],v,S,U);else S=m(S)?!!S.capture:!!S,v=Ha(v),c&&c[$e]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=Zr(W,v,S,U),-1<v&&(Nt(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=ao(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Zr(g,v,S,U)),(v=-1<c?g[c]:null)&&Pr(v))}function Pr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[$e])io(g.i,c);else{var v=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(v,S,c.capture):g.detachEvent?g.detachEvent(Cr(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=ao(g))?(io(v,c),v.h==0&&(v.src=null,g[ts]=null)):Nt(c)}}}function Cr(c){return c in so?so[c]:so[c]="on"+c}function Qa(c,g){if(c.da)c=!0;else{g=new Ne(g,this);var v=c.listener,S=c.ha||c.src;c.fa&&Pr(c),c=v.call(S,g)}return c}function ao(c){return c=c[ts],c instanceof xr?c:null}var lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ha(c){return typeof c=="function"?c:(c[lo]||(c[lo]=function(g){return c.handleEvent(g)}),c[lo])}function At(){J.call(this),this.i=new xr(this),this.M=this,this.F=null}L(At,J),At.prototype[$e]=!0,At.prototype.removeEventListener=function(c,g,v,S){oo(this,c,g,v,S)};function xt(c,g){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new Se(g,c);else if(g instanceof Se)g.target=g.target||c;else{var U=g;g=new Se(S,c),V(g,U)}if(U=!0,v)for(var W=v.length-1;0<=W;W--){var oe=g.g=v[W];U=Rr(oe,S,!0,g)&&U}if(oe=g.g=c,U=Rr(oe,S,!0,g)&&U,U=Rr(oe,S,!1,g)&&U,v)for(W=0;W<v.length;W++)oe=g.g=v[W],U=Rr(oe,S,!1,g)&&U}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],S=0;S<v.length;S++)Nt(v[S]);delete c.g[g],c.h--}}this.F=null},At.prototype.K=function(c,g,v,S){return this.i.add(String(c),g,!1,v,S)},At.prototype.L=function(c,g,v,S){return this.i.add(String(c),g,!0,v,S)};function Rr(c,g,v,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,W=0;W<g.length;++W){var oe=g[W];if(oe&&!oe.da&&oe.capture==v){var We=oe.listener,Pt=oe.ha||oe.src;oe.fa&&io(c.i,oe),U=We.call(Pt,S)!==!1&&U}}return U&&!S.defaultPrevented}function Xa(c,g,v){if(typeof c=="function")v&&(c=T(c,v));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function ei(c){c.g=Xa(()=>{c.g=null,c.i&&(c.i=!1,ei(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ns extends J{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ei(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(c){J.call(this),this.h=c,this.g={}}L(rs,J);var Ya=[];function Ja(c){Ee(c.g,function(g,v){this.g.hasOwnProperty(v)&&Pr(g)},c),c.g={}}rs.prototype.N=function(){rs.aa.N.call(this),Ja(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Za=d.JSON.stringify,el=d.JSON.parse,tl=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function is(){}is.prototype.h=null;function uo(c){return c.h||(c.h=c.i())}function co(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){Se.call(this,"d")}L(ar,Se);function ho(){Se.call(this,"c")}L(ho,Se);var lr={},nl=null;function ss(){return nl=nl||new At}lr.La="serverreachability";function rl(c){Se.call(this,lr.La,c)}L(rl,Se);function Dr(c){const g=ss();xt(g,new rl(g))}lr.STAT_EVENT="statevent";function il(c,g){Se.call(this,lr.STAT_EVENT,c),this.stat=g}L(il,Se);function mt(c){const g=ss();xt(g,new il(g,c))}lr.Ma="timingevent";function fo(c,g){Se.call(this,lr.Ma,c),this.size=g}L(fo,Se);function $n(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function os(){this.g=!0}os.prototype.xa=function(){this.g=!1};function as(c,g,v,S,U,W){c.info(function(){if(c.g)if(W)for(var oe="",We=W.split("&"),Pt=0;Pt<We.length;Pt++){var Fe=We[Pt].split("=");if(1<Fe.length){var kt=Fe[0];Fe=Fe[1];var wt=kt.split("_");oe=2<=wt.length&&wt[1]=="type"?oe+(kt+"="+Fe+"&"):oe+(kt+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+g+`
`+v+`
`+oe})}function po(c,g,v,S,U,W,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+g+`
`+v+`
`+W+" "+oe})}function qn(c,g,v,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+xd(c,v)+(S?" "+S:"")})}function sl(c,g){c.info(function(){return"TIMEOUT: "+g})}os.prototype.info=function(){};function xd(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<U.length;oe++)U[oe]=""}}}}return Za(v)}catch{return g}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function ls(){}L(ls,is),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Kn=new ls;function Wn(c,g,v,S){this.j=c,this.i=g,this.l=v,this.R=S||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qu}function Qu(){this.i=null,this.g="",this.h=!1}var ol={},go={};function yo(c,g,v){c.L=1,c.v=si(En(g)),c.m=v,c.P=!0,al(c,null)}function al(c,g){c.F=Date.now(),Ye(c),c.A=En(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ai(v.i,"t",S),c.C=0,v=c.j.J,c.h=new Qu,c.g=dc(c.j,v?g:null,!c.m),0<c.O&&(c.M=new ns(T(c.Y,c,c.g),c.O)),g=c.U,v=c.g,S=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ya[0]=U.toString()),U=Ya);for(var W=0;W<U.length;W++){var oe=Wa(v,U[W],S||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Dr(),as(c.i,c.u,c.A,c.l,c.R,c.m)}Wn.prototype.ca=function(c){c=c.target;const g=this.M;g&&cn(c)==3?g.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{const wt=cn(this.g);var g=this.g.Ba();const Vn=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||fl(this.g)))){this.J||wt!=4||g==7||(g==8||0>=Vn?Dr(3):Dr(2)),us(this);var v=this.g.Z();this.X=v;t:if(Hu(this)){var S=fl(this.g);c="";var U=S.length,W=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),ti(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==U-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,po(this.i,this.u,this.A,this.l,this.R,wt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Pt=this.g;if((We=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(We)){var Fe=We;break t}}Fe=null}if(v=Fe)qn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,v);else{this.o=!1,this.s=3,mt(12),Nn(this),ti(this);break e}}if(this.P){v=!0;let In;for(;!this.J&&this.C<oe.length;)if(In=Pd(this,oe),In==go){wt==4&&(this.s=4,mt(14),v=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(In==ol){this.s=4,mt(15),qn(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else qn(this.i,this.l,In,null),ll(this,In);if(Hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||oe.length!=0||this.h.h||(this.s=1,mt(16),v=!1),this.o=this.o&&v,!v)qn(this.i,this.l,oe,"[Invalid Chunked Response]"),Nn(this),ti(this);else if(0<oe.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ml(kt),kt.M=!0,mt(11))}}else qn(this.i,this.l,oe,null),ll(this,oe);wt==4&&Nn(this),this.o&&!this.J&&(wt==4?Co(this.j,this):(this.o=!1,Ye(this)))}else Io(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Nn(this),ti(this)}}}catch{}finally{}};function Hu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Pd(c,g){var v=c.C,S=g.indexOf(`
`,v);return S==-1?go:(v=Number(g.substring(v,S)),isNaN(v)?ol:(S+=1,S+v>g.length?go:(g=g.slice(S,S+v),c.C=S+v,g)))}Wn.prototype.cancel=function(){this.J=!0,Nn(this)};function Ye(c){c.S=Date.now()+c.I,Xu(c,c.I)}function Xu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=$n(T(c.ba,c),g)}function us(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Wn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(sl(this.i,this.A),this.L!=2&&(Dr(),mt(17)),Nn(this),this.s=2,ti(this)):Xu(this,this.S-c)};function ti(c){c.j.G==0||c.J||Co(c.j,c)}function Nn(c){us(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ja(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ll(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||en(v.h,c))){if(!c.K&&en(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Po(v),Yn(v);else break e;xo(v),mt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=$n(T(v.Za,v),6e3));if(1>=Ju(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else jr(v,11)}else if((c.K||v.g==c)&&Po(v),!Q(g))for(U=v.Da.g.parse(g),g=0;g<U.length;g++){let Fe=U[g];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const kt=Fe[3];kt!=null&&(v.la=kt,v.j.info("VER="+v.la));const wt=Fe[4];wt!=null&&(v.Aa=wt,v.j.info("SVER="+v.Aa));const Vn=Fe[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(S=1.5*Vn,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const In=c.g;if(In){const gs=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var W=S.h;W.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ul(W,W.h),W.h=null))}if(S.D){const Do=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(S.ya=Do,He(S.I,S.D,Do))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var oe=c;if(S.qa=hc(S,S.J?S.ia:null,S.W),oe.K){Zu(S.h,oe);var We=oe,Pt=S.L;Pt&&(We.I=Pt),We.B&&(us(We),Ye(We)),S.g=oe}else ms(S);0<v.i.length&&dr(v)}else Fe[0]!="stop"&&Fe[0]!="close"||jr(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?jr(v,7):Mt(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}Dr(4)}catch{}}var Yu=class{constructor(c,g){this.g=c,this.map=g}};function cs(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ju(c){return c.h?1:c.g?c.g.size:0}function en(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ul(c,g){c.g?c.g.add(g):c.h=g}function Zu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}cs.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ec(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return j(c.i)}function _o(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,S=0;S<v;S++)g.push(c[S]);return g}g=[],v=0;for(S in c)g[v++]=c[S];return g}function vo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const S in c)g[v++]=S;return g}}}function ni(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=vo(c),S=_o(c),U=S.length,W=0;W<U;W++)g.call(void 0,S[W],v&&v[W],c)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),U=null;if(0<=S){var W=c[v].substring(0,S);U=c[v].substring(S+1)}else W=c[v];g(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Nr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nr){this.h=c.h,ds(this,c.j),this.o=c.o,this.g=c.g,ri(this,c.s),this.l=c.l;var g=c.i,v=new ur;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ii(this,v),this.m=c.m}else c&&(g=String(c).match(hs))?(this.h=!1,ds(this,g[1]||"",!0),this.o=je(g[2]||""),this.g=je(g[3]||"",!0),ri(this,g[4]),this.l=je(g[5]||"",!0),ii(this,g[6]||"",!0),this.m=je(g[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}Nr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(oi(g,wo,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(oi(g,wo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(oi(v,v.charAt(0)=="/"?rc:nc,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",oi(v,cl)),c.join("")};function En(c){return new Nr(c)}function ds(c,g,v){c.j=v?je(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ri(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ii(c,g,v){g instanceof ur?(c.i=g,cr(c.i,c.h)):(v||(g=oi(g,ic)),c.i=new ur(g,c.h))}function He(c,g,v){c.i.set(g,v)}function si(c){return He(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function je(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oi(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,tc),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wo=/[#\/\?@]/g,nc=/[#\?:]/g,rc=/[#\?]/g,ic=/[#\?@]/g,cl=/#/g;function ur(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ft(c){c.g||(c.g=new Map,c.h=0,c.i&&Cd(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=ur.prototype,r.add=function(c,g){Ft(this),this.i=null,c=kn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Gn(c,g){Ft(c),g=kn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Qn(c,g){return Ft(c),g=kn(c,g),c.g.has(g)}r.forEach=function(c,g){Ft(this),this.g.forEach(function(v,S){v.forEach(function(U){c.call(g,U,S,this)},this)},this)},r.na=function(){Ft(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const U=c[S];for(let W=0;W<U.length;W++)v.push(g[S])}return v},r.V=function(c){Ft(this);let g=[];if(typeof c=="string")Qn(this,c)&&(g=g.concat(this.g.get(kn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},r.set=function(c,g){return Ft(this),this.i=null,c=kn(this,c),Qn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ai(c,g,v){Gn(c,g),0<v.length&&(c.i=null,c.g.set(kn(c,g),j(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const W=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var U=W;oe[S]!==""&&(U+="="+encodeURIComponent(String(oe[S]))),c.push(U)}}return this.i=c.join("&")};function kn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function cr(c,g){g&&!c.j&&(Ft(c),c.i=null,c.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(Gn(this,S),ai(this,U,v))},c)),c.j=g}function Rd(c,g){const v=new os;if(d.Image){const S=new Image;S.onload=P(un,v,"TestLoadImage: loaded",!0,g,S),S.onerror=P(un,v,"TestLoadImage: error",!1,g,S),S.onabort=P(un,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=P(un,v,"TestLoadImage: timeout",!1,g,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function sc(c,g){const v=new os,S=new AbortController,U=setTimeout(()=>{S.abort(),un(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(U),W.ok?un(v,"TestPingServer: ok",!0,g):un(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),un(v,"TestPingServer: error",!1,g)})}function un(c,g,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Dd(){this.g=new tl}function oc(c,g,v){const S=v||"";try{ni(c,function(U,W){let oe=U;m(U)&&(oe=Za(U)),g.push(S+W+"="+encodeURIComponent(oe))})}catch(U){throw g.push(S+"type="+encodeURIComponent("_badmap")),U}}function kr(c){this.l=c.Ub||null,this.j=c.eb||!1}L(kr,is),kr.prototype.g=function(){return new fs(this.l,this.j)},kr.prototype.i=(function(c){return function(){return c}})({});function fs(c,g){At.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(fs,At),r=fs.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Xn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ac(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ac(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Hn(this):Xn(this),this.readyState==3&&ac(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Hn(this))},r.Qa=function(c){this.g&&(this.response=c,Hn(this))},r.ga=function(){this.g&&Hn(this)};function Hn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Vr(c){let g="";return Ee(c,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function li(c,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Vr(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):He(c,g,v))}function it(c){At.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(it,At);var Nd=/^https?$/i,hl=["POST","PUT"];r=it.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?uo(this.o):uo(Kn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){ps(this,W);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(hl,g,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of v)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ps(this,W)}};function ps(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Eo(c),Tn(c)}function Eo(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),Tn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),it.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?dl(this):this.bb())},r.bb=function(){dl(this)};function dl(c){if(c.h&&typeof u<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)Xa(c.Ea,0,c);else if(xt(c,"readystatechange"),cn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=oe===0){var U=String(c.D).match(hs)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),S=!Nd.test(U?U.toLowerCase():"")}v=S}if(v)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var W=2<cn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Eo(c)}}finally{Tn(c)}}}}function Tn(c,g){if(c.g){To(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||xt(c,"ready");try{v.onreadystatechange=S}catch{}}}function To(c){c.I&&(d.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),el(g)}};function fl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(c){const g={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(Q(c[S]))continue;var v=O(c[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[U]||[];g[U]=W,W.push(v)}k(g,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function pl(c){this.Aa=0,this.i=[],this.j=new os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hr("baseRetryDelayMs",5e3,c),this.cb=hr("retryDelaySeedMs",1e4,c),this.Wa=hr("forwardChannelMaxRetries",2,c),this.wa=hr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(c&&c.concurrentRequestLimit),this.Da=new Dd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pl.prototype,r.la=8,r.G=1,r.connect=function(c,g,v,S){mt(0),this.W=c,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=hc(this,null,this.W),dr(this)};function Mt(c){if(So(c),c.G==3){var g=c.U++,v=En(c.I);if(He(v,"SID",c.K),He(v,"RID",g),He(v,"TYPE","terminate"),br(c,v),g=new Wn(c,c.j,g),g.L=2,g.v=si(En(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=g.v,v=!0),v||(g.g=dc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ye(g)}cc(c)}function Yn(c){c.g&&(ml(c),c.g.cancel(),c.g=null)}function So(c){Yn(c),c.u&&(d.clearTimeout(c.u),c.u=null),Po(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function dr(c){if(!wn(c.h)&&!c.s){c.s=!0;var g=c.Ga;le||ce(),ie||(le(),ie=!0),_e.add(g,c),c.B=0}}function kd(c,g){return Ju(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=$n(T(c.Ga,c,g),uc(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Wn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=A(W),V(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ui(this,U,g),v=En(this.I),He(v,"RID",c),He(v,"CVER",22),this.D&&He(v,"X-HTTP-Session-Id",this.D),br(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(Vr(W)))+"&"+g:this.m&&li(v,this.m,W)),ul(this.h,U),this.Ua&&He(v,"TYPE","init"),this.P?(He(v,"$req",g),He(v,"SID","null"),U.T=!0,yo(U,v,null)):yo(U,v,g),this.G=2}}else this.G==3&&(c?Ao(this,c):this.i.length==0||wn(this.h)||Ao(this))};function Ao(c,g){var v;g?v=g.l:v=c.U++;const S=En(c.I);He(S,"SID",c.K),He(S,"RID",v),He(S,"AID",c.T),br(c,S),c.m&&c.o&&li(S,c.m,c.o),v=new Wn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ui(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ul(c.h,v),yo(v,S,g)}function br(c,g){c.H&&Ee(c.H,function(v,S){He(g,S,v)}),c.l&&ni({},function(v,S){He(g,S,v)})}function ui(c,g,v){v=Math.min(c.i.length,v);var S=c.l?T(c.l.Na,c.l,c):null;e:{var U=c.i;let W=-1;for(;;){const oe=["count="+v];W==-1?0<v?(W=U[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let We=!0;for(let Pt=0;Pt<v;Pt++){let Fe=U[Pt].g;const kt=U[Pt].map;if(Fe-=W,0>Fe)W=Math.max(0,U[Pt].g-100),We=!1;else try{oc(kt,oe,"req"+Fe+"_")}catch{S&&S(kt)}}if(We){S=oe.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,S}function ms(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;le||ce(),ie||(le(),ie=!0),_e.add(g,c),c.v=0}}function xo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=$n(T(c.Fa,c),uc(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$n(T(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Yn(this),lc(this))};function ml(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function lc(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=En(c.qa);He(g,"RID","rpc"),He(g,"SID",c.K),He(g,"AID",c.T),He(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&He(g,"TO",c.ja),He(g,"TYPE","xmlhttp"),br(c,g),c.m&&c.o&&li(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=si(En(g)),v.m=null,v.P=!0,al(v,c)}r.Za=function(){this.C!=null&&(this.C=null,Yn(this),xo(this),mt(19))};function Po(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Co(c,g){var v=null;if(c.g==g){Po(c),ml(c),c.g=null;var S=2}else if(en(c.h,g))v=g.D,Zu(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;S=ss(),xt(S,new fo(S,v)),dr(c)}else ms(c);else if(U=g.s,U==3||U==0&&0<g.X||!(S==1&&kd(c,g)||S==2&&xo(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),U){case 1:jr(c,5);break;case 4:jr(c,10);break;case 3:jr(c,6);break;default:jr(c,2)}}}function uc(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function jr(c,g){if(c.j.info("Error code "+g),g==2){var v=T(c.fb,c),S=c.Xa;const U=!S;S=new Nr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ds(S,"https"),si(S),U?Rd(S.toString(),v):sc(S.toString(),v)}else mt(2);c.G=0,c.l&&c.l.sa(g),cc(c),So(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function cc(c){if(c.G=0,c.ka=[],c.l){const g=ec(c.h);(g.length!=0||c.i.length!=0)&&(N(c.ka,g),N(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function hc(c,g,v){var S=v instanceof Nr?En(v):new Nr(v);if(S.g!="")g&&(S.g=g+"."+S.g),ri(S,S.s);else{var U=d.location;S=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var W=new Nr(null);S&&ds(W,S),g&&(W.g=g),U&&ri(W,U),v&&(W.l=v),S=W}return v=c.D,g=c.ya,v&&g&&He(S,v,g),He(S,"VER",c.la),br(c,S),S}function dc(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new it(new kr({eb:v})):new it(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gl(){}r=gl.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ro(){}Ro.prototype.g=function(c,g){return new tn(c,g)};function tn(c,g){At.call(this),this.g=new pl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new fr(this)}L(tn,At),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Mt(this.g)},tn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Za(c),c=v);g.i.push(new Yu(g.Ya++,c)),g.G==3&&dr(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,tn.aa.N.call(this)};function fc(c){ar.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}L(fc,ar);function pc(){ho.call(this),this.status=1}L(pc,ho);function fr(c){this.g=c}L(fr,gl),fr.prototype.ua=function(){xt(this.g,"a")},fr.prototype.ta=function(c){xt(this.g,new fc(c))},fr.prototype.sa=function(c){xt(this.g,new pc)},fr.prototype.ra=function(){xt(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,RE=function(){return new Ro},CE=function(){return ss()},PE=lr,Ap={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,mh=mo,Gu.COMPLETE="complete",xE=Gu,co.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",At.prototype.listen=At.prototype.K,Gl=co,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,AE=it}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore",lv="4.8.0";class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");let Fa="11.10.0";const Mi=new am("@firebase/firestore");function sa(){return Mi.logLevel}function Px(r){Mi.setLogLevel(r)}function ee(r,...e){if(Mi.logLevel<=Oe.DEBUG){const t=e.map(dm);Mi.debug(`Firestore (${Fa}): ${r}`,...t)}}function yt(r,...e){if(Mi.logLevel<=Oe.ERROR){const t=e.map(dm);Mi.error(`Firestore (${Fa}): ${r}`,...t)}}function Cn(r,...e){if(Mi.logLevel<=Oe.WARN){const t=e.map(dm);Mi.warn(`Firestore (${Fa}): ${r}`,...t)}}function dm(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function he(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,DE(r,n,t)}function DE(r,e,t){let n=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw yt(n),new Error(n)}function ve(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||DE(e,s,n)}function Cx(r,e){r||he(57014,e)}function ue(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Zs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class NE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Lt.UNAUTHENTICATED)))}shutdown(){}}class Dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Nx{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let n=this.i;const s=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qt,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qt)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ve(typeof n.accessToken=="string",31837,{l:n}),new NE(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class kx{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vx{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new kx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const n=a=>{a.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const s=a=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}function fm(){return new TextEncoder}class pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=jx(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<t&&(n+=e.charAt(s[a]%62))}return n}}function Pe(r,e){return r<e?-1:r>e?1:0}function xp(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return Pe(n,s);{const a=fm(),u=Ox(a.encode(cv(r,t)),a.encode(cv(e,t)));return u!==0?u:Pe(n,s)}}t+=n>65535?2:1}return Pe(r.length,e.length)}function cv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Ox(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Pe(r[t],e[t]);return Pe(r.length,e.length)}function ya(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function kE(r){return r+"\0"}const hv="__name__";class _r{constructor(e,t,n){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&he(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=_r.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Pe(e.length,t.length)}static compareSegments(e,t){const n=_r.isNumericId(e),s=_r.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?_r.extractNumericId(e).compare(_r.extractNumericId(t)):xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class Ve extends _r{construct(e,t,n){return new Ve(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Z(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new Ve(t)}static emptyPath(){return new Ve([])}}const Lx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends _r{construct(e,t,n){return new at(e,t,n)}static isValidIdentifier(e){return Lx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hv}static keyField(){return new at([hv])}static fromServerFormat(e){const t=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Z(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Z(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Z(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(n+=d,s++):(a(),s++)}if(a(),u)throw new Z(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(t)}static emptyPath(){return new at([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ve.fromString(e))}static fromName(e){return new ae(Ve.fromString(e).popFirst(5))}static empty(){return new ae(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ve(e.slice()))}}function mm(r,e,t){if(!t)throw new Z(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function VE(r,e,t,n){if(e===!0&&n===!0)throw new Z(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dv(r){if(!ae.isDocumentKey(r))throw new Z(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function fv(r){if(ae.isDocumentKey(r))throw new Z(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ed(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":he(12329,{type:typeof r})}function ze(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Z(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ed(r);throw new Z(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function jE(r,e){if(e<=0)throw new Z(K.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function Nu(r,e){if(!bE(r))throw new Z(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const u=r[n];if(s&&typeof u!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new Z(K.INVALID_ARGUMENT,t);return!0}const pv=-62135596800,mv=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*mv);return new Ke(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pv)throw new Z(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:It("string",Ke._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ke(0,0))}static max(){return new Ie(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const _a=-1;class Vh{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function Pp(r){return r.fields.find((e=>e.kind===2))}function Ns(r){return r.fields.filter((e=>e.kind!==2))}Vh.UNKNOWN_ID=-1;class gh{constructor(e,t){this.fieldPath=e,this.kind=t}}class du{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new du(0,Rn.min())}}function OE(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(n===1e9?new Ke(t+1,0):new Ke(t,n));return new Rn(s,ae.empty(),e)}function LE(r){return new Rn(r.readTime,r.key,_a)}class Rn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rn(Ie.min(),ae.empty(),_a)}static max(){return new Rn(Ie.max(),ae.empty(),_a)}}function gm(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(r.documentKey,e.documentKey),t!==0?t:Pe(r.largestBatchId,e.largestBatchId))}const FE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ME{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qi(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==FE)throw r;ee("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B(((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):B.reject(t)}static resolve(e){return new B(((t,n)=>{t(e)}))}static reject(e){return new B(((t,n)=>{n(e)}))}static waitFor(e){return new B(((t,n)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>n(f)))})),u=!0,a===s&&t()}))}static or(e){let t=B.resolve(!1);for(const n of e)t=t.next((s=>s?B.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,a)=>{n.push(t.call(this,s,a))})),this.waitFor(n)}static mapArray(e,t){return new B(((n,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&n(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new B(((n,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):n()};a()}))}}const Pn="SimpleDb";class td{static open(e,t,n,s){try{return new td(t,e.transaction(s,n))}catch(a){throw new Zl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Zl(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=ym(n.target.error);this.S.reject(new Zl(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Mx(t)}}class Tr{static delete(e){return ee(Pn,"Removing database:",e),Vs(im().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!uE())return!1;if(Tr.F())return!0;const e=Dh(),t=Tr.M(e),n=0<t&&t<10,s=BE(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,Tr.M(Dh())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ee(Pn,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const u=a.target.result;t(u)},s.onblocked=()=>{n(new Zl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const u=a.target.error;u.name==="VersionError"?n(new Z(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new Z(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new Zl(e,u))},s.onupgradeneeded=a=>{ee(Pn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${u.version}`);this.B.q(u,s.transaction,a.oldVersion,this.version).next((()=>{ee(Pn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const n=t.target;this.L=n.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var n;t.newVersion===null&&(Cn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(n=this.databaseDeletedListener)===null||n===void 0||n.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,n,s){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const d=td.open(this.db,e,a?"readonly":"readwrite",n),f=s(d).next((m=>(d.v(),m))).catch((m=>(d.abort(m),B.reject(m)))).toPromise();return f.catch((()=>{})),await d.D,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&u<3;if(ee(Pn,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Fx{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Vs(this.$.delete())}}class Zl extends Z{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hi(r){return r.name==="IndexedDbTransactionError"}class Mx{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ee(Pn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ee(Pn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Vs(n)}add(e){return ee(Pn,"ADD",this.store.name,e,e),Vs(this.store.add(e))}get(e){return Vs(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Pn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Pn,"DELETE",this.store.name,e),Vs(this.store.delete(e))}count(){return ee(Pn,"COUNT",this.store.name),Vs(this.store.count())}j(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(n.range);return new B(((u,d)=>{a.onerror=f=>{d(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(n),u=[];return this.J(a,((d,f)=>{u.push(f)})).next((()=>u))}}H(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new B(((s,a)=>{n.onerror=u=>{a(u.target.error)},n.onsuccess=u=>{s(u.target.result)}}))}Y(e,t){ee(Pn,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Z=!1;const s=this.cursor(n);return this.J(s,((a,u,d)=>d.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.J(s,t)}ee(e){const t=this.cursor({});return new B(((n,s)=>{t.onerror=a=>{const u=ym(a.target.error);s(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((d=>{d?u.continue():n()})):n()}}))}J(e,t){const n=[];return new B(((s,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void s();const f=new Fx(d),m=t(d.primaryKey,d.value,f);if(m instanceof B){const _=m.catch((w=>(f.done(),B.reject(w))));n.push(_)}f.isDone?s():f.W===null?d.continue():d.continue(f.W)}})).next((()=>B.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vs(r){return new B(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=ym(n.target.error);t(s)}}))}let gv=!1;function ym(r){const e=Tr.M(Dh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gv||(gv=!0,setTimeout((()=>{throw n}),0)),n}}return r}const eu="IndexBackfiller";class Bx{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ee(eu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();ee(eu,`Documents written: ${t}`)}catch(t){Hi(t)?ee(eu,"Ignoring IndexedDB error during index backfill: ",t):await Qi(t)}await this.ne(6e4)}))}}class Ux{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const n=new Set;let s=t,a=!0;return B.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!n.has(u))return ee(eu,`Processing collection: ${u}`),this.se(e,u,s).next((d=>{s-=d,n.add(u)}));a=!1})))).next((()=>t-s))}se(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.oe(s,a))).next((d=>(ee(eu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>u.size))}))))}oe(e,t){let n=e;return t.changes.forEach(((s,a)=>{const u=LE(a);gm(u,n)>0&&(n=u)})),new Rn(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class yn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this._e(n),this.ae=n=>t.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yn.ue=-1;const ji=-1;function ku(r){return r==null}function fu(r){return r===0&&1/r==-1/0}function UE(r){return typeof r=="number"&&Number.isInteger(r)&&!fu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const bh="";function Jt(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=yv(e)),e=zx(r.get(t),e);return yv(e)}function zx(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const a=r.charAt(s);switch(a){case"\0":t+="";break;case bh:t+="";break;default:t+=a}}return t}function yv(r){return r+bh+""}function wr(r){const e=r.length;if(ve(e>=2,64408,{path:r}),e===2)return ve(r.charAt(0)===bh&&r.charAt(1)==="",56145,{path:r}),Ve.emptyPath();const t=e-2,n=[];let s="";for(let a=0;a<e;){const u=r.indexOf(bh,a);switch((u<0||u>t)&&he(50515,{path:r}),r.charAt(u+1)){case"":const d=r.substring(a,u);let f;s.length===0?f=d:(s+=d,f=s,s=""),n.push(f);break;case"":s+=r.substring(a,u),s+="\0";break;case"":s+=r.substring(a,u+1);break;default:he(61167,{path:r})}a=u+2}return new Ve(n)}const ks="remoteDocuments",Vu="owner",Yo="owner",pu="mutationQueues",$x="userId",ir="mutations",_v="batchId",Fs="userMutationsIndex",vv=["userId","batchId"];function yh(r,e){return[r,Jt(e)]}function zE(r,e,t){return[r,Jt(e),t]}const qx={},va="documentMutations",jh="remoteDocumentsV14",Kx=["prefixPath","collectionGroup","readTime","documentId"],_h="documentKeyIndex",Wx=["prefixPath","collectionGroup","documentId"],$E="collectionGroupIndex",Gx=["collectionGroup","readTime","prefixPath","documentId"],mu="remoteDocumentGlobal",Cp="remoteDocumentGlobalKey",wa="targets",qE="queryTargetsIndex",Qx=["canonicalId","targetId"],Ea="targetDocuments",Hx=["targetId","path"],_m="documentTargetsIndex",Xx=["path","targetId"],Oh="targetGlobalKey",Us="targetGlobal",gu="collectionParents",Yx=["collectionId","parent"],Ta="clientMetadata",Jx="clientId",nd="bundles",Zx="bundleId",rd="namedQueries",eP="name",vm="indexConfiguration",tP="indexId",Rp="collectionGroupIndex",nP="collectionGroup",tu="indexState",rP=["indexId","uid"],KE="sequenceNumberIndex",iP=["uid","sequenceNumber"],nu="indexEntries",sP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WE="documentKeyIndex",oP=["indexId","uid","orderedDocumentKey"],id="documentOverlays",aP=["userId","collectionPath","documentId"],Dp="collectionPathOverlayIndex",lP=["userId","collectionPath","largestBatchId"],GE="collectionGroupOverlayIndex",uP=["userId","collectionGroup","largestBatchId"],wm="globals",cP="name",QE=[pu,ir,va,ks,wa,Vu,Us,Ea,Ta,mu,gu,nd,rd],hP=[...QE,id],HE=[pu,ir,va,jh,wa,Vu,Us,Ea,Ta,mu,gu,nd,rd,id],XE=HE,Em=[...XE,vm,tu,nu],dP=Em,YE=[...Em,wm],fP=YE;class Np extends ME{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Dt(r,e){const t=ue(r);return Tr.N(t.ce,e)}function wv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function JE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class et{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,n,s,a){this.key=e,this.value=t,this.color=n??zt.RED,this.left=s??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,a){return new zt(e??this.key,t??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,n),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,n,s,a){return this}insert(e,t,n){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qe{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qe(this.comparator);return t.data=e,t}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jo(r){return r.hasNext()?r.getNext():void 0}class _n{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new _n([])}unionWith(e){let t=new Qe(at.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function pP(){return typeof atob<"u"}class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZE("Invalid base64 string: "+a):a}})(e);return new pt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const mP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(r){if(ve(!!r,39018),typeof r=="string"){let e=0;const t=mP.exec(r);if(ve(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ot(r.seconds),nanos:ot(r.nanos)}}function ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?pt.fromBase64String(r):pt.fromUint8Array(r)}const eT="server_timestamp",tT="__type__",nT="__previous_value__",rT="__local_write_time__";function sd(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tT])===null||t===void 0?void 0:t.stringValue)===eT}function od(r){const e=r.mapValue.fields[nT];return sd(e)?od(e):e}function yu(r){const e=Gr(r.mapValue.fields[rT].timestampValue);return new Ke(e.seconds,e.nanos)}class gP{constructor(e,t,n,s,a,u,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const kp="(default)";class Bi{constructor(e,t){this.projectId=e,this.database=t||kp}static empty(){return new Bi("","")}get isDefaultDatabase(){return this.database===kp}isEqual(e){return e instanceof Bi&&e.projectId===this.projectId&&e.database===this.database}}const Tm="__type__",iT="__max__",Di={mapValue:{fields:{__type__:{stringValue:iT}}}},Im="__vector__",Ia="value",vh={nullValue:"NULL_VALUE"};function Ui(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?sd(r)?4:sT(r)?9007199254740991:ad(r)?10:11:he(28295,{value:r})}function Ar(r,e){if(r===e)return!0;const t=Ui(r);if(t!==Ui(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yu(r).isEqual(yu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Gr(s.timestampValue),d=Gr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,a){return Qr(s.bytesValue).isEqual(Qr(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,a){return ot(s.geoPointValue.latitude)===ot(a.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(a.geoPointValue.longitude)})(r,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ot(s.integerValue)===ot(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=ot(s.doubleValue),d=ot(a.doubleValue);return u===d?fu(u)===fu(d):isNaN(u)&&isNaN(d)}return!1})(r,e);case 9:return ya(r.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(wv(u)!==wv(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Ar(u[f],d[f])))return!1;return!0})(r,e);default:return he(52216,{left:r})}}function _u(r,e){return(r.values||[]).find((t=>Ar(t,e)))!==void 0}function zi(r,e){if(r===e)return 0;const t=Ui(r),n=Ui(e);if(t!==n)return Pe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=ot(a.integerValue||a.doubleValue),f=ot(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(r,e);case 3:return Tv(r.timestampValue,e.timestampValue);case 4:return Tv(yu(r),yu(e));case 5:return xp(r.stringValue,e.stringValue);case 6:return(function(a,u){const d=Qr(a),f=Qr(u);return d.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=Pe(d[m],f[m]);if(_!==0)return _}return Pe(d.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Pe(ot(a.latitude),ot(u.latitude));return d!==0?d:Pe(ot(a.longitude),ot(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Iv(r.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const w=a.fields||{},T=u.fields||{},P=(d=w[Ia])===null||d===void 0?void 0:d.arrayValue,L=(f=T[Ia])===null||f===void 0?void 0:f.arrayValue,j=Pe(((m=P?.values)===null||m===void 0?void 0:m.length)||0,((_=L?.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:Iv(P,L)})(r.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Di.mapValue&&u===Di.mapValue)return 0;if(a===Di.mapValue)return 1;if(u===Di.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const T=xp(f[w],_[w]);if(T!==0)return T;const P=zi(d[f[w]],m[_[w]]);if(P!==0)return P}return Pe(f.length,_.length)})(r.mapValue,e.mapValue);default:throw he(23264,{le:t})}}function Tv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pe(r,e);const t=Gr(r),n=Gr(e),s=Pe(t.seconds,n.seconds);return s!==0?s:Pe(t.nanos,n.nanos)}function Iv(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const a=zi(t[s],n[s]);if(a)return a}return Pe(t.length,n.length)}function Sa(r){return Vp(r)}function Vp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Gr(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Qr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ae.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const a of t.values||[])s?s=!1:n+=",",n+=Vp(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of n)a?a=!1:s+=",",s+=`${u}:${Vp(t.fields[u])}`;return s+"}"})(r.mapValue):he(61005,{value:r})}function wh(r){switch(Ui(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(r);return e?16+wh(e):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,a)=>s+wh(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Xi(n.fields,((a,u)=>{s+=a.length+wh(u)})),s})(r.mapValue);default:throw he(13486,{value:r})}}function $s(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function bp(r){return!!r&&"integerValue"in r}function vu(r){return!!r&&"arrayValue"in r}function Sv(r){return!!r&&"nullValue"in r}function Av(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Eh(r){return!!r&&"mapValue"in r}function ad(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tm])===null||t===void 0?void 0:t.stringValue)===Im}function ru(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Xi(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ru(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(r.arrayValue.values[t]);return e}return Object.assign({},r)}function sT(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iT}const oT={mapValue:{fields:{[Tm]:{stringValue:Im},[Ia]:{arrayValue:{}}}}};function yP(r){return"nullValue"in r?vh:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?$s(Bi.empty(),ae.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?ad(r)?oT:{mapValue:{}}:he(35942,{value:r})}function _P(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?$s(Bi.empty(),ae.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?oT:"mapValue"in r?ad(r)?{mapValue:{}}:Di:he(61959,{value:r})}function xv(r,e){const t=zi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Pv(r,e){const t=zi(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=at.emptyPath(),n={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,n,s),n={},s=[],t=d.popLast()}u?n[d.lastSegment()]=ru(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,s)}delete(e){const t=this.field(e.popLast());Eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Eh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Xi(t,((s,a)=>e[s]=a));for(const s of n)delete e[s]}clone(){return new $t(ru(this.value))}}function aT(r){const e=[];return Xi(r.fields,((t,n)=>{const s=new at([t]);if(Eh(n)){const a=aT(n.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new _n(e)}class rt{constructor(e,t,n,s,a,u,d){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new rt(e,0,Ie.min(),Ie.min(),Ie.min(),$t.empty(),0)}static newFoundDocument(e,t,n,s){return new rt(e,1,t,Ie.min(),n,s,0)}static newNoDocument(e,t){return new rt(e,2,t,Ie.min(),Ie.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new rt(e,3,t,Ie.min(),Ie.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $i{constructor(e,t){this.position=e,this.inclusive=t}}function Cv(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const a=e[s],u=r.position[s];if(a.field.isKeyField()?n=ae.comparator(ae.fromName(u.referenceValue),t.key):n=zi(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Rv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ar(r.position[t],e.position[t]))return!1;return!0}class wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function vP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class lT{}class be extends lT{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new wP(e,t,n):t==="array-contains"?new IP(e,n):t==="in"?new pT(e,n):t==="not-in"?new SP(e,n):t==="array-contains-any"?new AP(e,n):new be(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new EP(e,n):new TP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zi(t,this.value)):t!==null&&Ui(this.value)===Ui(t)&&this.matchesComparison(zi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ge extends lT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ge(e,t)}matches(e){return Aa(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Aa(r){return r.op==="and"}function jp(r){return r.op==="or"}function Sm(r){return uT(r)&&Aa(r)}function uT(r){for(const e of r.filters)if(e instanceof Ge)return!1;return!0}function Op(r){if(r instanceof be)return r.field.canonicalString()+r.op.toString()+Sa(r.value);if(Sm(r))return r.filters.map((e=>Op(e))).join(",");{const e=r.filters.map((t=>Op(t))).join(",");return`${r.op}(${e})`}}function cT(r,e){return r instanceof be?(function(n,s){return s instanceof be&&n.op===s.op&&n.field.isEqual(s.field)&&Ar(n.value,s.value)})(r,e):r instanceof Ge?(function(n,s){return s instanceof Ge&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((a,u,d)=>a&&cT(u,s.filters[d])),!0):!1})(r,e):void he(19439)}function hT(r,e){const t=r.filters.concat(e);return Ge.create(t,r.op)}function dT(r){return r instanceof be?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(r):r instanceof Ge?(function(t){return t.op.toString()+" {"+t.getFilters().map(dT).join(" ,")+"}"})(r):"Filter"}class wP extends be{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class EP extends be{constructor(e,t){super(e,"in",t),this.keys=fT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TP extends be{constructor(e,t){super(e,"not-in",t),this.keys=fT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>ae.fromName(n.referenceValue)))}class IP extends be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vu(t)&&_u(t.arrayValue,this.value)}}class pT extends be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class SP extends be{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_u(this.value.arrayValue,t)}}class AP extends be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>_u(this.value.arrayValue,n)))}}class xP{constructor(e,t=null,n=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function Lp(r,e=null,t=[],n=[],s=null,a=null,u=null){return new xP(r,e,t,n,s,a,u)}function qs(r){const e=ue(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Op(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Sa(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Sa(n))).join(",")),e.Pe=t}return e.Pe}function bu(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!vP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!cT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Rv(r.startAt,e.startAt)&&Rv(r.endAt,e.endAt)}function Lh(r){return ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Fh(r,e){return r.filters.filter((t=>t instanceof be&&t.field.isEqual(e)))}function Dv(r,e,t){let n=vh,s=!0;for(const a of Fh(r,e)){let u=vh,d=!0;switch(a.op){case"<":case"<=":u=yP(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=vh}xv({value:n,inclusive:s},{value:u,inclusive:d})<0&&(n=u,s=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];xv({value:n,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(n=u,s=t.inclusive);break}}return{value:n,inclusive:s}}function Nv(r,e,t){let n=Di,s=!0;for(const a of Fh(r,e)){let u=Di,d=!0;switch(a.op){case">=":case">":u=_P(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=Di}Pv({value:n,inclusive:s},{value:u,inclusive:d})>0&&(n=u,s=d)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const u=t.position[a];Pv({value:n,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(n=u,s=t.inclusive);break}}return{value:n,inclusive:s}}class Hr{constructor(e,t=null,n=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mT(r,e,t,n,s,a,u,d){return new Hr(r,e,t,n,s,a,u,d)}function Ma(r){return new Hr(r)}function kv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Am(r){return r.collectionGroup!==null}function ca(r){const e=ue(r);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Qe(at.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new wu(a,n))})),t.has(at.keyField().canonicalString())||e.Te.push(new wu(at.keyField(),n))}return e.Te}function an(r){const e=ue(r);return e.Ie||(e.Ie=PP(e,ca(r))),e.Ie}function PP(r,e){if(r.limitType==="F")return Lp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new wu(s.field,a)}));const t=r.endAt?new $i(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new $i(r.startAt.position,r.startAt.inclusive):null;return Lp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Fp(r,e){const t=r.filters.concat([e]);return new Hr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Mh(r,e,t){return new Hr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ju(r,e){return bu(an(r),an(e))&&r.limitType===e.limitType}function gT(r){return`${qs(an(r))}|lt:${r.limitType}`}function oa(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>dT(s))).join(", ")}]`),ku(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Sa(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Sa(s))).join(",")),`Target(${n})`})(an(r))}; limitType=${r.limitType})`}function Ou(r,e){return e.isFoundDocument()&&(function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ae.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,s){for(const a of ca(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(u,d,f){const m=Cv(u,d,f);return u.inclusive?m<=0:m<0})(n.startAt,ca(n),s)||n.endAt&&!(function(u,d,f){const m=Cv(u,d,f);return u.inclusive?m>=0:m>0})(n.endAt,ca(n),s))})(r,e)}function yT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _T(r){return(e,t)=>{let n=!1;for(const s of ca(r)){const a=CP(s,e,t);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function CP(r,e,t){const n=r.field.isKeyField()?ae.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?zi(f,m):he(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return he(19790,{direction:r.dir})}}class Xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,((t,n)=>{for(const[s,a]of n)e(s,a)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}const RP=new et(ae.comparator);function vn(){return RP}const vT=new et(ae.comparator);function Ql(...r){let e=vT;for(const t of r)e=e.insert(t.key,t);return e}function wT(r){let e=vT;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Er(){return iu()}function ET(){return iu()}function iu(){return new Xr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const DP=new et(ae.comparator),NP=new Qe(ae.comparator);function Re(...r){let e=NP;for(const t of r)e=e.add(t);return e}const kP=new Qe(Pe);function xm(){return kP}function Pm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function TT(r){return{integerValue:""+r}}function IT(r,e){return UE(e)?TT(e):Pm(r,e)}class ld{constructor(){this._=void 0}}function VP(r,e,t){return r instanceof xa?(function(s,a){const u={fields:{[tT]:{stringValue:eT},[rT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&sd(a)&&(a=od(a)),a&&(u.fields[nT]=a),{mapValue:u}})(t,e):r instanceof Ks?AT(r,e):r instanceof Ws?xT(r,e):(function(s,a){const u=ST(s,a),d=Vv(u)+Vv(s.Ee);return bp(u)&&bp(s.Ee)?TT(d):Pm(s.serializer,d)})(r,e)}function bP(r,e,t){return r instanceof Ks?AT(r,e):r instanceof Ws?xT(r,e):t}function ST(r,e){return r instanceof Pa?(function(n){return bp(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class xa extends ld{}class Ks extends ld{constructor(e){super(),this.elements=e}}function AT(r,e){const t=PT(e);for(const n of r.elements)t.some((s=>Ar(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Ws extends ld{constructor(e){super(),this.elements=e}}function xT(r,e){let t=PT(e);for(const n of r.elements)t=t.filter((s=>!Ar(s,n)));return{arrayValue:{values:t}}}class Pa extends ld{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Vv(r){return ot(r.integerValue||r.doubleValue)}function PT(r){return vu(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Lu{constructor(e,t){this.field=e,this.transform=t}}function jP(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Ks&&s instanceof Ks||n instanceof Ws&&s instanceof Ws?ya(n.elements,s.elements,Ar):n instanceof Pa&&s instanceof Pa?Ar(n.Ee,s.Ee):n instanceof xa&&s instanceof xa})(r.transform,e.transform)}class OP{constructor(e,t){this.version=e,this.transformResults=t}}class lt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ud{}function CT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ua(r.key,lt.none()):new Ba(r.key,r.data,lt.none());{const t=r.data,n=$t.empty();let s=new Qe(at.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),s=s.add(a)}return new Yr(r.key,n,new _n(s.toArray()),lt.none())}}function LP(r,e,t){r instanceof Ba?(function(s,a,u){const d=s.value.clone(),f=jv(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Yr?(function(s,a,u){if(!Th(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=jv(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(RT(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(r,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function su(r,e,t,n){return r instanceof Ba?(function(a,u,d,f){if(!Th(a.precondition,u))return d;const m=a.value.clone(),_=Ov(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(r,e,t,n):r instanceof Yr?(function(a,u,d,f){if(!Th(a.precondition,u))return d;const m=Ov(a.fieldTransforms,f,u),_=u.data;return _.setAll(RT(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(r,e,t,n):(function(a,u,d){return Th(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(r,e,t)}function FP(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),a=ST(n.transform,s||null);a!=null&&(t===null&&(t=$t.empty()),t.set(n.field,a))}return t||null}function bv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ya(n,s,((a,u)=>jP(a,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ba extends ud{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends ud{constructor(e,t,n,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RT(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function jv(r,e,t){const n=new Map;ve(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let s=0;s<t.length;s++){const a=r[s],u=a.transform,d=e.data.field(a.field);n.set(a.field,bP(u,d,t[s]))}return n}function Ov(r,e,t){const n=new Map;for(const s of r){const a=s.transform,u=t.data.field(s.field);n.set(s.field,VP(a,u,e))}return n}class Ua extends ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cm extends ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rm{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&LP(a,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=su(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ET();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=CT(u,d);f!==null&&n.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Re())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,((t,n)=>bv(t,n)))&&ya(this.baseMutations,e.baseMutations,((t,n)=>bv(t,n)))}}class Dm{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){ve(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=(function(){return DP})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,n[u].version);return new Dm(e,t,n,s)}}class Nm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class MP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Tt,Me;function DT(r){switch(r){case K.OK:return he(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return he(15467,{code:r})}}function NT(r){if(r===void 0)return yt("GRPC error has no .code"),K.UNKNOWN;switch(r){case Tt.OK:return K.OK;case Tt.CANCELLED:return K.CANCELLED;case Tt.UNKNOWN:return K.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return K.INTERNAL;case Tt.UNAVAILABLE:return K.UNAVAILABLE;case Tt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Tt.NOT_FOUND:return K.NOT_FOUND;case Tt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Tt.ABORTED:return K.ABORTED;case Tt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Tt.DATA_LOSS:return K.DATA_LOSS;default:return he(39323,{code:r})}}(Me=Tt||(Tt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";const BP=new bi([4294967295,4294967295],0);function Lv(r){const e=fm().encode(r),t=new SE;return t.update(e),new Uint8Array(t.digest())}function Fv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new bi([t,n],0),new bi([s,a],0)]}class km{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hl(`Invalid padding: ${t}`);if(n<0)throw new Hl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=bi.fromNumber(this.fe)}pe(e,t,n){let s=e.add(t.multiply(bi.fromNumber(n)));return s.compare(BP)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Lv(e),[n,s]=Fv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(n,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new km(a,s,t);return n.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=Lv(e),[n,s]=Fv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(n,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fu{constructor(e,t,n,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fu(Ie.min(),s,new et(Pe),vn(),Re())}}class Mu{constructor(e,t,n,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Mu(n,t,Re(),Re(),Re())}}class Ih{constructor(e,t,n,s){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=s}}class kT{constructor(e,t){this.targetId=e,this.De=t}}class VT{constructor(e,t,n=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class Mv{constructor(){this.ve=0,this.Ce=Bv(),this.Fe=pt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),t=Re(),n=Re();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:he(38017,{changeType:a})}})),new Mu(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Bv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class UP{constructor(e){this.We=e,this.Ge=new Map,this.ze=vn(),this.je=ch(),this.Je=ch(),this.He=new et(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((n,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,n=e.De.count,s=this.st(t);if(s){const a=s.target;if(Lh(a))if(n===0){const u=new ae(a.path);this.Xe(t,u,rt.newNoDocument(u,Ie.min()))}else ve(n===1,20013,{expectedCount:n});else{const u=this.ot(t);if(u!==n){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=Qr(n).toUint8Array()}catch(f){if(f instanceof ZE)return Cn("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new km(u,s,a)}catch(f){return Cn(f instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let s=0;return n.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&Lh(d.target)){const f=new ae(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,rt.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let n=Re();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new Fu(e,t,this.He,this.ze,n);return this.ze=vn(),this.je=ch(),this.Je=ch(),this.He=new et(Pe),s}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Mv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qe(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qe(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Mv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ch(){return new et(ae.comparator)}function Bv(){return new et(ae.comparator)}const zP={asc:"ASCENDING",desc:"DESCENDING"},$P={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qP={and:"AND",or:"OR"};class KP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mp(r,e){return r.useProto3Json||ku(e)?e:{value:e}}function Ca(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WP(r,e){return Ca(r,e.toTimestamp())}function _t(r){return ve(!!r,49232),Ie.fromTimestamp((function(t){const n=Gr(t);return new Ke(n.seconds,n.nanos)})(r))}function Vm(r,e){return Bp(r,e).canonicalString()}function Bp(r,e){const t=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function jT(r){const e=Ve.fromString(r);return ve(KT(e),10190,{key:e.toString()}),e}function Eu(r,e){return Vm(r.databaseId,e.path)}function Ir(r,e){const t=jT(e);if(t.get(1)!==r.databaseId.projectId)throw new Z(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Z(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ae(FT(t))}function OT(r,e){return Vm(r.databaseId,e)}function LT(r){const e=jT(r);return e.length===4?Ve.emptyPath():FT(e)}function Up(r){return new Ve(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function FT(r){return ve(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Uv(r,e,t){return{name:Eu(r,e),fields:t.value.mapValue.fields}}function MT(r,e,t){const n=Ir(r,e.name),s=_t(e.updateTime),a=e.createTime?_t(e.createTime):Ie.min(),u=new $t({mapValue:{fields:e.fields}}),d=rt.newFoundDocument(n,s,a,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function GP(r,e){return"found"in e?(function(n,s){ve(!!s.found,43571),s.found.name,s.found.updateTime;const a=Ir(n,s.found.name),u=_t(s.found.updateTime),d=s.found.createTime?_t(s.found.createTime):Ie.min(),f=new $t({mapValue:{fields:s.found.fields}});return rt.newFoundDocument(a,u,d,f)})(r,e):"missing"in e?(function(n,s){ve(!!s.missing,3894),ve(!!s.readTime,22933);const a=Ir(n,s.missing),u=_t(s.readTime);return rt.newNoDocument(a,u)})(r,e):he(7234,{result:e})}function QP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:he(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(ve(_===void 0||typeof _=="string",58123),pt.fromBase64String(_||"")):(ve(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),pt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?K.UNKNOWN:NT(m.code);return new Z(_,m.message||"")})(u);t=new VT(n,s,a,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Ir(r,n.document.name),a=_t(n.document.updateTime),u=n.document.createTime?_t(n.document.createTime):Ie.min(),d=new $t({mapValue:{fields:n.document.fields}}),f=rt.newFoundDocument(s,a,u,d),m=n.targetIds||[],_=n.removedTargetIds||[];t=new Ih(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Ir(r,n.document),a=n.readTime?_t(n.readTime):Ie.min(),u=rt.newNoDocument(s,a),d=n.removedTargetIds||[];t=new Ih([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Ir(r,n.document),a=n.removedTargetIds||[];t=new Ih([],a,s,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,u=new MP(s,a),d=n.targetId;t=new kT(d,u)}}return t}function Tu(r,e){let t;if(e instanceof Ba)t={update:Uv(r,e.key,e.value)};else if(e instanceof Ua)t={delete:Eu(r,e.key)};else if(e instanceof Yr)t={update:Uv(r,e.key,e.data),updateMask:eC(e.fieldMask)};else{if(!(e instanceof Cm))return he(16599,{Rt:e.type});t={verify:Eu(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,u){const d=u.transform;if(d instanceof xa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ks)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ws)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pa)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw he(20930,{transform:u.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:WP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:he(27497)})(r,e.precondition)),t}function zp(r,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?lt.updateTime(_t(a.updateTime)):a.exists!==void 0?lt.exists(a.exists):lt.none()})(e.currentDocument):lt.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(u,d){let f=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),f=new xa;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];f=new Ks(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];f=new Ws(_)}else"increment"in d?f=new Pa(u,d.increment):he(16584,{proto:d});const m=at.fromServerFormat(d.fieldPath);return new Lu(m,f)})(r,s))):[];if(e.update){e.update.name;const s=Ir(r,e.update.name),a=new $t({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const m=f.fieldPaths||[];return new _n(m.map((_=>at.fromServerFormat(_))))})(e.updateMask);return new Yr(s,a,u,t,n)}return new Ba(s,a,t,n)}if(e.delete){const s=Ir(r,e.delete);return new Ua(s,t)}if(e.verify){const s=Ir(r,e.verify);return new Cm(s,t)}return he(1463,{proto:e})}function HP(r,e){return r&&r.length>0?(ve(e!==void 0,14353),r.map((t=>(function(s,a){let u=s.updateTime?_t(s.updateTime):_t(a);return u.isEqual(Ie.min())&&(u=_t(a)),new OP(u,s.transformResults||[])})(t,e)))):[]}function BT(r,e){return{documents:[OT(r,e.path)]}}function UT(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=OT(r,s);const a=(function(m){if(m.length!==0)return qT(Ge.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(T){return{field:aa(T.field),direction:YP(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Mp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:s}}function zT(r){let e=LT(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){ve(n===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const T=$T(w);return T instanceof Ge&&Sm(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((T=>(function(L){return new wu(la(L.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let T;return T=typeof w=="object"?w.value:w,ku(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(w){const T=!!w.before,P=w.values||[];return new $i(P,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const T=!w.before,P=w.values||[];return new $i(P,T)})(t.endAt)),mT(e,s,u,a,d,"F",f,m)}function XP(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $T(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=la(t.unaryFilter.field);return be.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=la(t.unaryFilter.field);return be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=la(t.unaryFilter.field);return be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=la(t.unaryFilter.field);return be.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(r):r.fieldFilter!==void 0?(function(t){return be.create(la(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ge.create(t.compositeFilter.filters.map((n=>$T(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(r):he(30097,{filter:r})}function YP(r){return zP[r]}function JP(r){return $P[r]}function ZP(r){return qP[r]}function aa(r){return{fieldPath:r.canonicalString()}}function la(r){return at.fromServerFormat(r.fieldPath)}function qT(r){return r instanceof be?(function(t){if(t.op==="=="){if(Av(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(Sv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Av(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(Sv(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:JP(t.op),value:t.value}}})(r):r instanceof Ge?(function(t){const n=t.getFilters().map((s=>qT(s)));return n.length===1?n[0]:{compositeFilter:{op:ZP(t.op),filters:n}}})(r):he(54877,{filter:r})}function eC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class qr{constructor(e,t,n,s,a=Ie.min(),u=Ie.min(),d=pt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WT{constructor(e){this.gt=e}}function tC(r,e){let t;if(e.document)t=MT(r.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ae.fromSegments(e.noDocument.path),s=Qs(e.noDocument.readTime);t=rt.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const n=ae.fromSegments(e.unknownDocument.path),s=Qs(e.unknownDocument.version);t=rt.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Ke(s[0],s[1]);return Ie.fromTimestamp(a)})(e.readTime)),t}function zv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,u){return{name:Eu(a,u.key),fields:u.data.value.mapValue.fields,updateTime:Ca(a,u.version.toTimestamp()),createTime:Ca(a,u.createTime.toTimestamp())}})(r.gt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Gs(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Gs(e.version)}}return n}function Bh(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Gs(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qs(r){const e=new Ke(r.seconds,r.nanoseconds);return Ie.fromTimestamp(e)}function bs(r,e){const t=(e.baseMutations||[]).map((a=>zp(r.gt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>zp(r.gt,a))),s=Ke.fromMillis(e.localWriteTimeMs);return new Rm(e.batchId,s,t,n)}function Xl(r){const e=Qs(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Qs(r.lastLimboFreeSnapshotVersion):Ie.min();let n;return n=(function(a){return a.documents!==void 0})(r.query)?(function(a){const u=a.documents.length;return ve(u===1,1966,{count:u}),an(Ma(LT(a.documents[0])))})(r.query):(function(a){return an(zT(a))})(r.query),new qr(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,pt.fromBase64String(r.resumeToken))}function GT(r,e){const t=Gs(e.snapshotVersion),n=Gs(e.lastLimboFreeSnapshotVersion);let s;s=Lh(e.target)?BT(r.gt,e.target):UT(r.gt,e.target).Vt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qs(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function bm(r){const e=zT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Mh(e,e.limit,"L"):e}function cp(r,e){return new Nm(e.largestBatchId,zp(r.gt,e.overlayMutation))}function $v(r,e){const t=e.path.lastSegment();return[r,Jt(e.path.popLast()),t]}function qv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Gs(n.readTime),documentKey:Jt(n.documentKey.path),largestBatchId:n.largestBatchId}}class nC{getBundleMetadata(e,t){return Kv(e).get(t).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:Qs(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,t){return Kv(e).put((function(s){return{bundleId:s.id,createTime:Gs(_t(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return Wv(e).get(t).next((n=>{if(n)return(function(a){return{name:a.name,query:bm(a.bundledQuery),readTime:Qs(a.readTime)}})(n)}))}saveNamedQuery(e,t){return Wv(e).put((function(s){return{name:s.name,readTime:Gs(_t(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function Kv(r){return Dt(r,nd)}function Wv(r){return Dt(r,rd)}class cd{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const n=t.uid||"";return new cd(e,n)}getOverlay(e,t){return zl(e).get($v(this.userId,t)).next((n=>n?cp(this.serializer,n):null))}getOverlays(e,t){const n=Er();return B.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((a,u)=>{const d=new Nm(t,u);s.push(this.wt(e,d))})),B.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((u=>s.add(Jt(u.getCollectionPath()))));const a=[];return s.forEach((u=>{const d=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);a.push(zl(e).Y(Dp,d))})),B.waitFor(a)}getOverlaysForCollection(e,t,n){const s=Er(),a=Jt(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return zl(e).j(Dp,u).next((d=>{for(const f of d){const m=cp(this.serializer,f);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const a=Er();let u;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zl(e).X({index:GE,range:d},((f,m,_)=>{const w=cp(this.serializer,m);a.size()<s||w.largestBatchId===u?(a.set(w.getKey(),w),u=w.largestBatchId):_.done()})).next((()=>a))}wt(e,t){return zl(e).put((function(s,a,u){const[d,f,m]=$v(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Tu(s.gt,u.mutation)}})(this.serializer,this.userId,t))}}function zl(r){return Dt(r,id)}class rC{St(e){return Dt(e,wm)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const n=t?.value;return n?pt.fromUint8Array(n):pt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class js{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ot(e.integerValue));else if("doubleValue"in e){const n=ot(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),fu(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),typeof n=="string"&&(n=Gr(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Qr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?sT(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):ad(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):he(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const s of Object.keys(n))this.xt(s,t),this.Dt(n[s],t)}Lt(e,t){var n,s;const a=e.fields||{};this.Ct(t,53);const u=Ia,d=((s=(n=a[u].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(ot(d)),this.xt(u,t),this.Dt(a[u],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const s of n)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach((n=>{this.Ct(t,60),this.$t(n,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}js.Ut=new js;const Zo=255;function iC(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function Gv(r){const e=64-(function(n){let s=0;for(let a=0;a<8;++a){const u=iC(255&n[a]);if(s+=u,u!==8)break}return s})(r);return Math.ceil(e/8)}class sC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Wt(n.value),n=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.jt(n.value),n=t.next();this.Jt()}Ht(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Wt(n);else if(n<2048)this.Wt(960|n>>>6),this.Wt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|n>>>12),this.Wt(128|63&n>>>6),this.Wt(128|63&n);else{const s=t.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.jt(n);else if(n<2048)this.jt(960|n>>>6),this.jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|n>>>12),this.jt(128|63&n>>>6),this.jt(128|63&n);else{const s=t.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const t=this.Xt(e),n=Gv(t);this.en(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}tn(e){const t=this.Xt(e),n=Gv(t);this.en(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}nn(){this.rn(Zo),this.rn(255)}sn(){this._n(Zo),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===Zo?(this.rn(Zo),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Zo?(this._n(Zo),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class oC{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class aC{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class $l{constructor(){this.un=new sC,this.cn=new oC(this.un),this.ln=new aC(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}class Os{constructor(e,t,n,s){this.Pn=e,this.Tn=t,this.In=n,this.dn=s}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Os(this.Pn,this.Tn,this.In,n)}An(e,t,n){return{indexId:this.Pn,uid:e,arrayValue:Sh(this.In),directionalValue:Sh(this.dn),orderedDocumentKey:Sh(t),documentKey:n.path.toArray()}}Rn(e,t,n){const s=this.An(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Si(r,e){let t=r.Pn-e.Pn;return t!==0?t:(t=Qv(r.In,e.In),t!==0?t:(t=Qv(r.dn,e.dn),t!==0?t:ae.comparator(r.Tn,e.Tn)))}function Qv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Sh(r){return lE()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function Hv(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class Xv{constructor(e){this.Vn=new Qe(((t,n)=>at.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Vn=this.Vn.add(n):this.fn.push(n)}}get gn(){return this.Vn.size>1}pn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Pp(e);if(t!==void 0&&!this.yn(t))return!1;const n=Ns(e);let s=new Set,a=0,u=0;for(;a<n.length&&this.yn(n[a]);++a)s=s.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!s.has(d.field.canonicalString())){const f=n[a];if(!this.wn(d,f)||!this.Sn(this.mn[u++],f))return!1}++a}for(;a<n.length;++a){const d=n[a];if(u>=this.mn.length||!this.Sn(this.mn[u++],d))return!1}return!0}bn(){if(this.gn)return null;let e=new Qe(at.comparator);const t=[];for(const n of this.fn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new gh(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new gh(n.field,0))}for(const n of this.mn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new gh(n.field,n.dir==="asc"?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,t,du.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function QT(r){var e,t;if(ve(r instanceof be||r instanceof Ge,20012),r instanceof be){if(r instanceof pT){const s=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>be.create(r.field,"==",a))))||[];return Ge.create(s,"or")}return r}const n=r.filters.map((s=>QT(s)));return Ge.create(n,r.op)}function lC(r){if(r.getFilters().length===0)return[];const e=Kp(QT(r));return ve(HT(e),7391),$p(e)||qp(e)?[e]:e.getFilters()}function $p(r){return r instanceof be}function qp(r){return r instanceof Ge&&Sm(r)}function HT(r){return $p(r)||qp(r)||(function(t){if(t instanceof Ge&&jp(t)){for(const n of t.getFilters())if(!$p(n)&&!qp(n))return!1;return!0}return!1})(r)}function Kp(r){if(ve(r instanceof be||r instanceof Ge,34018),r instanceof be)return r;if(r.filters.length===1)return Kp(r.filters[0]);const e=r.filters.map((n=>Kp(n)));let t=Ge.create(e,r.op);return t=Uh(t),HT(t)?t:(ve(t instanceof Ge,64498),ve(Aa(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((n,s)=>jm(n,s))))}function jm(r,e){let t;return ve(r instanceof be||r instanceof Ge,38388),ve(e instanceof be||e instanceof Ge,25473),t=r instanceof be?e instanceof be?(function(s,a){return Ge.create([s,a],"and")})(r,e):Yv(r,e):e instanceof be?Yv(e,r):(function(s,a){if(ve(s.filters.length>0&&a.filters.length>0,48005),Aa(s)&&Aa(a))return hT(s,a.getFilters());const u=jp(s)?s:a,d=jp(s)?a:s,f=u.filters.map((m=>jm(m,d)));return Ge.create(f,"or")})(r,e),Uh(t)}function Yv(r,e){if(Aa(e))return hT(e,r.getFilters());{const t=e.filters.map((n=>jm(r,n)));return Ge.create(t,"or")}}function Uh(r){if(ve(r instanceof be||r instanceof Ge,11850),r instanceof be)return r;const e=r.getFilters();if(e.length===1)return Uh(e[0]);if(uT(r))return r;const t=e.map((s=>Uh(s))),n=[];return t.forEach((s=>{s instanceof be?n.push(s):s instanceof Ge&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:Ge.create(n,r.op)}class uC{constructor(){this.Dn=new Om}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Rn.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Om{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Qe(Ve.comparator),a=!s.has(n);return this.index[t]=s.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Qe(Ve.comparator)).toArray()}}const Jv="IndexedDbIndexManager",hh=new Uint8Array(0);class cC{constructor(e,t){this.databaseId=t,this.vn=new Om,this.Cn=new Xr((n=>qs(n)),((n,s)=>bu(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:n,parent:Jt(s)};return Zv(e).put(a)}return B.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[kE(t),""],!1,!0);return Zv(e).j(s).next((a=>{for(const u of a){if(u.collectionId!==t)break;n.push(wr(u.parent))}return n}))}addFieldIndex(e,t){const n=ql(e),s=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=n.add(s);if(t.indexState){const u=ta(e);return a.next((d=>{u.put(qv(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const n=ql(e),s=ta(e),a=ea(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ql(e),n=ea(e),s=ta(e);return t.Y().next((()=>n.Y())).next((()=>s.Y()))}createTargetIndexes(e,t){return B.forEach(this.Fn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const a=new Xv(n).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const n=ea(e);let s=!0;const a=new Map;return B.forEach(this.Fn(t),(u=>this.Mn(e,u).next((d=>{s&&(s=!!d),a.set(u,d)})))).next((()=>{if(s){let u=Re();const d=[];return B.forEach(a,((f,m)=>{ee(Jv,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map((X=>`${X.fieldPath}:${X.kind}`)).join(",")}`})(f)} to execute ${qs(t)}`);const _=(function(G,X){const pe=Pp(X);if(pe===void 0)return null;for(const Ee of Fh(G,pe.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null})(m,f),w=(function(G,X){const pe=new Map;for(const Ee of Ns(X))for(const k of Fh(G,Ee.fieldPath))switch(k.op){case"==":case"in":pe.set(Ee.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return pe.set(Ee.fieldPath.canonicalString(),k.value),Array.from(pe.values())}return null})(m,f),T=(function(G,X){const pe=[];let Ee=!0;for(const k of Ns(X)){const A=k.kind===0?Dv(G,k.fieldPath,G.startAt):Nv(G,k.fieldPath,G.startAt);pe.push(A.value),Ee&&(Ee=A.inclusive)}return new $i(pe,Ee)})(m,f),P=(function(G,X){const pe=[];let Ee=!0;for(const k of Ns(X)){const A=k.kind===0?Nv(G,k.fieldPath,G.endAt):Dv(G,k.fieldPath,G.endAt);pe.push(A.value),Ee&&(Ee=A.inclusive)}return new $i(pe,Ee)})(m,f),L=this.xn(f,m,T),j=this.xn(f,m,P),N=this.On(f,m,w),Y=this.Nn(f.indexId,_,L,T.inclusive,j,P.inclusive,N);return B.forEach(Y,(Q=>n.H(Q,t.limit).next((G=>{G.forEach((X=>{const pe=ae.fromSegments(X.documentKey);u.has(pe)||(u=u.add(pe),d.push(pe))}))}))))})).next((()=>d))}return B.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=lC(Ge.create(e.filters,"and")).map((n=>Lp(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,n,s,a,u,d){const f=(t!=null?t.length:1)*Math.max(n.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let w=0;w<f;++w){const T=t?this.Bn(t[w/m]):hh,P=this.Ln(e,T,n[w%m],s),L=this.kn(e,T,a[w%m],u),j=d.map((N=>this.Ln(e,T,N,!0)));_.push(...this.createRange(P,L,j))}return _}Ln(e,t,n,s){const a=new Os(e,ae.empty(),t,n);return s?a:a.En()}kn(e,t,n,s){const a=new Os(e,ae.empty(),t,n);return s?a.En():a}Mn(e,t){const n=new Xv(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let u=null;for(const d of a)n.pn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u}))}getIndexType(e,t){let n=2;const s=this.Fn(t);return B.forEach(s,(a=>this.Mn(e,a).next((u=>{u?n!==0&&u.fields.length<(function(f){let m=new Qe(at.comparator),_=!1;for(const w of f.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?_=!0:m=m.add(T.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(_?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(u){return u.limit!==null})(t)&&s.length>1&&n===2?1:n))}qn(e,t){const n=new $l;for(const s of Ns(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const u=n.hn(s.kind);js.Ut.bt(a,u)}return n.an()}Bn(e){const t=new $l;return js.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const n=new $l;return js.Ut.bt($s(this.databaseId,t),n.hn((function(a){const u=Ns(a);return u.length===0?0:u[u.length-1].kind})(e))),n.an()}On(e,t,n){if(n===null)return[];let s=[];s.push(new $l);let a=0;for(const u of Ns(e)){const d=n[a++];for(const f of s)if(this.$n(t,u.fieldPath)&&vu(d))s=this.Un(s,u,d);else{const m=f.hn(u.kind);js.Ut.bt(d,m)}}return this.Kn(s)}xn(e,t,n){return this.On(e,t,n.position)}Kn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].an();return t}Un(e,t,n){const s=[...e],a=[];for(const u of n.arrayValue.values||[])for(const d of s){const f=new $l;f.seed(d.an()),js.Ut.bt(u,f.hn(t.kind)),a.push(f)}return a}$n(e,t){return!!e.filters.find((n=>n instanceof be&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=ql(e),s=ta(e);return(t?n.j(Rp,IDBKeyRange.bound(t,t)):n.j()).next((a=>{const u=[];return B.forEach(a,(d=>s.get([d.indexId,this.uid]).next((f=>{u.push((function(_,w){const T=w?new du(w.sequenceNumber,new Rn(Qs(w.readTime),new ae(wr(w.documentKey)),w.largestBatchId)):du.empty(),P=_.fields.map((([L,j])=>new gh(at.fromServerFormat(L),j)));return new Vh(_.indexId,_.collectionGroup,P,T)})(d,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const a=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Pe(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=ql(e),a=ta(e);return this.Wn(e).next((u=>s.j(Rp,IDBKeyRange.bound(t,t)).next((d=>B.forEach(d,(f=>a.put(qv(f.indexId,this.uid,u,n))))))))}updateIndexEntries(e,t){const n=new Map;return B.forEach(t,((s,a)=>{const u=n.get(s.collectionGroup);return(u?B.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next((d=>(n.set(s.collectionGroup,d),B.forEach(d,(f=>this.Gn(e,s,f).next((m=>{const _=this.zn(a,f);return m.isEqual(_)?B.resolve():this.jn(e,a,f,m,_)})))))))}))}Jn(e,t,n,s){return ea(e).put(s.An(this.uid,this.Qn(n,t.key),t.key))}Hn(e,t,n,s){return ea(e).delete(s.Rn(this.uid,this.Qn(n,t.key),t.key))}Gn(e,t,n){const s=ea(e);let a=new Qe(Si);return s.X({index:WE,range:IDBKeyRange.only([n.indexId,this.uid,Sh(this.Qn(n,t))])},((u,d)=>{a=a.add(new Os(n.indexId,t,Hv(d.arrayValue),Hv(d.directionalValue)))})).next((()=>a))}zn(e,t){let n=new Qe(Si);const s=this.qn(t,e);if(s==null)return n;const a=Pp(t);if(a!=null){const u=e.data.field(a.fieldPath);if(vu(u))for(const d of u.arrayValue.values||[])n=n.add(new Os(t.indexId,e.key,this.Bn(d),s))}else n=n.add(new Os(t.indexId,e.key,hh,s));return n}jn(e,t,n,s,a){ee(Jv,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,m,_,w,T){const P=f.getIterator(),L=m.getIterator();let j=Jo(P),N=Jo(L);for(;j||N;){let Y=!1,Q=!1;if(j&&N){const G=_(j,N);G<0?Q=!0:G>0&&(Y=!0)}else j!=null?Q=!0:Y=!0;Y?(w(N),N=Jo(L)):Q?(T(j),j=Jo(P)):(j=Jo(P),N=Jo(L))}})(s,a,Si,(d=>{u.push(this.Jn(e,t,n,d))}),(d=>{u.push(this.Hn(e,t,n,d))})),B.waitFor(u)}Wn(e){let t=1;return ta(e).X({index:KE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((u,d)=>Si(u,d))).filter(((u,d,f)=>!d||Si(u,f[d-1])!==0));const s=[];s.push(e);for(const u of n){const d=Si(u,e),f=Si(u,t);if(d===0)s[0]=e.En();else if(d>0&&f<0)s.push(u),s.push(u.En());else if(f>0)break}s.push(t);const a=[];for(let u=0;u<s.length;u+=2){if(this.Yn(s[u],s[u+1]))return[];const d=s[u].Rn(this.uid,hh,ae.empty()),f=s[u+1].Rn(this.uid,hh,ae.empty());a.push(IDBKeyRange.bound(d,f))}return a}Yn(e,t){return Si(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ew)}getMinOffset(e,t){return B.mapArray(this.Fn(t),(n=>this.Mn(e,n).next((s=>s||he(44426))))).next(ew)}}function Zv(r){return Dt(r,gu)}function ea(r){return Dt(r,nu)}function ql(r){return Dt(r,vm)}function ta(r){return Dt(r,tu)}function ew(r){ve(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;gm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Rn(e.readTime,e.documentKey,t)}const tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XT=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function YT(r,e,t){const n=r.store(ir),s=r.store(va),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const f=n.X({range:u},((_,w,T)=>(d++,T.delete())));a.push(f.next((()=>{ve(d===1,47070,{batchId:t.batchId})})));const m=[];for(const _ of t.mutations){const w=zE(e,_.key.path,t.batchId);a.push(s.delete(w)),m.push(_.key)}return B.waitFor(a).next((()=>m))}function zh(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw he(14731);e=r.noDocument}return JSON.stringify(e).length}Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(XT,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class hd{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Zn={}}static yt(e,t,n,s){ve(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new hd(a,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ai(e).X({index:Fs,range:n},((s,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const a=ua(e),u=Ai(e);return u.add({}).next((d=>{ve(typeof d=="number",49019);const f=new Rm(d,t,n,s),m=(function(P,L,j){const N=j.baseMutations.map((Q=>Tu(P.gt,Q))),Y=j.mutations.map((Q=>Tu(P.gt,Q)));return{userId:L,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:N,mutations:Y}})(this.serializer,this.userId,f),_=[];let w=new Qe(((T,P)=>Pe(T.canonicalString(),P.canonicalString())));for(const T of s){const P=zE(this.userId,T.key.path,d);w=w.add(T.key.path.popLast()),_.push(u.put(m)),_.push(a.put(P,qx))}return w.forEach((T=>{_.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[d]=f.keys()})),B.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Ai(e).get(t).next((n=>n?(ve(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),bs(this.serializer,n)):null))}Xn(e,t){return this.Zn[t]?B.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Ai(e).X({index:Fs,range:s},((u,d,f)=>{d.userId===this.userId&&(ve(d.batchId>=n,47524,{er:n}),a=bs(this.serializer,d)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=ji;return Ai(e).X({index:Fs,range:t,reverse:!0},((s,a,u)=>{n=a.batchId,u.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ji],[this.userId,Number.POSITIVE_INFINITY]);return Ai(e).j(Fs,t).next((n=>n.map((s=>bs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=yh(this.userId,t.path),s=IDBKeyRange.lowerBound(n),a=[];return ua(e).X({range:s},((u,d,f)=>{const[m,_,w]=u,T=wr(_);if(m===this.userId&&t.path.isEqual(T))return Ai(e).get(w).next((P=>{if(!P)throw he(61480,{tr:u,batchId:w});ve(P.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:P.userId,batchId:w}),a.push(bs(this.serializer,P))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Qe(Pe);const s=[];return t.forEach((a=>{const u=yh(this.userId,a.path),d=IDBKeyRange.lowerBound(u),f=ua(e).X({range:d},((m,_,w)=>{const[T,P,L]=m,j=wr(P);T===this.userId&&a.path.isEqual(j)?n=n.add(L):w.done()}));s.push(f)})),B.waitFor(s).next((()=>this.nr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,a=yh(this.userId,n),u=IDBKeyRange.lowerBound(a);let d=new Qe(Pe);return ua(e).X({range:u},((f,m,_)=>{const[w,T,P]=f,L=wr(T);w===this.userId&&n.isPrefixOf(L)?L.length===s&&(d=d.add(P)):_.done()})).next((()=>this.nr(e,d)))}nr(e,t){const n=[],s=[];return t.forEach((a=>{s.push(Ai(e).get(a).next((u=>{if(u===null)throw he(35274,{batchId:a});ve(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),n.push(bs(this.serializer,u))})))})),B.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return YT(e.ce,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),B.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return B.resolve();const n=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),s=[];return ua(e).X({range:n},((a,u,d)=>{if(a[0]===this.userId){const f=wr(a[1]);s.push(f)}else d.done()})).next((()=>{ve(s.length===0,56720,{ir:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return JT(e,this.userId,t)}sr(e){return ZT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ji,lastStreamToken:""}))}}function JT(r,e,t){const n=yh(e,t.path),s=n[1],a=IDBKeyRange.lowerBound(n);let u=!1;return ua(r).X({range:a,Z:!0},((d,f,m)=>{const[_,w,T]=d;_===e&&w===s&&(u=!0),m.done()})).next((()=>u))}function Ai(r){return Dt(r,ir)}function ua(r){return Dt(r,va)}function ZT(r){return Dt(r,pu)}class Hs{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Hs(0)}static ur(){return new Hs(-1)}}class hC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const n=new Hs(t.highestTargetId);return t.highestTargetId=n.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>Ie.fromTimestamp(new Ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.cr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.lr(e,s))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((n=>(n.targetCount+=1,this.Pr(t,n),this.lr(e,n))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>na(e).delete(t.targetId))).next((()=>this.cr(e))).next((n=>(ve(n.targetCount>0,8065),n.targetCount-=1,this.lr(e,n))))}removeTargets(e,t,n){let s=0;const a=[];return na(e).X(((u,d)=>{const f=Xl(d);f.sequenceNumber<=t&&n.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>B.waitFor(a))).next((()=>s))}forEachTarget(e,t){return na(e).X(((n,s)=>{const a=Xl(s);t(a)}))}cr(e){return nw(e).get(Oh).next((t=>(ve(t!==null,2888),t)))}lr(e,t){return nw(e).put(Oh,t)}hr(e,t){return na(e).put(GT(this.serializer,t))}Pr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=qs(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return na(e).X({range:s,index:qE},((u,d,f)=>{const m=Xl(d);bu(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,n){const s=[],a=Ci(e);return t.forEach((u=>{const d=Jt(u.path);s.push(a.put({targetId:n,path:d})),s.push(this.referenceDelegate.addReference(e,n,u))})),B.waitFor(s)}removeMatchingKeys(e,t,n){const s=Ci(e);return B.forEach(t,(a=>{const u=Jt(a.path);return B.waitFor([s.delete([n,u]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,t){const n=Ci(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ci(e);let a=Re();return s.X({range:n,Z:!0},((u,d,f)=>{const m=wr(u[1]),_=new ae(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const n=Jt(t.path),s=IDBKeyRange.bound([n],[kE(n)],!1,!0);let a=0;return Ci(e).X({index:_m,Z:!0,range:s},(([u,d],f,m)=>{u!==0&&(a++,m.done())})).next((()=>a>0))}Et(e,t){return na(e).get(t).next((n=>n?Xl(n):null))}}function na(r){return Dt(r,wa)}function nw(r){return Dt(r,Us)}function Ci(r){return Dt(r,Ea)}const rw="LruGarbageCollector",dC=1048576;function iw([r,e],[t,n]){const s=Pe(r,t);return s===0?Pe(e,n):s}class fC{constructor(e){this.Tr=e,this.buffer=new Qe(iw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();iw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e0{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ee(rw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hi(t)?ee(rw,"Ignoring IndexedDB error during garbage collection: ",t):await Qi(t)}await this.Rr(3e5)}))}}class pC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return B.resolve(yn.ue);const n=new fC(t);return this.Vr.forEachTarget(e,(s=>n.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>n.Er(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(tw)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tw):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,s,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(n=w,d=Date.now(),this.removeTargets(e,n,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(m=Date.now(),sa()<=Oe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function t0(r,e){return new pC(r,e)}class mC{constructor(e,t){this.db=e,this.garbageCollector=t0(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}yr(e){let t=0;return this.gr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((n,s)=>t(s)))}addReference(e,t,n){return dh(e,n)}removeReference(e,t,n){return dh(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return dh(e,t)}Sr(e,t){return(function(s,a){let u=!1;return ZT(s).ee((d=>JT(s,d,a).next((f=>(f&&(u=!0),B.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.wr(e,((u,d)=>{if(d<=t){const f=this.Sr(e,u).next((m=>{if(!m)return a++,n.getEntry(e,u).next((()=>(n.removeEntry(u,Ie.min()),Ci(e).delete((function(w){return[0,Jt(w.path)]})(u)))))}));s.push(f)}})).next((()=>B.waitFor(s))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return dh(e,t)}wr(e,t){const n=Ci(e);let s,a=yn.ue;return n.X({index:_m},(([u,d],{path:f,sequenceNumber:m})=>{u===0?(a!==yn.ue&&t(new ae(wr(s)),a),a=m,s=f):a=yn.ue})).next((()=>{a!==yn.ue&&t(new ae(wr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dh(r,e){return Ci(r).put((function(n,s){return{targetId:0,path:Jt(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class n0{constructor(){this.changes=new Xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?B.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Rs(e).put(n)}removeEntry(e,t,n){return Rs(e).delete((function(a,u){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Bh(u),d[d.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.br(e,n))))}getEntry(e,t){let n=rt.newInvalidDocument(t);return Rs(e).X({index:_h,range:IDBKeyRange.only(Kl(t))},((s,a)=>{n=this.Dr(t,a)})).next((()=>n))}vr(e,t){let n={size:0,document:rt.newInvalidDocument(t)};return Rs(e).X({index:_h,range:IDBKeyRange.only(Kl(t))},((s,a)=>{n={document:this.Dr(t,a),size:zh(a)}})).next((()=>n))}getEntries(e,t){let n=vn();return this.Cr(e,t,((s,a)=>{const u=this.Dr(s,a);n=n.insert(s,u)})).next((()=>n))}Fr(e,t){let n=vn(),s=new et(ae.comparator);return this.Cr(e,t,((a,u)=>{const d=this.Dr(a,u);n=n.insert(a,d),s=s.insert(a,zh(u))})).next((()=>({documents:n,Mr:s})))}Cr(e,t,n){if(t.isEmpty())return B.resolve();let s=new Qe(aw);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(Kl(s.first()),Kl(s.last())),u=s.getIterator();let d=u.getNext();return Rs(e).X({index:_h,range:a},((f,m,_)=>{const w=ae.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&aw(d,w)<0;)n(d,null),d=u.getNext();d&&d.isEqual(w)&&(n(d,m),d=u.hasNext()?u.getNext():null),d?_.G(Kl(d)):_.done()})).next((()=>{for(;d;)n(d,null),d=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,a){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Bh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rs(e).j(IDBKeyRange.bound(d,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let _=vn();for(const w of m){const T=this.Dr(ae.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Ou(t,T)||s.has(T.key))&&(_=_.insert(T.key,T))}return _}))}getAllFromCollectionGroup(e,t,n,s){let a=vn();const u=ow(t,n),d=ow(t,Rn.max());return Rs(e).X({index:$E,range:IDBKeyRange.bound(u,d,!0)},((f,m,_)=>{const w=this.Dr(ae.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new yC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return sw(e).get(Cp).next((t=>(ve(!!t,20021),t)))}br(e,t){return sw(e).put(Cp,t)}Dr(e,t){if(t){const n=tC(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Ie.min())))return n}return rt.newInvalidDocument(e)}}function r0(r){return new gC(r)}class yC extends n0{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Xr((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new Qe(((a,u)=>Pe(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const d=this.Nr.get(a);if(t.push(this.Or.removeEntry(e,a,d.readTime)),u.isValidDocument()){const f=zv(this.Or.serializer,u);s=s.add(a.path.popLast());const m=zh(f);n+=m-d.size,t.push(this.Or.addEntry(e,a,f))}else if(n-=d.size,this.trackRemovals){const f=zv(this.Or.serializer,u.convertToNoDocument(Ie.min()));t.push(this.Or.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Or.updateMetadata(e,n)),B.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((n=>(this.Nr.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:n,Mr:s})=>(s.forEach(((a,u)=>{this.Nr.set(a,{size:u,readTime:n.get(a).readTime})})),n)))}}function sw(r){return Dt(r,mu)}function Rs(r){return Dt(r,jh)}function Kl(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ow(r,e){const t=e.documentKey.path.toArray();return[r,Bh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aw(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(s=Pe(t[a],n[a]),s)return s;return s=Pe(t.length,n.length),s||(s=Pe(t[t.length-2],n[n.length-2]),s||Pe(t[t.length-1],n[n.length-1]))}class _C{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class i0{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&su(n.mutation,s,_n.empty(),Ke.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Re()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Re()){const s=Er();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((a=>{let u=Ql();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const n=Er();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Re())))}populateOverlays(e,t,n){const s=[];return n.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,n,s){let a=vn();const u=iu(),d=(function(){return iu()})();return t.forEach(((f,m)=>{const _=n.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof Yr)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),su(_.mutation,m,_.mutation.getFieldMask(),Ke.now())):u.set(m.key,_n.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var w;return d.set(m,new _C(_,(w=u.get(m))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const n=iu();let s=new et(((u,d)=>u-d)),a=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=n.get(f)||_n.empty();_=d.applyToLocalView(m,_),n.set(f,_);const w=(s.get(d.batchId)||Re()).add(f);s=s.insert(d.batchId,w)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,w=ET();_.forEach((T=>{if(!a.has(T)){const P=CT(t.get(T),n.get(T));P!==null&&w.set(T,P),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return B.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(u){return ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Am(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-a.size):B.resolve(Er());let d=_a,f=a;return u.next((m=>B.forEach(m,((_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(_)?B.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{f=f.insert(_,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Re()))).next((_=>({batchId:d,changes:wT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((n=>{let s=Ql();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const a=t.collectionGroup;let u=Ql();return this.indexManager.getCollectionParents(e,a).next((d=>B.forEach(d,(f=>{const m=(function(w,T){return new Hr(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,n,s).next((_=>{_.forEach(((w,T)=>{u=u.insert(w,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,rt.newInvalidDocument(_)))}));let d=Ql();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&su(_.mutation,m,_n.empty(),Ke.now()),Ou(t,m)&&(d=d.insert(f,m))})),d}))}}class vC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:_t(s.createTime)}})(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:bm(s.bundledQuery),readTime:_t(s.readTime)}})(t)),B.resolve()}}class wC{constructor(){this.overlays=new et(ae.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Er();return B.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&n.set(s,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,a)=>{this.wt(e,t,a)})),B.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){const s=Er(),a=t.length+1,u=new ae(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>n&&s.set(f.getKey(),f)}return B.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let a=new et(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>n){let _=a.get(m.largestBatchId);_===null&&(_=Er(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Er(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return B.resolve(d)}wt(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new Nm(t,n));let a=this.kr.get(t);a===void 0&&(a=Re(),this.kr.set(t,a)),this.kr.set(t,a.add(n.key))}}class EC{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}class Lm{constructor(){this.qr=new Qe(Ot.Qr),this.$r=new Qe(Ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Ot(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Wr(new Ot(e,t))}Gr(e,t){e.forEach((n=>this.removeReference(n,t)))}zr(e){const t=new ae(new Ve([])),n=new Ot(t,e),s=new Ot(t,e+1),a=[];return this.$r.forEachInRange([n,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ae(new Ve([])),n=new Ot(t,e),s=new Ot(t,e+1);let a=Re();return this.$r.forEachInRange([n,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Ot(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ot{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}}class TC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Ot.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Rm(a,t,n,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Ot(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(u)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Xr(n),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?ji:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ot(t,0),s=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([n,s],(u=>{const d=this.Zr(u.Hr);a.push(d)})),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Qe(Pe);return t.forEach((s=>{const a=new Ot(s,0),u=new Ot(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{n=n.add(d.Hr)}))})),B.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let a=n;ae.isDocumentKey(a)||(a=a.child(""));const u=new Ot(new ae(a),0);let d=new Qe(Pe);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!n.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)}),u),B.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((n=>{const s=this.Zr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ve(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return B.forEach(t.mutations,(s=>{const a=new Ot(s.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=n}))}rr(e){}containsKey(e,t){const n=new Ot(t,0),s=this.Yr.firstAfterOrEqual(n);return B.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IC{constructor(e){this.ni=e,this.docs=(function(){return new et(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let n=vn();return t.forEach((s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():rt.newInvalidDocument(s))})),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let a=vn();const u=t.path,d=new ae(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||gm(LE(_),n)<=0||(s.has(_.key)||Ou(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,t,n,s){he(9500)}ri(e,t){return B.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new SC(this)}getSize(e){return B.resolve(this.size)}}class SC extends n0{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)})),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class AC{constructor(e){this.persistence=e,this.ii=new Xr((t=>qs(t)),bu),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new Lm,this.targetCount=0,this._i=Hs.ar()}forEachTarget(e,t){return this.ii.forEach(((n,s)=>t(s))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Hs(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,n){let s=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),B.waitFor(a).next((()=>s))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),B.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}}class Fm{constructor(e,t){this.ai={},this.overlays={},this.ui=new yn(0),this.ci=!1,this.ci=!0,this.li=new EC,this.referenceDelegate=e(this),this.hi=new AC(this),this.indexManager=new uC,this.remoteDocumentCache=(function(s){return new IC(s)})((n=>this.referenceDelegate.Pi(n))),this.serializer=new WT(t),this.Ti=new vC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new TC(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){ee("MemoryPersistence","Starting transaction:",e);const s=new xC(this.ui.next());return this.referenceDelegate.Ii(),n(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return B.or(Object.values(this.ai).map((n=>()=>n.containsKey(e,t))))}}class xC extends ME{constructor(e){super(),this.currentSequenceNumber=e}}class dd{constructor(e){this.persistence=e,this.Ai=new Lm,this.Ri=null}static Vi(e){return new dd(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,(n=>{const s=ae.fromPath(n);return this.fi(e,s).next((a=>{a||t.removeEntry(s,Ie.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((n=>{n?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.gi=new Xr((n=>Jt(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=t0(this,t)}static Vi(e,t){return new $h(e,t)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}yr(e){let t=0;return this.gr(e,(n=>{t++})).next((()=>t))}gr(e,t){return B.forEach(this.gi,((n,s)=>this.Sr(e,n,s).next((a=>a?B.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(n++,a.removeEntry(u,Ie.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wh(e.data.value)),t}Sr(e,t,n){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return B.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class PC{constructor(e){this.serializer=e}q(e,t,n,s){const a=new td("createOrUpgrade",t);n<1&&s>=1&&((function(f){f.createObjectStore(Vu)})(e),(function(f){f.createObjectStore(pu,{keyPath:$x}),f.createObjectStore(ir,{keyPath:_v,autoIncrement:!0}).createIndex(Fs,vv,{unique:!0}),f.createObjectStore(va)})(e),lw(e),(function(f){f.createObjectStore(ks)})(e));let u=B.resolve();return n<3&&s>=3&&(n!==0&&((function(f){f.deleteObjectStore(Ea),f.deleteObjectStore(wa),f.deleteObjectStore(Us)})(e),lw(e)),u=u.next((()=>(function(f){const m=f.store(Us),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return m.put(Oh,_)})(a)))),n<4&&s>=4&&(n!==0&&(u=u.next((()=>(function(f,m){return m.store(ir).j().next((w=>{f.deleteObjectStore(ir),f.createObjectStore(ir,{keyPath:_v,autoIncrement:!0}).createIndex(Fs,vv,{unique:!0});const T=m.store(ir),P=w.map((L=>T.put(L)));return B.waitFor(P)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore(Ta,{keyPath:Jx})})(e)}))),n<5&&s>=5&&(u=u.next((()=>this.pi(a)))),n<6&&s>=6&&(u=u.next((()=>((function(f){f.createObjectStore(mu)})(e),this.yi(a))))),n<7&&s>=7&&(u=u.next((()=>this.wi(a)))),n<8&&s>=8&&(u=u.next((()=>this.Si(e,a)))),n<9&&s>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(u=u.next((()=>this.bi(a)))),n<11&&s>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(nd,{keyPath:Zx})})(e),(function(f){f.createObjectStore(rd,{keyPath:eP})})(e)}))),n<12&&s>=12&&(u=u.next((()=>{(function(f){const m=f.createObjectStore(id,{keyPath:aP});m.createIndex(Dp,lP,{unique:!1}),m.createIndex(GE,uP,{unique:!1})})(e)}))),n<13&&s>=13&&(u=u.next((()=>(function(f){const m=f.createObjectStore(jh,{keyPath:Kx});m.createIndex(_h,Wx),m.createIndex($E,Gx)})(e))).next((()=>this.Di(e,a))).next((()=>e.deleteObjectStore(ks)))),n<14&&s>=14&&(u=u.next((()=>this.Ci(e,a)))),n<15&&s>=15&&(u=u.next((()=>(function(f){f.createObjectStore(vm,{keyPath:tP,autoIncrement:!0}).createIndex(Rp,nP,{unique:!1}),f.createObjectStore(tu,{keyPath:rP}).createIndex(KE,iP,{unique:!1}),f.createObjectStore(nu,{keyPath:sP}).createIndex(WE,oP,{unique:!1})})(e)))),n<16&&s>=16&&(u=u.next((()=>{t.objectStore(tu).clear()})).next((()=>{t.objectStore(nu).clear()}))),n<17&&s>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(wm,{keyPath:cP})})(e)}))),n<18&&s>=18&&lE()&&(u=u.next((()=>{t.objectStore(tu).clear()})).next((()=>{t.objectStore(nu).clear()}))),u}yi(e){let t=0;return e.store(ks).X(((n,s)=>{t+=zh(s)})).next((()=>{const n={byteSize:t};return e.store(mu).put(Cp,n)}))}pi(e){const t=e.store(pu),n=e.store(ir);return t.j().next((s=>B.forEach(s,(a=>{const u=IDBKeyRange.bound([a.userId,ji],[a.userId,a.lastAcknowledgedBatchId]);return n.j(Fs,u).next((d=>B.forEach(d,(f=>{ve(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=bs(this.serializer,f);return YT(e,a.userId,m).next((()=>{}))}))))}))))}wi(e){const t=e.store(Ea),n=e.store(ks);return e.store(Us).get(Oh).next((s=>{const a=[];return n.X(((u,d)=>{const f=new Ve(u),m=(function(w){return[0,Jt(w)]})(f);a.push(t.get(m).next((_=>_?B.resolve():(w=>t.put({targetId:0,path:Jt(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>B.waitFor(a)))}))}Si(e,t){e.createObjectStore(gu,{keyPath:Yx});const n=t.store(gu),s=new Om,a=u=>{if(s.add(u)){const d=u.lastSegment(),f=u.popLast();return n.put({collectionId:d,parent:Jt(f)})}};return t.store(ks).X({Z:!0},((u,d)=>{const f=new Ve(u);return a(f.popLast())})).next((()=>t.store(va).X({Z:!0},(([u,d,f],m)=>{const _=wr(d);return a(_.popLast())}))))}bi(e){const t=e.store(wa);return t.X(((n,s)=>{const a=Xl(s),u=GT(this.serializer,a);return t.put(u)}))}Di(e,t){const n=t.store(ks),s=[];return n.X(((a,u)=>{const d=t.store(jh),f=(function(w){return w.document?new ae(Ve.fromString(w.document.name).popFirst(5)):w.noDocument?ae.fromSegments(w.noDocument.path):w.unknownDocument?ae.fromSegments(w.unknownDocument.path):he(36783)})(u).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(d.put(m))})).next((()=>B.waitFor(s)))}Ci(e,t){const n=t.store(ir),s=r0(this.serializer),a=new Fm(dd.Vi,this.serializer.gt);return n.j().next((u=>{const d=new Map;return u.forEach((f=>{var m;let _=(m=d.get(f.userId))!==null&&m!==void 0?m:Re();bs(this.serializer,f).keys().forEach((w=>_=_.add(w))),d.set(f.userId,_)})),B.forEach(d,((f,m)=>{const _=new Lt(m),w=cd.yt(this.serializer,_),T=a.getIndexManager(_),P=hd.yt(_,this.serializer,T,a.referenceDelegate);return new i0(s,P,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Np(t,yn.ue),f).next()}))}))}}function lw(r){r.createObjectStore(Ea,{keyPath:Hx}).createIndex(_m,Xx,{unique:!0}),r.createObjectStore(wa,{keyPath:"targetId"}).createIndex(qE,Qx,{unique:!0}),r.createObjectStore(Us)}const xi="IndexedDbPersistence",hp=18e5,dp=5e3,fp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",s0="main";class Mm{constructor(e,t,n,s,a,u,d,f,m,_,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fi=a,this.window=u,this.document=d,this.Mi=m,this.xi=_,this.Oi=w,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=T=>Promise.resolve(),!Mm.C())throw new Z(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mC(this,s),this.Qi=t+s0,this.serializer=new WT(f),this.$i=new Tr(this.Qi,this.Oi,new PC(this.serializer)),this.li=new rC,this.hi=new hC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=r0(this.serializer),this.Ti=new nC,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&yt(xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(K.FAILED_PRECONDITION,fp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new yn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>fh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Hi(e))return ee(xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(xi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return Wl(e).get(Yo).next((t=>B.resolve(this.Xi(t))))}es(e){return fh(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,hp)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=Dt(t,Ta);return n.j().next((s=>{const a=this.rs(s,hp),u=s.filter((d=>a.indexOf(d)===-1));return B.forEach(u,(d=>n.delete(d.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?B.resolve(!0):Wl(e).get(Yo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,dp)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new Z(K.FAILED_PRECONDITION,fp);return!1}}return!(!this.networkEnabled||!this.inForeground)||fh(e).j().next((n=>this.rs(n,dp).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,d=this.networkEnabled===s.networkEnabled;if(a||u&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(xi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Vu,Ta],(e=>{const t=new Np(e,yn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((n=>this.ns(n.updateTimeMs,t)&&!this._s(n.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>fh(e).j().next((t=>this.rs(t,hp).map((n=>n.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return hd.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cC(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return cd.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,n){ee(xi,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?fP:f===17?YE:f===16?dP:f===15?Em:f===14?XE:f===13?HE:f===12?hP:f===11?QE:void he(60245)})(this.Oi);let u;return this.$i.runTransaction(e,s,a,(d=>(u=new Np(d,this.ui?this.ui.next():yn.ue),t==="readwrite-primary"?this.Ji(u).next((f=>!!f||this.Hi(u))).next((f=>{if(!f)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new Z(K.FAILED_PRECONDITION,FE);return n(u)})).next((f=>this.Zi(u).next((()=>f)))):this.Ts(u).next((()=>n(u)))))).then((d=>(u.raiseOnCommittedEvent(),d)))}Ts(e){return Wl(e).get(Yo).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,dp)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Z(K.FAILED_PRECONDITION,fp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wl(e).put(Yo,t)}static C(){return Tr.C()}Yi(e){const t=Wl(e);return t.get(Yo).next((n=>this.Xi(n)?(ee(xi,"Releasing primary lease."),t.delete(Yo)):B.resolve()))}ns(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(yt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;aE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const n=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ee(xi,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return yt(xi,"Failed to get zombied client id.",n),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wl(r){return Dt(r,Vu)}function fh(r){return Dt(r,Ta)}function Bm(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Um{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=s}static Es(e,t){let n=Re(),s=Re();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Um(e,t.fromCache,n,s)}}class CC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class o0{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return aE()?8:BE(Dh())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,s){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,s,n).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new CC;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,n,s){return n.documentReadCount<this.Vs?(sa()<=Oe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(sa()<=Oe.DEBUG&&ee("QueryEngine","Query:",oa(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(sa()<=Oe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(t))):B.resolve())}ps(e,t){if(kv(t))return B.resolve(null);let n=an(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Mh(t,null,"F"),n=an(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const u=Re(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,n).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Mh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,n,s){return kv(t)||s.isEqual(Ie.min())?B.resolve(null):this.gs.getDocuments(e,n).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,n,s)?B.resolve(null):(sa()<=Oe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oa(t)),this.vs(e,u,t,OE(s,_a)).next((d=>d)))}))}bs(e,t){let n=new Qe(_T(e));return t.forEach(((s,a)=>{Ou(e,a)&&(n=n.add(a))})),n}Ds(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,n){return sa()<=Oe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",oa(t)),this.gs.getDocumentsMatchingQuery(e,t,Rn.min(),n)}vs(e,t,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const zm="LocalStore",RC=3e8;class DC{constructor(e,t,n,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new et(Pe),this.Ms=new Xr((a=>qs(a)),bu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function a0(r,e,t,n){return new DC(r,e,t,n)}async function l0(r,e){const t=ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const u=[],d=[];let f=Re();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(n,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function NC(r,e){const t=ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const w=m.batch,T=w.keys();let P=B.resolve();return T.forEach((L=>{P=P.next((()=>_.getEntry(f,L))).next((j=>{const N=m.docVersions.get(L);ve(N!==null,48541),j.version.compareTo(N)<0&&(w.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),_.addEntry(j)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,w)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let f=Re();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function u0(r){const e=ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function kC(r,e){const t=ue(r),n=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,w)=>{const T=s.get(w);if(!T)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,w))));let P=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(pt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,n)),s=s.insert(w,P),(function(j,N,Y){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=RC?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(T,P,_)&&d.push(t.hi.updateTargetData(a,P))}));let f=vn(),m=Re();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(c0(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!n.isEqual(Ie.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,n)));d.push(_)}return B.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=s,a)))}function c0(r,e,t){let n=Re(),s=Re();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let u=vn();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ie.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ee(zm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:s}}))}function VC(r,e){const t=ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=ji),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Ra(r,e){const t=ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.hi.getTargetData(n,e).next((a=>a?(s=a,B.resolve(s)):t.hi.allocateTargetId(n).next((u=>(s=new qr(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.hi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(n.targetId,n),t.Ms.set(e,n.targetId)),n}))}async function Da(r,e,t){const n=ue(r),s=n.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(u=>n.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Hi(u))throw u;ee(zm,`Failed to update sequence numbers for target ${e}: ${u}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function qh(r,e,t){const n=ue(r);let s=Ie.min(),a=Re();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const w=ue(f),T=w.Ms.get(_);return T!==void 0?B.resolve(w.Fs.get(T)):w.hi.getTargetData(m,_)})(n,u,an(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>n.Cs.getDocumentsMatchingQuery(u,e,t?s:Ie.min(),t?a:Re()))).next((d=>(f0(n,yT(e),d),{documents:d,qs:a})))))}function h0(r,e){const t=ue(r),n=ue(t.hi),s=t.Fs.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>n.Et(a,e).next((u=>u?u.target:null))))}function d0(r,e){const t=ue(r),n=t.xs.get(e)||Ie.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Os.getAllFromCollectionGroup(s,e,OE(n,_a),Number.MAX_SAFE_INTEGER))).then((s=>(f0(t,e,s),s)))}function f0(r,e,t){let n=r.xs.get(e)||Ie.min();t.forEach(((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.xs.set(e,n)}async function bC(r,e,t,n){const s=ue(r);let a=Re(),u=vn();for(const m of t){const _=e.Qs(m.metadata.name);m.document&&(a=a.add(_));const w=e.$s(m);w.setReadTime(e.Us(m.metadata.readTime)),u=u.insert(_,w)}const d=s.Os.newChangeBuffer({trackRemovals:!0}),f=await Ra(s,(function(_){return an(Ma(Ve.fromString(`__bundle__/docs/${_}`)))})(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",(m=>c0(m,d,u).next((_=>(d.apply(m),_))).next((_=>s.hi.removeMatchingKeysForTargetId(m,f.targetId).next((()=>s.hi.addMatchingKeys(m,a,f.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(m,_.Ls,_.ks))).next((()=>_.Ls))))))}async function jC(r,e,t=Re()){const n=await Ra(r,an(bm(e.bundledQuery))),s=ue(r);return s.persistence.runTransaction("Save named query","readwrite",(a=>{const u=_t(e.readTime);if(n.snapshotVersion.compareTo(u)>=0)return s.Ti.saveNamedQuery(a,e);const d=n.withResumeToken(pt.EMPTY_BYTE_STRING,u);return s.Fs=s.Fs.insert(d.targetId,d),s.hi.updateTargetData(a,d).next((()=>s.hi.removeMatchingKeysForTargetId(a,n.targetId))).next((()=>s.hi.addMatchingKeys(a,t,n.targetId))).next((()=>s.Ti.saveNamedQuery(a,e)))}))}const p0="firestore_clients";function uw(r,e){return`${p0}_${r}_${e}`}const m0="firestore_mutations";function cw(r,e,t){let n=`${m0}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const g0="firestore_targets";function pp(r,e){return`${g0}_${r}_${e}`}const vr="SharedClientState";class Kh{constructor(e,t,n,s){this.user=e,this.batchId=t,this.state=n,this.error=s}static Ks(e,t,n){const s=JSON.parse(n);let a,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(a=new Z(s.error.code,s.error.message))),u?new Kh(e,t,s.state,a):(yt(vr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ou{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ks(e,t){const n=JSON.parse(t);let s,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(s=new Z(n.error.code,n.error.message))),a?new ou(e,n.state,s):(yt(vr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const n=JSON.parse(t);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,a=xm();for(let u=0;s&&u<n.activeTargetIds.length;++u)s=UE(n.activeTargetIds[u]),a=a.add(n.activeTargetIds[u]);return s?new Wh(e,a):(yt(vr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class $m{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new $m(t.clientId,t.onlineState):(yt(vr,`Failed to parse online state: ${e}`),null)}}class Wp{constructor(){this.activeTargetIds=xm()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mp{constructor(e,t,n,s,a){this.window=e,this.Fi=t,this.persistenceKey=n,this.js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new et(Pe),this.started=!1,this.Zs=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=uw(this.persistenceKey,this.js),this.eo=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Wp),this.no=new RegExp(`^${p0}_${u}_([^_]*)$`),this.ro=new RegExp(`^${m0}_${u}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${g0}_${u}_(\\d+)$`),this.so=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.oo=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const n of e){if(n===this.js)continue;const s=this.getItem(uw(this.persistenceKey,n));if(s){const a=Wh.Ks(n,s);a&&(this.Ys=this.Ys.insert(a.clientId,a))}}this._o();const t=this.storage.getItem(this.so);if(t){const n=this.ao(t);n&&this.uo(n)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach(((n,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,n){this.lo(e,t,n),this.ho(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(pp(this.persistenceKey,e));if(s){const a=ou.Ks(e,s);a&&(n=a.state)}}return t&&this.Po.Gs(e),this._o(),n}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pp(this.persistenceKey,e))}updateQueryState(e,t,n){this.To(e,t,n)}handleUserChange(e,t,n){t.forEach((s=>{this.ho(s)})),this.currentUser=e,n.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee(vr,"READ",e,t),t}setItem(e,t){ee(vr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee(vr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ee(vr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const n=this.Ao(t.key);return this.Ro(n,null)}{const n=this.Vo(t.key,t.newValue);if(n)return this.Ro(n.clientId,n)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const n=this.mo(t.key,t.newValue);if(n)return this.fo(n)}}else if(this.io.test(t.key)){if(t.newValue!==null){const n=this.po(t.key,t.newValue);if(n)return this.yo(n)}}else if(t.key===this.so){if(t.newValue!==null){const n=this.ao(t.newValue);if(n)return this.uo(n)}}else if(t.key===this.eo){const n=(function(a){let u=yn.ue;if(a!=null)try{const d=JSON.parse(a);ve(typeof d=="number",30636,{wo:a}),u=d}catch(d){yt(vr,"Failed to read sequence number from WebStorage",d)}return u})(t.newValue);n!==yn.ue&&this.sequenceNumberHandler(n)}else if(t.key===this.oo){const n=this.So(t.newValue);await Promise.all(n.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,n){const s=new Kh(this.currentUser,e,t,n),a=cw(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Ws())}ho(e){const t=cw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,n){const s=pp(this.persistenceKey,e),a=new ou(e,t,n);this.setItem(s,a.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const n=this.Ao(e);return Wh.Ks(n,t)}mo(e,t){const n=this.ro.exec(e),s=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Kh.Ks(new Lt(a),s,t)}po(e,t){const n=this.io.exec(e),s=Number(n[1]);return ou.Ks(s,t)}ao(e){return $m.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);ee(vr,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const n=t?this.Ys.insert(e,t):this.Ys.remove(e),s=this.co(this.Ys),a=this.co(n),u=[],d=[];return a.forEach((f=>{s.has(f)||u.push(f)})),s.forEach((f=>{a.has(f)||d.push(f)})),this.syncEngine.Co(u,d).then((()=>{this.Ys=n}))}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=xm();return e.forEach(((n,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class y0{constructor(){this.Fo=new Wp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Wp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OC{xo(e){}shutdown(){}}const hw="ConnectivityMonitor";class dw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ee(hw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ee(hw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ph=null;function Gp(){return ph===null?ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():ph++,"0x"+ph.toString(16)}const gp="RestConnection",LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===kp?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,t,n,s,a){const u=Gp(),d=this.Go(e,t.toUriEncodedString());ee(gp,`Sending RPC '${e}' ${u}:`,d,n);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),_=sm(m);return this.jo(e,d,f,n,_).then((w=>(ee(gp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Cn(gp,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",n),w}))}Jo(e,t,n,s,a,u){return this.Wo(e,t,n,s,a)}zo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),n&&n.headers.forEach(((s,a)=>e[a]=s))}Go(e,t){const n=LC[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class MC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Ht="WebChannelConnection";class BC extends FC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,s,a){const u=Gp();return new Promise(((d,f)=>{const m=new AE;m.setWithCredentials(!0),m.listenOnce(xE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case mh.NO_ERROR:const w=m.getResponseJson();ee(Ht,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case mh.TIMEOUT:ee(Ht,`RPC '${e}' ${u} timed out`),f(new Z(K.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=m.getStatus();if(ee(Ht,`RPC '${e}' ${u} failed with status:`,T,"response text:",m.getResponseText()),T>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P?.error;if(L&&L.status&&L.message){const j=(function(Y){const Q=Y.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Q)>=0?Q:K.UNKNOWN})(L.status);f(new Z(j,L.message))}else f(new Z(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Z(K.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ee(Ht,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);ee(Ht,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",_,n,15)}))}P_(e,t,n){const s=Gp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=RE(),d=CE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const _=a.join("");ee(Ht,`Creating RPC '${e}' stream ${s}: ${_}`,f);const w=u.createWebChannel(_,f);this.T_(w);let T=!1,P=!1;const L=new MC({Ho:N=>{P?ee(Ht,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(T||(ee(Ht,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),ee(Ht,`RPC '${e}' stream ${s} sending:`,N),w.send(N))},Yo:()=>w.close()}),j=(N,Y,Q)=>{N.listen(Y,(G=>{try{Q(G)}catch(X){setTimeout((()=>{throw X}),0)}}))};return j(w,Gl.EventType.OPEN,(()=>{P||(ee(Ht,`RPC '${e}' stream ${s} transport opened.`),L.s_())})),j(w,Gl.EventType.CLOSE,(()=>{P||(P=!0,ee(Ht,`RPC '${e}' stream ${s} transport closed`),L.__(),this.I_(w))})),j(w,Gl.EventType.ERROR,(N=>{P||(P=!0,Cn(Ht,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),L.__(new Z(K.UNAVAILABLE,"The operation could not be completed")))})),j(w,Gl.EventType.MESSAGE,(N=>{var Y;if(!P){const Q=N.data[0];ve(!!Q,16349);const G=Q,X=G?.error||((Y=G[0])===null||Y===void 0?void 0:Y.error);if(X){ee(Ht,`RPC '${e}' stream ${s} received error:`,X);const pe=X.status;let Ee=(function(R){const V=Tt[R];if(V!==void 0)return NT(V)})(pe),k=X.message;Ee===void 0&&(Ee=K.INTERNAL,k="Unknown error status: "+pe+" with message "+X.message),P=!0,L.__(new Z(Ee,k)),w.close()}else ee(Ht,`RPC '${e}' stream ${s} received:`,Q),L.a_(Q)}})),j(d,PE.STAT_EVENT,(N=>{N.stat===Ap.PROXY?ee(Ht,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Ap.NOPROXY&&ee(Ht,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function _0(){return typeof window<"u"?window:null}function Ah(){return typeof document<"u"?document:null}function Bu(r){return new KP(r,!0)}class qm{constructor(e,t,n=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-n);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const fw="PersistentStream";class v0{constructor(e,t,n,s,a,u,d,f){this.Fi=e,this.w_=n,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qm(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(yt(t.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.b_===t&&this.W_(n,s)}),(n=>{e((()=>{const s=new Z(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)}))}))}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.e_((()=>{n((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{n((()=>this.G_(s)))})),this.stream.onMessage((s=>{n((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ee(fw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ee(fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UC extends v0{constructor(e,t,n,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=QP(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Ie.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?_t(u.readTime):Ie.min()})(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Up(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=Lh(f)?{documents:BT(a,f)}:{query:UT(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=bT(a,u.resumeToken);const m=Mp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=Ca(a,u.snapshotVersion.toTimestamp());const m=Mp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const n=XP(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Up(this.serializer),t.removeTarget=e,this.k_(t)}}class zC extends v0{constructor(e,t,n,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=HP(e.writeResults,e.commitTime),n=_t(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Up(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Tu(this.serializer,n)))};this.k_(t)}}class $C{}class qC extends $C{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Z(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Bp(t,n),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(K.UNKNOWN,a.toString())}))}Jo(e,t,n,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Bp(t,n),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Z(K.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class KC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yt(t),this._a=!1):ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Xs="RemoteStore";class WC{constructor(e,t,n,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{n.enqueueAndForget((async()=>{Yi(this)&&(ee(Xs,"Restarting streams for network reachability change."),await(async function(f){const m=ue(f);m.Ia.add(4),await za(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Uu(m)})(this))}))})),this.Aa=new KC(n,s)}}async function Uu(r){if(Yi(r))for(const e of r.da)await e(!0)}async function za(r){for(const e of r.da)await e(!1)}function fd(r,e){const t=ue(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Gm(t)?Wm(t):qa(t).x_()&&Km(t,e))}function Na(r,e){const t=ue(r),n=qa(t);t.Ta.delete(e),n.x_()&&w0(t,e),t.Ta.size===0&&(n.x_()?n.B_():Yi(t)&&t.Aa.set("Unknown"))}function Km(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qa(r).H_(e)}function w0(r,e){r.Ra.$e(e),qa(r).Y_(e)}function Wm(r){r.Ra=new UP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),qa(r).start(),r.Aa.aa()}function Gm(r){return Yi(r)&&!qa(r).M_()&&r.Ta.size>0}function Yi(r){return ue(r).Ia.size===0}function E0(r){r.Ra=void 0}async function GC(r){r.Aa.set("Online")}async function QC(r){r.Ta.forEach(((e,t)=>{Km(r,e)}))}async function HC(r,e){E0(r),Gm(r)?(r.Aa.la(e),Wm(r)):r.Aa.set("Unknown")}async function XC(r,e,t){if(r.Aa.set("Online"),e instanceof VT&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(r,e)}catch(n){ee(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Gh(r,n)}else if(e instanceof Ih?r.Ra.Ye(e):e instanceof kT?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Ie.min()))try{const n=await u0(r.localStore);t.compareTo(n)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(pt.EMPTY_BYTE_STRING,_.snapshotVersion)),w0(a,f);const w=new qr(_.target,f,m,_.sequenceNumber);Km(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(n){ee(Xs,"Failed to raise snapshot:",n),await Gh(r,n)}}async function Gh(r,e,t){if(!Hi(e))throw e;r.Ia.add(1),await za(r),r.Aa.set("Offline"),t||(t=()=>u0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ee(Xs,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Uu(r)}))}function T0(r,e){return e().catch((t=>Gh(r,t,e)))}async function $a(r){const e=ue(r),t=qi(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ji;for(;YC(e);)try{const s=await VC(e.localStore,n);if(s===null){e.Pa.length===0&&t.B_();break}n=s.batchId,JC(e,s)}catch(s){await Gh(e,s)}I0(e)&&S0(e)}function YC(r){return Yi(r)&&r.Pa.length<10}function JC(r,e){r.Pa.push(e);const t=qi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function I0(r){return Yi(r)&&!qi(r).M_()&&r.Pa.length>0}function S0(r){qi(r).start()}async function ZC(r){qi(r).na()}async function eR(r){const e=qi(r);for(const t of r.Pa)e.X_(t.mutations)}async function tR(r,e,t){const n=r.Pa.shift(),s=Dm.from(n,e,t);await T0(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await $a(r)}async function nR(r,e){e&&qi(r).Z_&&await(async function(n,s){if((function(u){return DT(u)&&u!==K.ABORTED})(s.code)){const a=n.Pa.shift();qi(n).N_(),await T0(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s))),await $a(n)}})(r,e),I0(r)&&S0(r)}async function pw(r,e){const t=ue(r);t.asyncQueue.verifyOperationInProgress(),ee(Xs,"RemoteStore received new credentials");const n=Yi(t);t.Ia.add(3),await za(t),n&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Uu(t)}async function Qp(r,e){const t=ue(r);e?(t.Ia.delete(2),await Uu(t)):e||(t.Ia.add(2),await za(t),t.Aa.set("Unknown"))}function qa(r){return r.Va||(r.Va=(function(t,n,s){const a=ue(t);return a.ia(),new UC(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(r.datastore,r.asyncQueue,{Zo:GC.bind(null,r),e_:QC.bind(null,r),n_:HC.bind(null,r),J_:XC.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),Gm(r)?Wm(r):r.Aa.set("Unknown")):(await r.Va.stop(),E0(r))}))),r.Va}function qi(r){return r.ma||(r.ma=(function(t,n,s){const a=ue(t);return a.ia(),new zC(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:ZC.bind(null,r),n_:nR.bind(null,r),ea:eR.bind(null,r),ta:tR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await $a(r)):(await r.ma.stop(),r.Pa.length>0&&(ee(Xs,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}class Qm{constructor(e,t,n,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,a){const u=Date.now()+n,d=new Qm(e,t,u,s,a);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ka(r,e){if(yt("AsyncQueue",`${e}: ${r}`),Hi(r))return new Z(K.UNAVAILABLE,`${e}: ${r}`);throw r}class ha{static emptySet(e){return new ha(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(t,n)=>ae.comparator(t.key,n.key),this.keyedMap=Ql(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ha;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class mw{constructor(){this.fa=new et(ae.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):he(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ka{constructor(e,t,n,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,n,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ka(e,t,ha.emptySet(t),u,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class rR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class iR{constructor(){this.queries=gw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,n){const s=ue(t),a=s.queries;s.queries=gw(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(n)}))})(this,new Z(K.ABORTED,"Firestore shutting down"))}}function gw(){return new Xr((r=>gT(r)),ju)}async function Hm(r,e){const t=ue(r);let n=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(n=2):(a=new rR,n=e.ba()?0:1);try{switch(n){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=Ka(u,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Ym(t)}async function Xm(r,e){const t=ue(r),n=e.query;let s=3;const a=t.queries.get(n);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function sR(r,e){const t=ue(r);let n=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(n=!0);u.ya=s}}n&&Ym(t)}function oR(r,e,t){const n=ue(r),s=n.queries.get(e);if(s)for(const a of s.wa)a.onError(t);n.queries.delete(e)}function Ym(r){r.Da.forEach((e=>{e.next()}))}var Hp,yw;(yw=Hp||(Hp={})).Fa="default",yw.Cache="cache";class Jm{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ka(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const n=t!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hp.Cache}}class aR{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}class _w{constructor(e){this.serializer=e}Qs(e){return Ir(this.serializer,e)}$s(e){return e.metadata.exists?MT(this.serializer,e.document,!1):rt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return _t(e)}}class lR{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=A0(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const n=Ve.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,n=new _w(this.serializer);for(const s of e)if(s.metadata.queries){const a=n.Qs(s.metadata.name);for(const u of s.metadata.queries){const d=(t.get(u)||Re()).add(a);t.set(u,d)}}return t}async za(e){const t=await bC(e,new _w(this.serializer),this.Ka,this.$a.id),n=this.Ga(this.documents);for(const s of this.Ua)await jC(e,s,n.get(s.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function A0(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class x0{constructor(e){this.key=e}}class P0{constructor(e){this.key=e}}class C0{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=_T(e),this.eu=new ha(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new mw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,w)=>{const T=s.get(_),P=Ou(this.query,w)?w:null,L=!!T&&this.mutatedKeys.has(T.key),j=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let N=!1;T&&P?T.data.isEqual(P.data)?L!==j&&(n.track({type:3,doc:P}),N=!0):this.iu(T,P)||(n.track({type:2,doc:P}),N=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(d=!0)):!T&&P?(n.track({type:0,doc:P}),N=!0):T&&!P&&(n.track({type:1,doc:T}),N=!0,(f||m)&&(d=!0)),N&&(P?(u=u.add(P),a=j?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),n.track({type:1,doc:_})}return{eu:u,ru:n,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,w)=>(function(P,L){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:N})}};return j(P)-j(L)})(_.type,w.type)||this.Xa(_.doc,w.doc))),this.su(n),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ka(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Re(),this.eu.forEach((n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))}));const t=[];return e.forEach((n=>{this.Za.has(n)||t.push(new P0(n))})),this.Za.forEach((n=>{e.has(n)||t.push(new x0(n))})),t}uu(e){this.Ha=e.qs,this.Za=Re();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ji="SyncEngine";class uR{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cR{constructor(e){this.key=e,this.lu=!1}}class hR{constructor(e,t,n,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Xr((d=>gT(d)),ju),this.Tu=new Map,this.Iu=new Set,this.du=new et(ae.comparator),this.Eu=new Map,this.Au=new Lm,this.Ru={},this.Vu=new Map,this.mu=Hs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function dR(r,e,t=!0){const n=pd(r);let s;const a=n.Pu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await R0(n,e,t,!0),s}async function fR(r,e){const t=pd(r);await R0(t,e,!0,!1)}async function R0(r,e,t,n){const s=await Ra(r.localStore,an(e)),a=s.targetId,u=r.sharedClientState.addLocalQueryTarget(a,t);let d;return n&&(d=await Zm(r,e,a,u==="current",s.resumeToken)),r.isPrimaryClient&&t&&fd(r.remoteStore,s),d}async function Zm(r,e,t,n,s){r.gu=(w,T,P)=>(async function(j,N,Y,Q){let G=N.view.nu(Y);G.Ds&&(G=await qh(j.localStore,N.query,!1).then((({documents:k})=>N.view.nu(k,G))));const X=Q&&Q.targetChanges.get(N.targetId),pe=Q&&Q.targetMismatches.get(N.targetId)!=null,Ee=N.view.applyChanges(G,j.isPrimaryClient,X,pe);return Xp(j,N.targetId,Ee._u),Ee.snapshot})(r,w,T,P);const a=await qh(r.localStore,e,!0),u=new C0(e,a.qs),d=u.nu(a.documents),f=Mu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),m=u.applyChanges(d,r.isPrimaryClient,f);Xp(r,t,m._u);const _=new uR(e,t,u);return r.Pu.set(e,_),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),m.snapshot}async function pR(r,e,t){const n=ue(r),s=n.Pu.get(e),a=n.Tu.get(s.targetId);if(a.length>1)return n.Tu.set(s.targetId,a.filter((u=>!ju(u,e)))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Da(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&Na(n.remoteStore,s.targetId),Va(n,s.targetId)})).catch(Qi)):(Va(n,s.targetId),await Da(n.localStore,s.targetId,!0))}async function mR(r,e){const t=ue(r),n=t.Pu.get(e),s=t.Tu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Na(t.remoteStore,n.targetId))}async function gR(r,e,t){const n=rg(r);try{const s=await(function(u,d){const f=ue(u),m=Ke.now(),_=d.reduce(((P,L)=>P.add(L.key)),Re());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let L=vn(),j=Re();return f.Os.getEntries(P,_).next((N=>{L=N,L.forEach(((Y,Q)=>{Q.isValidDocument()||(j=j.add(Y))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,L))).next((N=>{w=N;const Y=[];for(const Q of d){const G=FP(Q,w.get(Q.key).overlayedDocument);G!=null&&Y.push(new Yr(Q.key,G,aT(G.value.mapValue),lt.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,Y,d)})).next((N=>{T=N;const Y=N.applyToLocalDocumentSet(w,j);return f.documentOverlayCache.saveOverlays(P,N.batchId,Y)}))})).then((()=>({batchId:T.batchId,changes:wT(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new et(Pe)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(n,s.batchId,t),await Jr(n,s.changes),await $a(n.remoteStore)}catch(s){const a=Ka(s,"Failed to persist write");t.reject(a)}}async function D0(r,e){const t=ue(r);try{const n=await kC(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Eu.get(a);u&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ve(u.lu,14607):s.removedDocuments.size>0&&(ve(u.lu,42227),u.lu=!1))})),await Jr(t,n,e)}catch(n){await Qi(n)}}function vw(r,e,t){const n=ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=ue(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,w)=>{for(const T of w.wa)T.va(d)&&(m=!0)})),m&&Ym(f)})(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function yR(r,e,t){const n=ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Eu.get(e),a=s&&s.key;if(a){let u=new et(ae.comparator);u=u.insert(a,rt.newNoDocument(a,Ie.min()));const d=Re().add(a),f=new Fu(Ie.min(),new Map,new et(Pe),u,d);await D0(n,f),n.du=n.du.remove(a),n.Eu.delete(e),ng(n)}else await Da(n.localStore,e,!1).then((()=>Va(n,e,t))).catch(Qi)}async function _R(r,e){const t=ue(r),n=e.batch.batchId;try{const s=await NC(t.localStore,e);tg(t,n,null),eg(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Jr(t,s)}catch(s){await Qi(s)}}async function vR(r,e,t){const n=ue(r);try{const s=await(function(u,d){const f=ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((w=>(ve(w!==null,37113),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(n.localStore,e);tg(n,e,t),eg(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Jr(n,s)}catch(s){await Qi(s)}}async function wR(r,e){const t=ue(r);Yi(t.remoteStore)||ee(Ji,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(u){const d=ue(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>d.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(n===ji)return void e.resolve();const s=t.Vu.get(n)||[];s.push(e),t.Vu.set(n,s)}catch(n){const s=Ka(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function eg(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function tg(r,e,t){const n=ue(r);let s=n.Ru[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function Va(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Tu.get(e))r.Pu.delete(n),t&&r.hu.pu(n,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((n=>{r.Au.containsKey(n)||N0(r,n)}))}function N0(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Na(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),ng(r))}function Xp(r,e,t){for(const n of t)n instanceof x0?(r.Au.addReference(n.key,e),ER(r,n)):n instanceof P0?(ee(Ji,"Document no longer in limbo: "+n.key),r.Au.removeReference(n.key,e),r.Au.containsKey(n.key)||N0(r,n.key)):he(19791,{yu:n})}function ER(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Iu.has(n)||(ee(Ji,"New document in limbo: "+t),r.Iu.add(n),ng(r))}function ng(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new ae(Ve.fromString(e)),n=r.mu.next();r.Eu.set(n,new cR(t)),r.du=r.du.insert(t,n),fd(r.remoteStore,new qr(an(Ma(t.path)),n,"TargetPurposeLimboResolution",yn.ue))}}async function Jr(r,e,t){const n=ue(r),s=[],a=[],u=[];n.Pu.isEmpty()||(n.Pu.forEach(((d,f)=>{u.push(n.gu(f,e,t).then((m=>{var _;if((m||t)&&n.isPrimaryClient){const w=m?!m.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;n.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Um.Es(f.targetId,m);a.push(w)}})))})),await Promise.all(u),n.hu.J_(s),await(async function(f,m){const _=ue(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>B.forEach(m,(T=>B.forEach(T.Is,(P=>_.persistence.referenceDelegate.addReference(w,T.targetId,P))).next((()=>B.forEach(T.ds,(P=>_.persistence.referenceDelegate.removeReference(w,T.targetId,P)))))))))}catch(w){if(!Hi(w))throw w;ee(zm,"Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const P=_.Fs.get(T),L=P.snapshotVersion,j=P.withLastLimboFreeSnapshotVersion(L);_.Fs=_.Fs.insert(T,j)}}})(n.localStore,a))}async function TR(r,e){const t=ue(r);if(!t.currentUser.isEqual(e)){ee(Ji,"User change. New user:",e.toKey());const n=await l0(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new Z(K.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Jr(t,n.Bs)}}function IR(r,e){const t=ue(r),n=t.Eu.get(e);if(n&&n.lu)return Re().add(n.key);{let s=Re();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}async function SR(r,e){const t=ue(r),n=await qh(t.localStore,e.query,!0),s=e.view.uu(n);return t.isPrimaryClient&&Xp(t,e.targetId,s._u),s}async function AR(r,e){const t=ue(r);return d0(t.localStore,e).then((n=>Jr(t,n)))}async function xR(r,e,t,n){const s=ue(r),a=await(function(d,f){const m=ue(d),_=ue(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>_.Xn(w,f).next((T=>T?m.localDocuments.getDocuments(w,T):B.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await $a(s.remoteStore):t==="acknowledged"||t==="rejected"?(tg(s,e,n||null),eg(s,e),(function(d,f){ue(ue(d).mutationQueue).rr(f)})(s.localStore,e)):he(6720,"Unknown batchState",{wu:t}),await Jr(s,a)):ee(Ji,"Cannot apply mutation batch with id: "+e)}async function PR(r,e){const t=ue(r);if(pd(t),rg(t),e===!0&&t.fu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),s=await ww(t,n.toArray());t.fu=!0,await Qp(t.remoteStore,!0);for(const a of s)fd(t.remoteStore,a)}else if(e===!1&&t.fu!==!1){const n=[];let s=Promise.resolve();t.Tu.forEach(((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?n.push(u):s=s.then((()=>(Va(t,u),Da(t.localStore,u,!0)))),Na(t.remoteStore,u)})),await s,await ww(t,n),(function(u){const d=ue(u);d.Eu.forEach(((f,m)=>{Na(d.remoteStore,m)})),d.Au.jr(),d.Eu=new Map,d.du=new et(ae.comparator)})(t),t.fu=!1,await Qp(t.remoteStore,!1)}}async function ww(r,e,t){const n=ue(r),s=[],a=[];for(const u of e){let d;const f=n.Tu.get(u);if(f&&f.length!==0){d=await Ra(n.localStore,an(f[0]));for(const m of f){const _=n.Pu.get(m),w=await SR(n,_);w.snapshot&&a.push(w.snapshot)}}else{const m=await h0(n.localStore,u);d=await Ra(n.localStore,m),await Zm(n,k0(m),u,!1,d.resumeToken)}s.push(d)}return n.hu.J_(a),s}function k0(r){return mT(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function CR(r){return(function(t){return ue(ue(t).persistence).Ps()})(ue(r).localStore)}async function RR(r,e,t,n){const s=ue(r);if(s.fu)return void ee(Ji,"Ignoring unexpected query state notification.");const a=s.Tu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=await d0(s.localStore,yT(a[0])),d=Fu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",pt.EMPTY_BYTE_STRING);await Jr(s,u,d);break}case"rejected":await Da(s.localStore,e,!0),Va(s,e,n);break;default:he(64155,t)}}async function DR(r,e,t){const n=pd(r);if(n.fu){for(const s of e){if(n.Tu.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ee(Ji,"Adding an already active target "+s);continue}const a=await h0(n.localStore,s),u=await Ra(n.localStore,a);await Zm(n,k0(a),u.targetId,!1,u.resumeToken),fd(n.remoteStore,u)}for(const s of t)n.Tu.has(s)&&await Da(n.localStore,s,!1).then((()=>{Na(n.remoteStore,s),Va(n,s)})).catch(Qi)}}function pd(r){const e=ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=D0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yR.bind(null,e),e.hu.J_=sR.bind(null,e.eventManager),e.hu.pu=oR.bind(null,e.eventManager),e}function rg(r){const e=ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vR.bind(null,e),e}function NR(r,e,t){const n=ue(r);(async function(a,u,d){try{const f=await u.getMetadata();if(await(function(P,L){const j=ue(P),N=_t(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",(Y=>j.Ti.getBundleMetadata(Y,L.id))).then((Y=>!!Y&&Y.createTime.compareTo(N)>=0))})(a.localStore,f))return await u.close(),d._completeWith((function(P){return{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}})(f)),Promise.resolve(new Set);d._updateProgress(A0(f));const m=new lR(f,u.serializer);let _=await u.Su();for(;_;){const T=await m.Wa(_);T&&d._updateProgress(T),_=await u.Su()}const w=await m.za(a.localStore);return await Jr(a,w.Ja,void 0),await(function(P,L){const j=ue(P);return j.persistence.runTransaction("Save bundle","readwrite",(N=>j.Ti.saveBundleMetadata(N,L)))})(a.localStore,f),d._completeWith(w.progress),Promise.resolve(w.ja)}catch(f){return Cn(Ji,`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}})(n,e,t).then((s=>{n.sharedClientState.notifyBundleLoaded(s)}))}class Iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return a0(this.persistence,new o0,e.initialUser,this.serializer)}Du(e){return new Fm(dd.Vi,this.serializer)}bu(e){return new y0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Iu.provider={build:()=>new Iu};class kR extends Iu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ve(this.persistence.referenceDelegate instanceof $h,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new e0(n,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Fm((n=>$h.Vi(n,t)),this.serializer)}}class V0 extends Iu{constructor(e,t,n){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await rg(this.Mu.syncEngine),await $a(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return a0(this.persistence,new o0,e.initialUser,this.serializer)}Cu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new e0(n,e.asyncQueue,t)}Fu(e,t){const n=new Ux(t,this.persistence);return new Bx(e.asyncQueue,n)}Du(e){const t=Bm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Mm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_0(),Ah(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new y0}}class VR extends V0{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof mp&&(this.sharedClientState.syncEngine={Do:xR.bind(null,t),vo:RR.bind(null,t),Co:DR.bind(null,t),Ps:CR.bind(null,t),bo:AR.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji((async n=>{await PR(this.Mu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}bu(e){const t=_0();if(!mp.C(t))throw new Z(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Bm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Su{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>vw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=TR.bind(null,this.syncEngine),await Qp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iR})()}createDatastore(e){const t=Bu(e.databaseInfo.databaseId),n=(function(a){return new BC(a)})(e.databaseInfo);return(function(a,u,d,f){return new qC(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,a,u,d){return new WC(n,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>vw(this.syncEngine,t,0)),(function(){return dw.C()?new dw:new OC})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const w=new hR(s,a,u,d,f,m);return _&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ue(s);ee(Xs,"RemoteStore shutting down."),a.Ia.add(5),await za(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Su.provider={build:()=>new Su};function Ew(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class md{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class bR{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new qt,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then((n=>{n&&n.Qa()?this.metadata.resolve(n.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.qa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const t=this.Bu.decode(e),n=Number(t);isNaN(n)&&this.qu(`length string (${t}) is not valid number`);const s=await this.Qu(n);return new aR(JSON.parse(s),e.length+n)}$u(){return this.buffer.findIndex((e=>e===123))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class jR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const u=ue(s),d={documents:a.map((w=>Eu(u.serializer,w)))},f=await u.Jo("BatchGetDocuments",u.serializer.databaseId,Ve.emptyPath(),d,a.length),m=new Map;f.forEach((w=>{const T=GP(u.serializer,w);m.set(T.key.toString(),T)}));const _=[];return a.forEach((w=>{const T=m.get(w.toString());ve(!!T,55234,{key:w}),_.push(T)})),_})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ua(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const s=ae.fromPath(n);this.mutations.push(new Cm(s,this.precondition(s)))})),await(async function(n,s){const a=ue(n),u={writes:s.map((d=>Tu(a.serializer,d)))};await a.Wo("Commit",a.serializer.databaseId,Ve.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Wu:e.constructor.name});t=Ie.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Z(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ie.min())?lt.exists(!1):lt.updateTime(t):lt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ie.min()))throw new Z(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lt.updateTime(t)}return lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OR{constructor(e,t,n,s,a){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=s,this.deferred=a,this.Gu=n.maxAttempts,this.F_=new qm(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new jR(this.datastore),t=this.Ju(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((s=>{this.Hu(s)}))))})).catch((n=>{this.Hu(n)}))}))}Ju(e){try{const t=this.updateFunction(e);return!ku(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!DT(t)}return!1}}const Ki="FirestoreClient";class LR{constructor(e,t,n,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Lt.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async u=>{ee(Ki,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(ee(Ki,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ka(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yp(r,e){r.asyncQueue.verifyOperationInProgress(),ee(Ki,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await l0(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>{Cn("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Cn("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),r._offlineComponents=e}async function Tw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await ig(r);ee(Ki,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>pw(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>pw(e.remoteStore,s))),r._onlineComponents=e}async function ig(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ee(Ki,"Using user provided OfflineComponentProvider");try{await yp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Cn("Error using user provided cache. Falling back to memory cache: "+t),await yp(r,new Iu)}}else ee(Ki,"Using default OfflineComponentProvider"),await yp(r,new kR(void 0));return r._offlineComponents}async function gd(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ee(Ki,"Using user provided OnlineComponentProvider"),await Tw(r,r._uninitializedComponentsProvider._online)):(ee(Ki,"Using default OnlineComponentProvider"),await Tw(r,new Su))),r._onlineComponents}function b0(r){return ig(r).then((e=>e.persistence))}function sg(r){return ig(r).then((e=>e.localStore))}function j0(r){return gd(r).then((e=>e.remoteStore))}function og(r){return gd(r).then((e=>e.syncEngine))}function FR(r){return gd(r).then((e=>e.datastore))}async function ba(r){const e=await gd(r),t=e.eventManager;return t.onListen=dR.bind(null,e.syncEngine),t.onUnlisten=pR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mR.bind(null,e.syncEngine),t}function MR(r){return r.asyncQueue.enqueue((async()=>{const e=await b0(r),t=await j0(r);return e.setNetworkEnabled(!0),(function(s){const a=ue(s);return a.Ia.delete(0),Uu(a)})(t)}))}function BR(r){return r.asyncQueue.enqueue((async()=>{const e=await b0(r),t=await j0(r);return e.setNetworkEnabled(!1),(async function(s){const a=ue(s);a.Ia.add(0),await za(a),a.Aa.set("Offline")})(t)}))}function UR(r,e){const t=new qt;return r.asyncQueue.enqueueAndForget((async()=>(async function(s,a,u){try{const d=await(function(m,_){const w=ue(m);return w.persistence.runTransaction("read document","readonly",(T=>w.localDocuments.getDocument(T,_)))})(s,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Z(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Ka(d,`Failed to get document '${a} from cache`);u.reject(f)}})(await sg(r),e,t))),t.promise}function O0(r,e,t={}){const n=new qt;return r.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new md({next:T=>{_.Ou(),u.enqueueAndForget((()=>Xm(a,w)));const P=T.docs.has(d);!P&&T.fromCache?m.reject(new Z(K.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&f&&f.source==="server"?m.reject(new Z(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new Jm(Ma(d.path),_,{includeMetadataChanges:!0,ka:!0});return Hm(a,w)})(await ba(r),r.asyncQueue,e,t,n))),n.promise}function zR(r,e){const t=new qt;return r.asyncQueue.enqueueAndForget((async()=>(async function(s,a,u){try{const d=await qh(s,a,!0),f=new C0(a,d.qs),m=f.nu(d.documents),_=f.applyChanges(m,!1);u.resolve(_.snapshot)}catch(d){const f=Ka(d,`Failed to execute query '${a} against cache`);u.reject(f)}})(await sg(r),e,t))),t.promise}function L0(r,e,t={}){const n=new qt;return r.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new md({next:T=>{_.Ou(),u.enqueueAndForget((()=>Xm(a,w))),T.fromCache&&f.source==="server"?m.reject(new Z(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new Jm(d,_,{includeMetadataChanges:!0,ka:!0});return Hm(a,w)})(await ba(r),r.asyncQueue,e,t,n))),n.promise}function $R(r,e){const t=new md(e);return r.asyncQueue.enqueueAndForget((async()=>(function(s,a){ue(s).Da.add(a),a.next()})(await ba(r),t))),()=>{t.Ou(),r.asyncQueue.enqueueAndForget((async()=>(function(s,a){ue(s).Da.delete(a)})(await ba(r),t)))}}function qR(r,e,t,n){const s=(function(u,d){let f;return f=typeof u=="string"?fm().encode(u):u,(function(_,w){return new bR(_,w)})((function(_,w){if(_ instanceof Uint8Array)return Ew(_,w);if(_ instanceof ArrayBuffer)return Ew(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),d)})(t,Bu(e));r.asyncQueue.enqueueAndForget((async()=>{NR(await og(r),s,n)}))}function KR(r,e){return r.asyncQueue.enqueue((async()=>(function(n,s){const a=ue(n);return a.persistence.runTransaction("Get named query","readonly",(u=>a.Ti.getNamedQuery(u,s)))})(await sg(r),e)))}function F0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Iw=new Map;const M0="firestore.googleapis.com",Sw=!0;class Aw{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M0,this.ssl=Sw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dC)throw new Z(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F0((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Z(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Z(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Z(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zu{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Aw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Aw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Rx;switch(n.type){case"firstParty":return new Vx(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Z(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Iw.get(t);n&&(ee("ComponentProvider","Removing Datastore"),Iw.delete(t),n.terminate())})(this),Promise.resolve()}}function WR(r,e,t,n={}){var s;r=ze(r,zu);const a=sm(e),u=r._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:r._getEmulatorOptions()}),f=`${e}:${t}`;a&&(WA(`https://${f}`),XA("Firestore",!0)),u.host!==M0&&u.host!==f&&Cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:n});if(!fa(m,d)&&(r._setSettings(m),n.mockUserToken)){let _,w;if(typeof n.mockUserToken=="string")_=n.mockUserToken,w=Lt.MOCK_USER;else{_=GA(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const T=n.mockUserToken.sub||n.mockUserToken.user_id;if(!T)throw new Z(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Lt(T)}r._authCredentials=new Dx(new NE(_,w))}}let ln=class B0{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new B0(this.firestore,e,this._query)}},Ze=class Yl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yl(this.firestore,e,this._key)}toJSON(){return{type:Yl._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Nu(t,Yl._jsonSchema))return new Yl(e,n||null,new ae(Ve.fromString(t.referencePath)))}};Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:It("string",Ze._jsonSchemaVersion),referencePath:It("string")};let Oi=class U0 extends ln{constructor(e,t,n){super(e,t,Ma(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new ae(e))}withConverter(e){return new U0(this.firestore,e,this._path)}};function z0(r,e,...t){if(r=St(r),mm("collection","path",e),r instanceof zu){const n=Ve.fromString(e,...t);return fv(n),new Oi(r,null,n)}{if(!(r instanceof Ze||r instanceof Oi))throw new Z(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Ve.fromString(e,...t));return fv(n),new Oi(r.firestore,null,n)}}function GR(r,e){if(r=ze(r,zu),mm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ln(r,null,(function(n){return new Hr(Ve.emptyPath(),n)})(e))}function Qh(r,e,...t){if(r=St(r),arguments.length===1&&(e=pm.newId()),mm("doc","path",e),r instanceof zu){const n=Ve.fromString(e,...t);return dv(n),new Ze(r,null,new ae(n))}{if(!(r instanceof Ze||r instanceof Oi))throw new Z(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Ve.fromString(e,...t));return dv(n),new Ze(r.firestore,r instanceof Oi?r.converter:null,new ae(n))}}function $0(r,e){return r=St(r),e=St(e),(r instanceof Ze||r instanceof Oi)&&(e instanceof Ze||e instanceof Oi)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function q0(r,e){return r=St(r),e=St(e),r instanceof ln&&e instanceof ln&&r.firestore===e.firestore&&ju(r._query,e._query)&&r.converter===e.converter}const xw="AsyncQueue";class Pw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qm(this,"async_queue_retry"),this.oc=()=>{const n=Ah();n&&ee(xw,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const t=Ah();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ah();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new qt;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hi(e))throw e;ee(xw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((n=>{throw this.tc=n,this.nc=!1,yt("INTERNAL UNHANDLED ERROR: ",Cw(n)),n})).then((n=>(this.nc=!1,n))))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Qm.createAndSchedule(this,e,t,n,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&he(47125,{hc:Cw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Cw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Yp(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1})(r,["next","error","complete"])}class QR{constructor(){this._progressObserver={},this._taskCompletionResolver=new qt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const HR=-1;let vt=class extends zu{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Pw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pw(e),this._firestoreClient=void 0,await e}}};function Zt(r){if(r._terminated)throw new Z(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||K0(r),r._firestoreClient}function K0(r){var e,t,n;const s=r._freezeSettings(),a=(function(d,f,m,_){return new gP(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,F0(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new LR(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(r._componentsProvider))}function XR(r,e){Cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return W0(r,Su.provider,{build:n=>new V0(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function YR(r){Cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();W0(r,Su.provider,{build:t=>new VR(t,e.cacheSizeBytes)})}function W0(r,e,t){if((r=ze(r,vt))._firestoreClient||r._terminated)throw new Z(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new Z(K.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},K0(r)}function JR(r){if(r._initialized&&!r._terminated)throw new Z(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qt;return r._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!Tr.C())return Promise.resolve();const s=n+s0;await Tr.delete(s)})(Bm(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ZR(r){return(function(t){const n=new qt;return t.asyncQueue.enqueueAndForget((async()=>wR(await og(t),n))),n.promise})(Zt(r=ze(r,vt)))}function eD(r){return MR(Zt(r=ze(r,vt)))}function tD(r){return BR(Zt(r=ze(r,vt)))}function nD(r,e){const t=Zt(r=ze(r,vt)),n=new QR;return qR(t,r._databaseId,e,n),n}function rD(r,e){return KR(Zt(r=ze(r,vt)),e).then((t=>t?new ln(r,null,t.query):null))}class Yt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yt(pt.fromBase64String(e))}catch(t){throw new Z(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yt(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,Yt._jsonSchema))return Yt.fromBase64String(e.bytes)}}Yt._jsonSchemaVersion="firestore/bytes/1.0",Yt._jsonSchema={type:It("string",Yt._jsonSchemaVersion),bytes:It("string")};let Wi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let eo=class{constructor(e){this._methodName=e}};class sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sr._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,sr._jsonSchema))return new sr(e.latitude,e.longitude)}}sr._jsonSchemaVersion="firestore/geoPoint/1.0",sr._jsonSchema={type:It("string",sr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};class Sr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sr(e.vectorValues);throw new Z(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:It("string",Sr._jsonSchemaVersion),vectorValues:It("object")};const iD=/^__.*__$/;class sD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class G0{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Q0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:r})}}class yd{constructor(e,t,n,s,a,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Hh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Q0(this.Ec)&&iD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oD{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bu(e)}Dc(e,t,n,s=!1){return new yd({Ec:e,methodName:t,bc:n,path:at.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function to(r){const e=r._freezeSettings(),t=Bu(r._databaseId);return new oD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function _d(r,e,t,n,s,a={}){const u=r.Dc(a.merge||a.mergeFields?2:0,e,t,s);fg("Data must be an object, but it was:",u,n);const d=Y0(n,u);let f,m;if(a.merge)f=new _n(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const T=Jp(e,w,t);if(!u.contains(T))throw new Z(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Z0(_,T)||_.push(T)}f=new _n(_),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new sD(new $t(d),f,m)}class $u extends eo{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $u}}function H0(r,e,t){return new yd({Ec:3,bc:e.settings.bc,methodName:r._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ag extends eo{_toFieldTransform(e){return new Lu(e.path,new xa)}isEqual(e){return e instanceof ag}}class lg extends eo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=H0(this,e,!0),n=this.vc.map((a=>no(a,t))),s=new Ks(n);return new Lu(e.path,s)}isEqual(e){return e instanceof lg&&fa(this.vc,e.vc)}}class ug extends eo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=H0(this,e,!0),n=this.vc.map((a=>no(a,t))),s=new Ws(n);return new Lu(e.path,s)}isEqual(e){return e instanceof ug&&fa(this.vc,e.vc)}}class cg extends eo{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Pa(e.serializer,IT(e.serializer,this.Cc));return new Lu(e.path,t)}isEqual(e){return e instanceof cg&&this.Cc===e.Cc}}function hg(r,e,t,n){const s=r.Dc(1,e,t);fg("Data must be an object, but it was:",s,n);const a=[],u=$t.empty();Xi(n,((f,m)=>{const _=pg(e,f,t);m=St(m);const w=s.gc(_);if(m instanceof $u)a.push(_);else{const T=no(m,w);T!=null&&(a.push(_),u.set(_,T))}}));const d=new _n(a);return new G0(u,d,s.fieldTransforms)}function dg(r,e,t,n,s,a){const u=r.Dc(1,e,t),d=[Jp(e,n,t)],f=[s];if(a.length%2!=0)throw new Z(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Jp(e,a[T])),f.push(a[T+1]);const m=[],_=$t.empty();for(let T=d.length-1;T>=0;--T)if(!Z0(m,d[T])){const P=d[T];let L=f[T];L=St(L);const j=u.gc(P);if(L instanceof $u)m.push(P);else{const N=no(L,j);N!=null&&(m.push(P),_.set(P,N))}}const w=new _n(m);return new G0(_,w,u.fieldTransforms)}function X0(r,e,t,n=!1){return no(t,r.Dc(n?4:3,e))}function no(r,e){if(J0(r=St(r)))return fg("Unsupported field value:",e,r),Y0(r,e);if(r instanceof eo)return(function(n,s){if(!Q0(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(n,s){const a=[];let u=0;for(const d of n){let f=no(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(r,e)}return(function(n,s){if((n=St(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IT(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Ke.fromDate(n);return{timestampValue:Ca(s.serializer,a)}}if(n instanceof Ke){const a=new Ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ca(s.serializer,a)}}if(n instanceof sr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yt)return{bytesValue:bT(s.serializer,n._byteString)};if(n instanceof Ze){const a=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vm(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Sr)return(function(u,d){return{mapValue:{fields:{[Tm]:{stringValue:Im},[Ia]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Pm(d.serializer,m)}))}}}}}})(n,s);throw s.wc(`Unsupported field value: ${ed(n)}`)})(r,e)}function Y0(r,e){const t={};return JE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(r,((n,s)=>{const a=no(s,e.Vc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function J0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ke||r instanceof sr||r instanceof Yt||r instanceof Ze||r instanceof eo||r instanceof Sr)}function fg(r,e,t){if(!J0(t)||!bE(t)){const n=ed(t);throw n==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+n)}}function Jp(r,e,t){if((e=St(e))instanceof Wi)return e._internalPath;if(typeof e=="string")return pg(r,e);throw Hh("Field path arguments must be of type string or ",r,!1,void 0,t)}const aD=new RegExp("[~\\*/\\[\\]]");function pg(r,e,t){if(e.search(aD)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Wi(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Hh(r,e,t,n,s){const a=n&&!n.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${n}`),u&&(f+=` in document ${s}`),f+=")"),new Z(K.INVALID_ARGUMENT,d+r+f)}function Z0(r,e){return r.some((t=>t.isEqual(e)))}class Au{constructor(e,t,n,s,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lD extends Au{data(){return super.data()}}function vd(r,e){return typeof e=="string"?pg(r,e):e instanceof Wi?e._internalPath:e._delegate._internalPath}function eI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Z(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class qu extends mg{}function Pi(r,e,...t){let n=[];e instanceof mg&&n.push(e),n=n.concat(t),(function(a){const u=a.filter((f=>f instanceof gg)).length,d=a.filter((f=>f instanceof wd)).length;if(u>1||u>0&&d>0)throw new Z(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class wd extends qu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wd(e,t,n)}_apply(e){const t=this._parse(e);return nI(e._query,t),new ln(e.firestore,e.converter,Fp(e._query,t))}_parse(e){const t=to(e.firestore);return(function(a,u,d,f,m,_,w){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Z(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Dw(w,_);const L=[];for(const j of w)L.push(Rw(f,a,j));T={arrayValue:{values:L}}}else T=Rw(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Dw(w,_),T=X0(d,u,w,_==="in"||_==="not-in");return be.create(m,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function uD(r,e,t){const n=e,s=vd("where",r);return wd._create(s,n,t)}class gg extends mg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gg(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Ge.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)nI(u,f),u=Fp(u,f)})(e._query,t),new ln(e.firestore,e.converter,Fp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yg extends qu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yg(e,t)}_apply(e){const t=(function(s,a,u){if(s.startAt!==null)throw new Z(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(a,u)})(e._query,this._field,this._direction);return new ln(e.firestore,e.converter,(function(s,a){const u=s.explicitOrderBy.concat([a]);return new Hr(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function cD(r,e="asc"){const t=e,n=vd("orderBy",r);return yg._create(n,t)}class Ed extends qu{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ed(e,t,n)}_apply(e){return new ln(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function hD(r){return jE("limit",r),Ed._create("limit",r,"F")}function dD(r){return jE("limitToLast",r),Ed._create("limitToLast",r,"L")}class Td extends qu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Td(e,t,n)}_apply(e){const t=tI(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,(function(s,a){return new Hr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)})(e._query,t))}}function fD(...r){return Td._create("startAt",r,!0)}function pD(...r){return Td._create("startAfter",r,!1)}class Id extends qu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Id(e,t,n)}_apply(e){const t=tI(e,this.type,this._docOrFields,this._inclusive);return new ln(e.firestore,e.converter,(function(s,a){return new Hr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)})(e._query,t))}}function mD(...r){return Id._create("endBefore",r,!1)}function gD(...r){return Id._create("endAt",r,!0)}function tI(r,e,t,n){if(t[0]=St(t[0]),t[0]instanceof Au)return(function(a,u,d,f,m){if(!f)throw new Z(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const w of ca(a))if(w.field.isKeyField())_.push($s(u,f.key));else{const T=f.data.field(w.field);if(sd(T))throw new Z(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const P=w.field.canonicalString();throw new Z(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}_.push(T)}return new $i(_,m)})(r._query,r.firestore._databaseId,e,t[0]._document,n);{const s=to(r.firestore);return(function(u,d,f,m,_,w){const T=u.explicitOrderBy;if(_.length>T.length)throw new Z(K.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let L=0;L<_.length;L++){const j=_[L];if(T[L].field.isKeyField()){if(typeof j!="string")throw new Z(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!Am(u)&&j.indexOf("/")!==-1)throw new Z(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const N=u.path.child(Ve.fromString(j));if(!ae.isDocumentKey(N))throw new Z(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const Y=new ae(N);P.push($s(d,Y))}else{const N=X0(f,m,j);P.push(N)}}return new $i(P,w)})(r._query,r.firestore._databaseId,s,e,t,n)}}function Rw(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Z(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Am(e)&&t.indexOf("/")!==-1)throw new Z(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ve.fromString(t));if(!ae.isDocumentKey(n))throw new Z(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return $s(r,new ae(n))}if(t instanceof Ze)return $s(r,t._key);throw new Z(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(t)}.`)}function Dw(r,e){if(!Array.isArray(r)||r.length===0)throw new Z(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nI(r,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Z(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _g{convertValue(e,t="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Xi(e,((s,a)=>{n[s]=this.convertValue(a,t)})),n}convertVectorValue(e){var t,n,s;const a=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[Ia].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((u=>ot(u.doubleValue)));return new Sr(a)}convertGeoPoint(e){return new sr(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=od(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=Gr(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ve.fromString(e);ve(KT(n),9688,{name:e});const s=new Bi(n.get(1),n.get(3)),a=new ae(n.popFirst(5));return s.isEqual(t)||yt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Sd(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class yD extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}}class Ms{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let zn=class rI extends Au{constructor(e,t,n,s,a,u){super(e,t,n,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rI._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};zn._jsonSchemaVersion="firestore/documentSnapshot/1.0",zn._jsonSchema={type:It("string",zn._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};let au=class extends zn{data(e={}){return super.data(e)}},or=class iI{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ms(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new au(this._firestore,this._userDataWriter,n.key,n,new Ms(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new au(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ms(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new au(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ms(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:_D(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=iI._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _D(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:r})}}function sI(r,e){return r instanceof zn&&e instanceof zn?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof or&&e instanceof or&&r._firestore===e._firestore&&q0(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function vD(r){r=ze(r,Ze);const e=ze(r.firestore,vt);return O0(Zt(e),r._key).then((t=>vg(e,r,t)))}or._jsonSchemaVersion="firestore/querySnapshot/1.0",or._jsonSchema={type:It("string",or._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class ro extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}}function wD(r){r=ze(r,Ze);const e=ze(r.firestore,vt),t=Zt(e),n=new ro(e);return UR(t,r._key).then((s=>new zn(e,n,r._key,s,new Ms(s!==null&&s.hasLocalMutations,!0),r.converter)))}function ED(r){r=ze(r,Ze);const e=ze(r.firestore,vt);return O0(Zt(e),r._key,{source:"server"}).then((t=>vg(e,r,t)))}function TD(r){r=ze(r,ln);const e=ze(r.firestore,vt),t=Zt(e),n=new ro(e);return eI(r._query),L0(t,r._query).then((s=>new or(e,n,r,s)))}function ID(r){r=ze(r,ln);const e=ze(r.firestore,vt),t=Zt(e),n=new ro(e);return zR(t,r._query).then((s=>new or(e,n,r,s)))}function SD(r){r=ze(r,ln);const e=ze(r.firestore,vt),t=Zt(e),n=new ro(e);return L0(t,r._query,{source:"server"}).then((s=>new or(e,n,r,s)))}function Nw(r,e,t){r=ze(r,Ze);const n=ze(r.firestore,vt),s=Sd(r.converter,e,t);return Ku(n,[_d(to(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,lt.none())])}function kw(r,e,t,...n){r=ze(r,Ze);const s=ze(r.firestore,vt),a=to(s);let u;return u=typeof(e=St(e))=="string"||e instanceof Wi?dg(a,"updateDoc",r._key,e,t,n):hg(a,"updateDoc",r._key,e),Ku(s,[u.toMutation(r._key,lt.exists(!0))])}function AD(r){return Ku(ze(r.firestore,vt),[new Ua(r._key,lt.none())])}function xD(r,e){const t=ze(r.firestore,vt),n=Qh(r),s=Sd(r.converter,e);return Ku(t,[_d(to(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,lt.exists(!1))]).then((()=>n))}function oI(r,...e){var t,n,s;r=St(r);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Yp(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Yp(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(n=w.error)===null||n===void 0?void 0:n.bind(w),e[u+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,m,_;if(r instanceof Ze)m=ze(r.firestore,vt),_=Ma(r._key.path),f={next:w=>{e[u]&&e[u](vg(m,r,w))},error:e[u+1],complete:e[u+2]};else{const w=ze(r,ln);m=ze(w.firestore,vt),_=w._query;const T=new ro(m);f={next:P=>{e[u]&&e[u](new or(m,T,w,P))},error:e[u+1],complete:e[u+2]},eI(r._query)}return(function(T,P,L,j){const N=new md(j),Y=new Jm(P,N,L);return T.asyncQueue.enqueueAndForget((async()=>Hm(await ba(T),Y))),()=>{N.Ou(),T.asyncQueue.enqueueAndForget((async()=>Xm(await ba(T),Y)))}})(Zt(m),_,d,f)}function PD(r,e){return $R(Zt(r=ze(r,vt)),Yp(e)?e:{next:e})}function Ku(r,e){return(function(n,s){const a=new qt;return n.asyncQueue.enqueueAndForget((async()=>gR(await og(n),s,a))),a.promise})(Zt(r),e)}function vg(r,e,t){const n=t.docs.get(e._key),s=new ro(r);return new zn(r,s,e._key,n,new Ms(t.hasPendingWrites,t.fromCache),e.converter)}const CD={maxAttempts:5};let RD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=to(e)}set(e,t,n){this._verifyNotCommitted();const s=Ni(e,this._firestore),a=Sd(s.converter,t,n),u=_d(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(u.toMutation(s._key,lt.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const a=Ni(e,this._firestore);let u;return u=typeof(t=St(t))=="string"||t instanceof Wi?dg(this._dataReader,"WriteBatch.update",a._key,t,n,s):hg(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ni(e,this._firestore);return this._mutations=this._mutations.concat(new Ua(t._key,lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ni(r,e){if((r=St(r)).firestore!==e)throw new Z(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class DD{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=to(e)}get(e){const t=Ni(e,this._firestore),n=new yD(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return he(24041);const a=s[0];if(a.isFoundDocument())return new Au(this._firestore,n,a.key,a,t.converter);if(a.isNoDocument())return new Au(this._firestore,n,t._key,null,t.converter);throw he(18433,{doc:a})}))}set(e,t,n){const s=Ni(e,this._firestore),a=Sd(s.converter,t,n),u=_d(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,n);return this._transaction.set(s._key,u),this}update(e,t,n,...s){const a=Ni(e,this._firestore);let u;return u=typeof(t=St(t))=="string"||t instanceof Wi?dg(this._dataReader,"Transaction.update",a._key,t,n,s):hg(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Ni(e,this._firestore);return this._transaction.delete(t._key),this}}let ND=class extends DD{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ni(e,this._firestore),n=new ro(this._firestore);return super.get(e).then((s=>new zn(this._firestore,n,t._key,s._document,new Ms(!1,!1),t.converter)))}};function kD(r,e,t){r=ze(r,vt);const n=Object.assign(Object.assign({},CD),t);return(function(a){if(a.maxAttempts<1)throw new Z(K.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,u,d){const f=new qt;return a.asyncQueue.enqueueAndForget((async()=>{const m=await FR(a);new OR(a.asyncQueue,m,d,u,f).zu()})),f.promise})(Zt(r),(s=>e(new ND(r,s))),n)}function VD(){return new $u("deleteField")}function bD(){return new ag("serverTimestamp")}function jD(...r){return new lg("arrayUnion",r)}function OD(...r){return new ug("arrayRemove",r)}function LD(r){return new cg("increment",r)}(function(e,t=!0){(function(s){Fa=s})(um),ga(new zs("firestore",((n,{instanceIdentifier:s,options:a})=>{const u=n.getProvider("app").getImmediate(),d=new vt(new Nx(n.getProvider("auth-internal")),new bx(u,n.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Z(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bi(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Kr(av,lv,e),Kr(av,lv,"esm2017")})();const FD="@firebase/firestore-compat",MD="0.3.53";function wg(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vw(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function bw(){if(!pP())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class xu{constructor(e){this._delegate=e}static fromBase64String(e){return bw(),new xu(Yt.fromBase64String(e))}static fromUint8Array(e){return Vw(),new xu(Yt.fromUint8Array(e))}toBase64(){return bw(),this._delegate.toBase64()}toUint8Array(){return Vw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zp(r){return BD(r,["next","error","complete"])}function BD(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}class UD{enableIndexedDbPersistence(e,t){return XR(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return YR(e._delegate)}clearIndexedDbPersistence(e){return JR(e._delegate)}}class aI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){WR(this._delegate,e,t,n)}enableNetwork(){return eD(this._delegate)}disableNetwork(){return tD(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,VE("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ZR(this._delegate)}onSnapshotsInSync(e){return PD(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ja(this,z0(this._delegate,e))}catch(t){throw on(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Qh(this._delegate,e))}catch(t){throw on(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sn(this,GR(this._delegate,e))}catch(t){throw on(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kD(this._delegate,t=>e(new lI(this,t)))}batch(){return Zt(this._delegate),new uI(new RD(this._delegate,e=>Ku(this._delegate,e)))}loadBundle(e){return nD(this._delegate,e)}namedQuery(e){return rD(this._delegate,e).then(t=>t?new sn(this,t):null)}}class Ad extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new xu(new Yt(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}}function zD(r){Px(r)}class lI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}get(e){const t=Bs(e);return this._delegate.get(t).then(n=>new Pu(this._firestore,new zn(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const s=Bs(e);return n?(wg("Transaction.set",n),this._delegate.set(s,t,n)):this._delegate.set(s,t),this}update(e,t,n,...s){const a=Bs(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,n,...s),this}delete(e){const t=Bs(e);return this._delegate.delete(t),this}}class uI{constructor(e){this._delegate=e}set(e,t,n){const s=Bs(e);return n?(wg("WriteBatch.set",n),this._delegate.set(s,t,n)):this._delegate.set(s,t),this}update(e,t,n,...s){const a=Bs(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,n,...s),this}delete(e){const t=Bs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ys{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new au(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cu(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ys.INSTANCES;let s=n.get(e);s||(s=new WeakMap,n.set(e,s));let a=s.get(t);return a||(a=new Ys(e,new Ad(e),t),s.set(t,a)),a}}Ys.INSTANCES=new WeakMap;class Bn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bn(t,new Ze(t._delegate,n,new ae(e)))}static forKey(e,t,n){return new Bn(t,new Ze(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ja(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ja(this.firestore,z0(this._delegate,e))}catch(t){throw on(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof Ze?$0(this._delegate,e):!1}set(e,t){t=wg("DocumentReference.set",t);try{return t?Nw(this._delegate,e,t):Nw(this._delegate,e)}catch(n){throw on(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?kw(this._delegate,e):kw(this._delegate,e,t,...n)}catch(s){throw on(s,"updateDoc()","DocumentReference.update()")}}delete(){return AD(this._delegate)}onSnapshot(...e){const t=cI(e),n=hI(e,s=>new Pu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return oI(this._delegate,t,n)}get(e){let t;return e?.source==="cache"?t=wD(this._delegate):e?.source==="server"?t=ED(this._delegate):t=vD(this._delegate),t.then(n=>new Pu(this.firestore,new zn(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Bn(this.firestore,e?this._delegate.withConverter(Ys.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function on(r,e,t){return r.message=r.message.replace(e,t),r}function cI(r){for(const e of r)if(typeof e=="object"&&!Zp(e))return e;return{}}function hI(r,e){var t,n;let s;return Zp(r[0])?s=r[0]:Zp(r[1])?s=r[1]:typeof r[0]=="function"?s={next:r[0],error:r[1],complete:r[2]}:s={next:r[1],error:r[2],complete:r[3]},{next:a=>{s.next&&s.next(e(a))},error:(t=s.error)===null||t===void 0?void 0:t.bind(s),complete:(n=s.complete)===null||n===void 0?void 0:n.bind(s)}}class Pu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sI(this._delegate,e._delegate)}}class Cu extends Pu{data(e){const t=this._delegate.data(e);return this._delegate._converter||Cx(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class sn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}where(e,t,n){try{return new sn(this.firestore,Pi(this._delegate,uD(e,t,n)))}catch(s){throw on(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sn(this.firestore,Pi(this._delegate,cD(e,t)))}catch(n){throw on(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sn(this.firestore,Pi(this._delegate,hD(e)))}catch(t){throw on(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sn(this.firestore,Pi(this._delegate,dD(e)))}catch(t){throw on(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sn(this.firestore,Pi(this._delegate,fD(...e)))}catch(t){throw on(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sn(this.firestore,Pi(this._delegate,pD(...e)))}catch(t){throw on(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sn(this.firestore,Pi(this._delegate,mD(...e)))}catch(t){throw on(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sn(this.firestore,Pi(this._delegate,gD(...e)))}catch(t){throw on(t,"endAt()","Query.endAt()")}}isEqual(e){return q0(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=ID(this._delegate):e?.source==="server"?t=SD(this._delegate):t=TD(this._delegate),t.then(n=>new em(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=cI(e),n=hI(e,s=>new em(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return oI(this._delegate,t,n)}withConverter(e){return new sn(this.firestore,e?this._delegate.withConverter(Ys.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class $D{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class em{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $D(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Cu(this._firestore,n))})}isEqual(e){return sI(this._delegate,e._delegate)}}class ja extends sn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Qh(this._delegate)):new Bn(this.firestore,Qh(this._delegate,e))}catch(t){throw on(t,"doc()","CollectionReference.doc()")}}add(e){return xD(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return $0(this._delegate,e._delegate)}withConverter(e){return new ja(this.firestore,e?this._delegate.withConverter(Ys.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bs(r){return ze(r,Ze)}class Eg{constructor(...e){this._delegate=new Wi(...e)}static documentId(){return new Eg(at.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof Wi?this._delegate._internalPath.isEqual(e._internalPath):!1}}class Ls{static serverTimestamp(){const e=bD();return e._methodName="FieldValue.serverTimestamp",new Ls(e)}static delete(){const e=VD();return e._methodName="FieldValue.delete",new Ls(e)}static arrayUnion(...e){const t=jD(...e);return t._methodName="FieldValue.arrayUnion",new Ls(t)}static arrayRemove(...e){const t=OD(...e);return t._methodName="FieldValue.arrayRemove",new Ls(t)}static increment(e){const t=LD(e);return t._methodName="FieldValue.increment",new Ls(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qD={Firestore:aI,GeoPoint:sr,Timestamp:Ke,Blob:xu,Transaction:lI,WriteBatch:uI,DocumentReference:Bn,DocumentSnapshot:Pu,Query:sn,QueryDocumentSnapshot:Cu,QuerySnapshot:em,CollectionReference:ja,FieldPath:Eg,FieldValue:Ls,setLogLevel:zD,CACHE_SIZE_UNLIMITED:HR};function KD(r,e){r.INTERNAL.registerComponent(new zs("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(n,s)},"PUBLIC").setServiceProps(Object.assign({},qD)))}function WD(r){KD(r,(e,t)=>new aI(e,t,new UD)),r.registerVersion(FD,MD)}WD(kh);function GD(r){if(!r)return null;if(typeof r.collection=="function")return console.log(" Firestore j est em modo compat (Portal)."),r;if(r._delegate){console.log(" Convertendo Firestore modular  compat (Cronograma)");const e=window.__RELEVO_FIREBASE__?._options;if(!e)return console.error(" No foi possvel obter opes do Firebase para adaptao compat."),null;let t;try{t=kh.initializeApp(e,"cronograma-compat")}catch{t=kh.app("cronograma-compat")}return t.firestore()}return console.warn(" Tipo de DB no reconhecido:",r),null}function dI(r=15e3){return new Promise((e,t)=>{const n=Date.now();function s(){const a=window.__RELEVO_DB__,u=window.__RELEVO_AUTH__,d=window.__RELEVO_USER__;if(a&&u&&d){console.log(" [relevo-bootstrap] Firebase + USER prontos via Portal.");const m=GD(a);return m?e({db:m,auth:u,user:d}):t(new Error("[relevo-bootstrap] Falha ao converter Firestore para compat."))}if(Date.now()-n>r)return t(new Error("[relevo-bootstrap] Timeout aguardando DB/AUTH/USER do Portal"));requestAnimationFrame(s)}s()})}const fI=H.createContext();function QD({children:r,initialUser:e}){console.log("[UserProvider] MONTANDO UserProvider  initialUser:",e);const[t,n]=H.useState(e||null),[s,a]=H.useState(!e);return H.useEffect(()=>{if(e){console.log("[UserProvider] Usurio j fornecido pelo Portal:",e),n(e),a(!1);return}console.log("[UserProvider] Aguardando usurio via bootstrapCronograma()"),dI().then(u=>{console.log("[UserProvider] Bootstrap OK  usurio recebido (BRUTO):",u.user);const d=u.user,f=d?{uid:d.uid||null,email:d.email||null}:null;console.log("[UserProvider] Usurio NORMALIZADO:",f),n(f),a(!1)}).catch(u=>{console.error("[UserProvider] Erro no bootstrapCronograma:",u),a(!1)})},[]),E.jsx(fI.Provider,{value:{user:t,loading:s},children:r})}const pI=()=>H.useContext(fI);function Zi(){const r=window.__RELEVO_DB__;if(!r)throw new Error("Firestore ainda no disponvel em window.__RELEVO_DB__ (cronogramaService).");return r}async function HD(r=null){const e=Zi();console.log("[cronogramaService] listarProjetos()  uid =",r);let t=e.collection("projetos");if(typeof r=="string"&&r.trim()!=="")t=t.where("uid","==",r.trim());else return console.warn("[cronogramaService] UID invlido  retorno vazio:",r),[];const n=await t.get();return console.log("[cronogramaService] listarProjetos()  docs encontrados:",n.docs.length),n.docs.map(s=>({id:s.id,...s.data()}))}async function XD(r){const e=Zi(),t={...r,criadoEm:r.criadoEm||new Date};return console.log("[cronogramaService] criarProjeto()  payload:",t),{id:(await e.collection("projetos").add(t)).id,...t}}async function YD(r,e){await Zi().collection("projetos").doc(r).update(e)}async function JD(r){await Zi().collection("projetos").doc(r).delete()}async function ZD(r=null){let t=Zi().collection("tarefas");typeof r=="string"&&r.trim()!==""&&(t=t.where("projetoId","==",r.trim()));const n=await t.get();return console.log("[cronogramaService] listarTarefas()  docs encontrados:",n.docs.length,"filtro projetoId =",r),n.docs.map(s=>({id:s.id,...s.data()}))}async function eN(r){const e=Zi(),t={...r,criadoEm:r.criadoEm||new Date};return console.log("[cronogramaService] criarTarefa()  payload:",t),{id:(await e.collection("tarefas").add(t)).id,...t}}async function tN(r,e){await Zi().collection("tarefas").doc(r).update(e)}async function nN(r){await Zi().collection("tarefas").doc(r).delete()}const mI=H.createContext();function rN({children:r}){console.log("[CronogramaProvider] MONTANDO");const{user:e}=pI(),[t,n]=H.useState(!0),[s,a]=H.useState([]),[u,d]=H.useState([]),f=H.useCallback(async()=>{if(console.log("[CronogramaProvider] carregarDados() CHAMADO",{temUser:!!e,uid:e?.uid}),!e||!e.uid){console.warn("[CronogramaProvider] carregarDados abortado  user/uid indisponvel:",e);return}try{n(!0);const[j,N]=await Promise.all([HD(e.uid),ZD()]);console.log("[CronogramaProvider] Dados recebidos:",j.length,"projetos e",N.length,"tarefas"),a(j),d(N)}catch(j){console.error("[CronogramaProvider] Erro ao carregar dados:",j)}finally{n(!1)}},[e]);H.useEffect(()=>{f()},[f]);const m=async j=>{if(!e||!e.uid){console.warn("[CronogramaProvider] criarProjeto abortado  sem user.uid");return}await XD({...j,uid:e.uid}),await f()},_=async(j,N)=>{await YD(j,N),await f()},w=async j=>{await JD(j),await f()},T=async j=>{await eN(j),await f()},P=async(j,N)=>{await tN(j,N),await f()},L=async j=>{await nN(j),await f()};return E.jsx(mI.Provider,{value:{carregando:t,projetos:s,tarefas:u,criarProjeto:m,editarProjeto:_,removerProjeto:w,criarTarefa:T,editarTarefa:P,removerTarefa:L,atualizar:f},children:r})}function es(){return H.useContext(mI)}function jw(r){if(!r)return null;const e=new Date(r);return isNaN(e.getTime())?null:e}function Tg(r,e){if(!r||!e)return 0;const t=e.getTime()-r.getTime();return Math.round(t/(1e3*60*60*24))}function Ru(r){return r?r.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function Ig(r){const e=new Date(r),t=e.getDay(),n=(t===0?-6:1)-t;return e.setDate(e.getDate()+n),e.setHours(0,0,0,0),e}function gI(r){const e=Ig(r),t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return`${t}/${n}`}function iN(r,e){const t=new Date(e);return t.setHours(0,0,0,0),(r||[]).map(n=>{const s=jw(n.inicio),a=jw(n.fim);let u=n.status||"pendente";a&&a<t&&u!=="concluida"&&(u="atrasada");const d=s&&a?Tg(s,a)+1:null;return{...n,inicioDate:s,fimDate:a,statusEfetivo:u,duracaoDias:d}})}function sN(r,e){const t=(e||[]).length,n=r.length,s=r.filter(_=>_.statusEfetivo==="concluida").length,a=r.filter(_=>_.statusEfetivo==="atrasada").length,u=r.filter(_=>_.statusEfetivo==="andamento").length,d=r.filter(_=>_.statusEfetivo==="pendente").length,f=n>0?Math.round(s/n*100):0,m=n>0?Math.round(a/n*100):0;return{totalProjetos:t,totalTarefas:n,concluidas:s,atrasadas:a,andamento:u,pendentes:d,percConcluidas:f,percAtrasadas:m}}function oN(r){return r.totalTarefas===0?"Nenhuma tarefa cadastrada por enquanto. tima janela para planejar com calma o prximo projeto.":r.atrasadas===0&&r.percConcluidas>=60?`Cronograma saudvel: ${r.percConcluidas}% das tarefas concludas e nenhuma em atraso.`:r.atrasadas>0&&r.percAtrasadas<=20?`Algumas tarefas em atraso (${r.atrasadas}), mas o cenrio ainda  recupervel com ajustes pontuais.`:r.percAtrasadas>20?`Cronograma em risco: ${r.percAtrasadas}% das tarefas esto em atraso. Hora de replanejar a linha de base.`:`Execuo em andamento: ${r.concluidas} concludas, ${r.andamento} em andamento e ${r.atrasadas} em atraso.`}function aN(r,e){const t=Object.fromEntries((e||[]).map(n=>[n.id,n.nome||n.titulo||n.id]));return r.filter(n=>n.statusEfetivo==="atrasada").sort((n,s)=>(n.fimDate||0)-(s.fimDate||0)).slice(0,5).map(n=>({nome:n.nome,projeto:t[n.projetoId]||"",fimOriginal:Ru(n.fimDate),diasAtraso:Tg(n.fimDate,new Date)}))}function lN(r,e){const t=Object.fromEntries((e||[]).map(n=>[n.id,n.nome||n.titulo||n.id]));return r.filter(n=>n.statusEfetivo==="andamento").sort((n,s)=>(n.fimDate||0)-(s.fimDate||0)).slice(0,6).map(n=>({nome:n.nome,projeto:t[n.projetoId]||"",fimPrevisto:Ru(n.fimDate)}))}function uN(r,e){const t=Object.fromEntries((e||[]).map(u=>[u.id,u.nome||u.titulo||u.id])),n=new Date,s=new Date;return s.setDate(n.getDate()+10),r.filter(u=>{if(!u.fimDate||u.statusEfetivo==="concluida")return!1;const d=(u.nome||"").toLowerCase(),f=d.includes("relatrio")||d.includes("relatorio")||d.includes("entrega")||d.includes("produto")||d.includes("pagamento"),m=u.fimDate<=s,_=typeof u.duracaoDias=="number"?u.duracaoDias>=7:!1;return f||m||_}).sort((u,d)=>(u.fimDate||0)-(d.fimDate||0)).slice(0,5).map(u=>({nome:u.nome,projeto:t[u.projetoId]||"",fimPrevisto:Ru(u.fimDate)}))}function cN(r){if(!r.length)return{dataProvavel:null,diasPotencialAtraso:0,texto:"Sem tarefas cadastradas, ainda no h projeo de concluso."};const e=r.filter(d=>d.fimDate).map(d=>d.fimDate).sort((d,f)=>d-f)[r.length-1],t=r.filter(d=>d.statusEfetivo==="atrasada"),n=new Date;let s=0;if(t.length>0){const d=Math.max(...t.map(f=>Tg(f.fimDate,n)));s=Math.max(d,0)}const a=new Date(e);a.setDate(a.getDate()+s);let u;return s===0?u=`Mantida a linha de base, a concluso geral  esperada em ${Ru(a)}.`:u=`Se as pendncias atuais no forem replanejadas, a concluso geral pode escorregar cerca de ${s} dia(s), para ${Ru(a)}.`,{dataProvavel:a,diasPotencialAtraso:s,texto:u}}function hN(r){const e=new Date,t=[];for(let s=7;s>=0;s--){const a=new Date(e);a.setDate(a.getDate()-s*7);const u=Ig(a),d=new Date(u);d.setDate(u.getDate()+6);const f=r.filter(m=>!m.statusEfetivo==="concluida"||!m.fimDate?!1:m.fimDate>=u&&m.fimDate<=d).length;t.push({label:gI(u),valor:f})}const n=Math.max(...t.map(s=>s.valor),1);return t.map(s=>({...s,percent:Math.round(s.valor/n*100)}))}function dN(r){const e=new Date,t=[];for(let n=0;n<8;n++){const s=Ig(new Date(e));s.setDate(s.getDate()+n*7);const a=new Date(s);a.setDate(s.getDate()+6);const u=r.filter(f=>f.fimDate?f.fimDate>=s&&f.fimDate<=a:!1).length;let d=1;u>=8?d=3:u>=4&&(d=2),t.push({label:gI(s),carga:u,nivel:d})}return t}function fN(r){const e=r.map(f=>f.nome+" "+(f.descricao||"")).join(" ").toLowerCase(),t=e.includes("campo")||e.includes("monitoramento")||e.includes("levantamento"),n=e.includes("anlise")||e.includes("analise")||e.includes("tratamento dos dados")||e.includes("processamento"),s=e.includes("licena")||e.includes("licenca")||e.includes("ibama")||e.includes("dnit")||e.includes("parecer")||e.includes("cliente"),a=r.some(f=>{const m=(f.nome||"").toLowerCase();return(m.includes("entrega")||m.includes("parcial")||m.includes("produto"))&&f.statusEfetivo==="atrasada"}),u=r.filter(f=>{const m=(f.nome||"").toLowerCase();return m.includes("relatrio final")||m.includes("relatorio final")||m.includes("rima")||m.includes("relatrio tcnico")}).length;return[{id:"campo",titulo:"Atraso por tempo de campo",nivel:t?"alto":"mdio",descricao:"Atividades de campo sensveis a clima e logstica. Manter plano B para janelas de chuva e imprevistos de acesso."},{id:"analise",titulo:"Sobrecarga de anlise",nivel:n?"alto":"mdio",descricao:"Etapas de tratamento e anlise de dados concentradas em poucos profissionais podem criar gargalos."},{id:"externo",titulo:"Dependncia externa",nivel:s?"alto":"mdio",descricao:"Dependncia de aprovaes de rgos, clientes ou terceiros. Acompanhar de perto prazos de resposta."},{id:"entregas",titulo:"Atraso nas entregas intermedirias",nivel:a?"alto":"mdio",descricao:"Produtos parciais em atraso tendem a empurrar o trabalho para o final do cronograma."},{id:"relatorio",titulo:"Acmulo de tarefas no relatrio final",nivel:u>=3?"alto":"mdio",descricao:"Muitas atividades convergindo para o relatrio final aumentam o risco de correria na reta final."}]}function pN(r,e,t,n){const s=[];r.atrasadas>0&&s.push({tipo:"risco",mensagem:`Voc tem ${r.atrasadas} tarefa(s) em atraso. Vale uma reunio rpida de replanejamento antes que isso escale.`});const a=n.find(u=>u.nivel===3);if(a&&s.push({tipo:"risco",mensagem:`Semana iniciando em ${a.label} est com carga crtica (${a.carga} entregas). Recomenda-se redistribuir atividades.`}),t.length>0){const u=t.slice(0,3).map(d=>d.nome).join(", ");s.push({tipo:"acao",mensagem:`Olho no caminho crtico: ${u}. Um pequeno atraso aqui derruba a data de concluso.`})}return!s.length&&r.totalTarefas>0&&s.push({tipo:"info",mensagem:"Nenhum risco gritante no radar imediato. Boa hora para consolidar documentao e atualizar status no sistema."}),s}function mN(r,e,t,n){if(r.totalTarefas===0)return"Ainda no h tarefas cadastradas no cronograma. Assim que o primeiro plano de trabalho for modelado aqui, este painel passa a funcionar como cockpit de execuo da Relevo.";const s=[];if(s.push(`Atualmente o portflio conta com ${r.totalProjetos} projeto(s) e ${r.totalTarefas} tarefa(s) cadastradas, com ${r.percConcluidas}% j concludas.`),r.atrasadas>0){const a=e.slice(0,3).map(u=>u.nome).join(", ");s.push(`Existem ${r.atrasadas} tarefa(s) em atraso, com destaque para: ${a}.`)}else s.push("No h tarefas em atraso neste momento, o que indica boa aderncia  linha de base planejada.");if(t.length>0){const a=t.slice(0,3).map(u=>u.nome).join(", ");s.push(`As frentes em execuo concentram-se em: ${a}, mantendo o cronograma em movimento.`)}return s.push(n.texto),s.join(" ")}function gN(r,e){const t=new Date,n=iN(r||[],t),s=sN(n,e||[]),a=aN(n,e||[]),u=lN(n,e||[]),d=uN(n,e||[]),f=cN(n),m=hN(n),_=dN(n),w=fN(n),T=pN(s,a,d,_),P=oN(s),L=mN(s,a,u,f);return{hoje:t,kpis:s,atrasadas:a,andamento:u,criticas:d,previsao:f,sparkline:m,heatmap:_,riscos:w,alertas:T,headline:P,textoGeral:L}}function yN(){const{tarefas:r,projetos:e,loading:t}=es(),n=H.useMemo(()=>gN(r||[],e||[]),[r,e]);if(t)return E.jsx("div",{className:"dashboard-container",children:E.jsx("div",{className:"dashboard-hero",children:E.jsxs("div",{children:[E.jsx("h1",{children:"Cockpit de Projetos"}),E.jsx("p",{children:"Carregando dados do cronograma..."})]})})});const{kpis:s,atrasadas:a,andamento:u,criticas:d,sparkline:f,heatmap:m,riscos:_,alertas:w}=n;return E.jsxs("div",{className:"dashboard-container",children:[E.jsxs("section",{className:"dashboard-hero",children:[E.jsxs("div",{className:"dashboard-hero-left",children:[E.jsx("h1",{children:"Cockpit de Projetos"}),E.jsx("p",{children:"Viso executiva dos projetos, tarefas e riscos."})]}),E.jsx("div",{className:"dashboard-hero-right",children:E.jsx("span",{children:n.headline})})]}),E.jsxs("section",{className:"dashboard-kpi-grid",children:[E.jsxs("div",{className:"kpi-card",children:[E.jsx("span",{className:"kpi-label",children:"Projetos ativos"}),E.jsx("span",{className:"kpi-value",children:s.totalProjetos})]}),E.jsxs("div",{className:"kpi-card",children:[E.jsx("span",{className:"kpi-label",children:"Tarefas cadastradas"}),E.jsx("span",{className:"kpi-value",children:s.totalTarefas})]}),E.jsxs("div",{className:"kpi-card kpi-ok",children:[E.jsx("span",{className:"kpi-label",children:"Concludas"}),E.jsxs("span",{className:"kpi-value",children:[s.concluidas," (",s.percConcluidas,"%)"]})]}),E.jsxs("div",{className:"kpi-card kpi-risk",children:[E.jsx("span",{className:"kpi-label",children:"Em atraso"}),E.jsxs("span",{className:"kpi-value",children:[s.atrasadas," (",s.percAtrasadas,"%)"]})]})]}),E.jsxs("section",{className:"dashboard-row",children:[E.jsxs("div",{className:"dashboard-card dashboard-card-large",children:[E.jsx("h2",{children:"Resumo Executivo"}),E.jsx("p",{className:"dashboard-resumo-text",children:n.textoGeral}),d.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"dashboard-subtitle",children:"Tarefas crticas no caminho"}),E.jsx("ul",{className:"dashboard-list",children:d.map(T=>E.jsxs("li",{children:[E.jsx("strong",{children:T.nome}),"  ",T.projeto," (fim previsto"," ",T.fimPrevisto,")"]},T.nome+T.projeto))})]})]}),E.jsxs("div",{className:"dashboard-card dashboard-card-medium",children:[E.jsx("h2",{children:"Alertas inteligentes"}),E.jsx("ul",{className:"alert-list",children:w.map((T,P)=>E.jsxs("li",{className:`alert-item alert-${T.tipo}`,children:[E.jsxs("span",{className:"alert-pill",children:[T.tipo==="risco"&&" Risco",T.tipo==="acao"&&" Ao sugerida",T.tipo==="info"&&" Info"]}),E.jsx("p",{children:T.mensagem})]},P))})]}),E.jsxs("div",{className:"dashboard-card dashboard-card-small",children:[E.jsx("h2",{children:"Progresso semanal"}),E.jsx("div",{className:"sparkline",children:f.map((T,P)=>E.jsxs("div",{className:"sparkline-col",children:[E.jsx("div",{className:"sparkline-bar",style:{height:`${Math.max(T.percent,5)}%`},title:`${T.label}: ${T.valor} tarefa(s) concluda(s)`}),E.jsx("span",{className:"sparkline-label",children:T.label})]},P))}),E.jsx("p",{className:"sparkline-legend",children:"Cada barra representa o nmero de tarefas concludas por semana."})]})]}),E.jsxs("section",{className:"dashboard-row",children:[E.jsxs("div",{className:"dashboard-card",children:[E.jsx("h2",{children:"Tarefas em atraso"}),a.length===0?E.jsx("p",{className:"dashboard-muted",children:"Nenhuma tarefa em atraso no momento. Aproveite para antecipar entregas futuras."}):E.jsx("ul",{className:"dashboard-list",children:a.map(T=>E.jsxs("li",{children:[E.jsx("strong",{children:T.nome}),"  ",T.projeto," (previsto para"," ",T.fimOriginal,", atraso estimado de ",T.diasAtraso," dia(s))"]},T.nome+T.projeto))})]}),E.jsxs("div",{className:"dashboard-card",children:[E.jsx("h2",{children:"Heatmap de entregas (prximas semanas)"}),E.jsx("div",{className:"heatmap-grid",children:m.map((T,P)=>E.jsxs("div",{className:"heatmap-col",children:[E.jsx("div",{className:`heatmap-cell nivel-${T.nivel}`,title:`${T.label}: ${T.carga} entrega(s)`}),E.jsx("span",{className:"heatmap-label",children:T.label})]},P))}),E.jsxs("div",{className:"heatmap-legend",children:[E.jsxs("span",{className:"legend-item",children:[E.jsx("span",{className:"legend-dot nivel-1"})," OK"]}),E.jsxs("span",{className:"legend-item",children:[E.jsx("span",{className:"legend-dot nivel-2"})," Ateno"]}),E.jsxs("span",{className:"legend-item",children:[E.jsx("span",{className:"legend-dot nivel-3"})," Crtico"]})]})]}),E.jsxs("div",{className:"dashboard-card",children:[E.jsx("h2",{children:"Top 5 riscos provveis"}),E.jsx("ul",{className:"dashboard-list",children:_.map(T=>E.jsxs("li",{children:[E.jsxs("div",{className:`risco-pill risco-${T.nivel}`,children:[T.titulo,"  ",T.nivel==="alto"?"Alto":"Mdio"," risco"]}),E.jsx("p",{className:"dashboard-muted",children:T.descricao})]},T.id))})]})]})]})}const _N={ativo:"Ativo",concluido:"Concludo",arquivado:"Arquivado"};function vN({projetos:r,onEditar:e}){const{removerProjeto:t}=es();async function n(s){confirm("Tem certeza que deseja excluir este projeto?")&&await t(s)}return!r||!r.length?E.jsx("p",{children:"Nenhum projeto cadastrado."}):E.jsx("div",{className:"projetos-lista",children:r.map(s=>E.jsxs("div",{className:"projeto-card",children:[E.jsxs("div",{className:"projeto-topo",children:[E.jsx("span",{className:"projeto-cor-bolinha",style:{backgroundColor:s.cor||"#0a4723"}}),E.jsxs("div",{className:"projeto-titulo-bloco",children:[E.jsxs("div",{className:"projeto-titulo-linha",children:[E.jsx("h3",{children:s.nome}),E.jsx("span",{className:`projeto-status-chip status-${s.status||"ativo"}`,children:_N[s.status||"ativo"]})]}),s.cliente&&E.jsxs("p",{className:"projeto-cliente",children:["Cliente: ",E.jsx("strong",{children:s.cliente})]})]})]}),E.jsxs("div",{className:"projeto-meta",children:[s.dataInicio&&E.jsxs("span",{children:["Incio:"," ",new Date(s.dataInicio).toLocaleDateString("pt-BR")]}),s.descricao&&E.jsx("p",{className:"projeto-descricao",children:s.descricao.length>140?s.descricao.slice(0,140)+"...":s.descricao})]}),E.jsxs("div",{className:"projeto-acoes",children:[E.jsx("button",{className:"btn-projeto-editar",onClick:()=>e(s),children:"Editar"}),E.jsx("button",{className:"btn-projeto-excluir",onClick:()=>n(s.id),children:"Excluir"})]})]},s.id))})}const wN=["#0a4723","#0b6e3f","#0aa3e8","#c9c900","#e59313","#6b3fa0","#b83280"];function Ow({projetoInicial:r,fechar:e}){const{criarProjeto:t,editarProjeto:n}=es(),[s,a]=H.useState(""),[u,d]=H.useState(""),[f,m]=H.useState(""),[_,w]=H.useState("ativo"),[T,P]=H.useState("#0a4723"),[L,j]=H.useState(""),[N,Y]=H.useState(!1);H.useEffect(()=>{r?(a(r.nome||""),d(r.cliente||""),m(r.dataInicio?String(r.dataInicio).slice(0,10):""),w(r.status||"ativo"),P(r.cor||"#0a4723"),j(r.descricao||"")):(a(""),d(""),m(""),w("ativo"),P("#0a4723"),j(""))},[r]);async function Q(G){G.preventDefault(),Y(!0);const X={nome:s,cliente:u,dataInicio:f,status:_,cor:T,descricao:L};r?await n(r.id,X):await t(X),Y(!1),e()}return E.jsxs("form",{className:"relevo-form projeto-form",onSubmit:Q,children:[E.jsxs("div",{className:"relevo-grid",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Nome do Projeto"}),E.jsx("input",{type:"text",value:s,onChange:G=>a(G.target.value),required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Cliente"}),E.jsx("input",{type:"text",value:u,onChange:G=>d(G.target.value)})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Data de Incio"}),E.jsx("input",{type:"date",value:f,onChange:G=>m(G.target.value)})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Status"}),E.jsxs("select",{value:_,onChange:G=>w(G.target.value),children:[E.jsx("option",{value:"ativo",children:"Ativo"}),E.jsx("option",{value:"concluido",children:"Concludo"}),E.jsx("option",{value:"arquivado",children:"Arquivado"})]})]}),E.jsxs("div",{className:"full",children:[E.jsx("label",{children:"Cor do Projeto"}),E.jsxs("div",{className:"projeto-cor-linha",children:[E.jsx("div",{className:"projeto-cor-opcoes",children:wN.map(G=>E.jsx("button",{type:"button",className:"projeto-cor-opcao"+(G===T?" ativa":""),style:{backgroundColor:G},onClick:()=>P(G)},G))}),E.jsxs("div",{className:"projeto-cor-input-wrapper",children:[E.jsx("input",{type:"color",value:T,onChange:G=>P(G.target.value)}),E.jsx("span",{className:"projeto-cor-hex",children:T})]})]})]}),E.jsxs("div",{className:"full",children:[E.jsx("label",{children:"Descrio"}),E.jsx("textarea",{rows:3,value:L,onChange:G=>j(G.target.value),placeholder:"Descrio resumida do escopo, rea, cliente, etc."})]})]}),E.jsxs("div",{className:"relevo-actions",children:[E.jsx("button",{type:"submit",className:"save",disabled:N,children:N?"Salvando...":"Salvar"}),E.jsx("button",{type:"button",className:"cancel",onClick:e,children:"Cancelar"})]})]})}function tm({open:r,onClose:e,children:t,title:n}){return r?E.jsx("div",{className:"relevo-modal-overlay",onClick:e,children:E.jsxs("div",{className:"relevo-modal-content",onClick:s=>s.stopPropagation(),children:[E.jsxs("div",{className:"relevo-modal-header",children:[E.jsx("h2",{children:n}),E.jsx("button",{className:"relevo-modal-close",onClick:e,children:""})]}),E.jsx("div",{className:"relevo-modal-body",children:t})]})}):null}function EN(){const{projetos:r,loading:e}=es(),[t,n]=H.useState(""),[s,a]=H.useState("todos"),[u,d]=H.useState(!1),[f,m]=H.useState(!1),[_,w]=H.useState(null);function T(){w(null),d(!0)}function P(){d(!1)}function L(Y){w(Y),m(!0)}function j(){m(!1),w(null)}const N=H.useMemo(()=>(r||[]).filter(Y=>{if(!t)return!0;const Q=t.toLowerCase();return Y.nome?.toLowerCase().includes(Q)||Y.cliente?.toLowerCase().includes(Q)}).filter(Y=>s==="todos"?!0:(Y.status||"ativo")===s),[r,t,s]);return E.jsxs("div",{className:"projetos-container",children:[E.jsxs("div",{className:"projetos-header",children:[E.jsx("h1",{children:"Projetos"}),E.jsx("button",{className:"btn-novo-projeto",onClick:T,children:"+ Novo Projeto"})]}),E.jsxs("div",{className:"projetos-filtros",children:[E.jsx("input",{type:"text",placeholder:"Buscar por nome ou cliente...",value:t,onChange:Y=>n(Y.target.value)}),E.jsxs("select",{value:s,onChange:Y=>a(Y.target.value),children:[E.jsx("option",{value:"todos",children:"Todos os status"}),E.jsx("option",{value:"ativo",children:"Ativo"}),E.jsx("option",{value:"concluido",children:"Concludo"}),E.jsx("option",{value:"arquivado",children:"Arquivado"})]})]}),e?E.jsx("p",{children:"Carregando projetos..."}):E.jsx(vN,{projetos:N,onEditar:L}),E.jsx("button",{className:"btn-flutuante-projetos",onClick:T,children:"+"}),E.jsx(tm,{open:u,onClose:P,title:"Novo Projeto",children:E.jsx(Ow,{projetoInicial:null,fechar:P})}),E.jsx(tm,{open:f,onClose:j,title:"Editar Projeto",children:_&&E.jsx(Ow,{projetoInicial:_,fechar:j})})]})}function TN({tarefas:r,projetos:e,onEditar:t,onExcluir:n}){function s(u){return e.find(d=>d.id===u)?.cor||"#0a4723"}function a(u){return e.find(d=>d.id===u)?.nome||""}return r.length?E.jsx("div",{className:"tarefas-lista-container",children:E.jsxs("table",{className:"tarefas-tabela",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Tarefa"}),E.jsx("th",{children:"Perodo"}),E.jsx("th",{children:"Projeto"}),E.jsx("th",{children:"Status"}),E.jsx("th",{children:"Aes"})]})}),E.jsx("tbody",{children:r.map(u=>{const d=new Date(u.inicio),f=new Date(u.fim),m=`${d.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}  ${f.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}`;return E.jsxs("tr",{className:"tarefa-row",children:[E.jsxs("td",{className:"tarefa-col-nome",children:[E.jsx("span",{className:"tarefa-bolinha",style:{backgroundColor:s(u.projetoId)}}),u.nome]}),E.jsx("td",{className:"tarefa-col-periodo",children:m}),E.jsx("td",{className:"tarefa-col-projeto",children:a(u.projetoId)}),E.jsx("td",{className:"tarefa-col-status",children:u.status}),E.jsxs("td",{className:"tarefa-col-acoes",children:[E.jsx("button",{className:"btn-editar",onClick:()=>t(u),children:"Editar"}),E.jsx("button",{className:"btn-excluir",onClick:()=>n(u.id),children:"Excluir"})]})]},u.id)})})]})}):E.jsx("p",{children:"Nenhuma tarefa encontrada."})}function IN({tarefaInicial:r,fechar:e}){const{criarTarefa:t,editarTarefa:n,projetos:s}=es(),[a,u]=H.useState(""),[d,f]=H.useState(""),[m,_]=H.useState(""),[w,T]=H.useState(""),[P,L]=H.useState("pendente"),[j,N]=H.useState(!1);H.useEffect(()=>{r?(u(r.nome||""),f(r.projetoId||""),_(r.inicio?.slice(0,10)||""),T(r.fim?.slice(0,10)||""),L(r.status||"pendente")):(u(""),f(""),_(""),T(""),L("pendente"))},[r]);async function Y(Q){Q.preventDefault(),N(!0);const G={nome:a,projetoId:d,inicio:m,fim:w,status:P};r?await n(r.id,G):await t(G),N(!1),e()}return E.jsxs("form",{className:"relevo-form",onSubmit:Y,children:[E.jsxs("div",{className:"relevo-grid",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Nome da Tarefa"}),E.jsx("input",{type:"text",value:a,onChange:Q=>u(Q.target.value),required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Projeto Vinculado"}),E.jsxs("select",{value:d,onChange:Q=>f(Q.target.value),required:!0,children:[E.jsx("option",{value:"",children:"Selecione..."}),s.map(Q=>E.jsx("option",{value:Q.id,children:Q.nome},Q.id))]})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Incio"}),E.jsx("input",{type:"date",value:m,onChange:Q=>_(Q.target.value),required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Fim"}),E.jsx("input",{type:"date",value:w,onChange:Q=>T(Q.target.value),required:!0})]}),E.jsxs("div",{className:"full",children:[E.jsx("label",{children:"Status"}),E.jsxs("select",{value:P,onChange:Q=>L(Q.target.value),children:[E.jsx("option",{value:"pendente",children:"Pendente"}),E.jsx("option",{value:"andamento",children:"Em andamento"}),E.jsx("option",{value:"concluida",children:"Concluda"}),E.jsx("option",{value:"atrasada",children:"Atrasada"})]})]})]}),E.jsxs("div",{className:"relevo-actions",children:[E.jsx("button",{type:"submit",className:"save",disabled:j,children:j?"Salvando...":"Salvar"}),E.jsx("button",{type:"button",className:"cancel",onClick:e,children:"Cancelar"})]})]})}function SN({tarefas:r,projetos:e}){if(!r?.length)return E.jsx("p",{children:"Nenhuma tarefa encontrada."});const t=[...r].sort((a,u)=>new Date(a.inicio)-new Date(u.inicio)),n={pendente:"#c9c900",andamento:"#0aa3e8",concluida:"#0a8f3a"};function s(a){return e.find(u=>u.id===a)?.cor||"#0a4723"}return E.jsx("div",{className:"timeline-container",children:t.map(a=>E.jsxs("div",{className:"timeline-item",children:[E.jsx("div",{className:"timeline-dot",style:{background:s(a.projetoId)}}),E.jsxs("div",{className:"timeline-content",children:[E.jsx("h3",{children:a.nome}),E.jsxs("p",{children:[E.jsx("strong",{children:"Incio:"})," ",new Date(a.inicio).toLocaleDateString()]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Fim:"})," ",new Date(a.fim).toLocaleDateString()]}),E.jsx("span",{className:"tag",style:{background:n[a.status]},children:a.status})]})]},a.id))})}function AN({tarefas:r}){if(!r?.length)return E.jsx("p",{children:"Nenhuma tarefa encontrada."});const e=[...r].sort((u,d)=>new Date(u.inicio)-new Date(d.inicio)),t={pendente:"#c9c900",andamento:"#0aa3e8",concluida:"#0a8f3a",atrasada:"#d62839"},n=new Date(Math.min(...e.map(u=>new Date(u.inicio))));new Date(Math.max(...e.map(u=>new Date(u.fim))));function s(u){return Math.floor((new Date(u)-n)/(1e3*60*60*24))}function a(u,d){return Math.ceil((new Date(d)-new Date(u))/(1e3*60*60*24))+1}return E.jsx("div",{className:"gantt-container",children:e.map(u=>E.jsxs("div",{className:"gantt-row",children:[E.jsx("div",{className:"gantt-label",children:u.nome}),E.jsx("div",{className:"gantt-track",children:E.jsx("div",{className:"gantt-bar",style:{marginLeft:s(u.inicio)*15+"px",width:a(u.inicio,u.fim)*15+"px",background:t[u.status]||"#555"}})})]},u.id))})}function xN(){const{tarefas:r,projetos:e,loading:t,removerTarefa:n}=es(),[s,a]=H.useState(!1),[u,d]=H.useState(null),[f,m]=H.useState(""),[_,w]=H.useState("todos"),[T,P]=H.useState("todos");function L(){d(null),a(!0)}function j(){a(!1)}function N(X){d(X),a(!0)}async function Y(X){confirm("Tem certeza que deseja excluir esta tarefa?")&&await n(X)}const Q=H.useMemo(()=>r?[...r].sort((X,pe)=>{const Ee=new Date(X.inicio),k=new Date(pe.inicio);if(Ee-k!==0)return Ee-k;const A=(X.nome||"").toLowerCase(),R=(pe.nome||"").toLowerCase();return A<R?-1:A>R?1:(X.id||"").localeCompare(pe.id||"")}):[],[r]),G=H.useMemo(()=>Q.filter(X=>f?X.nome.toLowerCase().includes(f.toLowerCase()):!0).filter(X=>_==="todos"?!0:X.status===_).filter(X=>T==="todos"?!0:X.projetoId===T),[Q,f,_,T]);return E.jsxs("div",{className:"tarefas-container",children:[E.jsxs("div",{className:"tarefas-header",children:[E.jsx("h1",{children:"Cronograma de Tarefas"}),E.jsx("button",{className:"btn-nova-tarefa",onClick:L,children:"+ Nova Tarefa"})]}),E.jsxs("div",{className:"filtros-container",children:[E.jsx("input",{type:"text",placeholder:"Buscar tarefa...",value:f,onChange:X=>m(X.target.value)}),E.jsxs("select",{value:_,onChange:X=>w(X.target.value),children:[E.jsx("option",{value:"todos",children:"Todos os status"}),E.jsx("option",{value:"pendente",children:"Pendente"}),E.jsx("option",{value:"andamento",children:"Em andamento"}),E.jsx("option",{value:"concluida",children:"Concluda"}),E.jsx("option",{value:"atrasada",children:"Atrasada"})]}),E.jsxs("select",{value:T,onChange:X=>P(X.target.value),children:[E.jsx("option",{value:"todos",children:"Todos os projetos"}),e.map(X=>E.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),t?E.jsx("p",{children:"Carregando tarefas..."}):E.jsx(TN,{tarefas:G,projetos:e,onEditar:N,onExcluir:Y}),E.jsx("button",{className:"btn-flutuante",onClick:L,children:"+"}),!t&&G.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("hr",{style:{margin:"40px 0",opacity:.3}}),E.jsx("h2",{style:{marginBottom:"10px"},children:"Gantt Simplificado"}),E.jsx(AN,{tarefas:G,projetos:e})]}),!t&&G.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("hr",{style:{margin:"40px 0",opacity:.3}}),E.jsx("h2",{style:{marginBottom:"10px"},children:"Linha do Tempo"}),E.jsx(SN,{tarefas:G,projetos:e})]}),E.jsx(tm,{open:s,onClose:j,title:u?"Editar Tarefa":"Nova Tarefa",children:E.jsx(IN,{tarefaInicial:u,fechar:j})})]})}function PN({dataBase:r,tarefasExpandida:e,onDiaClick:t,onTarefaClick:n,getCorProjeto:s}){const a=r.getFullYear(),u=r.getMonth(),d=new Date(a,u,1),m=new Date(a,u+1,0).getDate(),_=d.getDay(),w=[];for(let P=0;P<_;P++)w.push({data:null,tarefas:[]});for(let P=1;P<=m;P++){const L=new Date(a,u,P),j=L.toISOString().substring(0,10);w.push({data:L,tarefas:e[j]||[]})}const T=new Date;return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"semana-header",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"].map(P=>E.jsx("div",{className:"semana-header-item",children:P},P))}),E.jsx("div",{className:"mes-grid",children:w.map((P,L)=>{if(!P.data)return E.jsx("div",{className:"mes-celula"},L);const N=`mes-celula ${P.data.toDateString()===T.toDateString()?"hoje":""}`;return E.jsxs("div",{className:N,onClick:()=>t&&t(P.data),children:[E.jsx("div",{className:"mes-celula-header",children:E.jsx("span",{children:P.data.getDate()})}),E.jsx("div",{className:"mes-celula-tarefas",children:P.tarefas.map(Y=>{const Q=Y.status||"";let G="";return Q==="concluida"&&(G="concluida"),Q==="atrasada"&&(G="atrasada"),E.jsx("div",{className:`tag-tarefa ${G}`,style:{borderLeftColor:s?s(Y.projetoId):"#0a4723"},onClick:X=>{X.stopPropagation(),n&&n(Y)},title:Y.nome,children:Y.nome},Y.id)})})]},L)})})]})}function CN({dataBase:r,tarefasExpandida:e,onDiaClick:t,onTarefaClick:n,getCorProjeto:s}){const a=[],u=new Date(r);u.setDate(u.getDate()-u.getDay());const d=new Date;for(let f=0;f<7;f++){const m=new Date(u);m.setDate(u.getDate()+f);const _=m.toISOString().substring(0,10);a.push({data:m,tarefas:e[_]||[]})}return E.jsx("div",{className:"semana-grid",children:a.map((f,m)=>{const w=`semana-celula ${f.data.toDateString()===d.toDateString()?"hoje":""}`;return E.jsxs("div",{className:w,onClick:()=>t&&t(f.data),children:[E.jsxs("strong",{children:[f.data.toLocaleDateString("pt-BR",{weekday:"short"})," ",f.data.getDate()]}),f.tarefas.map(T=>{const P=T.status||"";let L="";return P==="concluida"&&(L="concluida"),P==="atrasada"&&(L="atrasada"),E.jsx("div",{className:`tag-tarefa ${L}`,style:{borderLeftColor:s?s(T.projetoId):"#0a4723"},onClick:j=>{j.stopPropagation(),n&&n(T)},title:T.nome,children:T.nome},T.id)})]},m)})})}function RN({dataBase:r,tarefasExpandida:e,onTarefaClick:t,getCorProjeto:n}){const s=r.toISOString().substring(0,10),a=e[s]||[],u=new Date,d=r.toDateString()===u.toDateString();return E.jsxs("div",{className:"dia-container",children:[E.jsx("h3",{style:{color:d?"#0a4723":"#222"},children:r.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})}),a.length===0&&E.jsx("p",{children:"Nenhuma tarefa neste dia."}),a.map(f=>{const m=f.status||"";let _="";return m==="concluida"&&(_="concluida"),m==="atrasada"&&(_="atrasada"),E.jsxs("div",{className:`tag-tarefa grande ${_}`,style:{borderLeftColor:n?n(f.projetoId):"#0a4723"},onClick:()=>t&&t(f),children:[E.jsx("strong",{children:f.nome}),f.descricao&&E.jsx("p",{children:f.descricao}),E.jsxs("p",{children:[f.inicio," at ",f.fim]})]},f.id)})]})}function DN(r){const e={};return r.forEach(t=>{if(!t.inicio||!t.fim)return;const n=new Date(t.inicio),s=new Date(t.fim),a=new Date(n);for(;a<=s;){const u=a.toISOString().substring(0,10);e[u]||(e[u]=[]),e[u].push(t),a.setDate(a.getDate()+1)}}),e}function NN(){const{tarefas:r,projetos:e}=es(),t=Hw(),[n,s]=H.useState("mes"),[a,u]=H.useState(new Date),[d,f]=H.useState({}),[m,_]=H.useState(null);H.useEffect(()=>{const X=DN(r);f(X)},[r]);const w=H.useMemo(()=>{const X=["#2E7D32","#1565C0","#AD1457","#6A1B9A","#EF6C00","#00897B","#455A64"],pe={};return e.forEach((Ee,k)=>{pe[Ee.id]=X[k%X.length]}),pe},[e]),T=H.useMemo(()=>{const X={};return e.forEach(pe=>{X[pe.id]=pe}),X},[e]);function P(X){if(!X)return"#0a4723";const pe=T[X];return pe&&pe.cor?pe.cor:w[X]||"#0a4723"}function L(X){const pe=new Date(a);pe.setMonth(pe.getMonth()+X),u(pe)}function j(){u(new Date)}function N(X){X&&(u(X),s("dia"))}function Y(X){_(X)}function Q(){_(null)}function G(){t("/tarefas")}return E.jsxs("div",{className:"calendar-container",children:[E.jsxs("div",{className:"calendar-toolbar",children:[E.jsx("button",{className:"calendar-btn",onClick:()=>L(-1),children:""}),E.jsx("button",{className:"calendar-btn",onClick:j,children:"Hoje"}),E.jsx("button",{className:"calendar-btn",onClick:()=>L(1),children:""}),E.jsxs("div",{className:"calendar-view-switch",children:[E.jsx("button",{className:`calendar-btn ${n==="mes"?"active":""}`,onClick:()=>s("mes"),children:"Ms"}),E.jsx("button",{className:`calendar-btn ${n==="semana"?"active":""}`,onClick:()=>s("semana"),children:"Semana"}),E.jsx("button",{className:`calendar-btn ${n==="dia"?"active":""}`,onClick:()=>s("dia"),children:"Dia"})]}),E.jsx("span",{className:"calendar-data",children:a.toLocaleDateString("pt-BR",{year:"numeric",month:"long"})})]}),n==="mes"&&E.jsx(PN,{dataBase:a,tarefasExpandida:d,onDiaClick:N,onTarefaClick:Y,getCorProjeto:P}),n==="semana"&&E.jsx(CN,{dataBase:a,tarefasExpandida:d,onDiaClick:N,onTarefaClick:Y,getCorProjeto:P}),n==="dia"&&E.jsx(RN,{dataBase:a,tarefasExpandida:d,onTarefaClick:Y,getCorProjeto:P}),m&&E.jsx("div",{className:"tarefa-modal-overlay",onClick:Q,children:E.jsxs("div",{className:"tarefa-modal",onClick:X=>X.stopPropagation(),style:{borderTopColor:P(m.projetoId)},children:[E.jsx("h3",{children:m.nome}),m.projetoId&&E.jsxs("p",{children:[E.jsx("strong",{children:"Projeto:"})," ",T[m.projetoId]?.nome||""]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Perodo:"})," ",m.inicio," at"," ",m.fim]}),m.status&&E.jsxs("p",{children:[E.jsx("strong",{children:"Status:"})," ",m.status]}),m.descricao&&E.jsx("p",{style:{marginTop:"0.5rem"},children:m.descricao}),E.jsxs("div",{className:"modal-btns",children:[E.jsx("button",{type:"button",className:"modal-btn",onClick:G,children:"Abrir na tela de Tarefas"}),E.jsx("button",{type:"button",className:"modal-btn",onClick:Q,style:{background:"#777"},children:"Fechar"})]})]})})]})}function Lw(r,e){const t=new Date(r);return t.setDate(t.getDate()+(Number(e)||0)),t.toISOString().slice(0,10)}function kN(){const{projetos:r,loading:e,criarTarefa:t}=es(),[n,s]=H.useState(null),[a,u]=H.useState(""),[d,f]=H.useState([]),[m,_]=H.useState(""),[w,T]=H.useState(!1),[P,L]=H.useState(!1),[j,N]=H.useState(""),[Y,Q]=H.useState(""),[G,X]=H.useState(null);function pe(){s(null),u(""),f([]),_(""),N(""),Q(""),T(!1),L(!1);const ye=document.getElementById("importar-arquivo");ye&&(ye.value="")}function Ee(ye){const fe=ye.target.files?.[0]||null;s(fe),N(""),Q(""),u(""),f([])}async function k(){if(N(""),Q(""),!n){N("Envie um arquivo primeiro.");return}if(!m){N("Selecione um projeto antes de gerar as tarefas.");return}T(!0);const ye=new FormData;ye.append("file",n);try{const fe=await fetch("https://us-central1-portal-relevo.cloudfunctions.net/interpretarArquivo",{method:"POST",body:ye});if(!fe.ok)throw new Error(`Erro HTTP: ${fe.status}`);const le=await fe.json();let ie="",_e=[];if(Array.isArray(le))_e=le;else if(le&&Array.isArray(le.tarefas))_e=le.tarefas,ie=le.texto||le.textoOriginal||"";else{N("A IA retornou um formato inesperado.");return}const ce=_e.map((F,J)=>({idLocal:`${Date.now()}-${J}`,nome:F.nome||"",descricao:F.descricao||"",produto:F.produto||"",categoria:F.categoria||"",responsavel:F.responsavel||"",inicioRelativoDias:Number(F.inicioRelativoDias)||0,duracaoDias:Number(F.duracaoDias)||1,_collapsed:!1}));u(ie||JSON.stringify(_e,null,2)),f(ce),Q("Tarefas geradas com sucesso pela IA.")}catch(fe){console.error(fe),N("Falha ao processar arquivo. Verifique o console.")}finally{T(!1)}}function A(ye,fe,le){f(ie=>ie.map((_e,ce)=>ce===ye?{..._e,[fe]:fe==="inicioRelativoDias"||fe==="duracaoDias"?Number(le)||0:fe==="_collapsed"?!!le:le}:_e))}function R(ye){f(fe=>{const le={...fe[ye],idLocal:`${Date.now()}-copy-${ye}`};return[...fe.slice(0,ye+1),le,...fe.slice(ye+1)]})}function V(ye){f(fe=>fe.filter((le,ie)=>ie!==ye))}function O(ye,fe){X(fe),ye.dataTransfer.effectAllowed="move"}function M(ye,fe){ye.preventDefault(),ye.dataTransfer.dropEffect="move"}function C(ye,fe){ye.preventDefault(),!(G===null||G===fe)&&(f(le=>{const ie=[...le],[_e]=ie.splice(G,1);return ie.splice(fe,0,_e),ie}),X(null))}async function ut(){if(N(""),Q(""),!d.length){N("Nenhuma tarefa para salvar.");return}if(!m){N("Selecione um projeto.");return}L(!0);const ye=new Date().toISOString().slice(0,10);try{for(const fe of d){const le=Lw(ye,fe.inicioRelativoDias!=null?fe.inicioRelativoDias:0),ie=Lw(le,fe.duracaoDias!=null?fe.duracaoDias-1:0);await t({nome:fe.nome||"Tarefa sem nome",descricao:fe.descricao||"",produto:fe.produto||"",categoria:fe.categoria||"",responsavel:fe.responsavel||"",status:"pendente",inicio:le,fim:ie,projetoId:m})}Q("Tarefas salvas com sucesso no projeto.")}catch(fe){console.error(fe),N("Falha ao salvar tarefas.")}finally{L(!1)}}return E.jsxs("div",{className:"importar-wrapper",children:[E.jsxs("div",{className:"importar-header",children:[E.jsx("h1",{children:"Importar Cronograma via IA"}),E.jsx("p",{children:"Envie um arquivo, gere tarefas automaticamente e revise antes de salvar no cronograma."})]}),E.jsxs("div",{className:"importar-card importar-card-top",children:[E.jsxs("div",{className:"importar-row importar-row-top",children:[E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Projeto"}),E.jsxs("select",{value:m,onChange:ye=>_(ye.target.value),disabled:e,className:"importar-select",children:[E.jsx("option",{value:"",children:"-- Selecione um projeto --"}),r.map(ye=>E.jsx("option",{value:ye.id,children:ye.nome},ye.id))]})]}),E.jsxs("div",{className:"importar-field importar-field-file",children:[E.jsx("label",{children:"Arquivo (PDF, DOCX ou TXT)"}),E.jsx("input",{id:"importar-arquivo",type:"file",accept:".pdf,.txt,.doc,.docx",onChange:Ee,disabled:w||P})]}),E.jsx("div",{className:"importar-actions-top",children:E.jsx("button",{type:"button",className:"btn-relevo primario",onClick:k,disabled:!n||!m||w||e,children:w?"Processando...":"Extrair tarefas com IA"})})]}),(j||Y)&&E.jsxs("div",{className:"importar-feedback",children:[j&&E.jsx("div",{className:"importar-alert erro",children:j}),Y&&E.jsx("div",{className:"importar-alert sucesso",children:Y})]})]}),E.jsxs("div",{className:"importar-main-grid",children:[E.jsxs("div",{className:"importar-card importar-preview",children:[E.jsxs("div",{className:"importar-card-header",children:[E.jsx("h2",{children:"Texto extrado"}),E.jsx("span",{className:"importar-subtitle",children:"Visualizao do retorno bruto da IA"})]}),E.jsx("div",{className:"importar-preview-content",children:a?E.jsx("pre",{children:a}):E.jsx("p",{className:"importar-placeholder",children:"Nenhum contedo extrado ainda. Aps o envio do arquivo, o retorno da IA ser exibido aqui em formato textual."})})]}),E.jsxs("div",{className:"importar-card importar-tarefas",children:[E.jsxs("div",{className:"importar-card-header",children:[E.jsx("h2",{children:"Tarefas extradas"}),E.jsx("span",{className:"importar-subtitle",children:"Arraste para reordenar, clique para expandir/contrair e ajuste os campos antes de salvar."})]}),E.jsxs("div",{className:"importar-tarefas-lista",children:[d.length===0&&E.jsx("p",{className:"importar-placeholder",children:"Nenhuma tarefa extrada ainda."}),d.map((ye,fe)=>E.jsxs("div",{className:`importar-tarefa-card ${ye._collapsed?"collapsed":""} ${G===fe?"dragging":""}`,draggable:!0,onDragStart:le=>O(le,fe),onDragOver:le=>M(le),onDrop:le=>C(le,fe),onClick:()=>A(fe,"_collapsed",!ye._collapsed),children:[E.jsxs("div",{className:"importar-tarefa-header",children:[E.jsxs("span",{className:"importar-tarefa-titulo",children:["Tarefa #",fe+1]}),E.jsxs("div",{className:"importar-tarefa-actions",children:[E.jsx("button",{type:"button",className:"btn-icon",title:"Duplicar tarefa",onClick:le=>{le.stopPropagation(),R(fe)},children:""}),E.jsx("button",{type:"button",className:"btn-icon remover",title:"Remover tarefa",onClick:le=>{le.stopPropagation(),V(fe)},children:""})]})]}),E.jsxs("div",{className:"importar-tarefa-grid",children:[E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Nome da tarefa"}),E.jsx("input",{type:"text",value:ye.nome,onChange:le=>{le.stopPropagation(),A(fe,"nome",le.target.value)}})]}),E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Descrio"}),E.jsx("textarea",{rows:2,value:ye.descricao,onChange:le=>{le.stopPropagation(),A(fe,"descricao",le.target.value)}})]}),E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Produto"}),E.jsx("input",{type:"text",value:ye.produto,onChange:le=>{le.stopPropagation(),A(fe,"produto",le.target.value)}})]}),E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Categoria"}),E.jsx("input",{type:"text",value:ye.categoria,onChange:le=>{le.stopPropagation(),A(fe,"categoria",le.target.value)}})]}),E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Responsvel"}),E.jsx("input",{type:"text",value:ye.responsavel,onChange:le=>{le.stopPropagation(),A(fe,"responsavel",le.target.value)}})]}),E.jsxs("div",{className:"importar-field importar-field-inline",children:[E.jsxs("div",{children:[E.jsx("label",{children:"Incio relativo (dias)"}),E.jsx("input",{type:"number",value:ye.inicioRelativoDias,onChange:le=>{le.stopPropagation(),A(fe,"inicioRelativoDias",le.target.value)}})]}),E.jsxs("div",{children:[E.jsx("label",{children:"Durao (dias)"}),E.jsx("input",{type:"number",value:ye.duracaoDias,onChange:le=>{le.stopPropagation(),A(fe,"duracaoDias",le.target.value)}})]})]}),E.jsxs("div",{className:"importar-field",children:[E.jsx("label",{children:"Resumo da relao temporal"}),E.jsxs("div",{className:"importar-tempo-resumo",children:["Inicia"," ",E.jsxs("strong",{children:["+",ye.inicioRelativoDias||0," dia",Math.abs(ye.inicioRelativoDias||0)===1?"":"s"]})," ","aps a data base, com durao de"," ",E.jsxs("strong",{children:[ye.duracaoDias||1," dia",Math.abs(ye.duracaoDias||1)===1?"":"s"]}),"."]})]})]})]},ye.idLocal))]})]})]}),E.jsxs("div",{className:"importar-footer-actions",children:[E.jsx("button",{type:"button",className:"btn-relevo fantasma",onClick:pe,disabled:w||P||e,children:"Limpar tudo"}),E.jsx("div",{className:"importar-footer-right",children:E.jsx("button",{type:"button",className:"btn-relevo primario",onClick:ut,disabled:P||w||e||d.length===0,children:P?"Salvando...":"Salvar tarefas no projeto"})})]})]})}function VN(){return E.jsx("div",{className:"cronograma-scope",children:E.jsxs("div",{className:"layout",children:[E.jsx(bA,{}),E.jsx(OA,{}),E.jsx("main",{className:"content",children:E.jsxs(wA,{children:[E.jsx(ra,{path:"/",element:E.jsx(yN,{})}),E.jsx(ra,{path:"/projetos",element:E.jsx(EN,{})}),E.jsx(ra,{path:"/tarefas",element:E.jsx(xN,{})}),E.jsx(ra,{path:"/calendario",element:E.jsx(NN,{})}),E.jsx(ra,{path:"/importar",element:E.jsx(kN,{})})]})}),E.jsx(jA,{})]})})}function bN(){const{user:r,loading:e}=pI();return e?E.jsx("p",{style:{padding:"20px"},children:"Carregando sesso"}):r?E.jsx(VN,{}):E.jsx("p",{style:{padding:"20px"},children:"Acesso negado. Faa login pelo Portal Relevo."})}function jN(){return E.jsx(CA,{basename:"/cronograma",children:E.jsx(bN,{})})}dI().then(({db:r,auth:e,user:t})=>{console.log(" [main.jsx] Bootstrap concludo via Portal Relevo:",{db:r,auth:e,user:t});const n=document.getElementById("root");if(!n){console.error(" [main.jsx] ERRO FATAL: #root no encontrado no DOM.");return}DS.createRoot(n).render(E.jsx(Mw.StrictMode,{children:E.jsx(QD,{initialUser:t,children:E.jsx(rN,{children:E.jsx(jN,{})})})}))}).catch(r=>{console.error(" [main.jsx] Erro no bootstrap do Cronograma:",r)});
