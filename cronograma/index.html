<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cronogramas | Portal Relevo</title>

  <!-- Base href — necessário para navegação correta nos subpaths -->
  <base href="/cronograma/" />

  <meta name="theme-color" content="#0b2e1b" />
  <link rel="icon" type="image/png" href="/assets/icons/icon-192.png" />

  <!-- Fontes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- CSS Global do Portal -->
  <link rel="stylesheet" href="/styles/global.css" />
  <link rel="stylesheet" href="/styles/relevo-theme.css" />

  <!-- Bridge do Cronograma (somente layout/contraste) -->
  <link rel="stylesheet" href="./cronograma-bridge.css" />

  <!-- CSS do build do Cronograma -->
  <link rel="stylesheet" href="./assets/index.css" />

  <style>
    /* =========================================================
      CONTAINER DO PORTAL (padrão Gestão)
      - Sidebar fixa no desktop
      - Drawer no mobile (breakpoint 900px)
      - Main mais largo
    ========================================================= */

    :root{
      --sidebar-w: 270px;
      --header-h: 64px;
    }

    body{
      margin:0;
      font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--relevo-gradient-soft, #e9f3ee);
      color: var(--texto, #0b2e1b);
      min-height: 100vh;
      overflow-x: hidden;
    }

    .portal-wrap{
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar (desktop) */
    .portal-sidebar{
      width: var(--sidebar-w);
      flex: 0 0 var(--sidebar-w);
      background: rgba(255,255,255,0.72);
      border-right: 1px solid rgba(0,0,0,0.08);
      padding: 18px 14px;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow: auto;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 6px 8px 16px 8px;
      border-bottom: 1px solid rgba(0,0,0,0.08);
      margin-bottom: 14px;
    }
    .brand img{
      width: 40px;
      height: 40px;
      object-fit: contain;
    }
    .brand .brand-text{
      display:flex;
      flex-direction: column;
      line-height: 1.1;
    }
    .brand .brand-text strong{
      font-weight: 800;
      font-size: 14px;
      color: var(--texto, #0b2e1b);
    }
    .brand .brand-text span{
      font-size: 12px;
      opacity: .65;
    }

    .nav{
      display: grid;
      gap: 8px;
      padding: 8px 4px;
    }
    .nav a{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      text-decoration: none;
      color: var(--texto, #0b2e1b);
      border: 1px solid transparent;
      background: transparent;
      font-weight: 600;
    }
    .nav a i{
      width: 18px;
      text-align: center;
      opacity: .9;
    }
    .nav a:hover{
      background: rgba(11, 46, 27, 0.06);
      border-color: rgba(11, 46, 27, 0.08);
    }
    .nav a.is-active{
      background: rgba(11, 46, 27, 0.08);
      border-color: rgba(0, 160, 80, 0.45);
      box-shadow: 0 10px 30px rgba(0,0,0,0.06);
    }

    .nav-sep{
      height: 1px;
      background: rgba(0,0,0,0.08);
      margin: 12px 8px;
    }

    /* Main */
    .portal-main{
      flex: 1;
      padding: 22px 26px;
      display: flex;
      justify-content: center;
    }
    .portal-main-inner{
      width: min(1200px, 100%);
    }

    /* Mobile header + drawer */
    .mobile-topbar{
      display:none;
      position: sticky;
      top: 0;
      z-index: 50;
      height: var(--header-h);
      padding: 12px 12px;
      background: rgba(255,255,255,0.72);
      border-bottom: 1px solid rgba(0,0,0,0.08);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .mobile-topbar .left{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }
    .mobile-topbar img{
      width: 34px;
      height: 34px;
      object-fit: contain;
    }
    .mobile-title{
      display:flex;
      flex-direction: column;
      line-height: 1.1;
      min-width: 0;
    }
    .mobile-title strong{
      font-weight: 800;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .mobile-title span{
      font-size: 12px;
      opacity: .65;
    }

    .hamburger{
      border: 1px solid rgba(0,0,0,0.10);
      background: rgba(255,255,255,0.6);
      border-radius: 12px;
      width: 44px;
      height: 44px;
      display:grid;
      place-items: center;
      cursor:pointer;
    }

    .drawer-overlay{
      display:none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      z-index: 80;
    }
    .drawer{
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: min(var(--sidebar-w), 86vw);
      background: rgba(255,255,255,0.92);
      border-right: 1px solid rgba(0,0,0,0.08);
      padding: 18px 14px;
      transform: translateX(-110%);
      transition: transform .18s ease;
      z-index: 90;
      overflow: auto;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .drawer.open{
      transform: translateX(0);
    }
    .drawer-overlay.open{
      display:block;
    }

    /* Breakpoint */
    @media (max-width: 900px){
      .portal-sidebar{ display:none; }
      .portal-wrap{ display:block; }
      .mobile-topbar{ display:flex; }
      .portal-main{ padding: 16px 14px; }
    }
  </style>
</head>

<body>
  <!-- Topbar Mobile -->
  <div class="mobile-topbar">
    <div class="left">
      <img src="/assets/icons/icon-192.png" alt="Relevo" />
      <div class="mobile-title">
        <strong>Portal Relevo</strong>
        <span>Cronograma</span>
      </div>
    </div>
    <button class="hamburger" id="menuTrigger" aria-label="Abrir menu">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>

  <!-- Drawer Mobile -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="drawer" id="drawer">
    <div class="brand">
      <img src="/assets/icons/icon-192.png" alt="Relevo" />
      <div class="brand-text">
        <strong>Portal Relevo</strong>
        <span>Cronograma</span>
      </div>
    </div>

    <nav class="nav" id="navDrawer">
      <a href="./#/dashboard" data-route="/dashboard"><i class="fa-solid fa-gauge-high"></i> Dashboard</a>
      <a href="./#/projetos" data-route="/projetos"><i class="fa-solid fa-folder-open"></i> Projetos</a>
      <a href="./#/tarefas" data-route="/tarefas"><i class="fa-solid fa-list-check"></i> Tarefas</a>
      <a href="./#/importar" data-route="/importar"><i class="fa-solid fa-wand-magic-sparkles"></i> Importar IA</a>
      <a href="./#/calendario" data-route="/calendario"><i class="fa-solid fa-calendar-days"></i> Calendário</a>

      <div class="nav-sep"></div>

      <a href="/apps/" title="Abrir Apps do Portal"><i class="fa-solid fa-layer-group"></i> Apps</a>
      <a href="/gestao.html" title="Voltar para Gestão"><i class="fa-solid fa-house"></i> Voltar para Gestão</a>
    </nav>
  </aside>

  <div class="portal-wrap">
    <!-- Sidebar Desktop -->
    <aside class="portal-sidebar">
      <div class="brand">
        <img src="/assets/icons/icon-192.png" alt="Relevo" />
        <div class="brand-text">
          <strong>Portal Relevo</strong>
          <span>Cronograma</span>
        </div>
      </div>

      <nav class="nav" id="navSidebar">
        <a href="./#/dashboard" data-route="/dashboard"><i class="fa-solid fa-gauge-high"></i> Dashboard</a>
        <a href="./#/projetos" data-route="/projetos"><i class="fa-solid fa-folder-open"></i> Projetos</a>
        <a href="./#/tarefas" data-route="/tarefas"><i class="fa-solid fa-list-check"></i> Tarefas</a>
        <a href="./#/importar" data-route="/importar"><i class="fa-solid fa-wand-magic-sparkles"></i> Importar IA</a>
        <a href="./#/calendario" data-route="/calendario"><i class="fa-solid fa-calendar-days"></i> Calendário</a>

        <div class="nav-sep"></div>

        <a href="/apps/" title="Abrir Apps do Portal"><i class="fa-solid fa-layer-group"></i> Apps</a>
        <a href="/gestao.html" title="Voltar para Gestão"><i class="fa-solid fa-house"></i> Voltar para Gestão</a>
      </nav>
    </aside>

    <!-- Conteúdo -->
    <section class="portal-main">
      <div class="portal-main-inner">
        <div id="root"></div>
      </div>
    </section>
  </div>

  <!-- Firebase (mesmo padrão do Portal) -->
  <script src="/scripts/firebase-compat.js"></script>
  <script src="/scripts/firebase-init-guard.js"></script>

  <script>
    // Drawer toggle
    const trigger = document.getElementById('menuTrigger');
    const overlay = document.getElementById('drawerOverlay');
    const drawer = document.getElementById('drawer');

    function openDrawer(){
      overlay.classList.add('open');
      drawer.classList.add('open');
    }
    function closeDrawer(){
      overlay.classList.remove('open');
      drawer.classList.remove('open');
    }

    trigger?.addEventListener('click', openDrawer);
    overlay?.addEventListener('click', closeDrawer);

    // Active route highlight (sidebar + drawer)
    function currentRoute(){
      // HashRouter: "#/projetos"
      const h = location.hash || "#/dashboard";
      const route = h.replace(/^#/, "");
      return route.startsWith("/") ? route : ("/" + route);
    }

    function updateActive(){
      const r = currentRoute();
      document.querySelectorAll('[data-route]').forEach(a => {
        a.classList.toggle('is-active', a.getAttribute('data-route') === r);
      });
    }

    window.addEventListener('hashchange', updateActive);
    updateActive();
  </script>

  <!-- App do Cronograma (Vite build) -->
  <script type="module" src="./assets/index.js"></script>
</body>
</html>
