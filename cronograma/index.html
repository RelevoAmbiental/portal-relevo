<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cronogramas | Relevo Consultoria Ambiental</title>

    <!-- 1) Firebase compat: necessÃ¡rio antes de tudo -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

    <!-- 2) Guard do Portal (inicializa Firebase e expÃµe __RELEVO_FIREBASE__) -->
    <script src="/scripts/firebase-init-guard.js"></script>

    <!-- 3) ExposiÃ§Ã£o de sessÃ£o global (define window.__RELEVO_USER__) -->
    <script src="/scripts/expose-session.js"></script>

    <!-- 4) IMPORTANTE: aguarda a sessÃ£o ser exposta antes de carregar o app -->
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        const check = setInterval(() => {
          if (window.__RELEVO_AUTH__ && window.__RELEVO_USER__) {
            clearInterval(check);

            // Carrega dinamicamente os bundles corretos
            const script = document.createElement("script");
            script.type = "module";
            script.src = "/cronograma/assets/index.js";
            document.head.appendChild(script);

            const css = document.createElement("link");
            css.rel = "stylesheet";
            css.href = "/cronograma/assets/index.css";
            document.head.appendChild(css);

            console.log("ðŸ”¥ Cronograma liberado apÃ³s sessÃ£o do Portal.");
          }
        }, 50);
      });
    </script>
  </head>

  <body>
    <div id="root"></div>
  </body>
</html>
