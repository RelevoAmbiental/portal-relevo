<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Relevo - Colaboradores</title>
    
    <!-- Fonte Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Global Harmonizado -->
    <link rel="stylesheet" href="styles/global.css">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

    <style>
        /* ESTILOS ESPEC√çFICOS DOS COLABORADORES */
        
        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 12px 25px;
            border-radius: 25px;
            margin-top: 20px;
            display: inline-block;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .user-info i {
            margin-right: 8px;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card-link {
            background: var(--card-branco);
            border-radius: 12px;
            padding: 30px 25px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-left: 5px solid var(--verde-primario);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .card-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .card-link h3 {
            color: var(--verde-accent);
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .card-link p {
            color: var(--texto-escuro);
            margin-bottom: 12px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .card-link small {
            color: var(--texto-cinza);
            font-size: 0.9rem;
            margin-top: auto;
        }

        /* Card Destaque para Despesas */
        .card-destaque {
            background: linear-gradient(135deg, var(--verde-primario) 0%, var(--verde-escuro) 100%);
            color: white;
            border-left: 5px solid var(--laranja);
            text-align: center;
            padding: 40px 30px;
            grid-column: 1 / -1;
        }

        .card-destaque h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .card-destaque p {
            color: rgba(255,255,255,0.95);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .card-destaque small {
            color: rgba(255,255,255,0.85);
            font-size: 1rem;
        }

        .card-destaque:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(38, 192, 76, 0.3);
        }

        /* Bot√£o Logout Especial */
        .logout-btn {
            background: var(--laranja);
            color: white;
            border: none;
            padding: 16px 35px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 40px auto 0;
            width: 220px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(235, 136, 7, 0.3);
        }

        .logout-btn:hover {
            background: #d97a06;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(235, 136, 7, 0.4);
        }

        .logout-btn i {
            margin-right: 10px;
        }

        /* Header Especial para Colaboradores */
        .header-colaboradores {
            background: linear-gradient(135deg, var(--verde-primario) 0%, var(--verde-escuro) 100%);
            color: white;
            padding: 50px 30px;
            margin-bottom: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .header-colaboradores::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://raw.githubusercontent.com/RelevoAmbiental/imagens/main/DSC_0842.JPG');
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: 1;
        }

        .header-colaboradores > * {
            position: relative;
            z-index: 2;
        }

        .header-colaboradores .logo {
            height: 60px;
            margin-bottom: 20px;
        }

        .header-colaboradores h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header-colaboradores p {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
        }

        /* √çcones nos Cards */
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--verde-primario);
        }

        .card-destaque .card-icon {
            color: white;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .card-destaque {
                grid-column: 1;
                padding: 30px 20px;
            }
            
            .header-colaboradores {
                padding: 40px 20px;
                margin-bottom: 30px;
                border-radius: 15px;
            }
            
            .header-colaboradores h1 {
                font-size: 2rem;
            }
            
            .header-colaboradores p {
                font-size: 1.1rem;
            }
            
            .card-link {
                padding: 25px 20px;
            }
            
            .card-link h3 {
                font-size: 1.3rem;
            }
            
            .logout-btn {
                width: 100%;
                max-width: 280px;
                margin: 30px auto 0;
            }
        }

        @media (max-width: 480px) {
            .header-colaboradores {
                padding: 30px 15px;
            }
            
            .header-colaboradores h1 {
                font-size: 1.8rem;
            }
            
            .header-colaboradores p {
                font-size: 1rem;
            }
            
            .user-info {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .card-destaque h3 {
                font-size: 1.5rem;
            }
            
            .card-destaque p {
                font-size: 1.1rem;
            }
        }

        @media (min-width: 1200px) {
            .cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card-destaque {
                grid-column: 1 / -1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Especial -->
        <div class="header-colaboradores">
            <img src="https://raw.githubusercontent.com/RelevoAmbiental/icons/main/Logo_atualizada_horizontal.png" alt="Relevo Consultoria Ambiental" class="logo">
            <h1>Portal do Colaborador</h1>
            <p>Recursos e ferramentas para a equipe Relevo</p>
            <div class="user-info">
                <i class="fas fa-user"></i> 
                <span id="userName">Carregando...</span>
            </div>
        </div>

        <!-- Grid de Cards -->
        <div class="cards-grid">
            <!-- Card 1: Drive da Empresa -->
            <a href="https://drive.google.com/drive/folders/1sRf2o7s0GwJ2Jm9Xqkz8Q6Y4bLwM1nNp" target="_blank" class="card-link">
                <div class="card-icon">üìÅ</div>
                <h3>Drive da Empresa</h3>
                <p>Acesso completo a documentos, relat√≥rios t√©cnicos, modelos e recursos compartilhados da empresa</p>
                <small>Documenta√ß√£o corporativa e projetos em andamento</small>
            </a>

            <!-- Card 2: SST e Seguran√ßa -->
            <a href="https://drive.google.com/drive/folders/1tS3g4h5jK6L7m8N9p0Q1r2S3t4U5v6W7" target="_blank" class="card-link">
                <div class="card-icon">üõ°Ô∏è</div>
                <h3>SST e Seguran√ßa</h3>
                <p>Procedimentos de seguran√ßa, documentos SST, normas e protocolos de trabalho em campo</p>
                <small>Sa√∫de e seguran√ßa no trabalho - Normas atualizadas</small>
            </a>

            <!-- Card Destaque: Registro de Despesas -->
            <a href="despesas" class="card-link card-destaque">
                <div class="card-icon">üí≥</div>
                <h3>Registro de Despesas</h3>
                <p>Sistema completo para registro de despesas de campo, viagens e atividades externas</p>
                <small>Dispon√≠vel para instala√ß√£o no celular - Clique para abrir</small>
            </a>
        </div>

        <!-- Bot√£o Logout -->
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Sair do Portal
        </button>
    </div>

    <script>
        // Configura√ß√£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBcQi5nToMOGVDBWprhhOY0NSJX4qE100w",
            authDomain: "portal-relevo.firebaseapp.com",
            projectId: "portal-relevo",
            storageBucket: "portal-relevo.firebasestorage.app",
            messagingSenderId: "182759626683",
            appId: "1:182759626683:web:2dde2eeef910d4c288569e"
        };

        // Inicializar Firebase (vers√£o atualizada)
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Verificar autentica√ß√£o
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Buscar dados do usu√°rio no Firestore
                db.collection('users').doc(user.uid).get()
                    .then((doc) => {
                        if (doc.exists) {
                            const userData = doc.data();
                            document.getElementById('userName').textContent = userData.nome || userData.username;
                        }
                    })
                    .catch((error) => {
                        console.error('Erro ao buscar dados do usu√°rio:', error);
                    });
            } else {
                // Redirecionar para login se n√£o estiver autenticado
                window.location.href = 'index.html';
            }
        });

        // Logout
        function logout() {
            auth.signOut()
                .then(() => {
                    window.location.href = 'index.html';
                })
                .catch((error) => {
                    console.error('Erro ao fazer logout:', error);
                    alert('Erro ao fazer logout. Tente novamente.');
                });
        }

        // Melhorar experi√™ncia mobile
        document.addEventListener('DOMContentLoaded', function() {
            // Prevenir zoom em inputs no iOS
            document.addEventListener('touchstart', function() {}, { passive: true });
            
            // Focar no primeiro card para acessibilidade
            const firstCard = document.querySelector('.card-link');
            if (firstCard) {
                firstCard.setAttribute('tabindex', '0');
            }
        });
    </script>
</body>
</html>
