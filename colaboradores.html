<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Colaboradores | Relevo Consultoria Ambiental</title>

      <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/favicon_menos.png">
    
    <!-- Fontes e √çcones -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Global -->
    <link rel="stylesheet" href="styles/global.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="scripts/firebase-init-guard.js"></script>

    <style>
        /* ============================================
           ESTILOS ESPEC√çFICOS DOS COLABORADORES
           ============================================ */
        
        /* Hero com Background */
        .hero-colaboradores {
            background: linear-gradient(135deg, var(--verde-primario) 0%, var(--verde-escuro) 100%);
            color: white;
            padding: 50px 30px;
            margin-bottom: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .hero-colaboradores::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://raw.githubusercontent.com/RelevoAmbiental/imagens/main/DSC_0842.JPG');
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: 0;
        }

        .hero-colaboradores > * {
            position: relative;
            z-index: 1;
        }

        .hero-colaboradores .logo {
            height: 60px;
            margin-bottom: 20px;
            filter: brightness(0) invert(1);
        }

        .hero-colaboradores h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero-colaboradores p {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        /* Info do Usu√°rio */
        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 12px 25px;
            border-radius: 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            font-weight: 500;
        }

        .user-info i {
            font-size: 1.1rem;
        }

        /* Grid de Cards de Recursos */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .resource-card {
            background: var(--card-branco);
            border-radius: 12px;
            padding: 30px 25px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border-left: 5px solid var(--verde-primario);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .resource-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--verde-primario);
            display: block;
        }

        .resource-card h3 {
            color: var(--verde-accent);
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .resource-card p {
            color: var(--texto-escuro);
            margin-bottom: 12px;
            line-height: 1.6;
            flex-grow: 1;
        }

        .resource-card small {
            color: var(--texto-cinza);
            font-size: 0.9rem;
            margin-top: auto;
            font-style: italic;
        }

        /* Card Destaque para Despesas */
        .card-destaque {
            background: linear-gradient(135deg, var(--verde-primario) 0%, var(--verde-escuro) 100%);
            color: white;
            border-left: 5px solid var(--laranja);
            text-align: center;
            padding: 40px 30px;
            grid-column: 1 / -1;
        }

        .card-destaque h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .card-destaque p {
            color: rgba(255,255,255,0.95);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .card-destaque small {
            color: rgba(255,255,255,0.85);
            font-size: 1rem;
        }

        .card-destaque .resource-icon {
            color: white;
            font-size: 3rem;
        }

        .card-destaque:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(38, 192, 76, 0.3);
        }

        /* Bot√£o Logout Especial */
        .logout-btn-large {
            background: var(--laranja);
            color: white;
            border: none;
            padding: 16px 35px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 40px auto 0;
            width: 100%;
            max-width: 280px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(235, 136, 7, 0.3);
            font-family: 'Montserrat', sans-serif;
        }

        .logout-btn-large:hover {
            background: #d97a06;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(235, 136, 7, 0.4);
        }

        .logout-btn-large i {
            margin-right: 10px;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .hero-colaboradores {
                padding: 40px 20px;
                margin-bottom: 30px;
                border-radius: 15px;
            }
            
            .hero-colaboradores h1 {
                font-size: 2rem;
            }
            
            .hero-colaboradores p {
                font-size: 1.1rem;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .card-destaque {
                grid-column: 1;
                padding: 30px 20px;
            }
            
            .resource-card {
                padding: 25px 20px;
            }
            
            .resource-card h3 {
                font-size: 1.3rem;
            }
            
            .logout-btn-large {
                max-width: 100%;
                margin: 30px auto 0;
            }
        }

        @media (max-width: 480px) {
            .hero-colaboradores {
                padding: 30px 15px;
            }
            
            .hero-colaboradores h1 {
                font-size: 1.8rem;
            }
            
            .hero-colaboradores p {
                font-size: 1rem;
            }
            
            .user-info {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .card-destaque h3 {
                font-size: 1.5rem;
            }
            
            .card-destaque p {
                font-size: 1.1rem;
            }

            .resource-icon {
                font-size: 2rem;
            }
        }

        @media (min-width: 1200px) {
            .resources-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card-destaque {
                grid-column: 1 / -1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Hero com Informa√ß√µes do Usu√°rio -->
        <div class="hero-colaboradores">
            <img src="https://raw.githubusercontent.com/RelevoAmbiental/relevo-site/refs/heads/main/assets/icons/Logo_atualizada_horizontal.png" 
                 alt="Relevo Consultoria Ambiental" 
                 class="logo">
            <h1>Portal do Colaborador</h1>
            <p>Recursos e ferramentas para a equipe Relevo</p>
            <div class="user-info">
                <i class="fas fa-user"></i> 
                <span id="userName">Carregando...</span>
            </div>
        </div>

        <!-- Grid de Recursos -->
        <div class="resources-grid">
            <!-- Card 1: Drive da Empresa -->
            <a href="https://drive.google.com/drive/folders/1sRf2o7s0GwJ2Jm9Xqkz8Q6Y4bLwM1nNp" 
               target="_blank" 
               rel="noopener noreferrer"
               class="resource-card">
                <span class="resource-icon">üìÅ</span>
                <h3>Drive da Empresa</h3>
                <p>Acesso completo a documentos, relat√≥rios t√©cnicos, modelos e recursos compartilhados da empresa</p>
                <small>Documenta√ß√£o corporativa e projetos em andamento</small>
            </a>

            <!-- Card 2: SST e Seguran√ßa -->
            <a href="https://drive.google.com/drive/folders/1tS3g4h5jK6L7m8N9p0Q1r2S3t4U5v6W7" 
               target="_blank" 
               rel="noopener noreferrer"
               class="resource-card">
                <span class="resource-icon">üõ°Ô∏è</span>
                <h3>SST e Seguran√ßa</h3>
                <p>Procedimentos de seguran√ßa, documentos SST, normas e protocolos de trabalho em campo</p>
                <small>Sa√∫de e seguran√ßa no trabalho - Normas atualizadas</small>
            </a>

            <!-- Card Destaque: Registro de Despesas -->
            <a href="despesas" class="resource-card card-destaque">
                <span class="resource-icon">üí≥</span>
                <h3>Registro de Despesas</h3>
                <p>Sistema completo para registro de despesas de campo, viagens e atividades externas</p>
                <small>Dispon√≠vel para instala√ß√£o no celular - Clique para abrir</small>
            </a>
        </div>

        <!-- Bot√£o Logout -->
        <button class="logout-btn-large" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Sair do Portal
        </button>
    </div>

    <script>
        // ============================================
        // CONFIGURA√á√ÉO DO FIREBASE
        // ============================================
        const firebaseConfig = {
            apiKey: "AIzaSyBcQi5nToMOGVDBWprhhOY0NSJX4qE100w",
            authDomain: "portal-relevo.firebaseapp.com",
            projectId: "portal-relevo",
            storageBucket: "portal-relevo.firebasestorage.app",
            messagingSenderId: "182759626683",
            appId: "1:182759626683:web:2dde2eeef910d4c288569e"
        };

        // Inicializar Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
            console.log('‚úÖ Firebase Portal inicializado');
        }

        const auth = firebase.auth();
        const db = firebase.firestore();

        // ============================================
        // VERIFICAR AUTENTICA√á√ÉO E CARREGAR DADOS
        // ============================================
        auth.onAuthStateChanged((user) => {
            if (user) {
                console.log('‚úÖ Usu√°rio autenticado:', user.uid);
                carregarDadosUsuario(user.uid);
            } else {
                console.log('‚ùå Usu√°rio n√£o autenticado - Redirecionando...');
                window.location.href = 'index.html';
            }
        });

        // ============================================
        // CARREGAR DADOS DO USU√ÅRIO
        // ============================================
        async function carregarDadosUsuario(uid) {
            try {
                const userDoc = await db.collection('users').doc(uid).get();
                
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    const nomeExibicao = userData.nome || userData.username || 'Colaborador';
                    
                    document.getElementById('userName').textContent = nomeExibicao;
                    console.log('‚úÖ Dados do usu√°rio carregados:', nomeExibicao);
                } else {
                    console.warn('‚ö†Ô∏è Documento do usu√°rio n√£o encontrado');
                    document.getElementById('userName').textContent = 'Colaborador';
                }
            } catch (error) {
                console.error('‚ùå Erro ao buscar dados do usu√°rio:', error);
                document.getElementById('userName').textContent = 'Colaborador';
            }
        }

        // ============================================
        // FUN√á√ÉO DE LOGOUT
        // ============================================
        function logout() {
            if (confirm('Deseja realmente sair do sistema?')) {
                auth.signOut()
                    .then(() => {
                        console.log('‚úÖ Logout realizado com sucesso');
                        window.location.href = 'index.html';
                    })
                    .catch((error) => {
                        console.error('‚ùå Erro ao fazer logout:', error);
                        alert('Erro ao fazer logout. Tente novamente.');
                    });
            }
        }

        // ============================================
        // MELHORIAS DE UX
        // ============================================
        
        // Prevenir zoom em inputs no iOS
        document.addEventListener('touchstart', function() {}, { passive: true });
        
        // Adicionar anima√ß√£o suave aos cards
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Portal do Colaborador carregado');
            
            // Animar entrada dos cards
            const cards = document.querySelectorAll('.resource-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.transition = 'all 0.5s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 10);
                }, index * 100);
            });
        });

        // Adicionar feedback visual aos cliques
        document.querySelectorAll('.resource-card').forEach(card => {
            card.addEventListener('click', function(e) {
                this.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 100);
            });
        });
    </script>
</body>
</html>



